(()=>{var e,t,i,s,n,a={59166:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="background-overlay"></div>\n<div class="settings-panel">\n    <div class="settings-transition-wrap">\n        <div class="left-column settings-column noselect">\n            <div class="settings-account-head">\n                <i class="btn-back mdi mdi-24px mdi-arrow-left"></i>\n                <div class="name one-line"></div>\n                <svg class="btn-color-picker dropdown-button mdi mdi-24px mdi-svg-template" data-activates="color-picker-dropdown" data-svgname="palette"></svg>\n                <ul id="color-picker-dropdown" class="dropdown-content color-picker-dropdown bootstrap-dropdown noselect">\n                    <div class="property-variant color-picker-button" data-color-value="red">\n                        <span class="one-line text-color-red-700">{[print(xabber.getString("account_color_name_red"))]}</span>\n                    </div>\n                    <div class="property-variant color-picker-button" data-color-value="pink">\n                        <span class="one-line text-color-pink-700">{[print(xabber.getString("account_color_name_pink"))]}</span>\n                    </div>\n                    <div class="property-variant color-picker-button" data-color-value="purple">\n                        <span class="one-line text-color-purple-700">{[print(xabber.getString("account_color_name_purple"))]}</span>\n                    </div>\n                    <div class="property-variant color-picker-button" data-color-value="deep-purple">\n                        <span class="one-line text-color-deep-purple-700">{[print(xabber.getString("account_color_name_deep_purple").replace(/-/g, " "))]}</span>\n                    </div>\n                    <div class="property-variant color-picker-button" data-color-value="indigo">\n                        <span class="one-line text-color-indigo-700">{[print(xabber.getString("account_color_name_indigo"))]}</span>\n                    </div>\n                    <div class="property-variant color-picker-button" data-color-value="blue">\n                        <span class="one-line text-color-blue-700">{[print(xabber.getString("account_color_name_blue"))]}</span>\n                    </div>\n                    <div class="property-variant color-picker-button" data-color-value="light-blue">\n                        <span class="one-line text-color-light-blue-700">{[print(xabber.getString("account_color_name_light_blue").replace(/-/g, " "))]}</span>\n                    </div>\n                    <div class="property-variant color-picker-button" data-color-value="cyan">\n                        <span class="one-line text-color-cyan-700">{[print(xabber.getString("account_color_name_cyan"))]}</span>\n                    </div>\n                    <div class="property-variant color-picker-button" data-color-value="teal">\n                        <span class="one-line text-color-teal-700">{[print(xabber.getString("account_color_name_teal"))]}</span>\n                    </div>\n                    <div class="property-variant color-picker-button" data-color-value="green">\n                        <span class="one-line text-color-green-700">{[print(xabber.getString("account_color_name_green"))]}</span>\n                    </div>\n                    <div class="property-variant color-picker-button" data-color-value="light-green">\n                        <span class="one-line text-color-light-green-700">{[print(xabber.getString("account_color_name_light_green").replace(/-/g, " "))]}</span>\n                    </div>\n                    <div class="property-variant color-picker-button" data-color-value="lime">\n                        <span class="one-line text-color-lime-700">{[print(xabber.getString("account_color_name_lime"))]}</span>\n                    </div>\n                    <div class="property-variant color-picker-button" data-color-value="amber">\n                        <span class="one-line text-color-amber-700">{[print(xabber.getString("account_color_name_amber"))]}</span>\n                    </div>\n                    <div class="property-variant color-picker-button" data-color-value="orange">\n                        <span class="one-line text-color-orange-700">{[print(xabber.getString("account_color_name_orange"))]}</span>\n                    </div>\n                    <div class="property-variant color-picker-button" data-color-value="deep-orange">\n                        <span class="one-line text-color-deep-orange-700">{[print(xabber.getString("account_color_name_deep_orange").replace(/-/g, " "))]}</span>\n                    </div>\n                    <div class="property-variant color-picker-button" data-color-value="brown">\n                        <span class="one-line text-color-brown-700">{[print(xabber.getString("account_color_name_brown"))]}</span>\n                    </div>\n                    <div class="property-variant color-picker-button" data-color-value="blue-grey">\n                        <span class="one-line text-color-blue-grey-700">{[print(xabber.getString("account_color_name_blue_grey").replace(/-/g, " "))]}</span>\n                    </div>\n                </ul>\n                <svg class="btn-qr-code mdi mdi-24px mdi-svg-template" data-svgname="qrcode"></svg>\n                <div class="field clickable-field enabled-state switch normal">\n                    <label class="field-value">\n                        <input type="checkbox">\n                        <span class="lever"></span>\n                    </label>\n                </div>\n            </div>\n            <div class="main-info-wrap account-main-info-wrap">\n                <div class="picture-wrap">\n                    <div class="avatar-wrap">\n                        <div class="circle-avatar dropdown-button" data-activates="{{view.cid}}-profile-image">\n                            <img/>\n                            <input type="file"/>\n                            <ul id="{{view.cid}}-profile-image" class="profile-image-dropdown dropdown-content noselect">\n                                <div class="btn-emoji-panel property-variant">\n                                    {[print(xabber.getString("account_emoji_profile_image_button"))]}\n                                </div>\n                                <div class="btn-selfie property-variant">\n                                    {[print(xabber.getString("account_webcam_profile_image_button"))]}\n                                </div>\n                                <div class="btn-choose-image property-variant">\n                                    {[print(xabber.getString("account_profile_image_button"))]}\n                                </div>\n                            </ul>\n                            <svg class="set-groupchat-avatar" viewBox="0 0 24 24">\n                                <path d="M4,4H7L9,2H15L17,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9Z" />\n                            </svg>\n                        </div>\n                    </div>\n                </div>\n                <div class="name one-line"></div>\n                <div class="jid one-line"></div>\n            </div>\n            <div class="settings-tabs-wrap">\n                <div class="settings-tab" data-block-name="profile">\n                    <div class="setting-icon-background">\n                        <svg class="mdi mdi-24px mdi-svg-template" data-svgname="account"></svg>\n                    </div>\n                    <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__section_header_profile"))]}</div>\n                    <div class="settings-block-label one-line">{[print(xabber.getString("settings_account__profile_label"))]}</div>\n                </div>\n                <div class="settings-tab" data-block-name="media-gallery">\n                    <div class="setting-icon-background">\n                        <svg class="mdi mdi-24px mdi-svg-template" data-svgname="cloud"></svg>\n                    </div>\n                    <div class="settings-block-name one-line">{[print(xabber.getString("account_cloud_storage"))]}</div>\n                    <div class="settings-block-label one-line">{[print(xabber.getString("placeholder_loading"))]}</div>\n                </div>\n                <div class="settings-tab" data-block-name="encryption">\n                    <div class="setting-icon-background">\n                        <svg class="mdi mdi-24px mdi-svg-template" data-svgname="key"></svg>\n                    </div>\n                    <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__encryption"))]}</div>\n                    <div class="settings-block-label hidden label-encryption-enabled one-line">{[print(xabber.getString("settings_account__encryption_enabled_label"))]}</div>\n                    <div class="settings-block-label label-encryption-disabled one-line">{[print(xabber.getString("settings_account__encryption_disabled_label"))]}</div>\n                </div>\n                <div class="settings-tab" data-block-name="trust">\n                    <div class="setting-icon-background">\n                        <svg class="mdi mdi-24px mdi-svg-template" data-svgname="key"></svg>\n                    </div>\n                    <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__trust"))]}</div>\n                    <div class="settings-block-label one-line">{[print(xabber.getString("settings_account__settings_account__trust_label"))]}</div>\n                </div>\n            </div>\n            <div class="devices-wrap hidden">\n                <div class="device-encryption-warning hidden" data-not-trusted-count="0">\n                    <svg class="device-encryption-icon mdi mdi-40px mdi-svg-template" data-svgname="alert-circle"></svg>\n                    <div class="device-encryption-warning-name one-line">{[print(xabber.getString("settings_account__encryption_warning_header"))]}</div>\n                    <div class="device-encryption-warning-label"></div>\n                </div>\n                <div class="tokens-wrap">\n                    <div class="settings-panel-label">{[print(xabber.getString("settings_account__label_this_device"))]}</div>\n                    <div class="current-token-wrap">\n                        <div class="sessions-wrap current-session selectable-text"></div>\n                        <div class="btn-revoke-all-tokens settings-button-devices">\n                            <svg class="mdi mdi-24px mdi-svg-template" data-svgname="restrictions-outline"></svg>\n                            <div class="settings-button-devices-label">{[print(xabber.getString("account_terminate_all_sessions"))]}</div>\n                        </div>\n                    </div>\n                    <div class="settings-panel-label active-sessions-label">{[print(xabber.getString("settings_account__label_active_sessions"))]}</div>\n                    <div class="all-sessions-wrap">\n                        <div class="sessions-wrap all-sessions selectable-text"></div>\n                    </div>\n                    <div class="orphaned-fingerprints hidden">\n                        <div class="orphaned-fingerprints-label">{[print(xabber.getString("omemo__dialog_fingerprints__legacy_encryption_label"))]}</div>\n                        <div class="orphaned-fingerprints-wrap selectable-text"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="settings-tabs-wrap">\n                <div class="settings-tab settings-deletion-button delete-account">\n                    <div class="setting-icon-background">\n                        <i class="mdi mdi-24px mdi-logout-variant"></i>\n                    </div>\n                    <div class="settings-block-name">{[print(xabber.getString("settings_account__button_quit_account"))]}</div>\n                </div>\n            </div>\n        </div>\n\n        <div class="right-column settings-column noselect">\n            <div class="settings-panel-head">\n                <i class="btn-back-settings mdi mdi-24px mdi-arrow-left"></i>\n                <i class="btn-back-subsettings-account mdi mdi-24px mdi-arrow-left hidden"></i>\n                <span class="settings-panel-head-title">{[print(xabber.getString("account_editor"))]}</span>\n                <i class="btn-sorting dropdown-button mdi mdi-24px mdi-sort hidden" data-activates="storage-file-sorting"></i>\n                <ul id="storage-file-sorting" class="dropdown-content bootstrap-dropdown noselect">\n                    <div class="property-variant btn-gallery-sorting" data-value="-id">\n                        <span class="one-line">{[print(xabber.getString("account_media_gallery_sorting_new"))]}</span>\n                    </div>\n                    <div class="property-variant btn-gallery-sorting" data-value="-size">\n                        <span class="one-line">{[print(xabber.getString("account_media_gallery_sorting_size"))]}</span>\n                    </div>\n                </ul>\n                <div class="btn-more media-gallery-button dropdown-button hidden" data-activates="storage-actions">\n                    <i class="mdi mdi-24px mdi-dots-vertical"></i>\n                </div>\n                <ul id="storage-actions" class="dropdown-content noselect">\n                    <div class="property-variant btn-select-files hidden">\n                        <span class="one-line">{[print(xabber.getString("account_select_files"))]}</span>\n                    </div>\n                </ul>\n            </div>\n\n            <div class="panel-content-wrap">\n                <div class="panel-content details-panel">\n\n                    <div data-header=\'{[print(xabber.getString("settings_account__section_header_profile"))]}\' class="settings-block-wrap profile">\n                        <div class="settings-tabs-wrap">\n                            <div class="settings-tab settings-non-tab" data-subblock-parent-name="profile" data-block-name="status">\n                                <div class="setting-icon-background">\n                                    <svg class="mdi mdi-24px mdi-svg-template" data-svgname="status"></svg>\n                                </div>\n                                <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__status_subheader"))]}</div>\n                                <div class="settings-block-label one-line"></div>\n                            </div>\n                            <div class="settings-tab" data-subblock-parent-name="profile" data-block-name="vcard-tab">\n                                <div class="setting-icon-background">\n                                    <svg class="mdi mdi-24px mdi-svg-template" data-svgname="account"></svg>\n                                </div>\n                                <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__edit_profile"))]}</div>\n                                <div class="settings-block-label one-line">{[print(xabber.getString("settings_account__edit_profile_label"))]}</div>\n                            </div>\n                            <div class="settings-tab" data-subblock-parent-name="profile" data-block-name="password">\n                                <div class="setting-icon-background">\n                                    <svg class="mdi mdi-24px mdi-svg-template" data-svgname="key"></svg>\n                                </div>\n                                <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__password_subheader"))]}</div>\n                                <div class="settings-block-label one-line">{[print(xabber.getString("settings_account__password_subheader_label"))]}</div>\n                            </div>\n                            <div class="settings-tab" data-subblock-parent-name="profile" data-block-name="blocklist">\n                                <div class="setting-icon-background">\n                                    <svg class="mdi mdi-24px mdi-svg-template" data-svgname="cancel"></svg>\n                                </div>\n                                <div class="settings-block-name one-line">{[print(xabber.getString("block_list"))]}</div>\n                                <div class="settings-block-label one-line"></div>\n                            </div>\n                            <div class="settings-tab" data-subblock-parent-name="profile" data-block-name="circles-groups">\n                                <div class="setting-icon-background">\n                                    <svg class="mdi mdi-24px mdi-svg-template" data-svgname="circles-outline"></svg>\n                                </div>\n                                <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__section_header_circles"))]}</div>\n                                <div class="settings-block-label one-line"></div>\n                            </div>\n                            <div class="settings-tab" data-subblock-parent-name="profile" data-block-name="capabitilies">\n                                <div class="setting-icon-background">\n                                    <svg class="mdi mdi-24px mdi-svg-template" data-svgname="information"></svg>\n                                </div>\n                                <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__capabilities_subheader"))]}</div>\n                                <div class="settings-block-label one-line">{[print(xabber.getString("settings_account__capabilities_subheader_label"))]}</div>\n                            </div>\n                            <div class="settings-tab unregister-account settings-deletion-button settings-non-tab" data-subblock-parent-name="profile" data-block-name="delete-account">\n                                <div class="setting-icon-background">\n                                    <svg class="mdi mdi-24px mdi-svg-template" data-svgname="trash"></svg>\n                                </div>\n                                <div class="settings-block-name settings-block-name-single one-line">{[print(xabber.getString("settings_account__delete_account_subheader"))]}</div>\n                            </div>\n                        </div>\n                    </div>\n                    <div data-header=\'{[print(xabber.getString("settings_account__status_subheader"))]}\' class="settings-block-wrap status">\n                        <div class="settings-subblock-wrap">\n                            <div class="status-wrap setting"></div>\n                            <div class="status"></div>\n                        </div>\n                    </div>\n                    <div data-header=\'{[print(xabber.getString("settings_account__edit_profile"))]}\' class="settings-block-wrap vcard-tab">\n                        <div class="settings-subblock-wrap">\n                            <div class="vcard">\n                            </div>\n                        </div>\n                    </div>\n                    <div class="block-list-view-wrap">\n                        <div data-header=\'{[print(xabber.getString("block_list"))]}\' data-parent-block="profile" class="settings-block-wrap blocklist">\n                            <div class="settings-subblock-wrap">\n                                <div class="blocklist-info">\n                                    <div class="blocklist-wrap">\n                                        <div class="buttons-wrap">\n                                            <svg class="mdi mdi-24px mdi-svg-template btn-block" data-svgname="blocked-add"></svg>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="settings-tabs-wrap">\n                                <div class="settings-tab" data-subblock-parent-name="blocklist" data-block-name="blocklist-contacts">\n                                    <div class="setting-icon-background">\n                                        <svg class="mdi mdi-24px mdi-svg-template" data-svgname="account-cancel"></svg>\n                                    </div>\n                                    <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__blocked_contacts"))]}</div>\n                                    <div class="settings-block-label one-line"></div>\n                                </div>\n                                <div class="settings-tab" data-subblock-parent-name="blocklist" data-block-name="blocklist-domains">\n                                    <div class="setting-icon-background">\n                                        <svg class="mdi mdi-24px mdi-svg-template" data-svgname="web-cancel"></svg>\n                                    </div>\n                                    <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__blocked_domains"))]}</div>\n                                    <div class="settings-block-label one-line"></div>\n                                </div>\n                                <div class="settings-tab hidden" data-subblock-parent-name="blocklist" data-block-name="blocklist-invitations">\n                                    <div class="setting-icon-background">\n                                        <svg class="mdi mdi-24px mdi-svg-template" data-svgname="invite"></svg>\n                                    </div>\n                                    <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__blocked_invitations"))]}</div>\n                                    <div class="settings-block-label one-line"></div>\n                                </div>\n                            </div>\n                        </div>\n                        <div data-header=\'{[print(xabber.getString("settings_account__blocked_contacts"))]}\' data-block-name="blocklist-contacts" class="settings-block-wrap blocklist-contacts">\n                            <div class="settings-subblock-wrap">\n                                <div class="blocklist-info">\n                                    <div class="blocklist-wrap">\n                                        <div class="buttons-wrap">\n                                            <svg class="mdi mdi-24px mdi-svg-template btn-block" data-svgname="blocked-add"></svg>\n                                            <button class="btn-deselect-blocked btn-flat btn-main   hidden">{[print(xabber.getString("cancel"))]}</button>\n                                            <button class="btn-unblock-selected btn-flat btn-main text-color-500  hidden">{[print(xabber.getString("unblock_selected"))]}</button>\n                                        </div>\n                                        <div class="blocked-items">\n                                            <div class="blocked-contacts-placeholder placeholder">{[print(xabber.getString("blocked_contacts_empty"))]}</div>\n                                            <div class="blocked-items-container blocked-contacts-wrap" data-tab-name="contacts-item">\n                                                <div class="blocked-contacts blocked-list"></div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div data-header=\'{[print(xabber.getString("settings_account__blocked_domains"))]}\' data-block-name="blocklist-domains" class="settings-block-wrap blocklist-domains">\n                            <div class="settings-subblock-wrap">\n                                <div class="blocklist-info">\n                                    <div class="blocklist-wrap">\n                                        <div class="buttons-wrap">\n                                            <svg class="mdi mdi-24px mdi-svg-template btn-block" data-svgname="blocked-add"></svg>\n                                            <button class="btn-deselect-blocked btn-flat btn-main   hidden">{[print(xabber.getString("cancel"))]}</button>\n                                            <button class="btn-unblock-selected btn-flat btn-main text-color-500  hidden">{[print(xabber.getString("unblock_selected"))]}</button>\n                                        </div>\n                                        <div class="blocked-items">\n                                            <div class="blocked-domains-placeholder placeholder">{[print(xabber.getString("blocked_domains_empty"))]}</div></div>\n                                        <div class="blocked-items-container blocked-domains-wrap" data-tab-name="domains-item">\n                                            <div class="blocked-domains blocked-list"></div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div data-header=\'{[print(xabber.getString("settings_account__blocked_invitations"))]}\' data-block-name="blocklist-invitations" class="settings-block-wrap blocklist-invitations">\n                        <div class="settings-subblock-wrap">\n                            <div class="blocklist-info">\n                                <div class="blocklist-wrap">\n                                    <div class="buttons-wrap">\n                                        <svg class="mdi mdi-24px mdi-svg-template btn-block" data-svgname="blocked-add"></svg>\n                                        <button class="btn-deselect-blocked btn-flat btn-main   hidden">{[print(xabber.getString("cancel"))]}</button>\n                                        <button class="btn-unblock-selected btn-flat btn-main text-color-500  hidden">{[print(xabber.getString("unblock_selected"))]}</button>\n                                    </div>\n                                    <div class="blocked-items">\n                                        <div class="blocked-invitations-placeholder placeholder">{[print(xabber.getString("blocked_invitations_empty"))]}</div>\n                                        <div class="blocked-items-container blocked-invitations-wrap" data-tab-name="invitations-item">\n                                            <div class="blocked-invitations blocked-list"></div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div data-header=\'{[print(xabber.getString("settings_account__section_header_circles"))]}\' class="settings-block-wrap circles-groups">\n                        <div class="settings-subblock-wrap">\n                            <div class="groups-info">\n                                <div class="groups-wrap">\n                                    <div class="groups">\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div data-header=\'{[print(xabber.getString("settings_account__capabilities_subheader"))]}\' class="settings-block-wrap capabitilies">\n                        <div class="settings-subblock-wrap">\n                            <div class="server-info">\n                                <div class="capabilities-wrap">\n                                    <div class="capabilities">\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div data-header=\'{[print(xabber.getString("color"))]}\' class="settings-block-wrap color-scheme">\n                        <div class="color-scheme-wrap">\n                            <div class="account-color">\n                                <div class="field radio-field clickable-field">\n                                    <form action="#">\n                                        <p>\n                                            <input class="with-gap" name="account_color" value="red" type="radio" id="color-red" />\n                                            <label class="text-color-red-700" for="color-red">{[print(xabber.getString("account_color_name_red"))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="account_color" value="pink" type="radio" id="color-pink" />\n                                            <label class="text-color-pink-700" for="color-pink">{[print(xabber.getString("account_color_name_pink"))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="account_color" value="purple" type="radio" id="color-purple" />\n                                            <label class="text-color-purple-700" for="color-purple">{[print(xabber.getString("account_color_name_purple"))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="account_color" value="deep-purple" type="radio" id="color-deep-purple" />\n                                            <label class="text-color-deep-purple-700" for="color-deep-purple">{[print(xabber.getString("account_color_name_deep_purple").replace(/-/g, " "))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="account_color" value="indigo" type="radio" id="color-indigo" />\n                                            <label class="text-color-indigo-700" for="color-indigo">{[print(xabber.getString("account_color_name_indigo"))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="account_color" value="blue" type="radio" id="color-blue" />\n                                            <label class="text-color-blue-700" for="color-blue">{[print(xabber.getString("account_color_name_blue"))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="account_color" value="light-blue" type="radio" id="color-light-blue" />\n                                            <label class="text-color-light-blue-700" for="color-light-blue">{[print(xabber.getString("account_color_name_light_blue").replace(/-/g, " "))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="account_color" value="cyan" type="radio" id="color-cyan" />\n                                            <label class="text-color-cyan-700" for="color-cyan">{[print(xabber.getString("account_color_name_cyan"))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="account_color" value="teal" type="radio" id="color-teal" />\n                                            <label class="text-color-teal-700" for="color-teal">{[print(xabber.getString("account_color_name_teal"))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="account_color" value="green" type="radio" id="color-green" />\n                                            <label class="text-color-green-700" for="color-green">{[print(xabber.getString("account_color_name_green"))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="account_color" value="light-green" type="radio" id="color-light-green" />\n                                            <label class="text-color-light-green-700" for="color-light-green">{[print(xabber.getString("account_color_name_light_green").replace(/-/g, " "))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="account_color" value="lime" type="radio" id="color-lime" />\n                                            <label class="text-color-lime-700" for="color-lime">{[print(xabber.getString("account_color_name_lime"))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="account_color" value="amber" type="radio" id="color-amber" />\n                                            <label class="text-color-amber-700" for="color-amber">{[print(xabber.getString("account_color_name_amber"))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="account_color" value="orange" type="radio" id="color-orange" />\n                                            <label class="text-color-orange-700" for="color-orange">{[print(xabber.getString("account_color_name_orange"))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="account_color" value="deep-orange" type="radio" id="color-deep-orange" />\n                                            <label class="text-color-deep-orange-700" for="color-deep-orange">{[print(xabber.getString("account_color_name_deep_orange").replace(/-/g, " "))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="account_color" value="brown" type="radio" id="color-brown" />\n                                            <label class="text-color-brown-700" for="color-brown">{[print(xabber.getString("account_color_name_brown"))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="account_color" value="blue-grey" type="radio" id="color-blue-grey" />\n                                            <label class="text-color-blue-grey-700" for="color-blue-grey">{[print(xabber.getString("account_color_name_blue_grey").replace(/-/g, " "))]}</label>\n                                        </p>\n                                    </form>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div data-header=\'{[print(xabber.getString("settings_account__encryption"))]}\' class="settings-block-wrap encryption">\n                        <div class="btn-more device-more-button dropdown-button" data-activates="device-omemo-actions">\n                            <i class="mdi mdi-24px mdi-dots-vertical"></i>\n                        </div>\n                        <ul id="device-omemo-actions" class="dropdown-content bootstrap-dropdown noselect">\n                            <div class="property-variant btn-manage-devices">\n                                <span class="one-line">{[print(xabber.getString("omemo__settings__button_manage_devices"))]}</span>\n                            </div>\n                            <div class="property-variant btn-purge-keys">\n                                <span class="one-line">{[print(xabber.getString("omemo__settings__button_purge_keys"))]}</span>\n                            </div>\n                        </ul>\n                        <div class="omemo-settings-wrap">\n                            <div class="settings">\n                                <div class="setting-wrap omemo-enable">\n                                    <span>{[print(xabber.getString("omemo__settings__toggle_enable_encryption"))]}</span>\n                                    <div class="field setting-use-omemo switch normal">\n                                        <label class="field-value">\n                                            <input type="checkbox">\n                                            <span class="lever"></span>\n                                        </label>\n                                    </div>\n                                </div>\n                                <div class="setting-wrap send-chat-states">\n                                    <span>{[print(xabber.getString("omemo__settings__toggle_send_typing_notifications"))]}</span>\n                                    <div class="field setting-send-chat-states switch normal">\n                                        <label class="field-value">\n                                            <input type="checkbox">\n                                            <span class="lever"></span>\n                                        </label>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                    </div>\n\n                    <div data-header=\'{[print(xabber.getString("settings_account__trust"))]}\' class="settings-block-wrap trust">\n                        <div class="settings-trust-wrap">\n                            <div class="settings-trust-items-wrap">\n                            </div>\n                        </div>\n                    </div>\n\n                    <div data-header=\'{[print(xabber.getString("account_cloud_storage"))]}\' class="settings-block-wrap media-gallery">\n                    </div>\n\n                    <div data-header=\'{[print(xabber.getString("settings_account__device_information"))]}\' class="settings-block-wrap device-information hidden">\n                        <div class="device-information-trust-text-wrap">\n                            <div class="device-information-trust-text"></div>\n                        </div>\n                        <div class="device-information-wrap">\n                            <div class="settings-panel-label">{[print(xabber.getString("settings_account__device_information"))]}</div>\n                            <div class="device-information-items-wrap device-information-basic">\n                                <div class="device-information-item device-information-status">\n                                    <svg class="mdi device-information-icon mdi-24px mdi-svg-template" data-svgname="status"></svg>\n                                    <div class="device-information-label">{[print(xabber.getString("device__info__status__label"))]}</div>\n                                    <div class="device-information-text"></div>\n                                </div>\n                                <div class="device-information-item device-information-last-seen">\n                                    <svg class="mdi device-information-icon mdi-24px mdi-svg-template" data-svgname="history"></svg>\n                                    <div class="device-information-label">{[print(xabber.getString("device__info__status__label_last_seen"))]}</div>\n                                    <div class="device-information-text"></div>\n                                </div>\n                                <div class="device-information-item device-information-client">\n                                    <svg class="mdi device-information-icon mdi-24px mdi-svg-template" data-svgname="id"></svg>\n                                    <div class="device-information-label">{[print(xabber.getString("device__info__client__label"))]}</div>\n                                    <div class="device-information-text"></div>\n                                </div>\n                                <div class="device-information-item device-information-ip">\n                                    <svg class="mdi device-information-icon mdi-24px mdi-svg-template" data-svgname="index"></svg>\n                                    <div class="device-information-label">{[print(xabber.getString("device__info__ip__label"))]}</div>\n                                    <div class="device-information-text"></div>\n                                </div>\n                                <div class="device-information-item device-information-expires">\n                                    <svg class="mdi device-information-icon mdi-24px mdi-svg-template" data-svgname="expires"></svg>\n                                    <div class="device-information-label">{[print(xabber.getString("device__info__expire__label"))]}</div>\n                                    <div class="device-information-text"></div>\n                                </div>\n                            </div>\n                            <div class="settings-panel-label device-information-security-label">{[print(xabber.getString("settings__menu_item__security"))]}</div>\n                            <div class="device-information-items-wrap device-information-encryption">\n                                <div class="device-information-item device-information-device-id">\n                                    <svg class="mdi device-information-icon mdi-24px mdi-svg-template" data-svgname="information"></svg>\n                                    <div class="device-information-label">{[print(xabber.getString("settings_account__device_information_device_id"))]}</div>\n                                    <div class="device-information-text"></div>\n                                </div>\n                                <div class="device-information-item device-information-fingerprint hidden">\n                                    <svg class="mdi device-information-icon mdi-24px mdi-svg-template" data-svgname="lock"></svg>\n                                    <div class="device-information-label">{[print(xabber.getString("omemo__dialog_fingerprints__fingerprint_label"))]}</div>\n                                    <div class="device-information-text device-information-fingerprint-text"></div>\n                                </div>\n                            </div>\n                            <div class="settings-tab device-information-trust settings-deletion-button">\n                                <div class="setting-icon-background">\n                                    <svg class="mdi device-information-icon mdi-24px mdi-svg-template lock-alert" data-svgname="lock-alert"></svg>\n                                    <svg class="mdi device-information-icon mdi-24px mdi-svg-template lock-check" data-svgname="lock-check"></svg>\n                                    <svg class="mdi device-information-icon mdi-24px mdi-svg-template lock-cross" data-svgname="lock-cross"></svg>\n                                    <svg class="mdi device-information-icon mdi-24px mdi-svg-template lock-question" data-svgname="lock-question"></svg>\n                                </div>\n                                <div class="settings-block-name">{[print(xabber.getString("settings_account__identity_verification"))]}</div>\n                            </div>\n                            <div class="settings-tab btn-revoke-token settings-deletion-button">\n                                <div class="setting-icon-background">\n                                    <svg class="mdi device-information-icon mdi-24px mdi-svg-template" data-svgname="trash"></svg>\n                                </div>\n                                <div class="settings-block-name">{[print(xabber.getString("device__info__terminate_session__button"))]}</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},24109:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-content-wrap">\n    <div class="modal-header">\n        <span>{[print(xabber.getString("account_add"))]}</span>\n    </div>\n    <div class="modal-content login-panel-form">\n\n        <div class="login-form-jid">\n            <div class="login-form-step-wrap">\n                <div class="input-field-wrap">\n                    <div class="input-field input-field-jid">\n                        <input id="jid" placeholder=\'{[print(xabber.getString("hint_xmpp_id"))]}\' type="text" name="jid">\n                        <div class="property-field xmpp-server-dropdown-wrap">\n                            <div class="select-auth-xmpp-server">\n                                <div data-activates="select-auth-xmpp-server" class="xmpp-server-item-wrap property-wrap"><div class="jid-at">@</div><div class="field-jid one-line property-value"></div></div>\n                                <div class="input-field input-group-chat-domain hidden">\n                                    <input id="sign_in_domain" type="text" placeholder=\'{[print(xabber.getString("groupchat__hint_domain"))]}\' name="sign_in_domain">\n                                </div>\n                                <div data-activates="select-auth-xmpp-server" class="caret">\n                                    <i class="mdi mdi-20px mdi-menu-up"></i>\n                                    <i class="mdi mdi-20px mdi-menu-down"></i>\n                                </div>\n                            </div>\n                            <div id="select-auth-xmpp-server" class="dropdown-content noselect">\n                                <div class="property-variant set-custom-domain">{[print(xabber.getString("groupchat_custom_server"))]}</div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="input-field">\n                        <input id="password" placeholder=\'{[print(xabber.getString("hint_pass"))]}\' type="password" name="password">\n                    </div>\n                </div>\n                <div class="login-form-step-error login-jid-error hidden"></div>\n                <div class="login-form-step-error login-password-error hidden"></div>\n                <div class="login-form-step-description"></div>\n                <div class="login-step-wrap hidden">\n                    <div class="login-step connecting-step">\n                        <div class="login-step-text">\n                            {[print(xabber.getString("dialog_jingle_message__status_communicating"))]}\n                        </div>\n                        <div class="preloader-wrapper preloader-17px active visible">\n                            <div class="spinner-layer">\n                                <div class="circle-clipper left">\n                                    <div class="circle"></div>\n                                </div>\n                                <div class="gap-patch">\n                                    <div class="circle"></div>\n                                </div>\n                                <div class="circle-clipper right">\n                                    <div class="circle"></div>\n                                </div>\n                            </div>\n                        </div>\n                        <i class="mdi mdi-24px mdi-alert-circle hidden"></i>\n                    </div>\n                    <div class="login-step credentials-step">\n                        <div class="login-step-text">\n                            {[print(xabber.getString("dialog_jingle_message__status_checking_credentials"))]}\n                        </div>\n                        <div class="preloader-wrapper preloader-17px active visible">\n                            <div class="spinner-layer">\n                                <div class="circle-clipper left">\n                                    <div class="circle"></div>\n                                </div>\n                                <div class="gap-patch">\n                                    <div class="circle"></div>\n                                </div>\n                                <div class="circle-clipper right">\n                                    <div class="circle"></div>\n                                </div>\n                            </div>\n                        </div>\n                        <i class="mdi mdi-24px mdi-alert-circle hidden"></i>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="login-form-server-features hidden">\n            <div class="register-form-step-wrap">\n                <div class="register-form-step-header"></div>\n            </div>\n            <div class="login-server-features-wrap">\n                <div class="server-feature" data-xmlns="{[print(Strophe.NS.MAM)]}" >\n                    <div class="server-feature-text">\n                        {[print(xabber.getString("signin_message_archive"))]}\n                    </div>\n                    <div class="preloader-wrapper preloader-17px active visible">\n                        <div class="spinner-layer">\n                            <div class="circle-clipper left">\n                                <div class="circle"></div>\n                            </div>\n                            <div class="gap-patch">\n                                <div class="circle"></div>\n                            </div>\n                            <div class="circle-clipper right">\n                                <div class="circle"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <i class="mdi mdi-24px mdi-alert hidden"></i>\n                    <div class="feature-error-tooltip-triangle">\n                        <div class="triangle-inside"></div>\n                    </div>\n                    <div class="feature-error-tooltip">{[print(xabber.getString(\'signin_message_archive_error\'))]}</div>\n                </div>\n                <div class="server-feature" data-xmlns="{[print(Strophe.NS.SYNCHRONIZATION)]}">\n                    <div class="server-feature-text">\n                        {[print(xabber.getString("signin_synchronization"))]}\n                    </div>\n                    <div class="preloader-wrapper preloader-17px active visible">\n                        <div class="spinner-layer">\n                            <div class="circle-clipper left">\n                                <div class="circle"></div>\n                            </div>\n                            <div class="gap-patch">\n                                <div class="circle"></div>\n                            </div>\n                            <div class="circle-clipper right">\n                                <div class="circle"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <i class="mdi mdi-24px mdi-alert hidden"></i>\n                    <div class="feature-error-tooltip-triangle">\n                        <div class="triangle-inside"></div>\n                    </div>\n                    <div class="feature-error-tooltip">{[print(xabber.getString(\'signin_quick_synchronization_error\'))]}</div>\n                </div>\n                <div class="server-feature" data-xmlns="{[print(Strophe.NS.REWRITE)]}">\n                    <div class="server-feature-text">\n                        {[print(xabber.getString("signin_message_editing"))]}\n                    </div>\n                    <div class="preloader-wrapper preloader-17px active visible">\n                        <div class="spinner-layer">\n                            <div class="circle-clipper left">\n                                <div class="circle"></div>\n                            </div>\n                            <div class="gap-patch">\n                                <div class="circle"></div>\n                            </div>\n                            <div class="circle-clipper right">\n                                <div class="circle"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <i class="mdi mdi-24px mdi-alert hidden"></i>\n                    <div class="feature-error-tooltip-triangle">\n                        <div class="triangle-inside"></div>\n                    </div>\n                    <div class="feature-error-tooltip">{[print(xabber.getString(\'signin_message_editing_error\'))]}</div>\n                </div>\n                <div class="server-feature" data-xmlns="{[print(Strophe.NS.AUTH_DEVICES)]}">\n                    <div class="server-feature-text">\n                        {[print(xabber.getString("signin_device_management"))]}\n                    </div>\n                    <div class="preloader-wrapper preloader-17px active visible">\n                        <div class="spinner-layer">\n                            <div class="circle-clipper left">\n                                <div class="circle"></div>\n                            </div>\n                            <div class="gap-patch">\n                                <div class="circle"></div>\n                            </div>\n                            <div class="circle-clipper right">\n                                <div class="circle"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <i class="mdi mdi-24px mdi-alert hidden"></i>\n                    <div class="feature-error-tooltip-triangle">\n                        <div class="triangle-inside"></div>\n                    </div>\n                    <div class="feature-error-tooltip">{[print(xabber.getString(\'signin_tokens_error\'))]}</div>\n                </div>\n                <div class="server-feature" data-xmlns="{[print(Strophe.NS.PUBSUB)]}">\n                    <div class="server-feature-text">\n                        {[print(xabber.getString("signin_publish_subscribe"))]}\n                    </div>\n                    <div class="preloader-wrapper preloader-17px active visible">\n                        <div class="spinner-layer">\n                            <div class="circle-clipper left">\n                                <div class="circle"></div>\n                            </div>\n                            <div class="gap-patch">\n                                <div class="circle"></div>\n                            </div>\n                            <div class="circle-clipper right">\n                                <div class="circle"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <i class="mdi mdi-24px mdi-alert hidden"></i>\n                    <div class="feature-error-tooltip-triangle">\n                        <div class="triangle-inside"></div>\n                    </div>\n                    <div class="feature-error-tooltip">{[print(xabber.getString(\'signin_pubsub_error\'))]}</div>\n                </div>\n                <div class="server-feature" data-xmlns="{[print(Strophe.NS.HTTP_UPLOAD)]}">\n                    <div class="server-feature-text">\n                        {[print(xabber.getString("signin_file_upload"))]}\n                    </div>\n                    <div class="preloader-wrapper preloader-17px active visible">\n                        <div class="spinner-layer">\n                            <div class="circle-clipper left">\n                                <div class="circle"></div>\n                            </div>\n                            <div class="gap-patch">\n                                <div class="circle"></div>\n                            </div>\n                            <div class="circle-clipper right">\n                                <div class="circle"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <i class="mdi mdi-24px mdi-alert hidden"></i>\n                    <div class="feature-error-tooltip-triangle">\n                        <div class="triangle-inside"></div>\n                    </div>\n                    <div class="feature-error-tooltip">{[print(xabber.getString(\'signin_file_upload_error\'))]}</div>\n                </div>\n            </div>\n            <div class="server-features-error"></div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button disabled class="btn-flat btn-main btn-log-in">{[print(xabber.getString("title_login_xabber_account"))]}</button>\n        <button class="btn-flat btn-main one-line hidden btn-finish-log-in"></button>\n        <button class="btn-flat btn-main btn-dark btn-cancel hidden">{[print(xabber.getString("cancel"))]}</button>\n    </div>\n</div>'},56949:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="waveform" id="{{waveform_id}}"></div>\n<div class="audio-control-panel">\n    <span class="voice-msg-current-time">0:00</span> /\n    <span class="voice-msg-total-time">0:00</span>\n    <input value="50" type="range" class="voice-message-volume">\n</div>'},47837:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-header">\n    <span></span>\n    <div class="menu-wrap">\n        <div data-screen-name="library" class="menu-btn btn-library">{[print(xabber.getString("settings__dialog_background__menu_item_library"))]}</div>\n        <div data-screen-name="upload" class="menu-btn btn-upload">{[print(xabber.getString("settings__dialog_background__menu_item_upload"))]}</div>\n        <div data-screen-name="web-address" class="menu-btn btn-web-address">{[print(xabber.getString("settings__dialog_background__menu_item_url"))]}</div>\n    </div>\n</div>\n<div class="modal-content">\n    <div data-screen="library" class="screen-wrap library-wrap"></div>\n    <div data-screen="upload" class="hidden screen-wrap">\n        <div class="upload-wrap">\n            <div class="upload-text">{[print(xabber.getString("settings__dialog_background__section_upload__text"))]}</div>\n            <div class="upload-button">\n                <button type="file">{[print(xabber.getString("settings__dialog_background__section_upload__button_upload"))]}</button>\n                <input type="file">\n            </div></div>\n    </div>\n    <div data-screen="web-address" class="hidden screen-wrap web-address-wrap">\n        <div class="web-address">\n            <div class="label">{[print(xabber.getString("settings__dialog_background__section_url__label"))]}</div>\n            <input class="url"/>\n        </div>\n        <div class="image-preview">\n            <img class="hidden">\n            <p>{[print(xabber.getString("settings__dialog_background__section_url__placeholder_preview"))]}</p>\n        </div>\n    </div>\n</div>\n<div class="modal-footer">\n    <button class="btn-flat btn-main text-color-700 non-active btn-add">{[print(xabber.getString("set"))]}</button>\n    <button class="btn-flat btn-main btn-dark btn-cancel">{[print(xabber.getString("cancel"))]}</button>\n    <div class="modal-preloader-wrap"></div>\n</div>'},15415:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-content-wrap">\n    <div class="modal-header">\n        <span class="original-state">{[print(xabber.getString("button_change_pass"))]}</span>\n        <span class="success-state hidden">{[print(xabber.getString("password_changed_success"))]}</span>\n    </div>\n    <div class="modal-content original-state">\n        <div class="change-password-fields">\n            <div class="block-subheader">\n                <span class="block-name">{[print(xabber.getString("hint_old_pass"))]}</span>\n            </div>\n            <div class="change-password-field">\n                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="key"></svg>\n                <input class="input-glow account-glow" placeholder=\'{[print(xabber.getString("hint_old_pass"))]}\' id="old_password" type="password" name="old_password">\n                <span class="errors fixed"></span>\n            </div>\n            <div class="block-subheader">\n                <span class="block-name">{[print(xabber.getString("hint_new_pass"))]}</span>\n            </div>\n            <div class="change-password-field">\n                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="key-variant"></svg>\n                <input class="input-glow account-glow" placeholder=\'{[print(xabber.getString("hint_new_pass"))]}\' id="password" type="password" name="password">\n                <span class="errors fixed"></span>\n            </div>\n            <div class="change-password-field">\n                <input class="input-glow account-glow" placeholder=\'{[print(xabber.getString("hint_confirm_pass"))]}\' id="password_confirm" type="password" name="password_confirm">\n                <span class="errors fixed"></span>\n            </div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn-change btn-flat btn-main original-state" disabled>{[print(xabber.getString("button_change_pass"))]}</button>\n        <button class="btn-flat btn-main btn-dark btn-cancel btn-finish-change success-state hidden">{[print(xabber.getString("ok"))]}</button>\n        <button class="btn-flat btn-main btn-dark btn-cancel original-state">{[print(xabber.getString("cancel"))]}</button>\n    </div>\n</div>\n'},34999:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-content-wrap">\n    <div class="modal-header">\n        <span>{[print(xabber.getString("settings_account__dialog_change_password__header"))]}</span>\n    </div>\n    <div class="modal-content">\n        <div class="row login-form-field">\n            <div class="input-field">\n                <input id="jid" type="text" class="input-glow" name="jid" disabled readonly>\n                <span class="errors fixed"></span>\n            </div>\n            <div class="input-field">\n                <input id="password" type="password" class="input-glow" placeholder="{[print(xabber.getString(\'account_password\'))]}" name="password">\n                <span class="errors fixed"></span>\n            </div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn-flat btn-main btn-change">{[print(xabber.getString("set"))]}</button>\n        <button class="btn-flat btn-main btn-dark btn-cancel">{[print(xabber.getString("cancel"))]}</button>\n    </div>\n</div>\n'},33999:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-content-wrap">\n    <div class="modal-header">\n        <span>{[print(xabber.getString("status_editor"))]}</span>\n    </div>\n    <ul class="status-values noselect">\n        <li data-value="chat">\n            <span class="status-value one-line">{[print(xabber.getString("chat"))]}</span>\n            <span class="status-bulb" data-status="chat"></span>\n        </li>\n        <li data-value="online">\n            <span class="status-value one-line">{[print(xabber.getString("online"))]}</span>\n            <span class="status-bulb" data-status="online"></span>\n        </li>\n        <li data-value="away">\n            <span class="status-value one-line">{[print(xabber.getString("away"))]}</span>\n            <span class="status-bulb" data-status="away"></span>\n        </li>\n        <li data-value="xa">\n            <span class="status-value one-line">{[print(xabber.getString("xa"))]}</span>\n            <span class="status-bulb" data-status="xa"></span>\n        </li>\n        <li data-value="dnd">\n            <span class="status-value one-line">{[print(xabber.getString("dnd"))]}</span>\n            <span class="status-bulb" data-status="dnd"></span>\n        </li>\n        <li data-value="offline">\n            <span class="status-value one-line">{[print(xabber.getString("unavailable"))]}</span>\n            <span class="status-bulb" data-status="offline"></span>\n        </li>\n    </ul>\n    <div class="modal-content">\n        <div class="row">\n            <div class="input-field status-message-wrap">\n                <span class="static-label">{[print(xabber.getString("dialog_status_editor__label_custom_status"))]}</span>\n                <input type="text" class="status-message input-glow">\n                <i class="clear-input mdi mdi-20px mdi-close"></i>\n            </div>\n            <div class="input-field checkbox-field no-padding">\n                <input type="checkbox" class="filled-in apply-to-all" id="{{view.cid}}_apply_to_all"/>\n                <label for="{{view.cid}}_apply_to_all">{[print(xabber.getString("dialog_status_editor__label_apply_to_all"))]}</label>\n            </div>\n        </div>\n    </div>\n</div>\n'},5766:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="token-wrap settings-tab" data-subblock-parent-name="devices" data-block-name="device-information" data-token-uid="{{token_uid}}">\n    <div class="token-icon-wrap">\n        <svg class="mdi token-icon mdi-24px mdi-svg-template" data-svgname="device-web"></svg>\n    </div>\n    <div class="token-client-wrap">\n        <div class="device one-line">{{device}}</div>\n        <div class="ip-address">{{ip}}</div>\n    </div>\n    {[if (is_omemo) {]}\n    <div class="device-encryption one-line active is-own">\n        <svg class="mdi mdi-24px mdi-svg-template" data-svgname="lock"></svg>\n    </div>\n    {[}]}\n</div>'},72971:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-content-wrap">\n    <div class="modal-header">\n        <span>{[print(xabber.getString("media_gallery_delete_files_header"))]}</span>\n    </div>\n    <div class="modal-content">\n        <div class="deletion-variants no-select">\n            <div class="delete-files-text-info">{[print(xabber.getString("media_gallery_delete_files_info_text"))]}</div>\n            <div class="property-variant btn-delete-files-percent" data-value="15">\n                <svg class="percent-icon mdi mdi-24px mdi-svg-template" data-svgname="circle-slice-1"></svg>\n                <span class="one-line">{[print(xabber.getString("media_gallery_delete_files_button_15_percent"))]}</span>\n            </div>\n            <div class="property-variant btn-delete-files-percent" data-value="25">\n                <svg class="percent-icon mdi mdi-24px mdi-svg-template" data-svgname="circle-slice-2"></svg>\n                <span class="one-line">{[print(xabber.getString("media_gallery_delete_files_button_25_percent"))]}</span>\n            </div>\n            <div class="property-variant btn-delete-files-percent" data-value="50">\n                <svg class="percent-icon mdi mdi-24px mdi-svg-template" data-svgname="circle-slice-4"></svg>\n                <span class="one-line">{[print(xabber.getString("media_gallery_delete_files_button_50_percent"))]}</span>\n            </div>\n            <div class="property-variant btn-delete-files-percent" data-value="100">\n                <svg class="percent-icon mdi mdi-24px mdi-svg-template" data-svgname="circle-slice-8"></svg>\n                <span class="one-line">{[print(xabber.getString("media_gallery_delete_files_button_100_percent"))]}</span>\n            </div>\n        </div>\n        <div class="media-gallery-delete-items-wrap hidden">\n            <div class="delete-files-preview-wrap media-gallery-items-wrap">\n                <div class="delete-files-text no-select">{[print(xabber.getString("media_gallery_delete_files_preview_text"))]}</div>\n                <div data-value="avatar" class="setting-name header-setting no-select delete-files-avatars">\n                    {[print(xabber.getString("avatars"))]}\n                </div>\n                <div class="gallery-files gallery-preview-image hidden grid delete-files-avatars delete-files-preview-container zoom-gallery">\n                </div>\n                <div data-value="image" class="setting-name header-setting no-select delete-files-images">\n                    {[print(xabber.getString("images"))]}\n                </div>\n                <div class="gallery-files gallery-preview-image hidden grid delete-files-images delete-files-preview-container zoom-gallery">\n                </div>\n                <div data-value="video" class="setting-name header-setting no-select delete-files-videos">\n                    {[print(xabber.getString("videos"))]}\n                </div>\n                <div class="gallery-files gallery-preview-video hidden grid delete-files-videos delete-files-preview-container zoom-gallery">\n                </div>\n                <div data-value="voice" class="setting-name header-setting no-select delete-files-voices">\n                    {[print(xabber.getString("vcard_type_voice"))]}\n                </div>\n                <div class="gallery-files gallery-preview-file hidden voice delete-files-voices delete-files-preview-container zoom-gallery">\n                </div>\n                <div data-value="file" class="setting-name header-setting no-select delete-files-files">\n                    {[print(xabber.getString("files"))]}\n                </div>\n                <div class="gallery-files gallery-preview-voice hidden file delete-files-files delete-files-preview-container zoom-gallery">\n                </div>\n            </div>\n            <div class="no-files hidden">{[print(xabber.getString("no_files"))]}</div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <div class="input-field checkbox-field delete-avatars-checkbox">\n            <input type="checkbox" class="filled-in" id="delete_avatars"/>\n            <label for="delete_avatars">{[print(xabber.getString("media_gallery_delete_files_confirm_delete_avatars"))]}</label>\n        </div>\n        <button class="btn-confirm btn-flat btn-main">{[print(xabber.getString("delete"))]}</button>\n        <button class="btn-flat btn-main btn-dark btn-cancel">{[print(xabber.getString("cancel"))]}</button>\n    </div>\n</div>'},90231:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-content-wrap">\n    <div class="modal-header">\n        <span>{[print(xabber.getString("account_emoji_profile_image_header"))]}</span>\n    </div>\n    <div class="modal-content">\n        <div class="dialog-text">{[print(xabber.getString("account_emoji_profile_image_description"))]}</div>\n    </div>\n    <div class="emoji-profile-image">\n        <div class="avatar-wrap">\n            <div class="circle-avatar ground-color-green-100" data-value="green">\n                <div class="chosen-emoji" data-value="🐈">🐈</div>\n            </div>\n            <div class="circle-icon">\n                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="edit-outline"></svg>\n            </div>\n        </div>\n\n    </div>\n    <div class="emoji-profile-colors">\n        <div class="colors-line">\n            <div class="profile-image-background-color ground-color-green-500 outline-color-green-500 chosen-background-color" data-value="green">\n            </div>\n            <div class="profile-image-background-color ground-color-deep-orange-500 outline-color-deep-orange-500" data-value="deep-orange">\n            </div>\n            <div class="profile-image-background-color ground-color-red-500 outline-color-red-500" data-value="red">\n            </div>\n        </div>\n        <div class="colors-line">\n            <div class="profile-image-background-color ground-color-light-blue-500 outline-color-light-blue-500" data-value="light-blue">\n            </div>\n            <div class="profile-image-background-color ground-color-blue-500 outline-color-blue-500" data-value="blue">\n            </div>\n            <div class="profile-image-background-color ground-color-purple-500 outline-color-purple-500" data-value="purple">\n            </div>\n        </div>\n        <div class="colors-line">\n            <div class="profile-image-background-color ground-color-lime-500 outline-color-lime-500" data-value="lime">\n            </div>\n            <div class="profile-image-background-color ground-color-pink-500 outline-color-pink-500" data-value="pink">\n            </div>\n            <div class="profile-image-background-color ground-color-orange-500 outline-color-orange-500" data-value="orange">\n            </div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn-flat btn-main btn-save">{[print(xabber.getString("save"))]}</button>\n        <button class="btn-flat btn-main btn-dark btn-cancel">{[print(xabber.getString("cancel"))]}</button>\n        <div class="modal-preloader-wrap"></div>\n    </div>\n</div>\n'},25482:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-content-wrap">\n    <div class="modal-header">\n        <span>{[print(xabber.getString("account_emoji_profile_image_header"))]}</span>\n        <i class="close-modal mdi mdi-close mdi-24px"></i>\n    </div>\n    <div class="emoji-picker-wrap no-select">\n\n    </div>\n</div>\n'},20458:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='\n{[ for (var i = 0; i < emojis.length; i++) { var tab = emojis[i] ]}\n    <div class="emojis-tab{[if (i === 0){]} chosen-emoji-tab{[} else {]} hidden{[}]}" data-value="{{tab.type}}">\n        {[ for (var y = 0; y < tab.emojis.length; y++) { var emoji = tab.emojis[y] ]}\n            <div class="emoji-picker-emoji" data-value="{{emoji[0]}}">\n                <div>{{emoji[0]}}</div>\n            </div>\n        {[ } ]}\n    </div>\n{[ } ]}\n<div class="emoji-picker-tabs">\n    {[ for (var i = 0; i < emojis.length; i++) { var tab = emojis[i] ]}\n    <div class="emojis-bottom-tab-selector{[if (i === 0){]} chosen-emoji-selector{[}]}" data-value="{{tab.type}}">\n        {{tab.emojis[0][0]}}\n    </div>\n    {[ } ]}\n</div>\n'},4870:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="existing-chat-wrap" data-name="{{name}}" data-jid="{{jid}}">\n    <div class="circle-avatar">\n        <img>\n    </div>\n    <div class="existing-chat-item">\n        <div class="name one-line">{{name}}</div>\n        <div class="jid one-line">{{jid}}</div>\n    </div>\n    <button class="btn-join-existing-chat btn-flat btn-dark btn-main">join</button>\n</div>'},56001:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="account-info-wrap">\n    <div class="circle-avatar noselect">\n        <img>\n    </div>\n    \x3c!--<div class="status"></div>--\x3e\n    <div class="text-info-wrap">\n        <div class="nickname-wrap">\n            <div class="nickname one-line"></div>\n        </div>\n        <div class="jid-wrap">\n            <div class="jid one-line"></div>\n        </div>\n    </div>\n</div>\n<div class="field clickable-field enabled-state switch normal">\n    <label class="field-value">\n        <input type="checkbox">\n        <span class="lever"></span>\n    </label>\n</div>\n'},57872:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="gallery-wrap">\n    \x3c!--<svg class="details-icon btn-go-back mdi mdi-24px mdi-svg-template" data-svgname="chevron-left-variant"></svg>--\x3e\n    <div class="gallery-storage-wrap">\n        <div class="storage-label-title">{[print(xabber.getString("account_media_gallery"))]}</div>\n        <div class="storage-usage"></div>\n        <div class="storage-progress-bar">\n            <div class="storage-progress-images"></div>\n            <div class="storage-progress-videos"></div>\n            <div class="storage-progress-voices"></div>\n            <div class="storage-progress-files"></div>\n            <div class="storage-progress-avatars"></div>\n        </div>\n        <div class="storage-labels">\n            <div class="storage-label storage-label-images"><div class="storage-label-icon"></div><div class="storage-label-text">{[print(xabber.getString("images"))]}</div></div>\n            <div class="storage-label storage-label-videos"><div class="storage-label-icon"></div><div class="storage-label-text">{[print(xabber.getString("videos"))]}</div></div>\n            <div class="storage-label storage-label-voices"><div class="storage-label-icon"></div><div class="storage-label-text">{[print(xabber.getString("vcard_type_voice"))]}</div></div>\n            <div class="storage-label storage-label-files"><div class="storage-label-icon"></div><div class="storage-label-text">{[print(xabber.getString("files"))]}</div></div>\n            <div class="storage-label storage-label-avatars"><div class="storage-label-icon"></div><div class="storage-label-text">{[print(xabber.getString("avatars"))]}</div></div>\n        </div>\n    </div>\n    <div class="storage-usages">\n        <div class="settings-tab settings-non-tab storage-usage-images hidden" data-media-type="image" data-header-text=\'{[print(xabber.getString("images"))]}\'>\n            <div class="setting-icon-background">\n                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="image"></svg>\n            </div>\n            <div class="settings-block-name one-line">{[print(xabber.getString("images"))]}</div>\n            <div class="settings-block-label one-line">{[print(xabber.getString("media_gallery_images_label"))]}</div>\n            <span class="storage-usage-amount"></span>\n        </div>\n        <div class="settings-tab settings-non-tab storage-usage-videos hidden" data-media-type="video" data-header-text=\'{[print(xabber.getString("videos"))]}\'>\n            <div class="setting-icon-background">\n                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="file-video"></svg>\n            </div>\n            <div class="settings-block-name one-line">{[print(xabber.getString("videos"))]}</div>\n            <div class="settings-block-label one-line">{[print(xabber.getString("media_gallery_videos_label"))]}</div>\n            <span class="storage-usage-amount"></span>\n        </div>\n        <div class="settings-tab settings-non-tab storage-usage-voices hidden" data-media-type="voice" data-header-text=\'{[print(xabber.getString("vcard_type_voice"))]}\'>\n            <div class="setting-icon-background">\n                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="file-audio"></svg>\n            </div>\n            <div class="settings-block-name one-line">{[print(xabber.getString("vcard_type_voice"))]}</div>\n            <div class="settings-block-label one-line">{[print(xabber.getString("media_gallery_voice_label"))]}</div>\n            <span class="storage-usage-amount"></span>\n        </div>\n        <div class="settings-tab settings-non-tab storage-usage-files hidden" data-media-type="file" data-header-text=\'{[print(xabber.getString("files"))]}\'>\n            <div class="setting-icon-background">\n                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="file"></svg>\n            </div>\n            <div class="settings-block-name one-line">{[print(xabber.getString("files"))]}</div>\n            <div class="settings-block-label one-line">{[print(xabber.getString("media_gallery_files_label"))]}</div>\n            <span class="storage-usage-amount"></span>\n        </div>\n        <div class="settings-tab settings-non-tab storage-usage-avatars" data-media-type="avatars" data-header-text=\'{[print(xabber.getString("avatars"))]}\'>\n            <div class="setting-icon-background">\n                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="camera"></svg>\n            </div>\n            <div class="settings-block-name one-line">{[print(xabber.getString("avatars"))]}</div>\n            <div class="settings-block-label one-line">{[print(xabber.getString("media_gallery_avatars_label"))]}</div>\n            <span class="storage-usage-amount"></span>\n        </div>\n        <div class="settings-tab settings-non-tab show-deletion settings-deletion-button">\n            <div class="setting-icon-background">\n                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="trash"></svg>\n            </div>\n            <div class="settings-block-name one-line">{[print(xabber.getString("media_gallery_delete_files"))]}</div>\n            <div class="settings-block-label one-line"></div>\n        </div>\n    </div>\n</div>\n<div class="media-gallery-items-wrap hidden">\n    <div class="gallery-sticky-buttons">\n        <i class="btn-back-gallery sticky-item mdi mdi-24px mdi-arrow-left"></i>\n        <i class="btn-close-selection sticky-item mdi mdi-24px mdi-close"></i>\n        <div class="sticky-item gallery-selection-head"></div>\n        <i class="btn-delete-selection sticky-item mdi mdi-24px mdi-delete"></i>\n    </div>\n    <div class="gallery-files zoom-gallery">\n    </div>\n</div>\n\n'},39440:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="gallery-file{[if (file.is_avatar === \'True\'){]} gallery-avatar{[}]}" title="{{file.name}}" data-id="{{file.id}}" data-file="{{file.file}}" data-name="{{file.name}}" data-size="{{file.size}}" data-width="{{file.width}}" data-height="{{file.height}}" data-media-type="{{file.media_type}}" >\n    {[if (file.media_type && (file.media_type.includes(\'image\') || file.media_type.includes(\'video\'))){]}\n        <img class="{[if (file.media_type.includes(\'video\')){]}uploaded-video{[} else {]}uploaded-img popup-img{[}]}" data-mfp-src="{{file.file}}" src="{{file.thumbnail}}" {[if (file.media_type && file.media_type.includes(\'image\')){]}onerror="this.src = \'{{file.file}}\'; this.onerror = null;" {[}]}>\n    {[} else {]}\n        {[if (svg_icon == \'file-audio\' && file.context === \'voice\'){]}\n            <div class="gallery-file-placeholder-background gallery-audio-file-not-uploaded">\n                <i class="details-icon mdi mdi-play no-uploaded"></i>\n            </div>\n            <div class="gallery-file-audio-container">\n            </div>\n        {[} else {]}\n            <div class="gallery-file-placeholder-background">\n                <svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="{{svg_icon}}"></svg>\n                <div class="gallery-file-title-grid">{{filesize}}</div>\n            </div>\n        {[}]}\n        <div class="gallery-file-title one-line">\n            {{file.name}},  <span class="gallery-file-size">{{filesize}}</span> <span class="gallery-file-date">{{created_at}}</span>\n        </div>\n        {[if (duration && file.context === \'voice\'){]}\n            <div class="gallery-voice-file-duration">\n                0:00 / <span class="gallery-voice-file-total-duration">{{duration}}</span>\n            </div>\n        {[}]}\n    {[}]}\n    <div class="input-field checkbox-field">\n        <input type="checkbox" class="filled-in"/>\n        <label></label>\n    </div>\n    {[if (download_only){]}\n        <div class="btn-download btn-more">\n            <a class="one-line" target="_blank" rel="noopener noreferrer" href="{{file.file}}" download>\n                <i class="mdi mdi-24px mdi-download"></i>\n            </a>\n        </div>\n    {[} else {]}\n    <div class="btn-more dropdown-button" data-activates="{{file.id}}-more">\n        <i class="mdi mdi-24px mdi-dots-vertical"></i>\n    </div>\n    <ul id="{{file.id}}-more" class="dropdown-content bootstrap-dropdown noselect">\n        <a class="one-line" target="_blank" rel="noopener noreferrer" href="{{file.file}}" download>\n            <div class="property-variant btn-download">\n                {[print(xabber.getString("action_download"))]}\n            </div>\n        </a>\n        <div class="property-variant btn-delete">\n            <span class="one-line">{[print(xabber.getString("delete"))]}</span>\n        </div>\n    </ul>\n    {[}]}\n</div>'},75216:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="ic-jabber"></svg>\n<table>\n    <tbody>\n    <tr class="info status-info">\n        <td class="label">{[print(xabber.getString("settings_account__label_status"))]}:</td>\n        <td>\n            <div class="value status-message"></div>\n            <div class="status"></div>\n        </td>\n    </tr>\n    <tr class="info client-info">\n        <td class="label">{[print(xabber.getString("settings_account__label_client"))]}:</td>\n        <td class="value client"></td>\n    </tr>\n    <tr class="info resource-info">\n        <td class="label">{[print(xabber.getString("account_resource"))]}:</td>\n        <td class="value resource"></td>\n    </tr>\n    <tr class="info priority-info">\n        <td class="label">{[print(xabber.getString("account_priority"))]}:</td>\n        <td class="value priority"></td>\n    </tr>\n    </tbody>\n</table>'},255:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<table>\n    <tbody>\n    <tr class="info status-info">\n        <td class="label">{[print(xabber.getString("settings_account__label_status"))]}:</td>\n        <td>\n            <div class="value status-message one-line"></div>\n            <div class="status"></div>\n        </td>\n    </tr>\n    <tr class="info client-info">\n        <td class="label">{[print(xabber.getString("settings_account__label_client"))]}:</td>\n        <td class="value client one-line"></td>\n    </tr>\n    <tr class="info resource-info">\n        <td class="label">{[print(xabber.getString("account_resource"))]}:</td>\n        <td class="value resource one-line"></td>\n    </tr>\n    <tr class="info priority-info">\n        <td class="label">{[print(xabber.getString("account_priority"))]}:</td>\n        <td class="value priority"></td>\n    </tr>\n    </tbody>\n</table>'},86572:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='\n<div class="left-column settings-column noselect">\n    <div class="settings-account-head">\n        <svg class="btn-add-account mdi mdi-24px mdi-svg-template" data-svgname="contact-add"></svg>\n        <div class="name one-line"></div>\n        <svg class="btn-color-picker dropdown-button mdi mdi-24px mdi-svg-template" data-activates="color-picker-dropdown" data-svgname="palette"></svg>\n        <ul id="color-picker-dropdown" class="dropdown-content color-picker-dropdown bootstrap-dropdown noselect">\n            <div class="property-variant color-picker-button" data-color-value="red">\n                <span class="one-line text-color-red-700">{[print(xabber.getString("account_color_name_red"))]}</span>\n            </div>\n            <div class="property-variant color-picker-button" data-color-value="pink">\n                <span class="one-line text-color-pink-700">{[print(xabber.getString("account_color_name_pink"))]}</span>\n            </div>\n            <div class="property-variant color-picker-button" data-color-value="purple">\n                <span class="one-line text-color-purple-700">{[print(xabber.getString("account_color_name_purple"))]}</span>\n            </div>\n            <div class="property-variant color-picker-button" data-color-value="deep-purple">\n                <span class="one-line text-color-deep-purple-700">{[print(xabber.getString("account_color_name_deep_purple").replace(/-/g, " "))]}</span>\n            </div>\n            <div class="property-variant color-picker-button" data-color-value="indigo">\n                <span class="one-line text-color-indigo-700">{[print(xabber.getString("account_color_name_indigo"))]}</span>\n            </div>\n            <div class="property-variant color-picker-button" data-color-value="blue">\n                <span class="one-line text-color-blue-700">{[print(xabber.getString("account_color_name_blue"))]}</span>\n            </div>\n            <div class="property-variant color-picker-button" data-color-value="light-blue">\n                <span class="one-line text-color-light-blue-700">{[print(xabber.getString("account_color_name_light_blue").replace(/-/g, " "))]}</span>\n            </div>\n            <div class="property-variant color-picker-button" data-color-value="cyan">\n                <span class="one-line text-color-cyan-700">{[print(xabber.getString("account_color_name_cyan"))]}</span>\n            </div>\n            <div class="property-variant color-picker-button" data-color-value="teal">\n                <span class="one-line text-color-teal-700">{[print(xabber.getString("account_color_name_teal"))]}</span>\n            </div>\n            <div class="property-variant color-picker-button" data-color-value="green">\n                <span class="one-line text-color-green-700">{[print(xabber.getString("account_color_name_green"))]}</span>\n            </div>\n            <div class="property-variant color-picker-button" data-color-value="light-green">\n                <span class="one-line text-color-light-green-700">{[print(xabber.getString("account_color_name_light_green").replace(/-/g, " "))]}</span>\n            </div>\n            <div class="property-variant color-picker-button" data-color-value="lime">\n                <span class="one-line text-color-lime-700">{[print(xabber.getString("account_color_name_lime"))]}</span>\n            </div>\n            <div class="property-variant color-picker-button" data-color-value="amber">\n                <span class="one-line text-color-amber-700">{[print(xabber.getString("account_color_name_amber"))]}</span>\n            </div>\n            <div class="property-variant color-picker-button" data-color-value="orange">\n                <span class="one-line text-color-orange-700">{[print(xabber.getString("account_color_name_orange"))]}</span>\n            </div>\n            <div class="property-variant color-picker-button" data-color-value="deep-orange">\n                <span class="one-line text-color-deep-orange-700">{[print(xabber.getString("account_color_name_deep_orange").replace(/-/g, " "))]}</span>\n            </div>\n            <div class="property-variant color-picker-button" data-color-value="brown">\n                <span class="one-line text-color-brown-700">{[print(xabber.getString("account_color_name_brown"))]}</span>\n            </div>\n            <div class="property-variant color-picker-button" data-color-value="blue-grey">\n                <span class="one-line text-color-blue-grey-700">{[print(xabber.getString("account_color_name_blue_grey").replace(/-/g, " "))]}</span>\n            </div>\n        </ul>\n        <svg class="btn-qr-code mdi mdi-24px mdi-svg-template" data-svgname="qrcode"></svg>\n        <div class="field clickable-field enabled-state switch normal">\n            <label class="field-value">\n                <input type="checkbox">\n                <span class="lever"></span>\n            </label>\n        </div>\n    </div>\n    <div class="main-info-wrap account-main-info-wrap">\n        <div class="picture-wrap">\n            <div class="avatar-wrap">\n                <div class="circle-avatar dropdown-button" data-activates="{{view.cid}}-profile-image">\n                    <img/>\n                    <input type="file"/>\n                    <ul id="{{view.cid}}-profile-image" class="profile-image-dropdown bootstrap-dropdown dropdown-content noselect">\n                        <div class="btn-emoji-panel property-variant">\n                            {[print(xabber.getString("account_emoji_profile_image_button"))]}\n                        </div>\n                        <div class="btn-selfie property-variant">\n                            {[print(xabber.getString("account_webcam_profile_image_button"))]}\n                        </div>\n                        <div class="btn-choose-image property-variant">\n                            {[print(xabber.getString("account_profile_image_button"))]}\n                        </div>\n                    </ul>\n                    <svg class="set-groupchat-avatar" viewBox="0 0 24 24">\n                        <path d="M4,4H7L9,2H15L17,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9Z" />\n                    </svg>\n                </div>\n            </div>\n        </div>\n        <div class="name one-line"></div>\n        <div class="jid one-line"></div>\n    </div>\n    <div class="settings-tabs-wrap">\n        <div class="settings-tab" data-block-name="profile">\n            <div class="setting-icon-background">\n                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="account"></svg>\n            </div>\n            <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__section_header_profile"))]}</div>\n            <div class="settings-block-label one-line">{[print(xabber.getString("settings_account__profile_label"))]}</div>\n        </div>\n        <div class="settings-tab" data-block-name="media-gallery">\n            <div class="setting-icon-background">\n                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="cloud"></svg>\n            </div>\n            <div class="settings-block-name one-line">{[print(xabber.getString("account_cloud_storage"))]}</div>\n            <div class="settings-block-label one-line">{[print(xabber.getString("placeholder_loading"))]}</div>\n        </div>\n        <div class="settings-tab" data-block-name="encryption">\n            <div class="setting-icon-background">\n                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="key"></svg>\n            </div>\n            <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__encryption"))]}</div>\n            <div class="settings-block-label hidden label-encryption-enabled one-line">{[print(xabber.getString("settings_account__encryption_enabled_label"))]}</div>\n            <div class="settings-block-label label-encryption-disabled one-line">{[print(xabber.getString("settings_account__encryption_disabled_label"))]}</div>\n        </div>\n        <div class="settings-tab" data-block-name="trust">\n            <div class="setting-icon-background">\n                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="key"></svg>\n            </div>\n            <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__trust"))]}</div>\n            <div class="settings-block-label one-line">{[print(xabber.getString("settings_account__settings_account__trust_label"))]}</div>\n        </div>\n        <div class="settings-tab" data-block-name="devices">\n            <div class="setting-icon-background">\n                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="devices"></svg>\n            </div>\n            <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__devices_subheader"))]}</div>\n            <div class="settings-block-label one-line">{[print(xabber.getString("placeholder_loading"))]}</div>\n        </div>\n    </div>\n</div>\n\n<div class="right-column settings-column noselect">\n    <div class="settings-panel-head">\n        <i class="btn-back-settings mdi mdi-24px mdi-arrow-left"></i>\n        <i class="btn-back-subsettings-account mdi mdi-24px mdi-arrow-left hidden"></i>\n        <span class="settings-panel-head-title">{[print(xabber.getString("account_editor"))]}</span>\n        <i class="btn-sorting dropdown-button mdi mdi-24px mdi-sort hidden" data-activates="storage-file-sorting"></i>\n        <ul id="storage-file-sorting" class="dropdown-content bootstrap-dropdown noselect">\n            <div class="property-variant btn-gallery-sorting" data-value="-id">\n                <span class="one-line">{[print(xabber.getString("account_media_gallery_sorting_new"))]}</span>\n            </div>\n            <div class="property-variant btn-gallery-sorting" data-value="-size">\n                <span class="one-line">{[print(xabber.getString("account_media_gallery_sorting_size"))]}</span>\n            </div>\n        </ul>\n        <div class="btn-more media-gallery-button dropdown-button hidden" data-activates="storage-actions">\n            <i class="mdi mdi-24px mdi-dots-vertical"></i>\n        </div>\n        <ul id="storage-actions" class="dropdown-content noselect">\n            <div class="property-variant btn-select-files hidden">\n                <span class="one-line">{[print(xabber.getString("account_select_files"))]}</span>\n            </div>\n        </ul>\n    </div>\n\n    <div class="panel-content-wrap">\n        <div class="panel-content details-panel">\n            <div data-header=\'{[print(xabber.getString("settings_account__devices_subheader"))]}\' class="settings-block-wrap devices">\n                <div class="devices-wrap hidden">\n                    <div class="device-encryption-warning hidden" data-not-trusted-count="0">\n                        <svg class="device-encryption-icon mdi mdi-40px mdi-svg-template" data-svgname="alert-circle"></svg>\n                        <div class="device-encryption-warning-name one-line">{[print(xabber.getString("settings_account__encryption_warning_header"))]}</div>\n                        <div class="device-encryption-warning-label"></div>\n                    </div>\n                    <div class="tokens-wrap">\n                        <div class="settings-panel-label">{[print(xabber.getString("settings_account__label_this_device"))]}</div>\n                        <div class="current-token-wrap">\n                            <div class="sessions-wrap current-session selectable-text"></div>\n                            <div class="btn-revoke-all-tokens settings-button-devices">\n                                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="restrictions-outline"></svg>\n                                <div class="settings-button-devices-label">{[print(xabber.getString("account_terminate_all_sessions"))]}</div>\n                            </div>\n                        </div>\n                        <div class="settings-panel-label active-sessions-label">{[print(xabber.getString("settings_account__label_active_sessions"))]}</div>\n                        <div class="all-sessions-wrap">\n                            <div class="sessions-wrap all-sessions selectable-text"></div>\n                        </div>\n                        <div class="orphaned-fingerprints hidden">\n                            <div class="orphaned-fingerprints-label">{[print(xabber.getString("omemo__dialog_fingerprints__legacy_encryption_label"))]}</div>\n                            <div class="orphaned-fingerprints-wrap selectable-text"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div data-header=\'{[print(xabber.getString("settings_account__section_header_profile"))]}\' class="settings-block-wrap profile">\n                <div class="settings-tabs-wrap">\n                    <div class="settings-tab settings-non-tab" data-subblock-parent-name="profile" data-block-name="status">\n                        <div class="setting-icon-background">\n                            <svg class="mdi mdi-24px mdi-svg-template" data-svgname="status"></svg>\n                        </div>\n                        <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__status_subheader"))]}</div>\n                        <div class="settings-block-label one-line"></div>\n                    </div>\n                    <div class="settings-tab" data-subblock-parent-name="profile" data-block-name="vcard-tab">\n                        <div class="setting-icon-background">\n                            <svg class="mdi mdi-24px mdi-svg-template" data-svgname="account"></svg>\n                        </div>\n                        <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__edit_profile"))]}</div>\n                        <div class="settings-block-label one-line">{[print(xabber.getString("settings_account__edit_profile_label"))]}</div>\n                    </div>\n                    <div class="settings-tab" data-subblock-parent-name="profile" data-block-name="password">\n                        <div class="setting-icon-background">\n                            <svg class="mdi mdi-24px mdi-svg-template" data-svgname="key"></svg>\n                        </div>\n                        <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__password_subheader"))]}</div>\n                        <div class="settings-block-label one-line">{[print(xabber.getString("settings_account__password_subheader_label"))]}</div>\n                    </div>\n                    <div class="settings-tab" data-subblock-parent-name="profile" data-block-name="blocklist">\n                        <div class="setting-icon-background">\n                            <svg class="mdi mdi-24px mdi-svg-template" data-svgname="cancel"></svg>\n                        </div>\n                        <div class="settings-block-name one-line">{[print(xabber.getString("block_list"))]}</div>\n                        <div class="settings-block-label one-line"></div>\n                    </div>\n                    <div class="settings-tab" data-subblock-parent-name="profile" data-block-name="circles-groups">\n                        <div class="setting-icon-background">\n                            <svg class="mdi mdi-24px mdi-svg-template" data-svgname="circles-outline"></svg>\n                        </div>\n                        <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__section_header_circles"))]}</div>\n                        <div class="settings-block-label one-line"></div>\n                    </div>\n                    <div class="settings-tab" data-subblock-parent-name="profile" data-block-name="capabitilies">\n                        <div class="setting-icon-background">\n                            <svg class="mdi mdi-24px mdi-svg-template" data-svgname="information"></svg>\n                        </div>\n                        <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__capabilities_subheader"))]}</div>\n                        <div class="settings-block-label one-line">{[print(xabber.getString("settings_account__capabilities_subheader_label"))]}</div>\n                    </div>\n                    <div class="settings-tab unregister-account settings-deletion-button settings-non-tab" data-subblock-parent-name="profile" data-block-name="delete-account">\n                        <div class="setting-icon-background">\n                            <svg class="mdi mdi-24px mdi-svg-template" data-svgname="trash"></svg>\n                        </div>\n                        <div class="settings-block-name settings-block-name-single one-line">{[print(xabber.getString("settings_account__delete_account_subheader"))]}</div>\n                    </div>\n                </div>\n            </div>\n            <div data-header=\'{[print(xabber.getString("settings_account__status_subheader"))]}\' class="settings-block-wrap status">\n                <div class="settings-subblock-wrap">\n                    <div class="status-wrap setting"></div>\n                    <div class="status"></div>\n                </div>\n            </div>\n            <div data-header=\'{[print(xabber.getString("settings_account__edit_profile"))]}\' class="settings-block-wrap vcard-tab">\n                <div class="settings-subblock-wrap">\n                    <div class="vcard">\n                    </div>\n                </div>\n            </div>\n            <div class="block-list-view-wrap">\n                <div data-header=\'{[print(xabber.getString("block_list"))]}\' data-parent-block="profile" class="settings-block-wrap blocklist">\n                    <div class="settings-subblock-wrap">\n                        <div class="blocklist-info">\n                            <div class="blocklist-wrap">\n                                <div class="buttons-wrap">\n                                    <svg class="mdi mdi-24px mdi-svg-template btn-block" data-svgname="blocked-add"></svg>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="settings-tabs-wrap">\n                        <div class="settings-tab" data-subblock-parent-name="blocklist" data-block-name="blocklist-contacts">\n                            <div class="setting-icon-background">\n                                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="account-cancel"></svg>\n                            </div>\n                            <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__blocked_contacts"))]}</div>\n                            <div class="settings-block-label one-line"></div>\n                        </div>\n                        <div class="settings-tab" data-subblock-parent-name="blocklist" data-block-name="blocklist-domains">\n                            <div class="setting-icon-background">\n                                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="web-cancel"></svg>\n                            </div>\n                            <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__blocked_domains"))]}</div>\n                            <div class="settings-block-label one-line"></div>\n                        </div>\n                        <div class="settings-tab hidden" data-subblock-parent-name="blocklist" data-block-name="blocklist-invitations">\n                            <div class="setting-icon-background">\n                                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="invite"></svg>\n                            </div>\n                            <div class="settings-block-name one-line">{[print(xabber.getString("settings_account__blocked_invitations"))]}</div>\n                            <div class="settings-block-label one-line"></div>\n                        </div>\n                    </div>\n                </div>\n                <div data-header=\'{[print(xabber.getString("settings_account__blocked_contacts"))]}\' data-block-name="blocklist-contacts" class="settings-block-wrap blocklist-contacts">\n                    <div class="settings-subblock-wrap">\n                        <div class="blocklist-info">\n                            <div class="blocklist-wrap">\n                                <div class="buttons-wrap">\n                                    <svg class="mdi mdi-24px mdi-svg-template btn-block" data-svgname="blocked-add"></svg>\n                                    <button class="btn-deselect-blocked btn-flat btn-main   hidden">{[print(xabber.getString("cancel"))]}</button>\n                                    <button class="btn-unblock-selected btn-flat btn-main text-color-500  hidden">{[print(xabber.getString("unblock_selected"))]}</button>\n                                </div>\n                                <div class="blocked-items">\n                                    <div class="blocked-contacts-placeholder placeholder">{[print(xabber.getString("blocked_contacts_empty"))]}</div>\n                                    <div class="blocked-items-container blocked-contacts-wrap" data-tab-name="contacts-item">\n                                        <div class="blocked-contacts blocked-list"></div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div data-header=\'{[print(xabber.getString("settings_account__blocked_domains"))]}\' data-block-name="blocklist-domains" class="settings-block-wrap blocklist-domains">\n                    <div class="settings-subblock-wrap">\n                        <div class="blocklist-info">\n                            <div class="blocklist-wrap">\n                                <div class="buttons-wrap">\n                                    <svg class="mdi mdi-24px mdi-svg-template btn-block" data-svgname="blocked-add"></svg>\n                                    <button class="btn-deselect-blocked btn-flat btn-main   hidden">{[print(xabber.getString("cancel"))]}</button>\n                                    <button class="btn-unblock-selected btn-flat btn-main text-color-500  hidden">{[print(xabber.getString("unblock_selected"))]}</button>\n                                </div>\n                                <div class="blocked-items">\n                                    <div class="blocked-domains-placeholder placeholder">{[print(xabber.getString("blocked_domains_empty"))]}</div></div>\n                                <div class="blocked-items-container blocked-domains-wrap" data-tab-name="domains-item">\n                                    <div class="blocked-domains blocked-list"></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div data-header=\'{[print(xabber.getString("settings_account__blocked_invitations"))]}\' data-block-name="blocklist-invitations" class="settings-block-wrap blocklist-invitations">\n                <div class="settings-subblock-wrap">\n                    <div class="blocklist-info">\n                        <div class="blocklist-wrap">\n                            <div class="buttons-wrap">\n                                <svg class="mdi mdi-24px mdi-svg-template btn-block" data-svgname="blocked-add"></svg>\n                                <button class="btn-deselect-blocked btn-flat btn-main   hidden">{[print(xabber.getString("cancel"))]}</button>\n                                <button class="btn-unblock-selected btn-flat btn-main text-color-500  hidden">{[print(xabber.getString("unblock_selected"))]}</button>\n                            </div>\n                            <div class="blocked-items">\n                                <div class="blocked-invitations-placeholder placeholder">{[print(xabber.getString("blocked_invitations_empty"))]}</div>\n                                <div class="blocked-items-container blocked-invitations-wrap" data-tab-name="invitations-item">\n                                    <div class="blocked-invitations blocked-list"></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div data-header=\'{[print(xabber.getString("settings_account__section_header_circles"))]}\' class="settings-block-wrap circles-groups">\n                <div class="settings-subblock-wrap">\n                    <div class="groups-info">\n                        <div class="groups-wrap">\n                            <div class="groups">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div data-header=\'{[print(xabber.getString("settings_account__capabilities_subheader"))]}\' class="settings-block-wrap capabitilies">\n                <div class="settings-subblock-wrap">\n                    <div class="server-info">\n                        <div class="capabilities-wrap">\n                            <div class="capabilities">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div data-header=\'{[print(xabber.getString("color"))]}\' class="settings-block-wrap color-scheme">\n                <div class="color-scheme-wrap">\n                    <div class="account-color">\n                        <div class="field radio-field clickable-field">\n                            <form action="#">\n                                <p>\n                                    <input class="with-gap" name="account_color" value="red" type="radio" id="color-red" />\n                                    <label class="text-color-red-700" for="color-red">{[print(xabber.getString("account_color_name_red"))]}</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="account_color" value="pink" type="radio" id="color-pink" />\n                                    <label class="text-color-pink-700" for="color-pink">{[print(xabber.getString("account_color_name_pink"))]}</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="account_color" value="purple" type="radio" id="color-purple" />\n                                    <label class="text-color-purple-700" for="color-purple">{[print(xabber.getString("account_color_name_purple"))]}</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="account_color" value="deep-purple" type="radio" id="color-deep-purple" />\n                                    <label class="text-color-deep-purple-700" for="color-deep-purple">{[print(xabber.getString("account_color_name_deep_purple").replace(/-/g, " "))]}</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="account_color" value="indigo" type="radio" id="color-indigo" />\n                                    <label class="text-color-indigo-700" for="color-indigo">{[print(xabber.getString("account_color_name_indigo"))]}</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="account_color" value="blue" type="radio" id="color-blue" />\n                                    <label class="text-color-blue-700" for="color-blue">{[print(xabber.getString("account_color_name_blue"))]}</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="account_color" value="light-blue" type="radio" id="color-light-blue" />\n                                    <label class="text-color-light-blue-700" for="color-light-blue">{[print(xabber.getString("account_color_name_light_blue").replace(/-/g, " "))]}</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="account_color" value="cyan" type="radio" id="color-cyan" />\n                                    <label class="text-color-cyan-700" for="color-cyan">{[print(xabber.getString("account_color_name_cyan"))]}</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="account_color" value="teal" type="radio" id="color-teal" />\n                                    <label class="text-color-teal-700" for="color-teal">{[print(xabber.getString("account_color_name_teal"))]}</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="account_color" value="green" type="radio" id="color-green" />\n                                    <label class="text-color-green-700" for="color-green">{[print(xabber.getString("account_color_name_green"))]}</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="account_color" value="light-green" type="radio" id="color-light-green" />\n                                    <label class="text-color-light-green-700" for="color-light-green">{[print(xabber.getString("account_color_name_light_green").replace(/-/g, " "))]}</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="account_color" value="lime" type="radio" id="color-lime" />\n                                    <label class="text-color-lime-700" for="color-lime">{[print(xabber.getString("account_color_name_lime"))]}</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="account_color" value="amber" type="radio" id="color-amber" />\n                                    <label class="text-color-amber-700" for="color-amber">{[print(xabber.getString("account_color_name_amber"))]}</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="account_color" value="orange" type="radio" id="color-orange" />\n                                    <label class="text-color-orange-700" for="color-orange">{[print(xabber.getString("account_color_name_orange"))]}</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="account_color" value="deep-orange" type="radio" id="color-deep-orange" />\n                                    <label class="text-color-deep-orange-700" for="color-deep-orange">{[print(xabber.getString("account_color_name_deep_orange").replace(/-/g, " "))]}</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="account_color" value="brown" type="radio" id="color-brown" />\n                                    <label class="text-color-brown-700" for="color-brown">{[print(xabber.getString("account_color_name_brown"))]}</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="account_color" value="blue-grey" type="radio" id="color-blue-grey" />\n                                    <label class="text-color-blue-grey-700" for="color-blue-grey">{[print(xabber.getString("account_color_name_blue_grey").replace(/-/g, " "))]}</label>\n                                </p>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div data-header=\'{[print(xabber.getString("settings_account__encryption"))]}\' class="settings-block-wrap encryption">\n                <div class="btn-more device-more-button dropdown-button" data-activates="device-omemo-actions">\n                    <i class="mdi mdi-24px mdi-dots-vertical"></i>\n                </div>\n                <ul id="device-omemo-actions" class="dropdown-content bootstrap-dropdown noselect">\n                    <div class="property-variant btn-manage-devices">\n                        <span class="one-line">{[print(xabber.getString("omemo__settings__button_manage_devices"))]}</span>\n                    </div>\n                    <div class="property-variant btn-purge-keys">\n                        <span class="one-line">{[print(xabber.getString("omemo__settings__button_purge_keys"))]}</span>\n                    </div>\n                </ul>\n                <div class="omemo-settings-wrap">\n                    <div class="settings">\n                        <div class="setting-wrap omemo-enable">\n                            <span>{[print(xabber.getString("omemo__settings__toggle_enable_encryption"))]}</span>\n                            <div class="field setting-use-omemo switch normal">\n                                <label class="field-value">\n                                    <input type="checkbox">\n                                    <span class="lever"></span>\n                                </label>\n                            </div>\n                        </div>\n                        <div class="setting-wrap send-chat-states">\n                            <span>{[print(xabber.getString("omemo__settings__toggle_send_typing_notifications"))]}</span>\n                            <div class="field setting-send-chat-states switch normal">\n                                <label class="field-value">\n                                    <input type="checkbox">\n                                    <span class="lever"></span>\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n\n            <div data-header=\'{[print(xabber.getString("settings_account__trust"))]}\' class="settings-block-wrap trust">\n                <div class="settings-trust-wrap">\n                    <div class="settings-trust-items-wrap">\n                    </div>\n                </div>\n            </div>\n\n            <div data-header=\'{[print(xabber.getString("account_cloud_storage"))]}\' class="settings-block-wrap media-gallery">\n            </div>\n\n            <div data-header=\'{[print(xabber.getString("settings_account__device_information"))]}\' class="settings-block-wrap device-information hidden">\n                <div class="device-information-trust-text-wrap">\n                    <div class="device-information-trust-text"></div>\n                </div>\n                <div class="device-information-wrap">\n                    <div class="settings-panel-label">{[print(xabber.getString("settings_account__device_information"))]}</div>\n                    <div class="device-information-items-wrap device-information-basic">\n                        <div class="device-information-item device-information-status">\n                            <svg class="mdi device-information-icon mdi-24px mdi-svg-template" data-svgname="status"></svg>\n                            <div class="device-information-label">{[print(xabber.getString("device__info__status__label"))]}</div>\n                            <div class="device-information-text"></div>\n                        </div>\n                        <div class="device-information-item device-information-last-seen">\n                            <svg class="mdi device-information-icon mdi-24px mdi-svg-template" data-svgname="history"></svg>\n                            <div class="device-information-label">{[print(xabber.getString("device__info__status__label_last_seen"))]}</div>\n                            <div class="device-information-text"></div>\n                        </div>\n                        <div class="device-information-item device-information-client">\n                            <svg class="mdi device-information-icon mdi-24px mdi-svg-template" data-svgname="id"></svg>\n                            <div class="device-information-label">{[print(xabber.getString("device__info__client__label"))]}</div>\n                            <div class="device-information-text"></div>\n                        </div>\n                        <div class="device-information-item device-information-ip">\n                            <svg class="mdi device-information-icon mdi-24px mdi-svg-template" data-svgname="index"></svg>\n                            <div class="device-information-label">{[print(xabber.getString("device__info__ip__label"))]}</div>\n                            <div class="device-information-text"></div>\n                        </div>\n                        <div class="device-information-item device-information-expires">\n                            <svg class="mdi device-information-icon mdi-24px mdi-svg-template" data-svgname="expires"></svg>\n                            <div class="device-information-label">{[print(xabber.getString("device__info__expire__label"))]}</div>\n                            <div class="device-information-text"></div>\n                        </div>\n                    </div>\n                    <div class="settings-panel-label device-information-security-label">{[print(xabber.getString("settings__menu_item__security"))]}</div>\n                    <div class="device-information-items-wrap device-information-encryption">\n                        <div class="device-information-item device-information-device-id">\n                            <svg class="mdi device-information-icon mdi-24px mdi-svg-template" data-svgname="information"></svg>\n                            <div class="device-information-label">{[print(xabber.getString("settings_account__device_information_device_id"))]}</div>\n                            <div class="device-information-text"></div>\n                        </div>\n                        <div class="device-information-item device-information-fingerprint hidden">\n                            <svg class="mdi device-information-icon mdi-24px mdi-svg-template" data-svgname="lock"></svg>\n                            <div class="device-information-label">{[print(xabber.getString("omemo__dialog_fingerprints__fingerprint_label"))]}</div>\n                            <div class="device-information-text device-information-fingerprint-text"></div>\n                        </div>\n                    </div>\n                    <div class="settings-tab device-information-trust settings-deletion-button">\n                        <div class="setting-icon-background">\n                            <svg class="mdi device-information-icon mdi-24px mdi-svg-template lock-alert" data-svgname="lock-alert"></svg>\n                            <svg class="mdi device-information-icon mdi-24px mdi-svg-template lock-check" data-svgname="lock-check"></svg>\n                            <svg class="mdi device-information-icon mdi-24px mdi-svg-template lock-cross" data-svgname="lock-cross"></svg>\n                            <svg class="mdi device-information-icon mdi-24px mdi-svg-template lock-question" data-svgname="lock-question"></svg>\n                        </div>\n                        <div class="settings-block-name">{[print(xabber.getString("settings_account__identity_verification"))]}</div>\n                    </div>\n                    <div class="settings-tab btn-revoke-token settings-deletion-button">\n                        <div class="setting-icon-background">\n                            <svg class="mdi device-information-icon mdi-24px mdi-svg-template" data-svgname="trash"></svg>\n                        </div>\n                        <div class="settings-block-name">{[print(xabber.getString("device__info__terminate_session__button"))]}</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},71326:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="input-widget-wrap {{field_name}}-wrap">\n    <div class="{{field_name}}-input-wrap">\n        <input class="{{field_name}}-input input-glow field-input" type="{{field_type}}" placeholder="{{placeholder}}">\n    </div>\n</div>\n'},84377:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="token-wrap settings-tab" data-subblock-parent-name="devices" data-block-name="device-information" data-token-uid="{{token_uid}}">\n    <div class="token-icon-wrap">\n        {[if (device && (device.indexOf(\'Android\') > -1 || device.indexOf(\'iOS\') > -1)){]}\n            <svg class="mdi token-icon mdi-24px mdi-svg-template" data-svgname="device-cellphone"></svg>\n        {[} else {]}\n            <svg class="mdi token-icon mdi-24px mdi-svg-template" data-svgname="device-web"></svg>\n        {[}]}\n    </div>\n    <div class="token-client-wrap">\n        <div class="device one-line">{{device}}</div>\n        <div class="ip-address">{{ip}} • {[ if (resource_obj) {]}{[print(xabber.getString("account_state_connected"))]}{[} else {]}{{last_auth}}{[}]}</div>\n    </div>\n    <div class="device-encryption one-line">\n        <svg class="mdi mdi-24px mdi-svg-template device-encryption-lock" data-svgname="lock"></svg>\n        <svg class="mdi mdi-24px mdi-svg-template device-encryption-lock" data-svgname="alert"></svg>\n        <svg class="mdi mdi-24px mdi-svg-template device-encryption-lock" data-svgname="alert-circle"></svg>\n    </div>\n</div>'},54810:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="border ground-color-500"></div>\n<div class="account-item-avatar-wrap">\n    <div class="circle-avatar-wrap">\n        <div class="dropdown-button circle-avatar border-color noselect"></div>\n    </div>\n</div>\n<div class="status"></div>\n<i class="auth-failed mdi mdi-16px mdi-close"></i>\n<div class="account-actions-panel">\n    <div class="filter-chats">\n        <i class="mdi mdi-filter mdi-20px"></i>\n        <div class="text">{[print(xabber.getString("account__toolbar_item__button_filter_chats"))]}</div>\n    </div>\n</div>'},63057:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="trust-item-device" data-device-id="{{device.device_id}}">\n    <div class="trust-item-device-row">\n        <div class="trust-item-device-label">{[print(xabber.getString("settings_account__device_information_device_id"))]}</div>\n        <div class="trust-item-device-value">{{device.device_id}}</div>\n    </div>\n    {[if (fingerprint){]}\n    <div class="trust-item-device-row">\n        <div class="trust-item-device-label">{[print(xabber.getString("omemo__dialog_fingerprints__fingerprint_label"))]}</div>\n        <div class="trust-item-device-value device-information-fingerprint-text">{{fingerprint}}</div>\n    </div>\n    {[}]}\n    <div class="trust-item-device-row">\n        <div class="trust-item-device-label">{[print(xabber.getString("settings_account__trust__time_label"))]}</div>\n        <div class="trust-item-device-value">{{time}}</div>\n    </div>\n    <div class="trust-item-device-row">\n        <div class="trust-item-device-label">{[print(xabber.getString("settings_account__trust__trust_reason_label"))]}</div>\n        <div class="trust-item-device-value">{{trust_type}}</div>\n    </div>\n    {[if (device.from_device_id && device.trust_reason_jid){]}\n    <div class="trust-item-device-under-row">\n        <div class="trust-item-device-value">{{device.trust_reason_jid}}</div>\n        <div class="trust-item-device-value">{{device.from_device_id}}</div>\n    </div>\n    {[}]}\n</div>'},7760:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="trust-item-peer" data-jid="{{jid}}">\n    <div class="trust-item-peer-jid">{{jid}}</div>\n    <div class="trust-item-devices-wrap">\n\n    </div>\n</div>'},49485:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-content-wrap">\n    <div class="modal-header no-select">\n        <span>{[print(xabber.getString("settings_account__delete_account_modal_title"))]}</span>\n    </div>\n    <div class="modal-content login-panel-form">\n        <div class="modal-description-text no-select">{[print(xabber.getString("settings_account__delete_account_modal_text"))]}</div>\n\n        <div class="login-form-jid">\n            <div class="login-form-step-wrap">\n                <div class="input-field-wrap">\n                    <div class="input-field checkbox-field">\n                        <input type="checkbox" class="filled-in" id="confirm_unregister_1"/>\n                        <label for="confirm_unregister_1">{[print(xabber.getString("settings_account__checkbox_confirm_unregister_text_1"))]}</label>\n                    </div>\n                    <div class="input-field checkbox-field">\n                        <input type="checkbox" class="filled-in" id="confirm_unregister_2"/>\n                        <label for="confirm_unregister_2">{[print(xabber.getString("settings_account__checkbox_confirm_unregister_text_2"))]}</label>\n                    </div>\n                    <div class="input-field password-field">\n                        <input id="password" placeholder=\'{[print(xabber.getString("settings_account__delete_account_modal_password_placeholder_text"))]}\' type="password" name="password">\n                        <div class="login-form-step-error login-password-error"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="login-confirm-form-step-wrap hidden">\n                <div class="input-field-wrap">\n                    <div class="input-field input-field-jid input-field-jid-borders">\n                        <input id="jid" type="text" name="jid">\n                    </div>\n                </div>\n                <div class="login-form-step-error login-jid-error hidden"></div>\n            </div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button disabled class="btn-flat btn-main btn-log-in">{[print(xabber.getString("account_delete"))]}</button>\n        <button disabled class="btn-flat btn-main btn-submit-unregister hidden">{[print(xabber.getString("account_delete"))]}</button>\n        <button class="btn-flat btn-main btn-dark btn-cancel">{[print(xabber.getString("cancel"))]}</button>\n    </div>\n</div>'},92797:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-content-wrap">\n    <div class="modal-header">\n        <span>{[print(xabber.getString("take_photo"))]}</span>\n    </div>\n    <div class="webcam-profile-image-wrap">\n        <div class="camera">\n            <video class="webcam-video">Video stream not available.</video>\n        </div>\n        <canvas id="canvas" style="display: none;">\n        </canvas>\n        <div class="output hidden">\n            <div class="webcam-photo-wrap">\n                <img class="webcam-photo" alt="The screen capture will appear in this box.">\n            </div>\n            <div class="circle-icon">\n                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="camera-retake"></svg>\n            </div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn-flat btn-main btn-take-photo">{[print(xabber.getString("capture"))]}</button>\n        <button class="btn-flat btn-main btn-save hidden">{[print(xabber.getString("account_webcam_profile_image_btn_save"))]}</button>\n        <button class="btn-flat btn-main btn-dark btn-cancel">{[print(xabber.getString("cancel"))]}</button>\n        <div class="modal-preloader-wrap"></div>\n    </div>\n</div>\n'},64630:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="login-panel-intro">\n    <div class="login-panel-head noselect">\n        <img src="{{CLIENT_LOGO}}" class="client-logo">\n        <span class="client-name">{{SHORT_CLIENT_NAME}}</span>\n        <span class="client-description">{{SHORT_CLIENT_DESCRIPTION}}</span>\n    </div>\n    <div class="login-buttons">\n        <div class="btn-flat btn-main btn-register-form one-line">{[print(xabber.getString("xmpp_login__button_sign_up"))]}</div>\n        <div class="btn-flat btn-main btn-login-form one-line">{[print(xabber.getString("xmpp_login__button_sign_in"))]}</div>\n        <div class="auth-settings one-line">{[print(xabber.getString("account_settings_privacy_settings"))]}</div>\n    </div>\n\n    <div data-header=\'{[print(xabber.getString("settings__menu_item__privacy"))]}\'  class="settings-block-wrap privacy login-panel-form hidden">\n        <svg class="details-icon btn-go-back-menu mdi mdi-24px mdi-svg-template" data-svgname="chevron-left-variant"></svg>\n        <div class="block-subheader">\n            <span class="block-name">{[print(xabber.getString("settings__menu_item__device_metadata_sharing"))]}</span>\n        </div>\n        <div class="setting device-metadata radio-button field-wrap">\n            <div class="field radio-field clickable-field">\n                <form action="#">\n                    <p>\n                        <input class="with-gap" name="device_metadata" value="contacts" type="radio" id="{{view.cid}}-contacts" />\n                        <label for="{{view.cid}}-contacts">{[print(xabber.getString("settings__section_privacy__contacts_metadata"))]}</label>\n                    </p>\n                    <p>\n                        <input class="with-gap" name="device_metadata" value="server" type="radio" id="{{view.cid}}-server" />\n                        <label for="{{view.cid}}-server">{[print(xabber.getString("settings__section_privacy__server_metadata"))]}</label>\n                    </p>\n                    <p>\n                        <input class="with-gap" name="device_metadata" value="none" type="radio" id="{{view.cid}}-none" />\n                        <label for="{{view.cid}}-none">{[print(xabber.getString("settings__section_privacy__none_metadata"))]}</label>\n                    </p>\n                </form>\n            </div>\n        </div>\n        <div class="device-metadata-description"></div>\n    </div>\n</div>\n<div class="login-panel-form xmpp-login-form noselect hidden">\n    <svg class="details-icon btn-go-back-menu mdi mdi-24px mdi-svg-template" data-svgname="chevron-left-variant"></svg>\n    <div class="login-form-header">{[print(xabber.getString("title_login_xabber_account"))]}</div>\n    <div class="login-form-jid">\n        <div class="register-form-step-wrap">\n            <div class="register-form-step-header">{[print(xabber.getString("dialog_jingle_message__message_connect"))]}</div>\n            <div class="input-field-wrap">\n                <div class="input-field input-field-jid">\n                    <input id="jid" placeholder=\'{[print(xabber.getString("hint_xmpp_id"))]}\' type="text" name="jid">\n                    <div class="property-field xmpp-server-dropdown-wrap">\n                        <div class="select-auth-xmpp-server">\n                            <div data-activates="select-auth-xmpp-server" class="xmpp-server-item-wrap property-wrap"><div class="jid-at">@</div><div class="field-jid one-line property-value"></div></div>\n                            <div class="input-field input-group-chat-domain hidden">\n                                <input id="sign_in_domain" type="text" placeholder=\'{[print(xabber.getString("groupchat__hint_domain"))]}\' value="111111" name="sign_in_domain">\n                            </div>\n                            <div data-activates="select-auth-xmpp-server" class="caret">\n                                <i class="mdi mdi-20px mdi-menu-up"></i>\n                                <i class="mdi mdi-20px mdi-menu-down"></i>\n                            </div>\n                        </div>\n                        <div id="select-auth-xmpp-server" class="dropdown-content noselect">\n                            <div class="property-variant set-custom-domain">{[print(xabber.getString("groupchat_custom_server"))]}</div>\n                        </div>\n                    </div>\n                </div>\n                <div class="input-field">\n                    <input id="password" placeholder=\'{[print(xabber.getString("hint_pass"))]}\' type="password" name="password">\n                </div>\n            </div>\n            <div class="register-form-step-error login-jid-error hidden"></div>\n            <div class="register-form-step-error login-password-error hidden"></div>\n            <div class="register-form-step-description"></div>\n            <div class="login-step-wrap hidden">\n                <div class="login-step connecting-step">\n                    <div class="login-step-text">\n                        {[print(xabber.getString("dialog_jingle_message__status_communicating"))]}\n                    </div>\n                    <div class="preloader-wrapper preloader-17px active visible">\n                        <div class="spinner-layer">\n                            <div class="circle-clipper left">\n                                <div class="circle"></div>\n                            </div>\n                            <div class="gap-patch">\n                                <div class="circle"></div>\n                            </div>\n                            <div class="circle-clipper right">\n                                <div class="circle"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <i class="mdi mdi-24px mdi-alert-circle hidden"></i>\n                </div>\n                <div class="login-step credentials-step">\n                    <div class="login-step-text">\n                        {[print(xabber.getString("dialog_jingle_message__status_checking_credentials"))]}\n                    </div>\n                    <div class="preloader-wrapper preloader-17px active visible">\n                        <div class="spinner-layer">\n                            <div class="circle-clipper left">\n                                <div class="circle"></div>\n                            </div>\n                            <div class="gap-patch">\n                                <div class="circle"></div>\n                            </div>\n                            <div class="circle-clipper right">\n                                <div class="circle"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <i class="mdi mdi-24px mdi-alert-circle hidden"></i>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="login-form-server-features hidden">\n        <div class="register-form-step-wrap">\n            <div class="register-form-step-header"></div>\n        </div>\n        <div class="login-server-features-wrap">\n            <div class="server-feature" data-xmlns="{[print(Strophe.NS.MAM)]}" >\n                <div class="server-feature-text">\n                    {[print(xabber.getString("signin_message_archive"))]}\n                </div>\n                <div class="preloader-wrapper preloader-17px active visible">\n                    <div class="spinner-layer">\n                        <div class="circle-clipper left">\n                            <div class="circle"></div>\n                        </div>\n                        <div class="gap-patch">\n                            <div class="circle"></div>\n                        </div>\n                        <div class="circle-clipper right">\n                            <div class="circle"></div>\n                        </div>\n                    </div>\n                </div>\n                <i class="mdi mdi-24px mdi-alert hidden"></i>\n                <div class="feature-error-tooltip-triangle">\n                    <div class="triangle-inside"></div>\n                </div>\n                <div class="feature-error-tooltip">{[print(xabber.getString(\'signin_message_archive_error\'))]}</div>\n            </div>\n            <div class="server-feature" data-xmlns="{[print(Strophe.NS.SYNCHRONIZATION)]}">\n                <div class="server-feature-text">\n                    {[print(xabber.getString("signin_synchronization"))]}\n                </div>\n                <div class="preloader-wrapper preloader-17px active visible">\n                    <div class="spinner-layer">\n                        <div class="circle-clipper left">\n                            <div class="circle"></div>\n                        </div>\n                        <div class="gap-patch">\n                            <div class="circle"></div>\n                        </div>\n                        <div class="circle-clipper right">\n                            <div class="circle"></div>\n                        </div>\n                    </div>\n                </div>\n                <i class="mdi mdi-24px mdi-alert hidden"></i>\n                <div class="feature-error-tooltip-triangle">\n                    <div class="triangle-inside"></div>\n                </div>\n                <div class="feature-error-tooltip">{[print(xabber.getString(\'signin_quick_synchronization_error\'))]}</div>\n            </div>\n            <div class="server-feature" data-xmlns="{[print(Strophe.NS.REWRITE)]}">\n                <div class="server-feature-text">\n                    {[print(xabber.getString("signin_message_editing"))]}\n                </div>\n                <div class="preloader-wrapper preloader-17px active visible">\n                    <div class="spinner-layer">\n                        <div class="circle-clipper left">\n                            <div class="circle"></div>\n                        </div>\n                        <div class="gap-patch">\n                            <div class="circle"></div>\n                        </div>\n                        <div class="circle-clipper right">\n                            <div class="circle"></div>\n                        </div>\n                    </div>\n                </div>\n                <i class="mdi mdi-24px mdi-alert hidden"></i>\n                <div class="feature-error-tooltip-triangle">\n                    <div class="triangle-inside"></div>\n                </div>\n                <div class="feature-error-tooltip">{[print(xabber.getString(\'signin_message_editing_error\'))]}</div>\n            </div>\n            <div class="server-feature" data-xmlns="{[print(Strophe.NS.AUTH_DEVICES)]}">\n                <div class="server-feature-text">\n                    {[print(xabber.getString("signin_device_management"))]}\n                </div>\n                <div class="preloader-wrapper preloader-17px active visible">\n                    <div class="spinner-layer">\n                        <div class="circle-clipper left">\n                            <div class="circle"></div>\n                        </div>\n                        <div class="gap-patch">\n                            <div class="circle"></div>\n                        </div>\n                        <div class="circle-clipper right">\n                            <div class="circle"></div>\n                        </div>\n                    </div>\n                </div>\n                <i class="mdi mdi-24px mdi-alert hidden"></i>\n                <div class="feature-error-tooltip-triangle">\n                    <div class="triangle-inside"></div>\n                </div>\n                <div class="feature-error-tooltip">{[print(xabber.getString(\'signin_tokens_error\'))]}</div>\n            </div>\n            <div class="server-feature" data-xmlns="{[print(Strophe.NS.PUBSUB)]}">\n                <div class="server-feature-text">\n                    {[print(xabber.getString("signin_publish_subscribe"))]}\n                </div>\n                <div class="preloader-wrapper preloader-17px active visible">\n                    <div class="spinner-layer">\n                        <div class="circle-clipper left">\n                            <div class="circle"></div>\n                        </div>\n                        <div class="gap-patch">\n                            <div class="circle"></div>\n                        </div>\n                        <div class="circle-clipper right">\n                            <div class="circle"></div>\n                        </div>\n                    </div>\n                </div>\n                <i class="mdi mdi-24px mdi-alert hidden"></i>\n                <div class="feature-error-tooltip-triangle">\n                    <div class="triangle-inside"></div>\n                </div>\n                <div class="feature-error-tooltip">{[print(xabber.getString(\'signin_pubsub_error\'))]}</div>\n            </div>\n            <div class="server-feature" data-xmlns="{[print(Strophe.NS.HTTP_UPLOAD)]}">\n                <div class="server-feature-text">\n                    {[print(xabber.getString("signin_file_upload"))]}\n                </div>\n                <div class="preloader-wrapper preloader-17px active visible">\n                    <div class="spinner-layer">\n                        <div class="circle-clipper left">\n                            <div class="circle"></div>\n                        </div>\n                        <div class="gap-patch">\n                            <div class="circle"></div>\n                        </div>\n                        <div class="circle-clipper right">\n                            <div class="circle"></div>\n                        </div>\n                    </div>\n                </div>\n                <i class="mdi mdi-24px mdi-alert hidden"></i>\n                <div class="feature-error-tooltip-triangle">\n                    <div class="triangle-inside"></div>\n                </div>\n                <div class="feature-error-tooltip">{[print(xabber.getString(\'signin_file_upload_error\'))]}</div>\n            </div>\n        </div>\n        <div class="server-features-error"></div>\n    </div>\n    <div class="input-field buttons-wrap">\n        <button class="btn btn-flat btn-main-filled btn-log-in">{[print(xabber.getString("title_login_xabber_account"))]}</button>\n        <button class="btn btn-flat btn-main-filled one-line hidden btn-sign-up-instead">{[print(xabber.getString("xmpp_login__button_sign_up"))]}</button>\n        <button class="btn btn-flat btn-main-filled one-line hidden btn-finish-log-in"></button>\n    </div>\n    <div class="clearfix"></div>\n</div>\n<div class="login-panel-form register-form noselect hidden">\n    <svg class="details-icon btn-go-back mdi mdi-24px mdi-svg-template" data-svgname="chevron-left-variant"></svg>\n    <div class="login-form-header">{[print(xabber.getString("title_register_xabber_account"))]}</div>\n    <div class="login-form-skip hidden">{[print(xabber.getString("skip"))]}</div>\n    <div class="register-form-nickname">\n        <div class="register-form-step-wrap">\n            <div class="register-form-step-header">{[print(xabber.getString("xmpp_login__registration_title_nickname"))]}</div>\n            <div class="input-field-wrap">\n                <div class="input-field">\n                    <input id="register_nickname" placeholder=\'{[print(xabber.getString("vcard_nick_name"))]}\' type="text" name="register_nickname">\n                </div>\n            </div>\n            <div class="register-form-step-description">{[print(xabber.getString("xmpp_login__registration_description_nickname"))]}</div>\n            <div class="register-form-step-error hidden"></div>\n        </div>\n    </div>\n    <div class="register-form-jid hidden">\n        <div class="register-form-step-wrap">\n            <div class="register-form-step-header">{[print(xabber.getString("xmpp_login__registration_title_jid"))]}</div>\n            <div class="input-field-wrap">\n                <div class="input-field">\n                    <input id="register_jid" placeholder=\'{[print(xabber.getString("hint_username"))]}\' type="text" name="register_jid">\n                </div>\n                <div class="property-field xmpp-server-dropdown-wrap">\n                    <div class="select-xmpp-server">\n                        <div data-activates="select-xmpp-server" class="xmpp-server-item-wrap property-wrap"><div class="jid-at">@</div><div class="field-jid one-line property-value"></div></div>\n                        <div class="input-field input-group-chat-domain hidden">\n                            <input id="new_account_domain" type="text" placeholder=\'{[print(xabber.getString("groupchat__hint_domain"))]}\' name="register_domain">\n                        </div>\n                        <div data-activates="select-xmpp-server" class="caret">\n                            <i class="mdi mdi-20px mdi-menu-up"></i>\n                            <i class="mdi mdi-20px mdi-menu-down"></i>\n                        </div>\n                    </div>\n                    <div id="select-xmpp-server" class="dropdown-content noselect">\n                        <div class="property-variant set-custom-domain">{[print(xabber.getString("groupchat_custom_server"))]}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="register-form-step-description">{[print(xabber.getString("xmpp_login__registration_description_jid"))]}</div>\n            <div class="register-form-step-error hidden"></div>\n        </div>\n    </div>\n    <div class="register-form-password hidden">\n        <div class="register-form-step-wrap">\n            <div class="register-form-step-header">{[print(xabber.getString("xmpp_login__registration_title_password"))]}</div>\n            <div class="input-field-wrap">\n                <div class="input-field">\n                    <input id="register_password" placeholder=\'{[print(xabber.getString("hint_pass"))]}\' type="password" name="register_password">\n                </div>\n            </div>\n            <div class="register-form-step-description">{[print(xabber.getString("xmpp_login__registration_description_password"))]}</div>\n            <div class="register-form-step-error hidden"></div>\n        </div>\n    </div>\n    <div class="register-form-picture hidden">\n        <div class="register-form-step-wrap">\n            <div class="register-form-step-header">{[print(xabber.getString("xmpp_login__registration_title_avatar"))]}</div>\n            <div class="input-field-wrap">\n                <div class="avatar-wrap dropdown-button" data-activates="{{view.cid}}-profile-image">\n                    <div class="circle-avatar">\n                        <input id="register_picture"  title=\'{[print(xabber.getString("groupchat_member_edit_change_avatar"))]}\' type="file"/>\n                        <ul id="{{view.cid}}-profile-image" class="profile-image-dropdown dropdown-content noselect">\n                            <div class="btn-emoji-panel property-variant">\n                                {[print(xabber.getString("account_emoji_profile_image_button"))]}\n                            </div>\n                            <div class="btn-selfie property-variant">\n                                {[print(xabber.getString("account_webcam_profile_image_button"))]}\n                            </div>\n                            <div class="btn-choose-image property-variant">\n                                {[print(xabber.getString("account_profile_image_button"))]}\n                            </div>\n                        </ul>\n                    </div>\n                    <div class="circle-icon">\n                        <svg class="set-groupchat-avatar" viewBox="0 0 24 24">\n                            <path d="M4,4H7L9,2H15L17,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9Z" />\n                        </svg>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    {[if (xabber.url_params && xabber.url_params.rkey){]}\n        <div class="login-form-url">\n            <i class="mdi login-form-url-icon mdi-link-variant"></i>\n            <div class="login-form-url-text">\n                {[print(xabber.getString("xmpp_login__registration_via_link"))]}\n            </div>\n        </div>\n    {[}]}\n    <div class="input-field buttons-wrap">\n        <button class="btn btn-flat btn-main-filled btn-next">{[print(xabber.getString("xaccount_next"))]}</button>\n        <button class="btn btn-flat btn-main btn-skip">{[print(xabber.getString("xmpp_login__registration_skip"))]}</button>\n    </div>\n    <div class="clearfix"></div>\n</div>'},99288:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="left-column noselect">\n    <div class="main-info-wrap xabber-info-wrap">\n        <div class="picture-wrap">\n            <img class="logo" src="{{CLIENT_LOGO}}"/>\n        </div>\n        <div class="name">{{CLIENT_NAME}}</div>\n        <div class="version"></div>\n    </div>\n</div>\n</div>\n\n<div class="right-column noselect">\n    <div class="settings-panel-head">\n        <span>{[print(xabber.getString("category_about"))]}</span>\n    </div>\n\n    <div class="panel-content-wrap">\n        <div class="panel-content">\n            <div class="settings-block-wrap about">\n                <div class="block-content">{[print(xabber.getString("web_client__screen_about__preamble_1", [constants.SHORT_CLIENT_NAME, constants.SHORT_CLIENT_NAME]))]}</div>\n                <div class="block-content">{[print(xabber.getString("web_client__screen_about__preamble_2", [`<a href="${CLIENT_URL}" target="_blank">${CLIENT_URL}</a>`]))]}</div>\n                <div class="block-header">\n                    <span class="block-name">{[print(xabber.getString("web_client__screen_about__block_1__header"))]}</span>\n                </div>\n                <div class="block-content">{[print(xabber.getString("web_client__screen_about__block_1__text"))]}</div>\n\n                <div class="block-header">\n                    <span class="block-name">{[print(xabber.getString("web_client__screen_about__block_2__header"))]}</span>\n                </div>\n                <div class="block-content">{[print(xabber.getString("web_client__screen_about__block_2__text", [constants.SHORT_CLIENT_NAME]))]}</div>\n\n                <div class="block-header">\n                    <span class="block-name">{[print(xabber.getString("web_client__screen_about__block_3__header"))]}</span>\n                </div>\n                <div class="block-content">{[print(xabber.getString("web_client__screen_about__block_3__text_1", [constants.CLIENT_NAME, `<a href="${DEVELOPER_URL}" target="_blank">${xabber.getString("client_developer_company_name")}</a>`, constants.SHORT_CLIENT_NAME]))]}</div>\n                <div class="block-content">{[print(xabber.getString("web_client__screen_about__block_3__text_2", [constants.SHORT_CLIENT_NAME]))]}</div>\n                <div class="block-content">{[print(xabber.getString("web_client__screen_about__block_3__text_3"))]}</div>\n                <div class="block-content flex-content">\n                    <img class="logo" src="images/redsolution-logo.png"/>\n                    <a href="https://twitter.com/Xabber_XMPP" target="_blank"><div class="btn-social twitter-color">\n                        <i class="mdi mdi-28px mdi-twitter"></i>\n                    </div></a>\n                    <a href="${CLIENT_GITHUB_URL}" target="_blank"><img class="btn-social github-logo" src="images/ic_github.png"/></a>\n                </div>\n\n                <div class="block-header">\n                    <span class="block-name">{[print(xabber.getString("web_client__screen_about__block_4__header"))]}</span>\n                </div>\n                <div class="block-content">{[print(xabber.getString("web_client__screen_about__block_4__text_1", [constants.SHORT_CLIENT_NAME]))]}</div>\n                <div class="block-content">{[print(xabber.getString("web_client__screen_about__block_4__text_2", [`<a href="${PROJECT_CROWDIN_URL}" target="_blank">${xabber.getString("web_client__screen_about__block_4__text_2__link__text", [constants.SHORT_CLIENT_NAME])}</a>`]))]}</div>\n\n                <div class="block-header">\n                    <span class="block-name">{[print(xabber.getString("web_client__screen_about__block_5__header"))]}</span>\n                </div>\n                <div class="block-content">{[print(xabber.getString("web_client__screen_about__block_5__text_1", [constants.CLIENT_NAME, `<a href="${CLIENT_GITHUB_URL}" target="_blank">${xabber.getString("web_client__screen_about__block_5__text_1__link__text")}</a>`]))]}</div>\n                <div class="block-content">{[print(xabber.getString("web_client__screen_about__block_5__text_2"))]}</div>\n                <div class="block-content">{[print(xabber.getString("web_client__screen_about__block_5__text_3", [constants.SHORT_CLIENT_NAME, xabber.getString("client_developer_company_name"), `<a href="${DEVELOPER_URL}" target="_blank">${xabber.getString("client_developer_company_full_name")}</a>`]))]}</div>\n                <div class="block-content">{[print(xabber.getString("web_client__screen_about__block_5__text_4", [constants.CLIENT_NAME, `<a href="${CLIENT_LICENSE_GITHUB_URL}" target="_blank">${xabber.getString("web_client__screen_about__block_5__text_4__link__text")}</a>`]))]}</div>\n            </div>\n        </div>\n    </div>\n</div>'},77428:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-header">\n    <span></span>\n    <div class="menu-wrap">\n        <div data-screen-name="library" class="menu-btn btn-library">{[print(xabber.getString("settings__dialog_background__menu_item_library"))]}</div>\n        <div data-screen-name="upload" class="menu-btn btn-upload">{[print(xabber.getString("settings__dialog_background__menu_item_upload"))]}</div>\n        <div data-screen-name="web-address" class="menu-btn btn-web-address">{[print(xabber.getString("settings__dialog_background__menu_item_url"))]}</div>\n    </div>\n</div>\n<div class="modal-content">\n    <div data-screen="library" class="screen-wrap library-wrap"></div>\n    <div data-screen="upload" class="hidden screen-wrap">\n        <div class="upload-wrap">\n            <div class="upload-text">{[print(xabber.getString("settings__dialog_background__section_upload__text"))]}</div>\n            <div class="upload-button">\n                <button type="file">{[print(xabber.getString("settings__dialog_background__section_upload__button_upload"))]}</button>\n                <input type="file">\n            </div></div>\n    </div>\n    <div data-screen="web-address" class="hidden screen-wrap web-address-wrap">\n        <div class="web-address">\n            <div class="label">{[print(xabber.getString("settings__dialog_background__section_url__label"))]}</div>\n            <input class="url"/>\n        </div>\n        <div class="image-preview">\n            <img class="hidden">\n            <p>{[print(xabber.getString("settings__dialog_background__section_url__placeholder_preview"))]}</p>\n        </div>\n    </div>\n</div>\n<div class="modal-footer">\n    <button class="btn-flat btn-main text-color-700 non-active btn-add">{[print(xabber.getString("set"))]}</button>\n    <button class="btn-flat btn-main btn-dark btn-cancel">{[print(xabber.getString("cancel"))]}</button>\n</div>'},51462:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-header">{[print(xabber.getString("settings__section_appearance__header_toolbar_icons_color"))]}</div>\n<div class="material-color-picker-wrap">\n    <div class="material-color-picker">\n        {[materialColors.forEach(function (color) {]}\n        <div data-color-name="{{color.color}}" class="color-palette-wrapper">\n            {[var default_color = color.variations.find(v => v.weight == 500);]}\n            <div data-weight="500" data-hex="{{default_color.hex}}" style="background-color: {{default_color.hex}}" class="color-palette-item">\n            </div>\n            {[color.variations.forEach(function (variation) {]}\n            <div data-weight="{{variation.weight}}" data-hex="{{variation.hex}}" style="background-color: {{variation.hex}}" class="color-palette-item">\n            </div>\n            {[})]}\n        </div>\n        {[})]}\n    </div>\n</div>\n<div class="modal-footer">\n    <div class="hidden selected-color-wrap">\n        <div class="selected-color-item"></div>\n        <div class="selected-color-info">\n            <div class="selected-color-name"></div>\n            <div class="selected-color-hex"></div>\n            <input class="selected-color-hex-input hidden"/>\n        </div>\n        <button class="btn-flat btn-main btn-dark btn-set">{[print(xabber.getString("set"))]}</button>\n    </div>\n</div>'},83430:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<ul class="color-values noselect">\n    <li class="color-value" data-value="red">\n        <div class="color-name text-color-red-700">{[print(xabber.getString("account_color_name_red"))]}</div>\n        <div class="color-pattern ground-color-red-700"></div>\n    </li>\n    <li class="color-value" data-value="pink">\n        <div class="color-name text-color-pink-700">{[print(xabber.getString("account_color_name_pink"))]}</div>\n        <div class="color-pattern ground-color-pink-700"></div>\n    </li>\n    <li class="color-value" data-value="purple">\n        <div class="color-name text-color-purple-700">{[print(xabber.getString("account_color_name_purple"))]}</div>\n        <div class="color-pattern ground-color-purple-700"></div>\n    </li>\n    <li class="color-value" data-value="deep-purple">\n        <div class="color-name text-color-deep-purple-700">{[print(xabber.getString("account_color_name_deep_purple").replace(/-/g, " "))]}</div>\n        <div class="color-pattern ground-color-deep-purple-700"></div>\n    </li>\n    <li class="color-value" data-value="indigo">\n        <div class="color-name text-color-indigo-700">{[print(xabber.getString("account_color_name_indigo"))]}</div>\n        <div class="color-pattern ground-color-indigo-700"></div>\n    </li>\n    <li class="color-value" data-value="blue">\n        <div class="color-name text-color-blue-700">{[print(xabber.getString("account_color_name_blue"))]}</div>\n        <div class="color-pattern ground-color-blue-700"></div>\n    </li>\n    <li class="color-value" data-value="light-blue">\n        <div class="color-name text-color-light-blue-700">{[print(xabber.getString("account_color_name_light_blue").replace(/-/g, " "))]}</div>\n        <div class="color-pattern ground-color-light-blue-700"></div>\n    </li>\n    <li class="color-value" data-value="cyan">\n        <div class="color-name text-color-cyan-700">{[print(xabber.getString("account_color_name_cyan"))]}</div>\n        <div class="color-pattern ground-color-cyan-700"></div>\n    </li>\n    <li class="color-value" data-value="teal">\n        <div class="color-name text-color-teal-700">{[print(xabber.getString("account_color_name_teal"))]}</div>\n        <div class="color-pattern ground-color-teal-700"></div>\n    </li>\n    <li class="color-value" data-value="green">\n        <div class="color-name text-color-green-700">{[print(xabber.getString("account_color_name_green"))]}</div>\n        <div class="color-pattern ground-color-green-700"></div>\n    </li>\n    <li class="color-value" data-value="light-green">\n        <div class="color-name text-color-light-green-700">{[print(xabber.getString("account_color_name_light_green").replace(/-/g, " "))]}</div>\n        <div class="color-pattern ground-color-light-green-700"></div>\n    </li>\n    <li class="color-value" data-value="lime">\n        <div class="color-name text-color-lime-700">{[print(xabber.getString("account_color_name_lime"))]}</div>\n        <div class="color-pattern ground-color-lime-700"></div>\n    </li>\n    <li class="color-value" data-value="amber">\n        <div class="color-name text-color-amber-700">{[print(xabber.getString("account_color_name_amber"))]}</div>\n        <div class="color-pattern ground-color-amber-700"></div>\n    </li>\n    <li class="color-value" data-value="orange">\n        <div class="color-name text-color-orange-700">{[print(xabber.getString("account_color_name_orange"))]}</div>\n        <div class="color-pattern ground-color-orange-700"></div>\n    </li>\n    <li class="color-value" data-value="deep-orange">\n        <div class="color-name text-color-deep-orange-700">{[print(xabber.getString("account_color_name_deep_orange").replace(/-/g, " "))]}</div>\n        <div class="color-pattern ground-color-deep-orange-700"></div>\n    </li>\n    <li class="color-value" data-value="brown">\n        <div class="color-name text-color-brown-700">{[print(xabber.getString("account_color_name_brown"))]}</div>\n        <div class="color-pattern ground-color-brown-700"></div>\n    </li>\n    <li class="color-value" data-value="blue-grey">\n        <div class="color-name text-color-blue-grey-700">{[print(xabber.getString("account_color_name_blue_grey").replace(/-/g, " "))]}</div>\n        <div class="color-pattern ground-color-blue-grey-700"></div>\n    </li>\n</ul>'},62985:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal dialog-modal {{modal_class}}">\n    <div class="modal-header">\n        <div class="panel-header black-text">{{header}}</div>\n    </div>\n    <div class="modal-content">\n        <div class="dialog-text">{{text}}</div>\n        <div class="dialog-options-wrap">\n        {[ for (var idx in dialog_options) { var option = dialog_options[idx]; ]}\n            <div class="dialog-option" data-name="{{option.name}}">\n                <input type="checkbox" class="filled-in" id="dialog_option_{{option.name}}" {[ if (option.checked) { ]}checked="checked"{[ } ]}/>\n                <label for="dialog_option_{{option.name}}">{{option.text}}</label>\n            </div>\n        {[ } ]}\n        </div>\n        <div class="container-for-img hidden"><img class="img-from-clipboard"></div>\n    </div>\n    <div class="modal-footer {{flag}}">\n        {[ for (var idx in optional_buttons) { var button = optional_buttons[idx]; ]}\n        <button class="optional-button btn-flat btn-main" data-option="{{button.value}}">{{button.name}}</button>\n        {[ } ]}\n        {[ if (ok_button) { ]}\n        <button class="ok-button btn-flat btn-main" data-option=true>{{ok_button.text}}</button>\n        {[ } ]}\n        {[ if (cancel_button) { ]}\n        <button class="cancel-button btn-flat btn-main btn-dark btn-cancel" data-option=false>{{cancel_button.text}}</button>\n        {[ } ]}\n    </div>\n</div>\n'},16969:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="fingerprint-content">\n    {[if (svg_icon){]}\n        <div class="fingerprint-device-icon">\n            <svg class="mdi mdi-72px mdi-svg-template" data-svgname="{{svg_icon}}"></svg>\n        </div>\n    {[}]}\n    <div title="{[print(xabber.getString(\'omemo__dialog_fingerprints__textfield_device_id_tooltip\', [id, (label ? label : \'none\')]))]}" class="device-wrap device-fingerprints-part">\n        <div class="fingerprint-label">\n            <div class="value">{{label}}</div>\n        </div>\n    </div>\n    <div title="{[print(xabber.getString(\'omemo__dialog_fingerprints__textfield_device_id_tooltip\', [id, (label ? label : \'none\')]))]}" class="device-wrap device-fingerprints-part">\n        <div class="device-id">\n            <div class="value">{{id}}</div>\n        </div>\n    </div>\n    <div class="fingerprint-wrap">\n        <div title="Device fingerprint" class="fingerprint device-fingerprints-part">\n            <div class="label">\n                {[if (!edit_setting) {]}\n                    {[print(xabber.getString("omemo__dialog_fingerprints__other_fingerprint_label"))]}\n                {[} else {]}\n                <span class="text-color-700">{[print(xabber.getString("omemo__dialog_fingerprints__text_this_device"))]}</span> {[print(xabber.getString("omemo__dialog_fingerprints__fingerprint_label"))]}\n                {[}]}</div>\n            <div class="value">{{fingerprint}}</div>\n        </div>\n        {[if (error) {]}\n        <div class="fingerprint-error">{{error}}</div>\n        {[}]}\n        {[if (old_fingerprint){]}<div title="Old device fingerprint" class="old-fingerprint">{{old_fingerprint}}</div>{[}]}\n    </div>\n</div>\n<div data-trust="{{trust}}" class="buttons">\n    {[if (trust !== null && !error) {]}\n    <div class="dropdown-button" data-activates="select-status-{{id}}">\n        <div class="trust-item-wrap btn-main btn-flat">\n            <div data-value="{{trust}}">{[print(xabber.getString(`omemo__dialog_fingerprints__button_verify_device`))]}</div>\n        </div>\n    </div>\n    <div id="select-status-{{id}}" class="dropdown-content bootstrap-dropdown noselect fingerprint-dropdown">\n        <div data-value="ignore" class="property-variant btn-ignore">{[print(xabber.getString("omemo__dialog_fingerprints__button_ignore"))]}</div>\n        <div data-value="trust" class="property-variant btn-trust">{[print(xabber.getString("omemo__dialog_fingerprints__button_trust"))]}</div>\n    </div>\n    {[}]}\n</div>'},75551:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="row">\n    <div title="{[print(xabber.getString(\'omemo__dialog_fingerprints__textfield_device_id_tooltip\', [id, (label ? label : \'none\')]))]}" class="device-wrap">\n        {[if (edit_setting) {]}\n        <input class="hidden set-label one-line" {[if (label) {]}value="{{label}}"{[}]}>{[}]}\n        {[if (label) {]}<div class="one-line label">{{label}}</div>{[}]}\n        <div class="device-id one-line">{{id}}</div>\n        {[if (!label) {]}<div class="device-id-label">{[print(xabber.getString("omemo__dialog_fingerprints__label_device_id"))]}</div>{[}]}\n        {[if (edit_setting) {]}<div class="set-label-label hidden">{[print(xabber.getString("omemo__dialog_fingerprints__label_set_label"))]}</div>{[}]}\n    </div>\n    <div class="fingerprint-wrap">\n        <div title="Device fingerprint" class="fingerprint">{{fingerprint}}</div>\n        {[if (error) {]}\n        <div class="fingerprint-error">{{error}}</div>\n        {[}]}\n        {[if (old_fingerprint){]}<div title="Old device fingerprint" class="old-fingerprint">{{old_fingerprint}}</div>{[}]}\n    </div>\n    <div data-trust="{{trust}}" class="buttons">\n        {[if (trust !== null && !error) {]}\n        <div class="dropdown-button" data-activates="select-status-{{id}}">\n            <div class="trust-item-wrap btn-main btn-flat">\n                <div data-value="{{trust}}">{[print(xabber.getString(`omemo__dialog_fingerprints__button_${trust}`))]}</div>\n            </div>\n        </div>\n        <div id="select-status-{{id}}" class="dropdown-content noselect fingerprint-dropdown">\n            <div data-value="ignore" class="btn-main text-color-grey-500 btn-ignore btn-flat">{[print(xabber.getString("omemo__dialog_fingerprints__button_ignore"))]}</div>\n            <div data-value="trust" class="btn-main btn-flat btn-trust text-color-green-500">{[print(xabber.getString("omemo__dialog_fingerprints__button_trust"))]}</div>\n            {[if (delete_button){]}\n            <div class="btn-main btn-flat btn-delete text-color-red-500">{[print(xabber.getString("omemo__dialog_fingerprints__button_delete"))]}</div>\n            {[}]}\n        </div>\n        {[}]}\n    </div>\n</div>'},5822:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-header fingerprints-header">\n    <div class="header"></div>\n    <div class="additional-info"></div>\n</div>\n<div class="fingerprints-content">\n</div>\n<div class="fingerprints-bottom">\n    <div class="this-device-wrap">\n        <div class="this-device-header-wrap">\n            <div class="divider"></div>\n            <div class="this-device-header">{[print(xabber.getString("omemo__dialog_fingerprints__text_this_device"))]}</div>\n        </div>\n        <div class="this-device-content">\n        </div>\n    </div>\n    <div class="fingerprints-description-wrap">\n        <div class="fingerprints-description">{[print(xabber.getString("omemo__dialog_fingerprints__text_description"))]}</div>\n        <div class="link-about-encryption"><a href="{[print(xabber.getString(\'omemo__dialog_fingerprints__link_learn_more\'))]}" target="_blank">{[print(xabber.getString("omemo__dialog_fingerprints__text_learn_more"))]}</a></div>\n    </div>\n</div>'},26376:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-header fingerprints-header">\n    {[print(xabber.getString("omemo__dialog_fingerprints__device_verification_label"))]}\n</div>\n<div class="fingerprints-content">\n    <div class="other-device-content">\n\n    </div>\n    <div class="this-device-content">\n\n    </div>\n</div>\n<div class="fingerprints-bottom">\n    <div class="fingerprints-help-text">\n        {[print(xabber.getString("omemo__dialog_fingerprints__bottom_help_text"))]}\n    </div>\n    <div class="btn-main btn-start-trust-session">\n        send trust start\n    </div>\n</div>'},71050:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='    <div class="modal-header">\n        {[print(xabber.getString("incoming_trust_session__modal_header"))]}\n    </div>\n    <div class="modal-content">\n        {[print(xabber.getString("incoming_trust_session__modal_text"))]}\n    </div>\n    <div class="modal-footer">\n        <button class="btn-flat btn-main btn-change">{[print(xabber.getString("accept"))]}</button>\n        <button class="btn-flat btn-main btn-dark btn-cancel">{[print(xabber.getString("cancel"))]}</button>\n    </div>'},10596:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="input-widget-wrap {{field_name}}-wrap">\n    <div class="{{field_name}} field-text one-line"></div>\n    <div class="btn-rename">\n        <span>{[print(xabber.getString("input_widget__button_rename"))]}</span>\n    </div>\n    <div class="{{field_name}}-input-wrap">\n        <input class="{{field_name}}-input field-input hidden" type="{{field_type}}" placeholder="{{placeholder}}">\n    </div>\n</div>\n'},62077:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="collapsed-movable"></div>\n<i class="mdi mdi-phone btn-collapse"></i>\n<div class="call-header">\n    {[print(xabber.getString("dialog_jingle_message__header", [SHORT_CLIENT_NAME]))]}\n    <div class="calling-status"></div>\n</div>\n<div class="blur-background"></div>\n<div class="contact-info">\n    <div class="name one-line"></div>\n    <div class="calling-status"></div>\n</div>\n<div class="video-wrap">\n    <video autoplay loop class="blank-video hidden">\n        <source src="{{BLANK_VIDEO.MP4}}">\n        <source src="{{BLANK_VIDEO.OGG}}" type="video/ogg">\n        <source src="{{BLANK_VIDEO.WEBM}}" type="video/webm">\n    </video>\n    <audio autoplay class="webrtc-remote-audio hidden"></audio>\n    <video autoplay muted class="webrtc-local-video collapsed hidden"></video>\n    <div class="default-screen">\n        <div class="circle-avatar"></div>\n        <div class="name one-line"></div>\n    </div>\n</>\n<div class="buttons-panel">\n    <div class="buttons-wrap">\n        <div class="btn-wrap" title="Collapse window"><svg class="btn-collapse mdi-24px" viewBox="0 0 24 24">\n            <path d="M19.5,3.09L15,7.59V4H13V11H20V9H16.41L20.91,4.5L19.5,3.09M4,13V15H7.59L3.09,19.5L4.5,20.91L9,16.41V20H11V13H4Z"></path>\n        </svg></div>\n        <div class="btn-wrap" title="Fullscreen mode"><svg class="btn-full-screen mdi-24px" viewBox="0 0 24 24">\n            <path d="M11,21H3V13H5V17.59L17.59,5H13V3H21V11H19V6.41L6.41,19H11V21Z" />\n        </svg></div>\n        <i title=\'{[print(xabber.getString("dialog_jingle_message__button_mute_microphone__tooltip"))]}\' class="btn-microphone mdi mdi-24px mdi-microphone"></i>\n        <i title=\'{[print(xabber.getString("dialog_jingle_message__button_switch_video__tooltip"))]}\' class="btn-video mdi mdi-24px mdi-video"></i>\n        <i title=\'{[print(xabber.getString("dialog_jingle_message__button_mute__tooltip"))]}\' class="btn-volume mdi mdi-24px mdi-volume-high"></i>\n        <i title=\'{[print(xabber.getString("dialog_jingle_message__button_share_screen__tooltip"))]}\' class="btn-share-screen mdi mdi-24px mdi-monitor"></i>\n        <i title=\'{[print(xabber.getString("dialog_jingle_message__button_accept_call__tooltip"))]}\' class="btn-accept mdi mdi-24px mdi-phone"></i>\n        <i title=\'{[print(xabber.getString("dialog_jingle_message__button_decline_call__tooltip"))]}\' class="btn-cancel mdi mdi-24px mdi-phone-hangup"></i>\n    </div>\n</div>'},17661:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="msg-text ground-color-300">\n    <span title="{[print(xabber.getString(\'omemo__alert_enable__tooltip\'))]}" class="btn-enable">{[print(xabber.getString("omemo__alert_enable__link_text"))]}</span> {[print(xabber.getString("omemo__alert_enable__text", [jid]))]}</div>\n<i class="mdi mdi-22px mdi-close btn-escape"></i>\n<button class="btn-enable btn-flat hover-ground-color-500 btn-dark btn-main">{[print(xabber.getString("omemo__alert_enable__link_text"))]}</button>'},14197:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="plyr-player-popup-container">\n    <div class="plyr-player-popup-draggable">\n        <video class="plyr-player-popup"></video>\n        <div class="plyr-player-min-controls-tab">\n            <div class="plyr-player-min-controls-buttons">\n                <svg class="mdi mdi-24px mdi-plyr-button-minimized mdi-minimize-full mdi-svg-template" data-svgname="player-full"></svg>\n                <svg class="mdi mdi-24px mdi-plyr-button-minimized mdi-toggle-play mdi-plyr-play mdi-svg-template" data-svgname="play"></svg>\n                <svg class="mdi mdi-24px mdi-plyr-button-minimized mdi-toggle-play mdi-plyr-pause mdi-svg-template" data-svgname="pause"></svg>\n                <svg class="mdi mdi-24px mdi-plyr-button-minimized mdi-toggle-mute mdi-mute-plyr mdi-svg-template" data-svgname="volume-off"></svg>\n                <svg class="mdi mdi-24px mdi-plyr-button-minimized mdi-toggle-mute mdi-unmute-plyr mdi-svg-template" data-svgname="volume-high"></svg>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="plyr-player-control-tab">\n    <i class="mdi mdi-24px mdi-close"></i>\n    <svg class="mdi mdi-24px mdi-plyr-toolbar-item mdi-plyr-hide mdi-svg-template" data-svgname="player-mini"></svg>\n</div>'},73122:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="emoji-font-field">\n    <input class="with-gap" name="{{input_name}}" value="{{value}}" type="radio" id="{{input_id}}" />\n    <label class="one-line" for="{{input_id}}">{{label}}</label>\n    {[ if (hint) {]}<div class="emoji-hint">{{hint}}{[ if (no_glyph_text) {]}<br><i>{{no_glyph_text}}</i>{[}]}</div>{[}]}\n    {[ if (value === \'system\') {]}<div class="emoji-hint">{[print(xabber.getString("settings__menu_item__emoji_font_system_label"))]}</div>{[}]}\n</div>'},49707:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="language-item">\n    <input class="with-gap" name="{{input_name}}" value="{{value}}" type="radio" id="{{input_id}}" />\n    <label for="{{input_id}}">{{label}}</label>\n    {[ if (progress && progress.text) {]}<div class="translation-progress">{{progress.text}}</div>{[}]}\n</div>'},94944:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<p>\n    <input class="with-gap" name="{{input_name}}" value="{{value}}" type="radio" id="{{input_id}}" />\n    <label for="{{input_id}}">{{label}}</label>\n</p>'},15887:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='    <div class="left-column noselect">\n        <div class="main-info-wrap xabber-info-wrap">\n            <div class="picture-wrap">\n                <img class="logo" src="{{CLIENT_LOGO}}"/>\n            </div>\n            <div class="name">{{CLIENT_NAME}}</div>\n            <div class="version"></div>\n        </div>\n        <div class="settings-tabs-wrap">\n            {[if (ENABLE_XABBER_ACCOUNT) {]}\n            <div class="settings-tab xabber-account-tab offline" data-block-name="xabber-account">\n                <svg class="mdi mdi-24px mdi-svg-template xabber-offline-icon" data-svgname="xabber-offline"></svg>\n                <svg class="mdi mdi-24px mdi-svg-template xabber-online-icon" data-svgname="xabber-online"></svg>\n                <div class="settings-block-name one-line">{[print(xabber.getString("settings__menu_item__xabber_account"))]}</div>\n            </div>\n            {[}]}\n            <div class="settings-tab active" data-block-name="xmpp-accounts">\n                <i class="mdi mdi-24px mdi-lightbulb"></i>\n                <div class="settings-block-name one-line">{[print(xabber.getString("settings__menu_item__xmpp_account"))]}</div>\n            </div>\n            <div class="settings-tab" data-block-name="background">\n                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="palette"></svg>\n                <div class="settings-block-name one-line">{[print(xabber.getString("category_interface"))]}</div>\n            </div>\n            <div class="settings-tab" data-block-name="notifications">\n                <i class="mdi mdi-24px mdi-bell"></i>\n                <div class="settings-block-name one-line">{[print(xabber.getString("settings__menu_item__notifications"))]}</div>\n            </div>\n            <div class="settings-tab" data-block-name="privacy">\n                <i class="mdi mdi-24px mdi-incognito"></i>\n                <div class="settings-block-name one-line">{[print(xabber.getString("settings__menu_item__privacy"))]}</div>\n            </div>\n            <div class="settings-tab" data-block-name="interface_language">\n                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="translate"></svg>\n                <div class="settings-block-name one-line">{[print(xabber.getString("settings__menu_item__interface_language"))]}</div>\n            </div>\n            {[if (PERSONAL_AREA_URL && Object.keys(PERSONAL_AREA_URL).length) {]}\n            <a href="{{PERSONAL_AREA_URL.url}}" target="_blank"><div class="link-button settings-tab" data-block-name="{{PERSONAL_AREA_URL.label}}">\n                <i class="mdi mdi-24px mdi-{{PERSONAL_AREA_URL.icon_name}}"></i>\n                <div class="settings-block-name one-line">{{PERSONAL_AREA_URL.label}}</div>\n            </div>\n            </a>\n            {[}]}\n        </div>\n        <div class="settings-tabs-bottom-wrap settings-tabs-wrap">\n            <div class="settings-tab delete-all-accounts">\n                <i class="mdi mdi-24px mdi-logout-variant"></i>\n                <div class="settings-block-name">{[print(xabber.getString("button_quit"))]}</div>\n            </div>\n        </div>\n    </div>\n\n    <div class="right-column noselect">\n        <div class="settings-panel-head">\n            <span>{[print(xabber.getString("preference_editor"))]}</span>\n            <button class="btn-add-account btn-flat btn-main text-color-500 ground-color-grey-100 hover-ground-color-grey-300">{[print(xabber.getString("dialog_add__label_add_account"))]}</button>\n        </div>\n\n        <div class="panel-content-wrap">\n            <div class="panel-content">\n                {[if (ENABLE_XABBER_ACCOUNT) {]}\n                <div data-block-name="" class="settings-block-wrap xabber-account">\n                    <div class="block-header">\n                        <span class="block-name">{[print(xabber.getString("settings__menu_item__xabber_account"))]}</span>\n                    </div>\n                </div>\n                {[}]}\n                <div data-header=\'{[print(xabber.getString("settings__menu_item__xmpp_account"))]}\' class="settings-block-wrap xmpp-accounts">\n                    <div class="setting xmpp-account-list">\n                        <div class="accounts-head-wrap">\n                            <div class="accounts-head xmppid-head">{[print(xabber.getString("settings__section_xmpp_accounts__table_header_xmpp_id"))]}</div>\n                            <div class="accounts-head sync-head">{[print(xabber.getString("settings__section_xmpp_accounts__table_header_sync"))]}</div>\n                            <div class="accounts-head enabled-head">{[print(xabber.getString("settings__section_xmpp_accounts__table_header_enabled"))]}</div>\n                        </div>\n                        <span class="no-accounts-tip">{[print(xabber.getString("settings__section_xmpp_accounts__text_no_accounts"))]}</span>\n                        <div class="move-account-to-bottom droppable"></div>\n                    </div>\n                </div>\n\n                <div data-header=\'{[print(xabber.getString("category_interface"))]}\' class="settings-block-wrap background hidden">\n                    <div class="settings-subblock-wrap">\n                        <div class="block-header">\n                            <span class="block-name">{[print(xabber.getString("settings__menu_item__appearance"))]}</span>\n                        </div>\n                        <div class="block-subheader">\n                            <span class="block-name">{[print(xabber.getString("settings__section_appearance__palette"))]}</span>\n                        </div>\n                        <div class="toolbar-main-color-setting-wrap">\n                            <div class="setting-name">{[print(xabber.getString("settings__section_appearance__header_main_color"))]}</div>\n                            <div class="setting toolbar-main-color-setting field-wrap">\n                                <div class="current-main-color-wrap">\n                                    <div class="current-main-color ground-color-500"></div>\n                                    <div class="color-name"></div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="toolbar-color-setting-wrap">\n                            <div class="setting-name">{[print(xabber.getString("settings__section_appearance__header_toolbar_icons_color"))]}</div>\n                            <div class="setting toolbar-color-setting field-wrap">\n                                <div class="selected-color-wrap">\n                                    <div class="selected-color-item"></div>\n                                    <div class="selected-color-info">\n                                        <div class="selected-color-name"></div>\n                                        <div class="selected-color-hex"></div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="block-subheader">\n                            <span class="block-name">{[print(xabber.getString("account_settings_background"))]}</span>\n                        </div>\n                        <div class="background-setting-wrap">\n                            <div class="setting-name">{[print(xabber.getString("settings__section_appearance__header_background"))]}</div>\n                            <div class="setting background radio-button field-wrap">\n                                <div class="field radio-field clickable-field">\n                                    <form action="#">\n                                        <p>\n                                            <input class="with-gap" name="background" value="default" type="radio" id="{{view.cid}}-default-background" />\n                                            <label for="{{view.cid}}-default-background">{[print(xabber.getString("settings__section_appearance__background__label_default"))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="background" value="repeating-pattern" type="radio" id="{{view.cid}}-repeating-pattern-background" />\n                                            <label for="{{view.cid}}-repeating-pattern-background">{[print(xabber.getString("settings__section_appearance__background__label_pattern"))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="background" value="image" type="radio" id="{{view.cid}}-image-background" />\n                                            <label for="{{view.cid}}-image-background">{[print(xabber.getString("settings__section_appearance__background__label_image"))]}</label>\n                                        </p>\n                                    </form>\n                                </div>\n                                <div class="current-background-wrap">\n                                    <div class="dark-placeholder">{[print(xabber.getString("settings__section_appearance__background__button_update"))]}</div>\n                                    <div class="current-background"></div>\n                                </div>\n                            </div>\n                            <div class="blur-setting-wrap">\n                                <div class="setting blur-setting field-wrap">\n                                    <div class="input-field checkbox-field">\n                                        <input type="checkbox" class="filled-in" id="blur_switch"/>\n                                        <label for="blur_switch">{[print(xabber.getString("settings__section_appearance__background__checkbox_blur"))]}</label>\n                                    </div>\n                                    <form action="#">\n                                        <div class="disabled hidden"></div>\n                                        <p class="range-field">\n                                            <input type="range" id="blur" min="0" max="100" />\n                                        </p>\n                                    </form>\n                                </div>\n                            </div>\n                            <div class="vignetting-setting-wrap">\n                                <div class="setting vignetting-setting field-wrap">\n                                    <div class="input-field checkbox-field">\n                                        <input type="checkbox" class="filled-in" id="vignetting_switch"/>\n                                        <label for="vignetting_switch">{[print(xabber.getString("settings__section_appearance__background__checkbox_vignette"))]}</label>\n                                    </div>\n                                    <form action="#">\n                                        <div class="disabled hidden"></div>\n                                        <p class="range-field">\n                                            <input type="range" id="vignetting" min="0" max="200" />\n                                        </p>\n                                    </form>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="settings-subblock-wrap">\n                        <div class="block-header">\n                            <span class="block-name">{[print(xabber.getString("chat_viewer"))]}</span>\n                        </div>\n                        <div class="block-subheader">\n                            <span class="block-name">{[print(xabber.getString("category_behavior"))]}</span>\n                        </div>\n                        <div class="setting hotkeys radio-button field-wrap">\n                            <div class="field radio-field clickable-field">\n                                <form action="#">\n                                    <p>\n                                        <input class="with-gap" name="hotkeys" value="enter" type="radio" id="{{view.cid}}-enter" />\n                                        <label for="{{view.cid}}-enter">{[print(xabber.getString("settings__section_keyboard__label_send_on_enter"))]}</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="hotkeys" value="ctrlenter" type="radio" id="{{view.cid}}-ctrlenter" />\n                                        <label for="{{view.cid}}-ctrlenter">{[print(xabber.getString("settings__section_keyboard__label_send_on_ctrlenter"))]}</label>\n                                    </p>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="settings-subblock-wrap contact-list">\n                        <div class="block-header">\n                            <span class="block-name">{[print(xabber.getString("category_contact_list"))]}</span>\n                        </div>\n                        <div class="circle-avatar noselect"></div>\n                        <div class="setting-name">{[print(xabber.getString("avatars"))]}</div>\n                        <div class="setting avatar-shape radio-button field-wrap">\n                            <div class="field radio-field clickable-field">\n                                <form action="#">\n                                    <p>\n                                        <input class="with-gap" name="avatar_shape" value="circle" type="radio" id="{{view.cid}}-circle" />\n                                        <label for="{{view.cid}}-circle">{[print(xabber.getString("settings__section_appearance__avatars_circle"))]}</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="avatar_shape" value="squircle" type="radio" id="{{view.cid}}-squircle" />\n                                        <label for="{{view.cid}}-squircle">{[print(xabber.getString("settings__section_appearance__avatars_squircle"))]}</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="avatar_shape" value="octagon" type="radio" id="{{view.cid}}-octagon" />\n                                        <label for="{{view.cid}}-octagon">{[print(xabber.getString("settings__section_appearance__avatars_octagon"))]}</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="avatar_shape" value="hexagon" type="radio" id="{{view.cid}}-hexagon" />\n                                        <label for="{{view.cid}}-hexagon">{[print(xabber.getString("settings__section_appearance__avatars_hexagon"))]}</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="avatar_shape" value="pentagon" type="radio" id="{{view.cid}}-pentagon" />\n                                        <label for="{{view.cid}}-pentagon">{[print(xabber.getString("settings__section_appearance__avatars_pentagon"))]}</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="avatar_shape" value="rounded" type="radio" id="{{view.cid}}-rounded" />\n                                        <label for="{{view.cid}}-rounded">{[print(xabber.getString("settings__section_appearance__avatars_rounded"))]}</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="avatar_shape" value="star" type="radio" id="{{view.cid}}-star" />\n                                        <label for="{{view.cid}}-star">{[print(xabber.getString("settings__section_appearance__avatars_star"))]}</label>\n                                    </p>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div data-header=\'{[print(xabber.getString("settings__menu_item__notifications"))]}\'  class="settings-block-wrap notifications hidden">\n                    <div class="settings-subblock-wrap">\n                        <div class="block-header">\n                            <span class="block-name">{[print(xabber.getString("settings__section_notifications__web_notifications"))]}</span>\n                        </div>\n                        <div class="setting idling field-wrap">\n                            <div class="input-field checkbox-field">\n                                <input type="checkbox" class="filled-in" id="idling"/>\n                                <label for="idling">{[print(xabber.getString("settings__section_notifications__toggle_idling"))]}</label>\n                            </div>\n                        </div>\n                        <div class="setting notifications field-wrap">\n                            <div class="input-field checkbox-field">\n                                <input type="checkbox" class="filled-in" id="notifications"/>\n                                <label for="notifications">{[print(xabber.getString("settings__section_notifications__toggle_desktop_notifications"))]}</label>\n                            </div>\n                        </div>\n                        <div class="setting-name">{[print(xabber.getString("settings__section_notifications__volume"))]}</div>\n                        <div class="setting volume-setting">\n                            <i class="mdi mdi-24px mdi-volume-low"></i>\n                            <form action="#">\n                                <div class="disabled hidden"></div>\n                                <p class="range-field">\n                                    <input type="range" id="notifications_volume" min="0" max="100" />\n                                </p>\n                            </form>\n                            <i class="mdi mdi-24px mdi-volume-high"></i>\n                        </div>\n                    </div>\n                    <div class="settings-subblock-wrap">\n                        <div class="block-header">\n                            <span class="block-name">{[print(xabber.getString("settings__section_notifications__chats"))]}</span>\n                        </div>\n                        <div class="block-subheader">\n                            <span class="block-name">{[print(xabber.getString("settings__section_notifications__private_chats"))]}</span>\n                        </div>\n                        <div class="setting private-notifications field-wrap">\n                            <div class="input-field checkbox-field">\n                                <input type="checkbox" class="filled-in" id="private-notifications"/>\n                                <label for="private-notifications">{[print(xabber.getString("settings__section_notifications__private_chats_notifications"))]}</label>\n                            </div>\n                        </div>\n                        <div class="settings-shifted-block">\n                            <div class="setting message-preview private-preview field-wrap">\n                                <div class="input-field checkbox-field">\n                                    <input type="checkbox" class="filled-in" id="preview_private"/>\n                                    <label for="preview_private">{[print(xabber.getString("settings__section_notifications__toggle_message_preview"))]}</label>\n                                </div>\n                            </div>\n                            <div class="setting-name">{[print(xabber.getString("settings__menu_item__sounds"))]}</div>\n                            <div class="setting sound radio-button field-wrap">\n                                <div class="field radio-field clickable-field">\n                                    <form action="#">\n                                        <p>\n                                            <input class="with-gap" name="private_sound" value="" type="radio" id="{{view.cid}}-private-sound-no" />\n                                            <label for="{{view.cid}}-private-sound-no">No sound</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="private_sound" value="beep_up" type="radio" id="{{view.cid}}-private-sound-beep-up" />\n                                            <label for="{{view.cid}}-private-sound-beep-up">Beep Up</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="private_sound" value="tiny_noize" type="radio" id="{{view.cid}}-private-sound-tiny-noize" />\n                                            <label for="{{view.cid}}-private-sound-tiny-noize">Tiny Noize</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="private_sound" value="retro_game" type="radio" id="{{view.cid}}-private-sound-retro-game" />\n                                            <label for="{{view.cid}}-private-sound-retro-game">Retro Game</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="private_sound" value="pixel_beep" type="radio" id="{{view.cid}}-private-sound-pixel-beep" />\n                                            <label for="{{view.cid}}-private-sound-pixel-beep">Pixel Beep</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="private_sound" value="beep_positive" type="radio" id="{{view.cid}}-private-sound-beep-positive" />\n                                            <label for="{{view.cid}}-private-sound-beep-positive">Beep Positive</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="private_sound" value="good_chime" type="radio" id="{{view.cid}}-private-sound-good-chime" />\n                                            <label for="{{view.cid}}-private-sound-good-chime">Good Chime</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="private_sound" value="cellular_click" type="radio" id="{{view.cid}}-private-sound-cellular-click" />\n                                            <label for="{{view.cid}}-private-sound-cellular-click">Cellular Click</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="private_sound" value="bleep" type="radio" id="{{view.cid}}-private-sound-bleep" />\n                                            <label for="{{view.cid}}-private-sound-bleep">Bleep</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="private_sound" value="mono_u" type="radio" id="{{view.cid}}-private-sound-mono-u" />\n                                            <label for="{{view.cid}}-private-sound-mono-u">Mono U</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="private_sound" value="plop" type="radio" id="{{view.cid}}-private-sound-plop" />\n                                            <label for="{{view.cid}}-private-sound-plop">Plop</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="private_sound" value="ether" type="radio" id="{{view.cid}}-private-sound-ether" />\n                                            <label for="{{view.cid}}-private-sound-ether">Ether</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="private_sound" value="pop" type="radio" id="{{view.cid}}-private-sound-pop" />\n                                            <label for="{{view.cid}}-private-sound-pop">Pop</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="private_sound" value="computer_chime" type="radio" id="{{view.cid}}-private-sound-computer-chime" />\n                                            <label for="{{view.cid}}-private-sound-computer-chime">Computer Chime</label>\n                                        </p>\n                                    </form>\n                                </div>\n                            </div>\n\n                        </div>\n                        <div class="block-subheader">\n                            <span class="block-name">{[print(xabber.getString("settings__section_notifications__group_chats"))]}</span>\n                        </div>\n                        <div class="setting group-notifications field-wrap">\n                            <div class="input-field checkbox-field">\n                                <input type="checkbox" class="filled-in" id="group-notifications"/>\n                                <label for="group-notifications">{[print(xabber.getString("settings__section_notifications__group_chats_notifications"))]}</label>\n                            </div>\n                        </div>\n                        <div class="settings-shifted-block">\n                            <div class="setting message-preview group-preview field-wrap">\n                                <div class="input-field checkbox-field">\n                                    <input type="checkbox" class="filled-in" id="preview_group"/>\n                                    <label for="preview_group">{[print(xabber.getString("settings__section_notifications__toggle_message_preview"))]}</label>\n                                </div>\n                            </div>\n                            <div class="setting-name">{[print(xabber.getString("settings__menu_item__sounds"))]}</div>\n                            <div class="setting sound radio-button field-wrap">\n                                <div class="field radio-field clickable-field">\n                                    <form action="#">\n                                        <p>\n                                            <input class="with-gap" name="group_sound" value="" type="radio" id="{{view.cid}}-group-sound-no" />\n                                            <label for="{{view.cid}}-group-sound-no">No sound</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="group_sound" value="beep_up" type="radio" id="{{view.cid}}-group-sound-beep-up" />\n                                            <label for="{{view.cid}}-group-sound-beep-up">Beep Up</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="group_sound" value="tiny_noize" type="radio" id="{{view.cid}}-group-sound-tiny-noize" />\n                                            <label for="{{view.cid}}-group-sound-tiny-noize">Tiny Noize</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="group_sound" value="retro_game" type="radio" id="{{view.cid}}-group-sound-retro-game" />\n                                            <label for="{{view.cid}}-group-sound-retro-game">Retro Game</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="group_sound" value="pixel_beep" type="radio" id="{{view.cid}}-group-sound-pixel-beep" />\n                                            <label for="{{view.cid}}-group-sound-pixel-beep">Pixel Beep</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="group_sound" value="beep_positive" type="radio" id="{{view.cid}}-group-sound-beep-positive" />\n                                            <label for="{{view.cid}}-group-sound-beep-positive">Beep Positive</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="group_sound" value="good_chime" type="radio" id="{{view.cid}}-group-sound-good-chime" />\n                                            <label for="{{view.cid}}-group-sound-good-chime">Good Chime</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="group_sound" value="cellular_click" type="radio" id="{{view.cid}}-group-sound-cellular-click" />\n                                            <label for="{{view.cid}}-group-sound-cellular-click">Cellular Click</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="group_sound" value="bleep" type="radio" id="{{view.cid}}-group-sound-bleep" />\n                                            <label for="{{view.cid}}-group-sound-bleep">Bleep</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="group_sound" value="mono_u" type="radio" id="{{view.cid}}-group-sound-mono-u" />\n                                            <label for="{{view.cid}}-group-sound-mono-u">Mono U</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="group_sound" value="plop" type="radio" id="{{view.cid}}-group-sound-plop" />\n                                            <label for="{{view.cid}}-group-sound-plop">Plop</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="group_sound" value="ether" type="radio" id="{{view.cid}}-group-sound-ether" />\n                                            <label for="{{view.cid}}-group-sound-ether">Ether</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="group_sound" value="pop" type="radio" id="{{view.cid}}-group-sound-pop" />\n                                            <label for="{{view.cid}}-group-sound-pop">Pop</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="group_sound" value="computer_chime" type="radio" id="{{view.cid}}-group-sound-computer-chime" />\n                                            <label for="{{view.cid}}-group-sound-computer-chime">Computer Chime</label>\n                                        </p>\n                                    </form>\n                                </div>\n                            </div>\n                        </div>\n\n                    </div>\n                    <div class="settings-subblock-wrap">\n                        <div class="block-header">\n                            <span class="block-name">{[print(xabber.getString("settings__section_notifications__calls"))]}</span>\n                        </div>\n                        <div class="setting-name">{[print(xabber.getString("settings__section_notifications__ringtone"))]}</div>\n                        <div class="setting sound radio-button field-wrap">\n                            <div class="field radio-field clickable-field">\n                                <form action="#">\n                                    <p>\n                                        <input class="with-gap" name="call_sound" value="call" type="radio" id="{{view.cid}}-call-sound-call" />\n                                        <label for="{{view.cid}}-call-sound-call">Call</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="call_sound" value="beep_up" type="radio" id="{{view.cid}}-call-sound-beep-up" />\n                                        <label for="{{view.cid}}-call-sound-beep-up">Beep Up</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="call_sound" value="tiny_noize" type="radio" id="{{view.cid}}-call-sound-tiny-noize" />\n                                        <label for="{{view.cid}}-call-sound-tiny-noize">Tiny Noize</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="call_sound" value="retro_game" type="radio" id="{{view.cid}}-call-sound-retro-game" />\n                                        <label for="{{view.cid}}-call-sound-retro-game">Retro Game</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="call_sound" value="pixel_beep" type="radio" id="{{view.cid}}-call-sound-pixel-beep" />\n                                        <label for="{{view.cid}}-call-sound-pixel-beep">Pixel Beep</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="call_sound" value="beep_positive" type="radio" id="{{view.cid}}-call-sound-beep-positive" />\n                                        <label for="{{view.cid}}-call-sound-beep-positive">Beep Positive</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="call_sound" value="good_chime" type="radio" id="{{view.cid}}-call-sound-good-chime" />\n                                        <label for="{{view.cid}}-call-sound-good-chime">Good Chime</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="call_sound" value="cellular_click" type="radio" id="{{view.cid}}-call-sound-cellular-click" />\n                                        <label for="{{view.cid}}-call-sound-cellular-click">Cellular Click</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="call_sound" value="bleep" type="radio" id="{{view.cid}}-call-sound-bleep" />\n                                        <label for="{{view.cid}}-call-sound-bleep">Bleep</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="call_sound" value="mono_u" type="radio" id="{{view.cid}}-call-sound-mono-u" />\n                                        <label for="{{view.cid}}-call-sound-mono-u">Mono U</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="call_sound" value="plop" type="radio" id="{{view.cid}}-call-sound-plop" />\n                                        <label for="{{view.cid}}-call-sound-plop">Plop</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="call_sound" value="ether" type="radio" id="{{view.cid}}-call-sound-ether" />\n                                        <label for="{{view.cid}}-call-sound-ether">Ether</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="call_sound" value="pop" type="radio" id="{{view.cid}}-call-sound-pop" />\n                                        <label for="{{view.cid}}-call-sound-pop">Pop</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="call_sound" value="computer_chime" type="radio" id="{{view.cid}}-call-sound-computer-chime" />\n                                        <label for="{{view.cid}}-call-sound-computer-chime">Computer Chime</label>\n                                    </p>\n                                </form>\n                            </div>\n                        </div>\n                        <div class="setting-name">{[print(xabber.getString("settings__section_notifications__dialtone"))]}</div>\n                        <div class="setting sound radio-button field-wrap">\n                            <div class="field radio-field clickable-field">\n                                <form action="#">\n                                    <p>\n                                        <input class="with-gap" name="dialtone_sound" value="call" type="radio" id="{{view.cid}}-dialtone-sound-connecting" />\n                                        <label for="{{view.cid}}-dialtone-sound-connecting">Call</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="dialtone_sound" value="attention" type="radio" id="{{view.cid}}-dialtone-sound-attention" />\n                                        <label for="{{view.cid}}-dialtone-sound-attention">Attention</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="dialtone_sound" value="beep_up" type="radio" id="{{view.cid}}-dialtone-sound-beep-up" />\n                                        <label for="{{view.cid}}-dialtone-sound-beep-up">Beep Up</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="dialtone_sound" value="tiny_noize" type="radio" id="{{view.cid}}-dialtone-sound-tiny-noize" />\n                                        <label for="{{view.cid}}-dialtone-sound-tiny-noize">Tiny Noize</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="dialtone_sound" value="retro_game" type="radio" id="{{view.cid}}-dialtone-sound-retro-game" />\n                                        <label for="{{view.cid}}-dialtone-sound-retro-game">Retro Game</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="dialtone_sound" value="pixel_beep" type="radio" id="{{view.cid}}-dialtone-sound-pixel-beep" />\n                                        <label for="{{view.cid}}-dialtone-sound-pixel-beep">Pixel Beep</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="dialtone_sound" value="beep_positive" type="radio" id="{{view.cid}}-dialtone-sound-beep-positive" />\n                                        <label for="{{view.cid}}-dialtone-sound-beep-positive">Beep Positive</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="dialtone_sound" value="good_chime" type="radio" id="{{view.cid}}-dialtone-sound-good-chime" />\n                                        <label for="{{view.cid}}-dialtone-sound-good-chime">Good Chime</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="dialtone_sound" value="cellular_click" type="radio" id="{{view.cid}}-dialtone-sound-cellular-click" />\n                                        <label for="{{view.cid}}-dialtone-sound-cellular-click">Cellular Click</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="dialtone_sound" value="bleep" type="radio" id="{{view.cid}}-dialtone-sound-bleep" />\n                                        <label for="{{view.cid}}-dialtone-sound-bleep">Bleep</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="dialtone_sound" value="mono_u" type="radio" id="{{view.cid}}-dialtone-sound-mono-u" />\n                                        <label for="{{view.cid}}-dialtone-sound-mono-u">Mono U</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="dialtone_sound" value="plop" type="radio" id="{{view.cid}}-dialtone-sound-plop" />\n                                        <label for="{{view.cid}}-dialtone-sound-plop">Plop</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="dialtone_sound" value="ether" type="radio" id="{{view.cid}}-dialtone-sound-ether" />\n                                        <label for="{{view.cid}}-dialtone-sound-ether">Ether</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="dialtone_sound" value="pop" type="radio" id="{{view.cid}}-dialtone-sound-pop" />\n                                        <label for="{{view.cid}}-dialtone-sound-pop">Pop</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="dialtone_sound" value="computer_chime" type="radio" id="{{view.cid}}-dialtone-sound-computer-chime" />\n                                        <label for="{{view.cid}}-dialtone-sound-computer-chime">Computer Chime</label>\n                                    </p>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="settings-subblock-wrap">\n                        <div class="block-header">\n                            <span class="block-name">{[print(xabber.getString("settings__section_notifications__attention_calls"))]}</span>\n                        </div>\n                        <div class="setting call-attention field-wrap">\n                            <div class="input-field checkbox-field">\n                                <input type="checkbox" class="filled-in" id="call_attention"/>\n                                <label for="call_attention">{[print(xabber.getString("settings__section_notifications__toggle_call_attention"))]}</label>\n                            </div>\n                        </div>\n                        <div class="setting-name">{[print(xabber.getString("settings__section_notifications__ringtone"))]}</div>\n                        <div class="setting sound radio-button field-wrap">\n                            <div class="field radio-field clickable-field">\n                                <form action="#">\n                                    <p>\n                                        <input class="with-gap" name="attention_sound" value="attention" type="radio" id="{{view.cid}}-attention-sound-attention" />\n                                        <label for="{{view.cid}}-attention-sound-attention">Attention</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="attention_sound" value="beep_up" type="radio" id="{{view.cid}}-attention-sound-beep-up" />\n                                        <label for="{{view.cid}}-attention-sound-beep-up">Beep Up</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="attention_sound" value="tiny_noize" type="radio" id="{{view.cid}}-attention-sound-tiny-noize" />\n                                        <label for="{{view.cid}}-attention-sound-tiny-noize">Tiny Noize</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="attention_sound" value="retro_game" type="radio" id="{{view.cid}}-attention-sound-retro-game" />\n                                        <label for="{{view.cid}}-attention-sound-retro-game">Retro Game</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="attention_sound" value="pixel_beep" type="radio" id="{{view.cid}}-attention-sound-pixel-beep" />\n                                        <label for="{{view.cid}}-attention-sound-pixel-beep">Pixel Beep</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="attention_sound" value="beep_positive" type="radio" id="{{view.cid}}-attention-sound-beep-positive" />\n                                        <label for="{{view.cid}}-attention-sound-beep-positive">Beep Positive</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="attention_sound" value="good_chime" type="radio" id="{{view.cid}}-attention-sound-good-chime" />\n                                        <label for="{{view.cid}}-attention-sound-good-chime">Good Chime</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="attention_sound" value="cellular_click" type="radio" id="{{view.cid}}-attention-sound-cellular-click" />\n                                        <label for="{{view.cid}}-attention-sound-cellular-click">Cellular Click</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="attention_sound" value="bleep" type="radio" id="{{view.cid}}-attention-sound-bleep" />\n                                        <label for="{{view.cid}}-attention-sound-bleep">Bleep</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="attention_sound" value="mono_u" type="radio" id="{{view.cid}}-attention-sound-mono-u" />\n                                        <label for="{{view.cid}}-attention-sound-mono-u">Mono U</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="attention_sound" value="plop" type="radio" id="{{view.cid}}-attention-sound-plop" />\n                                        <label for="{{view.cid}}-attention-sound-plop">Plop</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="attention_sound" value="ether" type="radio" id="{{view.cid}}-attention-sound-ether" />\n                                        <label for="{{view.cid}}-attention-sound-ether">Ether</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="attention_sound" value="pop" type="radio" id="{{view.cid}}-attention-sound-pop" />\n                                        <label for="{{view.cid}}-attention-sound-pop">Pop</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="attention_sound" value="computer_chime" type="radio" id="{{view.cid}}-attention-sound-computer-chime" />\n                                        <label for="{{view.cid}}-attention-sound-computer-chime">Computer Chime</label>\n                                    </p>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div data-header=\'{[print(xabber.getString("settings__menu_item__privacy"))]}\'  class="settings-block-wrap privacy hidden">\n                    <div class="setting load-media field-wrap">\n                        <div class="input-field checkbox-field">\n                            <input type="checkbox" class="filled-in" id="load-media"/>\n                            <label for="load-media">{[print(xabber.getString("settings__section_privacy__load_media"))]}</label>\n                        </div>\n                    </div>\n                    <div class="setting typing-notifications field-wrap">\n                        <div class="input-field checkbox-field">\n                            <input type="checkbox" class="filled-in" id="typing-notifications"/>\n                            <label for="typing-notifications">{[print(xabber.getString("settings__section_privacy__typing_notifications"))]}</label>\n                        </div>\n                    </div>\n                    <div class="setting mapping-service field-wrap">\n                        <div class="input-field checkbox-field">\n                            <input type="checkbox" class="filled-in" id="mapping-service"/>\n                            <label for="mapping-service">{[print(xabber.getString("settings__section_privacy__mapping_service"))]}</label>\n                        </div>\n                    </div>\n                </div>\n\n                <div data-header=\'{[print(xabber.getString("settings__menu_item__interface_language"))]}\'  class="settings-block-wrap interface_language hidden">\n                    <div class="setting interface-language-setting">\n                        <div class="languages-list field radio-field clickable-field">\n                            <form action="#">\n                                <div class="language-item">\n                                    <input class="with-gap" name="language" value="default" type="radio" id="{{view.cid}}-default" />\n                                    <label for="{{view.cid}}-default">{[print(xabber.getString("settings__languages_list___item_default", [languages[xabber.get("default_language") || \'en\']]))]}</label>\n                                </div>\n                                {[if (window.navigator.language.indexOf(xabber.get("default_language")) < 0) {]}\n                                {[}]}\n                                {[for (let lang in constants.languages) { if (!lang || lang == xabber.get("default_language")) continue;]}\n                                <div class="language-item">\n                                    <input class="with-gap" name="language" value="{{lang}}" type="radio" id="{{view.cid}}-{{lang}}" />\n                                    <label for="{{view.cid}}-{{lang}}">{[print(constants.languages[lang]);]}</label>\n                                    {[let locale = Object.keys(client_translation_progress).find(key => !lang.indexOf(key)) || constants.languages_another_locales[lang] && Object.keys(client_translation_progress).find(key => !constants.languages_another_locales[lang].indexOf(key));]}\n                                    {[if (locale) { let progress = client_translation_progress[locale];]}<div class="translation-progress">{[print((progress == 100) ? xabber.getString("settings__section_interface_language__translation_progress_fully") : xabber.getString("settings__section_interface_language__translation_progress", [`${progress}%`]))]}</div>{[}]}\n                                </div>\n                                {[}]}\n                            </form>\n                        </div>\n                        <div class="description"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n'},81012:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="background-overlay"></div>\n<div class="settings-panel">\n    <div class="settings-transition-wrap">\n        <div class="left-column main-left-column settings-column noselect">\n            <svg class="btn-add-account mdi mdi-24px mdi-svg-template" data-svgname="contact-add"></svg>\n            <div class="single-account-info-wrap account-settings-panel">\n                <div class="single-account-info"></div>\n            </div>\n            <div class="accounts-info-wrap">\n                <div class="settings-panel-label">{[print(xabber.getString("settings__menu_item__xmpp_account"))]}</div>\n                <div class="settings-divider"></div>\n                <span class="no-accounts-tip">{[print(xabber.getString("settings__section_xmpp_accounts__text_no_accounts"))]}</span>\n            </div>\n            <div class="settings-tabs-wrap global-settings-tabs">\n                <div class="settings-panel-label">{[print(xabber.getString("preferences"))]}</div>\n                <div class="settings-tab" data-block-name="background">\n                    <div class="setting-icon-background">\n                        <svg class="mdi mdi-24px mdi-svg-template" data-svgname="palette"></svg>\n                    </div>\n                    <div class="settings-block-name one-line">{[print(xabber.getString("category_interface"))]}</div>\n                    <div class="settings-block-label one-line">{[print(xabber.getString("settings__menu_item__background_label"))]}</div>\n                </div>\n                <div class="settings-tab" data-block-name="notifications">\n                    <div class="setting-icon-background">\n                        <svg class="mdi mdi-24px mdi-svg-template" data-svgname="client"></svg>\n                    </div>\n                    <div class="settings-block-name one-line">{[print(xabber.getString("settings__menu_item__notifications"))]}</div>\n                    <div class="settings-block-label one-line">{[print(xabber.getString("settings__menu_item__notifications_label"))]}</div>\n                </div>\n                <div class="settings-tab disabled" data-block-name="data_storage">\n                    <div class="setting-icon-background">\n                        <svg class="mdi mdi-24px mdi-svg-template" data-svgname="database"></svg>\n                    </div>\n                    <div class="settings-block-name one-line">{[print(xabber.getString("settings__menu_item__data_storage"))]}</div>\n                    <div class="settings-block-label one-line">{[print(xabber.getString("settings__menu_item__data_storage_label"))]}</div>\n                </div>\n                <div class="settings-tab" data-block-name="privacy">\n                    <div class="setting-icon-background">\n                        <svg class="mdi mdi-24px mdi-svg-template" data-svgname="group-private"></svg>\n                    </div>\n                    <div class="settings-block-name one-line">{[print(xabber.getString("settings__menu_item__privacy"))]}</div>\n                    <div class="settings-block-label one-line">{[print(xabber.getString("settings__menu_item__privacy_label"))]}</div>\n                </div>\n                <div class="settings-tab disabled" data-block-name="connection">\n                    <div class="setting-icon-background">\n                        <svg class="mdi mdi-24px mdi-svg-template" data-svgname="index"></svg>\n                    </div>\n                    <div class="settings-block-name one-line">{[print(xabber.getString("settings__menu_item__connection"))]}</div>\n                    <div class="settings-block-label one-line">{[print(xabber.getString("settings__menu_item__connection_label"))]}</div>\n                </div>\n                <div class="settings-tab" data-block-name="interface_language">\n                    <div class="setting-icon-background">\n                        <svg class="mdi mdi-24px mdi-svg-template" data-svgname="translate"></svg>\n                    </div>\n                    <div class="settings-block-name one-line">{[print(xabber.getString("settings__menu_item__interface_language"))]}</div>\n                    <div class="settings-block-label one-line"></div>\n                </div>\n                <div class="settings-tab" data-block-name="debug">\n                    <div class="setting-icon-background">\n                        <svg class="mdi mdi-24px mdi-svg-template" data-svgname="bug"></svg>\n                    </div>\n                    <div class="settings-block-name one-line">{[print(xabber.getString("settings__menu_item__debug"))]}</div>\n                    <div class="settings-block-label one-line">{[print(xabber.getString("settings__menu_item__debug_label"))]}</div>\n                </div>\n                <div class="settings-tab settings-deletion-button delete-all-accounts">\n                    <div class="setting-icon-background">\n                        <i class="mdi mdi-24px mdi-logout-variant"></i>\n                    </div>\n                    <div class="settings-block-name">{[print(xabber.getString("settings__button_quit"))]}</div>\n                </div>\n            </div>\n        </div>\n\n        <div class="right-column main-right-column settings-column hidden noselect">\n            <div class="settings-panel-head">\n                <i class="btn-back mdi mdi-24px mdi-arrow-left"></i>\n                <i class="btn-back-subsettings mdi mdi-24px mdi-arrow-left hidden"></i>\n                <span class="settings-panel-head-title">{[print(xabber.getString("preference_editor"))]}</span>\n                <div class="description"></div>\n            </div>\n\n            <div class="panel-content-wrap">\n                <div class="panel-content">\n\n                    <div data-header=\'{[print(xabber.getString("category_interface"))]}\' class="settings-block-wrap background">\n                        <div class="settings-tabs-wrap global-settings-tabs">\n                            <div class="settings-tab" data-subblock-parent-name="background" data-block-name="appearance">\n                                <div class="setting-icon-background">\n                                    <svg class="mdi mdi-24px mdi-svg-template" data-svgname="palette"></svg>\n                                </div>\n                                <div class="settings-block-name one-line">{[print(xabber.getString("settings__menu_item__appearance"))]}</div>\n                                <div class="settings-block-label one-line">{[print(xabber.getString("settings_account__appearance_label"))]}</div>\n                            </div>\n                            <div class="settings-tab" data-subblock-parent-name="background" data-block-name="chats">\n                                <div class="setting-icon-background">\n                                    <svg class="mdi mdi-24px mdi-svg-template" data-svgname="chat"></svg>\n                                </div>\n                                <div class="settings-block-name one-line">{[print(xabber.getString("chat_viewer"))]}</div>\n                                <div class="settings-block-label one-line">{[print(xabber.getString("settings_account__chats_label"))]}</div>\n                            </div>\n                            <div class="settings-tab" data-subblock-parent-name="background" data-block-name="avatars">\n                                <div class="setting-icon-background">\n                                    <svg class="mdi mdi-24px mdi-svg-template" data-svgname="star-face"></svg>\n                                </div>\n                                <div class="settings-block-name one-line">{[print(xabber.getString("avatars"))]}</div>\n                                <div class="settings-block-label one-line"></div>\n                            </div>\n                            <div class="settings-tab" data-subblock-parent-name="background" data-block-name="emoji_font">\n                                <div class="setting-icon-background">\n                                    <svg class="mdi mdi-24px mdi-svg-template" data-svgname="star-face"></svg>\n                                </div>\n                                <div class="settings-block-name one-line">{[print(xabber.getString("settings__menu_item__emoji_font_header"))]}</div>\n                                <div class="settings-block-label one-line"></div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div data-header=\'{[print(xabber.getString("settings__menu_item__appearance"))]}\' class="settings-block-wrap appearance">\n                        <div class="settings-subblock-wrap">\n                            <div class="block-subheader">\n                                <span class="block-name">{[print(xabber.getString("settings__section_appearance__header_main_color"))]}</span>\n                            </div>\n                            <div class="toolbar-main-color-setting-wrap">\n                                <div class="setting toolbar-main-color-setting field-wrap">\n                                    <div class="client-main-color-picker">\n                                        <div class="colors-line">\n                                            <div class="client-main-color-item ground-color-red-500 outline-color-red-500" data-value="red">\n                                            </div>\n                                            <div class="client-main-color-item ground-color-pink-500 outline-color-pink-500" data-value="pink">\n                                            </div>\n                                            <div class="client-main-color-item ground-color-purple-500 outline-color-purple-500" data-value="purple">\n                                            </div>\n                                            <div class="client-main-color-item ground-color-deep-purple-500 outline-color-deep-purple-500" data-value="deep-purple">\n                                            </div>\n                                            <div class="client-main-color-item ground-color-indigo-500 outline-color-indigo-500" data-value="indigo">\n                                            </div>\n                                        </div>\n                                        <div class="colors-line">\n                                            <div class="client-main-color-item ground-color-deep-orange-500 outline-color-deep-orange-500" data-value="deep-orange">\n                                            </div>\n                                            <div class="client-main-color-item ground-color-orange-500 outline-color-orange-500" data-value="orange">\n                                            </div>\n                                            <div class="client-main-color-item ground-color-cyan-500 outline-color-cyan-500" data-value="cyan">\n                                            </div>\n                                            <div class="client-main-color-item ground-color-light-blue-500 outline-color-light-blue-500" data-value="light-blue">\n                                            </div>\n                                            <div class="client-main-color-item ground-color-blue-500 outline-color-blue-500" data-value="blue">\n                                            </div>\n                                        </div>\n                                        <div class="colors-line">\n                                            <div class="client-main-color-item ground-color-amber-500 outline-color-amber-500" data-value="amber">\n                                            </div>\n                                            <div class="client-main-color-item ground-color-lime-500 outline-color-lime-500" data-value="lime">\n                                            </div>\n                                            <div class="client-main-color-item ground-color-teal-500 outline-color-teal-500" data-value="teal">\n                                            </div>\n                                            <div class="client-main-color-item ground-color-brown-500 outline-color-brown-500" data-value="brown">\n                                            </div>\n                                            <div class="client-main-color-item ground-color-blue-grey-500 outline-color-blue-grey-500" data-value="blue-grey">\n                                            </div>\n                                        </div>\n                                        <div class="colors-line">\n                                            <div class="client-main-color-item ground-color-light-green-500 outline-color-light-green-500" data-value="light-green">\n                                            </div>\n                                            <div class="client-main-color-item ground-color-green-500 outline-color-green-500" data-value="green">\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="block-subheader">\n                                <span class="block-name">{[print(xabber.getString("settings__section_appearance__header_toolbar_icons_color"))]}</span>\n                            </div>\n                            <div class="toolbar-color-setting-wrap">\n                                <div class="setting settings-color-padding toolbar-color-setting field-wrap">\n                                    <div class="selected-color-wrap">\n                                        <div class="selected-color-item"></div>\n                                        <div class="selected-color-info">\n                                            <div class="selected-color-name"></div>\n                                            <div class="selected-color-hex"></div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="block-subheader">\n                                <span class="block-name">{[print(xabber.getString("settings__section_appearance__header_background"))]}</span>\n                            </div>\n                            <div class="background-setting-wrap">\n                                <div class="setting background radio-button field-wrap">\n                                    <div class="field radio-field clickable-field">\n                                        <form action="#">\n                                            <p>\n                                                <input class="with-gap" name="background" value="default" type="radio" id="{{view.cid}}-default-background" />\n                                                <label for="{{view.cid}}-default-background">{[print(xabber.getString("settings__section_appearance__background__label_default"))]}</label>\n                                            </p>\n                                            <p>\n                                                <input class="with-gap" name="background" value="repeating-pattern" type="radio" id="{{view.cid}}-repeating-pattern-background" />\n                                                <label for="{{view.cid}}-repeating-pattern-background">{[print(xabber.getString("settings__section_appearance__background__label_pattern"))]}</label>\n                                            </p>\n                                            <p>\n                                                <input class="with-gap" name="background" value="image" type="radio" id="{{view.cid}}-image-background" />\n                                                <label for="{{view.cid}}-image-background">{[print(xabber.getString("settings__section_appearance__background__label_image"))]}</label>\n                                            </p>\n                                        </form>\n                                    </div>\n                                    <div class="current-background-wrap">\n                                        <div class="dark-placeholder">{[print(xabber.getString("settings__section_appearance__background__button_update"))]}</div>\n                                        <div class="current-background"></div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="block-subheader">\n                                <span class="block-name">{[print(xabber.getString("settings__section_appearance__header_background_effects"))]}</span>\n                            </div>\n                            <div class="background-setting-wrap">\n                                <div class="blur-setting-wrap">\n                                    <div class="setting blur-setting checkbox-setting field-wrap">\n                                        <div class="input-field checkbox-field">\n                                            <input type="checkbox" class="filled-in" id="blur_switch"/>\n                                            <label for="blur_switch">{[print(xabber.getString("settings__section_appearance__background__checkbox_blur"))]}</label>\n                                        </div>\n                                        <form class="range-form" action="#">\n                                            <div class="disabled hidden"></div>\n                                            <p class="range-field range-field-design">\n                                                <input type="range" id="blur" min="0" max="100" />\n                                                <span class="thumb"><span class="value"></span></span>\n                                            </p>\n                                        </form>\n                                    </div>\n                                </div>\n                                <div class="vignetting-setting-wrap">\n                                    <div class="setting vignetting-setting checkbox-setting field-wrap">\n                                        <div class="input-field checkbox-field">\n                                            <input type="checkbox" class="filled-in" id="vignetting_switch"/>\n                                            <label for="vignetting_switch">{[print(xabber.getString("settings__section_appearance__background__checkbox_vignette"))]}</label>\n                                        </div>\n                                        <form class="range-form" action="#">\n                                            <div class="disabled hidden"></div>\n                                            <p class="range-field range-field-design">\n                                                <input type="range" id="vignetting" min="0" max="200" />\n                                                <span class="thumb"><span class="value"></span></span>\n                                            </p>\n                                        </form>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div data-header=\'{[print(xabber.getString("chat_viewer"))]}\' class="settings-block-wrap chats">\n                        <div class="settings-subblock-wrap">\n                            <div class="block-subheader">\n                                <span class="block-name">{[print(xabber.getString("category_behavior"))]}</span>\n                            </div>\n                            <div class="setting hotkeys radio-button field-wrap">\n                                <div class="field radio-field clickable-field">\n                                    <form action="#">\n                                        <p>\n                                            <input class="with-gap" name="hotkeys" value="enter" type="radio" id="{{view.cid}}-enter" />\n                                            <label for="{{view.cid}}-enter">{[print(xabber.getString("settings__section_keyboard__label_send_on_enter"))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="hotkeys" value="ctrlenter" type="radio" id="{{view.cid}}-ctrlenter" />\n                                            <label for="{{view.cid}}-ctrlenter">{[print(xabber.getString("settings__section_keyboard__label_send_on_ctrlenter"))]}</label>\n                                        </p>\n                                    </form>\n                                </div>\n                            </div>\n                            <div class="block-subheader">\n                                <span class="block-name">{[print(xabber.getString("settings__menu_item__idle_timeout"))]}</span>\n                            </div>\n                            <div class="setting idling checkbox-setting field-wrap">\n                                <div class="input-field  checkbox-field">\n                                    <input type="checkbox" class="filled-in" id="idling"/>\n                                    <label for="idling">{[print(xabber.getString("settings__section_notifications__toggle_idling"))]}</label>\n                                </div>\n                            </div>\n                            <div class="setting idling-time field-wrap">\n                                <div class="idling-time-input">\n                                    <p class="range-field range-field-design">\n                                        <input class="materialize-timer" placeholder=\'{[print(constants.IDLING_DEFAULT_TIMEOUT)]}\' id="idle_timeout" min="{[print(constants.IDLING_MINIMAL_TIMEOUT)]}" max="{[print(constants.IDLING_MAXIMUM_TIMEOUT)]}" value="{[print(xabber._settings.get(\'idling_time\'))]}" type="range" name="idle_timeout">\n                                        <span class="thumb"><span class="value"></span></span>\n                                    </p>\n                                </div>\n                            </div>\n                            <div class="setting-clue">{[print(xabber.getString("settings__menu_item__idle_timeout_clue"))]}</div>\n                        </div>\n                    </div>\n                    <div data-header=\'{[print(xabber.getString("avatars"))]}\' class="settings-block-wrap avatars">\n                        <div class="settings-subblock-wrap contact-list">\n                            <div class="circle-avatar noselect"></div>\n                            <div class="setting avatar-shape radio-button field-wrap">\n                                <div class="field radio-field clickable-field">\n                                    <form action="#">\n                                        <p>\n                                            <input class="with-gap" name="avatar_shape" value="circle" type="radio" id="{{view.cid}}-circle" />\n                                            <label for="{{view.cid}}-circle">{[print(xabber.getString("settings__section_appearance__avatars_circle"))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="avatar_shape" value="squircle" type="radio" id="{{view.cid}}-squircle" />\n                                            <label for="{{view.cid}}-squircle">{[print(xabber.getString("settings__section_appearance__avatars_squircle"))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="avatar_shape" value="octagon" type="radio" id="{{view.cid}}-octagon" />\n                                            <label for="{{view.cid}}-octagon">{[print(xabber.getString("settings__section_appearance__avatars_octagon"))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="avatar_shape" value="hexagon" type="radio" id="{{view.cid}}-hexagon" />\n                                            <label for="{{view.cid}}-hexagon">{[print(xabber.getString("settings__section_appearance__avatars_hexagon"))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="avatar_shape" value="pentagon" type="radio" id="{{view.cid}}-pentagon" />\n                                            <label for="{{view.cid}}-pentagon">{[print(xabber.getString("settings__section_appearance__avatars_pentagon"))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="avatar_shape" value="rounded" type="radio" id="{{view.cid}}-rounded" />\n                                            <label for="{{view.cid}}-rounded">{[print(xabber.getString("settings__section_appearance__avatars_rounded"))]}</label>\n                                        </p>\n                                        <p>\n                                            <input class="with-gap" name="avatar_shape" value="star" type="radio" id="{{view.cid}}-star" />\n                                            <label for="{{view.cid}}-star">{[print(xabber.getString("settings__section_appearance__avatars_star"))]}</label>\n                                        </p>\n                                    </form>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div data-header=\'{[print(xabber.getString("settings__menu_item__emoji_font_header"))]}\' class="settings-block-wrap emoji_font hidden">\n                        <div class="settings-subblock-wrap contact-list">\n                            <div class="setting emoji-font radio-button">\n                                <div class="emoji-fonts-list field radio-field clickable-field">\n                                </div>\n                            </div>\n                        </div>\n                        <div class="emoji-font-information-wrap">\n                            <div class="emojis-preview no-select">\n                                <div class="emoji-preview">😀</div>\n                                <div class="emoji-preview">😁</div>\n                                <div class="emoji-preview">😂</div>\n                                <div class="emoji-preview">😋</div>\n                                <div class="emoji-preview">😎</div>\n                                <div class="emoji-preview">😃</div>\n                                <div class="emoji-preview">😄</div>\n\n                                <div class="emoji-preview">🐱</div>\n                                <div class="emoji-preview">🐭</div>\n                                <div class="emoji-preview">🐛</div>\n                                <div class="emoji-preview">🕸</div>\n                                <div class="emoji-preview">🕷</div>\n                                <div class="emoji-preview">🐢</div>\n                                <div class="emoji-preview">🐑</div>\n\n                                <div class="emoji-preview">🍏</div>\n                                <div class="emoji-preview">🍜</div>\n                                <div class="emoji-preview">🍈</div>\n                                <div class="emoji-preview">🍕</div>\n                                <div class="emoji-preview">🥢</div>\n                                <div class="emoji-preview">🍰</div>\n                                <div class="emoji-preview">☕️</div>\n\n                                <div class="emoji-preview">🏋️‍♂️</div>\n                                <div class="emoji-preview">🏏</div>\n                                <div class="emoji-preview">🏉</div>\n                                <div class="emoji-preview">🥇</div>\n                                <div class="emoji-preview">🎬</div>\n                                <div class="emoji-preview">⚽️</div>\n                                <div class="emoji-preview">🎸</div>\n\n                                <div class="emoji-preview">🚗</div>\n                                <div class="emoji-preview">🏎</div>\n                                <div class="emoji-preview">🎡</div>\n                                <div class="emoji-preview">⛴</div>\n                                <div class="emoji-preview">🏛</div>\n                                <div class="emoji-preview">🏝</div>\n                                <div class="emoji-preview">🗿</div>\n\n                                <div class="emoji-preview">🖱</div>\n                                <div class="emoji-preview">📡</div>\n                                <div class="emoji-preview">🎁</div>\n                                <div class="emoji-preview">📬</div>\n                                <div class="emoji-preview">⏰</div>\n                                <div class="emoji-preview">📹</div>\n                                <div class="emoji-preview">📱</div>\n                            </div>\n                            <div class="preloader-wrap hidden">\n                                <div class="preloader-wrapper preloader-20px active ">\n                                    <div class="spinner-layer">\n                                        <div class="circle-clipper left">\n                                            <div class="circle"></div>\n                                        </div>\n                                        <div class="gap-patch">\n                                            <div class="circle"></div>\n                                        </div>\n                                        <div class="circle-clipper right">\n                                            <div class="circle"></div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="emoji-font-attribution-text hidden"></div>\n                            <div class="emoji-font-external-url-text hidden">{[print(xabber.getString("settings__menu_item__emoji_font_external_url_text"))]}</div>\n                            <div class="emoji-font-download-text hidden">{[print(xabber.getString("settings__menu_item__emoji_font_downloading_text"))]}</div>\n                            <div class="emoji-font-button-background emoji-font-external-url-button hidden">\n                                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="download"></svg>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div data-header=\'{[print(xabber.getString("settings__menu_item__notifications"))]}\' class="settings-block-wrap notifications">\n                        <div class="settings-tabs-wrap global-settings-tabs">\n                            <div class="settings-tab" data-subblock-parent-name="notifications" data-block-name="web-notifications">\n                                <div class="setting-icon-background">\n                                    <svg class="mdi mdi-24px mdi-svg-template" data-svgname="client"></svg>\n                                </div>\n                                <div class="settings-block-name one-line">{[print(xabber.getString("settings__section_notifications__web_notifications"))]}</div>\n                                <div class="settings-block-label one-line">{[print(xabber.getString("settings__section_notifications__web_notifications_label"))]}</div>\n                                <div class="field notifications-lever clickable-field switch normal">\n                                    <label class="field-value">\n                                        <input type="checkbox">\n                                        <span class="lever"></span>\n                                    </label>\n                                </div>\n                            </div>\n                            <div class="settings-tab" data-subblock-parent-name="notifications" data-block-name="chats-notifications">\n                                <div class="setting-icon-background">\n                                    <svg class="mdi mdi-24px mdi-svg-template" data-svgname="chat"></svg>\n                                </div>\n                                <div class="settings-block-name one-line">{[print(xabber.getString("settings__section_notifications__private_chats"))]}</div>\n                                <div class="settings-block-label capitalized one-line"></div>\n                                <div class="field private-notifications clickable-field switch normal">\n                                    <label class="field-value">\n                                        <input type="checkbox">\n                                        <span class="lever"></span>\n                                    </label>\n                                </div>\n                            </div>\n                            <div class="settings-tab settings-tab-big-icon" data-subblock-parent-name="notifications" data-block-name="groupchats-notifications">\n                                <div class="setting-icon-background">\n                                    <svg class="mdi mdi-32px mdi-svg-template" data-svgname="group-public"></svg>\n                                </div>\n                                <div class="settings-block-name one-line">{[print(xabber.getString("settings__section_notifications__group_chats"))]}</div>\n                                <div class="settings-block-label capitalized one-line"></div>\n                                <div class="field group-notifications clickable-field switch normal">\n                                    <label class="field-value">\n                                        <input type="checkbox">\n                                        <span class="lever"></span>\n                                    </label>\n                                </div>\n                            </div>\n                            <div class="settings-tab" data-subblock-parent-name="notifications" data-block-name="calls-notifications">\n                                <div class="setting-icon-background">\n                                    <svg class="mdi mdi-24px mdi-svg-template" data-svgname="call"></svg>\n                                </div>\n                                <div class="settings-block-name one-line">{[print(xabber.getString("settings__section_notifications__calls"))]}</div>\n                                <div class="settings-block-label capitalized one-line">{[print(xabber.getString("settings__section_notifications__calls_label"))]}</div>\n                                <div class="field jingle-calls clickable-field switch normal">\n                                    <label class="field-value">\n                                        <input type="checkbox">\n                                        <span class="lever"></span>\n                                    </label>\n                                </div>\n                            </div>\n                            <div class="settings-tab" data-subblock-parent-name="notifications" data-block-name="attention-calls">\n                                <div class="setting-icon-background">\n                                    <svg class="mdi mdi-24px mdi-svg-template" data-svgname="alarm-bell"></svg>\n                                </div>\n                                <div class="settings-block-name one-line">{[print(xabber.getString("settings__section_notifications__attention_calls"))]}</div>\n                                <div class="settings-block-label capitalized one-line"></div>\n                                <div class="field call-attention clickable-field switch normal">\n                                    <label class="field-value">\n                                        <input type="checkbox">\n                                        <span class="lever"></span>\n                                    </label>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div data-header=\'{[print(xabber.getString("settings__section_notifications__web_notifications"))]}\' class="settings-block-wrap web-notifications">\n                        <div class="settings-subblock-wrap">\n                            <div class="setting notifications checkbox-setting field-wrap">\n                                <div class="input-field checkbox-field">\n                                    <input type="checkbox" class="filled-in" id="notifications"/>\n                                    <label for="notifications">{[print(xabber.getString("settings__section_notifications__toggle_desktop_notifications"))]}</label>\n                                </div>\n                            </div>\n                            <div class="setting-name volume-setting-name">{[print(xabber.getString("settings__section_notifications__volume"))]}</div>\n                            \x3c!--<div class="setting volume-enable checkbox-setting field-wrap">--\x3e\n                                \x3c!--<div class="input-field checkbox-field">--\x3e\n                                    \x3c!--<input type="checkbox" class="filled-in" id="notifications_volume_enable"/>--\x3e\n                                    \x3c!--<label for="notifications_volume_enable">{[print(xabber.getString("settings__section_notifications__volume_enable"))]}</label>--\x3e\n                                \x3c!--</div>--\x3e\n                            \x3c!--</div>--\x3e\n                            <div class="setting volume-setting">\n                                <form class="range-form" action="#">\n                                    <div class="disabled hidden"></div>\n                                    <p class="range-field range-field-design">\n                                        <input type="range" id="notifications_volume" min="0" max="100" />\n                                        <span style="display: none" class="thumb"><span class="value"></span></span>\n                                    </p>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                    <div data-header=\'{[print(xabber.getString("settings__section_notifications__private_chats"))]}\' class="settings-block-wrap chats-notifications">\n                        <div class="settings-subblock-wrap">\n                            <div class="setting message-preview checkbox-setting private-preview field-wrap">\n                                <div class="input-field notifications-dependant checkbox-field">\n                                    <input type="checkbox" class="filled-in" id="preview_private"/>\n                                    <label for="preview_private">{[print(xabber.getString("settings__section_notifications__toggle_message_preview"))]}</label>\n                                    <div class="desktop-notifications-clue-wrap">\n                                        {[print(xabber.getString("settings__section_notifications__desktop_notifications_clue"))]}\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="setting-name header-setting">{[print(xabber.getString("settings__menu_item__sounds"))]}</div>\n                            <div class="setting sound radio-button field-wrap">\n                                <div class="field radio-field clickable-field notification-field">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div data-header=\'{[print(xabber.getString("settings__section_notifications__group_chats"))]}\' class="settings-block-wrap groupchats-notifications">\n                        <div class="settings-subblock-wrap">\n                            <div class="setting message-preview checkbox-setting group-preview field-wrap">\n                                <div class="input-field notifications-dependant checkbox-field">\n                                    <input type="checkbox" class="filled-in" id="preview_group"/>\n                                    <label for="preview_group">{[print(xabber.getString("settings__section_notifications__toggle_message_preview"))]}</label>\n                                    <div class="desktop-notifications-clue-wrap">\n                                        {[print(xabber.getString("settings__section_notifications__desktop_notifications_clue"))]}\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="setting-name header-setting">{[print(xabber.getString("settings__menu_item__sounds"))]}</div>\n                            <div class="setting sound radio-button field-wrap">\n                                <div class="field radio-field clickable-field notification-field group-notification-field">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div data-header=\'{[print(xabber.getString("settings__section_notifications__calls"))]}\' class="settings-block-wrap calls-notifications">\n                        <div class="settings-subblock-wrap">\n                            <div class="setting-name header-setting">{[print(xabber.getString("settings__section_notifications__ringtone"))]}</div>\n                            <div class="setting sound radio-button field-wrap">\n                                <div class="field radio-field clickable-field ringtone-field">\n                                </div>\n                            </div>\n                            <div class="setting-name header-setting">{[print(xabber.getString("settings__section_notifications__dialtone"))]}</div>\n                            <div class="setting sound radio-button field-wrap">\n                                <div class="field radio-field clickable-field dialtone-field">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div data-header=\'{[print(xabber.getString("settings__section_notifications__attention_calls"))]}\' class="settings-block-wrap attention-calls">\n                        <div class="settings-subblock-wrap ">\n                            <div class="setting-name header-setting">{[print(xabber.getString("settings__section_notifications__ringtone"))]}</div>\n                            <div class="setting sound radio-button field-wrap">\n                                <div class="field radio-field clickable-field attention-field">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div data-header=\'{[print(xabber.getString("settings__menu_item__privacy"))]}\'  class="settings-block-wrap privacy hidden">\n                        <div class="block-subheader">\n                            <span class="block-name">{[print(xabber.getString("settings__menu_item__device_metadata_sharing"))]}</span>\n                        </div>\n                        <div class="setting device-metadata radio-button field-wrap">\n                            <div class="field radio-field clickable-field">\n                                <form action="#">\n                                    <p>\n                                        <input class="with-gap" name="device_metadata" value="contacts" type="radio" id="{{view.cid}}-contacts" />\n                                        <label for="{{view.cid}}-contacts">{[print(xabber.getString("settings__section_privacy__contacts_metadata"))]}</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="device_metadata" value="server" type="radio" id="{{view.cid}}-server" />\n                                        <label for="{{view.cid}}-server">{[print(xabber.getString("settings__section_privacy__server_metadata"))]}</label>\n                                    </p>\n                                    <p>\n                                        <input class="with-gap" name="device_metadata" value="none" type="radio" id="{{view.cid}}-none" />\n                                        <label for="{{view.cid}}-none">{[print(xabber.getString("settings__section_privacy__none_metadata"))]}</label>\n                                    </p>\n                                </form>\n                            </div>\n                        </div>\n                        <div class="device-metadata-description"></div>\n                        <div class="block-subheader">\n                            <span class="block-name">{[print(xabber.getString("settings__menu_item__privacy"))]}</span>\n                        </div>\n                        <div class="setting load-media checkbox-setting field-wrap">\n                            <div class="input-field checkbox-field">\n                                <input type="checkbox" class="filled-in" id="load-media"/>\n                                <label for="load-media">{[print(xabber.getString("settings__section_privacy__load_media"))]}</label>\n                            </div>\n                        </div>\n                        <div class="setting typing-notifications checkbox-setting field-wrap">\n                            <div class="input-field checkbox-field">\n                                <input type="checkbox" class="filled-in" id="typing-notifications"/>\n                                <label for="typing-notifications">{[print(xabber.getString("settings__section_privacy__typing_notifications"))]}</label>\n                            </div>\n                        </div>\n                        <div class="setting mapping-service checkbox-setting field-wrap">\n                            <div class="input-field checkbox-field">\n                                <input type="checkbox" class="filled-in" id="mapping-service"/>\n                                <label for="mapping-service">{[print(xabber.getString("settings__section_privacy__mapping_service"))]}</label>\n                            </div>\n                        </div>\n                        <div class="setting desktop-autostart checkbox-setting field-wrap">\n                            <div class="input-field checkbox-field">\n                                <input type="checkbox" class="filled-in" id="desktop-autostart"/>\n                                <label for="desktop-autostart">{[print(xabber.getString("settings__autostart"))]}</label>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div data-header=\'{[print(xabber.getString("settings__menu_item__interface_language"))]}\'  class="settings-block-wrap interface_language hidden">\n                        <div class="setting radio-button interface-language-setting">\n                            <div class="languages-list field radio-field clickable-field">\n                            </div>\n                        </div>\n                    </div>\n\n                    <div data-header=\'{[print(xabber.getString("settings__menu_item__debug"))]}\'  class="settings-block-wrap debug hidden">\n                        <div class="setting reconnection-popup-log checkbox-setting field-wrap">\n                            <div class="input-field checkbox-field">\n                                <input type="checkbox" class="filled-in" id="reconnection-popup-log"/>\n                                <label for="reconnection-popup-log">{[print(xabber.getString("settings__section_debug__reconnect_log"))]}</label>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    </div>\n</div>\n'},45459:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="toolbar-top">\n    <div class="toolbar-item toolbar-logo" title=\'{[print(xabber.getString("toolbar__menu_item__all_chats"))]}\'>\n        <img class="logo" src="{{TOOLBAR_LOGO}}">\n    </div>\n</div>\n\n<div class="toolbar-middle">\n    <div class="toolbar-item all-chats active" title=\'{[print(xabber.getString("toolbar__menu_item__all_chats"))]}\'>\n        <div class="border"></div>\n        <i class="toolbar-icon mdi mdi-24px mdi-message-text"></i>\n        <span class="all-msg-indicator"></span>\n    </div>\n\n    <div class="toolbar-item jingle-calls" title=\'{[print(xabber.getString("toolbar__menu_item__jingle_calls"))]}\'>\n        <div class="border"></div>\n        <i class="toolbar-icon mdi mdi-24px mdi-phone"></i>\n        <span class="archive-msg-indicator hidden"></span>\n    </div>\n\n    <div class="toolbar-item mentions" title=\'{[print(xabber.getString("contact_bar_notifications"))]}\'>\n        <div class="border"></div>\n        <svg class="toolbar-icon mdi mdi-24px mdi-svg-template" viewBox="0 0 24 24" data-svgname="bell"></svg>\n        <span class="mentions-indicator"></span>\n    </div>\n\n    <div class="toolbar-item contacts" title=\'{[print(xabber.getString("category_title_contacts"))]}\'>\n        <div class="border"></div>\n        <i class="toolbar-icon mdi mdi-24px mdi-account-multiple"></i>\n    </div>\n\n    <div class="toolbar-item geolocation-chats" title=\'{[print(xabber.getString("toolbar__menu_item__geolocation_chats"))]}\'>\n        <div class="border"></div>\n        <i class="toolbar-icon mdi mdi-24px mdi-compass"></i>\n        <span class="archive-msg-indicator hidden"></span>\n    </div>\n\n    <div class="toolbar-item archive-chats" title=\'{[print(xabber.getString("toolbar__menu_item__archive_chats"))]}\'>\n        <div class="border"></div>\n        <i class="toolbar-icon mdi mdi-24px mdi-archive"></i>\n        <span class="archive-msg-indicator hidden"></span>\n    </div>\n\n    <div class="toolbar-item saved-chats" title=\'{[print(xabber.getString("toolbar__menu_item__saved_chats"))]}\'>\n        <div class="border"></div>\n        <i class="toolbar-icon mdi mdi-24px mdi-bookmark"></i>\n        <span class="archive-msg-indicator hidden"></span>\n    </div>\n\n    <div class="add-something-wrap">\n        <div class="toolbar-item dropdown-button add-something" data-activates="{{view.cid}}-add" title=\'{[print(xabber.getString("toolbar__button_add_tooltip"))]}\'>\n            <i class="toolbar-icon mdi mdi-24px mdi-plus"></i>\n        </div>\n\n        <div id="{{view.cid}}-add" class="add-variants dropdown-content noselect">\n            <div class="add-variant contact">\n                <i class="mdi mdi-20px mdi-account-plus"></i>\n                <span class="text one-line">{[print(xabber.getString("add_contact"))]}</span>\n            </div>\n            <div class="add-variant public-groupchat">\n                <i class="mdi mdi-20px mdi-account-multiple-plus"></i>\n                <span class="text one-line">{[print(xabber.getString("create_group"))]}</span>\n            </div>\n            <div class="add-variant incognito-groupchat">\n                <svg class="mdi mdi-20px" viewBox="0 0 24 24">\n                    <path d="M13 11A3 3 0 1 0 10 8A3 3 0 0 0 13 11M13 7A1 1 0 1 1 12 8A1 1 0 0 1 13 7M17.11 10.86A5 5 0 0 0 17.11 5.14A2.91 2.91 0 0 1 18 5A3 3 0 0 1 18 11A2.91 2.91 0 0 1 17.11 10.86M13 13C7 13 7 17 7 17V19H19V17S19 13 13 13M9 17C9 16.71 9.32 15 13 15C16.5 15 16.94 16.56 17 17M24 17V19H21V17A5.6 5.6 0 0 0 19.2 13.06C24 13.55 24 17 24 17M8 12H5V15H3V12H0V10H3V7H5V10H8Z" />\n                </svg>\n                <span class="text one-line">{[print(xabber.getString("create_incognito_group"))]}</span>\n            </div>\n            <div class="add-variant account">\n                <i class="mdi mdi-20px mdi-account-circle"></i>\n                <span class="text one-line">{[print(xabber.getString("dialog_add__label_add_account"))]}</span>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="toolbar-bottom">\n    <div class="accounts-wrap">\n        <div class="accounts">\n            <div class="toolbar-item settings-modal hidden" title=\'{[print(xabber.getString("settings"))]}\'>\n                <div class="border"></div>\n                <i class="toolbar-icon mdi mdi-24px mdi-settings"></i>\n            </div>\n        </div>\n    </div>\n</div>\n'},56468:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="account-item-wrap property-variant" data-jid="{{jid}}">\n    <div class="circle-avatar noselect">\n        <img>\n    </div>\n    <div class="name-wrap">\n        <div class="name one-line">{{name}}</div>\n        <div class="jid one-line">{{jid}}</div>\n    </div>\n</div>'},74335:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='    <div class="message-input-panel noselect">\n        <div class="my-avatar circle-avatar circle-image-fix"></div>\n        <div class="message-form">\n            <div class="fwd-messages-preview noselect hidden">\n                <div class="msg-border ground-color-700">\n                </div>\n                <div class="msg-content">\n                    <p class="msg-author text-color-700 one-line"></p>\n                    <p class="msg-text one-line"></p>\n                </div>\n                <div class="close-forward">\n                    <i class="mdi mdi-20px mdi-close hover-text-color-500"></i>\n                </div>\n            </div>\n            <div class="message-reference-preview hidden">\n                <div class="message-reference-preview-container">\n                </div>\n                <div class="close-attachments">\n                    <i class="mdi mdi-20px mdi-close hover-text-color-500"></i>\n                </div>\n            </div>\n            <div class="input-field input-message">\n                <div class="mentions-list"></div>\n                <div class="rich-textarea-wrap notranslate">\n                </div>\n                <div class="scrollbar-cover"></div>\n                <div class="insert-emoticon">\n                    <i class="mdi mdi-24px mdi-emoticon hover-text-color-500"></i>\n                </div>\n                <div class="preview-preloader-container hidden" title=\'{[print(xabber.getString("chat_bottom__preview_preloader_cancel"))]}\'>\n                    <svg class="preview-cancel-preloader mdi mdi-24px mdi-svg-template" data-svgname="link"></svg>\n                </div>\n                <div class="emoticons-panel-wrap">\n                    <div class="emoticons-panel"></div>\n                    <div class="emoji-menu"></div>\n                </div>\n            </div>\n            <div class="input-voice-message">\n                <div class="voice-visualizer"></div>\n                <div class="timer">0:00</div>\n                <div class="voice-msg-status">{[print(xabber.getString("chat_bottom__placeholder__cancel_write_voice"))]}</div>\n            </div>\n            <div class="input-toolbar">\n                <div class="attach attach-file">\n                    <input type="file" title=\'{[print(xabber.getString("chat_bottom__tooltip_send_file"))]}\' multiple>\n                    <i class="mdi mdi-24px mdi-paperclip"></i>\n                </div>\n                <div class="attach attach-media" title=\'{[print(xabber.getString("chat_bottom__tooltip_send_media"))]}\'>\n                    <i class="mdi mdi-24px mdi-file-image"></i>\n                </div>\n                <div class="attach attach-location" title=\'{[print(xabber.getString("chat_bottom__tooltip_send_location"))]}\'>\n                    <input type="text" hidden title=\'{[print(xabber.getString("chat_bottom__tooltip_send_location"))]}\'>\n                    <i class="mdi mdi-24px mdi-map-marker"></i>\n                </div>\n                <div title="Format text" class="format-text">\n                    <i class="mdi mdi-24px mdi-format-text"></i>\n                </div>\n                <div class="last-emoticons">\n                </div>\n                <div class="account-info-wrap">\n                    <div class="account-jid text-color-700"></div>\n                    <div class="account-nickname text-color-700"></div>\n                    <div class="account-badge"></div>\n                    <div class="account-role ground-color-700"></div>\n                </div>\n            </div>\n        </div>\n        <div class="send-area">\n            <i class="send-message mdi mdi-32px mdi-send text-color-700 hover-text-color-500 hidden"></i>\n            <i class="mdi mdi-32px mdi-microphone attach-voice-message text-color-700 hover-text-color-500"></i>\n            <div class="ephemeral-timer-time text-color-700"></div>\n        </div>\n    </div>\n    <div class="blocked-msg hidden">{[print(xabber.getString("chat_bottom__placeholder__blocked"))]}</div>\n    <div class="message-actions-panel noselect hidden">\n        <div class="button-wrap reply-message-wrap">\n            <i class="action-button reply-message mdi ground-color-700 mdi-reply mdi-24px"></i>\n            <div class="button-name"><span class="text-color-500">{[print(xabber.getString("chat_reply").slice(0,1))]}</span>{[print(xabber.getString("chat_reply").slice(1))]}</div>\n        </div>\n        <div class="button-wrap forward-message-wrap">\n            <i class="action-button forward-message mdi ground-color-700 mdi-forward mdi-24px"></i>\n            <div class="button-name"><span class="text-color-500">{[print(xabber.getString("chat_froward").slice(0,1))]}</span>{[print(xabber.getString("chat_froward").slice(1))]}</div>\n        </div>\n        <div class="button-wrap copy-message-wrap">\n            <i class="action-button copy-message mdi ground-color-700 mdi-content-copy mdi-24px"></i>\n            <div class="button-name"><span class="text-color-500">{[print(xabber.getString("message_copy").slice(0,1))]}</span>{[print(xabber.getString("message_copy").slice(1))]}</div>\n        </div>\n        <div class="button-wrap delete-message-wrap">\n            <i class="action-button delete-message mdi ground-color-700 mdi-delete mdi-24px"></i>\n            <div class="button-name"><span class="text-color-500">{[print(xabber.getString("delete").slice(0,1))]}</span>{[print(xabber.getString("delete").slice(1))]}</div>\n        </div>\n        <div class="button-wrap edit-message-wrap">\n            <i class="action-button edit-message mdi ground-color-700 mdi-pencil mdi-24px"></i>\n            <div class="button-name"><span class="text-color-500">{[print(xabber.getString("message_edit").slice(0,1))]}</span>{[print(xabber.getString("message_edit").slice(1))]}</div>\n        </div>\n        <div class="button-wrap pin-message-wrap">\n            <svg class="action-button pin-message ground-color-700" viewBox="0 0 24 24">\n                <path fill="#FFF" d="M16,12V4H17V2H7V4H8V12L6,14V16H11.2V22H12.8V16H18V14L16,12Z"></path>\n            </svg>\n            <div class="button-name"><span class="text-color-500">{[print(xabber.getString("message_pin").slice(0,1))]}</span>{[print(xabber.getString("message_pin").slice(1))]}</div>\n        </div>\n        <div class="button-wrap cancel-message-wrap">\n            <i class="action-button close-message-panel mdi mdi-close mdi-24px"></i>\n            <div class="button-name">{[print(xabber.getString("cancel"))]}</div>\n        </div>\n    </div>\n'},10224:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='  <div class="search-form-header">\n    <div class="messages-search-form search-form">\n        <i class="search-icon mdi mdi-20px mdi-magnify"></i>\n        <input type="text" class="search-input simple-input-field" tabindex="1" placeholder=\'{[print(xabber.getString("chat__search_messages_panel__placeholder"))]}\' autofocus>\n    </div>\n    <div class="text-color-700 btn-cancel-searching">{[print(xabber.getString("cancel"))]}</div>\n</div>\n<div class="pinned-message"></div>\n<div class="elements-in-top">\n    <div class="subscription-buttons-wrap hidden"></div>\n    <div class="chat-day-indicator fixed-day-indicator-wrap hidden"><div class="fixed-day-indicator"></div></div>\n</div>\n<div class="load-history-feedback hidden"></div>\n<div class="participant-messages-header hidden"><div class="messages-by-header">{[print(xabber.getString("chat__placeholder_participant_messages__messages_by"))]} <div class="participant-nickname text-color-700"></div></div><div class="btn-cancel-selection">{[print(xabber.getString("close"))]}</div><div class="text-color-700 btn-retract-messages">{[print(xabber.getString("chat_settings__button_delete_all"))]}</div></div>\n<div class="chat-content">\n</div>\n<div class="chat-notification hidden one-line"></div>\n<i class="mdi mdi-36px back-to-unread hidden mdi-chevron-down"><div class="back-to-unread-counter"></div></i>\n<i class="mdi mdi-36px back-to-bottom mdi-chevron-down"></i>\n'},9031:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="search-wrap">\n    <div class="search-content">\n        <div class="search-form-header block-header">\n            <i class="details-icon btn-back mdi mdi-24px mdi-arrow-left"></i>\n            <div class="messages-search-form search-form ">\n                <input type="text" class="search-input simple-input-field" tabindex="1" placeholder=\'{[print(xabber.getString("chat__search_messages_panel__placeholder"))]}\' autofocus>\n            </div>\n            <i class="close-search-icon mdi mdi-24px mdi-close"></i>\n        </div>\n        <div class="search-messages-content-wrap">\n            <div class="search-results">\n                {[print(xabber.getString("nothing_was_searched"))]}\n            </div>\n            <div class="preloader-wrap">\n                <div class="preloader-wrapper preloader-20px active">\n                    <div class="spinner-layer">\n                        <div class="circle-clipper left">\n                            <div class="circle"></div>\n                        </div>\n                        <div class="gap-patch">\n                            <div class="circle"></div>\n                        </div>\n                        <div class="circle-clipper right">\n                            <div class="circle"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="messages-count">\n            </div>\n            <div class="chat-content">\n            </div>\n        </div>\n    </div>\n</div>'},36209:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="chat-body-content-placeholder-text no-select">{[print(xabber.getString("placeholder_loading"))]}</div>\n'},29317:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="chat-head-details"></div>\n<div class="circle-avatar"></div>\n<div class="contact-status hide-offline"></div>\n<div class="chat-icon hidden"></div>\n<div class="chat-head-info-buttons-container">\n    <div class="contact-info">\n        <div class="contact-name-wrap">\n            <i class="mdi encrypted-icon mdi-14px mdi-lock"></i>\n            <i class="mdi encrypted-icon mdi-14px mdi-alert"></i>\n            <i class="mdi encrypted-icon mdi-14px mdi-alert-circle"></i>\n            <p class="contact-name one-line"></p>\n        </div>\n        <p class="contact-status-message one-line"></p>\n    </div>\n    <div class="chat-tools-wrap">\n        <div class="chat-tool chat-tool-player">\n            <div class="chat-tool-player-containter">\n                <div class="chat-tool chat-tool-plyr-controls btn-previous-plyr">\n                    <i class="mdi mdi-skip-previous mdi-24px"></i>\n                </div>\n                <div class="chat-tool chat-tool-plyr-controls btn-play-pause-plyr">\n                    <i class="mdi mdi-play mdi-24px"></i>\n                    <i class="mdi mdi-pause mdi-24px"></i>\n                </div>\n                <div class="chat-tool chat-tool-plyr-controls btn-next-plyr">\n                    <i class="mdi mdi-skip-next mdi-24px"></i>\n                </div>\n                <div class="chat-tool chat-tool-plyr-controls btn-popup-plyr">\n                    <img class="player-poster hidden">\n                    <svg class="mdi mdi-32px mdi-player-type-icon mdi-svg-template" data-svgname="video"></svg>\n                    <div class="voice-message-player-avatar circle-avatar hidden"></div>\n                </div>\n                <div class="chat-tool chat-player-duration chat-tool-plyr-controls">\n                    <div class="chat-head-player-title one-line"><div class="chat-head-player-title-text">{[print(xabber.getString("chat_message_video"))]}</div></div>\n                    <div class="chat-head-player-title-bottom-container">\n                        <span class="chat-head-player-type one-line">{[print(xabber.getString("chat_message_video"))]}</span><span class="chat-head-player-type-dot"> •</span>\n                        <span class="chat-head-player-current-time">0:00</span> /\n                        <span class="chat-head-player-total-time">0:00</span>\n                    </div>\n                </div>\n                <div class="chat-tool chat-tool-plyr-controls btn-stop-plyr">\n                    <i class="mdi mdi-close mdi-16px"></i>\n                </div>\n            </div>\n        </div>\n        <div class="chat-tool btn-show-fingerprints">\n            <i class="mdi mdi-lock mdi-24px"></i>\n        </div>\n        <div class="chat-tool btn-jingle-message">\n            <i class="mdi mdi-phone mdi-24px"></i>\n        </div>\n        \x3c!--<div class="chat-tool btn-set-status">\n            <svg class="mdi mdi-24px" viewBox="0 0 24 24">\n                <g stroke="none" stroke-width="1" fill="none">\n                    <rect x="0" y="0" width="24" height="24"/>\n                    <path d="M20,4 C21.1045695,4 22,4.8954305 22,6 L22,16 C22,17.1045695 21.1045695,18 20,18 L16,18 L12,22 L8,18 L4,18 C2.8954305,18 2,17.1045695 2,16 L2,6 C2,4.8954305 2.8954305,4 4,4 L20,4 Z M16,12 L6,12 L6,14 L16,14 L16,12 Z M18,8 L6,8 L6,10 L18,10 L18,8 Z" id="tooltip-variant" fill="#9E9E9E" fill-rule="nonzero"></path>\n                </g>\n            </svg>\n        </div>--\x3e\n        <div class="chat-tool btn-search-messages">\n            <i class="search-icon mdi mdi-24px mdi-magnify"></i>\n        </div>\n        <div class="chat-tool btn-more dropdown-button" data-activates="{{view.cid}}-more">\n            <i class="mdi mdi-24px mdi-dots-vertical"></i>\n        </div>\n        <ul id="{{view.cid}}-more" class="chat-head-menu dropdown-content noselect">\n            <li class="btn-chat-pin">\n                <span class="one-line"></span>\n            </li>\n            <li class="btn-archive-chat">\n                <span class="one-line"></span>\n            </li>\n            <li class="btn-notifications active-hover" data-activates="{{view.cid}}-mute-more">\n                <span class="one-line"></span>\n            </li>\n            <li class="ephemeral-timer-dropdown active-hover" data-activates="select-ephemeral-timer-{{view.cid}}">\n                <span class="one-line">{[print(xabber.getString("ephemeral_timer_menu"))]}</span>\n            </li>\n            <li class="btn-call-attention">\n                <span class="one-line">{[print(xabber.getString("call_attention"))]}</span>\n            </li>\n            <li class="btn-export-chat">\n                <span class="one-line">{[print(xabber.getString("export_chat"))]}</span>\n            </li>\n            <li class="btn-invite-users">\n                <span class="one-line">{[print(xabber.getString("groupchat_invite"))]}</span>\n            </li>\n            <li class="btn-start-encryption">\n                <span class="one-line">{[print(xabber.getString("omemo__chat_settings__button_start_encrypted_chat"))]}</span>\n            </li>\n            <li class="btn-open-encrypted-chat">\n                <span class="one-line">{[print(xabber.getString("omemo__chat_settings__button_open_encrypted_chat"))]}</span>\n            </li>\n            <li class="btn-start-trust-verification">\n                <span class="one-line">{[print(xabber.getString("xabber_trust__start_verification"))]}</span>\n            </li>\n            \x3c!--<li class="btn-start-trust-verification-own">--\x3e\n                \x3c!--<span class="one-line">{[print(xabber.getString("xabber_trust__start_verification_own"))]}</span>--\x3e\n            \x3c!--</li>--\x3e\n            <li class="btn-open-regular-chat">\n                <span class="one-line">{[print(xabber.getString("omemo__chat_settings__button_open_regular_chat"))]}</span>\n            </li>\n            <li class="btn-delete-chat">\n                <span class="one-line text-color-500">{[print(xabber.getString("delete_chat"))]}</span>\n            </li>\n            <li class="btn-clear-history">\n                <span class="one-line text-color-500">{[print(xabber.getString("clear_history"))]}</span>\n            </li>\n        </ul>\n        <ul id="{{view.cid}}-mute-more" class="contact-mute-dropdown dropdown-content noselect">\n            <li class="btn-mute-dropdown" data-mute="minutes15">\n                <span class="one-line">{[print(xabber.getString("mute_15_min"))]}</span>\n            </li>\n            <li class="btn-mute-dropdown" data-mute="hours1">\n                <span class="one-line">{[print(xabber.getString("mute_1_hour"))]}</span>\n            </li>\n            <li class="btn-mute-dropdown" data-mute="hours2">\n                <span class="one-line">{[print(xabber.getString("mute_2_hours"))]}</span>\n            </li>\n            <li class="btn-mute-dropdown" data-mute="day">\n                <span class="one-line">{[print(xabber.getString("mute_1_day"))]}</span>\n            </li>\n            <li class="btn-mute-dropdown" data-mute="forever">\n                <span class="one-line">{[print(xabber.getString("mute_forever"))]}</span>\n            </li>\n        </ul>\n        <ul id="select-ephemeral-timer-{{view.cid}}" class="ephemeral-timer-dropdown-content dropdown-content noselect">\n            <li class="btn-set-ephemeral-timer" data-value="">\n                <span class="one-line">{[print(xabber.getString("ephemeral_timer_none"))]}</span>\n            </li>\n            <li class="btn-set-ephemeral-timer" data-value="5">\n                <span class="one-line">{[print(xabber.getString("ephemeral_timer_5"))]}</span>\n            </li>\n            <li class="btn-set-ephemeral-timer" data-value="10">\n                <span class="one-line">{[print(xabber.getString("ephemeral_timer_10"))]}</span>\n            </li>\n            <li class="btn-set-ephemeral-timer" data-value="15">\n                <span class="one-line">{[print(xabber.getString("ephemeral_timer_15"))]}</span>\n            </li>\n            <li class="btn-set-ephemeral-timer" data-value="30">\n                <span class="one-line">{[print(xabber.getString("ephemeral_timer_30"))]}</span>\n            </li>\n            <li class="btn-set-ephemeral-timer" data-value="60">\n                <span class="one-line">{[print(xabber.getString("ephemeral_timer_60"))]}</span>\n            </li>\n            <li class="btn-set-ephemeral-timer" data-value="300">\n                <span class="one-line">{[print(xabber.getString("ephemeral_timer_300"))]}</span>\n            </li>\n            <li class="btn-set-ephemeral-timer" data-value="600">\n                <span class="one-line">{[print(xabber.getString("ephemeral_timer_600"))]}</span>\n            </li>\n            <li class="btn-set-ephemeral-timer" data-value="900">\n                <span class="one-line">{[print(xabber.getString("ephemeral_timer_900"))]}</span>\n            </li>\n        </ul>\n    </div>\n</div>\n'},95370:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="account-indicator ground-color-700"></div>\n<div class="circle-avatar"></div>\n<div class="status hide-offline"></div>\n<div class="chat-icon hidden"></div>\n<div class="recent-chat-info">\n    <div class="chat-title-wrap">\n        <i class="mdi encrypted-icon mdi-14px mdi-lock"></i>\n        <i class="mdi encrypted-icon mdi-14px mdi-alert"></i>\n        <i class="mdi encrypted-icon mdi-14px mdi-alert-circle"></i>\n        <p class="chat-title one-line"></p>\n        <i class="mdi muted-icon mdi-14px mdi-bell-off"></i>\n        <p class="last-msg-date"></p>\n    </div>\n    <p class="last-msg one-line"></p>\n</div>\n<div class="chat-states">\n    <div class="chat-item-notifications-wrap">\n        <span class="msg-chat-error hidden">!</span>\n        <span class="msg-incoming-subscription hidden">\n            <svg class="mdi mdi-12px mdi-svg-template" data-svgname="plus"></svg>\n        </span>\n        <span class="msg-counter hidden"></span>\n        <i class="msg-delivering-state mdi mdi-16px hidden"></i>\n        <i class="pinned-icon">\n            <svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                <g id="icon/material/pinned-circle-small" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                    <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n                    <path d="M12,3 C16.9705627,3 21,7.02943725 21,12 C21,16.9705627 16.9705627,21 12,21 C7.02943725,21 3,16.9705627 3,12 C3,7.02943725 7.02943725,3 12,3 Z M12,4 C7.581722,4 4,7.581722 4,12 C4,16.418278 7.581722,20 12,20 C16.418278,20 20,16.418278 20,12 C20,7.581722 16.418278,4 12,4 Z M14,6.5 L17.5,9.5 L16.5,10.5 L16,10 L14.25,13.25 L15.25,14.75 L14,16 L11.5,13.5 L8.75,16.25 L7.75,16.25 L7.75,15.25 L10.5,12.5 L8,10 L9.25,8.75 L10.75,9.75 L13.5,8 L13,7.5 L14,6.5 Z" id="xabber:pinned-small" fill="#000000" fill-rule="nonzero"></path>\n                </g>\n            </svg>\n        </i>\n    </div>\n</div>\n'},5696:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="text">{[print(xabber.getString("chat_list__placeholder"))]}</div>\n'},80026:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="recent-chats-panel noselect">\n    <div class="chats-search-form search-form panel-head">\n        <div class="account-indicator"></div>\n        <i class="search-icon mdi mdi-24px mdi-magnify"></i>\n        <input type="text" class="search-input simple-input-field" tabindex="1" placeholder=\'{[print(xabber.getString("search"))]}\'>\n        <i class="close-search-icon mdi mdi-24px mdi-close"></i>\n    </div>\n    <div class="chat-list-wrap left-panel-list-wrap">\n        <div class="pinned-chat-list item-list">\n        </div>\n        <div class="chat-list item-list">\n        </div>\n        <div class="searched-lists-wrap">\n            <div class="chats-list-wrap hidden">\n                <div class="account-indicator"></div>\n                <div class="chats-title">{[print(xabber.getString("search__header_chats"))]}</div>\n                <div class="chats-list roster-left-container"></div>\n            </div>\n            <div class="contacts-list-wrap hidden">\n                <div class="account-indicator"></div>\n                <div class="contacts-title">{[print(xabber.getString("category_title_contacts"))]}</div>\n                <div class="contacts-list roster-left-container"></div>\n            </div>\n            <div class="messages-list-wrap hidden">\n                <div class="account-indicator"></div>\n                <div class="messages-title">{[print(xabber.getString("search__header_messages"))]}</div>\n                <div class="messages-list roster-left-container"></div>\n            </div>\n        </div>\n        <div class="load-chats-feedback hidden">{[print(xabber.getString("placeholder_loading"))]}</div>\n    </div>\n    <div class="read-all-button hidden">{[print(xabber.getString("mark_all_as_read_button"))]}</div>\n</div>\n'},40433:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="field clickable-field {{className}} switch normal">\n    <input type="checkbox" class="filled-in" id="{{id}}">\n    <label for="{{id}}"></label>\n</div>'},96249:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div>\n    <i class="mdi mdi-36px mdi-alert-circle"></i>\n</div>\n<div class="warning-message">{{message}}</div>\n<button class="btn-manage-devices btn-flat btn-main btn-dark hover-ground-color-amber-300">{[print(xabber.getString("omemo__alert_new_device__button_manage_devices"))]}</button>'},53318:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="warning-wrap">\n    <p class="warning-message">{{message}}</p>\n    <button class="btn-manage-devices btn-flat btn-main btn-dark ground-color-{{color}}-100 hover-ground-color-{{color}}-300">{[print(xabber.getString("omemo__alert_new_device__button_manage_devices"))]}</button>\n</div>'},70275:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-content-wrap">\n    <div class="modal-header">\n        <span>{[print(xabber.getString("ephemeral_timer_modal__header"))]}</span>\n    </div>\n    <div class="modal-content">\n        <div data-value="" class="btn-set-ephemeral-timer">{[print(xabber.getString("ephemeral_timer_none"))]}</div>\n        <div data-value="5" class="btn-set-ephemeral-timer">{[print(xabber.getString("ephemeral_timer_5"))]}</div>\n        <div data-value="10" class="btn-set-ephemeral-timer">{[print(xabber.getString("ephemeral_timer_10"))]}</div>\n        <div data-value="15" class="btn-set-ephemeral-timer">{[print(xabber.getString("ephemeral_timer_15"))]}</div>\n        <div data-value="30" class="btn-set-ephemeral-timer">{[print(xabber.getString("ephemeral_timer_30"))]}</div>\n        <div data-value="60" class="btn-set-ephemeral-timer">{[print(xabber.getString("ephemeral_timer_60"))]}</div>\n        <div data-value="300" class="btn-set-ephemeral-timer">{[print(xabber.getString("ephemeral_timer_300"))]}</div>\n        <div data-value="600" class="btn-set-ephemeral-timer">{[print(xabber.getString("ephemeral_timer_600"))]}</div>\n        <div data-value="900" class="btn-set-ephemeral-timer">{[print(xabber.getString("ephemeral_timer_900"))]}</div>\n    </div>\n</div>\n'},88831:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-content-wrap">\n    <div class="modal-header">\n        <span>{[print(xabber.getString("export_history"))]}</span>\n    </div>\n    <div class="modal-content">\n        <div class="export-history-progress-bar">\n            <progress value="75" min="0" max="100" style="visibility:hidden;height:0;width:0;"></progress>\n            <div class="export-history-msg-count"></div>\n            <i class="mdi mdi-stop mdi-72px"></i>\n        </div>\n        <div class="file-format-choice">\n            <div class="file-format-choice-label">{[print(xabber.getString("export_history_file_format_label"))]}</div>\n            <div class="field radio-field clickable-field">\n                <form action="#">\n                    <p>\n                        <input class="with-gap" name="file_format" value="txt" type="radio" id="file-format-txt" />\n                        <label for="file-format-txt">TXT</label>\n                    </p>\n                    <p>\n                        <input class="with-gap" name="file_format" value="csv" type="radio" id="file-format-csv" />\n                        <label for="file-format-csv">CSV</label>\n                    </p>\n                </form>\n            </div>\n        </div>\n        <div class="date-format-choice">\n            <div class="date-format-choice-label">{[print(xabber.getString("export_history_date_format_label"))]}</div>\n            <div class="field radio-field clickable-field">\n                <form action="#">\n                    <p>\n                        <input class="with-gap" name="date_format" value="iso" type="radio" id="date-format-iso" />\n                        <label for="date-format-iso">YYYY-MM-DD</label>\n                    </p>\n                    <p>\n                        <input class="with-gap" name="date_format" value="eur" type="radio" id="date-format-eur" />\n                        <label for="date-format-eur">DD.MM.YYYY</label>\n                    </p>\n                    <p>\n                        <input class="with-gap" name="date_format" value="usa" type="radio" id="date-format-usa" />\n                        <label for="date-format-usa">MM/DD/YYYY</label>\n                    </p>\n                </form>\n            </div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn-confirm btn-flat btn-main">{[print(xabber.getString("export_file"))]}</button>\n        <button class="btn-flat btn-main btn-dark btn-cancel">{[print(xabber.getString("close"))]}</button>\n    </div>\n</div>'},83176:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-header noselect">\n    <div class="panel-header">\n        <span class="header">{[print(xabber.getString("dialog_forward_message__header"))]}</span>\n    </div>\n</div>\n<div class="modal-content noselect">\n    <div class="chats-search-form search-form">\n        <i class="search-icon mdi mdi-20px mdi-magnify"></i>\n        <input type="text" class="search-input simple-input-field" placeholder=\'{[print(xabber.getString("search"))]}\'>\n        <i class="close-search-icon mdi mdi-20px mdi-close"></i>\n    </div>\n    <div class="chat-list-wrap">\n        <div class="pinned-chat-list forward-chats-list">\n        </div>\n        <div class="chat-list forward-chats-list">\n        </div>\n        <div class="contact-list forward-chats-list">\n        </div>\n    </div>\n    <div class="error hidden">{[print(xabber.getString("placeholder_no_matches"))]}</div>\n</div>\n'},23118:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-header">\n    <span>{[print(xabber.getString("create_groupchat"))]}</span>\n    <div class="account-dropdown-wrap" data-activates="select-account-for-creating-groupchat">\n        <div class="dropdown-button">\n            <div class="account-item-wrap">\n                <div class="circle-avatar noselect">\n                    <img>\n                </div>\n            </div>\n        </div>\n        <div id="select-account-for-creating-groupchat" class="dropdown-content noselect">\n        </div>\n    </div>\n</div>\n<div class="modal-content">\n    <div class="row name-field">\n        <div class="input-field input-group-chat-name">\n            <label for="new_chat_name">{[print(xabber.getString("groupchat_name"))]}</label>\n            <input id="new_chat_name" type="text" name="chat_name" placeholder=\'{[print(xabber.getString("group_is_empty"))]}\' required>\n        </div>\n    </div>\n    <div class="row jid-field">\n        <label for="new_chat_jid">{[print(xabber.getString("groupchat_xmpp_jid"))]}</label>\n        <div class="input-field input-group-chat-jid">\n            <input id="new_chat_jid" type="text" placeholder=\'{[print(xabber.getString("groupchat_xmpp_jid"))]}\' name="chat_jid">\n            <div class="property-field xmpp-server-dropdown-wrap">\n                <div class="select-xmpp-server">\n                    <div data-activates="select-xmpp-server" class="xmpp-server-item-wrap property-wrap"><div class="jid-at">@</div><div class="field-jid one-line property-value"></div></div>\n                    <div class="input-field input-group-chat-domain hidden">\n                        <input id="new_chat_domain" type="text" placeholder=\'{[print(xabber.getString("groupchat__hint_domain"))]}\' name="chat_domain">\n                    </div>\n                    <div data-activates="select-xmpp-server" class="caret">\n                        <i class="mdi mdi-20px mdi-menu-up"></i>\n                        <i class="mdi mdi-20px mdi-menu-down"></i>\n                    </div>\n                </div>\n                <div id="select-xmpp-server" class="dropdown-content noselect">\n                    <div class="property-variant set-custom-domain">{[print(xabber.getString("groupchat_custom_server"))]}</div>\n                </div>\n            </div>\n        </div>\n        <span class="errors"></span>\n    </div>\n    <div class="row incognito-field hidden">\n        <i class="field-icon mdi mdi-24px mdi-incognito"></i>\n        <div class="property-field incognito-dropdown-wrap">\n           <div class="public-item-wrap property-wrap"><div data-value="public" class="property-value">{[print(xabber.getString("groupchat_privacy_type_public"))]}</div></div>\n           <div class="incognito-item-wrap property-wrap"><div data-value="incognito" class="property-value">{[print(xabber.getString("groupchat_privacy_type_incognito"))]}</div></div>\n        </div>\n    </div>\n    <div class="row group-radio-fields">\n        <div class="property-radio-field membership-dropdown-wrap">\n            <div class="membership-item-wrap property-wrap">\n                <div class="property-radio-label">{[print(xabber.getString("groupchat_membership"))]}</div>\n            </div>\n            <div class="property-radio-wrap">\n                <div class="property-radio">\n                    <input checked id="membership_open" data-value="open" name="group_membership" type="radio" class="with-gap" required="">\n                    <label class="membership-label" for="membership_open">{[print(xabber.getString("groupchat_membership_type_open"))]}</label>\n                </div>\n                <div class="property-radio">\n                    <input id="membership_member_only" data-value="member-only" name="group_membership" type="radio" class="with-gap" required="">\n                    <label class="membership-label" for="membership_member_only">{[print(xabber.getString("groupchat_membership_type_members_only"))]}</label>\n                </div>\n            </div>\n        </div>\n        <div class="property-radio-field global-dropdown-wrap">\n            <div class="global-item-wrap property-wrap">\n                <div class="property-radio-label">{[print(xabber.getString("groupchat_index"))]}</div>\n            </div>\n            <div class="property-radio-wrap">\n                <div class="property-radio">\n                    <input checked id="index_none" data-value="none" name="group_index" type="radio" class="with-gap" required="">\n                    <label class="index-label" for="index_none">{[print(xabber.getString("groupchat_index_type_none"))]}</label>\n                </div>\n                <div class="property-radio">\n                    <input id="index_local" data-value="local" name="group_index" type="radio" class="with-gap" required="">\n                    <label class="index-label" for="index_local">{[print(xabber.getString("groupchat_index_type_local"))]}</label>\n                </div>\n                <div class="property-radio">\n                    <input id="index_global" data-value="global" name="group_index" type="radio" class="with-gap" required="">\n                    <label class="index-label" for="index_global">{[print(xabber.getString("groupchat_index_type_global"))]}</label>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="row description-field">\n        <div class="input-field input-message">\n            <label class="description-label">{[print(xabber.getString("groupchat_description"))]}</label>\n            <div class="rich-textarea-wrap notranslate">\n                <div class="rich-textarea" tabindex="2" contenteditable=""></div>\n                <div class="placeholder">{[print(xabber.getString("groupchat_example_description"))]}</div>\n            </div>\n        </div>\n    </div>\n</div>\n</div>\n<div class="modal-footer">\n    <button class="btn-flat btn-main text-color-700 non-active btn-add">{[print(xabber.getString("create"))]}</button>\n    <button class="btn-flat btn-main btn-dark btn-cancel">{[print(xabber.getString("cancel"))]}</button>\n</div>'},1015:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-header noselect">\n    <div class="panel-header">\n        <span class="header">{[print(xabber.getString("groupchat_invite_users"))]}</span>\n    </div>\n</div>\n<div class="modal-content noselect">\n    <div class="chats-search-form search-form">\n        <i class="search-icon mdi mdi-20px mdi-magnify"></i>\n        <input type="text" class="search-input simple-input-field" placeholder=\'{[print(xabber.getString("search"))]}\'>\n        <i class="close-search-icon mdi mdi-20px mdi-close"></i>\n    </div>\n    <div class="contacts-list-wrap">\n    </div>\n    <div class="error hidden">{[print(xabber.getString("placeholder_no_matches"))]}</div>\n</div>\n<div class="modal-footer">\n    <div class="invitation-reason-wrap hidden">\n        <textarea class="text-field textarea-glow input-glow account-glow" type="text" cols="10" rows="5" placeholder=\'{[print(xabber.getString("invitation_text_placeholder"))]}\' id="invitation_text" name="invitation_text"></textarea>\n    </div>\n    <button class="btn-flat btn-main btn-invitation-reason">{[print(xabber.getString("Invitation_reason_button_text"))]}</button>\n    <button class="btn-flat btn-main btn-add"><span class="counter hidden"></span>{[print(xabber.getString("groupchat_invite"))]}</button>\n    <button class="btn-flat btn-dark btn-main btn-cancel">{[print(xabber.getString("cancel"))]}</button>\n    <span class="errors"></span>\n</div>'},79011:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="list-item mention-item" data-jid="{{jid}}" data-id="{{id}}" data-nickname="{{nickname}}">\n    <div class="circle-avatar"></div>\n    <div class="participant-info">\n        <span class="one-line nickname">{{nickname}}</span>\n        <span class="one-line jid">{{jid}}</span>\n    </div>\n</div>'},68096:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-content full-pinned-message"></div>\n'},21732:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-content-wrap">\n    <div class="modal-content">\n        <div id="map" class="text-color-700" style="width:800px; height:490px;" data-type=\'map\'></div>\n        <div class="form-group">\n                <textarea id="output" class="form-control" disabled rows="20"></textarea>\n                <textarea id="lat" class="form-control" disabled rows="20"></textarea>\n                <textarea id="lon" class="form-control" disabled rows="20"></textarea>\n        </div>\n    </div>\n</div>'},59170:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="account-indicator ground-color-700"></div>\n<div class="circle-avatar"></div>\n<div class="chat-icon hidden"></div>\n<div class="recent-chat-info">\n    <div class="chat-title-wrap">\n        <p class="chat-title one-line"></p>\n        <p class="last-msg-date"></p>\n    </div>\n    <p class="last-msg one-line"></p>\n</div>\n'},97042:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='{[ if (blob) {]}\n<div class="attached-image-preview message-reference-preview-attached message-reference-preview-item-file{[ if (file.is_errored) {]} attached-errored{[}]}" title=\'{[ if (file.is_errored) {]}{[print(xabber.getString("chat_bottom__attached_file_error_hint"))]}{[}]}\' data-id="{{uid}}">\n    <div class="attached-file-size one-line">{{filesize}}</div>\n    <svg class="details-icon mdi mdi-18px mdi-close mdi-svg-template" data-svgname="close"></svg>\n    {[ if (blob) {]}\n    <img class="attached-image" data-mfp-src="{{blob}}" src="{{blob}}">\n    {[}]}\n</div>\n{[} else {]}\n<div class="attached-file-preview message-reference-preview-attached message-reference-preview-item-file{[ if (file.is_errored) {]} attached-errored{[}]}" title=\'{[ if (file.is_errored) {]}{[print(xabber.getString("chat_bottom__attached_file_error_hint"))]}{[}]}\' data-id="{{uid}}">\n    <div class="attached-file-text">\n        <div class="attached-file-name one-line">{{file.name}}</div>\n        <div class="attached-file-size one-line">{{filetype}}, {{filesize}}</div>\n    </div>\n    <i class="mdi attached-file-icon {{typeicon}}"></i>\n    <svg class="details-icon mdi mdi-18px mdi-close mdi-svg-template" data-svgname="close"></svg>\n</div>\n{[}]}'},94382:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="one-file-wrap link-file">\n    <i class="mdi mdi-play no-uploaded"></i>\n    <i class="mdi mdi-pause"></i>\n    <div class="file-container">\n        <div class="file-info one-line">\n            <span class="file-name">{{name}}</span>{[ if (duration) { ]}, {{duration}}{[ } ]},  <span class="file-size">{{size}}</span>\n        </div>\n        <a target="_blank" rel="noopener noreferrer" href="{{sources[0]}}" class="file-link-download">{[print(xabber.getString("action_download"))]}</a>\n        <a class="voice-message-play">Play</a>\n    </div>\n</div>'},74211:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="waveform" id="{{waveform_id}}"></div>\n<div class="audio-control-panel">\n    <span class="voice-msg-current-time">0:00</span> /\n    <span class="voice-msg-total-time">0:00</span>\n    <input value="50" type="range" class="voice-message-volume">\n</div>'},63576:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="chat-message system auth-request" data-time="{{timestamp}}" data-uniqueid="{{unique_id}}" data-from="{{from_jid}}">\n    <div class="left-side noselect">\n        <div class="circle-avatar"><img></div>\n    </div>\n\n    <div class="msg-wrap">\n        <div class="chat-msg-author-wrap">\n            <div class="chat-msg-author text-color-700 one-line">{{username}}</div>\n        </div>\n        <div class="chat-msg-content chat-text-content">{{message}}<span class="accept-request">Accept</span><span class="decline-request">Decline</span><span class="block-request">Block</span></div>\n    </div>\n\n    <div class="right-side noselect">\n        <div class="msg-time selectable-text" title="{{time}}">{{short_time}}</div>\n    </div>\n</div>\n'},89256:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="one-file-wrap link-file">\n    <i class="mdi {{mdi_icon}}"></i>\n    <div class="file-container">\n        <div class="file-info one-line">\n            <span class="file-name">{{name}}</span>{[ if (is_audio && duration) { ]}, {{duration}}{[ } ]},  <span class="file-size">{{size}}</span>\n        </div>\n        <a target="_blank" rel="noopener noreferrer" href="{{sources[0]}}" class="file-link-download">{[print(xabber.getString("action_download"))]}</a>\n    </div>\n</div>'},83034:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="one-file-wrap link-file unuploaded-file" data-upload-file-id="{{upload_id}}">\n    <div class="file-loading-container"></div>\n    <div class="file-container">\n        <div class="file-info one-line">\n            <span class="file-name">{{name}}</span>, <span class="file-size">{{size}}</span>\n        </div>\n        <div class="circle-percent-text">0%</div>\n    </div>\n</div>'},46311:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="chat-message main {{classlist}} file-upload noselect"  {[if (avatar_id) {]} data-avatar="{{avatar_id}}" {[}]} {[if (avatar_url) {]} data-avatar-url="{{avatar_url}}" {[}]} data-time="{{timestamp}}" data-uniqueid="{{unique_id}}" {[if (from_id) {]} data-from-id="{{from_id}}" {[}]} data-from="{{from_jid}}">\n    <div class="left-side noselect">\n        <div class="circle-avatar"></div>\n    </div>\n\n    <div class="msg-wrap">\n        <div class="chat-msg-author-wrap">\n            <div class="chat-msg-author text-color-700 one-line">{{username}}</div>\n            {[if (badge) {]} <div class="chat-msg-author-badge one-line">{{badge}}</div>\n            {[ } if (role && (role.toLowerCase() != \'member\')) {]} <div class="chat-msg-author-role ground-color-700 one-line">{{role}}</div> {[}]}\n        </div>\n        <div class="fwd-msgs-block"></div>\n        <div class="chat-msg-content chat-text-content">{{message}}</div>\n        <div class="chat-msg-link-reference-content"></div>\n        <div class="chat-msg-media-content chat-main-upload-media">\n        </div>\n        <div class="chat-msg-location-content no-title" title="{[print(xabber.getString(\'location_fragment__address_error__title\'))]}"></div>\n    </div>\n\n    <div class="right-side noselect">\n        <div class="msg-time selectable-text" title="{{time}}">{{short_time}}</div>\n        <div class="edited-info one-line hidden"></div>\n        {[ if (is_sender) { ]}\n        <i class="msg-delivering-state mdi mdi-14px" data-state="{{state}}" title="{{verbose_state}}" data-activates="retry-send-msg-{{msgid}}"></i>\n        <div id="retry-send-msg-{{msgid}}" class="dropdown-content retry-send-message noselect">\n            <div class="msg-retry-dropdown-btn active-ground-color-600 repeat-upload">{[print(xabber.getString("resend"))]}</div>\n            <div class="msg-retry-dropdown-btn active-ground-color-600 edit-upload{[ if (encrypted) { ]} hidden{[ } ]}">{[print(xabber.getString("edit"))]}</div>\n            <div class="msg-retry-dropdown-btn active-ground-color-600 btn-delete-message">{[print(xabber.getString("delete"))]}</div>\n        </div>\n        {[ } ]}\n        {[ if (ephemeral_timer_text) { ]}\n            <div class="ephemeral-timer-msg-time text-color-700{[ if (is_sender) { ]} ephemeral-timer-own-msg-time{[ } ]}">{{ephemeral_timer_text}}</div>\n        {[ } ]}\n        <div class="msg-copy-link" title=\'{[print(xabber.getString("action_copy_link"))]}\'><i class="mdi mdi-link-variant" data-image="{{is_image}}"></i></div>\n        <div class="msg-copy-location"  title=\'{[print(xabber.getString("action_copy_location"))]}\'><div class="msg-copy-location-content" data-location="false"></div></div>\n    </div>\n</div>'},19038:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="fwd-message" data-time="{{timestamp}}" data-uniqueid="{{unique_id}}" {[if (avatar_id) {]} data-avatar="{{avatar_id}}" {[}]} {[if (avatar_url) {]} data-avatar-url="{{avatar_url}}" {[}]} data-from-id="{{from_id}}" data-from="{{from_jid}}">\n    <div class="fwd-left-side noselect">\n        <div class="circle-avatar"></div>\n    </div>\n    <div class="msg-wrap">\n        <div class="fwd-msg-author-wrap">\n            <div class="fwd-msg-author text-color-700 one-line">{{username}}</div>\n            {[if (badge) {]} <div class="chat-msg-author-badge one-line">{{badge}}</div>\n            {[ } if ((role)&&(role != \'Member\')) {]} <div class="chat-msg-author-role ground-color-700 one-line">{{role}}</div> {[}]}\n            <div class="msg-time selectable-text one-line" title="{{time}}">{{short_time}}</div>\n        </div>\n        <div class="fwd-msgs-block"></div>\n        <div class="chat-msg-content chat-text-content">{{message}}</div>\n        <div class="chat-msg-link-reference-content"></div>\n        <div class="chat-msg-media-content"></div>\n        <div class="chat-msg-location-content no-title" title="{[print(xabber.getString(\'location_fragment__address_error__title\'))]}"></div>\n    </div>\n</div>\n'},29794:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="chat-message system auth-request" data-time="{{timestamp}}" data-uniqueid="{{unique_id}}" data-from="{{from_jid}}">\n    <div class="left-side noselect">\n        <div class="circle-avatar"></div>\n    </div>\n\n    <div class="msg-wrap">\n        <div class="chat-msg-author-wrap">\n            <div class="chat-msg-author text-color-700 one-line">{{username}}</div>\n        </div>\n        <div class="chat-msg-content chat-text-content">{{message}}<div><span class="accept-request-group">Accept</span><span class="decline-request-group">Decline</span><span class="block-request-group">Block</span></div></div>\n    </div>\n\n    <div class="right-side noselect">\n        <div class="msg-time selectable-text" title="{{time}}">{{short_time}}</div>\n    </div>\n</div>\n'},15867:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="image-collection zoom-gallery"><div class="img-content-template template-for-2"><img title="{{images[0].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[0].sources[0]}}"></div>\n<div class="img-content-template template-for-2"><img title="{{images[1].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[1].sources[0]}}"></div></div>'},87486:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="image-collection zoom-gallery"><div class="img-content-template template-for-3 main"><img title="{{images[0].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[0].sources[0]}}"></div>\n<div class="template-for-3 minor-images"><div class="img-content-template template-for-3 minor"><img title="{{images[1].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[1].sources[0]}}"></div>\n<div class="img-content-template template-for-3 minor"><img title="{{images[2].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[2].sources[0]}}"></div></div></div>'},19761:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="image-collection zoom-gallery"><div class="img-content-template template-for-4 main"><img title="{{images[0].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[0].sources[0]}}"></div><div class="template-for-4 minor-images">\n<div class="img-content-template template-for-4 minor"><img title="{{images[1].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[1].sources[0]}}"></div>\n<div class="img-content-template template-for-4 minor"><img title="{{images[2].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[2].sources[0]}}"></div>\n<div class="img-content-template template-for-4 minor"><img title="{{images[3].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[3].sources[0]}}"></div></div></div>'},20365:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="image-collection zoom-gallery template-for-5"><div class="img-content-wrap template-for-5 main"><div class="img-content-template template-for-5"><img title="{{images[0].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[0].sources[0]}}"></div><div class="img-content-template template-for-5"><img title="{{images[1].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[1].sources[0]}}"></div></div>\n<div class="img-content-wrap template-for-5 minor-images"><div class="img-content-template template-for-5"><img title="{{images[2].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[2].sources[0]}}"></div>\n<div class="img-content-template template-for-5"><img title="{{images[3].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[3].sources[0]}}"></div>\n<div class="img-content-template template-for-5"><img title="{{images[4].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[4].sources[0]}}"></div></div></div>'},57344:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="image-collection zoom-gallery template-for-6"><div class="img-content-wrap template-for-6 main-row"><div class="img-content-template template-for-6 main"><img title="{{images[0].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[0].sources[0]}}"></div><div class="template-for-6 minor-1"><div class="img-content-template template-for-6"><img title="{{images[1].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[1].sources[0]}}"></div>\n<div class="img-content-template template-for-6"><img title="{{images[2].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[2].sources[0]}}"></div></div></div>\n<div class="template-for-6 minor-2"><div class="img-content-template template-for-6"><img title="{{images[3].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[3].sources[0]}}"></div>\n<div class="img-content-template template-for-6"><img title="{{images[4].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[4].sources[0]}}"></div>\n<div class="img-content-template template-for-6 last-image"><img title="{{images[5].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[5].sources[0]}}">\n{[ if (images.length > 6) { ]}<span class="image-counter"></span>{[ for (var i=6; i < images.length; i++) {]} <div class="img-content-template hidden"><img title="{{images[i].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[i].sources[0]}}"></div> {[}} ]}</div></div></div>\n'},13786:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="images-details">\n    <div class="images-details-header">\n        {[print(xabber.getString("privacy_risk_images_header"))]}\n    </div>\n    {[img_information.images.forEach((image) => {]}\n        <div class="image-details">\n            {{image.name}} <span>{{image.pretty_size}}, {{image.height}}x{{image.width}}</span>\n        </div>\n    {[})]}\n</div>\n<div class="image-servers-details">\n    {[if (img_information.servers.length === 1) {]}\n        <div class="images-details-header">\n            {[print(xabber.getString("privacy_risk_server_header", [img_information.servers[0]]))]}\n        </div>\n    {[} else {]}\n        <div class="images-details-header">\n            {[print(xabber.getString("privacy_risk_servers_header"))]}\n        </div>\n        {[img_information.servers.forEach((server) => {]}\n            <div class="server-details">\n                {{server}}\n            </div>\n        {[})]}\n    {[}]}\n</div>'},59840:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="link-message-reference message-reference-preview-attached message-reference-preview-item {[ if (item.image && item.video_url) {]}link-message-reference-video{[}]}" data-original-url="{{item.original_text}}">\n    <svg class="details-icon mdi mdi-18px mdi-close mdi-svg-template" data-svgname="close"></svg>\n    {[ if (item.image && item.video_url) {]}\n    <img class="attached-image" data-mfp-src="{{item.image}}" src="{{item.image}}">\n    <div class="attached-site-name one-line">{{item.site}}</div>\n    {[} else if (item.image) {]}\n    <img class="attached-image" data-mfp-src="{{item.image}}" src="{{item.image}}">\n    <div class="attached-text-block">\n        <div class="link-site one-line">{{domain}}</div>\n        {[if (item.description) {]}\n            <div class="link-title{[if (item.description.length <= 25) {]} link-title-short{[}]}">{{item.description}}</div>\n        {[} else {]}\n            <div class="link-title{[if (item.title.length <= 25) {]} link-title-short{[}]}">{{item.title}}</div>\n        {[}]}\n    </div>\n    {[} else {]}\n    <div class="attached-text-block">\n        <div class="link-site one-line">{{domain}}</div>\n        {[if (item.description) {]}\n            <div class="link-title{[if (item.description.length <= 29) {]} link-title-short{[}]}">{{item.description}}</div>\n        {[} else {]}\n            <div class="link-title{[if (item.title.length <= 29) {]} link-title-short{[}]}">{{item.title}}</div>\n        {[}]}\n    </div>\n    {[}]}\n</div>'},39475:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='{[ if (is_video) {]}\n        <div class="link-message-reference message-reference-preview-item message-reference-preview-item-big-image">\n            <div class="embed-video">\n                <div class="plyr-video-container" data-provider="{{provider}}" data-src="{{video_url}}">\n                    <div class="plyr-video-play">\n                        <svg class="mdi mdi-32px mdi-svg-template" data-svgname="play"></svg>\n                    </div>\n                    <div class="plyr-video-playing">\n                        <svg class="mdi mdi-48px mdi-svg-template" data-svgname="player-float"></svg>\n                        <div class="plyr-video-playing-hint">{[print(xabber.getString("chat_message_video_playing_hint"))]}</div>\n                    </div>\n                    {[ if (image) {]}\n                    <img class="plyr-video-poster" src="{{image}}" onerror="this.style.display=\'none\'">\n                    {[}]}\n                </div>\n            </div>\n            <a href="{{original_text}}" target=”_blank” class="msg-hyperlink">\n                <div class="attached-text-block">\n                    <div class="link-title one-line">{{domain}}</div>\n                    <div class="link-site-title">{{title}}</div>\n                    <div class="link-description">{{description}}</div>\n                </div>\n            </a>\n        </div>\n{[} else {]}\n    <a href="{{original_text}}" target=”_blank” class="msg-hyperlink">\n        <div class="link-message-reference message-reference-preview-item{[if (image_width && image_width >= 590 || image_height && image_height < 80 || (1.5 * image_height) < image_width) {]} message-reference-preview-item-big-image{[}]}">\n            {[ if (image) {]}\n            <img class="attached-image" data-mfp-src="{{image}}" data-width="{{image_width}}" data-height="{{image_height}}" src="{{image}}">\n            {[}]}\n            <div class="attached-text-block">\n                <div class="link-title one-line">{{domain}}</div>\n                <div class="link-site-title">{{title}}</div>\n                <div class="link-description">{{description}}</div>\n            </div>\n        </div>\n    </a>\n{[}]}'},54301:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="circle-wrap">\n    <svg xmlns="http://www.w3.org/2000/svg" class="preloader-circular" viewBox="27 27 54 54">\n        <circle class="preloader-path-new" cx="54" cy="54" r="24" fill="none" stroke-miterlimit="10"></circle>\n    </svg>\n    <div class="inside-circle">\n        <i class="mdi mdi-center-loading-indicator mdi-close mdi-20px"></i>\n        <i class="mdi mdi-alert-circle mdi-32px hidden"></i>\n    </div>\n    <div class="circle-percent-text">0%</div>\n</div>'},55127:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div id="{{id}}" class="text-color-700" style="width:350px; height:300px;pointer-events: none;" data-type=\'map\'><img id="img_{{ id }}" ></div>'},76510:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="chat-message main {{classlist}}"\n     {[if (avatar_id) {]} data-avatar="{{avatar_id}}" {[}]}\n     {[if (avatar_url) {]} data-avatar-url="{{avatar_url}}" {[}]}\n     data-time="{{timestamp}}"\n     data-uniqueid="{{unique_id}}"\n     {[if (from_id) {]} data-from-id="{{from_id}}" {[}]}\n     data-from="{{from_jid}}"\n     {[if (device_id) {]} data-device-id="{{device_id}}" {[}]}\n>\n    <div class="left-side noselect">\n        <div class="circle-avatar"></div>\n    </div>\n\n    <div class="msg-wrap">\n        <div class="chat-msg-author-wrap">\n            <div class="chat-msg-author text-color-700 one-line">{{username}}</div>\n            {[if (badge) {]} <div class="chat-msg-author-badge one-line">{{badge}}</div>\n            {[ } if (role && (role.toLowerCase() != \'member\')) {]} <div class="chat-msg-author-role ground-color-700 one-line">{{role}}</div> {[}]}\n        </div>\n        <div class="fwd-msgs-block"></div>\n        <div class="chat-msg-content chat-text-content">{{message}}</div>\n        <div class="chat-msg-link-reference-content"></div>\n        <div class="chat-msg-media-content"></div>\n        <div class="chat-msg-location-content no-title" title="{[print(xabber.getString(\'location_fragment__address_error__title\'))]}"></div>\n    </div>\n\n    <div class="right-side noselect">\n        <div class="msg-time selectable-text" title="{{time}}{[ if (device_id) {]}&#013;{[print(xabber.getString(\'omemo__dialog_fingerprints__label_device_id\'))]}: {{device_id}}{[}]}">{{short_time}}</div>\n        <div class="edited-info one-line hidden"></div>\n        {[ if (is_sender) { ]}\n\n            <i class="msg-delivering-state mdi mdi-14px" data-state="{{state}}" title="{{verbose_state}}" data-activates="retry-send-msg-{{msgid}}"></i>\n            <div id="retry-send-msg-{{msgid}}" class="dropdown-content retry-send-message noselect">\n                <div class="msg-retry-dropdown-btn active-ground-color-600 btn-retry-send-message">{[print(xabber.getString("chat_screen__message__button_retry_send"))]}</div>\n            </div>\n        {[ } ]}\n        <div class="not-decrypted-icon mdi-14px" title="{[print(xabber.getString(\'omemo__not_verified_message_title\'))]}" {[ if (not_verified_device) { ]}data-device-id="{{not_verified_device}}" {[ } ]} data-activates="not-verified-tooltip-{{msgid}}">\n            <svg class="mdi mdi-14px mdi-svg-template not-verified-icon-svg" data-svgname="alert-circle"></svg>\n            <svg class="mdi mdi-14px mdi-svg-template not-decrypted-icon-svg" data-svgname="information"></svg>\n        </div>\n        <div id="not-verified-tooltip-{{msgid}}" class="dropdown-content not-decrypted-tooltip noselect">\n            <div class="not-existing-device-tooltip-text">{[print(xabber.getString("omemo__not_existing_device_message_tooltip"))]}</div>\n            <div class="not-decrypted-tooltip-text">{[print(xabber.getString("omemo__not_decrypted_message_tooltip"))]}</div>\n            <div class="not-verified-tooltip-text">{[print(xabber.getString("omemo__not_verified_message_tooltip"))]}</div>\n            <button class="btn-manage-devices btn-flat btn-main text-color-700">{[print(xabber.getString("omemo__alert_new_device__button_manage_devices"))]}</button>\n            <div class="not-verified-previously-tooltip-text">{[print(xabber.getString("omemo__not_verified_previously_message_tooltip"))]}</div>\n        </div>\n        {[ if (ephemeral_timer_text) { ]}\n        <div class="ephemeral-timer-msg-time text-color-700{[ if (is_sender) { ]} ephemeral-timer-own-msg-time{[ } ]}">{{ephemeral_timer_text}}</div>\n        {[ } ]}\n        <div class="msg-copy-link" title=\'{[print(xabber.getString("action_copy_link"))]}\'><i class="mdi mdi-link-variant" data-image="{{is_image}}"></i></div>\n        <div class="msg-copy-location"  title=\'{[print(xabber.getString("action_copy_location"))]}\'><div class="msg-copy-location-content" data-location="false"></div></div>\n    </div>\n</div>\n'},18479:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="chat-message saved-main main {{classlist}}" data-time="{{timestamp}}" data-uniqueid="{{unique_id}}" data-from="{{from_jid}}">\n    <div class="fwd-msgs-block"></div>\n    <div class="right-side noselect">\n        <div class="msg-time selectable-text" title="{{time}}">{{short_time}}</div>\n        <i class="msg-delivering-state mdi mdi-14px" data-state="{{state}}" title="{{verbose_state}}" data-activates="retry-send-msg-{{msgid}}"></i>\n        <div class="edited-info one-line hidden"></div>\n    </div>\n</div>\n'},83228:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="chat-message main {{classlist}}"  {[if (avatar_id) {]} data-avatar="{{avatar_id}}" {[}]} {[if (avatar_url) {]} data-avatar-url="{{avatar_url}}" {[}]} data-time="{{timestamp}}" data-uniqueid="{{unique_id}}" {[if (from_id) {]} data-from-id="{{from_id}}" {[}]} data-from="{{from_jid}}">\n    <div class="left-side noselect">\n        <div class="circle-avatar"></div>\n    </div>\n\n    <div class="msg-wrap">\n        <div class="chat-msg-author-wrap">\n            <div class="chat-msg-author text-color-700 one-line">{{username}}</div>\n            {[if (badge) {]} <div class="chat-msg-author-badge one-line">{{badge}}</div>\n            {[ } if (role && (role.toLowerCase() != \'member\')) {]} <div class="chat-msg-author-role ground-color-700 one-line">{{role}}</div> {[}]}\n        </div>\n        <div class="chat-msg-content chat-text-content">{{message}}</div>\n    </div>\n\n    <div class="right-side noselect">\n        <div class="msg-time selectable-text" title="{{time}}">{{msg_time}}</div>\n    </div>\n</div>\n'},85046:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="chat-message system"  data-time="{{timestamp}}" data-uniqueid="{{unique_id}}" data-from="{{from_jid}}">\n    <div class="msg-wrap">\n        <div class="chat-msg-content chat-text-content">{{message}}</div>\n    </div>\n\n    <div class="right-side noselect">\n        <div class="msg-time selectable-text" title="{{time}}">{{short_time}}</div>\n    </div>\n</div>\n'},2861:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="image-collection zoom-gallery"><div class="img-content-template template-for-2" data-upload-file-id="{{images[0].upload_id}}"><img src="{{images[0].sources[0]}}" title="{{images[0].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[0].sources[0]}}"></div>\n<div class="img-content-template template-for-2" data-upload-file-id="{{images[1].upload_id}}"><img src="{{images[1].sources[0]}}" title="{{images[1].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[1].sources[0]}}"></div></div>'},70423:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="image-collection zoom-gallery"><div class="img-content-template template-for-3 main" data-upload-file-id="{{images[0].upload_id}}"><img src="{{images[0].sources[0]}}" title="{{images[0].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[0].sources[0]}}"></div>\n<div class="template-for-3 minor-images"><div class="img-content-template template-for-3 minor" data-upload-file-id="{{images[1].upload_id}}"><img src="{{images[1].sources[0]}}" title="{{images[1].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[1].sources[0]}}"></div>\n<div class="img-content-template template-for-3 minor" data-upload-file-id="{{images[2].upload_id}}"><img src="{{images[2].sources[0]}}" title="{{images[2].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[2].sources[0]}}"></div></div></div>'},90719:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="image-collection zoom-gallery"><div class="img-content-template template-for-4 main" data-upload-file-id="{{images[0].upload_id}}"><img src="{{images[0].sources[0]}}" title="{{images[0].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[0].sources[0]}}"></div><div class="template-for-4 minor-images">\n<div class="img-content-template template-for-4 minor" data-upload-file-id="{{images[1].upload_id}}"><img src="{{images[1].sources[0]}}" title="{{images[1].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[1].sources[0]}}"></div>\n<div class="img-content-template template-for-4 minor" data-upload-file-id="{{images[2].upload_id}}"><img src="{{images[2].sources[0]}}" title="{{images[2].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[2].sources[0]}}"></div>\n<div class="img-content-template template-for-4 minor" data-upload-file-id="{{images[3].upload_id}}"><img src="{{images[3].sources[0]}}" title="{{images[3].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[3].sources[0]}}"></div></div></div>'},39125:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="image-collection zoom-gallery template-for-5"><div class="img-content-wrap template-for-5 main"><div class="img-content-template template-for-5" data-upload-file-id="{{images[0].upload_id}}"><img src="{{images[0].sources[0]}}" title="{{images[0].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[0].sources[0]}}"></div><div class="img-content-template template-for-5" data-upload-file-id="{{images[1].upload_id}}"><img src="{{images[1].sources[0]}}" title="{{images[1].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[1].sources[0]}}"></div></div>\n<div class="img-content-wrap template-for-5 minor-images"><div class="img-content-template template-for-5" data-upload-file-id="{{images[2].upload_id}}"><img src="{{images[2].sources[0]}}" title="{{images[2].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[2].sources[0]}}"></div>\n<div class="img-content-template template-for-5" data-upload-file-id="{{images[3].upload_id}}"><img src="{{images[3].sources[0]}}" title="{{images[3].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[3].sources[0]}}"></div>\n<div class="img-content-template template-for-5" data-upload-file-id="{{images[4].upload_id}}"><img src="{{images[4].sources[0]}}" title="{{images[4].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[4].sources[0]}}"></div></div></div>'},20129:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="image-collection zoom-gallery template-for-6"><div class="img-content-wrap template-for-6 main-row"><div class="img-content-template template-for-6 main" data-upload-file-id="{{images[0].upload_id}}"><img src="{{images[0].sources[0]}}" title="{{images[0].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[0].sources[0]}}"></div><div class="template-for-6 minor-1"><div class="img-content-template template-for-6" data-upload-file-id="{{images[1].upload_id}}"><img src="{{images[1].sources[0]}}" title="{{images[1].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[1].sources[0]}}"></div>\n<div class="img-content-template template-for-6" data-upload-file-id="{{images[2].upload_id}}"><img src="{{images[2].sources[0]}}" title="{{images[2].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[2].sources[0]}}"></div></div></div>\n<div class="template-for-6 minor-2"><div class="img-content-template template-for-6" data-upload-file-id="{{images[3].upload_id}}"><img src="{{images[3].sources[0]}}" title="{{images[3].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[3].sources[0]}}"></div>\n<div class="img-content-template template-for-6" data-upload-file-id="{{images[4].upload_id}}"><img src="{{images[4].sources[0]}}" title="{{images[4].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[4].sources[0]}}"></div>\n<div class="img-content-template template-for-6 last-image" data-upload-file-id="{{images[5].upload_id}}"><img src="{{images[5].sources[0]}}" title="{{images[5].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[5].sources[0]}}">\n{[ if (images.length > 6) { ]}<span class="image-counter"></span>{[ for (var i=6; i < images.length; i++) {]} <div class="img-content-template hidden" data-upload-file-id="{{images[i].upload_id}}"><img src="{{images[i].sources[0]}}" title="{{images[i].description}}" class="uploaded-img-for-collage popup-img" data-mfp-src="{{images[i].sources[0]}}"></div> {[}} ]}</div></div></div>\n'},87795:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="plyr-video-container"  data-provider="html5" data-msg-video-id="{{video_id}}" data-src="{{video_src}}">\n    <div class="plyr-video-play">\n        <svg class="mdi mdi-32px mdi-svg-template" data-svgname="play"></svg>\n    </div>\n    <div class="plyr-video-playing">\n        <svg class="mdi mdi-48px mdi-svg-template" data-svgname="player-float"></svg>\n        <div class="plyr-video-playing-hint">{[print(xabber.getString("chat_message_video_playing_hint"))]}</div>\n    </div>\n    {[ if (thumbnail) {]}\n        <img class="plyr-video-poster" src="{{thumbnail}}" onerror="this.style.display=\'none\'">\n    {[}]}\n</div>'},43795:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="chat-message"> {[alert({file_url})]} </div>'},21385:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="circle-avatar ground-color-700"></div>\n<div class="chat-head-info-buttons-container">\n    <div class="contact-info">\n        <p class="contact-name one-line">{[print(xabber.getString("saved_messages__header"))]}</p>\n        <p class="one-liner"></p>\n    </div>\n    <div class="chat-tools-wrap">\n        <div class="chat-tool chat-tool-player">\n            <div class="chat-tool-player-containter">\n                <div class="chat-tool chat-tool-plyr-controls btn-previous-plyr">\n                    <i class="mdi mdi-skip-previous mdi-24px"></i>\n                </div>\n                <div class="chat-tool chat-tool-plyr-controls btn-play-pause-plyr">\n                    <i class="mdi mdi-play mdi-24px"></i>\n                    <i class="mdi mdi-pause mdi-24px"></i>\n                </div>\n                <div class="chat-tool chat-tool-plyr-controls btn-next-plyr">\n                    <i class="mdi mdi-skip-next mdi-24px"></i>\n                </div>\n                <div class="chat-tool chat-tool-plyr-controls btn-popup-plyr">\n                    <img class="player-poster hidden">\n                    <svg class="mdi mdi-32px mdi-player-type-icon mdi-svg-template" data-svgname="video"></svg>\n                    <div class="voice-message-player-avatar circle-avatar hidden"></div>\n                </div>\n                <div class="chat-tool chat-player-duration chat-tool-plyr-controls">\n                    <div class="chat-head-player-title one-line"><div class="chat-head-player-title-text">{[print(xabber.getString("chat_message_video"))]}</div></div>\n                    <div class="chat-head-player-title-bottom-container">\n                        <span class="chat-head-player-type one-line">{[print(xabber.getString("chat_message_video"))]}</span><span class="chat-head-player-type-dot"> •</span>\n                        <span class="chat-head-player-current-time">0:00</span> /\n                        <span class="chat-head-player-total-time">0:00</span>\n                    </div>\n                </div>\n                <div class="chat-tool chat-tool-plyr-controls btn-stop-plyr">\n                    <i class="mdi mdi-close mdi-16px"></i>\n                </div>\n            </div>\n        </div>\n        <div class="chat-tool btn-jingle-message">\n            <i class="mdi mdi-phone mdi-24px"></i>\n        </div>\n        <div class="chat-tool btn-chat-pin">\n            <svg class="mdi mdi-24px" viewBox="0 0 24 24">\n                <svg class="mdi mdi-24px" viewBox="0 0 24 24">\n                    <path id="tooltip-variant" fill="#9E9E9E" fill-rule="nonzero" d="M16,12V4H17V2H7V4H8V12L6,14V16H11.2V22H12.8V16H18V14L16,12Z"></path>\n                </svg>\n            </svg>\n        </div>\n        <div class="chat-tool btn-search-messages">\n            <i class="search-icon mdi mdi-24px mdi-magnify"></i>\n        </div>\n        <div class="chat-tool btn-more dropdown-button" data-activates="{{view.cid}}-more">\n            <i class="mdi mdi-24px mdi-dots-vertical"></i>\n        </div>\n        <ul id="{{view.cid}}-more" class="chat-head-menu dropdown-content noselect">\n            <li class="btn-delete-chat">\n                <span class="one-line">{[print(xabber.getString("chat_settings__button_delete_all"))]}</span>\n            </li>\n        </ul>\n    </div>\n</div>'},34054:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-header">\n    <span></span>\n    <div class="menu-wrap">\n        <div data-screen-name="image" class="menu-btn btn-library">{[print(xabber.getString("images"))]}</div>\n        <div data-screen-name="video" class="menu-btn btn-library">{[print(xabber.getString("videos"))]}</div>\n        <div data-screen-name="upload" class="menu-btn btn-upload">{[print(xabber.getString("settings__dialog_background__menu_item_upload"))]}</div>\n        <div data-screen-name="web-address" class="menu-btn btn-web-address">{[print(xabber.getString("settings__dialog_background__menu_item_url"))]}</div>\n    </div>\n</div>\n<div class="modal-content">\n    <div data-screen="image" class="screen-wrap hidden library-wrap"></div>\n    <div data-screen="video" class="screen-wrap hidden library-wrap"></div>\n    <div data-screen="upload" class="screen-wrap">\n        <div class="upload-wrap">\n            <div class="upload-text">{[print(xabber.getString("chat_bottom__drag_and_drop__text_drop_files_here"))]}</div>\n            <div class="upload-button">\n                <button type="file">{[print(xabber.getString("send_media__btn_upload"))]}</button>\n                <input type="file" multiple>\n            </div></div>\n    </div>\n    <div data-screen="web-address" class="hidden screen-wrap web-address-wrap">\n        <div class="web-address">\n            <div class="label">{[print(xabber.getString("settings__dialog_background__section_url__label"))]}</div>\n            <input class="url"/>\n        </div>\n        <div class="image-preview">\n            <img class="hidden">\n            <p>{[print(xabber.getString("settings__dialog_background__section_url__placeholder_preview"))]}</p>\n        </div>\n    </div>\n</div>\n<div class="modal-footer">\n    <button class="btn-flat btn-main text-color-700 non-active btn-add">{[print(xabber.getString("add"))]}</button>\n    <button class="btn-flat btn-main btn-dark btn-cancel">{[print(xabber.getString("cancel"))]}</button>\n    <div class="modal-preloader-wrap"></div>\n</div>'},47725:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="subscription-buttons">\n    <div class="subscription-info"></div>\n    <div class="button text-color-500 btn-add">{[print(xabber.getString("contact_add"))]}</div>\n    <div class="button btn-block">{[print(xabber.getString("contact_bar_block"))]}</div>\n    <div class="button text-color-500 btn-allow">{[print(xabber.getString("chat_allow"))]}</div>\n    <div class="button text-color-500 btn-subscribe">{[print(xabber.getString("chat_subscribe"))]}</div>\n    <i class="mdi-close btn-decline mdi mdi-24px"></i>\n</div>'},98875:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="unread-marker">\n    <div class="unread-marker-content no-select">\n        {{text}}\n    </div>\n</div>'},69006:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="roster-account-info-wrap">\n    <div class="roster-account-info ground-color-100">\n        <div class="account-indicator ground-color-700"></div>\n        <div class="circle-avatar noselect"></div>\n        <div class="text-info-wrap">\n            <p class="name text-color-900 one-line"></p>\n            <p class="jid one-line"></p>\n        </div>\n        <div class="button-divider"></div>\n    </div>\n    <div class="status-button">\n        <div class="status"></div>\n    </div>\n    <div class="roster-account-shrank-footer1 ground-color-50">\n        <div class="account-indicator ground-color-300"></div>\n    </div>\n    <div class="roster-account-shrank-footer2 ground-color-50">\n        <div class="account-indicator ground-color-300"></div>\n    </div>\n</div>\n'},23643:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="roster-account-info-wrap">\n    <div class="roster-account-info">\n        <div class="circle-avatar-wrap ground-color-500">\n            <div class="circle-avatar border-color ground-color-700 noselect"></div>\n        </div>\n        <div class="text-info-wrap">\n            <p class="name text-color-700 one-line"></p>\n            <p class="status-message text-color-700 one-line"></p>\n            <div class="roster-info">\n                <i class="mdi mdi-account-multiple-outline"></i>\n                <span class="counter"></span>\n            </div>\n        </div>\n    </div>\n    <div class="status-button">\n        <div class="status"></div>\n    </div>\n    <div class="roster-account-shrank-footer1"></div>\n    <div class="roster-account-shrank-footer2"></div>\n</div>\n'},24718:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-content-wrap">\n    <div class="modal-header">\n        <span>{[print(xabber.getString("dialog_add_contact__header"))]}</span>\n        <div class="account-dropdown-wrap" data-activates="select-account-for-add-contact">\n            <div class="dropdown-button">\n                <div class="account-item-wrap">\n                    <div class="circle-avatar noselect">\n                        <img>\n                    </div>\n                </div>\n            </div>\n            <div id="select-account-for-add-contact" class="dropdown-content noselect">\n            </div>\n        </div>\n    </div>\n    <div class="modal-content">\n        <div class="add-contact-jid-step">\n            <div class="row name-field">\n                <div class="input-field">\n                    \x3c!--<label for="new_contact_username">{[print(xabber.getString("dialog_add_contact__label_jid"))]}</label>--\x3e\n                    <input id="new_contact_username" type="text" placeholder=\'{[print(xabber.getString("dialog_add_contact__label_jid"))]}\' name="username">\n                    <span class="errors fixed"></span>\n                </div>\n            </div>\n        </div>\n        \x3c!--<div class="add-contact-contact-step">--\x3e\n            \x3c!--<div class="row name-field">--\x3e\n                \x3c!--<div class="input-field">--\x3e\n                    \x3c!--<label for="new_contact_name">{[print(xabber.getString("contact_user"))]}</label>--\x3e\n                    \x3c!--<input id="new_contact_name" type="text" placeholder=\'{[print(xabber.getString("contact_user"))]}\' name="contact_name" required>--\x3e\n                \x3c!--</div>--\x3e\n            \x3c!--</div>--\x3e\n            \x3c!--<div class="row groups-field">--\x3e\n                \x3c!--<div class="field-header">{[print(xabber.getString("contact_circle"))]}</div>--\x3e\n                \x3c!--<div class="groups checkbox-list">--\x3e\n                \x3c!--</div>--\x3e\n            \x3c!--</div>--\x3e\n        \x3c!--</div>--\x3e\n    </div>\n    <div class="modal-footer">\n        <button class="btn-flat btn-main btn-add">{[print(xabber.getString("dialog_add_contact__button_add"))]}</button>\n        <button class="btn-flat btn-main btn-dark btn-cancel">{[print(xabber.getString("dialog_add_contact__button_cancel"))]}</button>\n    </div>\n</div>\n'},31238:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="account-item-wrap property-variant" data-jid="{{jid}}">\n    <div class="circle-avatar noselect">\n        <img>\n    </div>\n    <div class="name-wrap">\n        <div class="name one-line">{{name}}</div>\n        <div class="jid one-line">{{jid}}</div>\n    </div>\n</div>\n'},49820:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="waveform" id="{{waveform_id}}"></div>\n<div class="audio-control-panel">\n    <div class="audio-control-time">\n        <span class="voice-msg-current-time">0:00</span> /\n        <span class="voice-msg-total-time">0:00</span>\n    </div>\n    <input value="50" type="range" class="voice-message-volume">\n</div>'},73253:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div data-jid="{{jid}}" class="blocked-contact">\n    <div class="input-field checkbox-field">\n        <input type="checkbox" class="filled-in" id="blocked-jid-switch-{{jid}}"/>\n        <label for="blocked-jid-switch-{{jid}}">{{jid}}</label>\n    </div>\n</div>'},38624:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="panel-background-clickable"></div>\n<div class="panel-content-wrap noselect">\n    <div class="header-buttons">\n        <div class="btn-escape">\n            <i class="mdi mdi-24px mdi-close"></i>\n            <span class="btn-text">{[print(xabber.getString("button_esc"))]}</span>\n        </div>\n        <span class="block-name">{[print(xabber.getString("contact_viewer"))]}</span>\n        <span class="block-name second-text"></span>\n        <div class="btn-qr-code">\n            <svg class="mdi mdi-24px mdi-svg-template" data-svgname="qrcode"></svg>\n        </div>\n        <div class="btn-edit">\n            <svg class="mdi mdi-24px mdi-svg-template" data-svgname="edit-outline"></svg>\n        </div>\n    </div>\n    <div class="main-info">\n        <div class="avatar-wrap">\n            <div class="circle-avatar"></div>\n        </div>\n        <div class="text-info">\n            <div class="name-wrap contact-details-name-wrap one-line"></div>\n        </div>\n    </div>\n    <div class="buttons-wrap sticky-details-wrap">\n        <div class="button-wrap btn-voice-call-wrap">\n            <div class="contact-btn btn-voice-call  fill-color-500"><svg class="mdi mdi-24px mdi-svg-template" data-svgname="call"></svg></div>\n            <div class="btn-name">{[print(xabber.getString("contact_bar_call"))]}</div>\n        </div>\n        <div class="button-wrap btn-search-messages">\n            <div class="contact-btn btn-search fill-color-500"><svg class="mdi mdi-24px mdi-svg-template" data-svgname="search"></svg></div>\n            <div class="btn-name">{[print(xabber.getString("search"))]}</div>\n        </div>\n        <div class="button-wrap btn-mute-wrap">\n            <div class="contact-btn btn-mute dropdown-button fill-color-500" data-activates="{{view.cid}}-more"><svg class="mdi mdi-24px mdi-svg-template" data-svgname="bell"></svg></div>\n            <div class="btn-name">{[print(xabber.getString("contact_bar_notifications"))]}</div>\n\n            <ul id="{{view.cid}}-more" class="contact-mute-dropdown dropdown-content noselect">\n                <li class="btn-unmute-dropdown">\n                    <span class="one-line">{[print(xabber.getString("unmute_chat"))]}</span>\n                </li>\n                <li class="btn-mute-dropdown" data-mute="minutes15">\n                    <span class="one-line">{[print(xabber.getString("mute_15_min"))]}</span>\n                </li>\n                <li class="btn-mute-dropdown" data-mute="hours1">\n                    <span class="one-line">{[print(xabber.getString("mute_1_hour"))]}</span>\n                </li>\n                <li class="btn-mute-dropdown" data-mute="hours2">\n                    <span class="one-line">{[print(xabber.getString("mute_2_hours"))]}</span>\n                </li>\n                <li class="btn-mute-dropdown" data-mute="day">\n                    <span class="one-line">{[print(xabber.getString("mute_1_day"))]}</span>\n                </li>\n                <li class="btn-mute-dropdown" data-mute="forever">\n                    <span class="one-line">{[print(xabber.getString("mute_forever"))]}</span>\n                </li>\n            </ul>\n        </div>\n        <div class="button-wrap btn-block-wrap">\n            <div class="contact-btn btn-block fill-color-500"><svg class="mdi mdi-24px mdi-svg-template" data-svgname="cancel"></svg></div>\n            <div class="btn-name text-color-500">{[print(xabber.getString("contact_bar_block"))]}</div>\n        </div>\n    </div>\n    <div class="panel-content private-chat">\n        <div class="block-wrap vcard">\n        </div>\n        <div class="block-wrap groups-block-wrap"></div>\n        <div class="block-wrap edit-block-wrap"></div>\n        <div class="block-wrap search-messages-block-wrap"></div>\n    </div>\n    <ul class="tabs bottom-block-tabs">\n        <li data-value="image" class="list-variant tab"><a class="text-color-700">{[print(xabber.getString("images"))]}</a></li>\n        <li data-value="video" class="list-variant tab"><a class="text-color-700">{[print(xabber.getString("videos"))]}</a></li>\n        <li data-value="files" class="list-variant tab"><a class="text-color-700">{[print(xabber.getString("files"))]}</a></li>\n        <li data-value="voice" class="list-variant tab"><a class="text-color-700">{[print(xabber.getString("vcard_type_voice"))]}</a></li>\n    </ul>\n    <div class="panel-content private-chat">\n        <div class="bottom-block">\n            <div class="block-wrap participants-wrap"></div>\n        </div>\n    </div>\n</div>'},24958:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="circle-avatar noselect"></div>\n<div class="text-info-wrap">\n    <div class="name-wrap">\n        <p class="name one-line"></p>\n    </div>\n    <p class="jid one-line"></p>\n</div>\n<div class="status hide-offline"></div>\n<div class="chat-icon hidden"></div>'},19768:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="text">{[print(xabber.getString("contact_list__placeholder"))]}</div>\n'},72055:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="circle-avatar noselect"></div>\n<div class="text-info-wrap">\n    <p class="name one-line"></p>\n    <p class="jid one-line hidden"></p>\n    <p class="status-message one-line"></p>\n</div>\n<div class="status hide-offline"></div>\n<div class="chat-icon hidden"></div>\n'},45078:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='\n<div class="edit-wrap">\n    <div class="edit-header block-header">\n        <i class="details-icon btn-back mdi mdi-24px mdi-arrow-left"></i>\n        <span class="block-name">{[print(xabber.getString("edit_vcard"))]}</span>\n    </div>\n    <div class="edit-contact">\n        <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="account-outline"></svg></div>\n        <div class="name-wrap"></div>\n    </div>\n    <div class="subscription-statuses">\n        <div class="status-out subscription-status-wrap dropdown-button" data-activates="{{view.cid}}-status-out">\n            <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="subscription-to"></svg></div>\n            <div class="info">\n                <div class="value dotted-underline one-line"></div>\n            </div>\n        </div>\n        <div id="{{view.cid}}-status-out" class="status-out-dropdown dropdown-content noselect">\n            <div class="btn-request property-variant hidden">\n                <div class="one-line">{[print(xabber.getString("contact_subscription_request_subscription"))]}</div>\n            </div>\n            <div class="btn-cancel-request property-variant hidden">\n                <div class="one-line">{[print(xabber.getString("contact_subscription_cancel_request_subscription"))]}</div>\n            </div>\n            <div class="btn-cancel-subscription-out property-variant hidden">\n                <div class="one-line">{[print(xabber.getString("contact_subscription_cancel_subscribe"))]}</div>\n            </div>\n        </div>\n        <div class="status-in subscription-status-wrap dropdown-button" data-activates="{{view.cid}}-status-in">\n            <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="subscription-from"></svg></div>\n            <div class="info">\n                <div class="value dotted-underline one-line"></div>\n            </div>\n        </div>\n        <div id="{{view.cid}}-status-in" class="status-in-dropdown dropdown-content noselect">\n            <div class="btn-allow property-variant hidden">\n                <div class="one-line">{[print(xabber.getString("contact_subscription_allow_subscription"))]}</div>\n            </div>\n            <div class="btn-allow-request property-variant hidden">\n                <div class="one-line">{[print(xabber.getString("contact_subscription_allow_subscription"))]}</div>\n            </div>\n            <div class="btn-disallow-request property-variant hidden">\n                <div class="one-line">{[print(xabber.getString("decline"))]}</div>\n            </div>\n            <div class="btn-disallow-preapproved property-variant hidden">\n                <div class="one-line">{[print(xabber.getString("contact_subscription_disallow_subscription"))]}</div>\n            </div>\n            <div class="btn-cancel-subscription-in property-variant hidden">\n                <div class="one-line">{[print(xabber.getString("contact_subscription_cancel_subscription"))]}</div>\n            </div>\n        </div>\n        <div class="status-description subscription-status-wrap">\n            <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="information-outline"></svg></div>\n            <div class="info">\n                <div class="value"></div>\n            </div>\n        </div>\n    </div>\n    <div class="edit-buttons">\n        <div class="edit-button btn-delete">\n            <div class="details-icon-wrap"><i class="details-icon mdi mdi-24px mdi-delete text-color-500"></i></div>\n            <div class="edit-button-text ">\n                <span class="text-color-500 dotted-underline text-decoration-color-300 one-line">{[print(xabber.getString("contact_delete_full"))]}</span>\n            </div>\n        </div>\n    </div>\n</div>'},4679:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='\n<div class="edit-wrap">\n    <div class="edit-save-preloader preloader-wrap">\n        <div class="preloader-wrapper preloader-17px visible">\n            <div class="spinner-layer">\n                <div class="circle-clipper left">\n                    <div class="circle"></div>\n                </div>\n                <div class="gap-patch">\n                    <div class="circle"></div>\n                </div>\n                <div class="circle-clipper right">\n                    <div class="circle"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="edit-header main-edit-header block-header">\n        <i class="details-icon btn-back mdi mdi-24px mdi-arrow-right"></i>\n        <span class="block-name"></span>\n        <div class="btn-edit">\n            <svg class="mdi mdi-24px mdi-svg-template" data-svgname="edit-outline"></svg>\n        </div>\n    </div>\n    <div class="edit-group-wrap">\n        <div class="edit-group vcard">\n            <div class="info-wrap description-info-wrap">\n                <div class="details-icon-wrap">\n                    <svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="description-outline"></svg>\n                </div>\n                <div class="info-hover">\n                    <div class="info description">\n                        <div class="edit-group-name value"></div>\n                        <div class="edit-group-description value"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="description-edit-wrap hidden">\n            <div class="edit-header property-header description-header block-header">\n                <i class="details-icon btn-property-back btn-back mdi mdi-24px mdi-arrow-right"></i>\n                <span class="block-name">{[print(xabber.getString("groupchat_properties"))]}</span>\n                <span class="block-name second-text fade-out"></span>\n                <button class="btn-save btn-flat text-color-500 btn-main fade-out">{[print(xabber.getString("save"))]}</button>\n            </div>\n            <div class="main-info">\n                <div class="avatar-wrap">\n                    <div class="circle-avatar dropdown-button" data-activates="{{view.cid}}-group-image">\n                        <input class="hidden" title=\'{[print(xabber.getString("groupchat_member_edit_change_avatar"))]}\' type="file"/>\n                        <svg class="set-groupchat-avatar" viewBox="0 0 24 24">\n                            <path d="M4,4H7L9,2H15L17,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9Z" />\n                        </svg>\n                        <div class="preloader-wrap">\n                            <div class="preloader-wrapper preloader-32px visible">\n                                <div class="spinner-layer">\n                                    <div class="circle-clipper left">\n                                        <div class="circle"></div>\n                                    </div>\n                                    <div class="gap-patch">\n                                        <div class="circle"></div>\n                                    </div>\n                                    <div class="circle-clipper right">\n                                        <div class="circle"></div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div id="{{view.cid}}-group-image" class="profile-image-dropdown bootstrap-dropdown dropdown-content noselect">\n                        <div class="btn-emoji-panel property-variant">\n                            {[print(xabber.getString("account_emoji_profile_image_button"))]}\n                        </div>\n                        <div class="btn-selfie property-variant">\n                            {[print(xabber.getString("account_webcam_profile_image_button"))]}\n                        </div>\n                        <div class="btn-choose-image property-variant">\n                            {[print(xabber.getString("account_profile_image_button"))]}\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="edit-group">\n                <div class="edit-group-name-wrap"></div>\n                <div class="edit-group-description-wrap"></div>\n            </div>\n        </div>\n        <div class="edit-properties">\n            <div class="group-property membership-property">\n                <div class="details-icon-wrap" ><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="membership-outline"></svg></div>\n                <div class="group-property-text dotted-underline">\n                    {[print(xabber.getString("groupchat_membership"))]}\n                    <span></span>\n                </div>\n            </div>\n            <div class="group-property index-property">\n                <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="index"></svg></div>\n                <div class="group-property-text dotted-underline">\n                    {[print(xabber.getString("groupchat_index"))]}\n                    <span></span>\n                </div>\n            </div>\n            <div class="edit-button btn-default-restrictions">\n                <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="restrictions-outline"></svg></div>\n                <div class="edit-button-text">\n                    <span class="one-line dotted-underline">{[print(xabber.getString("groupchat_default_restrictions"))]}</span>\n                    <span class="edit-button-value"></span>\n                </div>\n            </div>\n        </div>\n        <div class="membership-property-edit-wrap hidden">\n            <div class="edit-header property-header block-header">\n                <i class="details-icon btn-property-back btn-back mdi mdi-24px mdi-arrow-right"></i>\n                <span class="block-name">{[print(xabber.getString("groupchat_membership"))]}</span>\n                <span class="block-name second-text fade-out"></span>\n                <button class="btn-save btn-flat text-color-500 btn-main fade-out">{[print(xabber.getString("save"))]}</button>\n            </div>\n            <div class="property-wrap membership-field">\n                <div class="property-radio">\n                    <input id="open" name="membership-property-input" type="radio" class="with-gap" required="">\n                    <label class="property-label" for="open">{[print(xabber.getString("groupchat_membership_type_open"))]}</label>\n                </div>\n                <div class="property-radio">\n                    <input id="member-only" name="membership-property-input" type="radio" class="with-gap" required="">\n                    <label class="property-label" for="member-only">{[print(xabber.getString("groupchat_membership_type_members_only"))]}</label>\n                </div>\n            </div>\n            <div class="property-description">{[print(xabber.getString("groupchat_membership_description"))]}</div>\n        </div>\n        <div class="index-property-edit-wrap hidden">\n            <div class="edit-header property-header block-header">\n                <i class="details-icon btn-property-back btn-back mdi mdi-24px mdi-arrow-right"></i>\n                <span class="block-name">{[print(xabber.getString("groupchat_index"))]}</span>\n                <span class="block-name second-text fade-out"></span>\n                <button class="btn-save btn-flat text-color-500 btn-main fade-out">{[print(xabber.getString("save"))]}</button>\n            </div>\n            <div class="property-wrap index-field">\n                <div class="property-radio">\n                    <input id="none" name="index-property-input" type="radio" class="with-gap" required="">\n                    <label class="property-label" for="none">{[print(xabber.getString("groupchat_index_type_none"))]}</label>\n                </div>\n                <div class="property-radio">\n                    <input id="local" name="index-property-input" type="radio" class="with-gap" required="">\n                    <label class="property-label" for="local">{[print(xabber.getString("groupchat_index_type_local"))]}</label>\n                </div>\n                <div class="property-radio">\n                    <input id="global" name="index-property-input" type="radio" class="with-gap" required="">\n                    <label class="property-label" for="global">{[print(xabber.getString("groupchat_index_type_global"))]}</label>\n                </div>\n            </div>\n            <div class="property-description">{[print(xabber.getString("groupchat_index_description"))]}</div>\n        </div>\n        <div class="bottom-block edit-bottom-block">\n            <div class="edit-pictured-buttons">\n                <div data-value="invitations" class="list-variant invitations-variant">\n                    <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="invite-outline"></svg></div>\n                    <div class="variant-text dotted-underline">{[print(xabber.getString("groupchat_invitations"))]}<span class="counted"></span></div>\n                </div>\n                <div data-value="blocked" class="list-variant blocked-variant">\n                    <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="cancel"></svg></div>\n                    <div class="variant-text dotted-underline">{[print(xabber.getString("group_settings__block_list__header"))]}<span class="counted"></span></div>\n                </div>\n            </div>\n            <i class="details-icon participants-edit-back btn-back-panel mdi mdi-24px mdi-arrow-right"></i>\n            <span class="block-name-panel"></span>\n            <span class="block-name-panel second-text fade-out">{[print(xabber.getString("groupchat_selected"))]} <span></span></span>\n            <div class="btn-add-block">\n                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="blocked-add"></svg>\n            </div>\n            <i class="mdi mdi-24px mdi-account-multiple-plus btn-invite"></i>\n            <button class="btn-remove-selected btn-flat btn-main fade-out">{[print(xabber.getString("groupchat_revoke"))]}</button>\n            <div class="block-wrap participants-edit-wrap"></div>\n        </div>\n        <div class="edit-buttons">\n            <div class="edit-button btn-clear-history-chat">\n                <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="history"></svg></div>\n                <div class="edit-button-text">\n                    <span class="one-line dotted-underline">{[print(xabber.getString("clear_history"))]}</span>\n                </div>\n            </div>\n            <div class="edit-button btn-delete-group">\n                <div class="details-icon-wrap"><i class="details-icon mdi mdi-24px mdi-delete text-color-500"></i></div>\n                <div class="edit-button-text">\n                    <span class="text-color-500 one-line text-decoration-color-300 dotted-underline">{[print(xabber.getString("group_settings__button_delete_group"))]}</span>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="subscription-statuses subscription-statuses-group">\n        <div class="status-out subscription-status-wrap dropdown-button" data-activates="{{view.cid}}-status-out">\n            <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="subscription-to"></svg></div>\n            <div class="info">\n                <div class="value dotted-underline one-line"></div>\n            </div>\n        </div>\n        <div id="{{view.cid}}-status-out" class="status-out-dropdown dropdown-content noselect">\n            <div class="btn-request property-variant hidden">\n                <div class="one-line">{[print(xabber.getString("contact_subscription_request_subscription"))]}</div>\n            </div>\n            <div class="btn-cancel-request property-variant hidden">\n                <div class="one-line">{[print(xabber.getString("contact_subscription_cancel_request_subscription"))]}</div>\n            </div>\n            <div class="btn-cancel-subscription-out property-variant hidden">\n                <div class="one-line">{[print(xabber.getString("contact_subscription_cancel_subscribe"))]}</div>\n            </div>\n        </div>\n        <div class="status-in subscription-status-wrap dropdown-button" data-activates="{{view.cid}}-status-in">\n            <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="subscription-from"></svg></div>\n            <div class="info">\n                <div class="value dotted-underline one-line"></div>\n            </div>\n        </div>\n        <div id="{{view.cid}}-status-in" class="status-in-dropdown dropdown-content noselect">\n            <div class="btn-allow property-variant hidden">\n                <div class="one-line">{[print(xabber.getString("contact_subscription_allow_subscription"))]}</div>\n            </div>\n            <div class="btn-allow-request property-variant hidden">\n                <div class="one-line">{[print(xabber.getString("contact_subscription_allow_subscription"))]}</div>\n            </div>\n            <div class="btn-disallow-request property-variant hidden">\n                <div class="one-line">{[print(xabber.getString("decline"))]}</div>\n            </div>\n            <div class="btn-disallow-preapproved property-variant hidden">\n                <div class="one-line">{[print(xabber.getString("contact_subscription_disallow_subscription"))]}</div>\n            </div>\n            <div class="btn-cancel-subscription-in property-variant hidden">\n                <div class="one-line">{[print(xabber.getString("contact_subscription_cancel_subscription"))]}</div>\n            </div>\n        </div>\n        <div class="status-description subscription-status-wrap">\n            <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="information-outline"></svg></div>\n            <div class="info">\n                <div class="value"></div>\n            </div>\n        </div>\n    </div>\n</div>'},37639:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="block-form">\n    <div class="input-field">\n        <input id="blocking_id" class="rich-textarea field-input" placeholder="{[print(xabber.getString(\'vcard_jabber_id\'))]}" type="text" name="title">\n    </div>\n    <button class="btn-block-id btn btn-main-filled ground-color-700">{[print(xabber.getString("contact_bar_block"))]}</button>\n</div>'},11868:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-content">\n    <div class="textarea-header">{[print(xabber.getString("groupchat_member_badge"))]}</div>\n    <div class="rich-textarea badge-text" tabindex="1" contenteditable></div>\n    <div class="error"></div>\n</div>\n<div class="panel-footer noselect">\n    <div class="buttons-wrap">\n        <div class="insert-emoticon">\n            <i class="mdi mdi-24px mdi-emoticon hover-text-color-500"></i>\n        </div>\n        <div class="emoticons-panel-wrap">\n            <div class="emoticons-panel"></div>\n            <div class="emoji-menu"></div>\n        </div>\n        <button class="btn-save btn-flat btn-main">{[print(xabber.getString("save"))]}</button>\n        <button class="btn-cancel btn-flat btn-main btn-dark">{[print(xabber.getString("cancel"))]}</button>\n    </div>\n</div>'},87004:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-header"><div class="panel-header black-text">{[print(xabber.getString("groupchat_default_restrictions"))]}</div></div>\n<div class="modal-content">\n    <div class="default-restrictions-list-wrap"></div>\n    <p class="default-restrictions-info">{[print(xabber.getString("dialog_default_restrictions__placeholder"))]}</p>\n</div>\n<div class="modal-footer">\n    <div class="buttons-wrap">\n        <button class="btn-default-restrictions-save btn-flat btn-main non-active">{[print(xabber.getString("save"))]}</button>\n        <button class="btn-default-restrictions-cancel btn-flat btn-main btn-dark">{[print(xabber.getString("cancel"))]}</button>\n    </div>\n</div>'},59115:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="restrictions-wrap">\n    <div class="restrictions-header block-header">\n        <i class="details-icon btn-back mdi mdi-24px mdi-arrow-right"></i>\n        <span class="block-name">{[print(xabber.getString("groupchat_default_restrictions"))]}</span>\n        <span class="block-name second-text fade-out"></span>\n        <button class="btn-default-restrictions-save text-color-500 btn-flat btn-main fade-out">{[print(xabber.getString("save"))]}</button>\n        <div class="edit-save-preloader preloader-wrap">\n            <div class="preloader-wrapper preloader-17px visible">\n                <div class="spinner-layer">\n                    <div class="circle-clipper left">\n                        <div class="circle"></div>\n                    </div>\n                    <div class="gap-patch">\n                        <div class="circle"></div>\n                    </div>\n                    <div class="circle-clipper right">\n                        <div class="circle"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="restrictions-content edit-default-restrictions">\n        <div class="default-restrictions-list-wrap"></div>\n        <p class="default-restrictions-info">{[print(xabber.getString("dialog_default_restrictions_right__placeholder"))]}</p>\n    </div>\n</div>\n'},49080:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="input-widget-wrap {{field_name}}-wrap">\n    <div class="{{field_name}}-input-wrap">\n        <textarea class="{{field_name}}-input rich-textarea field-input" type="{{field_type}}" placeholder="{{placeholder}}"></textarea>\n    </div>\n</div>\n'},79481:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="media-item">\n</div>'},69426:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="panel-content-wrap noselect">\n    <div class="main-info">\n        <div class="avatar-wrap">\n            <div class="circle-avatar">\n                <input title=\'{[print(xabber.getString("groupchat_member_edit_change_avatar"))]}\' type="file"/>\n                <svg class="set-groupchat-avatar" viewBox="0 0 24 24">\n                    <path d="M4,4H7L9,2H15L17,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9Z" />\n                </svg>\n                <div class="preloader-wrap"><div class="preloader-wrapper preloader-32px visible">\n                    <div class="spinner-layer">\n                        <div class="circle-clipper left">\n                            <div class="circle"></div>\n                        </div>\n                        <div class="gap-patch">\n                            <div class="circle"></div>\n                        </div>\n                        <div class="circle-clipper right">\n                            <div class="circle"></div>\n                        </div>\n                    </div>\n                </div>\n                </div>\n            </div>\n        </div>\n        <div class="text-info">\n            <div class="name-wrap"></div>\n            <div class="status-message one-line"></div>\n        </div>\n        <div class="btn-more dropdown-button" data-activates="{{view.cid}}-buttons-wrap">\n            <i class="mdi mdi-24px mdi-dots-vertical"></i>\n        </div>\n        <ul class="buttons-menu-wrap dropdown-content noselect" id="{{view.cid}}-buttons-wrap">\n            <li class="btn-qr-code"><span class="one-line">{[print(xabber.getString("contact_settings__button_show_qr_code"))]}</span></li>\n            <li class="btn-edit-settings"><span class="one-line">{[print(xabber.getString("groupchat_settings"))]}</span></li>\n            <li class="btn-default-restrictions"><span class="one-line">{[print(xabber.getString("groupchat_default_restrictions"))]}</span></li>\n            <li class="btn-delete-group"><span class="one-line">{[print(xabber.getString("group_settings__button_delete_group"))]}</span></li>\n        </ul>\n        <div class="btn-escape">\n            <i class="mdi mdi-24px mdi-close"></i>\n            <span class="btn-text">{[print(xabber.getString("button_esc"))]}</span>\n        </div>\n        <div class="buttons-wrap">\n            <div class="button-wrap btn-chat-wrap">\n                <i class="mdi mdi-24px mdi-message-text btn-chat"></i>\n                <div class="btn-name">{[print(xabber.getString("contact_bar_chat"))]}</div>\n            </div>\n            <div class="button-wrap btn-invite-wrap">\n                <i class="mdi mdi-24px mdi-account-multiple-plus btn-invite"></i>\n                <div class="btn-name">{[print(xabber.getString("groupchat_bar_invite"))]}</div>\n            </div>\n            <div class="button-wrap btn-mute-wrap">\n                <i class="mdi mdi-24px mdi-bell btn-mute"></i>\n                <div class="btn-name">{[print(xabber.getString("contact_bar_notifications"))]}</div>\n            </div>\n            <div class="button-wrap btn-leave-wrap">\n                <div class="btn-leave"><svg viewBox="0 0 24 24">\n                    <path d="M13.34,8.17C12.41,8.17 11.65,7.4 11.65,6.47A1.69,1.69 0 0,1 13.34,4.78C14.28,4.78 15.04,5.54 15.04,6.47C15.04,7.4 14.28,8.17 13.34,8.17M10.3,19.93L4.37,18.75L4.71,17.05L8.86,17.9L10.21,11.04L8.69,11.64V14.5H7V10.54L11.4,8.67L12.07,8.59C12.67,8.59 13.17,8.93 13.5,9.44L14.36,10.79C15.04,12 16.39,12.82 18,12.82V14.5C16.14,14.5 14.44,13.67 13.34,12.4L12.84,14.94L14.61,16.63V23H12.92V17.9L11.14,16.21L10.3,19.93M21,23H19V3H6V16.11L4,15.69V1H21V23M6,23H4V19.78L6,20.2V23Z" />\n                </svg>\n                </div>\n                <div class="btn-name">{[print(xabber.getString("groupchat_bar_leave"))]}</div>\n            </div>\n        </div>\n    </div>\n    <div class="panel-content">\n        <div class="head-block">\n            <div class="left-column">\n                <div class="block-wrap group-chat-properties-wrap"></div>\n            </div>\n            <div class="right-column">\n                <div class="block-wrap status-block-wrap"></div>\n                <div class="block-wrap groups-block-wrap"></div>\n            </div>\n        </div>\n        <div class="bottom-block">\n            <ul class="tabs">\n                <li data-value="participants" class="list-variant tab"><a class="text-color-700">{[print(xabber.getString("group_settings__members_list__header"))]}</a></li>\n                <li data-value="invitations" class="list-variant tab"><a class="text-color-700">{[print(xabber.getString("groupchat_invitations"))]}</a></li>\n                <li data-value="blocked" class="list-variant tab"><a class="text-color-700">{[print(xabber.getString("group_settings__block_list__header"))]}</a></li>\n            </ul>\n            <div class="block-wrap participants-wrap"></div>\n        </div>\n    </div>\n</div>\n'},18939:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="panel-background-clickable"></div>\n<div class="panel-content-wrap noselect">\n    <div class="header-buttons">\n        <div class="btn-escape">\n            <i class="mdi mdi-24px mdi-close"></i>\n            <span class="btn-text">{[print(xabber.getString("button_esc"))]}</span>\n        </div>\n        <span class="block-name">{[print(xabber.getString("groupchat_group"))]}</span>\n        <span class="block-name second-text"></span>\n        <div class="btn-qr-code">\n            <svg class="mdi mdi-24px mdi-svg-template" data-svgname="qrcode"></svg>\n        </div>\n        <div class="btn-edit">\n            <svg class="mdi mdi-24px mdi-svg-template" data-svgname="information-outline"></svg>\n        </div>\n        <div class="group-edit-preloader">\n        </div>\n    </div>\n    <div class="main-info">\n        <div class="avatar-wrap">\n            <div class="circle-avatar">\n                <div class="preloader-wrap"><div class="preloader-wrapper preloader-32px visible">\n                    <div class="spinner-layer">\n                        <div class="circle-clipper left">\n                            <div class="circle"></div>\n                        </div>\n                        <div class="gap-patch">\n                            <div class="circle"></div>\n                        </div>\n                        <div class="circle-clipper right">\n                            <div class="circle"></div>\n                        </div>\n                    </div>\n                </div>\n                </div>\n            </div>\n        </div>\n        <div class="text-info">\n            <div class="name-wrap"></div>\n        </div>\n    </div>\n    <div class="buttons-wrap sticky-details-wrap">\n        <div class="button-wrap btn-invite-wrap">\n            <i class="mdi mdi-24px mdi-account-multiple-plus btn-invite text-color-500"></i>\n            <div class="btn-name">{[print(xabber.getString("groupchat_bar_invite"))]}</div>\n        </div>\n        <div class="button-wrap btn-search-messages">\n            <div class="contact-btn btn-search fill-color-500"><svg class="mdi mdi-24px mdi-svg-template" data-svgname="search"></svg></div>\n            <div class="btn-name">{[print(xabber.getString("search"))]}</div>\n        </div>\n        <div class="button-wrap btn-mute-wrap">\n            <div class="contact-btn btn-mute dropdown-button fill-color-500" data-activates="{{view.cid}}-more"><svg class="mdi mdi-24px mdi-svg-template" data-svgname="bell"></svg></div>\n            <div class="btn-name">{[print(xabber.getString("contact_bar_notifications"))]}</div>\n\n            <ul id="{{view.cid}}-more" class="contact-mute-dropdown dropdown-content noselect">\n                <li class="btn-mute-dropdown" data-mute="minutes15">\n                    <span class="one-line">{[print(xabber.getString("mute_15_min"))]}</span>\n                </li>\n                <li class="btn-mute-dropdown" data-mute="hours1">\n                    <span class="one-line">{[print(xabber.getString("mute_1_hour"))]}</span>\n                </li>\n                <li class="btn-mute-dropdown" data-mute="hours2">\n                    <span class="one-line">{[print(xabber.getString("mute_2_hours"))]}</span>\n                </li>\n                <li class="btn-mute-dropdown" data-mute="day">\n                    <span class="one-line">{[print(xabber.getString("mute_1_day"))]}</span>\n                </li>\n                <li class="btn-mute-dropdown" data-mute="forever">\n                    <span class="one-line">{[print(xabber.getString("mute_forever"))]}</span>\n                </li>\n            </ul>\n        </div>\n        <div class="button-wrap btn-leave-wrap">\n            <div class="contact-btn btn-leave fill-color-500">\n                <svg viewBox="0 0 24 24">\n                    <path d="M13.34,8.17C12.41,8.17 11.65,7.4 11.65,6.47A1.69,1.69 0 0,1 13.34,4.78C14.28,4.78 15.04,5.54 15.04,6.47C15.04,7.4 14.28,8.17 13.34,8.17M10.3,19.93L4.37,18.75L4.71,17.05L8.86,17.9L10.21,11.04L8.69,11.64V14.5H7V10.54L11.4,8.67L12.07,8.59C12.67,8.59 13.17,8.93 13.5,9.44L14.36,10.79C15.04,12 16.39,12.82 18,12.82V14.5C16.14,14.5 14.44,13.67 13.34,12.4L12.84,14.94L14.61,16.63V23H12.92V17.9L11.14,16.21L10.3,19.93M21,23H19V3H6V16.11L4,15.69V1H21V23M6,23H4V19.78L6,20.2V23Z" />\n                </svg>\n            </div>\n            <div class="btn-name text-color-500">{[print(xabber.getString("groupchat_bar_leave"))]}</div>\n        </div>\n    </div>\n    <div class="panel-content">\n        <div class="block-wrap group-chat-properties-wrap vcard"></div>\n        <div class="block-wrap status-block-wrap"></div>\n        <div class="block-wrap edit-block-wrap"></div>\n        <div class="block-wrap restrictions-block-wrap"></div>\n        <div class="block-wrap groups-block-wrap"></div>\n        <div class="block-wrap search-messages-block-wrap"></div>\n        <div class="block-wrap participant-view-wrap"></div>\n    </div>\n    <ul class="tabs not-edit bottom-block-tabs">\n        <li data-value="participants" class="list-variant tab"><a class="text-color-700">{[print(xabber.getString("group_settings__members_list__header"))]}</a></li>\n        <li data-value="image" class="list-variant tab"><a class="text-color-700">{[print(xabber.getString("images"))]}</a></li>\n        <li data-value="video" class="list-variant tab"><a class="text-color-700">{[print(xabber.getString("videos"))]}</a></li>\n        <li data-value="files" class="list-variant tab"><a class="text-color-700">{[print(xabber.getString("files"))]}</a></li>\n        <li data-value="voice" class="list-variant tab"><a class="text-color-700">{[print(xabber.getString("vcard_type_voice"))]}</a></li>\n    </ul>\n    <div class="panel-content">\n        <div class="bottom-block">\n            <div class="block-wrap participants-wrap"></div>\n        </div>\n    </div>\n</div>\n'},15159:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="block-header">\n    <span class="block-name"></span>\n    <span class="btn-edit-settings">{[print(xabber.getString("group_settings__properties__button_edit"))]}</span>\n</div>\n<div class="group-chat-properties vcard">\n    <div class="info-wrap jid-info-wrap">\n        <div title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\' class="details-icon-wrap">\n            <svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="xmpp"></svg>\n        </div>\n        <div class="info jabber-id">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("group_settings__properties__label_jid"))]}</div>\n        </div>\n    </div>\n    <div class="info-wrap name-info-wrap">\n        <i title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\' class="details-icon mdi mdi-24px mdi-account-box-outline"></i>\n        <div class="info name">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("groupchat_name"))]}</div>\n        </div>\n    </div>\n    <div class="info-wrap description-info-wrap">\n        <i title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\' class="details-icon mdi mdi-24px mdi-file-document-box"></i>\n        <div class="info description">\n            <div class="value"></div>\n            <div class="label">{[print(xabber.getString("groupchat_description"))]}</div>\n        </div>\n    </div>\n    <div class="info-wrap searchable-info-wrap">\n        <svg class="details-icon toolbar-icon mdi mdi-24px" viewBox="0 0 24 24">\n            <path title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\' d="M15.5,12C18,12 20,14 20,16.5C20,17.38 19.75,18.21 19.31,18.9L22.39,22L21,23.39L17.88,20.32C17.19,20.75 16.37,21 15.5,21C13,21 11,19 11,16.5C11,14 13,12 15.5,12M15.5,14A2.5,2.5 0 0,0 13,16.5A2.5,2.5 0 0,0 15.5,19A2.5,2.5 0 0,0 18,16.5A2.5,2.5 0 0,0 15.5,14M19.35,8.03C21.95,8.22 24,10.36 24,13C24,14.64 23.21,16.1 22,17V16.5A6.5,6.5 0 0,0 15.5,10A6.5,6.5 0 0,0 9,16.5C9,17 9.06,17.5 9.17,18H6A6,6 0 0,1 0,12C0,8.9 2.34,6.36 5.35,6.03C6.6,3.64 9.11,2 12,2C15.64,2 18.67,4.59 19.35,8.03Z"></path>\n        </svg>\n        <div class="info searchable">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("group_settings__properties__label_indexed"))]}</div>\n        </div>\n    </div>\n    <div class="info-wrap model-info-wrap">\n        <i title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\' class="details-icon mdi mdi-24px mdi-lock"></i>\n        <div class="info model">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("groupchat_membership"))]}</div>\n        </div>\n    </div>\n</div>'},20904:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-header"><div class="panel-header black-text">{[if (privacy) { print(xabber.getString("incognito_group_settings__header"))} else { print(xabber.getString("public_group_settings__header"))}]}</div></div>\n<div class="modal-content group-chat-properties-wrap selectable-text">\n    <div class="property-wrap jid-info-wrap">\n        <div class="property-header">{[print(xabber.getString("hint_xmpp_id"))]}</div>\n        <div class="jabber-id">\n            <div class="value one-line">{{jid}}</div>\n        </div>\n        <p id="anonymous-public" class="property-description hidden">{[print(xabber.getString("group_settings_edit__setting_privacy__text_public"))]}</p>\n        <p id="anonymous-incognito" class="property-description hidden">{[print(xabber.getString("group_settings_edit__setting_privacy__text_incognito"))]}</p>\n    </div>\n    {[fields.forEach(function (field) { if (field.type === \'hidden\' || field.type === \'jid-multi\') return;]}\n    <div class="property-wrap {{field.var}}-field">\n        {[if (!(field.type == \'fixed\' && field.values[0] === "")) {]}\n        <div class="property-header">{{field.label}}</div>\n        {[}]}\n        {[if (field.type === \'text-single\') {]}\n        <div class="input-field input-group-chat-name">\n            <input value="{{field.values[0]}}" id="new_{{field.var}}_value" type="text" name="{{field.var}}" placeholder=\'{[print(xabber.getString("group_settings_edit__setting_name__hint"))]}\' class="text-field">\n        </div>\n        {[} else if (field.type === \'text-multi\') {]}\n        <textarea placeholder=\'{[print(xabber.getString("groupchat_example_description"))]}\' id="{{field.var}}" cols="30" rows="10" class="text-field materialize-textarea rich-textarea">{{field.values[0]}}</textarea>\n        {[} else if (field.type === \'list-single\') { field.options.forEach(function (option) {]}\n        <div class="property-radio">\n            <input {[if (option.value === field.values[0]){]}checked{[}]} id="{{option.value}}" name="{{field.var}}" type="radio" class="with-gap" required="">\n            <label class="{{option.value}}-label" for="{{option.value}}">{{option.label}}</label>\n        </div>\n        {[});} else  if (field.type === \'fixed\' && field.values[0] !== "") {]}\n        <div class="fixed-field{[if (field.var === \'description\'){]} description{[}]}">\n            <div class="value">{{field.values[0]}}</div>\n        </div>\n        {[}]}\n        {[if (field.var === \'index\'){]}\n        <p class="property-description">{[print(xabber.getString("group_settings_edit__setting_index__text"))]}</p>\n        {[} else if (field.var === \'membership\') {]}\n        <p class="property-description">{[print(xabber.getString("group_settings_edit__setting_membership__text"))]}</p>\n        {[}]}\n    </div>\n    {[})]}\n</div>\n<div class="modal-footer">\n    <div class="buttons-wrap">\n        {[if (!all_fixed){]}\n        <button class="btn-save btn-flat btn-main non-active">{[print(xabber.getString("save"))]}</button>\n        {[}]}\n        <button class="btn-cancel btn-flat btn-dark btn-main">{[print(xabber.getString("cancel"))]}</button>\n    </div>\n</div>'},69849:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="block-header">\n    <span class="block-name"></span>\n    <span class="btn-edit-settings">{[print(xabber.getString("group_settings__properties__button_edit"))]}</span>\n</div>\n<div class="group-chat-properties vcard-wrap" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'>\n    <div class="info-wrap jid-info-wrap">\n        <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="id-outline"></svg></div>\n        <div class="info-hover">\n            <div class="info jabber-id">\n                <div class="value one-line"></div>\n                <div class="label">{[print(xabber.getString("group_settings__properties__label_jid"))]}</div>\n            </div>\n        </div>\n    </div>\n    <div class="info-wrap description-info-wrap" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'>\n        <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="description-outline"></svg></div>\n        <div class="info-hover">\n            <div class="info description short">\n                <div class="value"></div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="full-vcard-wrap">\n    <div class="full-vcard-content">\n        <div class="vcard-header block-header">\n            <div class="vcard-header-title">\n                <i class="details-icon btn-back mdi mdi-24px mdi-arrow-left"></i>\n                <span class="block-name">{[print(xabber.getString("contact_vcard_header_title"))]}</span>\n            </div>\n            <div class="main-info">\n                <div class="avatar-wrap">\n                    <div class="circle-avatar"></div>\n                </div>\n                <div class="text-info">\n                    <div class="name-wrap"></div>\n                </div>\n            </div>\n        </div>\n        <div class="vcard-list">\n            <div class="info-wrap jid-info-wrap">\n                <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="id-outline"></svg></div>\n                <div class="info-hover">\n                    <div class="info jabber-id">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("group_settings__properties__label_jid"))]}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="info-wrap name-info-wrap">\n                <i title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\' class="details-icon mdi mdi-24px mdi-account-box-outline"></i>\n                <div class="info-hover">\n                    <div class="info name">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("groupchat_name"))]}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="info-wrap description-info-wrap">\n                <div class="details-icon-wrap">\n                    <svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="description-outline"></svg>\n                </div>\n                <div class="info-hover">\n                    <div class="info description">\n                        <div class="value"></div>\n                        <div class="label">{[print(xabber.getString("groupchat_description"))]}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="info-wrap searchable-info-wrap">\n                <svg class="details-icon toolbar-icon mdi mdi-24px" viewBox="0 0 24 24">\n                    <path title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\' d="M15.5,12C18,12 20,14 20,16.5C20,17.38 19.75,18.21 19.31,18.9L22.39,22L21,23.39L17.88,20.32C17.19,20.75 16.37,21 15.5,21C13,21 11,19 11,16.5C11,14 13,12 15.5,12M15.5,14A2.5,2.5 0 0,0 13,16.5A2.5,2.5 0 0,0 15.5,19A2.5,2.5 0 0,0 18,16.5A2.5,2.5 0 0,0 15.5,14M19.35,8.03C21.95,8.22 24,10.36 24,13C24,14.64 23.21,16.1 22,17V16.5A6.5,6.5 0 0,0 15.5,10A6.5,6.5 0 0,0 9,16.5C9,17 9.06,17.5 9.17,18H6A6,6 0 0,1 0,12C0,8.9 2.34,6.36 5.35,6.03C6.6,3.64 9.11,2 12,2C15.64,2 18.67,4.59 19.35,8.03Z"></path>\n                </svg>\n                <div class="info-hover">\n                    <div class="info searchable">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("group_settings__properties__label_indexed"))]}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="info-wrap model-info-wrap">\n                <i title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\' class="details-icon mdi mdi-24px mdi-lock"></i>\n                <div class="info-hover">\n                    <div class="info model">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("groupchat_membership"))]}</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},38114:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<tr class="participant-wrap" data-id="{{id}}" data-jid="{{jid}}">\n    <td class="list-item group-chat-participant">\n        <div class="member-item">\n            <div class="circle-avatar"></div>\n            <div class="participant-info">\n            <div class="top-line"><div title="{{nickname}}" class="nickname one-line">{{nickname}}</div>{[if (badge) {]}<div class="badge one-line">{{badge}}</div>{[}]}</div>\n            {[if (jid) {]}<p class="jid one-line">{{jid}}</p>{[}]}\n            </div>\n        </div>\n    </td>\n    <td class="last-seen">{[if (!present) {]}<span class="online-status text-color-green-700">{[print(xabber.getString("group_settings__members__status_online"))]}</span>{[} else {]}<span title="{{present}}">{{pretty_present}}</span>{[}]}</td>\n    <td class="role">{[if (role !== \'member\') {]}{{role}}{[}]}</td>\n    <td>\n        {[if (is_me) {]}\n        <span style="font-size:12px" class="text-color-500">{[print(xabber.getString("groupchat_this_is_you"))]}</span>\n        {[} else {]}\n        <div class="buttons-wrap">\n            <div title=\'{[print(xabber.getString("groupchat_kick"))]}\' class="btn-kick">\n                <i class="mdi mdi-24px mdi-account-remove"></i>\n            </div>\n            <div title=\'{[print(xabber.getString("groupchat_kick_and_block"))]}\' class="btn-block">\n                <svg class="mdi mdi-24px" viewBox="0 0 24 24">\n                    <path fill="#9e9e9e" d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12C4,13.85 4.63,15.55 5.68,16.91L16.91,5.68C15.55,4.63 13.85,4 12,4M12,20A8,8 0 0,0 20,12C20,10.15 19.37,8.45 18.32,7.09L7.09,18.32C8.45,19.37 10.15,20 12,20Z" />\n                </svg>\n            </div>\n        </div>\n        {[}]}\n    </td>\n</tr>'},53119:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<tr class="participant-wrap" data-id="{{id}}" data-jid="{{jid}}">\n    <td class="list-item group-chat-participant">\n        <div class="member-item">\n            <div class="circle-avatar"></div>\n            <div class="participant-info">\n            <div class="top-line">\n                <div title="{{nickname}}" class="nickname one-line">{{nickname}}</div>\n                {[if (badge) {]}<div class="badge one-line">{{badge}}</div>{[}]}\n            </div>\n                <div class="bottom-line">\n                    {[ if (is_me) {]}\n                    <div class="online-status text-color-700">{[print(xabber.getString("groupchat_this_is_you"))]}</div>\n                    {[}else if (!present) {]}<span class="online-status text-color-green-700">{[print(xabber.getString("group_settings__members__status_online"))]}</span>{[} else {]}<span title="{{present}}">{{pretty_present}}</span>{[}]}\n                </div>\n            </div>\n            {[if (role === \'owner\' || role === \'admin\') {]}\n            <div class="participant-buttons-wrap">\n                <div class="participant-role">\n                    {[if (role === \'owner\') {]}\n                        <i class="mdi participant-role-image mdi-24px mdi-star"></i>\n                    {[}else if (role === \'admin\') {]}\n                        <i class="mdi participant-role-image mdi-24px mdi-star-outline"></i>\n                    {[}]}\n                </div>\n            </div>\n            {[} else if (!is_me) {]}\n                <div class="buttons-wrap">\n                    <div title=\'{[print(xabber.getString("groupchat_edit_member"))]}\' class="btn-edit-member">\n                        <svg class="mdi mdi-24px mdi-svg-template" data-svgname="edit-outline"></svg>\n                    </div>\n                    \x3c!--<div title=\'{[print(xabber.getString("mute_chat"))]}\' class="btn-mute">--\x3e\n                        \x3c!--<i class="mdi mdi-24px mdi-microphone-off"></i>--\x3e\n                    \x3c!--</div>--\x3e\n                    <div title=\'{[print(xabber.getString("groupchat_kick"))]}\' class="btn-kick">\n                        <i class="mdi mdi-24px mdi-account-remove"></i>\n                    </div>\n                </div>\n            {[}]}\n        </div>\n    </td>\n</tr>'},82703:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="input-widget-wrap {{field_name}}-wrap">\n    <div class="{{field_name}}-input-wrap">\n        <input class="{{field_name}}-input rich-textarea field-input" type="{{field_type}}" placeholder="{{placeholder}}">\n        <div class="buttons-wrap">\n            <div class="insert-emoticon">\n                <i class="mdi mdi-24px mdi-emoticon hover-text-color-500"></i>\n            </div>\n            <div class="emoticons-panel-wrap">\n                <div class="emoticons-panel"></div>\n                <div class="emoji-menu"></div>\n            </div>\n        </div>\n    </div>\n</div>\n'},70569:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="block-header">\n    <span class="block-name">{[print(xabber.getString("groupchat_status"))]}</span>\n</div>\n<div class="group-chat-status">\n    <div class="status-wrap">\n        <div class="status status-bulb"></div>\n        <div class="status-message"></div>\n    </div>\n    <div class="btn-edit-status">{[print(xabber.getString("group_settings__properties__button_edit"))]}</div>\n</div>'},27157:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="group-chat-status-wrap" title="{[print(xabber.getString(\'group_settings__properties__tooltip_click_to_set_status\'))]}">\n    <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="status-outline"></svg></div>\n    <div class="group-chat-status-border">\n        <div class="group-chat-status">\n            <div class="status-wrap">\n                <div class="status-message dotted-underline"></div>\n                <div class="status status-bulb"></div>\n            </div>\n            <div class="label">{[print(xabber.getString("groupchat_status"))]}</div>\n        </div>\n    </div>\n</div>'},53464:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="panel-content-wrap noselect">\n    <div class="main-info">\n        <div class="circle-avatar"></div>\n        <div class="text-info">\n            <div class="name-wrap one-line"></div>\n            <div class="jid one-line"></div>\n        </div>\n    </div>\n\n    <div class="panel-content">\n        <div class="msg-wrap"><p class="msg-text"></p></div>\n        <div class="panel-footer noselect">\n            <div class="buttons-wrap">\n                <button class="btn-join btn-flat btn-main">{[print(xabber.getString("groupchat_join"))]}</button>\n                <button class="btn-decline btn-flat btn-main">{[print(xabber.getString("groupchat_decline"))]}</button>\n                <button class="btn-block btn-flat btn-main">{[print(xabber.getString("groupchat_block"))]}</button>\n            </div>\n        </div>\n    </div>\n</div>'},87824:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="list-item {{status}}-user" data-jid="{{jid}}">\n    <div class="member-item">\n        <div class="circle-avatar"></div>\n        <p title="{{jid}}" class="one-line">{{jid}}</p>\n        {[if (status == \'invitations\') {]}\n        <div title=\'{[print(xabber.getString("groupchat_revoke"))]}\' class="revoke-invitation">\n            {[}else{]}\n            <div title=\'{[print(xabber.getString("groupchat_unblock"))]}\' class="unblock-user">\n                {[}]}\n                <i class="mdi mdi-20px mdi-close"></i>\n            </div>\n    </div>\n</div>'},84939:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="input-widget-wrap {{field_name}}-wrap">\n    <div class="rich-textarea field-input badge-text" tabindex="1" placeholder=\'{[print(xabber.getString("groupchat_member_badge"))]}\' contenteditable></div>\n    <div class="buttons-wrap">\n        <div class="insert-emoticon">\n            <i class="mdi mdi-24px mdi-emoticon hover-text-color-500"></i>\n        </div>\n        <div class="emoticons-panel-wrap">\n            <div class="emoticons-panel"></div>\n            <div class="emoji-menu"></div>\n        </div>\n    </div>\n</div>'},66493:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="participant-details-item {[if (subscription === null) {]}unsubscribed{[}]}" data-id="{{id}}" data-jid="{{jid}}" data-role="{{role}}">\n    {[if (subscription !== null) {]}\n    <div class="btn-more dropdown-button" data-activates="{{id}}-buttons-wrap">\n        <i class="mdi mdi-24px mdi-dots-vertical"></i>\n    </div>\n    <ul class="buttons-menu-wrap dropdown-content noselect" id="{{id}}-buttons-wrap">\n        <li class="btn-block-participant"><span class="one-line">{[print(xabber.getString("groupchat_block"))]}</span></li>\n    </ul>\n    {[}]}\n    <div class="circle-avatar">\n        {[if (subscription !== null) {]}\n        <input title=\'{[print(xabber.getString("groupchat_member_edit_change_avatar"))]}\' type="file">\n            <svg class="set-groupchat-avatar" viewBox="0 0 24 24">\n                <path d="M4,4H7L9,2H15L17,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9Z" />\n            </svg>\n            <div class="preloader-wrap"><div class="preloader-wrapper preloader-16px visible">\n                <div class="spinner-layer">\n                    <div class="circle-clipper left">\n                        <div class="circle"></div>\n                    </div>\n                    <div class="gap-patch">\n                        <div class="circle"></div>\n                    </div>\n                    <div class="circle-clipper right">\n                        <div class="circle"></div>\n                    </div>\n                </div>\n            </div>\n            </div>\n        {[}]}\n    </div>\n        <div class="participant-info">\n            {[if (subscription !== null) {]}<div id="edit-nickname" class="rich-textarea" tabindex="1" contenteditable></div>{[}]}\n            <div title="{{nickname}}" class="nickname one-line">{{nickname}}</div>\n            <div class="badge one-line {[if (!badge) {]}hidden{[}]}">{{badge}}</div>\n            {[if (jid) {]}<p title="{{jid}}" class="jid selectable-text one-line">{{jid}}</p>{[}]}\n            {[ if (is_myself) {]}\n            <div class="my-flag one-line text-color-red-700">{[print(xabber.getString("groupchat_this_is_you"))]}</div>\n            {[}]}\n            {[ if (is_blocked_contact) {]}\n            <div class="my-flag one-line text-color-red-700">{[print(xabber.getString("action_contact_blocked"))]}</div>\n            {[}]}\n            {[if (subscription === null) {]}<p class="role selectable-text one-line">{[if (blocked) { print(xabber.getString("groupchat_blocked")); }else{print(xabber.getString("settings_group_member__placeholder_not_a_member"));}]}</p>{[}]}\n        </div>\n    <div class="buttons-wrap">\n        {[if (incognito_chat) {]}\n        <div class="button-wrap non-active btn-chat-wrap">\n            <i class="mdi mdi-24px mdi-incognito btn-chat"></i>\n            <div class="btn-name">{[print(xabber.getString("groupchat_private_chat"))]}</div>\n        </div>\n        {[} else {]}\n        <div class="button-wrap non-active btn-chat-wrap">\n            <i class="mdi mdi-24px mdi-message-text btn-chat"></i>\n            <div class="btn-name">{[print(xabber.getString("groupchat_direct_chat"))]}</div>\n        </div>\n        {[}]}\n        <div class="button-wrap btn-participant-messages-wrap">\n            <i class="mdi mdi-24px mdi-view-list btn-participant-messages"></i>\n            <div class="btn-name">{[print(xabber.getString("groupchat_member_messages"))]}</div>\n        </div>\n        <div class="button-wrap btn-set-badge-wrap">\n            <svg class="btn-set-badge" viewBox="0 0 24 24">\n                <path d="M17,3H14V6H10V3H7A2,2 0 0,0 5,5V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V5A2,2 0 0,0 17,3M12,8A2,2 0 0,1 14,10A2,2 0 0,1 12,12A2,2 0 0,1 10,10A2,2 0 0,1 12,8M16,16H8V15C8,13.67 10.67,13 12,13C13.33,13 16,13.67 16,15V16M13,5H11V1H13V5M16,19H8V18H16V19M12,21H8V20H12V21Z" />\n            </svg>\n            <div class="btn-name">{[print(xabber.getString("groupchat_set_member_badge"))]}</div>\n        </div>\n        <div class="button-wrap btn-kick-participant-wrap">\n            <i class="mdi mdi-24px mdi-account-remove btn-kick-participant"></i>\n            <div class="btn-name">{[print(xabber.getString("groupchat_kick"))]}</div>\n        </div>\n    </div>\n</div>'},83326:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="participant-details-item {[if (subscription === null) {]}unsubscribed{[}]}" data-id="{{id}}" data-jid="{{jid}}" data-role="{{role}}">\n    <div class="block-header">\n        <i class="details-icon btn-back parent-btn mdi mdi-24px mdi-arrow-right"></i>\n        <i class="details-icon btn-back-name child-btn mdi mdi-24px mdi-arrow-right hidden"></i>\n        <span class="block-name"></span>\n        <span class="block-name second-text"></span>\n        <button class="btn-save-user-rights non-active fade-out btn-flat btn-main">{[print(xabber.getString("groupchat_save_member_settings"))]}</button>\n        {[if (subscription !== null) {]}\n        <div class="btn-edit-participant">\n            <svg class="mdi mdi-24px mdi-svg-template" data-svgname="edit-outline"></svg>\n        </div>\n        <ul class="buttons-menu-wrap dropdown-content noselect" id="{{id}}-buttons-wrap">\n            <li class="btn-block-participant"><span class="one-line">{[print(xabber.getString("groupchat_block"))]}</span></li>\n        </ul>\n        {[}]}\n    </div>\n    <div class="circle-avatar">\n        {[if (subscription !== null) {]}\n            <div class="preloader-wrap">\n                <div class="preloader-wrapper preloader-16px visible">\n                    <div class="spinner-layer">\n                        <div class="circle-clipper left">\n                            <div class="circle"></div>\n                        </div>\n                        <div class="gap-patch">\n                            <div class="circle"></div>\n                        </div>\n                        <div class="circle-clipper right">\n                            <div class="circle"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        {[}]}\n    </div>\n        <div class="participant-info">\n            {[if (subscription !== null) {]}<div class="participant-edit-nickname hidden"></div>{[}]}\n            <div class="participant-edit-badge hidden"></div>\n            <div class="participant-info-text">\n                <div class="nickname">\n                    {{nickname}} <div class="badge one-line {[if (!badge) {]}hidden{[}]}">{{badge}}</div>\n                </div>\n                {[ if (is_myself) {]}\n                <div class="my-flag one-line">{[print(xabber.getString("groupchat_this_is_you"))]}</div>\n                {[}]}\n                {[ if (subscription === null && blocked) {]}\n                <div class="my-flag one-line">{[print(xabber.getString("groupchat_blocked"))]}</div>\n                {[} else if (subscription === null) {]}\n                <div class="my-flag one-line">{[print(xabber.getString("groupchat_kicked"))]}</div>\n                {[}]}\n\n            </div>\n        </div>\n    <div class="buttons-wrap sticky-details-wrap">\n        {[if (incognito_chat) {]}\n        <div class="button-wrap non-active btn-chat-wrap">\n            <i class="mdi contact-btn text-color-500 mdi-24px mdi-incognito btn-chat-participant"></i>\n            <div class="btn-name">{[print(xabber.getString("groupchat_private_chat"))]}</div>\n        </div>\n        {[} else {]}\n        <div class="button-wrap non-active btn-chat-wrap">\n            <i class="mdi contact-btn text-color-500 mdi-24px mdi-message-text btn-chat-participant"></i>\n            <div class="btn-name">{[print(xabber.getString("groupchat_direct_chat"))]}</div>\n        </div>\n        {[}]}\n        <div class="button-wrap btn-participant-messages-wrap">\n            <i class="mdi contact-btn text-color-500 mdi-24px mdi-view-list btn-participant-messages"></i>\n            <div class="btn-name">{[print(xabber.getString("groupchat_member_messages"))]}</div>\n        </div>\n        <div class="button-wrap non-active btn-set-visibility-wrap">\n            <i title="Feature not yet implemented" class="mdi contact-btn text-color-500 mdi-24px mdi-eye btn-set-visibility"></i>\n            <div class="btn-name">{[print(xabber.getString("groupchat_set_member_visibility_visible"))]}</div>\n        </div>\n        <div class="button-wrap btn-kick-participant-wrap">\n            <i class="mdi contact-btn mdi-24px mdi-account-remove text-color-500 btn-kick-participant"></i>\n            <div class="btn-name text-color-500">{[print(xabber.getString("groupchat_kick"))]}</div>\n        </div>\n    </div>\n    <div class="vcard-wrap vcard">\n        {[if (jid) {]}\n        <div class="info-wrap jid-info-wrap" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'>\n            <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="id-outline"></svg></div>\n            <div class="info-hover">\n                <div class="info jabber-id">\n                    <div class="value one-line">{{jid}}</div>\n                    <div class="label">{[print(xabber.getString("vcard_jabber_id"))]}</div>\n                </div>\n            </div>\n        </div>\n        {[}]}\n        {[if (role === \'owner\' || role === \'admin\') {]}\n        <div class="info-wrap role-info-wrap">\n            <div class="details-icon-wrap">\n                {[if (role === \'owner\') {]}\n                    <i class="details-icon mdi mdi-24px mdi-star"></i>\n                {[}else if (role === \'admin\') {]}\n                    <i class="details-icon mdi mdi-24px mdi-star-outline"></i>\n                {[}]}\n            </div>\n            <div>\n                <div class="info jabber-id">\n                    <div class="value one-line">\n                        <span>\n                            {[if (role === \'owner\') {]}\n                                {[print(xabber.getString("groupchat_role_owner"))]}\n                            {[}else if (role === \'admin\') {]}\n                                {[print(xabber.getString("groupchat_role_admin"))]}\n                            {[}]}\n                        </span>\n                    </div>\n                    <div class="label">{[print(xabber.getString("groupchat_role"))]}</div>\n                </div>\n            </div>\n        </div>\n        {[}]}\n        <div class="info-wrap present-info-wrap">\n            <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" {[if (!present) {]}data-svgname="status-outline"{[} else {]}data-svgname="clock-outline"{[}]}></svg></div>\n            <div>\n                <div class="info jabber-id">\n                    <div class="value one-line">\n                        <span>\n                            {[if (!present) {]}\n                                {[print(xabber.getString("group_settings__members__status_online"))]}\n                            {[} else {]}\n                            {{pretty_present}}\n                            {[}]}\n                        </span>\n                    </div>\n                    <div class="label">{[if (!present) {]}{[print(xabber.getString("groupchat_status"))]}{[} else {]}{[print(xabber.getString("group_settings__members__label_last_seen"))]}{[}]}</div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},1593:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="participant-details-wrap">\n    <div class="participant-details-info-wrap">\n    </div>\n    <ul class="tabs participant-tabs bottom-block-tabs">\n        <li data-value="image" class="list-variant tab"><a class="text-color-700">{[print(xabber.getString("images"))]}</a></li>\n        <li data-value="video" class="list-variant tab"><a class="text-color-700">{[print(xabber.getString("videos"))]}</a></li>\n        <li data-value="files" class="list-variant tab"><a class="text-color-700">{[print(xabber.getString("files"))]}</a></li>\n        <li data-value="voice" class="list-variant tab"><a class="text-color-700">{[print(xabber.getString("vcard_type_voice"))]}</a></li>\n    </ul>\n    <div class="bottom-block participant-bottom-block">\n        <div class="block-wrap participants-details-media-wrap"></div>\n    </div>\n    <div class="participant-details-edit-wrap edit-wrap">\n        <div class="main-info">\n            <div class="avatar-wrap">\n                <div class="circle-avatar dropdown-button" data-activates="{{view.cid}}-participant-image">\n                    <input class="hidden" title=\'{[print(xabber.getString("groupchat_member_edit_change_avatar"))]}\' type="file"/>\n                    <svg class="set-groupchat-avatar" viewBox="0 0 24 24">\n                        <path d="M4,4H7L9,2H15L17,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9Z" />\n                    </svg>\n                    <div class="preloader-wrap">\n                        <div class="preloader-wrapper preloader-32px visible">\n                            <div class="spinner-layer">\n                                <div class="circle-clipper left">\n                                    <div class="circle"></div>\n                                </div>\n                                <div class="gap-patch">\n                                    <div class="circle"></div>\n                                </div>\n                                <div class="circle-clipper right">\n                                    <div class="circle"></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div id="{{view.cid}}-participant-image" class="profile-image-dropdown bootstrap-dropdown dropdown-content noselect">\n                    <div class="btn-emoji-panel property-variant">\n                        {[print(xabber.getString("account_emoji_profile_image_button"))]}\n                    </div>\n                    <div class="btn-selfie property-variant">\n                        {[print(xabber.getString("account_webcam_profile_image_button"))]}\n                    </div>\n                    <div class="btn-choose-image property-variant">\n                        {[print(xabber.getString("account_profile_image_button"))]}\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="participant-details-edit-inputs">\n            <div class="edit-participant-name-wrap">\n            </div>\n            <div class="edit-participant-badge-wrap">\n            </div>\n        </div>\n        <div class="rights-wrap">\n        </div>\n    </div>\n</div>'},76252:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="header">\n</div>\n<div class="modal-content">\n    <div class="rights-wrap">\n    </div>\n</div>\n'},93172:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<table class="members-list-wrap">\n    <thead>\n    <tr>\n        <th>\n            <div class="participants-search-form search-form">\n                <svg class="search-icon" viewBox="0 0 24 24">\n                    <path d="M15.5,12C18,12 20,14 20,16.5C20,17.38 19.75,18.21 19.31,18.9L22.39,22L21,23.39L17.88,20.32C17.19,20.75 16.37,21 15.5,21C13,21 11,19 11,16.5C11,14 13,12 15.5,12M15.5,14A2.5,2.5 0 0,0 13,16.5A2.5,2.5 0 0,0 15.5,19A2.5,2.5 0 0,0 18,16.5A2.5,2.5 0 0,0 15.5,14M10,4A4,4 0 0,1 14,8C14,8.91 13.69,9.75 13.18,10.43C12.32,10.75 11.55,11.26 10.91,11.9L10,12A4,4 0 0,1 6,8A4,4 0 0,1 10,4M2,20V18C2,15.88 5.31,14.14 9.5,14C9.18,14.78 9,15.62 9,16.5C9,17.79 9.38,19 10,20H2Z" />\n                </svg>\n                <input type="text" class="search-input simple-input-field" tabindex="1" placeholder=\'{[print(xabber.getString("groupchat_search_members"))]}\'>\n                <i class="close-search-icon mdi mdi-20px mdi-close"></i>\n            </div>\n        </th>\n        <th>{[print(xabber.getString("group_settings__members__label_last_seen"))]}</th>\n        <th>{[print(xabber.getString("groupchat_role"))]}</th>\n        <th></th>\n    </tr>\n    </thead>\n    <tbody></tbody>\n</table>\n<div class="preloader-wrapper preloader-17px active">\n    <div class="spinner-layer">\n        <div class="circle-clipper left">\n            <div class="circle"></div>\n        </div>\n        <div class="gap-patch">\n            <div class="circle"></div>\n        </div>\n        <div class="circle-clipper right">\n            <div class="circle"></div>\n        </div>\n    </div>\n</div>'},19295:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<table class="members-list-wrap">\n    <thead>\n    <tr>\n        <th>\n            <div class="participants-search-form search-form">\n                <svg class="search-icon" viewBox="0 0 24 24">\n                    <path d="M15.5,12C18,12 20,14 20,16.5C20,17.38 19.75,18.21 19.31,18.9L22.39,22L21,23.39L17.88,20.32C17.19,20.75 16.37,21 15.5,21C13,21 11,19 11,16.5C11,14 13,12 15.5,12M15.5,14A2.5,2.5 0 0,0 13,16.5A2.5,2.5 0 0,0 15.5,19A2.5,2.5 0 0,0 18,16.5A2.5,2.5 0 0,0 15.5,14M10,4A4,4 0 0,1 14,8C14,8.91 13.69,9.75 13.18,10.43C12.32,10.75 11.55,11.26 10.91,11.9L10,12A4,4 0 0,1 6,8A4,4 0 0,1 10,4M2,20V18C2,15.88 5.31,14.14 9.5,14C9.18,14.78 9,15.62 9,16.5C9,17.79 9.38,19 10,20H2Z" />\n                </svg>\n                <input type="text" class="search-input simple-input-field" tabindex="1" placeholder=\'{[print(xabber.getString("groupchat_search_members"))]}\'>\n                <i class="close-search-icon mdi mdi-20px mdi-close"></i>\n            </div>\n        </th>\n    </tr>\n    </thead>\n    <tbody></tbody>\n</table>\n<div class="preloader-wrapper preloader-17px active">\n    <div class="spinner-layer">\n        <div class="circle-clipper left">\n            <div class="circle"></div>\n        </div>\n        <div class="gap-patch">\n            <div class="circle"></div>\n        </div>\n        <div class="circle-clipper right">\n            <div class="circle"></div>\n        </div>\n    </div>\n</div>'},54630:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<svg class="pin" viewBox="0 0 24 24">\n    <path fill="#757575" d="M16,12V4H17V2H7V4H8V12L6,14V16H11.2V22H12.8V16H18V14L16,12Z" />\n</svg>\n<div class="msg-wrap">\n    <div class="chat-msg-author-wrap">\n        <div class="chat-msg-author text-color-700 one-line">{{author}}</div>{[if (fwd_author){]}<svg class="fwd-chevron" viewBox="0 0 24 24"><path fill="#9E9E9E" d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"></path></svg><div class="chat-msg-author text-color-700 one-line">{{fwd_author}}</div>{[}]}\n        <div class="msg-time">{{time}}</div>\n    </div>\n    <div class="chat-msg-content chat-text-content one-line">\n        {{message}}\n    </div>\n</div>\n<svg title=\'{[print(xabber.getString("group_chat__pinned_message__tooltip_unpin"))]}\' class="close" viewBox="0 0 24 24">\n    <path class="close" fill="#9E9E9E" d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" />\n</svg>'},15369:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="participant-details-item" data-id="{{id}}" data-jid="{{jid}}" data-role="{{role}}">\n    <div class="circle-avatar">\n        {[ if (is_myself) {]}\n        <input title=\'{[print(xabber.getString("groupchat_member_edit_change_avatar"))]}\' type="file">\n        {[}]}\n        {[ if (is_myself) {]}\n        <svg class="set-groupchat-avatar" viewBox="0 0 24 24">\n            <path d="M4,4H7L9,2H15L17,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9Z" />\n        </svg>\n        <div class="preloader-wrap"><div class="preloader-wrapper preloader-16px visible">\n            <div class="spinner-layer">\n                <div class="circle-clipper left">\n                    <div class="circle"></div>\n                </div>\n                <div class="gap-patch">\n                    <div class="circle"></div>\n                </div>\n                <div class="circle-clipper right">\n                    <div class="circle"></div>\n                </div>\n            </div>\n        </div>\n        </div>\n        {[}]}\n    </div>\n    <div class="participant-info">\n        {[ if (is_myself) {]}\n        <div id="edit-nickname" class="rich-textarea" tabindex="1" contenteditable></div>\n        {[}]}\n        <div title="{{nickname}}" class="{{is_myself && \'is-myself\'}} nickname one-line">{{nickname}}</div>\n        <div class="badge one-line {[if (!badge) {]}hidden{[}]}">{{badge}}</div>\n        {[ if (is_myself) {]}\n        <div class="my-flag one-line text-color-red-700">{[print(xabber.getString("groupchat_this_is_you"))]}</div>\n        {[}]}\n    </div>\n</div>'},79983:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="participant-details-item" data-id="{{id}}" data-jid="{{jid}}" data-role="{{role}}">\n    <div class="block-header">\n        <i class="details-icon btn-back parent-btn mdi mdi-24px mdi-arrow-right"></i>\n        <i class="details-icon btn-back-name child-btn mdi mdi-24px mdi-arrow-right hidden"></i>\n        <span class="block-name"></span>\n        <span class="block-name second-text"></span>\n        <button class="btn-save-user-rights non-active fade-out btn-flat btn-main">{[print(xabber.getString("groupchat_save_member_settings"))]}</button>\n        {[if (subscription !== null) {]}\n        <div class="btn-edit-participant">\n            <svg class="mdi mdi-24px mdi-svg-template" data-svgname="edit-outline"></svg>\n        </div>\n        <ul class="buttons-menu-wrap dropdown-content noselect" id="{{id}}-buttons-wrap">\n            <li class="btn-block-participant"><span class="one-line">{[print(xabber.getString("groupchat_block"))]}</span></li>\n        </ul>\n        {[}]}\n    </div>\n    <div class="circle-avatar">\n        <div class="preloader-wrap">\n            <div class="preloader-wrapper preloader-16px visible">\n                <div class="spinner-layer">\n                    <div class="circle-clipper left">\n                        <div class="circle"></div>\n                    </div>\n                    <div class="gap-patch">\n                        <div class="circle"></div>\n                    </div>\n                    <div class="circle-clipper right">\n                        <div class="circle"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="participant-info">\n        {[if (subscription !== null) {]}<div class="participant-edit-nickname hidden"></div>{[}]}\n        <div class="participant-edit-badge hidden"></div>\n        <div class="participant-info-text">\n            <div class="nickname">\n                {{nickname}} <div class="badge one-line {[if (!badge) {]}hidden{[}]}">{{badge}}</div>\n            </div>\n            {[ if (is_myself) {]}\n            <div class="my-flag one-line text-color-red-700">{[print(xabber.getString("groupchat_this_is_you"))]}</div>\n            {[}]}\n\n        </div>\n    </div>\n</div>'},87050:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="right-item restriction restriction-{{name}}">\n    <div class="right-name">{{pretty_name}}</div>\n    <div class="field clickable-field restriction-{{name}}-state switch normal">\n        <input type="checkbox" {[if (type === \'fixed\') {]} onclick="return false;" {[}]} class="filled-in" id="{{name}}">\n        <label for="{{name}}"></label>\n    </div>\n</div>'},54338:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="select-timer">\n    <div class="dropdown-button" data-activates="select-timer-{{right_name}}">\n        <div class="timer-item-wrap"><div data-value="0" class="default-value property-value">{[print(xabber.getString("dialog_rights__button_set_timer"))]}</div></div>\n    </div>\n    <div id="select-timer-{{right_name}}" class="dropdown-content noselect">\n        {[expire_options.forEach(function (option) {]}\n        <div data-value="{{option.value}}" class="property-variant">{{option.label}}</div>\n        {[}.bind(this));]}\n    </div>\n</div>\n'},67065:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-content-wrap">\n    <div class="modal-header">\n        <span>{[print(xabber.getString("dialog_set_status__header"))]}</span>\n    </div>\n    <ul class="status-values noselect">\n        <div class="loading-status">\n            <div class="preloader-wrapper preloader-17px active">\n                <div class="spinner-layer">\n                    <div class="circle-clipper left">\n                        <div class="circle"></div>\n                    </div>\n                    <div class="gap-patch">\n                        <div class="circle"></div>\n                    </div>\n                    <div class="circle-clipper right">\n                        <div class="circle"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </ul>\n</div>\n'},27893:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<li data-value="{{status.value}}">\n    <span class="status-value one-line">{{status.label}}</span>\n    <span class="status-bulb" data-status="{{status.show}}"></span>\n</li>'},57973:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="account-indicator ground-color-700"></div>\n<div class="group-head">\n    <i class="arrow mdi mdi-20px"></i>\n    <div class="group-title">\n        <span class="group-name one-line"></span>\n        <span class="member-counter one-line"></span>\n    </div>\n    <i class="group-icon mdi mdi-20px hidden"></i>\n</div>\n'},95561:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="group-head">\n    <i class="arrow mdi mdi-20px"></i>\n    <div class="group-title">\n        <span class="group-name one-line"></span>\n        <span class="member-counter one-line"></span>\n    </div>\n    <i class="group-icon mdi mdi-20px hidden"></i>\n</div>\n'},21612:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="modal-content-wrap settings-panel">\n    <div class="modal-header">\n        <span>{[print(xabber.getString("dialog_circle_settings__header"))]}</span>\n    </div>\n\n    <div class="modal-content">\n            <div class="field-wrap group-name">\n                <div class="input-field">\n                    <label for="{{view.cid}}-group-name">{[print(xabber.getString("circle_name"))]}</label>\n                    <input id="{{view.cid}}-group-name" type="text" name="group_name">\n                    <span class="errors fixed"></span>\n                </div>\n            </div>\n\n            <div class="setting-name">{[print(xabber.getString("category_offline_contacts"))]}</div>\n            <div class="setting-wrap">\n                <div class="setting offline radio-button field-wrap">\n                    <div class="field radio-field clickable-field">\n                        <form action="#">\n                            <p>\n                                <input class="with-gap" name="offline" value="yes" type="radio" id="{{view.cid}}-show" />\n                                <label for="{{view.cid}}-show">{[print(xabber.getString("show_offline_always"))]}</label>\n                            </p>\n                            <p>\n                                <input class="with-gap" name="offline" value="no" type="radio" id="{{view.cid}}-hide" />\n                                <label for="{{view.cid}}-hide">{[print(xabber.getString("hide_offline_always"))]}</label>\n                            </p>\n                            <p>\n                                <input class="with-gap" name="offline" value="default" type="radio" id="{{view.cid}}-show-offline-default" />\n                                <label for="{{view.cid}}-show-offline-default">{[print(xabber.getString("dialog_circle_settings__label_common_settings"))]}</label>\n                            </p>\n                        </form>\n                    </div>\n                </div>\n            </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn-flat btn-main btn-dark btn-delete left">{[print(xabber.getString("circle_remove"))]}</button>\n        <button class="btn-flat btn-main btn-apply">{[print(xabber.getString("dialog_circle_settings__button_apply"))]}</button>\n        <button class="btn-flat btn-main btn-dark btn-cancel">{[print(xabber.getString("cancel"))]}</button>\n    </div>\n</div>\n'},62605:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="groups-list-wrap">\n    <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="circles-outline"></svg></div>\n    <div class="groups">\n    </div>\n    </div>\n</div>\n<div class="groups-wrap">\n    <div class="checkbox-list">\n    </div>\n</div>'},54515:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='{[ for (var i = 0; i < groups.length; i++) { var name = groups[i].name, checked = groups[i].checked, group_id = groups[i].id; ]}\n    {[ if (!checked) {]}\n        <div class="input-field checkbox-field existing-group-field">\n            <input type="checkbox" class="filled-in" id="{{group_id}}" data-groupname="{{name}}" {[ if (checked) { ]}checked="checked"{[ } ]} />\n            <label for="{{group_id}}">{{name}}</label>\n        </div>\n    {[}]}\n{[ } ]}\n'},52661:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='{[ for (var i = 0; i < groups.length; i++) { var name = groups[i].name, checked = groups[i].checked, group_id = groups[i].id; ]}\n    <div class="input-field checkbox-field existing-group-field">\n        <input type="checkbox" class="filled-in" id="{{group_id}}" data-groupname="{{name}}" {[ if (checked) { ]}checked="checked"{[ } ]} />\n        <label for="{{group_id}}">{{name}}</label>\n    </div>\n{[ } ]}\n    <div class="new-group-field-wrap">\n        <div class="input-field checkbox-field new-group-checkbox">\n            <input type="checkbox" disabled class="filled-in" id="new_group_checkbox"/>\n            <label for="new_group_checkbox"></label>\n        </div>\n        <div class="input-field new-group-name">\n            <input class="rich-textarea xabber-input" id="new-group-name" type="text" name="new_group_name" placeholder=\'{[print(xabber.getString("add_new_circle"))]}\'>\n        </div>\n    </div>\n'},58114:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='{[ for (var i = 0; i < groups.length; i++) { var name = groups[i].name, checked = groups[i].checked, group_id = groups[i].id; ]}\n    {[ if (checked) {]}\n        <div data-groupname="{{name}}" title="{[print(xabber.getString(\'contact_tooltip_remove_by_click\'))]}" class="group ground-color-50">\n            <div>{{name}}</div>\n        </div>\n    {[}]}\n\n{[ } ]}\n'},57713:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="new-group-field-wrap">\n    <div class="input-field checkbox-field new-group-checkbox">\n        <input type="checkbox" disabled class="filled-in" id="new_group_checkbox"/>\n        <label for="new_group_checkbox"></label>\n    </div>\n    <div class="input-field new-group-name">\n        <input class="xabber-input" id="new-group-name" autocomplete="off" type="text" name="new_group_name" placeholder=\'{[print(xabber.getString("add_new_circle"))]}\'>\n    </div>\n</div>'},17905:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="gallery-file" title="{{file.name}}" data-id="{{file.id}}" data-uniqueid="{{file.uniqueid}}"  data-file="{{file.sources[0]}}" data-name="{{file.name}}" data-size="{{file.size}}" data-width="{{file.width}}" data-height="{{file.height}}" data-media-type="{{file.media_type}}" >\n    {[if (file.media_type && (file.media_type.includes(\'image\') || (file.media_type.includes(\'video\') && !file.has_encrypted_files && !is_encrypted))){]}\n    <img class="{[if (file.media_type.includes(\'video\')){]}uploaded-video{[} else {]}uploaded-img popup-img{[}]}"\n         data-mfp-src="{{file.sources[0]}}"\n         src="{[if (file.thumbnail){]}{{file.thumbnail}}{[} else {]}{{file.sources[0]}}{[}]}"\n         onError="this.parentElement.className = this.parentElement.className + \' hidden\';"\n    >\n    {[} else {]}\n    {[if (svg_icon == \'file-audio\' && file.true_voice){]}\n    <div class="gallery-file-placeholder-background gallery-audio-file-not-uploaded">\n        <i class="details-icon mdi mdi-play no-uploaded"></i>\n    </div>\n    <div class="gallery-file-audio-container">\n    </div>\n    {[} else {]}\n    <div class="gallery-file-placeholder-background">\n        <svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="{{svg_icon}}"></svg>\n        <div class="gallery-file-title-grid">{{filesize}}</div>\n    </div>\n    {[}]}\n    <div class="gallery-file-title one-line">\n        {{file.name}},  <span class="gallery-file-size">{{filesize}}</span>\n    </div>\n    {[if (duration && file.true_voice){]}\n    <div class="gallery-voice-file-duration">\n        0:00 / <span class="gallery-voice-file-total-duration">{{duration}}</span>\n    </div>\n    {[}]}\n    {[}]}\n</div>'},23546:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="gallery-empty">\n    <div class="gallery-empty-icon-wrap">\n        <i class="gallery-empty-icon mdi mdi-24px mdi-package-variant"></i>\n    </div>\n    <div class="gallery-empty-text">{[print(xabber.getString("no_files"))]}</div>\n</div>'},4142:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="preloader-wrapper preloader-17px active visible">\n    <div class="spinner-layer">\n        <div class="circle-clipper left">\n            <div class="circle"></div>\n        </div>\n        <div class="gap-patch">\n            <div class="circle"></div>\n        </div>\n        <div class="circle-clipper right">\n            <div class="circle"></div>\n        </div>\n    </div>\n</div>'},50869:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="contacts-panel noselect">\n    <div class="contacts-search-form search-form panel-head">\n        <div class="account-indicator"></div>\n        <i class="search-icon mdi mdi-24px mdi-magnify"></i>\n        <input type="text" class="search-input simple-input-field" tabindex="1" placeholder=\'{[print(xabber.getString("search"))]}\'>\n        <i class="close-search-icon mdi mdi-24px mdi-close"></i>\n    </div>\n\n    <div class="contact-list-wrap left-panel-list-wrap">\n        <div class="contact-list item-list">\n        </div>\n        <div class="searched-lists-wrap">\n            <div class="chats-list-wrap hidden">\n                <div class="account-indicator"></div>\n                <div class="chats-title">{[print(xabber.getString("search__header_chats"))]}</div>\n                <div class="chats-list roster-left-container"></div>\n            </div>\n            <div class="contacts-list-wrap hidden">\n                <div class="account-indicator"></div>\n                <div class="contacts-title">{[print(xabber.getString("category_title_contacts"))]}</div>\n                <div class="contacts-list roster-left-container"></div>\n            </div>\n            <div class="messages-list-wrap hidden">\n                <div class="account-indicator"></div>\n                <div class="messages-title">{[print(xabber.getString("search__header_messages"))]}</div>\n                <div class="messages-list roster-left-container"></div>\n            </div>\n        </div>\n    </div>\n</div>\n'},22136:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="contacts-panel noselect">\n    <div class="collapsed-wrap">\n        <i class="collapsed-contacts-icon mdi mdi-24px mdi-account-multiple"></i>\n        <div class="all-contacts-counter"></div>\n    </div>\n    <div class="expanded-wrap">\n        <div class="roster-head panel-head">\n            <div class="contacts-header">{[print(xabber.getString("category_title_contacts"))]}</div>\n            <div class="roster-button btn-pin"></div>\n        </div>\n\n        <div class="contact-list-wrap">\n            <div class="contact-list">\n            </div>\n        </div>\n    </div>\n</div>\n'},54186:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='    <div class="setting-name">{[print(xabber.getString("settings__section_contact_list__header_offline_contacts"))]}</div>\n    <div class="setting offline-contacts radio-button field-wrap">\n        <div class="field radio-field clickable-field">\n            <form action="#">\n                <p>\n                    <input class="with-gap" name="offline-contacts" value="yes" type="radio" id="{{view.cid}}-show" />\n                    <label for="{{view.cid}}-show">{[print(xabber.getString("settings__section_contact_list__offline_contacts__label_show"))]}</label>\n                </p>\n                <p>\n                    <input class="with-gap" name="offline-contacts" value="no" type="radio" id="{{view.cid}}-hide" />\n                    <label for="{{view.cid}}-hide">{[print(xabber.getString("settings__section_contact_list__offline_contacts__label_hide"))]}</label>\n                </p>\n            </form>\n        </div>\n    </div>\n    <div class="setting-name">{[print(xabber.getString("settings__section_contact_list__header_sorting"))]}</div>\n    <div class="setting sorting-contacts radio-button field-wrap">\n        <div class="field radio-field clickable-field">\n            <form action="#">\n                <p>\n                    <input class="with-gap" name="sorting-contacts" value="online-first" type="radio" id="{{view.cid}}-online-first" />\n                    <label for="{{view.cid}}-online-first">{[print(xabber.getString("settings__section_contact_list__sorting__label_online_first"))]}</label>\n                </p>\n                <p>\n                    <input class="with-gap" name="sorting-contacts" value="by-alphabet" type="radio" id="{{view.cid}}-by-alphabet" />\n                    <label for="{{view.cid}}-by-alphabet">{[print(xabber.getString("settings__section_contact_list__sorting__label_alphabet"))]}</label>\n                </p>\n            </form>\n        </div>\n    </div>\n'},19253:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="group-chat-title-wrap hidden">\n    <div class="account-indicator ground-color-700"></div>\n    <div class="contact-icon">\n    </div>\n    <div class="group-chat-name one-line"></div>\n</div>\n<div class="mention-info-wrap">\n<div class="account-indicator ground-color-700"></div>\n<div class="circle-avatar"></div>\n<div class="mention-info">\n    <div class="chat-title-wrap">\n        <p class="chat-title one-line"></p>\n        <p class="last-msg-date"></p>\n    </div>\n    <p class="last-msg one-line"></p>\n    <span class="msg-counter hidden"></span>\n</div>\n</div>'},50291:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="mentions-panel noselect">\n    <div class="chats-search-form search-form panel-head">\n        <div class="account-indicator"></div>\n        <i class="search-icon mdi mdi-24px mdi-magnify"></i>\n        <input type="text" class="search-input simple-input-field" tabindex="1" placeholder=\'{[print(xabber.getString("search"))]}\'>\n        <i class="close-search-icon mdi mdi-24px mdi-close"></i>\n    </div>\n    <div class="mentions-list-wrap left-panel-list-wrap">\n        <div class="mentions-list item-list">\n        </div>\n        <div class="searched-lists-wrap">\n            <div class="chats-list-wrap hidden">\n                <div class="account-indicator"></div>\n                <div class="chats-title">{[print(xabber.getString("search__header_chats"))]}</div>\n                <div class="chats-list roster-left-container"></div>\n            </div>\n            <div class="contacts-list-wrap hidden">\n                <div class="account-indicator"></div>\n                <div class="contacts-title">{[print(xabber.getString("category_title_contacts"))]}</div>\n                <div class="contacts-list roster-left-container"></div>\n            </div>\n            <div class="messages-list-wrap hidden">\n                <div class="account-indicator"></div>\n                <div class="messages-title">{[print(xabber.getString("search__header_messages"))]}</div>\n                <div class="messages-list roster-left-container"></div>\n            </div>\n        </div>\n    </div>\n</div>\n'},20103:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="text">{[print(xabber.getString("mentions_list__placeholder"))]}</div>'},97320:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="filter-item-wrap" data-jid="{{jid}}" data-color="{{color}}">\n    <svg class="filter-icon fill-color-500 mdi mdi-svg-template" data-svgname="membership"></svg>\n    <div class="name one-line">{{jid}}</div>\n</div>\n'},59629:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="notification-sessions-wrap">\n</div>\n'},76691:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="notifications-content-filters no-select">\n    <div class="notifications-filter-main-header">{[print(xabber.getString("notifications_window__header"))]}</div>\n    <div class="notifications-account-filter">\n        <div class="notifications-filter-header">{[print(xabber.getString("notifications_window__account_filter_header"))]}</div>\n        <div class="notifications-account-filter-content">\n        </div>\n    </div>\n    <div class="notifications-type-filter">\n        <div class="notifications-filter-header">{[print(xabber.getString("notifications_window__filters_header"))]}</div>\n        <div class="notifications-type-filter-content">\n            <div class="filter-item-wrap selected-filter" data-filter="all">\n                <svg class="filter-icon fill-color-light-blue-500 mdi mdi-svg-template" data-svgname="bell"></svg>\n                <div class="name one-line">{[print(xabber.getString("notifications_window__type_filter_all"))]}</div>\n            </div>\n            <div class="filter-item-wrap" data-filter="mentions">\n                <svg class="filter-icon fill-color-red-500 mdi mdi-svg-template" data-svgname="bell"></svg>\n                <div class="name one-line">{[print(xabber.getString("notifications_window__type_filter_mentions"))]}</div>\n            </div>\n            <div class="filter-item-wrap" data-filter="invites">\n                <svg class="filter-icon fill-color-deep-purple-500 mdi mdi-svg-template" data-svgname="group-public-add"></svg>\n                <div class="name one-line">{[print(xabber.getString("notifications_window__type_filter_invites"))]}</div>\n            </div>\n            <div class="filter-item-wrap" data-filter="birthdays">\n                <svg class="filter-icon fill-color-pink-500 mdi mdi-svg-template" data-svgname="birthday"></svg>\n                <div class="name one-line">{[print(xabber.getString("notifications_window__type_filter_birthdays"))]}</div>\n            </div>\n            <div class="filter-item-wrap" data-filter="security">\n                <svg class="filter-icon fill-color-teal-500 mdi mdi-svg-template" data-svgname="security"></svg>\n                <div class="name one-line">{[print(xabber.getString("notifications_window__type_filter_security"))]}</div>\n            </div>\n            <div class="filter-item-wrap" data-filter="likes">\n                <svg class="filter-icon fill-color-indigo-500 mdi mdi-svg-template" data-svgname="heart-circle"></svg>\n                <div class="name one-line">{[print(xabber.getString("notifications_window__type_filter_likes"))]}</div>\n            </div>\n            <div class="filter-item-wrap" data-filter="payments">\n                <svg class="filter-icon fill-color-amber-500 mdi mdi-svg-template" data-svgname="bank-circle"></svg>\n                <div class="name one-line">{[print(xabber.getString("notifications_window__type_filter_payments"))]}</div>\n            </div>\n            <div class="filter-item-wrap" data-filter="bots">\n                <svg class="filter-icon fill-color-brown-500 mdi mdi-svg-template" data-svgname="bot"></svg>\n                <div class="name one-line">{[print(xabber.getString("notifications_window__type_filter_bots"))]}</div>\n            </div>\n            <div class="filter-item-wrap" data-filter="information">\n                <svg class="filter-icon fill-color-cyan-500 mdi mdi-svg-template" data-svgname="alert-circle"></svg>\n                <div class="name one-line">{[print(xabber.getString("notifications_window__type_filter_information"))]}</div>\n            </div>\n            <div class="filter-item-wrap" data-filter="subscription">\n                <svg class="filter-icon fill-color-blue-grey-500 mdi mdi-svg-template" data-svgname="vcard"></svg>\n                <div class="name one-line">{[print(xabber.getString("notifications_window__type_filter_subscription"))]}</div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="notifications-right-wrap">\n    <div class="notifications-utility">\n\n    </div>\n    <div class="notifications-content">\n\n    </div>\n</div>\n'},54237:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="ground-color-50 notification-trust-session" data-sid="{{sid}}" data-jid="{{jid}}">\n    <div class="cancel-session">\n        <svg class="mdi mdi-24px mdi-svg-template" data-svgname="close"></svg>\n    </div>\n    {[if (is_enter_code) {]}\n        <div class="enter-code">\n            <svg class="mdi mdi-24px mdi-svg-template" data-svgname="code"></svg>\n        </div>\n    {[}]}\n    <div class="sid">{{sid}}</div>\n    {[if (jid) {]}<div class="contact-jid">{{jid}}</div>{[}]}\n    {[if (device_id) {]}<div class="contact-device-id">{{device_id}}</div>{[}]}\n    <div class="state">{{state}}</div>\n    {[if (code) {]}<div class="code">{{code}}</div>{[}]}\n</div>\n'},31897:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="block-header">\n    <span class="block-name">{[print(xabber.getString("searching__chat_properties__header"))]}</span>\n</div>\n<div class="chat-properties-wrap selectable-text">\n    <div class="info-wrap jid-info-wrap">\n        <svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="xmpp"></svg>\n        <div class="info jabber-id">\n            <div class="value one-line">{{jid}}</div>\n            <div class="label">{[print(xabber.getString("group_settings__properties__label_jid"))]}</div>\n        </div>\n    </div>\n    <div class="info-wrap name-info-wrap">\n        <i class="details-icon mdi mdi-24px mdi-account-box-outline"></i>\n        <div class="info name">\n            <div class="value one-line">{{name}}</div>\n            <div class="label">{[print(xabber.getString("groupchat_name"))]}</div>\n        </div>\n    </div>\n    <div class="info-wrap description-info-wrap">\n        <i class="details-icon mdi mdi-24px mdi-file-document-box"></i>\n        <div class="info description">\n            <div class="value one-line">{{description}}</div>\n            <div class="label">{[print(xabber.getString("groupchat_description"))]}</div>\n        </div>\n    </div>\n    <div class="info-wrap anonymous-info-wrap">\n        <i class="details-icon mdi mdi-24px mdi-comment-question-outline"></i>\n        <div class="info anonymous">\n            <div class="value one-line">{{privacy}}</div>\n            <div class="label">{[print(xabber.getString("groupchat_privacy_type_incognito"))]}</div>\n        </div>\n    </div>\n    <div class="info-wrap model-info-wrap">\n        <i class="details-icon mdi mdi-24px mdi-lock-open-outline"></i>\n        <div class="info model">\n            <div class="value one-line">{{membership}}</div>\n            <div class="label">{[print(xabber.getString("groupchat_membership"))]}</div>\n        </div>\n    </div>\n</div>\n<button class="btn-join-chat btn-flat btn-main btn-dark ground-color-100 hover-ground-color-300">{[print(xabber.getString("groupchat_join"))]}</button>\n'},71655:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="existing-chat-wrap" data-name="{{name}}" data-jid="{{jid}}">\n    <div class="account-indicator ground-color-{{color}}-500"></div>\n    <div class="circle-avatar">\n        <img>\n    </div>\n    <div class="existing-chat-item">\n        <div class="name one-line">{{name}}</div>\n        <div class="jid one-line">{{jid}}</div>\n    </div>\n</div>'},3103:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="account-item-wrap" data-jid="{{jid}}">\n    <div class="name one-line">{{jid}}</div>\n</div>'},43143:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="searching-panel">\n    <div class="search-wide search-form">\n        <div class="account-indicator ground-color-500"></div>\n        <i class="search-icon mdi mdi-24px mdi-magnify"></i>\n        <input type="text" class="search-input simple-input-field" tabindex="1" placeholder=\'{[print(xabber.getString("searching__placeholder_search_by_domain"))]}\'>\n        <i class="close-search-icon mdi mdi-24px mdi-close"></i>\n    </div>\n    <div class="searching-properties-field">\n        <div class="dropdown-button" data-visible="false">\n            <i class="mdi mdi-24px mdi-chevron-down arrow"></i>\n        </div>\n    </div>\n    <ul id="select-searching-properties" class="selectable-text">\n        <div class="account-property">\n            <p class="property-name">{[print(xabber.getString("searching__search_panel__label_account"))]}</p>\n            <div class="account-field">\n                <div class="multiple-acc">\n                    <div class="account-dropdown-wrap">\n                        <div class="dropdown-button" data-activates="select-account-for-searching">\n                            <div class="account-item-wrap">\n                            </div>\n                            <div class="caret">\n                                <i class="mdi mdi-20px mdi-menu-down"></i>\n                            </div>\n                        </div>\n                        <div id="select-account-for-searching" class="dropdown-content">\n                        </div>\n                    </div>\n                </div>\n                <div class="single-acc">\n                    <div class="dropdown-button">\n                        <div class="account-item-wrap">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="title-property">\n            <p class="property-name">{[print(xabber.getString("searching__search_panel__label_title"))]}</p>\n            <div class="input-field">\n                <input id="searching_property_title" type="text" name="title">\n            </div>\n        </div>\n        <div class="sorting-property">\n            <p class="property-name">{[print(xabber.getString("searching__search_panel__label_sort_by"))]}</p>\n            <div class="input-field">\n                <input id="searching_property_sort_by" type="text" name="title">\n            </div>\n        </div>\n        <button class="btn-search btn btn-main-filled ground-color-700">{[print(xabber.getString("search"))]}</button>\n    </ul>\n</div>\n<div class="searching-result-wrap">\n    <div class="chats-list-wrap">\n        <div class="result-string"></div>\n        <div class="preloader-wrapper preloader-17px active">\n            <div class="spinner-layer">\n                <div class="circle-clipper left">\n                    <div class="circle"></div>\n                </div>\n                <div class="gap-patch">\n                    <div class="circle"></div>\n                </div>\n                <div class="circle-clipper right">\n                    <div class="circle"></div>\n                </div>\n            </div></div>\n        <div class="chats-list"></div></div>\n    <div class="searching-more"></div>\n</div>'},53283:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/account-cancel" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M10,4 C7.790861,4 6,5.790861 6,8 C6,10.209139 7.790861,12 10,12 C12.209139,12 14,10.209139 14,8 C14,5.790861 12.209139,4 10,4 M17.5,13 C15,13 13,15 13,17.5 C13,20 15,22 17.5,22 C20,22 22,20 22,17.5 C22,15 20,13 17.5,13 M10,14 C5.58,14 2,15.79 2,18 L2,20 L11.5,20 C11.169935,19.2078439 11,18.3581691 11,17.5 C11.004284,16.3143165 11.3328048,15.1523902 11.95,14.14 C11.32,14.06 10.68,14 10,14 M17.5,14.5 C19.16,14.5 20.5,15.84 20.5,17.5 C20.5,18.06 20.35,18.58 20.08,19 L16,14.92 C16.42,14.65 16.94,14.5 17.5,14.5 M14.92,16 L19,20.08 C18.58,20.35 18.06,20.5 17.5,20.5 C15.84,20.5 14.5,19.16 14.5,17.5 C14.5,16.94 14.65,16.42 14.92,16 Z" id="mdi:account-cancel" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},20865:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/account-outline" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M19,19 L5,19 L5,5 L19,5 M19,3 L5,3 C3.8954305,3 3,3.8954305 3,5 L3,19 C3,20.1045695 3.8954305,21 5,21 L19,21 C20.1045695,21 21,20.1045695 21,19 L21,5 C21,3.89 20.1,3 19,3 M16.5,16.25 C16.5,14.75 13.5,14 12,14 C10.5,14 7.5,14.75 7.5,16.25 L7.5,17 L16.5,17 M12,12.25 C13.2426407,12.25 14.25,11.2426407 14.25,10 C14.25,8.75735931 13.2426407,7.75 12,7.75 C10.7573593,7.75 9.75,8.75735931 9.75,10 C9.75,11.2426407 10.7573593,12.25 12,12.25 Z" id="mdi:account-box-outline" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},32721:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/account" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M6,17 C6,15 10,13.9 12,13.9 C14,13.9 18,15 18,17 L18,18 L6,18 M15,9 C15,10.6568542 13.6568542,12 12,12 C10.3431458,12 9,10.6568542 9,9 C9,7.34314575 10.3431458,6 12,6 C13.6568542,6 15,7.34314575 15,9 M3,5 L3,19 C3,20.1045695 3.8954305,21 5,21 L19,21 C20.1045695,21 21,20.1045695 21,19 L21,5 C21,3.8954305 20.1045695,3 19,3 L5,3 C3.89,3 3,3.9 3,5 Z" id="mdi:account-box" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},66656:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/address-outline" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,6.5 C13.3807119,6.5 14.5,7.61928813 14.5,9 C14.5,9.66304122 14.2366079,10.298926 13.767767,10.767767 C13.298926,11.2366079 12.6630412,11.5 12,11.5 C10.6192881,11.5 9.5,10.3807119 9.5,9 C9.5,8.33695878 9.7633921,7.70107399 10.232233,7.23223305 C10.701074,6.7633921 11.3369588,6.5 12,6.5 M12,2 C15.8659932,2 19,5.13400675 19,9 C19,14.25 12,22 12,22 C12,22 5,14.25 5,9 C5,5.13400675 8.13400675,2 12,2 M12,4 C9.23857625,4 7,6.23857625 7,9 C7,10 7,12 12,18.71 C17,12 17,10 17,9 C17,6.23857625 14.7614237,4 12,4 L12,4 Z" id="mdi:map-marker-outline" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},94429:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/address" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,11.5 C10.6192881,11.5 9.5,10.3807119 9.5,9 C9.5,8.33695878 9.7633921,7.70107399 10.232233,7.23223305 C10.701074,6.7633921 11.3369588,6.5 12,6.5 C13.3807119,6.5 14.5,7.61928813 14.5,9 C14.5,9.66304122 14.2366079,10.298926 13.767767,10.767767 C13.298926,11.2366079 12.6630412,11.5 12,11.5 M12,2 C8.13400675,2 5,5.13400675 5,9 C5,14.25 12,22 12,22 C12,22 19,14.25 19,9 C19,5.13400675 15.8659932,2 12,2 Z" id="mdi:map-marker" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},47158:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/alarm-bell" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M15,18.66 L15,22 L5,22 L5,18.66 C8.09301265,20.4500491 11.9069873,20.4500491 15,18.66 M22,4 C22,2.8954305 21.1045695,2 20,2 C19.69,2 19.39,2.07 19.12,2.21 C18.82,2.36 18.56,2.58 18.36,2.85 C17.9280885,3.46077217 17.873744,4.26171236 18.219194,4.92522914 C18.564644,5.58874591 19.2519508,6.00355658 20,6 L20.24,6 C21.97,10.43 20.66,15.46 17,18.5 C16.68,18.75 16.35,19 16,19.22 L16,21 L17,21 L17,19.74 C20.14,17.5 22,13.86 22,10 C22,8.5 21.72,7 21.17,5.62 C21.69,5.24 22,4.64 22,4 M18,10 C18,12.1217319 17.1571453,14.1565632 15.6568542,15.6568542 C14.1565632,17.1571453 12.1217319,18 10,18 C5.581722,18 2,14.418278 2,10 C2,5.581722 5.581722,2 10,2 C12.1217319,2 14.1565632,2.84285472 15.6568542,4.34314575 C17.1571453,5.84343678 18,7.87826808 18,10 L18,10 Z" id="mdi:alarm-bell" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},55133:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/alert-circle" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M13,13 L11,13 L11,7 L13,7 M13,17 L11,17 L11,15 L13,15 M12,2 C6.4771525,2 2,6.4771525 2,12 C2,14.6521649 3.0535684,17.195704 4.92893219,19.0710678 C6.80429597,20.9464316 9.3478351,22 12,22 C14.6521649,22 17.195704,20.9464316 19.0710678,19.0710678 C20.9464316,17.195704 22,14.6521649 22,12 C22,9.3478351 20.9464316,6.80429597 19.0710678,4.92893219 C17.195704,3.0535684 14.6521649,2 12,2 Z" id="mdi:alert-circle" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},42703:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/alert" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M13,14 L11,14 L11,10 L13,10 M13,18 L11,18 L11,16 L13,16 M1,21 L23,21 L12,2 L1,21 Z" id="mdi:alert" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},31338:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/bank-circle" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,2 C6.5,2 2,6.5 2,12 C2,17.5 6.5,22 12,22 C17.5,22 22,17.5 22,12 C22,6.5 17.5,2 12,2 M17,17 L7,17 L7,15 L17,15 L17,17 M8,14 L8,11 L10,11 L10,14 L8,14 M11,14 L11,11 L13,11 L13,14 L11,14 M14,14 L14,11 L16,11 L16,14 L14,14 M17,10 L7,10 L7,8.5 L12,6 L17,8.5 L17,10 Z" id="mdi:bank-circle" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},14759:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/bell-off" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M20.84,22.73 L18.11,20 L3,20 L3,19 L5,17 L5,11 C5.00430327,9.85524651 5.28929416,8.72901748 5.83,7.72 L1.11,3 L2.39,1.73 L22.11,21.46 L20.84,22.73 Z M19.0000002,15.8 L19.0000002,11 C19.0007944,7.90366232 16.9672665,5.17466784 14,4.29 C14.0049007,4.19339544 14.0049007,4.09660456 14,4 C14,2.8954305 13.1045695,2 12,2 C10.8954305,2 10,2.8954305 10,4 C9.99507868,4.09660403 9.99507868,4.19339597 10,4.29 C9.385,4.474 8.8,4.743 8.26,5.09 L19.0000002,15.8 Z M12,23 C13.1045695,23 14,22.1045695 14,21 L10,21 C10,22.1045695 10.8954305,23 12,23 Z" id="mdi:bell-off" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},11713:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/bell-sleep" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M10,21 L14,21 C14,22.1045695 13.1045695,23 12,23 C10.8954305,23 10,22.1045695 10,21 Z M21,19 L21,20 L3,20 L3,19 L5,17 L5,11 C4.99920557,7.90366232 7.0327335,5.17466784 10,4.29 C9.99507868,4.19339597 9.99507868,4.09660403 10,4 C10,2.8954305 10.8954305,2 12,2 C13.1045695,2 14,2.8954305 14,4 C14.005,4.097 14.005,4.193 14,4.29 C16.9672665,5.17466784 19.0007944,7.90366232 19,11 L19,17 L21,19 L21,19 Z M15,9 L9,9 L9,11 L12.24,11 L9,13.7 L9,16 L15,16 L15,14 L11.76,14 L15,11.3 L15,9 Z" id="mdi:bell-sleep" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},55155:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/bell" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M21,19 L21,20 L3,20 L3,19 L5,17 L5,11 C4.99920557,7.90366232 7.0327335,5.17466784 10,4.29 C9.99507868,4.19339597 9.99507868,4.09660403 10,4 C10,2.8954305 10.8954305,2 12,2 C13.1045695,2 14,2.8954305 14,4 C14.005,4.097 14.005,4.193 14,4.29 C16.9672665,5.17466784 19.0007944,7.90366232 19,11 L19,17 L21,19 L21,19 Z M14,21 C14,22.1045695 13.1045695,23 12,23 C10.8954305,23 10,22.1045695 10,21 L14,21 Z" id="mdi:bell" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},23977:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/birthday-outline" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,6 C13.1045695,6 14,5.1045695 14,4 C14,3.62 13.9,3.27 13.71,2.97 L12,0 L10.29,2.97 C10.1,3.27 10,3.62 10,4 C10,5.1 10.9,6 12,6 M18,9 L13,9 L13,7 L11,7 L11,9 L6,9 C4.34,9 3,10.34 3,12 L3,21 C3,21.55 3.45,22 4,22 L20,22 C20.55,22 21,21.55 21,21 L21,12 C21,10.34 19.66,9 18,9 M19,20 L5,20 L5,17 C5.9,17 6.76,16.63 7.4,16 L8.5,14.92 L9.56,16 C10.87,17.3 13.15,17.29 14.45,16 L15.53,14.92 L16.6,16 C17.24,16.63 18.1,17 19,17 L19,20 M19,15.5 C18.5,15.5 18,15.3 17.65,14.93 L15.5,12.8 L13.38,14.93 C12.64,15.67 11.35,15.67 10.61,14.93 L8.5,12.8 L6.34,14.93 C6,15.29 5.5,15.5 5,15.5 L5,12 C5,11.45 5.45,11 6,11 L18,11 C18.55,11 19,11.45 19,12 L19,15.5 Z" id="mdi:cake-variant-outline" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},74741:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/birthday" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,7 C13.11,7 14,6.1 14,5 C14,4.62 13.9,4.27 13.71,3.97 L12,1 L10.29,3.97 C10.1,4.27 10,4.62 10,5 C10,6.1045695 10.8954305,7 12,7 M16.6,17 L15.53,15.92 L14.45,17 C13.15,18.29 10.87,18.3 9.56,17 L8.5,15.92 L7.4,17 C6.75,17.64 5.88,18 4.96,18 C4.23,18 3.56,17.77 3,17.39 L3,22 C3,22.5522847 3.44771525,23 4,23 L20,23 C20.5522847,23 21,22.5522847 21,22 L21,17.39 C20.44,17.77 19.77,18 19.04,18 C18.12,18 17.25,17.64 16.6,17 M18,10 L13,10 L13,8 L11,8 L11,10 L6,10 C4.34314575,10 3,11.3431458 3,13 L3,14.54 C3,15.62 3.88,16.5 4.96,16.5 C5.5,16.5 6,16.3 6.34,15.93 L8.5,13.8 L10.61,15.93 C11.35,16.67 12.64,16.67 13.38,15.93 L15.5,13.8 L17.65,15.93 C18,16.3 18.5,16.5 19.03,16.5 C20.11,16.5 21,15.62 21,14.54 L21,13 C21,11.3431458 19.6568542,10 18,10 Z" id="mdi:cake-variant" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},89768:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/blocked-add" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M20,15 L20,18 L23,18 L23,20 L20,20 L20,23 L18,23 L18,20 L15,20 L15,18 L18,18 L18,15 L20,15 Z M12,2 C17.5,2 22,6.5 22,12 C22,12.5859564 21.9489239,13.1605626 21.851004,13.7195862 C21.2621133,13.4007388 20.6141835,13.1778427 19.9277796,13.0712956 C19.9754227,12.7216453 20,12.3635535 20,12 C20,10.1 19.4,8.4 18.3,7.1 L7.1,18.3 C8.5,19.3 10.2,20 12,20 C12.3635535,20 12.7216453,19.9754227 13.0726961,19.9278476 C13.1778427,20.6141835 13.4007388,21.2621133 13.719191,21.8507762 C13.1605626,21.9489239 12.5859564,22 12,22 C6.5,22 2,17.5 2,12 C2,6.5 6.5,2 12,2 Z M12,4 C7.6,4 4,7.6 4,12 C4,13.7882353 4.53148789,15.399308 5.51109302,16.6664767 L5.7,16.9 L16.9,5.7 C15.6,4.6 13.9,4 12,4 Z" id="xabber:block-add" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},33574:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="badge/icon/blocked" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="Bounds" x="0" y="0" width="16" height="16"></rect>\n        <path d="M8,1 C11.8659932,1 15,4.13400675 15,8 C15,11.8659932 11.8659932,15 8,15 C4.13400675,15 1,11.8659932 1,8 C1,4.13400675 4.13400675,1 8,1 Z M12.3574649,4.64359326 L4.64359326,12.3574649 C5.57228864,13.073866 6.73637986,13.5 8,13.5 C11.0375661,13.5 13.5,11.0375661 13.5,8 C13.5,6.73637986 13.073866,5.57228864 12.3574649,4.64359326 Z M8,2.5 C4.96243388,2.5 2.5,4.96243388 2.5,8 C2.5,9.26408031 2.92644441,10.4285592 3.64331784,11.3574212 L11.3574212,3.64331784 C10.4285592,2.92644441 9.26408031,2.5 8,2.5 Z" id="blocked" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},94862:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="badge/icon/bot-variant" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="Bounds" x="0" y="0" width="16" height="16"></rect>\n        <path d="M8,3.5 C9.93299662,3.5 11.5,5.06700338 11.5,7 L11.5,9.5 C11.5,11.1568542 9.93299662,12.5 8,12.5 C6.06700338,12.5 4.5,11.1568542 4.5,9.5 L4.5,7 L4.50517886,6.8079648 C4.60487355,4.9642776 6.1314366,3.5 8,3.5 Z M8,5 C6.9456382,5 6.08183488,5.81587779 6.00548574,6.85073766 L6,7 L6,8 C6,8.82842712 6.8954305,9.5 8,9.5 C9.1045695,9.5 10,8.82842712 10,8 L10,7 C10,5.8954305 9.1045695,5 8,5 Z M3.5,6 C3.77614237,6 4,6.22385763 4,6.5 L4,9.5 C4,9.77614237 3.77614237,10 3.5,10 C3.22385763,10 3,9.77614237 3,9.5 L3,6.5 C3,6.22385763 3.22385763,6 3.5,6 Z M12.5,6 C12.7761424,6 13,6.22385763 13,6.5 L13,9.5 C13,9.77614237 12.7761424,10 12.5,10 C12.2238576,10 12,9.77614237 12,9.5 L12,6.5 C12,6.22385763 12.2238576,6 12.5,6 Z" id="Bot" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},29568:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="badge/icon/bot" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="Bounds" x="0" y="0" width="16" height="16"></rect>\n        <path d="M8.5,2.9 C8.83137085,2.9 9.1,3.16862915 9.1,3.5 C9.1,3.6775201 9.02290618,3.83703397 8.9003726,3.94688754 L8.899,4.999 L11,5 C11.5522847,5 12,5.44771525 12,6 L12,7 C12.2761424,7 12.5,7.22385763 12.5,7.5 L12.5,8.5 C12.5,8.77614237 12.2761424,9 12,9 L12,11 C12,11.5522847 11.5522847,12 11,12 L5,12 C4.44771525,12 4,11.5522847 4,11 L4,9 C3.72385763,9 3.5,8.77614237 3.5,8.5 L3.5,7.5 C3.5,7.22385763 3.72385763,7 4,7 L4,6 C4,5.44771525 4.44771525,5 5,5 L8.1,4.999 L8.0996274,3.94688754 C7.97709382,3.83703397 7.9,3.6775201 7.9,3.5 C7.9,3.16862915 8.16862915,2.9 8.5,2.9 Z M9.5,10 L6.5,10 C6.22385763,10 6,10.2238576 6,10.5 C6,10.7761424 6.22385763,11 6.5,11 L9.5,11 C9.77614237,11 10,10.7761424 10,10.5 C10,10.2238576 9.77614237,10 9.5,10 Z M6.5,6 C6.22385763,6 6,6.22385763 6,6.5 L6,7 L5.5,7 C5.22385763,7 5,7.22385763 5,7.5 C5,7.77614237 5.22385763,8 5.5,8 L6,8 L6,8.5 C6,8.77614237 6.22385763,9 6.5,9 C6.77614237,9 7,8.77614237 7,8.5 L7,8 L7.5,8 C7.77614237,8 8,7.77614237 8,7.5 C8,7.22385763 7.77614237,7 7.5,7 L7,7 L7,6.5 C7,6.22385763 6.77614237,6 6.5,6 Z M9.5,7 C9.22385763,7 9,7.22385763 9,7.5 C9,7.77614237 9.22385763,8 9.5,8 C9.77614237,8 10,7.77614237 10,7.5 C10,7.22385763 9.77614237,7 9.5,7 Z" id="bot" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},89965:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/bug" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M14,12 L10,12 L10,10 L14,10 M14,16 L10,16 L10,14 L14,14 M20,8 L17.19,8 C16.7389578,7.21773668 16.1167554,6.54767256 15.37,6.04 L17,4.41 L15.59,3 L13.42,5.17 C12.4901518,4.94442551 11.5198482,4.94442551 10.59,5.17 L8.41,3 L7,4.41 L8.62,6.04 C7.88,6.55 7.26,7.22 6.81,8 L4,8 L4,10 L6.09,10 C6.04,10.33 6,10.66 6,11 L6,12 L4,12 L4,14 L6,14 L6,15 C6,15.34 6.04,15.67 6.09,16 L4,16 L4,18 L6.81,18 C7.85,19.79 9.78,21 12,21 C14.22,21 16.15,19.79 17.19,18 L20,18 L20,16 L17.91,16 C17.96,15.67 18,15.34 18,15 L18,14 L20,14 L20,12 L18,12 L18,11 C18,10.66 17.96,10.33 17.91,10 L20,10 L20,8 Z" id="mdi:bug" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},16938:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/call-outline" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M20,15.5 C18.8,15.5 17.5,15.3 16.4,14.9 C16.3,14.9 16.2,14.9 16.1,14.9 C15.8,14.9 15.6,15 15.4,15.2 L13.2,17.4 C10.4,15.9 8,13.6 6.6,10.8 L8.8,8.6 C9.1,8.3 9.2,7.9 9,7.6 C8.7,6.5 8.5,5.2 8.5,4 C8.5,3.5 8,3 7.5,3 L4,3 C3.5,3 3,3.5 3,4 C3,13.4 10.6,21 20,21 C20.5,21 21,20.5 21,20 L21,16.5 C21,16 20.5,15.5 20,15.5 L20,15.5 Z M5,5 L6.5,5 C6.6,5.9 6.8,6.8 7,7.6 L5.8,8.8 C5.4,7.6 5.1,6.3 5,5 L5,5 Z M19,19 C17.7,18.9 16.4,18.6 15.2,18.2 L16.4,17 C17.2,17.2 18.1,17.4 19,17.4 L19,19 Z" id="mdi:phone-outline" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},9530:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/call" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M6.62,10.79 C8.06,13.62 10.38,15.94 13.21,17.38 L15.41,15.18 C15.69,14.9 16.08,14.82 16.43,14.93 C17.55,15.3 18.75,15.5 20,15.5 C20.5522847,15.5 21,15.9477153 21,16.5 L21,20 C21,20.5522847 20.5522847,21 20,21 C10.6111593,21 3,13.3888407 3,4 C3,3.73478351 3.10535684,3.4804296 3.29289322,3.29289322 C3.4804296,3.10535684 3.73478351,3 4,3 L7.5,3 C8.05228475,3 8.5,3.44771525 8.5,4 C8.5,5.25 8.7,6.45 9.07,7.57 C9.18,7.92 9.1,8.31 8.82,8.59 L6.62,10.79 Z" id="mdi:phone" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},25430:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/camera-retake" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M20,5 L17,5 L15,3 L9,3 L7,5 L4,5 C2.8954305,5 2,5.8954305 2,7 L2,19 C2,20.1045695 2.8954305,21 4,21 L20,21 C21.1045695,21 22,20.1045695 22,19 L22,7 C22,5.8954305 21.1045695,5 20,5 M12,18.0000026 C10.92,18.0000026 9.86,17.65 9,17 L10.44,15.56 C10.91,15.85 11.45,16 12,16 C13.6568542,16 15,14.6568542 15,13 C15,11.3431458 13.6568542,10 12,10 C10.74,10 9.6,10.8 9.18,12 L11,12 L8,15 L5,12 L7.1,12 C7.36424064,10.6999079 8.13463224,9.5582575 9.24136868,8.82668596 C10.3481051,8.09511441 11.7003328,7.83367752 13,8.1 C15.5173928,8.61117175 17.2378687,10.9467344 16.9797109,13.5024961 C16.7215532,16.0582577 14.5687655,18.0025816 12,18.0000026 L12,18.0000026 Z" id="mdi:camera-retake" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},26716:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/camera" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M4,5 L7,5 L9,3 L15,3 L17,5 L20,5 C21.1045695,5 22,5.8954305 22,7 L22,19 C22,20.1045695 21.1045695,21 20,21 L4,21 C2.8954305,21 2,20.1045695 2,19 L2,7 C2,5.8954305 2.8954305,5 4,5 M12,8 C9.23857625,8 7,10.2385763 7,13 C7,15.7614237 9.23857625,18 12,18 C14.7614237,18 17,15.7614237 17,13 C17,10.2385763 14.7614237,8 12,8 M12,10 C13.6568542,10 15,11.3431458 15,13 C15,14.6568542 13.6568542,16 12,16 C10.3431458,16 9,14.6568542 9,13 C9,11.3431458 10.3431458,10 12,10 Z" id="mdi:camera" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},80595:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/cancel" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,2 C14.6521649,2 17.195704,3.0535684 19.0710678,4.92893219 C20.9464316,6.80429597 22,9.3478351 22,12 C22,17.5228475 17.5228475,22 12,22 C9.3478351,22 6.80429597,20.9464316 4.92893219,19.0710678 C3.0535684,17.195704 2,14.6521649 2,12 C2,9.3478351 3.0535684,6.80429597 4.92893219,4.92893219 C6.80429597,3.0535684 9.3478351,2 12,2 M12,3.99999926 C7.581722,3.99999926 4,7.581722 4,11.9999993 C4,13.85 4.63,15.55 5.68,16.91 L16.91,5.68 C15.505295,4.59031127 13.7778124,3.99923779 12,3.99999926 M12,20.0000007 C16.418278,20.0000007 20,16.418278 20,12 C20,10.15 19.37,8.45 18.32,7.09 L7.09,18.32 C8.49470497,19.4096887 10.2221876,20.0007622 12,20.0000007 L12,20.0000007 Z" id="mdi:cancel" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},40203:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="badge/icon/channel" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="Bounds" x="0" y="0" width="16" height="16"></rect>\n        <path d="M6.5,12.5 C6.5,12.7761424 6.27614237,13 6,13 L5,13 C4.72385763,13 4.5,12.7761424 4.5,12.5 L4.5,9.997 L4.02563513,9.99796942 C3.49695533,9.99796942 3.06170233,9.63379568 3.00601829,9.10979782 L3,8.99514074 L3,7 C3,6.44278422 3.50172034,6 4.02563513,6 L8,6 L11,4 L11,12 L8,9.99796942 L6.5,9.997 L6.5,12.5 Z M12,6 C12.7835446,6.37375602 13.2808221,7.14951331 13.2820439,8 C13.2882682,8.85255761 12.7887168,9.63186239 12,10 L12,6 Z" id="Horn" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},71714:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/chat" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M20,2 L4,2 C2.8954305,2 2,2.8954305 2,4 L2,22 L6,18 L20,18 C21.1045695,18 22,17.1045695 22,16 L22,4 C22,2.8954305 21.1045695,2 20,2 M6,9 L18,9 L18,11 L6,11 M14,14 L6,14 L6,12 L14,12 M18,8 L6,8 L6,6 L18,6" id="mdi:message-text" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},62633:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/check-circle" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,2 C6.5,2 2,6.5 2,12 C2,17.5 6.5,22 12,22 C17.5,22 22,17.5 22,12 C22,6.5 17.5,2 12,2 M10,17 L5,12 L6.41,10.59 L10,14.17 L17.59,6.58 L19,8 L10,17 Z" id="mdi:check-circle" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},26446:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/check" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <polygon id="check" fill="#000000" fill-rule="nonzero" points="21 7 9 19 3.5 13.5 4.91 12.09 9 16.17 19.59 5.59"></polygon>\n    </g>\n</svg>'},79353:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/chevron-down" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <polygon id="mdi:chevron-down" fill="#000000" fill-rule="nonzero" points="7.41 8.58 12 13.17 16.59 8.58 18 10 12 16 6 10"></polygon>\n    </g>\n</svg>'},32011:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/chevron-left-variant" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <polygon id="xabber:chevron-right" fill="#000000" fill-rule="nonzero" transform="translate(11.5, 12) scale(-1, 1) translate(-11.5, -12)" points="7 18.5 13.5 12 7 5.5 8.25 4.25 16 12 8.25 19.75"></polygon>\n    </g>\n</svg>'},19297:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/chevron-right-variant" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <polygon id="xabber:chevron-right" fill="#000000" fill-rule="nonzero" points="8 18.5 14.5 12 8 5.5 9.25 4.25 17 12 9.25 19.75"></polygon>\n    </g>\n</svg>'},45013:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/circle-slice-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,2 C17.5,2 22,6.5 22,12 C22,17.5 17.5,22 12,22 C6.5,22 2,17.5 2,12 C2,6.5 6.5,2 12,2 M12,4 C7.58,4 4,7.58 4,12 C4,16.42 7.58,20 12,20 C16.42,20 20,16.42 20,12 C20,7.58 16.42,4 12,4 M12,5 C13.93,5 15.68,5.78 16.95,7.05 L12,12 L12,5 Z" id="mdi:circle-slice-1" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},15460:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/circle-slice-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,2 C17.5,2 22,6.5 22,12 C22,17.5 17.5,22 12,22 C6.5,22 2,17.5 2,12 C2,6.5 6.5,2 12,2 M12,4 C7.58,4 4,7.58 4,12 C4,16.42 7.58,20 12,20 C16.42,20 20,16.42 20,12 C20,7.58 16.42,4 12,4 M12,5 C15.87,5 19,8.13 19,12 L12,12 L12,5 Z" id="mdi:circle-slice-2" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},56377:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/circle-slice-3" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,2 C17.5,2 22,6.5 22,12 C22,17.5 17.5,22 12,22 C6.5,22 2,17.5 2,12 C2,6.5 6.5,2 12,2 M12,4 C7.58,4 4,7.58 4,12 C4,16.42 7.58,20 12,20 C16.42,20 20,16.42 20,12 C20,7.58 16.42,4 12,4 M12,5 C15.87,5 19,8.13 19,12 C19,13.93 18.22,15.68 16.95,16.95 L12,12 L12,5 Z" id="mdi:circle-slice-3" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},63363:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/circle-slice-4" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,2 C17.5,2 22,6.5 22,12 C22,17.5 17.5,22 12,22 C6.5,22 2,17.5 2,12 C2,6.5 6.5,2 12,2 M12,4 C7.58,4 4,7.58 4,12 C4,16.42 7.58,20 12,20 C16.42,20 20,16.42 20,12 C20,7.58 16.42,4 12,4 M12,5 C15.87,5 19,8.13 19,12 C19,15.87 15.87,19 12,19 L12,5 Z" id="mdi:circle-slice-4" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},53161:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/circle-slice-5" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,2 C17.5,2 22,6.5 22,12 C22,17.5 17.5,22 12,22 C6.5,22 2,17.5 2,12 C2,6.5 6.5,2 12,2 M12,4 C7.58,4 4,7.58 4,12 C4,16.42 7.58,20 12,20 C16.42,20 20,16.42 20,12 C20,7.58 16.42,4 12,4 M12,5 C15.87,5 19,8.13 19,12 C19,15.87 15.87,19 12,19 C10.07,19 8.32,18.22 7.05,16.95 L12,12 L12,5 Z" id="mdi:circle-slice-5" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},90100:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/circle-slice-6" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,2 C17.5,2 22,6.5 22,12 C22,17.5 17.5,22 12,22 C6.5,22 2,17.5 2,12 C2,6.5 6.5,2 12,2 M12,4 C7.58,4 4,7.58 4,12 C4,16.42 7.58,20 12,20 C16.42,20 20,16.42 20,12 C20,7.58 16.42,4 12,4 M12,5 C15.87,5 19,8.13 19,12 C19,15.87 15.87,19 12,19 C8.13,19 5,15.87 5,12 L12,12 L12,5 Z" id="mdi:circle-slice-6" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},47263:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/circle-slice-7" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,2 C17.5,2 22,6.5 22,12 C22,17.5 17.5,22 12,22 C6.5,22 2,17.5 2,12 C2,6.5 6.5,2 12,2 M12,4 C7.58,4 4,7.58 4,12 C4,16.42 7.58,20 12,20 C16.42,20 20,16.42 20,12 C20,7.58 16.42,4 12,4 M12,5 C15.87,5 19,8.13 19,12 C19,15.87 15.87,19 12,19 C8.13,19 5,15.87 5,12 C5,10.07 5.78,8.32 7.05,7.05 L12,12 L12,5 Z" id="mdi:circle-slice-7" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},16472:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/circle-slice-8" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,5 C15.87,5 19,8.13 19,12 C19,15.87 15.87,19 12,19 C8.13,19 5,15.87 5,12 C5,8.13 8.13,5 12,5 M12,2 C17.5,2 22,6.5 22,12 C22,17.5 17.5,22 12,22 C6.5,22 2,17.5 2,12 C2,6.5 6.5,2 12,2 M12,4 C7.58,4 4,7.58 4,12 C4,16.42 7.58,20 12,20 C16.42,20 20,16.42 20,12 C20,7.58 16.42,4 12,4 Z" id="mdi:circle-slice-8" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},47033:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/circles-outline" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M8.61510772,4.31938417 C8.28417501,5.13922603 8.07752033,6.02134442 8.01792471,6.94352205 L7.91776678,6.99321105 C5.73983381,8.11301495 4.25,10.3825228 4.25,13 C4.25,16.7279221 7.27207794,19.75 11,19.75 C13.6571359,19.75 15.9556781,18.2146777 17.0568945,15.9827652 C17.9787775,15.9224511 18.8608306,15.7158021 19.6796219,15.3853225 C18.6352051,19.1981743 15.1448033,22 11,22 C6.02943725,22 2,17.9705627 2,13 C2,8.85508685 4.80197429,5.36460986 8.61510772,4.31938417 Z M16.5,1 C20.0898509,1 23,3.91014913 23,7.5 C23,11.0898509 20.0898509,14 16.5,14 C12.9101491,14 10,11.0898509 10,7.5 C10,3.91014913 12.9101491,1 16.5,1 Z M16.5,3 C14.0147186,3 12,5.01471863 12,7.5 C12,9.98528137 14.0147186,12 16.5,12 C18.9852814,12 21,9.98528137 21,7.5 C21,5.01471863 18.9852814,3 16.5,3 Z" id="xabber:circles-outline" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},61265:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/circles" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M8.61467749,4.32037814 C8.21824496,5.30257332 8,6.37579974 8,7.5 C8,12.1944204 11.8055796,16 16.5,16 C17.6242003,16 18.6974267,15.781755 19.6796219,15.3853225 C18.6352051,19.1981743 15.1448033,22 11,22 C6.02943725,22 2,17.9705627 2,13 C2,8.91703774 4.71884223,5.46909511 8.44481526,4.36788353 L8.61467749,4.32037814 Z M16.5,1 C20.0898509,1 23,3.91014913 23,7.5 C23,11.0898509 20.0898509,14 16.5,14 C12.9101491,14 10,11.0898509 10,7.5 C10,3.91014913 12.9101491,1 16.5,1 Z" id="xabber:circles" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},52773:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/client-outline" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M23,4.5 C23,6.43 21.43,8 19.5,8 C17.57,8 16,6.43 16,4.5 C16,2.57 17.57,1 19.5,1 C21.43,1 23,2.57 23,4.5 M19.5,10 L19,10 L19,19 L5,19 L5,5 L14.03,5 C14,4.84 14,4.67 14,4.5 C14,4 14.08,3.5 14.21,3 L5,3 C3.89,3 3,3.89 3,5 L3,19 C3,20.1045695 3.8954305,21 5,21 L19,21 C20.11,21 21,20.11 21,19 L21,9.79 C20.5,9.92 20,10 19.5,10 Z" id="mdi:checkbox-blank-badge-outline" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},6625:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/client" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M23,4.5 C23,6.43 21.43,8 19.5,8 C17.57,8 16,6.43 16,4.5 C16,2.57 17.57,1 19.5,1 C21.43,1 23,2.57 23,4.5 M19.5,10 C16.4647165,9.9944963 14.0055037,7.53528349 14,4.5 C14,4 14.08,3.5 14.21,3 L5,3 C3.89,3 3,3.89 3,5 L3,19 C3,20.1045695 3.8954305,21 5,21 L19,21 C20.11,21 21,20.11 21,19 L21,9.79 C20.5,9.92 20,10 19.5,10 Z" id="mdi:checkout-blank-badge" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},93813:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/clock-outline" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,20 C16.418278,20 20,16.418278 20,12 C20,7.581722 16.418278,4 12,4 C7.581722,4 4,7.581722 4,12 C4,16.418278 7.581722,20 12,20 M12,2 C14.6521649,2 17.195704,3.0535684 19.0710678,4.92893219 C20.9464316,6.80429597 22,9.3478351 22,12 C22,17.5228475 17.5228475,22 12,22 C6.47,22 2,17.5 2,12 C2,6.4771525 6.4771525,2 12,2 M12.5,7 L12.5,12.25 L17,14.92 L16.25,16.15 L11,13 L11,7 L12.5,7 Z" id="mdi:clock-outline" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},70874:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/close" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <polygon id="mdi:close" fill="#000000" fill-rule="nonzero" points="19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12"></polygon>\n    </g>\n</svg>'},55696:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/cloud" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M19.35,10.03 C18.67,6.59 15.64,4 12,4 C9.11,4 6.6,5.64 5.35,8.03 C2.34,8.36 0,10.9 0,14 C0,17.3137085 2.6862915,20 6,20 L19,20 C20.3260824,20 21.597852,19.4732158 22.5355339,18.5355339 C23.4732158,17.597852 24,16.3260824 24,15 C24,12.36 21.95,10.22 19.35,10.03 Z" id="mdi:cloud" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},4641:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/code" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M18.5,15 C19.3284271,15 20,15.6715729 20,16.5 L20,18.5 C20,19.3284271 19.3284271,20 18.5,20 C17.6715729,20 17,19.3284271 17,18.5 L17,16.5 C17,15.6715729 17.6715729,15 18.5,15 Z M18.5,16 C18.2545401,16 18.0503916,16.1768752 18.0080557,16.4101244 L18,16.5 L18,18.5 C18,18.7761424 18.2238576,19 18.5,19 C18.7454599,19 18.9496084,18.8231248 18.9919443,18.5898756 L19,18.5 L19,16.5 C19,16.2238576 18.7761424,16 18.5,16 Z M14.5,15 C15.3284271,15 16,15.6715729 16,16.5 L16,18.5 C16,19.3284271 15.3284271,20 14.5,20 C13.6715729,20 13,19.3284271 13,18.5 L13,16.5 C13,15.6715729 13.6715729,15 14.5,15 Z M14.5,16 C14.2545401,16 14.0503916,16.1768752 14.0080557,16.4101244 L14,16.5 L14,18.5 C14,18.7761424 14.2238576,19 14.5,19 C14.7454599,19 14.9496084,18.8231248 14.9919443,18.5898756 L15,18.5 L15,16.5 C15,16.2238576 14.7761424,16 14.5,16 Z M10.5,15 C11.3284271,15 12,15.6715729 12,16.5 L12,18.5 C12,19.3284271 11.3284271,20 10.5,20 C9.67157288,20 9,19.3284271 9,18.5 L9,16.5 C9,15.6715729 9.67157288,15 10.5,15 Z M10.5,16 C10.2545401,16 10.0503916,16.1768752 10.0080557,16.4101244 L10,16.5 L10,18.5 C10,18.7761424 10.2238576,19 10.5,19 C10.7454599,19 10.9496084,18.8231248 10.9919443,18.5898756 L11,18.5 L11,16.5 C11,16.2238576 10.7761424,16 10.5,16 Z M7.5,15 C7.77614237,15 8,15.2238576 8,15.5 L8,19.5 C8,19.7761424 7.77614237,20 7.5,20 C7.22385763,20 7,19.7761424 7,19.5 L7,15.5 C7,15.2238576 7.22385763,15 7.5,15 Z M5.5,15 C5.77614237,15 6,15.2238576 6,15.5 L6,19.5 C6,19.7761424 5.77614237,20 5.5,20 C5.22385763,20 5,19.7761424 5,19.5 L5,15.5 C5,15.2238576 5.22385763,15 5.5,15 Z M3.5,15 C3.77614237,15 4,15.2238576 4,15.5 L4,19.5 C4,19.7761424 3.77614237,20 3.5,20 C3.22385763,20 3,19.7761424 3,19.5 L3,15.5 C3,15.2238576 3.22385763,15 3.5,15 Z M19.5,9 C19.7761424,9 20,9.22385763 20,9.5 L20,13.5 C20,13.7761424 19.7761424,14 19.5,14 C19.2238576,14 19,13.7761424 19,13.5 L19,9.5 C19,9.22385763 19.2238576,9 19.5,9 Z M16.5,9 C17.3284271,9 18,9.67157288 18,10.5 L18,12.5 C18,13.3284271 17.3284271,14 16.5,14 C15.6715729,14 15,13.3284271 15,12.5 L15,10.5 C15,9.67157288 15.6715729,9 16.5,9 Z M16.5,10 C16.2545401,10 16.0503916,10.1768752 16.0080557,10.4101244 L16,10.5 L16,12.5 C16,12.7761424 16.2238576,13 16.5,13 C16.7454599,13 16.9496084,12.8231248 16.9919443,12.5898756 L17,12.5 L17,10.5 C17,10.2238576 16.7761424,10 16.5,10 Z M13.5,9 C13.7761424,9 14,9.22385763 14,9.5 L14,13.5 C14,13.7761424 13.7761424,14 13.5,14 C13.2238576,14 13,13.7761424 13,13.5 L13,9.5 C13,9.22385763 13.2238576,9 13.5,9 Z M10.5,9 C11.3284271,9 12,9.67157288 12,10.5 L12,12.5 C12,13.3284271 11.3284271,14 10.5,14 C9.67157288,14 9,13.3284271 9,12.5 L9,10.5 C9,9.67157288 9.67157288,9 10.5,9 Z M10.5,10 C10.2545401,10 10.0503916,10.1768752 10.0080557,10.4101244 L10,10.5 L10,12.5 C10,12.7761424 10.2238576,13 10.5,13 C10.7454599,13 10.9496084,12.8231248 10.9919443,12.5898756 L11,12.5 L11,10.5 C11,10.2238576 10.7761424,10 10.5,10 Z M6.5,9 C7.32842712,9 8,9.67157288 8,10.5 L8,12.5 C8,13.3284271 7.32842712,14 6.5,14 C5.67157288,14 5,13.3284271 5,12.5 L5,10.5 C5,9.67157288 5.67157288,9 6.5,9 Z M6.5,10 C6.25454011,10 6.05039163,10.1768752 6.00805567,10.4101244 L6,10.5 L6,12.5 C6,12.7761424 6.22385763,13 6.5,13 C6.74545989,13 6.94960837,12.8231248 6.99194433,12.5898756 L7,12.5 L7,10.5 C7,10.2238576 6.77614237,10 6.5,10 Z M3.5,9 C3.77614237,9 4,9.22385763 4,9.5 L4,13.5 C4,13.7761424 3.77614237,14 3.5,14 C3.22385763,14 3,13.7761424 3,13.5 L3,9.5 C3,9.22385763 3.22385763,9 3.5,9 Z M19.5,3 C19.7761424,3 20,3.22385763 20,3.5 L20,7.5 C20,7.77614237 19.7761424,8 19.5,8 C19.2238576,8 19,7.77614237 19,7.5 L19,3.5 C19,3.22385763 19.2238576,3 19.5,3 Z M17.5,3 C17.7761424,3 18,3.22385763 18,3.5 L18,7.5 C18,7.77614237 17.7761424,8 17.5,8 C17.2238576,8 17,7.77614237 17,7.5 L17,3.5 C17,3.22385763 17.2238576,3 17.5,3 Z M14.5,3 C15.3284271,3 16,3.67157288 16,4.5 L16,6.5 C16,7.32842712 15.3284271,8 14.5,8 C13.6715729,8 13,7.32842712 13,6.5 L13,4.5 C13,3.67157288 13.6715729,3 14.5,3 Z M14.5,4 C14.2545401,4 14.0503916,4.17687516 14.0080557,4.41012437 L14,4.5 L14,6.5 C14,6.77614237 14.2238576,7 14.5,7 C14.7454599,7 14.9496084,6.82312484 14.9919443,6.58987563 L15,6.5 L15,4.5 C15,4.22385763 14.7761424,4 14.5,4 Z M10.5,3 C11.3284271,3 12,3.67157288 12,4.5 L12,6.5 C12,7.32842712 11.3284271,8 10.5,8 C9.67157288,8 9,7.32842712 9,6.5 L9,4.5 C9,3.67157288 9.67157288,3 10.5,3 Z M10.5,4 C10.2545401,4 10.0503916,4.17687516 10.0080557,4.41012437 L10,4.5 L10,6.5 C10,6.77614237 10.2238576,7 10.5,7 C10.7454599,7 10.9496084,6.82312484 10.9919443,6.58987563 L11,6.5 L11,4.5 C11,4.22385763 10.7761424,4 10.5,4 Z M7.5,3 C7.77614237,3 8,3.22385763 8,3.5 L8,7.5 C8,7.77614237 7.77614237,8 7.5,8 C7.22385763,8 7,7.77614237 7,7.5 L7,3.5 C7,3.22385763 7.22385763,3 7.5,3 Z M4.5,3 C5.32842712,3 6,3.67157288 6,4.5 L6,6.5 C6,7.32842712 5.32842712,8 4.5,8 C3.67157288,8 3,7.32842712 3,6.5 L3,4.5 C3,3.67157288 3.67157288,3 4.5,3 Z M4.5,4 C4.25454011,4 4.05039163,4.17687516 4.00805567,4.41012437 L4,4.5 L4,6.5 C4,6.77614237 4.22385763,7 4.5,7 C4.74545989,7 4.94960837,6.82312484 4.99194433,6.58987563 L5,6.5 L5,4.5 C5,4.22385763 4.77614237,4 4.5,4 Z" id="xabber.code" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},63272:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/contact-add" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M15,14 C12.33,14 7,15.33 7,18 L7,20 L23,20 L23,18 C23,15.33 17.67,14 15,14 M6,10 L6,7.5 L4,7.5 L4,10 L1.5,10 L1.5,12 L4,12 L4,14.5 L6,14.5 L6,12 L8.5,12 L8.5,10 M15,12 C17.209139,12 19,10.209139 19,8 C19,5.790861 17.209139,4 15,4 C12.790861,4 11,5.790861 11,8 C11,10.209139 12.790861,12 15,12 Z" id="xabber:contact-add" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},57197:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/crosshairs-gps" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,8 C14.209139,8 16,9.790861 16,12 C16,14.209139 14.209139,16 12,16 C9.790861,16 8,14.209139 8,12 C8,9.790861 9.790861,8 12,8 M3.05,13 L1,13 L1,11 L3.05,11 C3.5,6.83 6.83,3.5 11,3.05 L11,1 L13,1 L13,3.05 C17.17,3.5 20.5,6.83 20.95,11 L23,11 L23,13 L20.95,13 C20.5,17.17 17.17,20.5 13,20.95 L13,23 L11,23 L11,20.95 C6.83,20.5 3.5,17.17 3.05,13 M12,5 C8.13400675,5 5,8.13400675 5,12 C5,15.8659932 8.13400675,19 12,19 C15.8659932,19 19,15.8659932 19,12 C19,8.13400675 15.8659932,5 12,5 L12,5 Z" id="mdi:crosshairs-gps" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},40765:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/crosshairs-question" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M3.05,13 L1,13 L1,11 L3.05,11 C3.5,6.83 6.83,3.5 11,3.05 L11,1 L13,1 L13,3.05 C17.17,3.5 20.5,6.83 20.95,11 L23,11 L23,13 L20.95,13 C20.5,17.17 17.17,20.5 13,20.95 L13,23 L11,23 L11,20.95 C6.83,20.5 3.5,17.17 3.05,13 M12,5 C8.13,5 5,8.13 5,12 C5,15.87 8.13,19 12,19 C15.87,19 19,15.87 19,12 C19,8.13 15.87,5 12,5 M11.13,17.25 L12.88,17.25 L12.88,15.5 L11.13,15.5 L11.13,17.25 M12,6.75 C10.07,6.75 8.5,8.32 8.5,10.25 L10.25,10.25 C10.25,9.28 11.03,8.5 12,8.5 C12.97,8.5 13.75,9.28 13.75,10.25 C13.75,12 11.13,11.78 11.13,14.63 L12.88,14.63 C12.88,12.66 15.5,12.44 15.5,10.25 C15.5,8.32 13.93,6.75 12,6.75 Z" id="mdi:crosshairs-question" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},82823:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/crosshairs" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M3.05,13 L1,13 L1,11 L3.05,11 C3.5,6.83 6.83,3.5 11,3.05 L11,1 L13,1 L13,3.05 C17.17,3.5 20.5,6.83 20.95,11 L23,11 L23,13 L20.95,13 C20.5,17.17 17.17,20.5 13,20.95 L13,23 L11,23 L11,20.95 C6.83,20.5 3.5,17.17 3.05,13 M12,5 C8.13400675,5 5,8.13400675 5,12 C5,15.8659932 8.13400675,19 12,19 C15.8659932,19 19,15.8659932 19,12 C19,8.13400675 15.8659932,5 12,5 L12,5 Z" id="mdi:crosshairs" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},17338:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/database-lock" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M11,3 C15.42,3 19,4.79 19,7 C19,9.21 15.42,11 11,11 C6.58,11 3,9.21 3,7 C3,4.79 6.58,3 11,3 M19,12.03 C17.11,12.24 15.57,13.62 15.13,15.43 C13.92,15.79 12.5,16 11,16 C6.58,16 3,14.21 3,12 L3,9 C3,11.21 6.58,13 11,13 C15.42,13 19,11.21 19,9 L19,12.03 M14,17.71 L14,20.71 C13.07,20.9 12.06,21 11,21 C6.58,21 3,19.21 3,17 L3,14 C3,16.21 6.58,18 11,18 C12.06,18 13.07,17.9 14,17.71 M19.5,14 C20.8807119,14 22,15.1192881 22,16.5 L22,17 C22.5522847,17 23,17.4477153 23,18 L23,22 C23,22.5522847 22.5522847,23 22,23 L17,23 C16.4477153,23 16,22.5522847 16,22 L16,18 C16,17.4477153 16.4477153,17 17,17 L17,16.5 C17,15.1192881 18.1192881,14 19.5,14 M19.5,15 C18.6715729,15 18,15.6715729 18,16.5 L18,17 L21,17 L21,16.5 C21,15.6715729 20.3284271,15 19.5,15 Z" id="mdi:database-lock" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},41473:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/database" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,3 C7.58,3 4,4.79 4,7 C4,9.21 7.58,11 12,11 C16.42,11 20,9.21 20,7 C20,4.79 16.42,3 12,3 M4,9 L4,12 C4,14.21 7.58,16 12,16 C16.42,16 20,14.21 20,12 L20,9 C20,11.21 16.42,13 12,13 C7.58,13 4,11.21 4,9 M4,14 L4,17 C4,19.21 7.58,21 12,21 C16.42,21 20,19.21 20,17 L20,14 C20,16.21 16.42,18 12,18 C7.58,18 4,16.21 4,14 Z" id="mdi:database" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},23373:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/description-outline" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M5,3 C3.89,3 3,3.89 3,5 L3,19 C3,20.11 3.89,21 5,21 L19,21 C20.11,21 21,20.11 21,19 L21,5 C21,3.89 20.11,3 19,3 L5,3 M5,5 L19,5 L19,19 L5,19 L5,5 M7,7 L7,9 L17,9 L17,7 L7,7 M7,11 L7,13 L17,13 L17,11 L7,11 M7,15 L7,17 L14,17 L14,15 L7,15 Z" id="mdi:text-box-outline" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},63993:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/description" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M14,17 L7,17 L7,15 L14,15 M17,13 L7,13 L7,11 L17,11 M17,9 L7,9 L7,7 L17,7 M19,3 L5,3 C3.89,3 3,3.89 3,5 L3,19 C3,20.1045695 3.8954305,21 5,21 L19,21 C20.1045695,21 21,20.1045695 21,19 L21,5 C21,3.89 20.1,3 19,3 Z" id="mdi:text-box" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},79824:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/device-cellphone" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M17,20 L7,20 L7,4 L17,4 M17,1 L7,1 C5.89,1 5,1.89 5,3 L5,21 C5,22.1045695 5.8954305,23 7,23 L17,23 C18.1045695,23 19,22.1045695 19,21 L19,3 C19,1.8954305 18.1045695,1 17,1 Z" id="xabber:cellphone" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},32111:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/device-console" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M21,2 C22.0543618,2 22.9181651,2.81587779 22.9945143,3.85073766 L23,4 L23,16 C23,17.0543618 22.1841222,17.9181651 21.1492623,17.9945143 L21,18 L14,18 L14,20 L16,20 L16,22 L8,22 L8,20 L10,20 L10,18 L3,18 C1.9456382,18 1.08183488,17.1841222 1.00548574,16.1492623 L1,16 L1,4 C1,2.94045455 1.81092975,2.08136364 2.85006292,2.00545361 L3,2 L21,2 Z M21,4 L3,4 L3,16 L21,16 L21,4 Z M18,12 L18,14 L13,14 L13,12 L18,12 Z M8.4,6 L11.7,9.3 C12.09,9.69 12.09,10.33 11.7,10.72 L8.42,14 L5.59,14 L9.58,10 L5.57,6 L8.4,6 Z" id="xabber.monitor-console" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},5772:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/device-desktop" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M21,16 L3,16 L3,4 L21,4 M21,2 L3,2 C1.89,2 1,2.89 1,4 L1,16 C1,17.1045695 1.8954305,18 3,18 L10,18 L10,20 L8,20 L8,22 L16,22 L16,20 L14,20 L14,18 L21,18 C22.1045695,18 23,17.1045695 23,16 L23,4 C23,2.8954305 22.1045695,2 21,2 Z" id="mdi:monitor" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},18955:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/device-tablet" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M20,18 L4,18 L4,6 L20,6 M21,4 L3,4 C1.89,4 1,4.89 1,6 L1,18 C1,19.1045695 1.8954305,20 3,20 L21,20 C22.1045695,20 23,19.1045695 23,18 L23,6 C23,4.8954305 22.1045695,4 21,4 Z" id="xabber:tablet" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},16919:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/device-web" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M21,2 C22.0543618,2 22.9181651,2.81587779 22.9945143,3.85073766 L23,4 L23,16 C23,17.0543618 22.1841222,17.9181651 21.1492623,17.9945143 L21,18 L14,18 L14,20 L16,20 L16,22 L8,22 L8,20 L10,20 L10,18 L3,18 C1.9456382,18 1.08183488,17.1841222 1.00548574,16.1492623 L1,16 L1,4 C1,2.94045455 1.81092975,2.08136364 2.85006292,2.00545361 L3,2 L21,2 Z M21,4 L3,4 L3,16 L21,16 L21,4 Z M9.59,6.41 L10.5,7.5 L8,10 L10.5,12.5 L9.59,13.5 L6,10 L9.59,6.41 Z M14.5,6.50152764 L18,10 L14.5,13.5 L13.5,12.5 L16,10 L13.5,7.5 L14.5,6.50152764 Z" id="xabber.monitor-tag" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},50832:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/devices" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M23,11 L18,11 C17.4477153,11 17,11.4477153 17,12 L17,21 C17,21.5522847 17.4477153,22 18,22 L23,22 C23.5522847,22 24,21.5522847 24,21 L24,12 C24,11.4477153 23.5522847,11 23,11 M23,20 L18,20 L18,13 L23,13 L23,20 M20,2 L2,2 C0.89,2 0,2.89 0,4 L0,16 C0,17.1045695 0.8954305,18 2,18 L9,18 L9,20 L7,20 L7,22 L15,22 L15,20 L13,20 L13,18 L15,18 L15,16 L2,16 L2,4 L20,4 L20,9 L22,9 L22,4 C22,2.8954305 21.1045695,2 20,2 Z" id="mdi:monitor-cellphone" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},58712:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/download" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M5,20 L19,20 L19,18 L5,18 M19,9 L15,9 L15,3 L9,3 L9,9 L5,9 L12,16 L19,9 Z" id="mdi:download" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},96840:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/edit-outline" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M14.06,9 L15,9.94 L5.92,19 L5,19 L5,18.08 L14.06,9 M17.66,3 C17.41,3 17.15,3.1 16.96,3.29 L15.13,5.12 L18.88,8.87 L20.71,7.04 C21.1,6.65 21.1,6 20.71,5.63 L18.37,3.29 C18.17,3.09 17.92,3 17.66,3 M14.06,6.19 L3,17.25 L3,21 L6.75,21 L17.81,9.94 L14.06,6.19 Z" id="mdi:pencil-outline" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},22845:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/edit" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M20.71,7.04 C21.1,6.65 21.1,6 20.71,5.63 L18.37,3.29 C18,2.9 17.35,2.9 16.96,3.29 L15.12,5.12 L18.87,8.87 M3,17.25 L3,21 L6.75,21 L17.81,9.93 L14.06,6.18 L3,17.25 Z" id="mdi:pencil" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},66206:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/email-outline" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M22,6 C22,4.9 21.1,4 20,4 L4,4 C2.9,4 2,4.9 2,6 L2,18 C2,19.1 2.9,20 4,20 L20,20 C21.1,20 22,19.1 22,18 L22,6 M20,6 L12,11 L4,6 L20,6 M20,18 L4,18 L4,8 L12,13 L20,8 L20,18 Z" id="mdi:email-outline" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},22505:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/email" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M20,8 L12,13 L4,8 L4,6 L12,11 L20,6 M20,4 L4,4 C2.89,4 2,4.89 2,6 L2,18 C2,19.1045695 2.8954305,20 4,20 L20,20 C21.1045695,20 22,19.1045695 22,18 L22,6 C22,4.89 21.1,4 20,4 Z" id="mdi:email" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},21321:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/expires" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M19.03,7.39 L20.45,5.97 C20.0000001,5.46 19.55,5 19.04,4.56 L17.62,6 C16.07,4.74 14.12,4 12.0000001,4 C7.0294373,4 3.00000013,8.0294373 3.00000013,13 C3.00000013,17.9705627 7.0294373,22 12.0000001,22 C17.0000001,22 21.0000001,17.97 21.0000001,13 C21.0000001,10.88 20.26,8.93 19.03,7.39 M13,14 L11,14 L11,7 L13,7 L13,14 M15,1 L9,1 L9,3 L15,3 L15,1 Z" id="mdi:timer" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},3643:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/file-audio" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,3 L12,13.55 C11.41,13.21 10.73,13 10,13 C7.79,13 6,14.79 6,17 C6,19.21 7.79,21 10,21 C12.21,21 14,19.21 14,17 L14,7 L18,7 L18,3 L12,3 Z" id="mdi:music-note" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},88700:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/file-document" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M13,9 L18.5,9 L13,3.5 L13,9 M6,2 L14,2 L20,8 L20,20 C20,21.1045695 19.1045695,22 18,22 L6,22 C4.8954305,22 4,21.1045695 4,20 L4,4 C4,2.89 4.89,2 6,2 M15,18 L15,16 L6,16 L6,18 L15,18 M18,14 L18,12 L6,12 L6,14 L18,14 Z" id="mdi:file-document" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},3468:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/file-pdf" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M19,3 C20.1045695,3 21,3.8954305 21,5 L21,19 C21,20.1045695 20.1045695,21 19,21 L5,21 C3.89,21 3,20.1 3,19 L3,5 C3,3.89 3.89,3 5,3 L19,3 M10.59,10.08 C10.57,10.13 10.3,11.84 8.5,14.77 C8.5,14.77 5,16.58 5.83,17.94 C6.5,19 8.15,17.9 9.56,15.27 C9.56,15.27 11.38,14.63 13.79,14.45 C13.79,14.45 17.65,16.19 18.17,14.34 C18.69,12.5 15.12,12.9 14.5,13.09 C14.5,13.09 12.46,11.75 12,9.89 C12,9.89 13.13,5.95 11.38,6 C9.63,6.05 10.29,9.12 10.59,10.08 M11.4,11.13 C11.43,11.13 11.87,12.33 13.29,13.58 C13.29,13.58 10.96,14.04 9.9,14.5 C9.9,14.5 10.9,12.75 11.4,11.13 M15.32,13.84 C15.9,13.69 17.64,14 17.58,14.32 C17.5,14.65 15.32,13.84 15.32,13.84 M8.26,15.7 C7.73,16.91 6.83,17.68 6.6,17.67 C6.37,17.66 7.3,16.07 8.26,15.7 M11.4,8.76 C11.39,8.71 11.03,6.57 11.4,6.61 C11.94,6.67 11.4,8.71 11.4,8.76 Z" id="mdi:file-pdf-box" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},34417:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/file-presentation" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M11,2 L13,2 L13,3 L19,3 C20.1045695,3 21,3.8954305 21,5 L21,16 C21,17.1045695 20.1045695,18 19,18 L13,18 L13,21 L17,21 L17,23 L7,23 L7,21 L11,21 L11,18 L5,18 C3.8954305,18 3,17.1045695 3,16 L3,5 C3,3.8954305 3.8954305,3 5,3 L11,3 L11,2 Z M19,5 L5,5 L5,16 L19,16 L19,5 Z M9,9 L9,14 L7,14 L7,9 L9,9 Z M13,7 L13,14 L11,14 L11,7 L13,7 Z M17,11 L17,14 L15,14 L15,11 L17,11 Z" id="xabber:presentation" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},98587:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/file-video" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M18,9 L16,9 L16,7 L18,7 M18,13 L16,13 L16,11 L18,11 M18,17 L16,17 L16,15 L18,15 M8,9 L6,9 L6,7 L8,7 M8,13 L6,13 L6,11 L8,11 M8,17 L6,17 L6,15 L8,15 M18,3 L18,5 L16,5 L16,3 L8,3 L8,5 L6,5 L6,3 L4,3 L4,21 L6,21 L6,19 L8,19 L8,21 L16,21 L16,19 L18,19 L18,21 L20,21 L20,3 L18,3 Z" id="mdi:filmstrip" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},89193:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/file-zip" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M14,17 L12,17 L12,15 L10,15 L10,13 L12,13 L12,15 L14,15 M14,9 L12,9 L12,11 L14,11 L14,13 L12,13 L12,11 L10,11 L10,9 L12,9 L12,7 L10,7 L10,5 L12,5 L12,7 L14,7 M19,3 L5,3 C3.89,3 3,3.89 3,5 L3,19 C3,20.1045695 3.8954305,21 5,21 L19,21 C20.1045695,21 21,20.1045695 21,19 L21,5 C21,3.89 20.1,3 19,3 Z" id="mdi:zip-box" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},34058:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/file" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M13,9 L13,3.5 L18.5,9 M6,2 C4.89,2 4,2.89 4,4 L4,20 C4,21.1045695 4.8954305,22 6,22 L18,22 C19.1045695,22 20,21.1045695 20,20 L20,8 L14,2 L6,2 Z" id="mdi:file" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},16109:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/fullname-outline" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M8,9 C9.1045695,9 10,9.8954305 10,11 C10,12.1045695 9.1045695,13 8,13 C6.8954305,13 6,12.1045695 6,11 C6,9.8954305 6.8954305,9 8,9 M12,17 L4,17 L4,16 C4,14.67 6.67,14 8,14 C9.33,14 12,14.67 12,16 L12,17 M20,8 L14,8 L14,10 L20,10 L20,8 M20,12 L14,12 L14,14 L20,14 L20,12 M20,16 L14,16 L14,18 L20,18 L20,16 M22,4 L14,4 L14,6 L22,6 L22,20 L2,20 L2,6 L10,6 L10,4 L2,4 C0.8954305,4 0,4.8954305 0,6 L0,20 C0,21.1045695 0.8954305,22 2,22 L22,22 C23.1045695,22 24,21.1045695 24,20 L24,6 C24,4.8954305 23.1045695,4 22,4 M13,6 L11,6 L11,2 L13,2 L13,6 Z" id="mdi:badge-account-horizontal-outline" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},12784:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/fullname" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M22,4 L14,4 L14,7 L10,7 L10,4 L2,4 C0.8954305,4 0,4.8954305 0,6 L0,20 C0,21.1045695 0.8954305,22 2,22 L22,22 C23.1045695,22 24,21.1045695 24,20 L24,6 C24,4.8954305 23.1045695,4 22,4 M8,9 C9.1045695,9 10,9.8954305 10,11 C10,12.1045695 9.1045695,13 8,13 C6.8954305,13 6,12.1045695 6,11 C6,9.8954305 6.8954305,9 8,9 M12,17 L4,17 L4,16 C4,14.67 6.67,14 8,14 C9.33,14 12,14.67 12,16 L12,17 M20,18 L14,18 L14,16 L20,16 L20,18 M20,14 L14,14 L14,12 L20,12 L20,14 M20,10 L14,10 L14,8 L20,8 L20,10 M13,6 L11,6 L11,2 L13,2 L13,6 Z" id="mdi:badge-account-horizontal" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},49703:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="badge/icon/group-incognito" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="Bounds" x="0" y="0" width="16" height="16"></rect>\n        <path d="M10,8.00704958 C10.9597902,8.00704958 12.8474987,8.64533875 12.9912872,9.91524601 L13,10.0706662 L13,11.0070496 L10.7492023,11.0070496 L10.75,9.875 C10.75,9.10242267 10.3751421,8.46914598 9.75414509,8.01828756 L9.88054216,8.01011295 L10,8.00704958 Z M7,8 C8.71428571,8 10,8.75 10,9.875 L10,11 L4,11 L4,9.875 C4,8.75 5.28571429,8 7,8 Z M7,8.75 C5.68529006,8.75 4.83790401,9.22876096 4.75645218,9.78636102 L4.75,9.875 L4.75,10.25 L9.25,10.25 L9.25,9.875 C9.25,9.31020891 8.46834945,8.80320839 7.20365867,8.75392032 L7,8.75 Z M10.5,4 C11.3284271,4 12,4.67157288 12,5.5 C12,6.32842712 11.3284271,7 10.5,7 C10.0309641,7 9.61220865,6.78472342 9.33715065,6.44758714 C9.59948544,6.02690214 9.75,5.53102835 9.75,5 C9.75,4.7455993 9.71545544,4.49926692 9.65080116,4.2654377 C9.89064982,4.09777196 10.183907,4 10.5,4 Z M7,3 C8.1045695,3 9,3.8954305 9,5 C9,6.1045695 8.1045695,7 7,7 C5.8954305,7 5,6.1045695 5,5 C5,3.8954305 5.8954305,3 7,3 Z M7,3.75 C6.30964406,3.75 5.75,4.30964406 5.75,5 C5.75,5.69035594 6.30964406,6.25 7,6.25 C7.69035594,6.25 8.25,5.69035594 8.25,5 C8.25,4.30964406 7.69035594,3.75 7,3.75 Z" id="incognito" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},89411:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="badge/icon/group-invite" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="Bounds" x="0" y="0" width="16" height="16"></rect>\n        <path d="M4.8,5 L11.2,5 C11.64,5 12,5.33981818 12,5.76363636 L12,10.2363636 C12,10.6581084 11.6418278,11 11.2,11 L4.8,11 C4.3581722,11 4,10.6581084 4,10.2363636 L4,5.76363636 C4,5.33981818 4.356,5 4.8,5 Z M4.57142857,5.81818182 L4.57142857,6.90909091 L8,9.09090909 L11.4285714,6.90909091 L11.4285714,5.81818182 L8,8 L4.57142857,5.81818182 Z" id="invitation" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},81044:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="badge/icon/group-private" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="Bounds" x="0" y="0" width="16" height="16"></rect>\n        <path d="M5.54386908,9.00001406 C4.74833179,9.00015914 4.03626356,9.50273575 3.75677818,10.2613541 C3.4772928,11.0199725 3.68898239,11.8755937 4.28805949,12.4087226 C4.88713659,12.9418515 5.74800895,13.0407214 6.44860686,12.6568582 C7.14920477,12.272995 7.54265288,11.4868729 7.43605089,10.683913 C7.61005089,10.6450242 7.79823271,10.6139132 7.99841453,10.6144687 C8.19859635,10.6155798 8.38677817,10.6450242 8.56077817,10.683913 C8.45417618,11.4868729 8.84762429,12.272995 9.5482222,12.6568582 C10.2488201,13.0407214 11.1096925,12.9418515 11.7087696,12.4087226 C12.3078467,11.8755937 12.5195363,11.0199725 12.2400509,10.2613541 C11.9605655,9.50273575 11.2484973,9.00015914 10.45296,9.00001406 C9.6733377,8.99699984 8.97079939,9.47872777 8.68023271,10.2155808 C8.45968538,10.1448214 8.22964016,10.109582 7.99841453,10.1111366 C7.69841453,10.1111366 7.49059635,10.1616921 7.31659635,10.2155808 C7.02602967,9.47872777 6.32349136,8.99699984 5.54386908,9.00001406 L5.54386908,9.00001406 Z M5.54386908,9.55558244 C6.29698464,9.55558244 6.90750544,10.1774076 6.90750544,10.9444679 C6.90750544,11.7115282 6.29698464,12.3333534 5.54386908,12.3333534 C4.79075351,12.3333534 4.18023271,11.7115282 4.18023271,10.9444679 C4.18023271,10.1774076 4.79075351,9.55558244 5.54386908,9.55558244 Z M10.45296,9.55558244 C11.2060756,9.55558244 11.8165963,10.1774076 11.8165963,10.9444679 C11.8165963,11.7115282 11.2060756,12.3333534 10.45296,12.3333534 C9.69984442,12.3333534 9.08932362,11.7115282 9.08932362,10.9444679 C9.08932362,10.1774076 9.69984442,9.55558244 10.45296,9.55558244 Z M8,7 C6.512,7 4.39345455,7.268 4.25,7.297 C3.78243762,7.41026088 3.32163107,7.54577794 2.86945455,7.703 C2.31418182,7.877 2,8 2,8 L14,8 C14,8 13.6858182,7.877 13.1305455,7.703 C12.6727414,7.54549536 12.2062901,7.40997808 11.7330909,7.297 C11.7330909,7.297 9.54036364,7 8,7 Z M8,3 C6.53163636,3.0015 5.49418182,3.6095 5.49418182,3.6095 L4.72727273,6 L11.2727273,6 L10.5058182,3.6095 C10.5058182,3.6095 9.46836364,3.001 8,3 Z" id="private" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},35953:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/group-public-add" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M19,19 L7,19 L7,17 C7,17 7,13 13,13 C19,13 19,17 19,17 L19,19 Z M13,5 C11.3431458,5 10,6.34314575 10,8 C10,9.65685425 11.3431458,11 13,11 C14.6568542,11 16,9.65685425 16,8 C16,6.34314575 14.6568542,5 13,5 Z M21,17 L21,19 L24,19 L24,17 C24,17 24,13.55 19.2,13.06 C20.3042162,14.0787134 20.9527979,15.4983867 21,17 Z M17.11,5.14 C18.3083092,6.85838717 18.3083092,9.14161283 17.11,10.86 C17.3975999,10.9525866 17.6978644,10.9998192 18,11 C19.6568542,11 21,9.65685425 21,8 C21,6.34314575 19.6568542,5 18,5 C17.6978644,5.00018081 17.3975999,5.04741343 17.11,5.14 Z M7.5,10 L5,10 L5,7.5 L3,7.5 L3,10 L0.5,10 L0.5,12 L3,12 L3,14.5 L5,14.5 L5,12 L7.5,12 L7.5,10 Z" id="xabber:group-public-add" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},56403:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="badge/icon/group-public" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="Bounds" x="0" y="0" width="16" height="16"></rect>\n        <path d="M10.500501,8 C11.3287776,8 11.995,7.328 11.995,6.5 C11.995,5.672 11.3287776,5 10.500501,5 C9.67222445,5 9,5.672 9,6.5 C9,7.328 9.67222445,8 10.500501,8 Z M6.5,7 C7.33,7 7.995,6.33 7.995,5.5 C7.995,4.67 7.33,4 6.5,4 C5.67,4 5,4.67 5,5.5 C5,6.33 5.67,7 6.5,7 Z M10.5,9 C9.66818182,9 8,9.46 8,10.375 L8,10.9989178 L13,10.9989178 L13,10.375 C13,9.46 11.3318182,9 10.5,9 Z M6.50474946,7.99186821 C4.77490105,7.99186821 3,8.585 3,9.75 L3,11 L7,11 L7,10 C7,9.24841871 7.73828683,8.72461975 8.70884076,8.35916117 C8.08932051,8.04219075 6.85693708,7.99186821 6.50474946,7.99186821 Z" id="xabber:group-public" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},43964:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/heart-circle" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,2 C6.47,2 2,6.5 2,12 C2,14.6521649 3.0535684,17.195704 4.92893219,19.0710678 C6.80429597,20.9464316 9.3478351,22 12,22 C17.5228475,22 22,17.5228475 22,12 C22,9.3478351 20.9464316,6.80429597 19.0710678,4.92893219 C17.195704,3.0535684 14.6521649,2 12,2 M9.75,7.82 C10.62,7.82 11.45,8.23 12,8.87 C12.55,8.23 13.38,7.82 14.25,7.82 C15.79,7.82 17,9.03 17,10.57 C17,12.46 15.3,14 12.72,16.34 L12,17 L11.28,16.34 C8.7,14 7,12.46 7,10.57 C7,9.03 8.21,7.82 9.75,7.82 Z" id="mdi:heart-circle" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},35726:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/history" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M13.5,8 L12,8 L12,13 L16.28,15.54 L17,14.33 L13.5,12.25 L13.5,8 M13,3 C8.02943725,3 4,7.02943725 4,12 L1,12 L4.96,16.03 L9,12 L6,12 C6,8.13400675 9.13400675,5 13,5 C16.8659932,5 20,8.13400675 20,12 C20,15.8659932 16.8659932,19 13,19 C11.07,19 9.32,18.21 8.06,16.94 L6.64,18.36 C8.31963558,20.0581063 10.6115589,21.0094707 13,21.00007 C17.9705627,21.00007 22,16.9705627 22,12 C22,7.02943725 17.9705627,3 13,3" id="mdi:history" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},81363:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<path fill="#9E9E9E" d="M12,15C12.81,15 13.5,14.7 14.11,14.11C14.7,13.5 15,12.81 15,12C15,11.19 14.7,10.5 14.11,9.89C13.5,9.3 12.81,9 12,9C11.19,9 10.5,9.3 9.89,9.89C9.3,10.5 9,11.19 9,12C9,12.81 9.3,13.5 9.89,14.11C10.5,14.7 11.19,15 12,15M12,2C14.75,2 17.1,3 19.05,4.95C21,6.9 22,9.25 22,12V13.45C22,14.45 21.65,15.3 21,16C20.3,16.67 19.5,17 18.5,17C17.3,17 16.31,16.5 15.56,15.5C14.56,16.5 13.38,17 12,17C10.63,17 9.45,16.5 8.46,15.54C7.5,14.55 7,13.38 7,12C7,10.63 7.5,9.45 8.46,8.46C9.45,7.5 10.63,7 12,7C13.38,7 14.55,7.5 15.54,8.46C16.5,9.45 17,10.63 17,12V13.45C17,13.86 17.16,14.22 17.46,14.53C17.76,14.84 18.11,15 18.5,15C18.92,15 19.27,14.84 19.57,14.53C19.87,14.22 20,13.86 20,13.45V12C20,9.81 19.23,7.93 17.65,6.35C16.07,4.77 14.19,4 12,4C9.81,4 7.93,4.77 6.35,6.35C4.77,7.93 4,9.81 4,12C4,14.19 4.77,16.07 6.35,17.65C7.93,19.23 9.81,20 12,20H17V22H12C9.25,22 6.9,21 4.95,19.05C3,17.1 2,14.75 2,12C2,9.25 3,6.9 4.95,4.95C6.9,3 9.25,2 12,2Z" />'},9140:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<path\n     style="fill-rule:evenodd"\n     inkscape:connector-curvature="0"\n     id="path5"\n     d="m 5.2462478,6.4309194 c 0,0 0.2534497,0.5323027 1.6195791,-0.2126538 C 9.2126105,5.0708821 11.67437,4.0095 14.785441,5.5382202 17.009904,6.7924 17.27733,10.360371 13.864368,13.369134 c -1.679464,1.609494 -1.887868,4.226006 -1.825254,4.993295 -0.128246,1.561168 0.259655,1.837265 0.594912,1.938246 0.335257,0.100981 1.461445,-0.04379 1.305934,-1.000087 -0.193265,-1.461227 -0.06192,-2.413209 0.855267,-4.044829 0.758763,-1.162942 2.123721,-1.871086 3.273016,-4.211889 C 18.840748,9.1444158 18.891207,6.503336 17.479328,4.894053 16.152845,3.3821059 14.670099,2.4131656 12.422552,2.4210559 9.8716741,2.446853 8.13424,2.8374168 6.751418,3.5206351 4.5012489,4.730324 4.2973099,4.8714754 5.2462478,6.4309194 z"\n     clip-rule="evenodd"\n     sodipodi:nodetypes="cccccscccsccc" />\n<path\n     style="fill-rule:evenodd"\n     inkscape:connector-curvature="0"\n     id="path7"\n     d="M 10.393116,10.546893 C 10.179036,9.8582024 9.6418168,9.5037588 9.1268128,9.5037588 c -0.686671,0 -1.6386388,0.1373222 -1.6546508,1.5832442 0,0 0.5308711,2.944458 1.5235151,2.93234 0.364542,-0.004 0.7403587,-0.28287 0.017892,-1.856769 0,0 -0.4395592,-0.974022 -0.1380497,-1.193301 0.5440269,-0.394487 0.5911749,0.418754 0.9156116,1.069105 0.674692,0.328471 1.06244,-0.702948 1.201092,-0.722298 1.026124,-0.142524 -0.130551,1.372622 -0.2386,1.539241 -0.467844,0.515308 -1.3020963,1.251877 -0.614252,1.612091 0.864686,0.205725 1.292561,-0.492065 1.464229,-0.658684 0.2663,-0.37565 0.549622,-0.820112 0.721289,-1.133153 0.877971,-1.468145 0.834305,-2.8722146 -0.558429,-2.9011876 -0.515004,0 -0.814918,0.2302366 -1.373344,0.7725056 z"\n     clip-rule="evenodd"\n     sodipodi:nodetypes="cscccccccccccc" />\n<path\n     sodipodi:nodetypes="cssccsccccssccssc"\n     style="fill-rule:evenodd"\n     inkscape:connector-curvature="0"\n     id="path9"\n     d="m 6.8360046,14.735541 c -0.2526865,-0.134842 -0.341246,-0.148685 -0.556785,-0.125105 -0.4758127,0.05205 -0.712045,0.475393 -0.6165306,0.901178 0.2727696,1.215955 1.0359093,1.641989 2.25985,2.132257 1.2530682,0.41756 2.475738,0.396638 3.398493,-0.0757 0.298412,-0.05064 0.287556,-0.683612 0.292618,-1.034981 0.006,-0.414484 -0.327129,-0.528727 -0.651454,-0.493243 -0.82369,0.222079 -0.891361,0.338578 -1.882259,0.248554 -1.1996954,-0.369888 -1.6284239,-0.589257 -2.2439324,-1.55296 z m -0.596727,2.884244 c -0.1641271,-0.121 -0.2921232,-0.08347 -0.442594,-0.06701 -0.3893935,0.0426 -0.727761,0.382603 -0.6463412,0.81143 0.2795655,1.472433 3.2776659,2.179707 4.6014193,2.113323 1.0831623,-0.05044 1.6865703,-0.273231 1.7646093,-1.16247 -0.03364,-0.366114 -0.266964,-0.659232 -0.720411,-0.609623 -0.432095,0.04727 -0.373883,0.118182 -1.0438868,0.191485 C 8.563559,19.026954 7.5842504,18.723225 6.2392776,17.619785 z"\n     clip-rule="evenodd" />\n'},46476:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<path fill="#9E9E9E" d="M15.5,12C18,12 20,14 20,16.5C20,17.38 19.75,18.21 19.31,18.9L22.39,22L21,23.39L17.88,20.32C17.19,20.75 16.37,21 15.5,21C13,21 11,19 11,16.5C11,14 13,12 15.5,12M15.5,14A2.5,2.5 0 0,0 13,16.5A2.5,2.5 0 0,0 15.5,19A2.5,2.5 0 0,0 18,16.5A2.5,2.5 0 0,0 15.5,14M19.35,8.03C21.95,8.22 24,10.36 24,13C24,14.64 23.21,16.1 22,17V16.5A6.5,6.5 0 0,0 15.5,10A6.5,6.5 0 0,0 9,16.5C9,17 9.06,17.5 9.17,18H6A6,6 0 0,1 0,12C0,8.9 2.34,6.36 5.35,6.03C6.6,3.64 9.11,2 12,2C15.64,2 18.67,4.59 19.35,8.03Z" />'},19324:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/id-outline" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,2 C15.8659932,2 19,5.13400675 19,9 C19,11.38 17.81,13.47 16,14.74 L16,17 C16,17.5522847 15.5522847,18 15,18 L9,18 C8.44771525,18 8,17.5522847 8,17 L8,14.74 C6.19,13.47 5,11.38 5,9 C5,5.13400675 8.13400675,2 12,2 M9,21 L9,20 L15,20 L15,21 C15,21.5522847 14.5522847,22 14,22 L10,22 C9.44771525,22 9,21.5522847 9,21 M12,4 C9.23857625,4 7,6.23857625 7,9 C7,11.05 8.23,12.81 10,13.58 L10,16 L14,16 L14,13.58 C15.77,12.81 17,11.05 17,9 C17,6.23857625 14.7614237,4 12,4 L12,4 Z" id="mdi:lightbulb-outline" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},50807:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/id" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,2 C8.13400675,2 5,5.13400675 5,9 C5,11.38 6.19,13.47 8,14.74 L8,17 C8,17.5522847 8.44771525,18 9,18 L15,18 C15.5522847,18 16,17.5522847 16,17 L16,14.74 C17.81,13.47 19,11.38 19,9 C19,5.13400675 15.8659932,2 12,2 M9,21 C9,21.5522847 9.44771525,22 10,22 L14,22 C14.5522847,22 15,21.5522847 15,21 L15,20 L9,20 L9,21 Z" id="mdi:lightbulb" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},90226:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/image" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M8.5,13.5 L11,16.5 L14.5,12 L19,18 L5,18 M21,19 L21,5 C21,3.89 20.1,3 19,3 L5,3 C3.8954305,3 3,3.8954305 3,5 L3,19 C3,20.1045695 3.8954305,21 5,21 L19,21 C20.1045695,21 21,20.1045695 21,19 Z" id="mdi:image" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},2612:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/index" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,2 C7.581722,2 4,5.581722 4,10 C4,14.03 7,17.42 11,17.93 L11,19 L10,19 C9.44771525,19 9,19.4477153 9,20 L2,20 L2,22 L9,22 C9,22.5522847 9.44771525,23 10,23 L14,23 C14.5522847,23 15,22.5522847 15,22 L22,22 L22,20 L15,20 C15,19.4477153 14.5522847,19 14,19 L13,19 L13,17.93 C17,17.43 20,14.03 20,10 C20,5.581722 16.418278,2 12,2 M12,4 C12,4 12.74,5.28 13.26,7 L10.74,7 C11.26,5.28 12,4 12,4 M9.77,4.43 C9.5,4.93 9.09,5.84 8.74,7 L6.81,7 C7.5,5.84 8.5,4.93 9.77,4.43 M14.23,4.44 C15.5,4.94 16.5,5.84 17.19,7 L15.26,7 C14.91,5.84 14.5,4.93 14.23,4.44 M6.09,9 L8.32,9 C8.28,9.33 8.25,9.66 8.25,10 C8.25,10.34 8.28,10.67 8.32,11 L6.09,11 C5.96891098,10.3388318 5.96891098,9.66116821 6.09,9 M10.32,9 L13.68,9 C13.72,9.33 13.75,9.66 13.75,10 C13.75,10.34 13.72,10.67 13.68,11 L10.32,11 C10.28,10.67 10.25,10.34 10.25,10 C10.25,9.66 10.28,9.33 10.32,9 M15.68,9 L17.91,9 C18.031089,9.66116821 18.031089,10.3388318 17.91,11 L15.68,11 C15.72,10.67 15.75,10.34 15.75,10 C15.75,9.66 15.72,9.33 15.68,9 M6.81,13 L8.74,13 C9.09,14.16 9.5,15.07 9.77,15.56 C8.5,15.06 7.5,14.16 6.81,13 M10.74,13 L13.26,13 C12.74,14.72 12,16 12,16 C12,16 11.26,14.72 10.74,13 M15.26,13 L17.19,13 C16.5,14.16 15.5,15.07 14.23,15.57 C14.5,15.07 14.91,14.16 15.26,13 Z" id="mdi:wan" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},52973:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/information-outline" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M11,9 L13,9 L13,7 L11,7 M12,20 C7.59,20 4,16.41 4,12 C4,7.59 7.59,4 12,4 C16.41,4 20,7.59 20,12 C20,16.41 16.41,20 12,20 M12,2 C6.4771525,2 2,6.4771525 2,12 C2,14.6521649 3.0535684,17.195704 4.92893219,19.0710678 C6.80429597,20.9464316 9.3478351,22 12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 M11,17 L13,17 L13,11 L11,11 L11,17 Z" id="mdi:information-outline" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},66035:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/information" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M13,9 L11,9 L11,7 L13,7 M13,17 L11,17 L11,11 L13,11 M12,2 C6.4771525,2 2,6.4771525 2,12 C2,14.6521649 3.0535684,17.195704 4.92893219,19.0710678 C6.80429597,20.9464316 9.3478351,22 12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 Z" id="mdi:information" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},34289:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/invite-outline" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,2 L15.77,4.36 L19,4.36 L19,6.36 L21.03,7.65 C21.5653846,7.97307692 21.9388757,8.53473373 21.993168,9.19339554 L22,9.36 L22,19.36 C22,20.4195455 21.1890702,21.2786364 20.1499371,21.3545464 L20,21.36 L4,21.36 C2.9456382,21.36 2.08183488,20.5441222 2.00548574,19.5092623 L2,19.36 L2,9.36 C2,8.68615385 2.33230769,8.09751479 2.83961766,7.73565772 L5,6.36 L5,4.36 L8.23,4.36 L12,2 Z M20,11.36 L12,16.36 L4,11.36 L4,19.36 L20,19.36 L20,11.36 Z M17,6.36 L7,6.36 L7,11.24 L12,14.36 L17,11.24 L17,6.36 Z M16,9.86 L16,11.36 L8,11.36 L8,9.86 L16,9.86 Z M19,8.74 L19,9.99 L20,9.36 L19,8.74 Z M5,8.74 L4,9.36 L5,9.99 L5,8.74 Z M16,7.36 L16,8.86 L8,8.86 L8,7.36 L16,7.36 Z" id="xabber:invite-outline" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},75917:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/invite" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,0.64 L8.23,3 L5,3 L5,5 L2.97,6.29 C2.39,6.64 2,7.27 2,8 L2,18 C2,19.1045695 2.8954305,20 4,20 L20,20 C21.11,20 22,19.11 22,18 L22,8 C22,7.27 21.61,6.64 21.03,6.29 L19,5 L19,3 L15.77,3 M7,5 L17,5 L17,9.88 L12,13 L7,9.88 M8,6 L8,7.5 L16,7.5 L16,6 M5,7.38 L5,8.63 L4,8 M19,7.38 L20,8 L19,8.63 M8,8.5 L8,10 L16,10 L16,8.5 L8,8.5 Z" id="mdi:email-newsletter" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},31802:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/job-outline" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M20,6 C20.58,6 21.05,6.2 21.42,6.59 C21.8,7 22,7.45 22,8 L22,19 C22,19.55 21.8,20 21.42,20.41 C21.05,20.8 20.58,21 20,21 L4,21 C3.42,21 2.95,20.8 2.58,20.41 C2.2,20 2,19.55 2,19 L2,8 C2,7.45 2.2,7 2.58,6.59 C2.95,6.2 3.42,6 4,6 L8,6 L8,4 C8,3.42 8.2,2.95 8.58,2.58 C8.95,2.2 9.42,2 10,2 L14,2 C14.58,2 15.05,2.2 15.42,2.58 C15.8,2.95 16,3.42 16,4 L16,6 L20,6 M4,8 L4,19 L20,19 L20,8 L4,8 M14,6 L14,4 L10,4 L10,6 L14,6 Z" id="mdi:briefcase-outline" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},97579:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/job" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M10,2 L14,2 C15.1045695,2 16,2.8954305 16,4 L16,6 L20,6 C21.1045695,6 22,6.8954305 22,8 L22,19 C22,20.1045695 21.1045695,21 20,21 L4,21 C2.89,21 2,20.1 2,19 L2,8 C2,6.89 2.89,6 4,6 L8,6 L8,4 C8,2.89 8.89,2 10,2 M14,6 L14,4 L10,4 L10,6 L14,6 Z" id="mdi:briefcase" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},76499:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/key-variant" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M7,14 C5.8954305,14 5,13.1045695 5,12 C5,10.8954305 5.8954305,10 7,10 C8.1045695,10 9,10.8954305 9,12 C9,13.1045695 8.1045695,14 7,14 M12.65,10 C11.8057828,7.60319579 9.54113618,6 7,6 C3.6862915,6 1,8.6862915 1,12 C1,15.3137085 3.6862915,18 7,18 C9.54113618,18 11.8057828,16.3968042 12.65,14 L15,14 L15,18 L18,18 L18,14 L19,14 L19,18 L22,18 L22,14 L23,14 L23,10 L12.65,10 Z" id="xabber:key-variant" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},46753:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/key" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M7,14 C5.8954305,14 5,13.1045695 5,12 C5,10.8954305 5.8954305,10 7,10 C8.1045695,10 9,10.8954305 9,12 C9,13.1045695 8.1045695,14 7,14 M12.65,10 C11.8057828,7.60319579 9.54113618,6 7,6 C3.6862915,6 1,8.6862915 1,12 C1,15.3137085 3.6862915,18 7,18 C9.54113618,18 11.8057828,16.3968042 12.65,14 L17,14 L17,18 L21,18 L21,14 L23,14 L23,10 L12.65,10 Z" id="mdi:key" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},16205:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/link" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M3.9,12 C3.9,10.29 5.29,8.9 7,8.9 L11,8.9 L11,7 L7,7 C4.23857625,7 2,9.23857625 2,12 C2,14.7614237 4.23857625,17 7,17 L11,17 L11,15.1 L7,15.1 C5.29,15.1 3.9,13.71 3.9,12 M8,13 L16,13 L16,11 L8,11 L8,13 M17,7 L13,7 L13,8.9 L17,8.9 C18.71,8.9 20.1,10.29 20.1,12 C20.1,13.71 18.71,15.1 17,15.1 L13,15.1 L13,17 L17,17 C19.7614237,17 22,14.7614237 22,12 C22,9.23857625 19.7614237,7 17,7 Z" id="mdi:link" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},63234:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/lock-alert" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M10,17 C11.1,17 12,16.1 12,15 C12,13.9 11.1,13 10,13 C8.9,13 8,13.9 8,15 C8,16.1 8.9,17 10,17 M16,8 C17.1,8 18,8.9 18,10 L18,20 C18,21.1 17.1,22 16,22 L4,22 C2.9,22 2,21.1 2,20 L2,10 C2,8.9 2.9,8 4,8 L5,8 L5,6 C5,3.2 7.2,1 10,1 C12.8,1 15,3.2 15,6 L15,8 L16,8 M10,3 C8.3,3 7,4.3 7,6 L7,8 L13,8 L13,6 C13,4.3 11.7,3 10,3 M22,13 L20,13 L20,7 L22,7 L22,13 M22,17 L20,17 L20,15 L22,15 L22,17 Z" id="mdi:lock-alert" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},14833:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/lock-check" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,1 C13.3260824,1 14.597852,1.5267842 15.5355339,2.46446609 C16.4732158,3.40214799 17,4.67391755 17,6 L17,8 L18,8 C19.1045695,8 20,8.8954305 20,10 L20,20 C20,21.1045695 19.1045695,22 18,22 L6,22 C4.8954305,22 4,21.1045695 4,20 L4,10 C4,8.89 4.9,8 6,8 L7,8 L7,6 C7,3.23857625 9.23857625,1 12,1 Z M15.6,11 L10.47,16.18 L8.4,14.09 L7,15.5 L10.47,19 L17,12.41 L15.6,11 Z M12,3 C10.3431458,3 9,4.34314575 9,6 L9,8 L15,8 L15,6 C15,4.34314575 13.6568542,3 12,3 Z" id="mdi:lock-check" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},8513:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/lock-cross" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,1 C13.3260824,1 14.597852,1.5267842 15.5355339,2.46446609 C16.4732158,3.40214799 17,4.67391755 17,6 L17,8 L18,8 C19.1045695,8 20,8.8954305 20,10 L20,20 C20,21.1045695 19.1045695,22 18,22 L6,22 C4.8954305,22 4,21.1045695 4,20 L4,10 C4,8.89 4.9,8 6,8 L7,8 L7,6 C7,3.23857625 9.23857625,1 12,1 Z M14.12,11.47 L12,13.59 L9.88,11.47 L8.5,12.86 L10.61,15 L8.5,17.11 L9.91,18.53 L12.03,16.41 L14.12,18.5 L15.5,17.11 L13.43,15 L15.55,12.9 L14.12,11.47 Z M12,3 C10.3431458,3 9,4.34314575 9,6 L9,8 L15,8 L15,6 C15,4.34314575 13.6568542,3 12,3 Z" id="mdi:lock-cross" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},1652:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/lock-open" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M18,1 C15.24,1 13,3.24 13,6 L13,8 L4,8 C2.8954305,8 2,8.8954305 2,10 L2,20 C2,21.1045695 2.8954305,22 4,22 L16,22 C17.11,22 18,21.11 18,20 L18,10 C18,8.8954305 17.1045695,8 16,8 L15,8 L15,6 C15,4.34 16.34,3 18,3 C19.66,3 21,4.34 21,6 L21,8 L23,8 L23,6 C23,3.24 20.76,1 18,1 M10,13 C11.1045695,13 12,13.8954305 12,15 C12,16.11 11.11,17 10,17 C8.8954305,17 8,16.1045695 8,15 C8,13.8954305 8.8954305,13 10,13 Z" id="mdi:lock-open-variant" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},67160:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/lock-question" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,1 C9.23857625,1 7,3.23857625 7,6 L7,8 L6,8 C4.8954305,8 4,8.8954305 4,10 L4,20 C4,21.1045695 4.8954305,22 6,22 L18,22 C19.1045695,22 20,21.1045695 20,20 L20,10 C20,8.8954305 19.1045695,8 18,8 L17,8 L17,6 C17,4.67391755 16.4732158,3.40214799 15.5355339,2.46446609 C14.597852,1.5267842 13.3260824,1 12,1 M12,2.9 C13.71,2.9 15.1,4.29 15.1,6 L15.1,8 L8.9,8 L8.9,6 C8.9,4.29 10.29,2.9 12,2.9 M12.19,10.5 C13.13,10.5 13.88,10.71 14.42,11.12 C14.96,11.54 15.23,12.1 15.23,12.8 C15.23,13.24 15.08,13.63 14.79,14 C14.5,14.36 14.12,14.64 13.66,14.85 C13.4,15 13.23,15.15 13.14,15.32 C13.05,15.5 13,15.72 13,16 L11,16 C11,15.5 11.1,15.16 11.29,14.92 C11.5,14.68 11.84,14.4 12.36,14.08 C12.62,13.94 12.83,13.76 13,13.54 C13.14,13.33 13.22,13.08 13.22,12.8 C13.22,12.5 13.13,12.28 12.95,12.11 C12.77,11.93 12.5,11.85 12.19,11.85 C11.92,11.85 11.7,11.92 11.5,12.06 C11.34,12.2 11.24,12.41 11.24,12.69 L9.27,12.69 C9.22,12 9.5,11.4 10.05,11.04 C10.59,10.68 11.3,10.5 12.19,10.5 M11,17 L13,17 L13,19 L11,19 L11,17 Z" id="mdi:lock-question" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},6258:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/lock" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,17 C13.1045695,17 14,16.1045695 14,15 C14,13.89 13.1,13 12,13 C10.8954305,13 10,13.8954305 10,15 C10,16.1045695 10.8954305,17 12,17 M18,8 C19.1045695,8 20,8.8954305 20,10 L20,20 C20,21.1045695 19.1045695,22 18,22 L6,22 C4.8954305,22 4,21.1045695 4,20 L4,10 C4,8.89 4.9,8 6,8 L7,8 L7,6 C7,3.23857625 9.23857625,1 12,1 C13.3260824,1 14.597852,1.5267842 15.5355339,2.46446609 C16.4732158,3.40214799 17,4.67391755 17,6 L17,8 L18,8 M12,3 C10.3431458,3 9,4.34314575 9,6 L9,8 L15,8 L15,6 C15,4.34314575 13.6568542,3 12,3 Z" id="mdi:lock" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},83740:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/map-marker-outline" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,6.5 C13.3807119,6.5 14.5,7.61928813 14.5,9 C14.5,9.66304122 14.2366079,10.298926 13.767767,10.767767 C13.298926,11.2366079 12.6630412,11.5 12,11.5 C10.6192881,11.5 9.5,10.3807119 9.5,9 C9.5,8.33695878 9.7633921,7.70107399 10.232233,7.23223305 C10.701074,6.7633921 11.3369588,6.5 12,6.5 M12,2 C15.8659932,2 19,5.13400675 19,9 C19,14.25 12,22 12,22 C12,22 5,14.25 5,9 C5,5.13400675 8.13400675,2 12,2 M12,4 C9.23857625,4 7,6.23857625 7,9 C7,10 7,12 12,18.71 C17,12 17,10 17,9 C17,6.23857625 14.7614237,4 12,4 L12,4 Z" id="mdi:map-marker-outline" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},70776:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/map-marker" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,11.5 C10.6192881,11.5 9.5,10.3807119 9.5,9 C9.5,8.33695878 9.7633921,7.70107399 10.232233,7.23223305 C10.701074,6.7633921 11.3369588,6.5 12,6.5 C13.3807119,6.5 14.5,7.61928813 14.5,9 C14.5,9.66304122 14.2366079,10.298926 13.767767,10.767767 C13.298926,11.2366079 12.6630412,11.5 12,11.5 M12,2 C8.13400675,2 5,5.13400675 5,9 C5,14.25 12,22 12,22 C12,22 19,14.25 19,9 C19,5.13400675 15.8659932,2 12,2 Z" id="mdi:map-marker" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},8872:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/membership-outline" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,2 C6.4771525,2 2,6.4771525 2,12 C2,14.6521649 3.0535684,17.195704 4.92893219,19.0710678 C6.80429597,20.9464316 9.3478351,22 12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 M7.07,18.28 C7.5,17.38 10.12,16.5 12,16.5 C13.88,16.5 16.5,17.38 16.93,18.28 C15.5293835,19.3960251 13.7908746,20.0025637 12,20 C10.14,20 8.43,19.36 7.07,18.28 M18.36,16.83 C16.93,15.09 13.46,14.5 11.9999999,14.5 C10.54,14.5 7.07,15.09 5.64,16.83 C4.57618516,15.4446232 3.99966563,13.7467029 3.99999985,12 C3.99999985,7.59 7.59,4 11.9999999,4 C16.41,4 19.9999999,7.59 19.9999999,12 C19.9999999,13.82 19.38,15.5 18.36,16.83 M12,6 C10.06,6 8.5,7.56 8.5,9.5 C8.5,11.44 10.06,13 12,13 C13.94,13 15.5,11.44 15.5,9.5 C15.5,7.56 13.94,6 12,6 M12,11 C11.1715729,11 10.5,10.3284271 10.5,9.5 C10.5,8.67157288 11.1715729,8 12,8 C12.8284271,8 13.5,8.67157288 13.5,9.5 C13.5,10.3284271 12.8284271,11 12,11 Z" id="mdi:account-circle-outline" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},62535:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/membership" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,19.2 C9.5,19.2 7.29,17.92 6,16 C6.03,14 10,12.9 12,12.9 C14,12.9 17.97,14 18,16 C16.6574744,17.9990494 14.4080224,19.1987571 12,19.2 M12,5 C13.6568542,5 15,6.34314575 15,8 C15,9.65685425 13.6568542,11 12,11 C10.3431458,11 9,9.65685425 9,8 C9,6.34314575 10.3431458,5 12,5 M12,2 C6.4771525,2 2,6.4771525 2,12 C2,14.6521649 3.0535684,17.195704 4.92893219,19.0710678 C6.80429597,20.9464316 9.3478351,22 12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.47 17.5,2 12,2 Z" id="mdi:account-circle" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},6278:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/message-bookmark-outline" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M20,2 L4,2 C2.9,2 2,2.9 2,4 L2,22 L6,18 L20,18 C21.1,18 22,17.1 22,16 L22,4 C22,2.9 21.1,2 20,2 M20,16 L5.2,16 L4,17.2 L4,4 L20,4 L20,16 M18,14 L18,6 L13,6 L13,14 L15.5,12.5 L18,14" id="mdi:message-bookmark-outline" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},35529:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g id="message-group-variant2" fill="#000000">\n        <path d="M14.2526206,6 L21.4947588,6 C22.3260806,6 23,6.6752491 23,7.49824524 L23,24 L19,20 L8.50524116,20 C7.67391942,20 7,19.3247509 7,18.5017548 L7,17 L17.0005775,17 C18.6556493,17 20,15.6542582 20,13.9942017 L20,6 L14.2526206,6 Z" id="Message2"></path>\n        <path d="M1,2.49824524 C1,1.67078724 1.66642015,1 2.50863659,1 L16.4913634,1 C17.3245604,1 18,1.6752491 18,2.49824524 L18,13.5017548 C18,14.3292128 17.3335799,15 16.4913634,15 L5,15 L1,19 L1,2.49824524 Z M4,10 L4,12 L12,12 L12,10 L4,10 Z M4,7 L4,9 L15,9 L15,7 L4,7 Z M4,4 L4,6 L15,6 L15,4 L4,4 Z" id="Combined-Shape"></path>\n    </g>\n</g>\n'},79092:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/minus" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <polygon id="mdi:minus" fill="#000000" fill-rule="nonzero" points="19 13 5 13 5 11 19 11"></polygon>\n    </g>\n</svg>'},33767:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="badge/icon/mobile" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="Bounds" x="0" y="0" width="16" height="16"></rect>\n        <path d="M10,1 C11.1045695,1 12,1.8954305 12,3 L12,12 C12,13.1045695 11.1045695,14 10,14 L6,14 C4.8954305,14 4,13.1045695 4,12 L4,3 C4,1.8954305 4.8954305,1 6,1 L10,1 Z M10,4 L6,4 L6,10 L10,10 L10,4 Z" id="Mobile" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},43710:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/palette" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M17.5,12 C16.6715729,12 16,11.3284271 16,10.5 C16,9.67157288 16.6715729,9 17.5,9 C18.3284271,9 19,9.67157288 19,10.5 C19,11.3284271 18.3284271,12 17.5,12 M14.5,8 C13.6715729,8 13,7.32842712 13,6.5 C13,5.67157288 13.6715729,5 14.5,5 C15.3284271,5 16,5.67157288 16,6.5 C16,7.32842712 15.3284271,8 14.5,8 M9.5,8 C8.67157288,8 8,7.32842712 8,6.5 C8,5.67157288 8.67157288,5 9.5,5 C10.3284271,5 11,5.67157288 11,6.5 C11,7.32842712 10.3284271,8 9.5,8 M6.5,12 C5.67157288,12 5,11.3284271 5,10.5 C5,9.67157288 5.67157288,9 6.5,9 C7.32842712,9 8,9.67157288 8,10.5 C8,11.3284271 7.32842712,12 6.5,12 M12,3 C7.02943725,3 3,7.02943725 3,12 C3,16.9705627 7.02943725,21 12,21 C12.8284271,21 13.5,20.3284271 13.5,19.5 C13.5,19.11 13.35,18.76 13.11,18.5 C12.88,18.23 12.73,17.88 12.73,17.5 C12.73,16.6715729 13.4015729,16 14.23,16 L16,16 C18.7614237,16 21,13.7614237 21,11 C21,6.58 16.97,3 12,3 L12,3 Z" id="mdi:palette" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},58080:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/pause" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M14,19 L18,19 L18,5 L14,5 M6,19 L10,19 L10,5 L6,5 L6,19 Z" id="mdi:pause" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},91421:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/picture-in-picture-bottom-right" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M19,11 L11,11 L11,17 L19,17 L19,11 M23,19 L23,5 C23,3.88 22.1,3 21,3 L3,3 C1.8954305,3 1,3.8954305 1,5 L1,19 C1,20.1045695 1.8954305,21 3,21 L21,21 C22.1045695,21 23,20.1045695 23,19 M21,19 L3,19 L3,4.97 L21,4.97 L21,19 Z" id="mdi:picture-in-picture-bottom-right" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},42173:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/picture-in-picture-minimize" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M21,3 C22.1,3 23,3.88 23,5 L23.0008195,11.8103588 C22.4253055,11.2578757 21.7483079,10.8103075 21.000576,10.4984036 L21,4.97 L3,4.97 L3,19 L12.4984036,19.000576 C12.8103075,19.7483079 13.2578757,20.4253055 13.8103588,21.0008195 L3,21 C1.8954305,21 1,20.1045695 1,19 L1,5 C1,3.8954305 1.8954305,3 3,3 L21,3 Z M21,13 L21,14.5 L17.5,14.5 L22,19 L21,20 L16.5,15.5 L16.5,19 L15,19 L15,13 L21,13 Z M13,7 L13,13 L5,13 L5,7 L13,7 Z" id="xabber:picture-in-picture-minimize" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},74578:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/picture-in-picture-top-right" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M19,7 L11,7 L11,13 L19,13 L19,7 M21,3 L3,3 C1.8954305,3 1,3.8954305 1,5 L1,19 C1,20.1045695 1.8954305,21 3,21 L21,21 C22.1045695,21 23,20.1045695 23,19 L23,5 C23,3.8954305 22.1045695,3 21,3 M21,19 L3,19 L3,5 L21,5 L21,19 Z" id="mdi:picture-in-picture-top-right" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},54052:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/pinned-circle-small" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,3 C16.9705627,3 21,7.02943725 21,12 C21,16.9705627 16.9705627,21 12,21 C7.02943725,21 3,16.9705627 3,12 C3,7.02943725 7.02943725,3 12,3 Z M12,4 C7.581722,4 4,7.581722 4,12 C4,16.418278 7.581722,20 12,20 C16.418278,20 20,16.418278 20,12 C20,7.581722 16.418278,4 12,4 Z M14,6.5 L17.5,9.5 L16.5,10.5 L16,10 L14.25,13.25 L15.25,14.75 L14,16 L11.5,13.5 L8.75,16.25 L7.75,16.25 L7.75,15.25 L10.5,12.5 L8,10 L9.25,8.75 L10.75,9.75 L13.5,8 L13,7.5 L14,6.5 Z" id="xabber:pinned-small" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},9443:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/pinned" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,2 C17.5228475,2 22,6.4771525 22,12 C22,17.5228475 17.5228475,22 12,22 C6.4771525,22 2,17.5228475 2,12 C2,6.4771525 6.4771525,2 12,2 Z M12,3 C7.02943725,3 3,7.02943725 3,12 C3,16.9705627 7.02943725,21 12,21 C16.9705627,21 21,16.9705627 21,12 C21,7.02943725 16.9705627,3 12,3 Z M14.5,6 L18,9.5 L17,10.5 L16.5,10 L14.5,13 L15.5,14.5 L14,16 L11.5,13.5 L8.5,16.5 L7.5,16.5 L7.5,15.5 L10.5,12.5 L8,10 L9.5,8.5 L11,9.5 L14,7.5 L13.5,7 L14.5,6 Z" id="xabber:pinned" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},43069:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/play" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <polygon id="mdi:play" fill="#000000" fill-rule="nonzero" points="8 5 8 19 19 12"></polygon>\n    </g>\n</svg>'},30030:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/player-float" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M13,3 L13,5 L3,5 L3,19 L20,19 L20,11 L22,11 L22,19 C22,20.1045695 21.1045695,21 20,21 L3,21 C1.8954305,21 1,20.1045695 1,19 L1,5 C1,3.8954305 1.8954305,3 3,3 L13,3 Z M13,9 L13,15 L11.5,15 L11.5,11.5 L6.5,16.5 L5.5,15.5 L10.5,10.5 L7,10.5 L7,9 L13,9 Z M22,2 C23.1045695,2 24,2.8954305 24,4 L24,7 C24,8.1045695 23.1045695,9 22,9 L17,9 C15.8954305,9 15,8.1045695 15,7 L15,4 C15,2.8954305 15.8954305,2 17,2 L22,2 Z" id="xabber:player-float" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},60259:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/player-full" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M14.8101336,2.99941507 C14.2575941,3.5750451 13.8100058,4.25218587 13.4981326,5.00007375 L3,5 L3,19 L20,19 L20.000332,13.9810299 C20.7043777,13.9274362 21.3770687,13.7616821 22.000576,13.5015964 L22,19 C22,20.1045695 21.1045695,21 20,21 L3,21 C1.8954305,21 1,20.1045695 1,19 L1,5 C1,3.8954305 1.8954305,3 3,3 L14.8101336,2.99941507 Z M12,10 C13.1045695,10 14,10.8954305 14,12 L14,15 C14,16.1045695 13.1045695,17 12,17 L7,17 C5.8954305,17 5,16.1045695 5,15 L5,12 C5,10.8954305 5.8954305,10 7,10 L12,10 Z M22,4 L23,5 L18.5,9.5 L22,9.5 L22,11 L16,11 L16,5 L17.5,5 L17.5,8.5 L22,4 Z" id="xabber:picture-in-picture-full" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},70099:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/player-mini-variant" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M19.5,4.5 C19.5,5.32842712 18.8284271,6 18,6 L6,6 C5.17157288,6 4.5,5.32842712 4.5,4.5 C4.5,3.67157288 5.17157288,3 6,3 L18,3 C18.8284271,3 19.5,3.67157288 19.5,4.5 Z" id="xabber:player-mini-variant" fill="#000000"></path>\n    </g>\n</svg>'},77531:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/player-mini" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M17,8 L17,9.5 L13.5,9.5 L18,14 L17,15 L12.5,10.5 L12.5,14 L11,14 L11,8 L17,8 Z M19.5,4.5 C19.5,5.32842712 18.8284271,6 18,6 L6,6 C5.17157288,6 4.5,5.32842712 4.5,4.5 C4.5,3.67157288 5.17157288,3 6,3 L18,3 C18.8284271,3 19.5,3.67157288 19.5,4.5 Z" id="xabber:player-mini" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},85123:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/plus" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <polygon id="mdi:plus" fill="#000000" fill-rule="nonzero" points="19 12.998 13 12.998 13 18.998 11 18.998 11 12.998 5 12.998 5 10.998 11 10.998 11 4.998 13 4.998 13 10.998 19 10.998"></polygon>\n    </g>\n</svg>'},10410:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <symbol id="plyr-airplay" viewBox="0 0 18 18"><path d="M16 1H2a1 1 0 00-1 1v10a1 1 0 001 1h3v-2H3V3h12v8h-2v2h3a1 1 0 001-1V2a1 1 0 00-1-1z"></path><path d="M4 17h10l-5-6z"></path></symbol>\n    <symbol id="plyr-captions-off" viewBox="0 0 18 18"><path d="M1 1c-.6 0-1 .4-1 1v11c0 .6.4 1 1 1h4.6l2.7 2.7c.2.2.4.3.7.3.3 0 .5-.1.7-.3l2.7-2.7H17c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1H1zm4.52 10.15c1.99 0 3.01-1.32 3.28-2.41l-1.29-.39c-.19.66-.78 1.45-1.99 1.45-1.14 0-2.2-.83-2.2-2.34 0-1.61 1.12-2.37 2.18-2.37 1.23 0 1.78.75 1.95 1.43l1.3-.41C8.47 4.96 7.46 3.76 5.5 3.76c-1.9 0-3.61 1.44-3.61 3.7 0 2.26 1.65 3.69 3.63 3.69zm7.57 0c1.99 0 3.01-1.32 3.28-2.41l-1.29-.39c-.19.66-.78 1.45-1.99 1.45-1.14 0-2.2-.83-2.2-2.34 0-1.61 1.12-2.37 2.18-2.37 1.23 0 1.78.75 1.95 1.43l1.3-.41c-.28-1.15-1.29-2.35-3.25-2.35-1.9 0-3.61 1.44-3.61 3.7 0 2.26 1.65 3.69 3.63 3.69z" fill-rule="evenodd" fill-opacity=".5"></path></symbol>\n    <symbol id="plyr-captions-on" viewBox="0 0 18 18"><path d="M1 1c-.6 0-1 .4-1 1v11c0 .6.4 1 1 1h4.6l2.7 2.7c.2.2.4.3.7.3.3 0 .5-.1.7-.3l2.7-2.7H17c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1H1zm4.52 10.15c1.99 0 3.01-1.32 3.28-2.41l-1.29-.39c-.19.66-.78 1.45-1.99 1.45-1.14 0-2.2-.83-2.2-2.34 0-1.61 1.12-2.37 2.18-2.37 1.23 0 1.78.75 1.95 1.43l1.3-.41C8.47 4.96 7.46 3.76 5.5 3.76c-1.9 0-3.61 1.44-3.61 3.7 0 2.26 1.65 3.69 3.63 3.69zm7.57 0c1.99 0 3.01-1.32 3.28-2.41l-1.29-.39c-.19.66-.78 1.45-1.99 1.45-1.14 0-2.2-.83-2.2-2.34 0-1.61 1.12-2.37 2.18-2.37 1.23 0 1.78.75 1.95 1.43l1.3-.41c-.28-1.15-1.29-2.35-3.25-2.35-1.9 0-3.61 1.44-3.61 3.7 0 2.26 1.65 3.69 3.63 3.69z" fill-rule="evenodd"></path></symbol>\n    <symbol id="plyr-download" viewBox="0 0 18 18"><path d="M9 13c.3 0 .5-.1.7-.3L15.4 7 14 5.6l-4 4V1H8v8.6l-4-4L2.6 7l5.7 5.7c.2.2.4.3.7.3zm-7 2h14v2H2z"></path></symbol><symbol id="plyr-enter-fullscreen" viewBox="0 0 18 18"><path d="M10 3h3.6l-4 4L11 8.4l4-4V8h2V1h-7zM7 9.6l-4 4V10H1v7h7v-2H4.4l4-4z"></path></symbol>\n    <symbol id="plyr-exit-fullscreen" viewBox="0 0 18 18"><path d="M1 12h3.6l-4 4L2 17.4l4-4V17h2v-7H1zM16 .6l-4 4V1h-2v7h7V6h-3.6l4-4z"></path></symbol>\n    <symbol id="plyr-fast-forward" viewBox="0 0 18 18"><path d="M7.875 7.171L0 1v16l7.875-6.171V17L18 9 7.875 1z"></path></symbol>\n    <symbol id="plyr-logo-vimeo" viewBox="0 0 18 18"><path d="M17 5.3c-.1 1.6-1.2 3.7-3.3 6.4-2.2 2.8-4 4.2-5.5 4.2-.9 0-1.7-.9-2.4-2.6C5 10.9 4.4 6 3 6c-.1 0-.5.3-1.2.8l-.8-1c.8-.7 3.5-3.4 4.7-3.5 1.2-.1 2 .7 2.3 2.5.3 2 .8 6.1 1.8 6.1.9 0 2.5-3.4 2.6-4 .1-.9-.3-1.9-2.3-1.1.8-2.6 2.3-3.8 4.5-3.8 1.7.1 2.5 1.2 2.4 3.3z"></path></symbol>\n    <symbol id="plyr-logo-youtube" viewBox="0 0 18 18"><path d="M16.8 5.8c-.2-1.3-.8-2.2-2.2-2.4C12.4 3 9 3 9 3s-3.4 0-5.6.4C2 3.6 1.3 4.5 1.2 5.8 1 7.1 1 9 1 9s0 1.9.2 3.2c.2 1.3.8 2.2 2.2 2.4C5.6 15 9 15 9 15s3.4 0 5.6-.4c1.4-.3 2-1.1 2.2-2.4.2-1.3.2-3.2.2-3.2s0-1.9-.2-3.2zM7 12V6l5 3-5 3z"></path></symbol>\n    <symbol id="plyr-muted" viewBox="0 0 18 18"><path d="M12.4 12.5l2.1-2.1 2.1 2.1 1.4-1.4L15.9 9 18 6.9l-1.4-1.4-2.1 2.1-2.1-2.1L11 6.9 13.1 9 11 11.1zM3.786 6.008H.714C.286 6.008 0 6.31 0 6.76v4.512c0 .452.286.752.714.752h3.072l4.071 3.858c.5.3 1.143 0 1.143-.602V2.752c0-.601-.643-.977-1.143-.601L3.786 6.008z"></path></symbol>\n    <symbol id="plyr-pause" viewBox="0 0 18 18"><path d="M6 1H3c-.6 0-1 .4-1 1v14c0 .6.4 1 1 1h3c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1zm6 0c-.6 0-1 .4-1 1v14c0 .6.4 1 1 1h3c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1h-3z"></path></symbol>\n    <symbol id="plyr-pip" viewBox="0 0 18 18"><path d="M13.293 3.293L7.022 9.564l1.414 1.414 6.271-6.271L17 7V1h-6z"></path><path d="M13 15H3V5h5V3H2a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1v-6h-2v5z"></path></symbol>\n    <symbol id="plyr-play" viewBox="0 0 18 18"><path d="M15.562 8.1L3.87.225c-.818-.562-1.87 0-1.87.9v15.75c0 .9 1.052 1.462 1.87.9L15.563 9.9c.584-.45.584-1.35 0-1.8z"></path></symbol>\n    <symbol id="plyr-restart" viewBox="0 0 18 18"><path d="M9.7 1.2l.7 6.4 2.1-2.1c1.9 1.9 1.9 5.1 0 7-.9 1-2.2 1.5-3.5 1.5-1.3 0-2.6-.5-3.5-1.5-1.9-1.9-1.9-5.1 0-7 .6-.6 1.4-1.1 2.3-1.3l-.6-1.9C6 2.6 4.9 3.2 4 4.1 1.3 6.8 1.3 11.2 4 14c1.3 1.3 3.1 2 4.9 2 1.9 0 3.6-.7 4.9-2 2.7-2.7 2.7-7.1 0-9.9L16 1.9l-6.3-.7z"></path></symbol>\n    <symbol id="plyr-rewind" viewBox="0 0 18 18"><path d="M10.125 1L0 9l10.125 8v-6.171L18 17V1l-7.875 6.171z"></path></symbol>\n    <symbol id="plyr-settings" viewBox="0 0 18 18"><path d="M16.135 7.784a2 2 0 01-1.23-2.969c.322-.536.225-.998-.094-1.316l-.31-.31c-.318-.318-.78-.415-1.316-.094a2 2 0 01-2.969-1.23C10.065 1.258 9.669 1 9.219 1h-.438c-.45 0-.845.258-.997.865a2 2 0 01-2.969 1.23c-.536-.322-.999-.225-1.317.093l-.31.31c-.318.318-.415.781-.093 1.317a2 2 0 01-1.23 2.969C1.26 7.935 1 8.33 1 8.781v.438c0 .45.258.845.865.997a2 2 0 011.23 2.969c-.322.536-.225.998.094 1.316l.31.31c.319.319.782.415 1.316.094a2 2 0 012.969 1.23c.151.607.547.865.997.865h.438c.45 0 .845-.258.997-.865a2 2 0 012.969-1.23c.535.321.997.225 1.316-.094l.31-.31c.318-.318.415-.781.094-1.316a2 2 0 011.23-2.969c.607-.151.865-.547.865-.997v-.438c0-.451-.26-.846-.865-.997zM9 12a3 3 0 110-6 3 3 0 010 6z"></path></symbol>\n    <symbol id="plyr-volume" viewBox="0 0 18 18"><path d="M15.6 3.3c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4C15.4 5.9 16 7.4 16 9c0 1.6-.6 3.1-1.8 4.3-.4.4-.4 1 0 1.4.2.2.5.3.7.3.3 0 .5-.1.7-.3C17.1 13.2 18 11.2 18 9s-.9-4.2-2.4-5.7z"></path><path d="M11.282 5.282a.909.909 0 000 1.316c.735.735.995 1.458.995 2.402 0 .936-.425 1.917-.995 2.487a.909.909 0 000 1.316c.145.145.636.262 1.018.156a.725.725 0 00.298-.156C13.773 11.733 14.13 10.16 14.13 9c0-.17-.002-.34-.011-.51-.053-.992-.319-2.005-1.522-3.208a.909.909 0 00-1.316 0zm-7.496.726H.714C.286 6.008 0 6.31 0 6.76v4.512c0 .452.286.752.714.752h3.072l4.071 3.858c.5.3 1.143 0 1.143-.602V2.752c0-.601-.643-.977-1.143-.601L3.786 6.008z"></path></symbol>\n</svg>'},17943:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/qrcode" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M3,11 L5,11 L5,13 L3,13 L3,11 M11,5 L13,5 L13,9 L11,9 L11,5 M9,11 L13,11 L13,15 L11,15 L11,13 L9,13 L9,11 M15,11 L17,11 L17,13 L19,13 L19,11 L21,11 L21,13 L19,13 L19,15 L21,15 L21,19 L19,19 L19,21 L17,21 L17,19 L13,19 L13,21 L11,21 L11,17 L15,17 L15,15 L17,15 L17,13 L15,13 L15,11 M19,19 L19,15 L17,15 L17,19 L19,19 M15,3 L21,3 L21,9 L15,9 L15,3 M17,5 L17,7 L19,7 L19,5 L17,5 M3,3 L9,3 L9,9 L3,9 L3,3 M5,5 L5,7 L7,7 L7,5 L5,5 M3,15 L9,15 L9,21 L3,21 L3,15 M5,17 L5,19 L7,19 L7,17 L5,17 Z" id="mdi:qrcode" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},89701:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/restrictions-outline" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M18.5,8 C18.33,8 18.16,8 18,8.05 L18,4.5 C18,3.11928813 16.8807119,2 15.5,2 C15.31,2 15.13,2 14.96,2.06 C14.7461874,0.868716938 13.7103179,0.0012815407 12.5,0 C11.44,0 10.54,0.66 10.17,1.59 C9.41693202,1.38051444 8.60922719,1.53531349 7.98697307,2.00838366 C7.36471894,2.48145383 6.99954575,3.21833807 7,4 L7,4.55 C6.84,4.5 6.67,4.5 6.5,4.5 C5.11928813,4.5 4,5.61928813 4,7 L4,15.5 C4,20.19 7.81,24 12.5,24 C17.19,24 21,20.19 21,15.5 L21,10.5 C21,9.11928813 19.8807119,8 18.5,8 M19,15.5 C19,19.0898509 16.0898509,22 12.5,22 C8.91014913,22 6,19.0898509 6,15.5 L6,7 C6,6.72 6.22,6.5 6.5,6.5 C6.78,6.5 7,6.72 7,7 L7,12 L9,12 L9,4 C9,3.72 9.22,3.5 9.5,3.5 C9.78,3.5 10,3.72 10,4 L10,11 L12,11 L12,2.5 C12,2.22 12.22,2 12.5,2 C12.78,2 13,2.22 13,2.5 L13,11 L15,11 L15,4.5 C15,4.22 15.22,4 15.5,4 C15.78,4 16,4.22 16,4.5 L16,13.42 C14.23,14.19 13,15.95 13,18 L15,18 C15,16.34 16.34,15 18,15 L18,10.5 C18,10.22 18.22,10 18.5,10 C18.78,10 19,10.22 19,10.5 L19,15.5 Z" id="mdi:hand-front-right-outline" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},89657:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="badge/icon/rss-variant" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="Bounds" x="0" y="0" width="16" height="16"></rect>\n        <path d="M5,10 C5.55228475,10 6,10.4477153 6,11 C6,11.5412844 5.55045872,12 5,12 C4.4587156,12 4,11.5412844 4,11 C4,10.4477153 4.44771525,10 5,10 M4,4 C8.418278,4 12,7.581722 12,12 L10.5449871,12 C10.5449871,8.38530341 7.61469659,5.45501285 4,5.45501285 L4,4 M4,7 C6.76142375,7 9,9.23857625 9,12 L7.57070707,12 C7.57070707,11.0529896 7.19450866,10.1447663 6.52487118,9.47512882 C5.85523371,8.80549134 4.9470104,8.42929293 4,8.42929293 L4,7 Z" id="rss-variant" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},15645:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="badge/icon/rss" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="Bounds" x="0" y="0" width="16" height="16"></rect>\n        <path d="M4.75,10 C5.44035594,10 6,10.5596441 6,11.25 C6,11.9403559 5.44035594,12.5 4.75,12.5 C4.05964406,12.5 3.5,11.9403559 3.5,11.25 C3.5,10.5596441 4.05964406,10 4.75,10 Z M5.11116669,7.54639605 C6.82660407,7.80940186 8.1830606,9.16218778 8.45158391,10.8758014 L7.23152342,11.1795044 C7.08441894,9.91212418 6.07561709,8.9075227 4.80628203,8.7668642 L5.11116669,7.54639605 Z M5.72009926,5.11432766 C8.32885675,5.60976503 10.3855062,7.6642481 10.8841422,10.2718714 L9.66858256,10.5739265 C9.28406621,8.41337145 7.57799724,6.7100586 5.41602734,6.32963962 L5.72009926,5.11432766 Z M6.32787101,2.68573625 C9.83044069,3.40831848 12.5892971,6.16611302 13.3134345,9.66811414 L12.0989255,9.96960741 C11.4871421,6.91510726 9.07973668,4.50930363 6.02438684,3.89987406 L6.32787101,2.68573625 Z" id="Channel-variant" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},11797:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/saved-messages" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M17.1666667,1 C17.9487847,1 18.6165365,1.26855469 19.1699219,1.80566406 C19.7233073,2.34277344 20,2.99088542 20,3.75 L20,21.625 C20,21.9973958 19.8634983,22.3196615 19.5904948,22.5917969 C19.3174913,22.8639323 18.9817708,23 18.5833333,23 L12,18.1875 L5.41666667,23 C5.01822917,23 4.68250868,22.8639323 4.40950521,22.5917969 C4.13650174,22.3196615 4,21.9973958 4,21.625 L4,3.75 C4,2.99088542 4.27669271,2.34277344 4.83007812,1.80566406 C5.38346354,1.26855469 6.05121528,1 6.83333333,1 L17.1666667,1 Z M12.0016667,4.4375 L10.2972396,8.1328125 L6.335,8.6484375 L9.256875,11.4199219 L8.50427083,15.4375 L12.0016667,13.4609375 L15.4990625,15.4375 L14.7464583,11.4199219 L17.6683333,8.6484375 L13.7060938,8.1328125 L12.0016667,4.4375 Z" id="xabber:saved-messages" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},11146:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <defs>\n        <path d="M15.5,14 L14.71,14 L14.43,13.73 C15.41,12.59 16,11.11 16,9.5 C16,5.91 13.09,3 9.5,3 C5.91,3 3,5.91 3,9.5 C3,13.09 5.91,16 9.5,16 C11.11,16 12.59,15.41 13.73,14.43 L14,14.71 L14,15.5 L19,20.49 L20.49,19 L15.5,14 Z M9.5,14 C7.01,14 5,11.99 5,9.5 C5,7.01 7.01,5 9.5,5 C11.99,5 14,7.01 14,9.5 C14,11.99 11.99,14 9.5,14 Z" id="path-1"></path>\n    </defs>\n    <g id="icon/material/search" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <mask id="mask-2" fill="white">\n            <use xlink:href="#path-1"></use>\n        </mask>\n        <use id="mdi:search" fill="#000000" fill-rule="nonzero" xlink:href="#path-1"></use>\n    </g>\n</svg>'},91467:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/security" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,12 L19,12 C18.47,16.11 15.72,19.78 12,20.92 L12,12 L5,12 L5,6.3 L12,3.19 M12,1 L3,5 L3,11 C3,16.55 6.84,21.73 12,23 C17.16,21.73 21,16.55 21,11 L21,5 L12,1 Z" id="mdi:security" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},71188:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="badge/icon/server" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="Bounds" x="0" y="0" width="16" height="16"></rect>\n        <path d="M10.1428571,13 L5.85714286,13 C5.38571429,13 5,12.625 5,12.1666667 L5,3.83333333 C5,3.375 5.38571429,3 5.85714286,3 L10.1428571,3 C10.6142857,3 11,3.375 11,3.83333333 L11,12.1666667 C11,12.625 10.6142857,13 10.1428571,13 Z M10,5 L6,5 L6,6 L10,6 L10,5 Z M10,7 L6,7 L6,8 L10,8 L10,7 Z M10,11 L9,11 L9,12 L10,12 L10,11 Z" id="Server" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},1866:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/star-face" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,2.5 L8.42,8.06 L2,9.74 L6.2,14.88 L5.82,21.5 L12,19.09 L18.18,21.5 L17.8,14.88 L22,9.74 L15.58,8.06 L12,2.5 M9.38,10.5 C10,10.5 10.5,11 10.5,11.63 C10.5,11.9270425 10.3820003,12.2119189 10.1719596,12.4219596 C9.96191885,12.6320003 9.67704247,12.75 9.38,12.75 C8.75,12.75 8.25,12.25 8.25,11.63 C8.25,11 8.75,10.5 9.38,10.5 M14.63,10.5 C15.25,10.5 15.75,11 15.75,11.63 C15.75,12.2485589 15.2485589,12.75 14.63,12.75 C14,12.75 13.5,12.25 13.5,11.63 C13.5,11 14,10.5 14.63,10.5 M9,15 L15,15 C14.4960889,16.2119097 13.3124982,17.0016023 12,17.0016023 C10.6875018,17.0016023 9.50391113,16.2119097 9,15 L9,15 Z" id="mdi:star-face" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},52555:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/status-outline" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M16.06,2.2 L17.74,6.26 L21.8,7.94 L20.12,12 L21.8,16.06 L17.74,17.74 L16.06,21.8 L12,20.12 L7.94,21.8 L6.26,17.74 L2.2,16.06 L3.88,12 L2.2,7.94 L6.26,6.26 L7.94,2.2 L12,3.88 L16.06,2.2 Z M15,4.81 L12,6.05 L9,4.81 L7.79,7.79 L4.81,9 L6.05,12 L4.81,15 L7.79,16.21 L9,19.19 L12,17.95 L15,19.19 L16.21,16.21 L19.19,15 L17.95,12 L19.19,9 L16.21,7.79 L15,4.81 Z M13.5,7 L12,11 L15,11 L11.5,17 L10.5,17 L12,13 L9,13 L12.5,7 L13.5,7 Z" id="xabber:status-outline" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},5e3:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/status" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M16.06,2.2 L17.74,6.26 L21.8,7.94 L20.12,12 L21.8,16.06 L17.74,17.74 L16.06,21.8 L12,20.12 L7.94,21.8 L6.26,17.74 L2.2,16.06 L3.88,12 L2.2,7.94 L6.26,6.26 L7.94,2.2 L12,3.88 L16.06,2.2 Z M13.5,7 L12.5,7 L9,13 L12,13 L10.5,17 L11.5,17 L15,11 L12,11 L13.5,7 Z" id="xabber:status" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},5414:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/subscription-from" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M14,8 C17.3137085,8 20,10.6862915 20,14 C20,17.3137085 17.3137085,20 14,20 C10.6862915,20 8,17.3137085 8,14 C8,13.462632 8.07064283,12.9417636 8.20314833,12.4461748 L9.67168223,13.9143229 C9.77459988,14.0172246 9.8859413,14.1065666 10.0034864,14.1823489 L10.0048953,14.1996403 C10.1089211,16.3160315 11.8578046,18 14,18 C16.209139,18 18,16.209139 18,14 C18,11.851413 16.3059677,10.0984884 14.180685,10.0040081 C14.1065666,9.8859413 14.0172246,9.77459988 13.9143229,9.67168223 L12.4461748,8.20314833 C12.9417636,8.07064283 13.462632,8 14,8 Z M11,4 L11,6 L7.415,6 L12.5,11.0857864 L11.0857864,12.5 L6,7.415 L6,11 L4,11 L4,4 L11,4 Z" id="xabber:subscribe-from" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},8020:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/subscription-to" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M13.9994979,8.00000002 C17.3137085,8.00000002 20,10.6862915 20,14 C20,17.3137085 17.3137085,20 14,20 C10.7616031,20 8.12242824,17.4344251 8.00413847,14.2249383 L8,13.999 L10,14 L10,14 C10,16.209139 11.790861,18 14,18 C16.209139,18 18,16.209139 18,14 C18,11.8578046 16.3160315,10.1089211 14.1996403,10.0048953 L13.999,10 L13.9994979,8.00000002 Z M4.91421356,3.5 L10,8.585 L10,5 L12,5 L12,12 L5,12 L5,10 L8.585,10 L3.5,4.91421356 L4.91421356,3.5 Z" id="xabber:subscribe-to" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},41835:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="badge/circle/task" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="Bounds" x="0" y="0" width="16" height="16"></rect>\n        <circle id="Circle" fill="#000000" fill-rule="nonzero" cx="8" cy="8" r="7"></circle>\n        <g id="icon16/bot-variant">\n            <rect id="Bounds" x="0" y="0" width="16" height="16"></rect>\n            <polygon id="Path" fill="#FFFFFF" fill-rule="nonzero" points="7 12.5 2.75 8.25 4 7 7 10 12 5 13.25 6.25"></polygon>\n        </g>\n    </g>\n</svg>'},98431:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/translate" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12.87,15.07 L10.33,12.56 L10.36,12.53 C12.0541502,10.6471017 13.3198948,8.41925464 14.07,6 L17,6 L17,4 L10,4 L10,2 L8,2 L8,4 L1,4 L1,6 L12.17,6 C11.5,7.92 10.44,9.75 9,11.35 C8.07,10.32 7.3,9.19 6.69,8 L4.69,8 C5.42,9.63 6.42,11.17 7.67,12.56 L2.58,17.58 L4,19 L9,14 L12.11,17.11 L12.87,15.07 M18.5,10 L16.5,10 L12,22 L14,22 L15.12,19 L19.87,19 L21,22 L23,22 L18.5,10 M15.88,17 L17.5,12.67 L19.12,17 L15.88,17 L15.88,17 Z" id="mdi:translate" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},61686:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/trash" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M19,4 L15.5,4 L14.5,3 L9.5,3 L8.5,4 L5,4 L5,6 L19,6 M6,19 C6,20.1045695 6.8954305,21 8,21 L16,21 C17.1045695,21 18,20.1045695 18,19 L18,7 L6,7 L6,19 Z" id="mdi:trash" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},75319:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/vcard" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M2,3 L22,3 C23.05,3 24,3.95 24,5 L24,19 C24,20.05 23.05,21 22,21 L2,21 C0.95,21 0,20.05 0,19 L0,5 C0,3.95 0.95,3 2,3 M14,6 L14,7 L22,7 L22,6 L14,6 M14,8 L14,9 L22,9 L22,8 L14,8 M14,10 L14,11 L21,11 L21,10 L14,10 M8,13.91 C6,13.91 2,15 2,17 L2,18 L14,18 L14,17 C14,15 10,13.91 8,13.91 M8,6 C6.34314575,6 5,7.34314575 5,9 C5,10.6568542 6.34314575,12 8,12 C9.65685425,12 11,10.6568542 11,9 C11,7.34314575 9.65685425,6 8,6 Z" id="mdi:card-account-details" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},98070:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/video" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M17,10.5 L17,7 C17,6.44771525 16.5522847,6 16,6 L4,6 C3.44771525,6 3,6.44771525 3,7 L3,17 C3,17.5522847 3.44771525,18 4,18 L16,18 C16.5522847,18 17,17.5522847 17,17 L17,13.5 L21,17.5 L21,6.5 L17,10.5 Z" id="mdi:video" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},87658:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/volume-high" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M14,3.23 L14,5.29 C16.89,6.15 19,8.83 19,12 C19,15.17 16.89,17.84 14,18.7 L14,20.77 C18,19.86 21,16.28 21,12 C21,7.72 18,4.14 14,3.23 M16.5,12 C16.5,10.23 15.5,8.71 14,7.97 L14,16 C15.5,15.29 16.5,13.76 16.5,12 M3,9 L3,15 L7,15 L12,20 L12,4 L7,9 L3,9 Z" id="mdi:volume-high" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},7962:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g id="Mobile-Portrait" transform="translate(-41.000000, -4.000000)">\n        <g id="volume-off-variant" transform="translate(34.000000, 0.000000)">\n            <rect id="Bounds" x="0" y="0" width="24" height="24"></rect>\n            <polygon id="Path-2" points="7 9 7 15 11 15 16 20 16 16.5 8.5 9"></polygon>\n            <polygon id="Path-3" points="7 6 18.5 17.5 19.5 16.5 16 13 16 4 11.5 8.5 8 5"></polygon>\n        </g>\n    </g>\n</g>\n'},14032:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/volume-off" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,4 L9.91,6.09 L12,8.18 M4.27,3 L3,4.27 L7.73,9 L3,9 L3,15 L7,15 L12,20 L12,13.27 L16.25,17.53 C15.58,18.04 14.83,18.46 14,18.7 L14,20.77 C15.38,20.45 16.63,19.82 17.68,18.96 L19.73,21 L21,19.73 L12,10.73 M19,12 C19,12.94 18.8,13.82 18.46,14.64 L19.97,16.15 C20.62,14.91 21,13.5 21,12 C21,7.72 18,4.14 14,3.23 L14,5.29 C16.89,6.15 19,8.83 19,12 M16.5,12 C16.5,10.23 15.5,8.71 14,7.97 L14,10.18 L16.45,12.63 C16.5,12.43 16.5,12.21 16.5,12 Z" id="mdi:volume-off" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},26330:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/web-cancel" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M13.82,14 L9.66,14 C9.56,13.34 9.5,12.68 9.5,12 C9.5,11.32 9.56,10.65 9.66,10 L14.34,10 C14.43,10.65 14.5,11.32 14.5,12 C14.5,12.5 14.46,13 14.4,13.46 C15,12.96 15.72,12.57 16.5,12.32 L16.5,12 C16.5,11.32 16.44,10.66 16.36,10 L19.74,10 C19.9,10.64 20,11.31 20,12 L20,12.18 C20.7,12.35 21.35,12.63 21.95,13 C22,12.68 22,12.34 22,12 C22,6.5 17.5,2 12,2 C6.47,2 2,6.5 2,12 C2,17.5 6.5,22 12,22 C12.34,22 12.68,22 13,21.95 C12.59,21.29 12.29,20.55 12.13,19.75 C12.09,19.82 12.05,19.89 12,19.96 C11.17,18.76 10.5,17.43 10.09,16 L12.5,16 C12.81,15.25 13.26,14.58 13.82,14 M18.92,8 L15.97,8 C15.6570216,6.76145777 15.1935734,5.56589587 14.59,4.44 C16.43,5.07 17.96,6.34 18.92,8 M12,4.03 C12.83,5.23 13.5,6.57 13.91,8 L10.09,8 C10.5,6.57 11.17,5.23 12,4.03 M4.26,14 C4.1,13.36 4,12.69 4,12 C4,11.31 4.1,10.64 4.26,10 L7.64,10 C7.56,10.66 7.5,11.32 7.5,12 C7.5,12.68 7.56,13.34 7.64,14 L4.26,14 M5.08,16 L8,16 C8.35,17.25 8.8,18.45 9.4,19.56 C7.57862399,18.9316655 6.0448462,17.667719 5.08,16 M8,8 L5.08,8 C6.03885577,6.32721463 7.57479586,5.06148622 9.4,4.44 C8.8,5.55 8.35,6.75 8,8 M18.5,14 C16,14 14,16 14,18.5 C14,21 16,23 18.5,23 C21,23 23,21 23,18.5 C23,16 21,14 18.5,14 M18.5,21.5 C16.84,21.5 15.5,20.16 15.5,18.5 C15.5,17.94 15.65,17.42 15.92,17 L20,21.08 C19.58,21.35 19.06,21.5 18.5,21.5 M21.08,20 L17,15.92 C17.42,15.65 17.94,15.5 18.5,15.5 C20.16,15.5 21.5,16.84 21.5,18.5 C21.5,19.06 21.35,19.58 21.08,20 Z" id="mdi:web-cancel" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},7094:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/web" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M16.36,14 C16.44,13.34 16.5,12.68 16.5,12 C16.5,11.32 16.44,10.66 16.36,10 L19.74,10 C19.9,10.64 20,11.31 20,12 C20,12.69 19.9,13.36 19.74,14 M14.59,19.56 C15.19,18.45 15.65,17.25 15.97,16 L18.92,16 C17.96,17.65 16.43,18.93 14.59,19.56 M14.34,14 L9.66,14 C9.56,13.34 9.5,12.68 9.5,12 C9.5,11.32 9.56,10.65 9.66,10 L14.34,10 C14.43,10.65 14.5,11.32 14.5,12 C14.5,12.68 14.43,13.34 14.34,14 M12,19.96 C11.17,18.76 10.5,17.43 10.09,16 L13.91,16 C13.5,17.43 12.83,18.76 12,19.96 M8,8 L5.08,8 C6.03,6.34 7.57,5.06 9.4,4.44 C8.8,5.55 8.35,6.75 8,8 M5.08,16 L8,16 C8.35,17.25 8.8,18.45 9.4,19.56 C7.57,18.93 6.03,17.65 5.08,16 M4.26,14 C4.1,13.36 4,12.69 4,12 C4,11.31 4.1,10.64 4.26,10 L7.64,10 C7.56,10.66 7.5,11.32 7.5,12 C7.5,12.68 7.56,13.34 7.64,14 M12,4.03 C12.83,5.23 13.5,6.57 13.91,8 L10.09,8 C10.5,6.57 11.17,5.23 12,4.03 M18.92,8 L15.97,8 C15.65,6.75 15.19,5.55 14.59,4.44 C16.43,5.07 17.96,6.34 18.92,8 M12,2 C6.47,2 2,6.5 2,12 C2,14.6521649 3.0535684,17.195704 4.92893219,19.0710678 C6.80429597,20.9464316 9.3478351,22 12,22 C17.5228475,22 22,17.5228475 22,12 C22,9.3478351 20.9464316,6.80429597 19.0710678,4.92893219 C17.195704,3.0535684 14.6521649,2 12,2 Z" id="mdi:web" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},50033:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g id="Xabber-Offline" fill="#000000">\n        <path d="M13.4146471,22.5 L14.009222,22.5 C14.5490248,22.5 15,22.0522847 15,21.5 C15,20.9438648 14.5564136,20.5 14.009222,20.5 L9.99077797,20.5 C9.45097518,20.5 9,20.9477153 9,21.5 C9,22.0561352 9.44358641,22.5 9.99077797,22.5 L10.5853529,22.5 C10.7912711,23.0825962 11.3468906,23.5 12,23.5 C12.6531094,23.5 13.2087289,23.0825962 13.4146471,22.5 Z" id="Base"></path>\n        <rect id="Middle-base" x="8" y="17.75" width="8" height="2" rx="1"></rect>\n        <path d="M17.5099945,14.8015103 L17.5099945,14.8015103 C17.1966102,15.1049344 17.0013821,15.5296633 17,16 C17,16.5522847 16.5443356,17 16.0046024,17 L7.99539757,17 C7.44565467,17 7,16.5561352 6.99998649,16 C6.99861167,15.5296664 6.80338616,15.10494 6.49000549,14.8015163 L6.49000549,14.8000192 C4.95622884,13.3424727 4,11.282906 4,9 C4,4.581722 7.581722,1 12,1 C16.418278,1 20,4.581722 20,9 C20,11.282906 19.0437712,13.3424727 17.5099945,14.8000192 L17.5099945,14.8015103 Z M8.86088543,15 L15.1391084,15 C15.3021338,14.4253123 15.6014858,13.895093 16,13.472213 C17.2274987,12.3735719 18,10.7769996 18,9 C18,5.6862915 15.3137085,3 12,3 C8.6862915,3 6,5.6862915 6,9 C6,10.7769996 6.77250128,12.3735719 8,13.472213 C8.39851111,13.8950917 8.69786083,14.4253152 8.86088543,15 Z" id="Bulb-shape"></path>\n    </g>\n</g>\n'},74922:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g id="Xabber-Online" fill="#000000">\n        <path d="M13.4146471,22.5 L14.009222,22.5 C14.5490248,22.5 15,22.0522847 15,21.5 C15,20.9438648 14.5564136,20.5 14.009222,20.5 L9.99077797,20.5 C9.45097518,20.5 9,20.9477153 9,21.5 C9,22.0561352 9.44358641,22.5 9.99077797,22.5 L10.5853529,22.5 C10.7912711,23.0825962 11.3468906,23.5 12,23.5 C12.6531094,23.5 13.2087289,23.0825962 13.4146471,22.5 Z" id="Base"></path>\n        <rect id="Middle-base" x="8" y="17.75" width="8" height="2" rx="1"></rect>\n        <path d="M17.5099945,14.8015103 L17.5099945,14.8000192 C19.0437712,13.3424727 20,11.282906 20,9 C20,4.581722 16.418278,1 12,1 C7.581722,1 4,4.581722 4,9 C4,11.282906 4.95622884,13.3424727 6.49000549,14.8000192 L6.49000549,14.8015163 C6.80338616,15.10494 6.99861167,15.5296664 6.99998649,16 C7,16.5561352 7.44565467,17 7.99539757,17 L16.0046024,17 C16.5443356,17 17,16.5522847 17,16 C17.0013821,15.5296633 17.1966102,15.1049344 17.5099945,14.8015103 L17.5099945,14.8015103 Z" id="Bulb-shape"></path>\n    </g>\n</g>\n'},92052:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \n    <g id="icon/material/xmpp" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="24" height="24"></rect>\n        <path d="M12,16.4 C9.75,14.09 8,10.54 8,7 C2,5 8,7 2,5 C2,10.65 6.33,15.11 10.55,17.66 C9.38,18.5 8.15,19 7,19 C7,20 7,19 7,20 C8.2,20 10.03,19.46 12,18.46 C13.97,19.46 15.8,20 17,20 C17,19 17,20 17,19 C15.85,19 14.62,18.5 13.45,17.66 C17.66,15.11 22,10.65 22,5 C16,7 22,5 16,7 C16,10.54 14.25,14.09 12,16.4 Z" id="mdi:xmpp" fill="#000000" fill-rule="nonzero"></path>\n    </g>\n</svg>'},73889:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="block-header">\n    <span class="block-name"></span>\n    <div class="btn-vcard-refresh">\n        <div class="button">\n            <i class="mdi mdi-20px mdi-refresh"></i>\n        </div>\n        <div class="preloader-wrapper preloader-20px active">\n            <div class="spinner-layer">\n                <div class="circle-clipper left">\n                    <div class="circle"></div>\n                </div>\n                <div class="gap-patch">\n                    <div class="circle"></div>\n                </div>\n                <div class="circle-clipper right">\n                    <div class="circle"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="vcard-wrap">\n    <div class="info-wrap jid-info-wrap hidden">\n        <div class="details-icon-wrap" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="xmpp"></svg></div>\n        <div class="info jabber-id">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_jabber_id"))]}</div>\n        </div>\n    </div>\n    <div class="info-wrap personal-info-wrap hidden">\n        <div class="details-icon-wrap" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="account-outline"></svg></div>\n        <div class="info first-name">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_given_name"))]}</div>\n        </div>\n        <div class="info middle-name">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_middle_name"))]}</div>\n        </div>\n        <div class="info last-name">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_family_name"))]}</div>\n        </div>\n        <div class="info fullname">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_full_name"))]}</div>\n        </div>\n    </div>\n    <div class="info-wrap nickname-info-wrap hidden">\n        <i class="details-icon mdi mdi-24px mdi-account-box-outline"></i>\n        <div class="info nickname">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_nick_name"))]}</div>\n        </div>\n    </div>\n    <div class="info-wrap birthday-info-wrap hidden">\n        <div class="details-icon-wrap" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="birthday-outline"></svg></div>\n        <div class="info birthday">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_birth_date"))]}</div>\n        </div>\n    </div>\n    <div class="info-wrap job-info-wrap hidden">\n        <div class="details-icon-wrap" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="job-outline"></svg></div>\n        <div class="info org-name">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_organization"))]}</div>\n        </div>\n        <div class="info job-title">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_title"))]}</div>\n        </div>\n        <div class="info org-unit">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_organization_unit"))]}</div>\n        </div>\n        <div class="info role">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_role"))]}</div>\n        </div>\n    </div>\n    <div class="info-wrap site-info-wrap hidden">\n        <i title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\' class="details-icon mdi mdi-24px mdi-web"></i>\n        <div class="info url">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_url"))]}</div>\n        </div>\n    </div>\n    <div class="info-wrap description-info-wrap hidden">\n        <i title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\' class="details-icon mdi mdi-24px mdi-file-document-box"></i>\n        <div class="info description">\n            <div class="value"></div>\n            <div class="label">{[print(xabber.getString("vcard_decsription"))]}</div>\n        </div>\n    </div>\n    <div class="info-wrap phone-info-wrap hidden">\n        <i title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\' class="details-icon mdi mdi-24px mdi-phone"></i>\n        <div class="info phone-work">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_type_work"))]}</div>\n        </div>\n        <div class="info phone-home">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_type_home"))]}</div>\n        </div>\n        <div class="info phone-mobile">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_type_mobile"))]}</div>\n        </div>\n        <div class="info phone-default">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_telephone"))]}</div>\n        </div>\n    </div>\n    <div class="info-wrap email-info-wrap hidden">\n        <i title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\' class="details-icon mdi mdi-24px mdi-email"></i>\n        <div class="info email-work">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_type_work"))]}</div>\n        </div>\n        <div class="info email-home">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_type_personal"))]}</div>\n        </div>\n        <div class="info email-default">\n            <div class="value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_email"))]}</div>\n        </div>\n    </div>\n    <div class="info-wrap address-info-wrap hidden">\n        <i title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\' class="details-icon mdi mdi-24px mdi-map-marker"></i>\n        <div class="info address-home">\n            <div class="pobox value one-line"></div>\n            <div class="extadd value one-line"></div>\n            <div class="street value one-line"></div>\n            <div class="locality value one-line"></div>\n            <div class="region value one-line"></div>\n            <div class="pcode value one-line"></div>\n            <div class="country value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_type_home"))]}</div>\n        </div>\n        <div class="info address-work">\n            <div class="pobox value one-line"></div>\n            <div class="extadd value one-line"></div>\n            <div class="street value one-line"></div>\n            <div class="locality value one-line"></div>\n            <div class="region value one-line"></div>\n            <div class="pcode value one-line"></div>\n            <div class="country value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_type_work"))]}</div>\n        </div>\n        <div class="info address-default">\n            <div class="extadd value one-line"></div>\n            <div class="street value one-line"></div>\n            <div class="locality value one-line"></div>\n            <div class="region value one-line"></div>\n            <div class="pcode value one-line"></div>\n            <div class="country value one-line"></div>\n            <div class="label">{[print(xabber.getString("vcard_address"))]}</div>\n        </div>\n    </div>\n    <button class="btn-vcard-edit btn-flat btn-main btn-dark ground-color-grey-100 hover-ground-color-grey-300 hidden">{[print(xabber.getString("edit_vcard"))]}</button>\n</div>\n'},43918:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="buttons-wrap">\n    <button class="btn-vcard-save btn-flat btn-main text-color-500 ground-color-grey-100 hover-ground-color-grey-300">{[print(xabber.getString("vcard_edit__button_save"))]}</button>\n</div>\n<div class="vcard-edit-wrap">\n    <div class="input-label">{[print(xabber.getString("vcard_type_personal"))]}</div>\n    <div class="info-wrap personal-info-wrap">\n        <div class="setting-icon-background">\n            <svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="fullname"></svg>\n        </div>\n        <div class="input-field first-name">\n            <input class="input-glow account-glow" id="{{view.cid}}-first-name" placeholder="{[print(xabber.getString(\'vcard_given_name\'))]}" type="text" name="first_name">\n        </div>\n        <div class="input-field middle-name">\n            <input class="input-glow account-glow" id="{{view.cid}}-middle-name" placeholder="{[print(xabber.getString(\'vcard_middle_name\'))]}" type="text" name="middle_name">\n        </div>\n        <div class="input-field last-name">\n            <input class="input-glow account-glow" id="{{view.cid}}-last-name" placeholder="{[print(xabber.getString(\'vcard_family_name\'))]}" type="text" name="last_name">\n        </div>\n        <div class="input-field fullname">\n            <input class="input-glow account-glow" id="{{view.cid}}-fullname" placeholder="{[print(xabber.getString(\'vcard_full_name\'))]}" type="text" name="fullname">\n        </div>\n    </div>\n\n    <div class="input-label">{[print(xabber.getString("vcard_nick_name"))]}</div>\n    <div class="info-wrap nickname-info-wrap">\n        <div class="setting-icon-background">\n            <svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="account"></svg>\n        </div>\n        <div class="input-field nickname">\n            <input class="input-glow account-glow" id="{{view.cid}}-nickname" placeholder="{[print(xabber.getString(\'vcard_nick_name\'))]}" type="text" name="nickname">\n        </div>\n    </div>\n\n    <div class="input-label">{[print(xabber.getString("vcard_birth_date"))]}</div>\n    <div class="info-wrap birthday-info-wrap">\n        <div class="setting-icon-background">\n            <svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="birthday"></svg>\n        </div>\n        <div class="input-field birthday">\n            <input class="input-glow account-glow" id="{{view.cid}}-birthday" placeholder="{[print(xabber.getString(\'vcard_birth_date_placeholder\'))]}" type="text" class="datepicker">\n        </div>\n    </div>\n\n    <div class="input-label">{[print(xabber.getString("vcard_job"))]}</div>\n    <div class="info-wrap job-info-wrap">\n        <div class="setting-icon-background">\n            <svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="job"></svg>\n        </div>\n        <div class="input-field org-name">\n            <input class="input-glow account-glow" id="{{view.cid}}-org-name" placeholder="{[print(xabber.getString(\'vcard_organization\'))]}" type="text" name="org_name">\n        </div>\n        <div class="input-field job-title">\n            <input class="input-glow account-glow" id="{{view.cid}}-job-title" placeholder="{[print(xabber.getString(\'vcard_title\'))]}" type="text" name="job_title">\n        </div>\n        <div class="input-field org-unit">\n            <input class="input-glow account-glow" id="{{view.cid}}-org-unit" placeholder="{[print(xabber.getString(\'vcard_organization_unit\'))]}" type="text" name="org_unit">\n        </div>\n        <div class="input-field role">\n            <input class="input-glow account-glow" id="{{view.cid}}-role" placeholder="{[print(xabber.getString(\'vcard_role\'))]}" type="text" name="role">\n        </div>\n    </div>\n    <div class="input-label">{[print(xabber.getString("vcard_url"))]}</div>\n    <div class="info-wrap site-info-wrap">\n        <div class="setting-icon-background">\n            <svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="web"></svg>\n        </div>\n        <div class="input-field url">\n            <input class="input-glow account-glow" id="{{view.cid}}-url" placeholder="{[print(xabber.getString(\'vcard_url_placeholder\'))]}" type="text" name="url">\n        </div>\n    </div>\n    <div class="input-label">{[print(xabber.getString("vcard_decsription"))]}</div>\n    <div class="info-wrap description-info-wrap">\n        <div class="setting-icon-background">\n            <svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="description"></svg>\n        </div>\n        <div class="input-field description">\n            <textarea id="{{view.cid}}-description" placeholder="{[print(xabber.getString(\'vcard_decsription_placeholder\'))]}" type="text" cols="30" rows="10" class="text-field textarea-glow input-glow account-glow" name="description"></textarea>\n        </div>\n    </div>\n\n    <div class="input-label">{[print(xabber.getString("vcard_telephone"))]}</div>\n    <div class="info-wrap phone-info-wrap">\n        <div class="setting-icon-background">\n            <svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="call"></svg>\n        </div>\n        <div class="input-field phone-work">\n            <input class="input-glow account-glow" id="{{view.cid}}-phone-work" placeholder="{[print(xabber.getString(\'vcard_type_work\'))]}" type="text" name="phone_work">\n        </div>\n        <div class="input-field phone-home">\n            <input class="input-glow account-glow" id="{{view.cid}}-phone-home" placeholder="{[print(xabber.getString(\'vcard_type_home\'))]}" type="text" name="phone_home">\n        </div>\n        <div class="input-field phone-mobile">\n            <input class="input-glow account-glow" id="{{view.cid}}-phone-mobile" placeholder="{[print(xabber.getString(\'vcard_type_mobile\'))]}" type="text" name="phone_mobile">\n        </div>\n    </div>\n    <div class="input-label">{[print(xabber.getString("vcard_email"))]}</div>\n    <div class="info-wrap email-info-wrap">\n        <div class="setting-icon-background">\n            <svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="email"></svg>\n        </div>\n        <div class="input-field email-work">\n            <input class="input-glow account-glow" id="{{view.cid}}-email-work" placeholder="{[print(xabber.getString(\'vcard_type_work\'))]}" type="text" name="email_work">\n        </div>\n        <div class="input-field email-home">\n            <input class="input-glow account-glow" id="{{view.cid}}-email-home" placeholder="{[print(xabber.getString(\'vcard_type_personal\'))]}" type="text" name="email_home">\n        </div>\n    </div>\n\n    <div class="input-label">{[print(xabber.getString("vcard_home_address"))]}</div>\n    <div class="info-wrap address-info-wrap">\n        <div class="setting-icon-background">\n            <svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="address"></svg>\n        </div>\n        <div class="input-wrap address-wrap address-home-wrap">\n            <div class="input-field pobox">\n                <input class="input-glow account-glow" id="{{view.cid}}-po-home-box" placeholder="{[print(xabber.getString(\'vcard_address_pobox\'))]}" type="text" name="po_home_box">\n            </div>\n            <div class="input-field extadd">\n                <input class="input-glow account-glow" id="{{view.cid}}-addr-home-extadd" placeholder="{[print(xabber.getString(\'vcard_address_extadr\'))]}" type="text" name="addr_home_extadd">\n            </div>\n            <div class="input-field street">\n                <input class="input-glow account-glow" id="{{view.cid}}-addr-home-street" placeholder="{[print(xabber.getString(\'vcard_address_street\'))]}" type="text" name="addr_home_street">\n            </div>\n            <div class="input-field locality">\n                <input class="input-glow account-glow" id="{{view.cid}}-addr-home-locality" placeholder="{[print(xabber.getString(\'vcard_address_locality\'))]}" type="text" name="addr_home_locality">\n            </div>\n            <div class="input-field region">\n                <input class="input-glow account-glow" id="{{view.cid}}-addr-home-region" placeholder="{[print(xabber.getString(\'vcard_address_region\'))]}" type="text" name="addr_home_region">\n            </div>\n            <div class="input-field pcode">\n                <input class="input-glow account-glow" id="{{view.cid}}-addr-home-pcode" placeholder="{[print(xabber.getString(\'vcard_address_pcode\'))]}" type="text" name="addr_home_pcode">\n            </div>\n            <div class="input-field country">\n                <input class="input-glow account-glow" id="{{view.cid}}-addr-home-country" placeholder="{[print(xabber.getString(\'vcard_address_ctry\'))]}" type="text" name="addr_home_country">\n            </div>\n        </div>\n    </div>\n    <div class="input-label">{[print(xabber.getString("vcard_work_address"))]}</div>\n    <div class="info-wrap address-info-wrap">\n        <div class="setting-icon-background">\n            <svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="address"></svg>\n        </div>\n        <div class="input-wrap address-wrap address-work-wrap">\n            <div class="input-field pobox">\n                <input class="input-glow account-glow" id="{{view.cid}}-po-work-box" placeholder="{[print(xabber.getString(\'vcard_address_pobox\'))]}" type="text" name="po_work_box">\n            </div>\n            <div class="input-field extadd">\n                <input class="input-glow account-glow" id="{{view.cid}}-addr-work-extadd" placeholder="{[print(xabber.getString(\'vcard_address_extadr\'))]}" type="text" name="addr_work_extadd">\n            </div>\n            <div class="input-field street">\n                <input class="input-glow account-glow" id="{{view.cid}}-addr-work-street" placeholder="{[print(xabber.getString(\'vcard_address_street\'))]}" type="text" name="addr_work_street">\n            </div>\n            <div class="input-field locality">\n                <input class="input-glow account-glow" id="{{view.cid}}-addr-work-locality" placeholder="{[print(xabber.getString(\'vcard_address_locality\'))]}" type="text" name="addr_work_locality">\n            </div>\n            <div class="input-field region">\n                <input class="input-glow account-glow" id="{{view.cid}}-addr-work-region" placeholder="{[print(xabber.getString(\'vcard_address_region\'))]}" type="text" name="addr_work_region">\n            </div>\n            <div class="input-field pcode">\n                <input class="input-glow account-glow" id="{{view.cid}}-addr-work-pcode" placeholder="{[print(xabber.getString(\'vcard_address_pcode\'))]}" type="text" name="addr_work_pcode">\n            </div>\n            <div class="input-field country">\n                <input class="input-glow account-glow" id="{{view.cid}}-addr-work-country" placeholder="{[print(xabber.getString(\'vcard_address_ctry\'))]}" type="text" name="addr_work_country">\n            </div>\n        </div>\n    </div>\n</div>\n'},59265:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="vcard-wrap">\n    <button class="btn-vcard-edit btn-flat btn-main btn-dark ground-color-grey-100 hover-ground-color-grey-300 hidden">{[print(xabber.getString("edit_vcard"))]}</button>\n</div>\n'},93047:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s='<div class="block-header">\n    <div class="btn-vcard-refresh">\n        <div class="button">\n            <i class="mdi mdi-20px mdi-refresh"></i>\n        </div>\n        <div class="preloader-wrapper preloader-20px active">\n            <div class="spinner-layer">\n                <div class="circle-clipper left">\n                    <div class="circle"></div>\n                </div>\n                <div class="gap-patch">\n                    <div class="circle"></div>\n                </div>\n                <div class="circle-clipper right">\n                    <div class="circle"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="vcard-wrap">\n    <div class="info-wrap jid-info-wrap hidden" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'>\n        <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="id-outline"></svg></div>\n        <div class="info-hover">\n            <div class="info jabber-id">\n                <div class="value one-line"></div>\n                <div class="label">{[print(xabber.getString("vcard_jabber_id"))]}</div>\n            </div>\n        </div>\n    </div>\n    <div class="info-wrap nickname-info-wrap hidden" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'>\n        <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="account-outline"></svg></div>\n        <div class="info-hover">\n            <div class="info nickname">\n                <div class="value one-line"></div>\n                <div class="label">{[print(xabber.getString("vcard_nick_name"))]}</div>\n            </div>\n        </div>\n    </div>\n    <div class="info-wrap personal-info-wrap hidden" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'>\n        <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="fullname-outline"></svg></div>\n        <div class="info-hover">\n            <div class="info first-name">\n                <div class="value one-line"></div>\n                <div class="label">{[print(xabber.getString("vcard_given_name"))]}</div>\n            </div>\n        </div>\n        <div class="info-hover">\n            <div class="info last-name">\n                <div class="value one-line"></div>\n                <div class="label">{[print(xabber.getString("vcard_family_name"))]}</div>\n            </div>\n        </div>\n    </div>\n    <div class="info-wrap birthday-info-wrap hidden" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'>\n        <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="birthday-outline"></svg></div>\n        <div class="info-hover">\n            <div class="info birthday">\n                <div class="value one-line"></div>\n                <div class="label">{[print(xabber.getString("vcard_birth_date"))]}</div>\n            </div>\n        </div>\n    </div>\n    <div class="info-wrap site-info-wrap hidden" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'>\n        <i class="details-icon mdi mdi-24px mdi-web"></i>\n        <div class="info-hover">\n            <div class="info url">\n                <div class="value one-line"></div>\n                <div class="label">{[print(xabber.getString("vcard_url"))]}</div>\n            </div>\n        </div>\n    </div>\n    <div class="info-wrap more">\n        <div class="show-vcard">\n            {[print(xabber.getString("contact_vcard_more"))]}\n        </div>\n    </div>\n</div>\n<div class="full-vcard-wrap">\n    <div class="full-vcard-content">\n        <div class="vcard-header block-header">\n            <div class="vcard-header-title">\n                <i class="details-icon btn-back mdi mdi-24px mdi-arrow-left"></i>\n                <span class="block-name">{[print(xabber.getString("contact_vcard_header_title"))]}</span>\n            </div>\n            <div class="main-info">\n                <div class="avatar-wrap">\n                    <div class="circle-avatar"></div>\n                </div>\n                <div class="text-info">\n                    <div class="name-wrap"></div>\n                </div>\n            </div>\n        </div>\n        <div class="vcard-list">\n            <div class="info-wrap jid-info-wrap hidden" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'>\n                <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="id-outline"></svg></div>\n                <div class="info-hover">\n                    <div class="info jabber-id">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_jabber_id"))]}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="info-wrap nickname-info-wrap hidden" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'>\n                <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="account-outline"></svg></div>\n                <div class="info-hover">\n                    <div class="info nickname">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_nick_name"))]}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="info-wrap personal-info-wrap hidden" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'>\n                <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="fullname-outline"></svg></div>\n                <div class="info-hover">\n                    <div class="info first-name">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_given_name"))]}</div>\n                    </div>\n                </div>\n                <div class="info-hover">\n                    <div class="info middle-name">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_middle_name"))]}</div>\n                    </div>\n                </div>\n                <div class="info-hover">\n                    <div class="info last-name">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_family_name"))]}</div>\n                    </div>\n                </div>\n                <div class="info-hover">\n                    <div class="info fullname">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_full_name"))]}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="info-wrap birthday-info-wrap hidden" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'>\n                <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="birthday-outline"></svg></div>\n                <div class="info-hover">\n                    <div class="info birthday">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_birth_date"))]}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="info-wrap job-info-wrap hidden" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'>\n                <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="job-outline"></svg></div>\n                <div class="info-hover">\n                    <div class="info org-name">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_organization"))]}</div>\n                    </div>\n                </div>\n                <div class="info-hover">\n                    <div class="info job-title">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_title"))]}</div>\n                    </div>\n                </div>\n                <div class="info-hover">\n                    <div class="info org-unit">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_organization_unit"))]}</div>\n                    </div>\n                </div>\n                <div class="info-hover">\n                    <div class="info role">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_role"))]}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="info-wrap site-info-wrap hidden" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'>\n                <i class="details-icon mdi mdi-24px mdi-web"></i>\n                <div class="info-hover">\n                    <div class="info url">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_url"))]}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="info-wrap description-info-wrap hidden" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'>\n                <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="description-outline"></svg></div>\n                <div class="info-hover">\n                    <div class="info description">\n                        <div class="value"></div>\n                        <div class="label">{[print(xabber.getString("vcard_decsription"))]}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="info-wrap phone-info-wrap hidden" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'>\n                <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="call-outline"></svg></div>\n                <div class="info-hover">\n                    <div class="info phone-work">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_type_work"))]}</div>\n                    </div>\n                </div>\n                <div class="info-hover">\n                    <div class="info phone-home">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_type_home"))]}</div>\n                    </div>\n                </div>\n                <div class="info-hover">\n                    <div class="info phone-mobile">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_type_mobile"))]}</div>\n                    </div>\n                </div>\n                <div class="info-hover">\n                    <div class="info phone-default">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_telephone"))]}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="info-wrap email-info-wrap hidden" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'>\n                <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="email-outline"></svg></div>\n                <div class="info-hover">\n                    <div class="info email-work">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_type_work"))]}</div>\n                    </div>\n                </div>\n                <div class="info-hover">\n                    <div class="info email-home">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_type_personal"))]}</div>\n                    </div>\n                </div>\n                <div class="info-hover">\n                    <div class="info email-default">\n                        <div class="value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_email"))]}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="info-wrap address-info-wrap hidden" title=\'{[print(xabber.getString("group_settings__properties__tooltip_copy_by_click"))]}\'>\n                <div class="details-icon-wrap"><svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="job-outline"></svg></div>\n                <div class="info-hover">\n                    <div class="info address-home">\n                        <div class="pobox value one-line"></div>\n                        <div class="extadd value one-line"></div>\n                        <div class="street value one-line"></div>\n                        <div class="locality value one-line"></div>\n                        <div class="region value one-line"></div>\n                        <div class="pcode value one-line"></div>\n                        <div class="country value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_type_home"))]}</div>\n                    </div>\n                </div>\n                <div class="info-hover">\n                    <div class="info address-work">\n                        <div class="pobox value one-line"></div>\n                        <div class="extadd value one-line"></div>\n                        <div class="street value one-line"></div>\n                        <div class="locality value one-line"></div>\n                        <div class="region value one-line"></div>\n                        <div class="pcode value one-line"></div>\n                        <div class="country value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_type_work"))]}</div>\n                    </div>\n                </div>\n                <div class="info-hover">\n                    <div class="info address-default">\n                        <div class="extadd value one-line"></div>\n                        <div class="street value one-line"></div>\n                        <div class="locality value one-line"></div>\n                        <div class="region value one-line"></div>\n                        <div class="pcode value one-line"></div>\n                        <div class="country value one-line"></div>\n                        <div class="label">{[print(xabber.getString("vcard_address"))]}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="resources-block-wrap hidden">\n                <div class="resources-wrap">\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},84028:e=>{e.exports={"background-images":{image:[{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_0293+he.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-A0tXm8gjfMU/U08VDMRGtuI/AAAAAAAAvrI/IQEscTGZyJY/s1920-w1920-h1080-c/IMG_0293%2Bhe.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_0660.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-wkrGBuk0DoA/Us9JnUoXnTI/AAAAAAAAkTA/yDQexzLKhKY/s1920-w1920-h1080-c/DSC_0660.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/071227-4144-PtLomaReef.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-1xZqgaRDIec/Tg1dMJq1vBI/AAAAAAAAALc/7m0Tpv2htVc/s1920-w1920-h1080-c/071227-4144-PtLomaReef.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/976865336_a+view+of+queenstown.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-36YdSRh6q9w/TgtZEChvrkI/AAAAAAAJA0M/zVvIUAdwQ3Q/s1920-w1920-h1080-c/976865336_a%2Bview%2Bof%2Bqueenstown.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/GGB-MarshallBeach-lightSky.png"],"fullscreen-image":["https://lh5.googleusercontent.com/--L7AhWZit78/TysVss3ThoI/AAAAAAAARho/n2ToQ-2Kw7g/s1920-w1920-h1080-c/GGB-MarshallBeach-lightSky.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC01079+(1).png"],"fullscreen-image":["https://lh4.googleusercontent.com/-ePzy0PYNkjY/ToE9F9iPxKI/AAAAAAAAsWg/o7LkkqWEs2o/s1920-w1920-h1080-c/DSC01079%2B%25281%2529.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_8492_HDR-Edit.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-pnosgcd6G2c/UbheNBeniVI/AAAAAAAAWp0/hSEX3IwAgyI/s1920-w1920-h1080-c/DSC_8492_HDR-Edit.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/02202012-04.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-El8tXEJMqm4/UOD9tk8_rkI/AAAAAAAAkM0/sZP34rwkVsQ/s1920-w1920-h1080-c/02202012-04.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/20100530_120257_0273-Edit-2.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-EpsKJMBxb6I/TBpXudG4_PI/AAAAAAABEHk/_knVZZOptTY/s1920-w1920-h1080-c/20100530_120257_0273-Edit-2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Lines.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-Ot1wFdQdaqw/UBSl7ewGOkI/AAAAAAAAPd4/3tUkrKTWDgM/s1920-w1920-h1080-c/Lines.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DunesEdge.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-WbNq4f1kE7Y/Tu9tVtXGCYI/AAAAAAABFWY/N9NL1MKUt4A/s1920-w1920-h1080-c/DunesEdge.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_2857.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-YPiBdTDD5Vo/UpExbztAgWI/AAAAAAAAFg8/8n5CyP4w8Ps/s1920-w1920-h1080-c/DSC_2857.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_0513-edited.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-CY6T5q8rqmA/UZWyvmYhLYI/AAAAAAAAAw4/Pi0Uy3nq19I/s1920-w1920-h1080-c/DSC_0513-edited.jpeg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/stuck_04.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-fc8aRqsAEzk/U0MjlhykUtI/AAAAAAAJF1s/nRoV1Yk1z2E/s1920-w1920-h1080-c/stuck_04.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Dandelion_.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-ExqBtlpobeE/T-aKZZzVcKI/AAAAAAABhl4/jrErtktlcuA/s1920-w1920-h1080-c/Dandelion_.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/8670434759_91e92fd1ee_k.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-3nqLFWiEm3E/UXXCrC5RBeI/AAAAAAAANoY/8_ktEhLdCLs/s1920-w1920-h1080-c/8670434759_91e92fd1ee_k.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/2049233526_19f97ff57f_o.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-gJmej39yU_c/TgtZECWgTtI/AAAAAAAJFFY/Y0nVr5_Tchg/s1920-w1920-h1080-c/2049233526_19f97ff57f_o.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/RodeoBeach-firespinning-2.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-teMxOetSsy0/TwNDboHbM0I/AAAAAAABFao/F9yQHylkRdo/s1920-w1920-h1080-c/RodeoBeach-firespinning-2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Iceland.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-rF8zodn1xAI/U_yjoZyDgcI/AAAAAAAB-38/U62D7hi4-NU/s1920-w1920-h1080-c/20140204_Iceland_0234_5_6_32bit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_6887-Edit-Edit.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-KiRwrTTHEWk/UdFoWqh2bFI/AAAAAAAAXhA/6PIDVYH9nFY/s1920-w1920-h1080-c/DSC_6887-Edit-Edit.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/SealRocks-sunset-beach-rock.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-6_QxmRRnJO8/TwjqsB2kshI/AAAAAAABFZw/__-irT00R2k/s1920-w1920-h1080-c/SealRocks-sunset-beach-rock.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_7112.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-HWAadtEQKQE/UtTyRxs2u4I/AAAAAAAAOhk/Y3jT0QJtdhQ/s1920-w1920-h1080-c/DSC_7112.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Invitation.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-5NKrifl_xpo/UUxwAqoj7nI/AAAAAAAAwGk/82Dkiz_sEaw/s1920-w1920-h1080-c/Invitation.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/_DX_7114-Edit-Recovered.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-W5qc4LH_lpo/U_yjzHjSpzI/AAAAAAAB-7E/8MQAw4fsEJc/s1920-w1920-h1080-c/_DX_7114-Edit-Recovered.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMGP8993.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-sy3wa9ofb38/UQtPlF6YOQI/AAAAAAAAfXc/9uYpeM68vOc/s1920-w1920-h1080-c/IMGP8993.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/dsc_4194.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-cFySK9YoOOI/SwTDSXWTa2I/AAAAAAABNnY/1VFL3dYXkgA/s1920-w1920-h1080-c/dsc_4194.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/panthercreek_7509-Edit.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-JoKkOqJLegk/T7KQORntaBI/AAAAAAABjLg/FbmDYu5k3DY/s1920-w1920-h1080-c/panthercreek_7509-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_6464.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-RYt_J-BlGJs/UmBWyVrQZII/AAAAAAAAFAA/9Y9zqjdXQeU/s1920-w1920-h1080-c/DSC_6464.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/080820-5209-MakenaLL.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-6IrulujJPwU/Tg1d_n1nptI/AAAAAAAAAMc/O4OAV6udX8Y/s1920-w1920-h1080-c/080820-5209-MakenaLL.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_5300.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-cn-CS-vxFn4/UtTvqLzjmrI/AAAAAAAAX3Y/OdfK9XhRGeE/s1920-w1920-h1080-c/DSC_5300.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/080327-4706-JoshuaTreeOasis.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-mwobIYTjtko/Tg1dd90GDjI/AAAAAAAAAL0/M_NjYSMqoG0/s1920-w1920-h1080-c/080327-4706-JoshuaTreeOasis.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/217440037_8ca190627e_o.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-EjnJBBcvhrU/TgtZEIVpLlI/AAAAAAAJJ5s/CQK74NolX7E/s1920-w1920-h1080-c/217440037_8ca190627e_o.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/MSU_1184.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-lM1sKRbIu7A/T_mdon8mP-I/AAAAAAAAAwc/SJMO-kWHQLY/s1920-w1920-h1080-c/MSU_1184.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_0537-Edit-Edit-Edit-Edit-Edit-Edit.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-HfCYnCbpqww/Us1HNtNz00I/AAAAAAAAkFE/UJChD7bbmm0/s1920-w1920-h1080-c/DSC_0537-Edit-Edit-Edit-Edit-Edit-Edit.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/TetonShwabacher.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-gi8-azW5hAQ/UGdSQqk9G_I/AAAAAAAAJto/inIHRwOCy3c/s1920-w1920-h1080-c/TetonShwabacher.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/PVK_5178.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-zAuJ1AZC34Y/TrsJH22VV5I/AAAAAAAAEvc/EzBqDb6tQRE/s1920-w1920-h1080-c/PVK_5178.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_3824+pe.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-QgFnhS9tfuI/U0tzKPZox-I/AAAAAAAAvhg/EjRaa8ETaYM/s1920-w1920-h1080-c/IMG_3824%2Bpe.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/101016-4858-GrayWhaleGran1.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-gb7vG0Z6jrU/Tg1gas5e87I/AAAAAAAAAPY/4zsNQt6LotI/s1920-w1920-h1080-c/101016-4858-GrayWhaleGran1.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Trey+Ratcliff+-+Queenstown+Aurora+Australis.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-F1T9flY075Y/U0Mgnwr2AJI/AAAAAAAJBJY/eeooel6-ZXY/s1920-w1920-h1080-c/Trey%2BRatcliff%2B-%2BQueenstown%2BAurora%2BAustralis.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_4393.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-RtJjOCkuYL8/UtTvDO3sraI/AAAAAAAAX3c/VVVtMV1yPW0/s1920-w1920-h1080-c/DSC_4393.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/trey-ratcliff-road-to-paradise.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-2Lhxkz2EBz4/U0MlX7aExHI/AAAAAAAJXMc/Lh1kPpcrBi8/s1920-w1920-h1080-c/trey-ratcliff-road-to-paradise.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Sunrise+in+Sangam.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-7X44UiG6ohw/Ua2Qmj06zkI/AAAAAAAAfYA/owBHOfu6u_I/s1280-w1280-c-h720-k-no/Sunrise%2Bin%2BSangam"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/061012-1109-PigeonPEve.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-r3D0LQrT3K4/Tg1bQhpX5hI/AAAAAAAAAIs/ONg4BWnADUM/s1920-w1920-h1080-c/061012-1109-PigeonPEve.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Motion.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-eYFfx8sHLZY/UBSl8KkdpRI/AAAAAAAAPeA/5sJreKxzLYc/s1920-w1920-h1080-c/Motion.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/GGate+Dawn+from+Slacker+Hill.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-GYfXywevB-4/UtTtugxGWlI/AAAAAAAAXpw/e5tyHYdIIK0/s1920-w1920-h1080-c/GGate%2BDawn%2Bfrom%2BSlacker%2BHill.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_7006-Edit.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-iqs_ihvxlzM/Ur0B20OjdgI/AAAAAAAAF7Y/yJ1rAuyEQjQ/s1920-w1920-h1080-c/IMG_7006-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/MoraineLake.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-YNlHO0F-y_U/UoazYeYqMvI/AAAAAAAAVqg/h8tLY6Zwktw/s1920-w1920-h1080-c/MoraineLake.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/12-11-12-original.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-qdhLu3VPZU8/Uqjrkz-1dzI/AAAAAAAAYTY/Is8QaEy3rZo/s1920-w1920-h1080-c/12-11-12-original.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/20090411_132734_.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-0EQ-4alz8RY/S9aXij2EEzI/AAAAAAABDQ8/SUAUmq9rm60/s1920-w1920-h1080-c/20090411_132734_.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Seattle_BrianMatiash.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-BK4o8MjAzHY/T6vkuyTuQ7I/AAAAAAAIovQ/rWAnhK0bJqQ/s1920-w1920-h1080-c/Seattle_BrianMatiash.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/The+Infinity+of+Tokyo.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-vCWMbf5t3RI/U0MbNIFWMsI/AAAAAAAJA-w/hbek0tN8Oqk/s1920-w1920-h1080-c/The%2BInfinity%2Bof%2BTokyo.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/PatriciaLake.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-oMSn89uorIA/UktkPI4oEVI/AAAAAAAAVqo/d_0ZasIPfnc/s1920-w1920-h1080-c/PatriciaLake.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/02212012-08.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-_ApXZ5TKn2Y/UOD9xbbz3OI/AAAAAAAAkNY/p6fXkvjZNY8/s1920-w1920-h1080-c/02212012-08.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/LandsEnds-le-sunset.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-aqN5sgbqggQ/T3sLvuIoTmI/AAAAAAABFlQ/jxR2IgWbFM4/s1920-w1920-h1080-c/LandsEnds-le-sunset.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Approaching+Yosemite.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-bEYj5hwZ1G8/U0MSbgTqo4I/AAAAAAAJF9c/ijCLJ4jvSuU/s1920-w1920-h1080-c/Approaching%2BYosemite.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Rust.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-B7_iA_X9u6k/UBSl-nRhkxI/AAAAAAAAPeg/QCRwYky8OXM/s1920-w1920-h1080-c/Rust.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/3054580997_b9c89c7d9f_o.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-KilhfjagQZw/TgtZGB0uBJI/AAAAAAAJXZc/rjj3xvxSkso/s1920-w1920-h1080-c/3054580997_b9c89c7d9f_o.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_0853-Edit-Edit.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-3dXv-q-kMJg/Ute8DoCJgSI/AAAAAAAAlHI/A3PJNXvm8g4/s1920-w1920-h1080-c/DSC_0853-Edit-Edit.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Across+the+Alaskan+Fjords.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-h782AeqXwL4/U0MTcwzNuyI/AAAAAAAJBlg/B0ICHy6uj-I/s1920-w1920-h1080-c/Across%2Bthe%2BAlaskan%2BFjords.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMGP0592.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-rOuBbaxoNAU/T-zOq9MmziI/AAAAAAAABdU/y24M7n3oj70/s1920-w1920-h1080-c/IMGP0592.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/071121-3891-MontcitoMorn.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-X5n9ak4dE1s/Tg1c8c9xvWI/AAAAAAAAALE/M9bf_hSgUHI/s1920-w1920-h1080-c/071121-3891-MontcitoMorn.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_8551.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-0QWWEWkAEkA/UTmo6qnkIgI/AAAAAAAAWsU/VIzT5UsUyh8/s1920-w1920-h1080-c/DSC_8551.png"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_20130330_120430-Edit.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-f1YF98XfEmY/UVmHsvQBxvI/AAAAAAAAT9g/0Uk7XjxUFCw/s1920-w1920-h1080-c/IMG_20130330_120430-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/SutroSunset-surf-burn.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-zcGhuTDGZ7Q/TvI44kbopOI/AAAAAAABFaY/677iL2Z8O8s/s1920-w1920-h1080-c/SutroSunset-surf-burn.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/The+Beach.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-lMCO5r3MLUQ/UZURZdDoWWI/AAAAAAAAPOU/FayJm6cQrN4/s1920-w1920-h1080-c/The%2BBeach.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Take+It+or+Leave+It.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-jrCbEVo5pok/UTUniMfAPQI/AAAAAAAAMlc/taFKyOwN7ro/s1920-w1920-h1080-c/Take%2BIt%2Bor%2BLeave%2BIt.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/ENS-+Macro+Snow-.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-JMRLCkgYWUI/UR0He_hKbyI/AAAAAAAAOyM/Fjml1QshbrU/s1920-w1920-h1080-c/ENS-%2BMacro%2BSnow-.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_1351.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-DHg264B2vlg/Ul9y7zxl9iI/AAAAAAAAE6A/KNGHpq_cH1M/s1920-w1920-h1080-c/DSC_1351.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_7939+he.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-lA8lfuSjpBY/U0tzavr8B0I/AAAAAAAAvh8/YNJ4VVT6axk/s1920-w1920-h1080-c/IMG_7939%2Bhe.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/071124-3917-BigSurSky.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-vQXExn8x3Wo/Tg1dCJ3WSJI/AAAAAAAAALM/j6v5p4iMLDc/s1920-w1920-h1080-c/071124-3917-BigSurSky.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/3189889363_6357f5f645_o.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-mA6_1F0fM7U/TgtZGJt2oII/AAAAAAAJKTg/te1m0BOVycg/s1920-w1920-h1080-c/3189889363_6357f5f645_o.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC01070+Mosaic.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-nCN9lgyjKd0/UpBNC_yRLBI/AAAAAAAAD_s/xH5Pb5wEGH4/s1920-w1920-h1080-c/DSC01070%2BMosaic.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_1182.CR2.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-2y17u99oVV8/TwyPAbOBPqI/AAAAAAAAF9w/EQOhIwGaHiA/s1920-w1920-h1080-c/IMG_1182.CR2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/The+Grassy+Roof.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-Y_Bp6GUWfSE/U0Maxnb6OyI/AAAAAAAJA4U/a05iPi39_7c/s1920-w1920-h1080-c/The%2BGrassy%2BRoof.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Seal+Rocks-Edit.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-rQdS7R8LdHM/T1Jy2z5kZcI/AAAAAAABFZY/Cqb-Q9aWw2Q/s1920-w1920-h1080-c/Seal%2BRocks-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/MountainSplendor.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-f6OToCJWRrg/UUsOySkJXoI/AAAAAAAATgk/DWwubrzxFPY/s1920-w1920-h1080-c/MountainSplendor.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_4460.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-GQv4Q_NZKH8/UDZ1v6AEcSI/AAAAAAAA6ik/i90ZeH2jexc/s1920-w1920-h1080-c/IMG_4460.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/untitled+(101+of+207).png"],"fullscreen-image":["https://lh4.googleusercontent.com/-tw3AkYSVojM/U0MlwltSINI/AAAAAAAJBMA/7_5x_BUOOww/s1920-w1920-h1080-c/untitled%2B%2528101%2Bof%2B207%2529.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_6674-Edit-Edit.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-X3k5JeDbKW4/UZtfuMrJ49I/AAAAAAAAVpI/Qy3yA3weGXM/s1920-w1920-h1080-c/DSC_6674-Edit-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/5-07-13-hodgeman-ks-lightning-supercell.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-NE7B7ZtjC9M/UknSexY2-_I/AAAAAAAAN6g/od62b4KTS9U/s1920-w1920-h1080-c/5-07-13-hodgeman-ks-lightning-supercell.png"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Thamserku.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-gvCvkN6ll9Y/UtRUq4mYc8I/AAAAAAAAGpo/RecztlhW01k/s1920-w1920-h1080-c/Thamserku.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/ohau-cliff-hawaii-trey-ratcliff.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-lKPOvxP_3hQ/U0MjW1IS8QI/AAAAAAAJBP4/qTn4pFXZq_8/s1920-w1920-h1080-c/ohau-cliff-hawaii-trey-ratcliff.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/7439storm2.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-PBAhFhrSEPM/Ugj3wyodrvI/AAAAAAAAIOs/Fo7lNmwWNu0/s1920-w1920-h1080-c/7439storm2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/bondi_sml.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-OuaQJ-ktrms/TmH7HMco5NI/AAAAAAAADYk/CvmoywXR_ck/s1920-w1920-h1080-c/bondi_sml.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Trey+Ratcliff+-+China+2011+-+A+Great+Wall+at+Sunset.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-Bm8YwGRxgzI/U0MfR72bkDI/AAAAAAAJKHE/TKs1mWF8US4/s1920-w1920-h1080-c/Trey%2BRatcliff%2B-%2BChina%2B2011%2B-%2BA%2BGreat%2BWall%2Bat%2BSunset.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/TwilightRocks_SanMateoCoast-2.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-WiGnP1yACq0/T2-Ib08jHdI/AAAAAAABFaw/uRs4YlY_qss/s1920-w1920-h1080-c/TwilightRocks_SanMateoCoast-2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/The+Farm+of+Eden.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-To5JBx7eAO4/U0MaTRPOM4I/AAAAAAAJEWM/8Bgvm9uL6Do/s1920-w1920-h1080-c/The%2BFarm%2Bof%2BEden.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/8031438226_5713c1a86c_o.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-VeCrM9fKDYw/UkPR39wFICI/AAAAAAAALrQ/1VmRr7zq_N4/s1920-w1920-h1080-c/8031438226_5713c1a86c_o.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/061012-1078-PelicanCove.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-Hn2QgYPEDxo/Tg1bUgAlTfI/AAAAAAAAAI0/R33ZpN3IaJ8/s1920-w1920-h1080-c/061012-1078-PelicanCove.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC03916+Green+Leaf+Texture.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-Lpppujp4Qb4/UpBTNYFdx7I/AAAAAAAAD_4/SCgq46wEvcU/s1920-w1920-h1080-c/DSC03916%2BGreen%2BLeaf%2BTexture.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/The+Fickle+Mistress.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-Z9mJn5vva2U/T6sVZGdrvgI/AAAAAAAAdAo/rdpy_ia2NS8/s1920-w1920-h1080-c/The%2BFickle%2BMistress.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/090227-0384-McCluresPoint.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-K7DKKrLhMec/Tg1eUKdLbXI/AAAAAAAAAM4/BaH6ytbEX4U/s1920-w1920-h1080-c/090227-0384-McCluresPoint.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/080816-4952-WaianSands.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-tCgHZWwSulc/Tg1dtfmRPHI/AAAAAAAAAMI/ol6-WLOo7WU/s1920-w1920-h1080-c/080816-4952-WaianSands.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_0684.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-xOVjmeJjM3o/TqtYP_buAoI/AAAAAAAAFlA/xUHqJSkr-MU/s1920-w1920-h1080-c/IMG_0684.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/071229-4276-LaJollaFalls.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-e6TcvHbkNxo/Tg1dYGAJKTI/AAAAAAAAALw/_t-M3-wmbeg/s1920-w1920-h1080-c/071229-4276-LaJollaFalls.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/090911-2088-AngelIslandSky2.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-n76GULHmI8U/Tg1fNmGyDbI/AAAAAAAAAOA/pNieTMoo0ro/s1920-w1920-h1080-c/090911-2088-AngelIslandSky2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/1134103121_gateway+to+the+temple+of+heaven.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-08NVs0omPPw/TgtZEFlihuI/AAAAAAAJBBo/KKdqrpOP5Z0/s1920-w1920-h1080-c/1134103121_gateway%2Bto%2Bthe%2Btemple%2Bof%2Bheaven.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DolphinWalk.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-WHdVljxASJk/UOue-BcvLNI/AAAAAAAAwoo/ENRQQBJtKsA/s1920-w1920-h1080-c/DolphinWalk.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Red+paint+on+rock!.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-1OMPOm50As0/Ua2didd-IjI/AAAAAAAAfX4/afXkw0vQ4Nc/s1280-w1280-c-h720-k-no/Red%2Bpaint%2Bon%2Brock%2521"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/5-20-11-sunset-clouds365-kdelay.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-sVsjQwFKpM0/UFN9mKAiexI/AAAAAAAASuM/qpOQevOJY8k/s1920-w1920-h1080-c/5-20-11-sunset-clouds365-kdelay.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/maui-13.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-A5xnIm26hoM/UQ6xWBcP60I/AAAAAAAAFZI/xCilpfxW-3Y/s1920-w1920-h1080-c/maui-13.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Sloat-SunsetBeachFoam.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-2oWY5eMxbnY/TwJ1W3DnAII/AAAAAAABFbs/V9UTfZKkOnM/s1920-w1920-h1080-c/Sloat-SunsetBeachFoam.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_6436.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-Hjg_1FAJV7k/T8miVTXavMI/AAAAAAAAIgo/Ksveh_v5Pws/s1920-w1920-h1080-c/DSC_6436.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/090501-0963-CycloneOfLt.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-duWLWrx3RtU/Tg1erB-vvtI/AAAAAAAAANU/3iD8-ATfJsw/s1920-w1920-h1080-c/090501-0963-CycloneOfLt.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/1189866210_spanish+sunset.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-zAb56uSfuX0/TgtZEG6yqnI/AAAAAAAJBDQ/5prXR1sSzyU/s1920-w1920-h1080-c/1189866210_spanish%2Bsunset.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_5433.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-dN576MDlyEM/TiRJgIjUtZI/AAAAAAAD6lY/sbNK1sQOiow/s1920-w1920-h1080-c/IMG_5433.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/388A4957.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-7EJI2_bMWrg/U0_6WXfnu0I/AAAAAAAA2IA/qnv2qDY374E/s1920-w1920-h1080-c/388A4957.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Olmsted-Sunset-1.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-_X4BN2gmOh4/TqTdEJ8Q95I/AAAAAAAAEx4/4HIX-pD4OuI/s1920-w1920-h1080-c/Olmsted-Sunset-1.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/new-england-4.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-z9s9Br2P5fo/UKZedhD_eYI/AAAAAAAACfk/2-qRWoFQDcs/s1920-w1920-h1080-c/new-england-4.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/20101103_TorresDelPaine_Cuernos_Horns_6215_blended-Edit-Edit-Edit.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-9VBXTbvWld0/U_yjmbN6zVI/AAAAAAAB-3c/rSgR3kL3uTQ/s1920-w1920-h1080-c/20101103_TorresDelPaine_Cuernos_Horns_6215_blended-Edit-Edit-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/bodie-11.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-NFuPWEa3vrE/UFs2mhJrWQI/AAAAAAAAST4/QAg74w1fZpI/s1920-w1920-h1080-c/bodie-11.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMGP8003.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-xjlOWCsBOHg/UL2Bg7-fWJI/AAAAAAAAEQM/_Af3LToQDmg/s1920-w1920-h1080-c/IMGP8003.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/20110710-160024.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-GN97YhnT3Qo/Tj1SVC1wv-I/AAAAAAAADi0/upwFGIqVhPQ/s1920-w1920-h1080-c/20110710-160024.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/River+and+Mount.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-mdbG7ZFFzKQ/U0MX5tKa1vI/AAAAAAAJCBM/XGhf_-p25Ys/s1920-w1920-h1080-c/River%2Band%2BMount.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/060607-0405-PillarsPast.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-USkNl2UVpk8/Tg1a6ynrEKI/AAAAAAAAc0c/fcUJz1E5SKw/s1920-w1920-h1080-c/060607-0405-PillarsPast.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/8949932059_416d4806ab_o.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-rU4h5IKilhs/UbC8PJyZCII/AAAAAAAABBo/tPQZAwV8nxA/s1920-w1920-h1080-c/8949932059_416d4806ab_o.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/untitled-5.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-iXtTEIicPCE/Thz5P1Y-mFI/AAAAAAACqmA/QwzDzmHWk94/s1920-w1920-h1080-c/untitled-5.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/20140105-untitled+shoot-2908_HDR_HDR.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-kM5nzgAtWSI/Us2ewqEBtFI/AAAAAAAABiM/iwvLzC2OMEk/s1920-w1920-h1080-c/20140105-untitled%2Bshoot-2908_HDR_HDR.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/100731-4524-HapunaLight1.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-EF8NaWPwjTM/Tg1gLGBR_9I/AAAAAAAAAPE/3DlU_Kv1HHQ/s1920-w1920-h1080-c/100731-4524-HapunaLight1.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/TetonSnakeOverlook.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-RCFt3utBaXk/UE5kxyUxo6I/AAAAAAAAJWQ/jtgzKjcGfuU/s1920-w1920-h1080-c/TetonSnakeOverlook.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/20120212-IMG_4250.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-5FV5VQzT0WQ/Tzy0dNznpGI/AAAAAAAAEwc/5uIfwjNBMhc/s1920-w1920-h1080-c/20120212-IMG_4250.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/100312-3521-MonolithicLight1.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-KKZmrbmQdYM/Tg1fx0f9EaI/AAAAAAAAAOs/zg07LmkK2eg/s1920-w1920-h1080-c/100312-3521-MonolithicLight1.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/8156803630_fcb67dbe98_k.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-p3T0Z0zLK5E/UJhoD6_Ac1I/AAAAAAAAgMQ/fqQxNGKpL-c/s1920-w1920-h1080-c/8156803630_fcb67dbe98_k.jpeg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/4088949046_5d094cb2e2_o.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-yX9BOjrswig/TgtZEPKtS_I/AAAAAAAJEmo/jrnHGoDlpHw/s1920-w1920-h1080-c/4088949046_5d094cb2e2_o.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_8621-2-Edit.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-4eLicoBRkAQ/Uc7OMQqqKMI/AAAAAAAAXbw/eMQHZ3fhXGA/s1920-w1920-h1080-c/DSC_8621-2-Edit.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/1171692863_the+eiffel+from+beneath.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-PQQBBUfBmNs/TgtZENaPpRI/AAAAAAAJA1Y/mfOoa5PJw4g/s1920-w1920-h1080-c/1171692863_the%2Beiffel%2Bfrom%2Bbeneath.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/A+Sunset+on+a+Texas+Farm.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-9-6Sd41GxEQ/U0MR8Gvqf4I/AAAAAAAJRB0/9fYITnA4fQk/s1920-w1920-h1080-c/A%2BSunset%2Bon%2Ba%2BTexas%2BFarm.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/300928932_3bf6d408df_o.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-DfDrf9tZth0/TgtZGBjmXqI/AAAAAAAJA_A/e6jq_VQrXaY/s1920-w1920-h1080-c/300928932_3bf6d408df_o.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/ReflectingMoonlight.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-B7gaJXyGoIs/UHOmYB8GzPI/AAAAAAAAwHA/MGpwJlaw7Yw/s1920-w1920-h1080-c/Reflecting%25252520Moonlight.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/The+Solar+Flower.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-zuD-bqjkRMs/U0MdYYTiWJI/AAAAAAAJJLE/xEEn0-D32-Q/s1920-w1920-h1080-c/The%2BSolar%2BFlower.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/061119-1290-HaenaSurf.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-DtOOMCEQEzs/Tg1baI_IkFI/AAAAAAAAc0g/4HYnmK0I21k/s1920-w1920-h1080-c/061119-1290-HaenaSurf.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/3425202839_7a6b829432_o.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-Mo0DARoQ5pg/TgtZGObV66I/AAAAAAAJA4A/x3NBiBZ1T08/s1920-w1920-h1080-c/3425202839_7a6b829432_o.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/388A3302.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-EGI_DF6_jjM/U0_6WeYaAcI/AAAAAAAA2IA/onrkX5wYXC0/s1920-w1920-h1080-c/388A3302.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_2388+e.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-uWYftkrNY7Y/U08nbhRFXEI/AAAAAAAAvt8/Jvqvy9ZX7Rw/s1920-w1920-h1080-c/IMG_2388%2Be.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/060506-0094-Farscape.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-mB0CsB02334/Tg1a0rca9TI/AAAAAAAAc0M/poMn2aae0XU/s1920-w1920-h1080-c/060506-0094-Farscape.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/090102-0143-SeaAndStorm.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-rqPXOCN3Sf4/Tg1eJr7jzJI/AAAAAAAAAMs/neSQj8_NJbQ/s1920-w1920-h1080-c/090102-0143-SeaAndStorm.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/GGB-Wave_mono-square.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-_9KsThqIDII/TsKQNHpnMcI/AAAAAAABFcM/myl4tBgFSMs/s1920-w1920-h1080-c/GGB-Wave_mono-square.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_2817.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-KTagpsQRiZw/Tk84FHT3wvI/AAAAAAABMJE/lGUSRehuqK0/s1920-w1920-h1080-c/DSC_2817.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/A+Morning+at+the+Secret+Lak2e.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-r9JZ23uiJdw/U0MRzWVvfDI/AAAAAAAJA5Q/4xCghAQGdp8/s1920-w1920-h1080-c/A%2BMorning%2Bat%2Bthe%2BSecret%2BLak2e.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/C21T0817.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-s8Arhr77hCs/UqTF_xWLYVI/AAAAAAAAXK8/uRcPFpV7CPM/s1920-w1920-h1080-c/C21T0817.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/091009-2169-LibOfAges3.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-VeOuV8_xtzQ/Tg1fcY4BfBI/AAAAAAAAAOQ/y0D10NZbTOw/s1920-w1920-h1080-c/091009-2169-LibOfAges3.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/SFBay-Sunrise-Hank-n-Pilings-2.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-NZ_Ll43savw/TzCKeTsXQHI/AAAAAAAASAc/n4AJeYm6ehA/s1920-w1920-h1080-c/SFBay-Sunrise-Hank-n-Pilings-2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Adventure+in+Argentina-7283-March+31,+2009-2.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-q7WJKw9Oqog/U0MSH9OpjdI/AAAAAAAJGxU/FDOzRfCcMro/s1920-w1920-h1080-c/Adventure%2Bin%2BArgentina-7283-March%2B31%252C%2B2009-2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/SunetReflection_16x9-Edit.png"],"fullscreen-image":["https://lh6.googleusercontent.com/--s1xvTZu_8s/TvEFum2qOkI/AAAAAAABFiQ/RVtjU4CacrI/s1920-w1920-h1080-c/SunetReflection_16x9-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_1221.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-id9Mf91TyIg/UQmGXFzYiAI/AAAAAAAAlfo/n2RM1udWSeM/s1920-w1920-h1080-c/IMG_1221.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Trey-Ratcliff-New-Zealand+(362+of+696).png"],"fullscreen-image":["https://lh4.googleusercontent.com/-4-wMlkvbnxI/U0MiMX47iJI/AAAAAAAJJJ8/lstLqeHqMOM/s1920-w1920-h1080-c/Trey-Ratcliff-New-Zealand%2B%2528362%2Bof%2B696%2529.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/The+Rocks+of+Iceland.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-7EENXFBPvH8/U0Mc5Ty31YI/AAAAAAAJBIY/d9kb4PcgsXc/s1920-w1920-h1080-c/The%2BRocks%2Bof%2BIceland.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/2012-Favorites-3.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-_TPUkTQ0foE/UOu3R1Fih9I/AAAAAAAAUwU/n2BcAi9lFAI/s1920-w1920-h1080-c/2012-Favorites-3.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Exclamation-4.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-p2S6pYJG8TY/UkLZ-2heppI/AAAAAAAAdAo/UEwJsuYTGXM/s1920-w1920-h1080-c/Exclamation-4.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC01099+Plant.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-AM_AYNzr-a0/UpBNRCa9JbI/AAAAAAAAD_w/gATI2Qr7EHw/s1920-w1920-h1080-c/DSC01099%2BPlant.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/1-24-13.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-k85UvBDxqso/UbdXjw35hhI/AAAAAAAAFh4/E7cP1B2hXgg/s1920-w1920-h1080-c/1-24-13.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/LowerAntelope1.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-Hy-GW9jdRmM/UOOY4T51IhI/AAAAAAAAKiI/dj3WLyRqMJE/s1920-w1920-h1080-c/LowerAntelope1.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DelicateArch.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-lTCOr1mGi98/T0m262j2RnI/AAAAAAAAGbs/4Ab-Mhv-4_A/s1920-w1920-h1080-c/DelicateArch.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_3091-Edit.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-dzQdFd1d2cg/UpExTYfIJ6I/AAAAAAAAFgo/jW1vrNByXqg/s1920-w1920-h1080-c/DSC_3091-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Lorne+Road.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-SPVIRuebjx0/U0MWpwm-GJI/AAAAAAAJJKQ/b1X__UQq1K8/s1920-w1920-h1080-c/Lorne%2BRoad.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/110429-7971-Faultlines.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-9evAJAwXovk/Tg1aR0viDRI/AAAAAAAAc0I/TecuJZTaV44/s1920-w1920-h1080-c/110429-7971-Faultlines.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Trey+Ratcliff+-+NEX+7-+Sunset+2.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-2Q98cG0kiX8/U0MgMcXhJgI/AAAAAAAJKoU/iqJaKYOi6J0/s1920-w1920-h1080-c/Trey%2BRatcliff%2B-%2BNEX%2B7-%2BSunset%2B2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMGP8556-Edit.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-ree1zkofuLM/UPBTkiEo3pI/AAAAAAAAfWU/t0UKepl53qw/s1920-w1920-h1080-c/IMGP8556-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/The+Most+Beautiful+Road+in+the+World.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-Cp1EGSOiT7o/U0MbuGaep5I/AAAAAAAJIA0/Hi4dBFthsQE/s1920-w1920-h1080-c/The%2BMost%2BBeautiful%2BRoad%2Bin%2Bthe%2BWorld.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Chicago.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-KxjcNjAfrow/U0MTi1JasjI/AAAAAAAJKS4/JcqmHStMKgE/s1920-w1920-h1080-c/Chicago.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/070211-2329-GarrapataSurf1.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-p8gu7w4UaB0/Tg1cD-zJRXI/AAAAAAAAAJw/xKPs4AJ8WTU/s1920-w1920-h1080-c/070211-2329-GarrapataSurf1.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Day+Break+G+.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-KwGZ0753oAA/T_SUbhKUrmI/AAAAAAAAhqg/aN2q0nhUYNA/s1920-w1920-h1080-c/Day%2BBreak%2BG%252B.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/070902-3129-BowlingBall1.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-EIrEuHD0skg/Tg1cUtz3htI/AAAAAAAAc00/ykp5Z4-BtGg/s1920-w1920-h1080-c/070902-3129-BowlingBall1.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Trey+Ratcliff+-+OTW+to+Glen.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-ggjaMcHz6Fw/U0Mgf-CsIDI/AAAAAAAJFdQ/iyuO6PIuUdg/s1920-w1920-h1080-c/Trey%2BRatcliff%2B-%2BOTW%2Bto%2BGlen.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/136.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-DZDQ-Jc4VPA/TSjtGSyY5lI/AAAAAAAAkNQ/r8BTRHGP7qI/s1920-w1920-h1080-c/136.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_1311-Edit-Edit.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-smKqSEXvptA/UpZ3FAZqrSI/AAAAAAAAf5w/iIG6Dg0XSKs/s1920-w1920-h1080-c/DSC_1311-Edit-Edit.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/In+a+Foreign+Land+-+West+Fjords,+Iceland.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-5vOp8Qd9Cr0/UZURZbC6EvI/AAAAAAAAgTY/jZBHwF9W4VU/s1920-w1920-h1080-c/In%2Ba%2BForeign%2BLand%2B-%2BWest%2BFjords%252C%2BIceland.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Hell's+Gate+Bridge-6.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-sZXaqdy-xcA/UKzgVo7pqnI/AAAAAAAAIaA/tvF7kHoKH2I/s1920-w1920-h1080-c/Hell%2527s%2BGate%2BBridge-6.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/End+Game+.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-vYrcLbr_syE/UO0CdVlLb_I/AAAAAAAAgOE/-NoOWCD3-LY/s1920-w1920-h1080-c/End%2BGame%252B.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Trey+Ratcliff+-+China+2011+-+The+Egg+at+Sunset.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-fSZtzjxYoBk/U0MfcOvbsrI/AAAAAAAJBP8/prm689xvgE4/s1920-w1920-h1080-c/Trey%2BRatcliff%2B-%2BChina%2B2011%2B-%2BThe%2BEgg%2Bat%2BSunset.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_8642.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-IFmqkzp2Z74/SlgjPMN0INI/AAAAAAAAJlI/cVrfkqJwBj4/s1920-w1920-h1080-c/IMG_8642.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/388A3234.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-81O00JEe7GY/U0_6WV9qs6I/AAAAAAAA2IA/xSYNSA5zuIo/s1920-w1920-h1080-c/388A3234.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/388A4648-Edit.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-Xb-0VhFJErE/U0_6WZpo_5I/AAAAAAAA2IA/3wWOfPmtuno/s1920-w1920-h1080-c/388A4648-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/MOL_2238-Edit.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-0gRcRJvCyq8/UYWMMwK-xyI/AAAAAAAAgOg/YAmwDINMMW4/s1920-w1920-h1080-c/MOL_2238-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Kona-Hawaii-Stormy-Sky.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-EgToYDexIWA/TugFtw6MbOI/AAAAAAAAJ_E/AFdXppomBHM/s1920-w1920-h1080-c/Kona-Hawaii-Stormy-Sky.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/BakerBeach-SunsetColor.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-AGyN05vOAVg/Trv455hOvXI/AAAAAAABFag/ruA7zfHRDik/s1920-w1920-h1080-c/BakerBeach-SunsetColor.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/red+bridge+in+late+afternoon.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-voPn3r8W5cQ/TgtZEGX9FFI/AAAAAAAJG7g/wotb_OlghAE/s1920-w1920-h1080-c/red%2Bbridge%2Bin%2Blate%2Bafternoon.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/LandsEnd-sunset-2.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-i1rPphMhUYQ/T1l7sJNRR5I/AAAAAAABFaA/ISCx26OdOHM/s1920-w1920-h1080-c/LandsEnd-sunset-2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/20130915-7372-34873c91-2048.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-3d-tkshy_0Y/Um32gHQ1usI/AAAAAAAACGA/O4ZCsNcd1-M/s1920-w1920-h1080-c/20130915-7372-34873c91-2048.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Ocean+Sigh.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-KKLEMMadjkQ/UO8V4We8BYI/AAAAAAAAwHI/245vkVmGU8w/s1920-w1920-h1080-c/Ocean%2BSigh.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/RodeoCove-SmallSunset-2.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-cFtlqrFqSy0/Tpr3ij-CA7I/AAAAAAABC7g/PhNSHOv9-dw/s1920-w1920-h1080-c/RodeoCove-SmallSunset-2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_1556-Edit.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-01ZxJyYSOq4/UtTs57pjoXI/AAAAAAAAOYg/L4SWL7LqweM/s1920-w1920-h1080-c/DSC_1556-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/The+Road+to+Lindis+Pass.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-wBaT-XTU5lw/U0McsiS2QGI/AAAAAAAJG6g/emxVwa5ILwo/s1920-w1920-h1080-c/The%2BRoad%2Bto%2BLindis%2BPass.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Life+in+the+greenhouse-3.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-t4GuDMvJgtk/TPK0WgSeLBI/AAAAAAADI4c/zYc1x7I-S9k/s1920-w1920-h1080-c/Life%2Bin%2Bthe%2Bgreenhouse-3.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/7995122298_d4743a46ce_k.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-dVPjiuCL-og/UNi-6EF0QjI/AAAAAAAAK5E/33w0ipRlzuc/s1920-w1920-h1080-c/7995122298_d4743a46ce_k.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/McWay+Milky+Way.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-4J2fjwHlZpk/UtTyvD-FnJI/AAAAAAAAX1k/TuYoeLc-Ku8/s1920-w1920-h1080-c/McWay%2BMilky%2BWay.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/trey-ratcliff-queenstown-nz-nikon-d800.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-uxsx0IEs6eA/U0MlLb1IerI/AAAAAAAJP20/dPosYR9XVxw/s1920-w1920-h1080-c/trey-ratcliff-queenstown-nz-nikon-d800.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Chef+at+Sunset.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-YB4kZ5ge9Cc/U0MTgZTfmZI/AAAAAAAJQpw/V9nAX7xkgF0/s1920-w1920-h1080-c/Chef%2Bat%2BSunset.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/ConvictLakeSunrise.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-FAIPD0L_XLs/UBctAcHLwcI/AAAAAAAAJAo/fsicVZWEcT8/s1920-w1920-h1080-c/ConvictLakeSunrise.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC01009+(1).png"],"fullscreen-image":["https://lh4.googleusercontent.com/-k1Op3rHp90U/ToFAGEMaH4I/AAAAAAAAraU/f_xZikhzlCY/s1920-w1920-h1080-c/DSC01009%2B%25281%2529.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_0444_5_6-Edit.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-UHWxgek6Ei0/T58Hpp9zkeI/AAAAAAAANzY/M8D4GtsE6cY/s1920-w1920-h1080-c/DSC_0444_5_6-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/090424-0690-CrystCvBreakers.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-9FMwjMIo6MU/Tg1efx1FWSI/AAAAAAAAANE/NuC3xJSPApo/s1920-w1920-h1080-c/090424-0690-CrystCvBreakers.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/The+Sky+Forever.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-rYUyEz24110/U0MddxVVpKI/AAAAAAAJI0g/Yo2Aeee9akk/s1920-w1920-h1080-c/The%2BSky%2BForever.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/20140310_Iceland_1392-Edit.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-bjac3OgFBG8/U_yjp004PtI/AAAAAAAB-4U/jq6sA93FbVI/s1920-w1920-h1080-c/20140310_Iceland_1392-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/3410783929_310572ed16_o.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-1oYAqn8Hi9o/TgtZEE_8tKI/AAAAAAAJJKI/8CbtKab2l0U/s1920-w1920-h1080-c/3410783929_310572ed16_o.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/G+.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-udPQ4zAGUYg/UZURZTfLDhI/AAAAAAAAPSc/ptIJgEKd2LQ/s1920-w1920-h1080-c/G%252B.jpeg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/C21T0861.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-v6_xr8m1Nh4/UqTF_6FhNQI/AAAAAAAATJY/VWbCHgg5quc/s1920-w1920-h1080-c/C21T0861.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/3505475407_d776e4d589_o-1.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-TVzStzhfexU/S_5S8_zMy5I/AAAAAAADFE0/fN7-JZzP46I/s1920-w1920-h1080-c/3505475407_d776e4d589_o-1.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Seattle.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-DteiBArt5UI/U0MYH6zthEI/AAAAAAAJFtY/UU1t1FU6uX4/s1920-w1920-h1080-c/Seattle.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/100409-3657-PinnacleRock3.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-eOzWq5Yn-SY/Tg1f10Dgx4I/AAAAAAAAAOw/PiXj6h2JAio/s1920-w1920-h1080-c/100409-3657-PinnacleRock3.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Trey-Ratcliff-Milford-Sound-100.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-PwjNo1puYPI/U0MiQaw-PxI/AAAAAAAJF3M/gyTiKomggGc/s1920-w1920-h1080-c/Trey-Ratcliff-Milford-Sound-100.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/061125-1635-Maelstrom3.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-5E0jD9xU4kU/Tg1brt6WipI/AAAAAAAAc0s/2YRKYYKsEkM/s1920-w1920-h1080-c/061125-1635-Maelstrom3.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/388A1865_HDR.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-zrMZyIFb_wM/U0_6WbX2k0I/AAAAAAAA2IA/EM_Lt3L7XOg/s1920-w1920-h1080-c/388A1865_HDR.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_2337.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-uxwr24FdX3I/TwZMCaKx4XI/AAAAAAAAQnE/DcLxR0jnfqE/s1920-w1920-h1080-c/IMG_2337.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_1531.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-EIEk1-tv81w/TGD0hHBXZEI/AAAAAAAAav0/MfGEerqGlfk/s1920-w1920-h1080-c/IMG_1531.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/FI4C4577.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-KN7d8PlNOxU/UA7HP8WNpTI/AAAAAAAASLc/esv8pSYjYmQ/s1920-w1920-h1080-c/FI4C4577.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/RaceTrack-tilted.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-TiuUGmgrIJo/T2fhWrPoAtI/AAAAAAAAX-0/KhLFCt5muZ0/s1920-w1920-h1080-c/RaceTrack-tilted.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/tempest+(1)-Edit.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-aN5bGPX4Rig/UW_esdzHpZI/AAAAAAAAUYo/lhx3gIuY2Tc/s1920-w1920-h1080-c/tempest%2B%25281%2529-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/the+lonely+grass+house.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-BqdD6DbXnso/TgtZGH_h6AI/AAAAAAAJA0Q/VNpKkFnn1eg/s1920-w1920-h1080-c/the%2Blonely%2Bgrass%2Bhouse.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/BeanHollow-sunset-surf.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-bhHK29YjgVc/T3CquVOc6hI/AAAAAAABFZI/Z-FfTyBzwLI/s1920-w1920-h1080-c/BeanHollow-sunset-surf.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/20140328_Hawaii_2209-Edit-Edit.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-JOT24t6ZLx4/U_yjrKLK2zI/AAAAAAAB-4o/KC0ZWVXh110/s1920-w1920-h1080-c/20140328_Hawaii_2209-Edit-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/RHeaRy_402.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-a860A9miaZQ/ThtTuOdNWNI/AAAAAAABSE0/tjO54r6kego/s1920-w1920-h1080-c/RHeaRy_402.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/MorningBlue-2.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-w_It3dmq8_Q/Tr26ZtIDRNI/AAAAAAAAGVg/qOM8lD2pCpU/s1920-w1920-h1080-c/MorningBlue-2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/071118-3765-LvrsPtMorn.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-3l1ZJxwb6rI/Tg1czp-9MFI/AAAAAAAAAK0/rdFg0gGfCqg/s1920-w1920-h1080-c/071118-3765-LvrsPtMorn.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/forest+fog+v2.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-f3E6blFBDVk/Tg0tjUx3BJI/AAAAAAAAgMY/f8tnlRGQisU/s1920-w1920-h1080-c/forest%2Bfog%2Bv2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/oil3.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-cQXP45_tLq0/T0m27oIexHI/AAAAAAAAGb8/keNzP_2lN60/s1920-w1920-h1080-c/oil3.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/FoggySunrise-HawkHill-2.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-nwpgAk2m0O8/ToM1yp5NLQI/AAAAAAABC64/ExPWPjc-oLE/s1920-w1920-h1080-c/FoggySunrise-HawkHill-2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/GGB-SlackersRidge-Sunrise-fog-headlights-wide.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-s-CrcrZfoEY/TzlsdNVcPpI/AAAAAAAAS2I/vgewR4SWII0/s1920-w1920-h1080-c/GGB-SlackersRidge-Sunrise-fog-headlights-wide.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/4+horses.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-PFORpB2nRWU/TgtZEBZXStI/AAAAAAAJG78/sg8P1h1FTu4/s1920-w1920-h1080-c/4%2Bhorses.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/1-02-12-part2.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-LuTnYJ-_AcA/UbdXj-v1fMI/AAAAAAAAFhg/emAw_2y06Ak/s1920-w1920-h1080-c/1-02-12-part2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/1071616194_the+farm+of+eden.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-mWoPAMsZ8qM/TgtZECWsZDI/AAAAAAAJGYQ/mGJ5umfc76I/s1920-w1920-h1080-c/1071616194_the%2Bfarm%2Bof%2Beden.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/MWF_2155.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-ll7ATwQQOnE/UkPP_YH9WKI/AAAAAAAALoA/_9E2BHedhG4/s1920-w1920-h1080-c/MWF_2155.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/RHeaRy_465.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-hDuDewqWJhc/ThYuDF3m4II/AAAAAAABSc8/OMs4oB1Xj6U/s1920-w1920-h1080-c/RHeaRy_465.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/101027-4887-TestOfTime.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-lOZvJ3yPdfc/Tg1gbgvj2bI/AAAAAAAAAPc/bgWip6MWRVI/s1920-w1920-h1080-c/101027-4887-TestOfTime.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_1272-Edit-Edit-2-Edit.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-Ov6cnpCqcKo/Ue52zucefaI/AAAAAAAAZuc/Ya8H97MGDxo/s1920-w1920-h1080-c/DSC_1272-Edit-Edit-2-Edit.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/MarshallBeachSunset.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-BjCgH3F-OtM/ToojnEsMoHI/AAAAAAAAFNw/RMun2UfSHvI/s1920-w1920-h1080-c/MarshallBeachSunset.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/by+Chris+Chabot.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-5L66J8m3eOc/US-gTtMRQbI/AAAAAAAAX5c/kyQnx5QiiKw/s1920-w1920-h1080-c/by%2BChris%2BChabot.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Chasing+the+Sunset.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-oeJbNPb-T-M/UZURZeo6N9I/AAAAAAAAPQU/py94YP9ogqg/s1920-w1920-h1080-c/Chasing%2Bthe%2BSunset.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_1428.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-KK0a8yX7hUc/TnemEmslOEI/AAAAAAAAG4I/qj90bfgIkqs/s1920-w1920-h1080-c/IMG_1428.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_6160-Edit-Edit-Edit.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-Fz5s5Sq3uSc/UqXO06_DNPI/AAAAAAAAhPw/UNBDEnOdEhs/s1920-w1920-h1080-c/DSC_6160-Edit-Edit-Edit.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/20130805_mit_and_river_00001-2.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-GGY-AaDQgJc/UgG4BcMHLWI/AAAAAAAAVgA/pUfLz3uxV-w/s1920-w1920-h1080-c/20130805_mit_and_river_00001-2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/tree+in+the+park.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-OIKJTN2YWhU/TgtZGPb42zI/AAAAAAAJA5c/IY3N83zJARw/s1920-w1920-h1080-c/tree%2Bin%2Bthe%2Bpark.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/_MG_1449.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-qLopnv-fFT0/TxYB5_vxoEI/AAAAAAABFlo/0zpzDJeTYYk/s1920-w1920-h1080-c/_MG_1449.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/3K9C4807.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-4x17JQmbu1s/Ur0CrKBRTzI/AAAAAAAAGH4/t-G8zEmm1jU/s1920-w1920-h1080-c/3K9C4807.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMGP4090-Edit.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-Hhp_SMvb6a0/UOSjNI1cZnI/AAAAAAAAGjU/0XLFokAU-bw/s1920-w1920-h1080-c/IMGP4090-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_8703.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-ZVK5-96bzpA/UtTypXkQUHI/AAAAAAAARwI/_iTqNhaMZ6c/s1920-w1920-h1080-c/DSC_8703.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/trey-ratcliff-milford11.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-ISfFDxxtu-s/U0MkxpnU1rI/AAAAAAAJBQQ/gmuXSo3KcFQ/s1920-w1920-h1080-c/trey-ratcliff-milford11.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/by+Joel++Tjintjelaar.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-sVAg7ixe6zM/US-gUOy49yI/AAAAAAAAXrM/6iXuvw5XdBw/s1920-w1920-h1080-c/by%2BJoel%2B%2BTjintjelaar.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_3857-Edit-Edit.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-V4KqnGwqPtA/Ur0CJf-GmTI/AAAAAAAAGBA/LO0uFjb-Erc/s1920-w1920-h1080-c/IMG_3857-Edit-Edit-2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_1311.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-9n3C3hJmGGc/UQmHUE2y6RI/AAAAAAAAlfs/6JKtNnI29Uk/s1920-w1920-h1080-c/IMG_1311.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_6743-Edit-Edit-Edit-Edit.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-NZsqwlPxJ08/Ulff-DU9xQI/AAAAAAAAdbg/pJkMnw8uLCk/s1920-w1920-h1080-c/DSC_6743-Edit-Edit-Edit-Edit.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/GGB_DarkMorningWindyFog.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-qiK0GrZEcpQ/TtZtCl10xrI/AAAAAAAAHow/WGJu8GP6dmA/s1920-w1920-h1080-c/GGB_DarkMorningWindyFog.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Trey-ratcliff-toronto-Recovered.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-HiLp9PsqEEg/U0MiTxSu0yI/AAAAAAAJP3w/ZWMfpXVaQVI/s1920-w1920-h1080-c/Trey-ratcliff-toronto-Recovered.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/070319-2657-PathToLight.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-VGh9JQ9DCzM/Tg1cKU7qBRI/AAAAAAAAAJ4/Dyi6MrlgffU/s1920-w1920-h1080-c/070319-2657-PathToLight.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/MWF_6244-7.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-UBxJsB_kCVU/UettpK1i2BI/AAAAAAAAK3s/siEVsMTSHIg/s1920-w1920-h1080-c/MWF_6244-7.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/388A3363.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-Fje9gDslRI0/U0_6WU_6rMI/AAAAAAAA2IA/m4PXkm_hAvI/s1920-w1920-h1080-c/388A3363.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_8520.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-sTiWMAC13YQ/UTmo6ED7v9I/AAAAAAAAWsQ/PfI4WYswhJw/s1920-w1920-h1080-c/DSC_8520.png"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/700_1870.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-YOIwgQ1uXcM/SRGZJ-A3yvI/AAAAAAAADMI/6qvORkHqWS4/s1920-w1920-h1080-c/700_1870.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/The+Dream+Catcher+-+Palouse,WA.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-skB9ljKV58M/UXp3kiaG3DI/AAAAAAAAgRM/hZ3rTbu1XwU/s1920-w1920-h1080-c/The%2BDream%2BCatcher%2B-%2BPalouse%252CWA.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Farewell+India.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-H8NDmFzpF_A/TgtZEOagTaI/AAAAAAAIPp0/eTfdvWDBvt4/s1920-w1920-h1080-c/Farewell%2BIndia.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/SonomaCoast-Arch-surf-longexp.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-x0qCPDjYL9w/T2Z8tuYaHII/AAAAAAABFXc/empnlAhR_eY/s1920-w1920-h1080-c/SonomaCoast-Arch-surf-longexp.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/2398605326_bf7dde0cf7_o.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-bXrGY2Cafa0/TgtZGEzbZDI/AAAAAAAJA5g/JWbeuWkbTLc/s1920-w1920-h1080-c/2398605326_bf7dde0cf7_o.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/A+View+from+the+Ranch+in+Argentina.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-txUs9Q95dM8/U0MR9lvvDNI/AAAAAAAJIA8/vY9TD4TiPzw/s1920-w1920-h1080-c/A%2BView%2Bfrom%2Bthe%2BRanch%2Bin%2BArgentina.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/inverness-to-istanbul-00077.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-5uz5EzVcvNU/UEpN7gJg2nI/AAAAAAAAI7s/-Xwxg57SCn0/s1920-w1920-h1080-c/inverness-to-istanbul-00077.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/SanGregorioCliffReflection.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-465XgZS4LQo/UOuDAiDRcrI/AAAAAAAAKng/4m7maZotsgg/s1920-w1920-h1080-c/SanGregorioCliffReflection.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/santa-cruz-trey-ratcliff.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-U0yjKIXF2fs/U0MjfTbjf1I/AAAAAAAJEbY/MkqCoe1DfG4/s1920-w1920-h1080-c/santa-cruz-trey-ratcliff.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/061122-1421-LtAtEndOfPier.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-7Zi62qJ-NNg/Tg1bfusNzfI/AAAAAAAAAJA/P4bDaf-68Ys/s1920-w1920-h1080-c/061122-1421-LtAtEndOfPier.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/_SUE4322.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-vA0vdrM3_ro/UnDyzCqXFaI/AAAAAAAAGxw/GAtvLCwZbAM/s1920-w1920-h1080-c/_SUE4322.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/The+Bamboo+Forest.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-bkNEhcz00Z8/U0MZQ3MdO3I/AAAAAAAJGy4/S-coTfmsQfE/s1920-w1920-h1080-c/The%2BBamboo%2BForest.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC02146+Red+Plant.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-tyOlTzJRvmw/UpBQXuuK_JI/AAAAAAAAD_0/PL7enPiYUT8/s1920-w1920-h1080-c/DSC02146%2BRed%2BPlant.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/01_MG_3677.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-YHEf8jl_LDg/Tgxgtdub2iI/AAAAAAAAAMQ/zmkWf0WkFTI/s1920-w1920-h1080-c/01_MG_3677.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/RedTide.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-feW_gVKW6j8/UI5fg6xQBXI/AAAAAAAAWQY/DIOuGTieAMM/s1920-w1920-h1080-c/RedTide.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/091220-2536-TheCurl.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-lR3vG062kEk/Tg1fjlh053I/AAAAAAAAAOc/Sv1zKPXPkPQ/s1920-w1920-h1080-c/091220-2536-TheCurl.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/trey-ratcliff-close-to-tepako-new-zealand.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-Q1AA5A9uiYU/U0MkdTp90YI/AAAAAAAJJIw/SuamKxYgwts/s1920-w1920-h1080-c/trey-ratcliff-close-to-tepako-new-zealand.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_6837_CropBrightContrast.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-Hqmu2H_l2XY/SwIysuFOIiI/AAAAAAABLWk/W9rX5qlmk4c/s1920-w1920-h1080-c/DSC_6837_CropBrightContrast.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/061121-1389-UndPierHanalei.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-VZ8vGJ6Qfvc/Tg1bgCMJ1HI/AAAAAAAAAJE/QMa5LYy7phM/s1920-w1920-h1080-c/061121-1389-UndPierHanalei.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/20100924-IMG_5794-HDR-Edit.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-eCSjsP08EcA/T_0K5wVePeI/AAAAAAAARxk/I-Qx3ciOzUE/s1920-w1920-h1080-c/20100924-IMG_5794-HDR-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Farewell+San+Francisco.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-N7h4Iit041g/U0MUZ6H8WdI/AAAAAAAJKok/V-IfPQ_XXK4/s1920-w1920-h1080-c/Farewell%2BSan%2BFrancisco.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/stream.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-GCr_cZIif7g/Tnarp7XhOMI/AAAAAAAABPU/WNrHyAJOLNA/s1920-w1920-h1080-c/stream.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/071110-3579-HvnsGate.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-0DC0pkVJw5g/Tg1cjeX4YpI/AAAAAAAAAKc/bNEDQtv0J4A/s1920-w1920-h1080-c/071110-3579-HvnsGate.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/100726-4239-LightAtAhalanui.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-m-0LmCqZxSo/Tg1gLoaJJKI/AAAAAAAAAPI/KNkzyqLgUa0/s1920-w1920-h1080-c/100726-4239-LightAtAhalanui.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/RHeaRy_380.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-4026KDnYCqc/ThYb2MMKRLI/AAAAAAABSEs/3N3nOtyl_lI/s1920-w1920-h1080-c/RHeaRy_380.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/CrissyField-SaltMarsh-2.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-OwU2batkg6A/TrbvnMATI7I/AAAAAAAAF3w/q_7_jgF0ngE/s1920-w1920-h1080-c/CrissyField-SaltMarsh-2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/tekapo-new-zealand-trey-ratcliff-2.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-mGgW1ovI2PE/U0Mjzq2YJuI/AAAAAAAJA0o/aLuxOVgUjlY/s1920-w1920-h1080-c/tekapo-new-zealand-trey-ratcliff-2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/p1000284.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-patMHu2oyfs/RJBWFz5TABI/AAAAAAACnSo/ZP9KYfCSFM8/s1920-w1920-h1080-c/p1000284.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_2617.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-_p1iKjPzjGc/TIW63f_px1I/AAAAAAAAOck/NCDLhcVRam8/s1920-w1920-h1080-c/IMG_2617.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/8280686512_7820f388dc_k.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-NeMzsWIU6RU/UZURZR7U_aI/AAAAAAAAgSY/-AtSrt0ig5Q/s1920-w1920-h1080-c/8280686512_7820f388dc_k.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC02700.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-9Nj6ilPU0NI/Ts9Gk0pfW_I/AAAAAAAAD4I/GWbtz0c91tE/s1920-w1920-h1080-c/DSC02700.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/388A6457.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-jTQjx2iGz84/U0_6WWCDwxI/AAAAAAAA2IA/FmHhYqwC0Y8/s1920-w1920-h1080-c/388A6457.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/TufaSunset-1-2.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-uk4W-F3OXbM/Tqwm9e_vuJI/AAAAAAABFcE/zPYFePKqTxs/s1920-w1920-h1080-c/TufaSunset-1-2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/P1142336.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-7ZuJOGpJ5-0/UHRHfwcGEUI/AAAAAAAAKsU/s31OrXjVZ9A/s1920-w1920-h1080-c/P1142336.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Glacier+Point+Milky+Way+Panorama.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-YxXTf0j_MTQ/UtTwF4t9yEI/AAAAAAAAW8g/dYsGmWzs81Y/s1920-w1920-h1080-c/Glacier%2BPoint%2BMilky%2BWay%2BPanorama.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/_DX_6908_09_10_11_32bit-Edit.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-gBb9HtLb3zw/U_yjyTFvcAI/AAAAAAAB-64/G_Jt5mnm-mU/s1920-w1920-h1080-c/_DX_6908_09_10_11_32bit-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/inverness-to-istanbul-00177.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-yCO0vebn5x0/UFBrOZtDNZI/AAAAAAAAJO8/jX4MgPfHQbE/s1920-w1920-h1080-c/inverness-to-istanbul-00177.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_0554.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-59MYsAxhB_I/UtTzqg1a7VI/AAAAAAAAWds/BLWELYZHUWE/s1920-w1920-h1080-c/DSC_0554.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Blue.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-p4V1WVO8Dhw/UBSl6P5W35I/AAAAAAAAPdg/UFIS4M1KDBE/s1920-w1920-h1080-c/Blue.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/BayBridge-night-mono.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-5IpprOs0T78/T3PwhE-VJ9I/AAAAAAAAYzA/-2X-oY9C3N0/s1920-w1920-h1080-c/BayBridge-night-mono.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_9645-Edit-Edit-Edit.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-utp4ouvAO10/Ud6okYh24yI/AAAAAAAAYrg/fRr-tnaqxBI/s1920-w1920-h1080-c/DSC_9645-Edit-Edit-Edit.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/_X7A8818-Edit.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-bCmJvz5jD9s/U_yj0wk6KLI/AAAAAAAB-7s/t7dIu3T7nvw/s1920-w1920-h1080-c/_X7A8818-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/FI4C6008.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-Pg1HXtyXBZ0/UGHWhKaSrhI/AAAAAAAASZE/q3omNbvxCJU/s1920-w1920-h1080-c/FI4C6008.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/10-13-12highres.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-boXHwu7eW_g/UjjGBMhSzwI/AAAAAAAANJE/9w555NqrJws/s1920-w1920-h1080-c/10-13-12highres.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/P1080441.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-gKcKe_o5slw/RapYX1Oyx0I/AAAAAAAAa9Q/P9rYqEPs7dc/s1920-w1920-h1080-c/P1080441.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Seal_Rocks-centered.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-PtAU0On5OII/Tr8FOZ3yVuI/AAAAAAAAGY4/IYyAYzHZzo0/s1920-w1920-h1080-c/Seal_Rocks-centered.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_3144-3.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-129Q91osfKU/UKsTjV0_Q0I/AAAAAAACKD0/ejMXCx6_w14/s1920-w1920-h1080-c/IMG_3144-3.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/_X7A5208-Edit.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-7wj7ipdaCbI/U_yj0qysNgI/AAAAAAAB-7k/dl8d2M4N5vE/s1920-w1920-h1080-c/_X7A5208-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Red+by+Alistair+Nicol.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-vK7sTdwps8g/UKPHFTynz-I/AAAAAAAARas/_RETAXGVU9g/s1920-w1920-h1080-c/Red%2Bby%2BAlistair%2BNicol.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Silver+Lake+StarTrails.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-rQ9SZ0dfJ_I/UtTzyqBufcI/AAAAAAAAOj4/zAOnrvu9aG8/s1920-w1920-h1080-c/Silver%2BLake%2BStarTrails.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMGP7962.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-fOXNAoVsl2E/UONnO-Zp2zI/AAAAAAAAyPo/kjEzrMZXylk/s1920-w1920-h1080-c/IMGP7962.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/untitled-19.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-q2yAJwhwIic/Th0QR-JaxiI/AAAAAAAABCo/YIGFyyYRXBI/s1920-w1920-h1080-c/untitled-19.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/080229-4653-GraytonStream.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-cjUv9eE6oRE/Tg1dXWtEjRI/AAAAAAAAc1E/ScCXWwu6HbM/s1920-w1920-h1080-c/080229-4653-GraytonStream.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_6902-Edit-Edit.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-x838dk0Z5UE/UaXxyeQ21gI/AAAAAAAAm-o/7OSZeQrHSO0/s1920-w1920-h1080-c/DSC_6902-Edit-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Lupines.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-oWXc6hihoxM/UAQ2flp_ioI/AAAAAAAAgLE/wL2UgiGSdRk/s1920-w1920-h1080-c/Lupines.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/BayBridgeSunrise-LE.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-k1-SvxtkRaI/TzW2PE5LU_I/AAAAAAAA14A/JuGDMoDvbCQ/s1920-w1920-h1080-c/BayBridgeSunrise-LE.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Iceland.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-fJVeA8ZcZSU/UAbPQdXxfbI/AAAAAAAAgLI/tIVVrrPINVs/s1920-w1920-h1080-c/Iceland.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/the+trane+and+the+pharoah.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-B4s7SDef3U8/TwttGH3PVKI/AAAAAAAAR8k/Gp5uWnBs4JE/s1920-w1920-h1080-c/the%2Btrane%2Band%2Bthe%2Bpharoah.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_6930-Edit-Edit.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-F44_mY6bA2c/UaiW3nWnsrI/AAAAAAAAWKk/pVPuQcy_ygQ/s1920-w1920-h1080-c/DSC_6930-Edit-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Funston-Sunset.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-hs9pldJQseQ/Tw9Z3Mea0PI/AAAAAAABFTs/u8KBBQQ9At4/s1920-w1920-h1080-c/Funston-Sunset.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMGP0913.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-ouB3hbNdnVY/Tzlw8hO_W7I/AAAAAAAAAVQ/GNAVkaDa0lw/s1920-w1920-h1080-c/IMGP0913.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMGP5017.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-YiCUO9G6Vfg/ULgv8pQPeGI/AAAAAAAAD-k/NGhYvPuu5bc/s1920-w1920-h1080-c/IMGP5017.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/061228-2049-UTPScripps1.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-JkxqJu_ZG6I/Tg1b6ZErN-I/AAAAAAAAAJk/sD_vHpTz-hU/s1920-w1920-h1080-c/061228-2049-UTPScripps1.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/071010-3287-SausMorn1.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-o11hGOKretw/Tg1cW-5ZUOI/AAAAAAAAAKQ/bz8-ylAE0_A/s1920-w1920-h1080-c/071010-3287-SausMorn1.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Trey+Ratcliff+-+New+York+-+Inception.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-uw6YFcXJKbo/U0MgUuctfgI/AAAAAAAJEXg/rLxRH7N4ths/s1920-w1920-h1080-c/Trey%2BRatcliff%2B-%2BNew%2BYork%2B-%2BInception.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/LandsEnd-Sunset.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-lEy_31bnK1A/TyYVYFaoUxI/AAAAAAAAPxc/_4v9O3EKy6c/s1920-w1920-h1080-c/LandsEnd-Sunset.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/The+Spires-2.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-MjADvnIjxV0/U0MdmA5ytOI/AAAAAAAJKn4/0ZUjaXODMKA/s1920-w1920-h1080-c/The%2BSpires-2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/32+Hours++Counting.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-xbmT1vIDvZc/UZURZTZzmhI/AAAAAAAAgSo/f1msNjQ2YSw/s1920-w1920-h1080-c/32%2BHours%2B%2526%2BCounting.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_2018-Edit-Edit.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-IPbUv2dc9E4/Ugotamqb0xI/AAAAAAAAbME/zTVKgdkCdRY/s1920-w1920-h1080-c/DSC_2018-Edit-Edit.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/MSU_9976.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-tFk1NsophJc/UqWc4p6NF9I/AAAAAAAAHws/4zvvKSi-qRk/s1920-w1920-h1080-c/MSU_9976.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Reef-mono.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-5-bmm_yEw8Q/ToaN8JLAR1I/AAAAAAABC7I/eMpXTtyj67Y/s1920-w1920-h1080-c/Reef-mono.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Dreams.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-wWAxuHAMqWo/UZURZU59sUI/AAAAAAAAPOY/bxIdsdlg4DE/s1920-w1920-h1080-c/Dreams.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_2705.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-D-a8TeEMxVU/T0u5OcN_KcI/AAAAAAAAQ3A/buaoFgy2i-Y/s1920-w1920-h1080-c/IMG_2705.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/SutroSunset-WaterfallRock.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-F3PyWBuTa9A/Txo6n6KVzRI/AAAAAAABFQ4/bhv0lJobcUE/s1920-w1920-h1080-c/SutroSunset-WaterfallRock.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/060820-0818-ThePhotogs.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-m6gJXedR5K0/Tg1bJIJrdDI/AAAAAAAAAIk/luzGf-NHcC0/s1920-w1920-h1080-c/060820-0818-ThePhotogs.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Portofino2.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-F33Ezsq01cw/TgkRlUvin5I/AAAAAAAI6wA/g434OYIBJiA/s1920-w1920-h1080-c/Portofino2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/110521-8046-PacificaLt2.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-QOLm5NyrBAg/Tg1hGjt7CQI/AAAAAAAAc2A/oW-ErAUPpKY/s1920-w1920-h1080-c/110521-8046-PacificaLt2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/_DX_3511_2_3_4_5_32bit-Edit.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-QVbxD_ZZCa0/U_yjxBJn4WI/AAAAAAAB-6k/fAnDqFKCfh4/s1920-w1920-h1080-c/_DX_3511_2_3_4_5_32bit-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/C21T0880.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-uNim7D5ywdM/UqTGRcbr78I/AAAAAAAAXKY/2Fv7yLI2kZc/s1920-w1920-h1080-c/C21T0880.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Pescadero.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-FNrstx8M7hY/TyH51o60WuI/AAAAAAAAGTY/3nRvYRuPjEU/s1920-w1920-h1080-c/Pescadero.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Temple+Over+Kyoto.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-I7qT8fiUqZU/TgkSotvmFkI/AAAAAAAI6h0/ASyt4FPWAso/s1920-w1920-h1080-c/Temple%2BOver%2BKyoto.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_4154b.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-7FTPwrBoDBs/Ufb1a1gM-UI/AAAAAAAADK0/NrOPNAfCG7I/s1920-w1920-h1080-c/DSC_4154b.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_0663-Edit-Edit-Edit.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-JLMulqzQsQQ/UqBrOg83JWI/AAAAAAAAgsY/vzUeMdvC-h0/s1920-w1920-h1080-c/DSC_0663-Edit-Edit-Edit.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/GGB_130628_MCu_1-2.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-IevMmNQigxY/Uc3F-z0I5qI/AAAAAAAAItw/eRKlk6yr6TY/s1920-w1920-h1080-c/GGB_130628_MCu_1-2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/090810-1930-NeedleAndHaystack.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-SUKN-r5lw5A/Tg1fNM6yIEI/AAAAAAAAAN8/PULlaJpHBkI/s1920-w1920-h1080-c/090810-1930-NeedleAndHaystack.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/2012.+purple+is+my+favorite+color.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-vtVHPLJKT3w/T9KLSzUhuOI/AAAAAAAABiY/3a5M4phhFs0/s1920-w1920-h1080-c/2012.%2Bpurple%2Bis%2Bmy%2Bfavorite%2Bcolor.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/SealRocks-sunset-reflection.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-55UeILqE2s0/T0PDELei3HI/AAAAAAABFbU/4_nqVtef2m8/s1920-w1920-h1080-c/SealRocks-sunset-reflection.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/New+York+-+NEX7+-+Trey+Ratcliff+(8+of+21).png"],"fullscreen-image":["https://lh5.googleusercontent.com/-XxP1oir93Fg/U0MW6gL3miI/AAAAAAAJA0U/hP0D1e9JC-w/s1920-w1920-h1080-c/New%2BYork%2B-%2BNEX7%2B-%2BTrey%2BRatcliff%2B%25288%2Bof%2B21%2529.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Patience.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-Gp7BKH79U6k/T_rPHeEUv4I/AAAAAAAAPL8/LSoFOwB9QNU/s1920-w1920-h1080-c/Patience.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMGP8828.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-RZKOyMbLobw/UONnVGAE9tI/AAAAAAAAyPM/60as7LUVuHI/s1920-w1920-h1080-c/IMGP8828.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/5-01-13-spider-crawler-lightning-road-albany-tx.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-oYOr7AcS0F4/UZUYFMNixiI/AAAAAAAAGL0/6fp4ZSWjH90/s1920-w1920-h1080-c/5-01-13-spider-crawler-lightning-road-albany-tx.png"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/The+Blue+City.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-4wJlrgKnUsI/U0MZbQCL-5I/AAAAAAAJOwE/yL0yy2OMWtI/s1920-w1920-h1080-c/The%2BBlue%2BCity.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/06152012-12.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-_OVIBu35BFs/UOD9ybxkzmI/AAAAAAAAkNo/YyQXlMNgeEk/s1920-w1920-h1080-c/06152012-12.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/D30_0895.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-onm54VnIRFQ/SBnwVTP3Y4I/AAAAAAAAvJc/jJxlxmTu5t8/s1920-w1920-h1080-c/D30_0895.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Metal-1.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-TKsDKeRS95U/Tkrw6TiAyPI/AAAAAAAC4HY/bygELaJa5-s/s1920-w1920-h1080-c/Metal-1.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_0300.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-b_ZyO6A8eec/UNcwXdvdtMI/AAAAAAAAR4k/YcThGSa1EHE/s1920-w1920-h1080-c/DSC_0300.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_6868.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-Mc32ZHV--b0/SwIy9sStc0I/AAAAAAABLXg/AB-YvtyK-wk/s1920-w1920-h1080-c/DSC_6868.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/class3_05.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-EUrlRFim4uQ/Uo5D2fBJduI/AAAAAAAABZU/73PLVw3Xxk0/s1920-w1920-h1080-c/class3_05.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/MarshalBeach-sunset-rocks-.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-_SFDsIPPKzI/TxhNwgko__I/AAAAAAABFhY/uz_fTrjtNFg/s1920-w1920-h1080-c/MarshalBeach-sunset-rocks-.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/_O9V5569_HDR.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-WrzPVL3SMFs/Uq-D3XLVHUI/AAAAAAAAPBY/JQpQw38ggyM/s1920-w1920-h1080-c/_O9V5569_HDR.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/trey-ratcliff-road-to-mountain-forever.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-n8kCRwIAl3I/U0MlTxDHALI/AAAAAAAJEL0/VwbBzYmP0nQ/s1920-w1920-h1080-c/trey-ratcliff-road-to-mountain-forever.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/RodeoBeach-sunset-16x9.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-grccgI_cL8k/TwH0-_dHIvI/AAAAAAABFbM/sqNxtA-Gi30/s1920-w1920-h1080-c/RodeoBeach-sunset-16x9.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Sky+Painting.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-XZGw1LIoIQk/Ua2ANshiwmI/AAAAAAAAfX8/PIcgUJRHb3M/s1280-w1280-c-h720-k-no/Sky%2BPainting"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_0816-Edit-Edit-Edit-Edit-Edit.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-dKrL8_a8MmE/UrWktdbZX_I/AAAAAAAAilY/2Ce0qzN9r3s/s1920-w1920-h1080-c/DSC_0816-Edit-Edit-Edit-Edit-Edit.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_1204.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-NvzWYFZm9b0/UQmFrRIGaDI/AAAAAAAAlew/em5aqVHnV3M/s1920-w1920-h1080-c/IMG_1204.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/_MSU8463.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-9SBIVQE_N98/UnDyKXBM-VI/AAAAAAAAGw8/JRqWBIObFek/s1920-w1920-h1080-c/_MSU8463.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_4067.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-oVqvzpNBaE8/UlmYCAD6pNI/AAAAAAAAQPQ/xDn8iGotkyo/s1920-w1920-h1080-c/DSC_4067.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/_D3_0763-Edit-Edit.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-SzwsBTne5SM/U_yjvpyvA6I/AAAAAAAB-6A/q0imuvbf0Yw/s1920-w1920-h1080-c/_D3_0763-Edit-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_4772+p4.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-uXesNMoRpN8/U08k4CCBTsI/AAAAAAAAvr0/7ZtIaGpNfHU/s1920-w1920-h1080-c/IMG_4772%2Bp4.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/SutroSunset-rocks-misty.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-sSh1MI_KB_c/TwXF_f9Tr4I/AAAAAAAAL-g/ivbuKnmkfLI/s1920-w1920-h1080-c/SutroSunset-rocks-misty.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/the+docs.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-djAiXa_L7EU/TgtZGJZPcFI/AAAAAAAJBA0/Ih2FgNUBZYE/s1920-w1920-h1080-c/the%2Bdocs.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/AtAnchor.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-25-BIcSpaLU/UX-tEB0seYI/AAAAAAAAU2Y/SX0W4AL4YQM/s1920-w1920-h1080-c/AtAnchor.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/A+Razor+to+the+Sky.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-WUT3n130gGw/U0MR8lh-SbI/AAAAAAAIpgw/VO52olLVJN8/s1920-w1920-h1080-c/A%2BRazor%2Bto%2Bthe%2BSky.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/4070581709_a1c668a779_o.png"],"fullscreen-image":["https://lh5.googleusercontent.com/--ETG9eU1_Xw/Tgt5l8cyMwI/AAAAAAAIWTg/nWSbj2O5c6w/s1920-w1920-h1080-c/4070581709_a1c668a779_o.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_6165.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-PAZT1pXjMM8/UrM5S_Ht1cI/AAAAAAAACVE/adGv8TflzYc/s1920-w1920-h1080-c/IMG_6165.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/CliffHouseSunset.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-aIBq7YhM6-M/TxMQytFssDI/AAAAAAAANXs/9RurRnKmOOw/s1920-w1920-h1080-c/CliffHouseSunset.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC01034.png"],"fullscreen-image":["https://lh4.googleusercontent.com/--Km5pB3lBaM/Ua3DdDBGtcI/AAAAAAAAPV4/p_BFy_Ps50w/s2560/DSC01034"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Big-Sur-Coastal-Seascape-2.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-LVkYomDgo1g/TwoREmpuoLI/AAAAAAAAMiE/duaVKfg5Blg/s1920-w1920-h1080-c/Big-Sur-Coastal-Seascape-2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/100804-4696-PololuMorn1.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-hXPVBw1iPyc/Tg1gUs9WABI/AAAAAAAAAPU/J-g25o_00Gk/s1920-w1920-h1080-c/100804-4696-PololuMorn1.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/MOL_1600.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-GwSLzDzfyGA/UWoqCg-pk2I/AAAAAAAAMh0/JeyhZ3UqFys/s1920-w1920-h1080-c/MOL_1600.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMGP0652_3_4_tonemapped.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-Sm0TD1_vzFo/ULrHwJOPf3I/AAAAAAAAEMY/NGUYdwUEtGY/s1920-w1920-h1080-c/IMGP0652_3_4_tonemapped.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/CGPier-storm-mono.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-gE1QbuQR45Q/TqiD0bdOG7I/AAAAAAAAE8w/fawdaKhXGu4/s1920-w1920-h1080-c/CGPier-storm-mono.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Night+Falls+on+Crater+Lake+-+Crater+Lake,+OR1.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-8h4vm06cRYo/UZURZQG4KwI/AAAAAAAAPOE/GltqdZojKKE/s1920-w1920-h1080-c/Night%2BFalls%2Bon%2BCrater%2BLake%2B-%2BCrater%2BLake%252C%2BOR1.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_0213.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-uaGTbkMBysI/R7qYVHTGv6I/AAAAAAAABiQ/IU0yK7OgvYc/s1920-w1920-h1080-c/IMG_0213.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMGP1985_stitch.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-14sNcCfmulY/UOj-YBSQ8oI/AAAAAAAALsk/v-C7ZmZ-UIk/s1920-w1920-h1080-c/IMGP1985_stitch.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Reflection.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-qd290nJU0FM/UZYXTBbrzeI/AAAAAAAAVhI/gNH2tEzLT80/s1920-w1920-h1080-c/Reflection.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/ibiza+dock.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-QyxGZeaBON4/TgtZEYemvZI/AAAAAAAAgVE/_VepyvNFiTE/s1920-w1920-h1080-c/ibiza%2Bdock.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Trippin'-3.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-b4ZiJXUmZLg/TUCPhc_z2pI/AAAAAAAAAgM/uY37UMRjGsw/s1920-w1920-h1080-c/Trippin%2527-3.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_1612.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-2A31P4WBC8s/UtT1BndamcI/AAAAAAAAO1E/Qj5CF7S1UeU/s1920-w1920-h1080-c/DSC_1612.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/YosemiteFalls.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-1dANL8dJDT0/T6h0JShpn-I/AAAAAAAAIDk/l_dKhWvFXUs/s1920-w1920-h1080-c/YosemiteFalls.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/07_20090416.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-8kQQYYzz_l8/UZSathUsJGI/AAAAAAAAsUM/3Z4WK9CG8wE/s1920-w1920-h1080-c/07_20090416.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_7222-Edit-2.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-yYJUfqBHHXw/UoffDIFgJOI/AAAAAAAARpQ/M7Nskp7pTDg/s1920-w1920-h1080-c/DSC_7222-Edit-2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_9581.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-gcU_icksx-A/TnuyXEh2MeI/AAAAAAAAFhE/sjZHDkU_Vlg/s1920-w1920-h1080-c/IMG_9581.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/20100525-IMG_6788-HDR-Edit.png"],"fullscreen-image":["https://lh6.googleusercontent.com/--y_TRuOOPTA/T_0KxukaPeI/AAAAAAAARw0/VTeenM1J2xI/s1920-w1920-h1080-c/20100525-IMG_6788-HDR-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/MagicBallContest.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-6nBwDVfR-BE/UXrL2u6iqII/AAAAAAAAUro/CL47d2nXDzE/s1920-w1920-h1080-c/MagicBallContest.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_3857-Edit-Edit.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-eDbulGr2hu8/Ur0CIxLk-FI/AAAAAAAAGA4/R7oAYMeXRws/s1920-w1920-h1080-c/IMG_3857-Edit-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMGP9268.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-K258GmbSDxM/T_TBV0i4kLI/AAAAAAAABro/rW_nlHdct7U/s1920-w1920-h1080-c/IMGP9268.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Hooded+Lady+of+the+Valley.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-31H2j9KKMi0/UTpeMK5JrEI/AAAAAAAAPHo/4QOl-12J750/s1920-w1920-h1080-c/Hooded%2BLady%2Bof%2Bthe%2BValley.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/_MG_4776.CR2.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-MxVUPW7j-L0/UCFpW985f5I/AAAAAAAAJI8/HQfELZDoN7I/s1920-w1920-h1080-c/_MG_4776.CR2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/untitled-3-2.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-1cz2zcbiz-4/Th0QVgyAMBI/AAAAAAAABC4/gVc-Bp_mFGs/s1920-w1920-h1080-c/untitled-3-2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/sky_leaves.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-1o-jUyycpcE/UIdjwEWDS3I/AAAAAAAAED4/7Mj-xSqdO5E/s1920-w1920-h1080-c/sky_leaves.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/TunnelViewWinter.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-GGVPhdUiKwY/UOOZDe9JFQI/AAAAAAAAKiY/Noq6gsZlXxk/s1920-w1920-h1080-c/TunnelViewWinter.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/3674678524_f49854f3b1_o.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-ZGfUihferj8/TgtZGKAJjOI/AAAAAAAAdd8/e-EXjm51hhA/s1920-w1920-h1080-c/3674678524_f49854f3b1_o.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/I+Cover+the+Waterfront+-+Alki+Beach,+WA.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-Zj8Aex6oXYo/UW6x5FfAtjI/AAAAAAAANiY/lukbqNiI2go/s1920-w1920-h1080-c/I%2BCover%2Bthe%2BWaterfront%2B-%2BAlki%2BBeach%252C%2BWA.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/morning+with+coffee+in+yellowstone.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-HdhuOcwGEcs/TgtZEZtITGI/AAAAAAAAVmw/nPx5UAR0qic/s1920-w1920-h1080-c/morning%2Bwith%2Bcoffee%2Bin%2Byellowstone.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Bristlecone_Stars.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-xu-TTAEZtQo/UbtDr65unqI/AAAAAAAABKo/-2asqRlMolw/s1920-w1920-h1080-c/Bristlecone_Stars.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/StillStanding.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-Bz1rXnbAy1s/UQNThZKgMRI/AAAAAAAAScM/eUItE7glPn0/s1920-w1920-h1080-c/StillStanding.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Salt_Point.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-FDe6_2rxtEs/UkBgjq9ZJmI/AAAAAAAAELo/zT29ZhT2NAA/s1920-w1920-h1080-c/Salt_Point.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/untouched.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-KPCupfttZeg/UYEMyuiN84I/AAAAAAAAU5k/74L4iR6gMDk/s1920-w1920-h1080-c/untouched.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/TacomaChiluly--10.png"],"fullscreen-image":["https://lh6.googleusercontent.com/--LqjPK05as8/TsSfH1cu69I/AAAAAAAATUE/JyMyDxcW1Ms/s1920-w1920-h1080-c/TacomaChiluly--10.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_5165-Edit-Edit.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-5ntl45J8Lxg/UiHZG2mJ1nI/AAAAAAAAb8s/f10TxWDh2zA/s1920-w1920-h1080-c/DSC_5165-Edit-Edit.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Group+TWO.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-HbF8zRNZt-o/UMPHYkBuCMI/AAAAAAAAKUQ/GYFSC7-LVqs/s1920-w1920-h1080-c/Group%2BTWO.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/CrackedIsSometimesGood.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-5lm5qxI06OU/TqkYjHdt_lI/AAAAAAAAKOc/Eqb40U2Jsiw/s1920-w1920-h1080-c/CrackedIsSometimesGood.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_0472.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-ot6zDqm0p1s/UM-oZwFOYBI/AAAAAAAAImc/_9QNnbQXa5Y/s1920-w1920-h1080-c/IMG_0472.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/MOL_2167.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-HW1I0DVsq6A/UlmXtm9TvGI/AAAAAAAAQOM/MBQeGBzVB2M/s1920-w1920-h1080-c/MOL_2167.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/T3_IMG_3936.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-r3jKfQruwv4/Uc6B8fRsKmI/AAAAAAAAIAg/VCLgE4EqjtY/s1920-w1920-h1080-c/T3_IMG_3936.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/8941Autumn.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-TFEx1ptMuoc/UpN7a9C-YlI/AAAAAAAAKUI/A3KeBF2vSnE/s1920-w1920-h1080-c/8941Autumn.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_6682.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-l9peRQpmVRQ/T54s3ZTfGBI/AAAAAAAAJQk/-_8lDImWzwE/s1920-w1920-h1080-c/IMG_6682.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_5908.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-nFgpOv4T3M0/TWLTD6xOiJI/AAAAAAAAPFs/PSfnLjBIrVU/s1920-w1920-h1080-c/IMG_5908.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_0935.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-acdH1dPsUdk/ToQNXK7HgDI/AAAAAAAATyM/95rFxKIy_Dw/s1920-w1920-h1080-c/IMG_0935.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/11-17-12-India+Trip-Kanheri+Caves+(JPEGs)-20.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-ko4QbKawOzs/UMrlGpBHGtI/AAAAAAAAMbA/TVYDrsxchf4/s1920-w1920-h1080-c/11-17-12-India%2BTrip-Kanheri%2BCaves%2B%2528JPEGs%2529-20.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/_MSU3203.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-E5h_DjLkO9g/UJGAP4Q_1jI/AAAAAAAABI0/xb_a1wwuddA/s1920-w1920-h1080-c/_MSU3203.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_5328.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-3vJ7YydpvVU/T3Fad0DfOvI/AAAAAAAAIIg/rJ5piFMcgKg/s1920-w1920-h1080-c/IMG_5328.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_5974.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-qwOaqE4cYCg/Ur0CAf2nO5I/AAAAAAAAF-I/b2vYQp-TxW4/s1920-w1920-h1080-c/IMG_5974.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/MOL_1755.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-nVpMVoplcjA/UlmXtr57GiI/AAAAAAAAQOo/YPNo51GXyLU/s1920-w1920-h1080-c/MOL_1755.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_2828.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-RM253k65h0g/RuWXqF2PN3I/AAAAAAAAASw/bWQAJ47AvxQ/s1920-w1920-h1080-c/IMG_2828.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_T3_0788.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-JhsS5Efemfw/UAUNCf1J1aI/AAAAAAAACno/1178JtnVPVQ/s1920-w1920-h1080-c/IMG_T3_0788.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_0471-Edit-Edit.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-IOB7UYjdfKk/UWxRNQruJpI/AAAAAAAAqYo/ZYOTEFEaUUQ/s1920-w1920-h1080-c/DSC_0471-Edit-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_8176.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-97kOELXyRw0/UpKzpdSGLsI/AAAAAAAACU8/t7toymdF9ys/s1920-w1920-h1080-c/IMG_8176.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSCF0155-Edit.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-v5W9oXSutcs/UjX_nq7Q1DI/AAAAAAAAPVE/A201XC4J5qs/s1920-w1920-h1080-c/DSCF0155-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_1017.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-OvptEVwUDuA/UE_P875OPoI/AAAAAAAAPWM/ocqkejUt5AQ/s1920-w1920-h1080-c/IMG_1017.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_4701.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-SCc_19Vl5Ng/SuoniirQlZI/AAAAAAAAGOo/UsRZ0o6GJeI/s1920-w1920-h1080-c/IMG_4701.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_6000.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-GMJoozxAcgE/Tk7h8aldhrI/AAAAAAAAFZ8/SnFiv5CZcYE/s1920-w1920-h1080-c/IMG_6000.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/austin+2.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-G4bChH6K3mY/ULdpTli69GI/AAAAAAAAJIg/cfku63jtnY4/s1920-w1920-h1080-c/austin%2B2.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_2526-3b.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-11t9DgvNYhY/UG3HjpR9T9I/AAAAAAAAIO4/FSkNbPYzUMA/s1920-w1920-h1080-c/IMG_2526-3b.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_6451.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-YtE41zDzZZM/UBCa4Ui2cuI/AAAAAAAAOMg/Uzs03aPfWak/s1920-w1920-h1080-c/IMG_6451.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_4369+-+Large.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-mPicgJz8Yes/USOzc3Ki2TI/AAAAAAAADVA/QzQqtctMISI/s1920-w1920-h1080-c/IMG_4369%2B-%2BLarge.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_0109.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-1n2blvh-lkQ/TX_WqEAkKAI/AAAAAAAAAI4/xlaLPLcp6nI/s1920-w1920-h1080-c/DSC_0109.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/20120128-20120128-ENS_3119_20_21_tonemapped-Edit.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-HBDE39Hgv9M/TyXGMvNUzjI/AAAAAAAAA_A/nBMmnHMcT0o/s1920-w1920-h1080-c/20120128-20120128-ENS_3119_20_21_tonemapped-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_6499.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-iTxENBfrZfY/T5ZLrTvoeCI/AAAAAAAAJD8/ik0c31ZcTOw/s1920-w1920-h1080-c/IMG_6499.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/MorningGlory.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-8K8X3n7zPKE/UOOZGSlNvjI/AAAAAAAAKig/yTCbEVh-lCw/s1920-w1920-h1080-c/MorningGlory.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_1984.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-MXAy1Q1e8pw/TtPRnPCM4AI/AAAAAAAAQc0/Vvc74HYL35s/s1920-w1920-h1080-c/IMG_1984.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/MOL_1841.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-LQXZpNUUdw8/UWoqJONj7-I/AAAAAAAAMh0/7m100XOFcEo/s1920-w1920-h1080-c/MOL_1841.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/9082667654_c7919ec6ed_o.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-iVr5r1Yycbs/UkPSMp_2CZI/AAAAAAAALrA/ME5aBtr5fdM/s1920-w1920-h1080-c/9082667654_c7919ec6ed_o.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/Wyoming-5.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-jwJEWGscrls/T-dsvGIbyRI/AAAAAAAABp4/Pgn_t5V2LNs/s1920-w1920-h1080-c/Wyoming-5.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_8981.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-FeRCoqwVOB4/Tkgq-geJE3I/AAAAAAAAFYo/xdj-91ytvg8/s1920-w1920-h1080-c/IMG_8981.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/04_20080526.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-ENSOsH-5iPQ/UZSar_1xTLI/AAAAAAAAsTo/CjPKgR3jXAs/s1920-w1920-h1080-c/04_20080526.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_0432.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-jmMSVP61kaQ/TqtX5OPLfZI/AAAAAAAAFkk/8dE_CxpTiHM/s1920-w1920-h1080-c/IMG_0432.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/tah+prohm+ruins.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-N-jkCCpnvmM/Tg0t85f5-dI/AAAAAAAABj8/otdYcgGq4ZU/s1920-w1920-h1080-c/tah%2Bprohm%2Bruins.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_0642.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-Lk6txIIotmM/ToZuJ99slYI/AAAAAAAAQIg/y0jvaiYTIHA/s1920-w1920-h1080-c/IMG_0642.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/MC2_8779.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-QpB1YMuAXEA/TikI95S2KmI/AAAAAAAAPSw/kJPeHft92m4/s1920-w1920-h1080-c/MC2_8779.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_0366.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-E57LJIzkkd8/UM-oHjiKHJI/AAAAAAAAIjY/QKAP7QTXBNY/s1920-w1920-h1080-c/IMG_0366.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/MOL_1818.png"],"fullscreen-image":["https://lh5.googleusercontent.com/--qL9ddvO4gs/UWoqHffdewI/AAAAAAAAMh0/uf5mp_xqsHI/s1920-w1920-h1080-c/MOL_1818.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_3027.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-Xdz2ceNVzdw/Tm5L7A9tdYI/AAAAAAAAFsg/k4Tjwbi73Cw/s1920-w1920-h1080-c/IMG_3027.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_0242.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-ejLi6Bg7IUI/TonR_AZLYLI/AAAAAAAAQWk/A1bVgL3p2A4/s1920-w1920-h1080-c/IMG_0242.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_0423-Edit.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-iNpCGNJTrRo/Ugbk1ZMLczI/AAAAAAAAOE0/FZWVWqXGdT8/s1920-w1920-h1080-c/DSC_0423-Edit.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/WahclelaFalls.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-q9gWC1ZIAvg/UbZrg9lIcAI/AAAAAAAAL4I/xzSlyLfAGrQ/s1920-w1920-h1080-c/WahclelaFalls.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_9166.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-CaqC7SHp_2w/SF8sHokHjwI/AAAAAAAACyw/gC4j26zZen8/s1920-w1920-h1080-c/DSC_9166.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/IMG_7449.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-Bo0_R3Hshio/UOUefGb4bpI/AAAAAAAARno/EBZGWRhWwzk/s1920-w1920-h1080-c/IMG_7449.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/path_of_leaves.png"],"fullscreen-image":["https://lh3.googleusercontent.com/-y9mHkm6F9NI/UJH6oUvIN3I/AAAAAAAADqU/ueLAmjtceMI/s1920-w1920-h1080-c/path_of_leaves.jpg"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/700_1905.png"],"fullscreen-image":["https://lh4.googleusercontent.com/-nEEPZA887gc/SRGbDPl6jgI/AAAAAAAADOc/LH5WYu-Vc1k/s1920-w1920-h1080-c/700_1905.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/DSC_2079-1.png"],"fullscreen-image":["https://lh5.googleusercontent.com/-ps4uT_pEdCE/RpKjlC16MuI/AAAAAAAAAt0/n09gNExGMl0/s1920-w1920-h1080-c/DSC_2079-1.JPG"]},{thumbnail:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/images/thumbnails/MWF_6457-2.png"],"fullscreen-image":["https://lh6.googleusercontent.com/-M6BRAUZHPyo/UfbbKobVOKI/AAAAAAAAK_M/4WIHtFv7Idk/s1920-w1920-h1080-c/MWF_6457-2.jpg"]}]}}},61877:e=>{e.exports={"background-patterns":{image:["https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/01.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/pattern1.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/pattern2.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/pattern3.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/pattern4.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/pattern5.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/pattern6.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/pattern7.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/abstract-1667135_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/abstract-2069198_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/abstract-2425614_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/abstract-2790359_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/abstract-2863542_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/abstract-3288642_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/abstract-geometric-pattern-background_1319-242.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/animals-16908_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/autumn-1801896_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/backdrop-3346304_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/background-1141891_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/background-1141892_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/basket-2023197_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/begflo41.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/begflo45.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/begflo55.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/begflo63.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/begtkan01.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/begtkan20.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/begtkan56.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/belflo02.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/belflo102.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/belflo106.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/belflo135.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/belflo33.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/belflo75.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/belflo76.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/belflo80.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/beltkan11.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/beltkan15.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/beltkan17.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/beltkan21.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/beltkan30.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/beltkan33.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/beltkan46.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/beltkan48.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/beltkan50.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/beltkan56.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/blue-1545368_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/blue-3368023_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/braiding-2697075_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/cactus-2191647_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/cactus-3324067_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/cactus-3334141_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/camouflage-145980_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/camouflage-33708_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/chbeluzor05.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/chbeluzor125.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/chbeluzor126.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/chbeluzor129.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/chbeluzor131.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/chbeluzor139.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/chbeluzor15.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/chbeluzor41.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/chbeluzor44.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/christmas-1091551_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/circle-2696910_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/circles-1005197_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/circles-1005321_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/cube-402231_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/cute-3047767_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/decor-763806_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/decorative-1781458_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/design-3289984_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/diamonds-1524471_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/dreamcatcher-3334128_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/floral-1299131_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/floral-1788412_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/floral-4655084_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/floral-pattern-1603073_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/foil02.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/foil09.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/foil10.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/foil14.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/galk06.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/galk07.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/galk09.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/geluzor81.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/geluzor82.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/geluzor84.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/geometric-patterns-1978688_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/goltum10.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/gothic-756211_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/green-753533_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/green-763804_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/heart05.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/heart06.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/heart32.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/heart33.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/heart34.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/heart39.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/heart41.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/heart51.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/heart53.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/hexagon-1312786_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/imgonline-com-ua-Transparent-backgr-1bjZ4CEqGLSGiWI.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/imgonline-com-ua-Transparent-backgr-3PniNaR4EM.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/imgonline-com-ua-Transparent-backgr-6oQV3ly2I1vFY5Je.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/imgonline-com-ua-Transparent-backgr-9fPsO9xLXxzONha.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/imgonline-com-ua-Transparent-backgr-AJ5CKq0awy4d9EF.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/imgonline-com-ua-Transparent-backgr-Elrl20LiRFHXr.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/imgonline-com-ua-Transparent-backgr-Fu9UMDonFXB4mIqU.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/imgonline-com-ua-Transparent-backgr-HxkaMXBjzP.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/imgonline-com-ua-Transparent-backgr-UwawezoPZ9I.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/imgonline-com-ua-Transparent-backgr-VFpI9G4V62V.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/imgonline-com-ua-Transparent-backgr-VcTxveu7iXkz.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/imgonline-com-ua-Transparent-backgr-ka9dtT7zZFsY.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/imgonline-com-ua-Transparent-backgr-nJw0PAz0l03dSZY.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/imgonline-com-ua-Transparent-backgr-ybmMVJ4cYA.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/imgonline-com-ua-Transparent-backgr-z9Xwv2KKSbgW2b.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/koga16.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/koga17.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/koga25.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/koga31.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/koga32.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/koga37.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/kortkan03.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/kortkan06.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/kortkan07.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/lilflow110.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/lilflow24.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/lilflow82.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/lilflow84.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/magnolia-732331_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/meha10.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/meha18.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/meha23.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/mesh-2697072_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/metallic18.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/metallic28.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/metallic59.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/metallic82.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/metallic83.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/metallic87.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/metallic88.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/mosaic-2790339_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/music57.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/music58.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/pattern-1008150_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/pattern-3289978_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/pattern-403769_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/pattern-5415668_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/pattern-728509_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/purple-755266_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/purple-756209_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/rail-2721626_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/rast02.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/rast06.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/rast10.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/rast11.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/rast22.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/rast38.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/rast43.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/rast46.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/rast48.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/rast59.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/rast60.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/rast68.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/rast69.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/rast79.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/rast83.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/roses-5095521_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/roses-5100472_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/rozuzor12.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/rozuzor26.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/rozuzor27.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/rozuzor35.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/rozuzor67.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/sand89.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/seamless-1320742_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/seamless-1781493_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/seamless-1837442_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/seamless-3289975_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/seamless-pattern-1085294_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/seamless-pattern-1085297_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/seamless-pattern-1086306_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/seamless-pattern-1086309_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/seamless-pattern-1086311_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/seamless-pattern-1089796_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/seamless-pattern-1089797_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/seamless-pattern-1822610_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/seamless-pattern-5095737_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/seamless-pattern-757848_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/sersv01.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/sersv32.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/seruzor06.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/seruzor47.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/sinkrasuz10.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/sinkrasuz101.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/sinkrasuz37.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/star-2721633_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/star02.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/star41.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/star48.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/star49.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/stars-1005267_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/tile-1892631_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/tree-5970709_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/tree-5970776_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/triangle-753534_640.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/vector-1603109_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/violet10.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/wave-2697053_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/wave-2721632_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/white-2484120_960_720.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/white-abstract-background_23-2148806274.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/white-abstract-background_23-2148810246.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/white-abstract-background_23-2148810353.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/zolot31.png","https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/patterns/zolot47.png"]}}},10253:(e,t,i)=>{var s={"./attention/attention.mp3":17533};function n(e){var t=a(e);return i(t)}function a(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=a,e.exports=n,n.id=10253},81089:(e,t,i)=>{var s={"./marching-band-dave-girtsman/marching-band-dave-girtsman.mp3":65705};function n(e){var t=a(e);return i(t)}function a(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=a,e.exports=n,n.id=81089},60255:(e,t,i)=>{var s={"./beep_positive/beep_positive.mp3":66391,"./beep_up/beep_up.mp3":51922,"./bleep/bleep.mp3":83113,"./cellular_click/cellular_click.mp3":70180,"./computer_chime/computer_chime.mp3":14528,"./ether/ether.mp3":86123,"./good_chime/good_chime.mp3":11691,"./mono_u/mono_u.mp3":63414,"./pixel_beep/pixel_beep.mp3":66488,"./plop/plop.mp3":88711,"./pop/pop.mp3":730,"./retro_game/retro_game.mp3":76496,"./tiny_noize/tiny_noize.mp3":28288};function n(e){var t=a(e);return i(t)}function a(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=a,e.exports=n,n.id=60255},90683:(e,t,i)=>{var s={"./future-synth/future-synth.mp3":66849,"./marching-band-dave-girtsman/marching-band-dave-girtsman.mp3":36445,"./retro-chiptune/retro-chiptune.mp3":15737};function n(e){var t=a(e);return i(t)}function a(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=a,e.exports=n,n.id=90683},60623:(e,t,i)=>{var s={"./_auth_request/_auth_request.mp3":48710,"./_call_connecting/_call_connecting.mp3":2301,"./_phone_busy/_phone_busy.mp3":33246};function n(e){var t=a(e);return i(t)}function a(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=a,e.exports=n,n.id=60623},65279:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});var s={ASSETS_URL_PREFIX:"./",STORAGE_NAME:"xabber-storage",STORAGE_VERSION:"v8",CONTAINER_ELEMENT:"#xabber-container",FAVICON_DEFAULT:"assets/images/favicon.png",FAVICON_DEFAULT_GREY:"assets/images/favicon-grey.png",FAVICON_MESSAGE:"assets/images/favicon-message.png",BACKGROUND_IMAGE:"assets/images/background.png",WIDTH_MEDIUM:1650,WIDTH_NARROW:1280,WIDTH_TINY:1152,LOG_LEVEL_NONE:-1,LOG_LEVEL_ERROR:1,LOG_LEVEL_WARN:2,LOG_LEVEL_INFO:3,LOG_LEVEL_DEBUG:4,LOG_LEVEL:"ERROR",KEY_BACKSPACE:8,KEY_TAB:9,KEY_ENTER:13,KEY_SHIFT:16,KEY_CTRL:17,KEY_ESCAPE:27,KEY_SPACE:32,KEY_ARROW_LEFT:37,KEY_ARROW_UP:38,KEY_ARROW_RIGHT:39,KEY_ARROW_DOWN:40,KEY_DELETE:46,KEY_FORWARD_SLASH:47,KEY_AT:50,VOICE_MSG_TIME:120,PASSWORD_DOT:String.fromCharCode(8226),CONNECTION_URL:null,CONN_STATUSES:{0:"ERROR",1:"CONNECTING",2:"CONNFAIL",3:"AUTHENTICATING",4:"AUTHFAIL",5:"CONNECTED",6:"DISCONNECTED",7:"DISCONNECTING",8:"ATTACHED",9:"REDIRECT",10:"CONNTIMEOUT"},PREKEYS_COUNT:100,MIN_PREKEYS_COUNT:80,AES_KEY_LENGTH:128,AES_TAG_LENGTH:128,AES_EXTRACTABLE:!0,BAD_CONN_STATUSES:[0,2,4,6,10],RECONNECTION_TIMEOUTS:[5e3,1e4,15e3],DOWNTIME_RECONNECTION_TIMEOUT:15,PING_SENDING_INTERVAL:10,IDLING_MINIMAL_TIMEOUT:10,IDLING_MAXIMUM_TIMEOUT:90,IDLING_DEFAULT_TIMEOUT:30,STATUS_WEIGHTS:{chat:1,online:2,away:3,xa:4,dnd:5,offline:6,unavailable:7},PRESENT_INTERVAL:9e5,CHATSTATE_INTERVAL_COMPOSING_AUDIO:5e3,CHATSTATE_TIMEOUT_PAUSED:15e3,CHATSTATE_TIMEOUT_STOPPED:5e3,CHATSTATE_TIMEOUT_PAUSED_AUDIO:1e4,JINGLE_WAITING_TIME:60,SYNCHRONIZATION_RSM_MAX:25,REGISTRATION_DOMAINS:[],LOGIN_DOMAINS:[],TRUSTED_DOMAINS:[],RECOMMENDED_DOMAIN:"",REGISTRATION_BUTTON:!0,REGISTRATION_CUSTOM_DOMAIN:!0,LOGIN_CUSTOM_DOMAIN:!0,TURN_SERVERS_LIST:[{urls:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"},{urls:"turn:turn.editcompany.org:5439",username:"test",credential:"1111"},{urls:"turn:192.158.29.39:3478?transport=udp",credential:"JZEOEt2V3Qb0y27GRntt2u2PAYA=",username:"28224511:1379330808"},{urls:"turn:192.158.29.39:3478?transport=tcp",credential:"JZEOEt2V3Qb0y27GRntt2u2PAYA=",username:"28224511:1379330808"}],JINGLE_MSG_PROPOSE:0,JINGLE_MSG_REJECT:1,JINGLE_MSG_ACCEPT:2,MSG_BLOCKED:-2,MSG_ERROR:-1,MSG_PENDING:0,MSG_SENT:1,MSG_DELIVERED:2,MSG_DISPLAYED:3,MSG_ARCHIVED:4,MSG_SAVED:5,RSM_ATTRIBUTES:["max","first","last","after","before","index","count"],MAM_ATTRIBUTES:["with","start","end"],GENERAL_GROUP_ID:1,NON_ROSTER_GROUP_ID:2,MATERIAL_COLORS:["red","green","blue","deep-purple","orange","lime","pink","purple","indigo","light-blue","cyan","teal","light-green","amber","deep-orange","brown","blue-grey"],MAX_AVATAR_FILE_SIZE:64e3,AVATAR_PRIORITIES:{VCARD_AVATAR:0,PUBSUB_AVATAR:1},EMAIL_FOR_JOIN_TRANSLATION:"info@xabber.com",AVATAR_SIZES:{TOOLBAR_ACCOUNT_ITEM:32,SETTINGS_ACCOUNT_ITEM:32,XABBER_ACCOUNT:32,SYNCHRONIZE_ACCOUNT_ITEM:36,MENTION_ITEM:36,ACCOUNT_SETTINGS_LEFT:96,ACCOUNT_VCARD_EDIT:80,ROSTER_RIGHT_ACCOUNT_ITEM:38,ROSTER_LEFT_ACCOUNT_ITEM:40,PARTICIPANT_DETAILS_ITEM:48,CONTACT_RIGHT_ITEM:32,GROUPCHAT_MEMBER_ITEM:32,CONTACT_LEFT_ITEM:32,CONTACT_BLOCKED_ITEM:32,CONTACT_DETAILS:192,GROUP_SETTINGS:96,CHAT_ITEM:40,CHAT_HEAD:40,CHAT_MESSAGE:32,CHAT_BOTTOM:48,XABBER_VOICE_CALL_VIEW:128,OMEMO_ENABLE_SETTING:182},SYNC_WAY_DATA:{no:{tip:"xabber_account__sync__settings_already_synced",icon:"mdi-cloud-check"},from_server:{tip:"xabber_account__sync__settings_will_be_downloaded",icon:"mdi-cloud-download"},to_server:{tip:"xabber_account__sync__settings_will_be_uploaded",icon:"mdi-cloud-upload"},delete:{tip:"xabber_account__sync__acc_will_be_deleted",icon:"mdi-delete"},off_local:{tip:"xabber_account__sync__local_acc",icon:"mdi-cloud-outline-off"},off_remote:{tip:"xabber_account__sync__remote_acc",icon:"mdi-cloud-outline-off"}},SYNCED_STATUS_DATA:{off:{tip:"xabber_account__sync_status__disabled",icon:"mdi-cloud-outline-off"},yes:{tip:"xabber_account__sync_status__synced",icon:"mdi-cloud-check"},no:{tip:"xabber_account__sync_status__not_synced",icon:"mdi-cloud"}},EMOJI_LIST_NAME:function(e){return{smiles_and_people:"emoji_list__catelory_name__smiles_and_people",body_and_clothes:"emoji_list__catelory_name__body_and_clothes",animals_and_nature:"emoji_list__catelory_name__animals_and_nature",food_and_drinks:"emoji_list__catelory_name__food_and_drinks",travel_and_places:"emoji_list__catelory_name__travel_and_places",events:"emoji_list__catelory_name__events",objects:"emoji_list__catelory_name__objects",signs:"emoji_list__catelory_name__signs"}[e]},QUOTE_MARKER:"&gt;",MARKUP_TAGS:["bold","underline","italic","strike","link","quote"],BLANK_VIDEO:{OGG:"data:video/ogg;base64, T2dnUwACAAAAAAAAAAAjaKehAAAAAEAjsCsBKoB0aGVvcmEDAgEACwAJAACwAACQAAAAAAAZAAAAAQAAAQAAAQADDUAA2E9nZ1MAAgAAAAAAAAAAlksvwgAAAABKGTdzAR4Bdm9yYmlzAAAAAAKAuwAAAAAAAIC1AQAAAAAAuAFPZ2dTAAAAAAAAAAAAACNop6EBAAAAPZIZjg41////////////////kIF0aGVvcmENAAAATGF2ZjU1LjMzLjEwMAEAAAAVAAAAZW5jb2Rlcj1MYXZmNTUuMzMuMTAwgnRoZW9yYb7NKPe5zWsYtalJShBznOYxjFKUpCEIMYxiEIQhCEAAAAAAAAAAAAARba5TZ5LI/FYS/Hg5W2zmKvVoq1QoEykkWhD+eTmbjWZTCXiyVSmTiSSCGQh8PB2OBqNBgLxWKhQJBGIhCHw8HAyGAsFAiDgVFtrlNnksj8VhL8eDlbbOYq9WirVCgTKSRaEP55OZuNZlMJeLJVKZOJJIIZCHw8HY4Go0GAvFYqFAkEYiEIfDwcDIYCwUCIOBQLDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8MDA8SFBQVDQ0OERIVFRQODg8SFBUVFQ4QERMUFRUVEBEUFRUVFRUSExQVFRUVFRQVFRUVFRUVFRUVFRUVFRUQDAsQFBkbHA0NDhIVHBwbDg0QFBkcHBwOEBMWGx0dHBETGRwcHh4dFBgbHB0eHh0bHB0dHh4eHh0dHR0eHh4dEAsKEBgoMz0MDA4TGjo8Nw4NEBgoOUU4DhEWHTNXUD4SFiU6RG1nTRgjN0BRaHFcMUBOV2d5eGVIXF9icGRnYxMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMSEhUZGhoaGhIUFhoaGhoaFRYZGhoaGhoZGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaERIWHyQkJCQSFBgiJCQkJBYYISQkJCQkHyIkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJBESGC9jY2NjEhUaQmNjY2MYGjhjY2NjYy9CY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2MVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVEhISFRcYGRsSEhUXGBkbHBIVFxgZGxwdFRcYGRscHR0XGBkbHB0dHRgZGxwdHR0eGRscHR0dHh4bHB0dHR4eHhERERQXGhwgEREUFxocICIRFBcaHCAiJRQXGhwgIiUlFxocICIlJSUaHCAiJSUlKRwgIiUlJSkqICIlJSUpKioQEBAUGBwgKBAQFBgcICgwEBQYHCAoMEAUGBwgKDBAQBgcICgwQEBAHCAoMEBAQGAgKDBAQEBggCgwQEBAYICAB8Xlx0fV7c7D8vrrAaZid8hRvB1RN7csxFuo43wH7lEkS9wbGS+tVSNMyuxdiECcjB7R1Ml85htasNjKpSvPt3D8k7iGmZXYuxBC+RR4arUGxkvH5y7mJXR7R5Jwn3VUhBiuap91VIrsaCM5TSg9o867khwMrWY2+cP4rwvBLzt/wnHaYe0edSRMYC6tZmU1BrvhktIUf2gXoU8bHMuyNA7lB7R51ym213sFcFKowIviT/i0Wscg+4RDubX+4haRsMxZWgN05K5FD3bzqS9VSVCPM4TpWs2C43ihFdgaSByeKHu3Xf/2TG8tgpB7PAtOs7jixWYw+Ayo5GjUTSybX/1KW52RxYfB8nBNLJtHgt4DPq6BZWBFpjyZX/1KW5Ca0evOwG1EX/A9j5fQm5hOz6W2CtcCaWTXTFAeZO71VIgCTX69y9TiaXag3Os2ES1DcLKw0/xR5HfnCqkpQF0Z1kxKNfhZWLycml2keduHMQh3HubB/pbUUoCK5wxetZRZWPJF/bdyE21H2YjMOhP/pkthqKUCOEWVm68+1J5n7ahES5sOhaZPdOC5j4kc91FVIsrF8ofe+A2on/16Z4RiKQZcMU3NouO9N4YAvrWaiA6h4bfLqhTitbnnJ2iPSVRNJH+aZGE+YXzq7Ah/OncW2K59AKamlocOUYTSvaJPNcjDfMGrmG9pOV2MbgI9v3B3ECZ7RLJ51UpzMn0C1huA87Ngom9lkiaw3t5yvFZmDl1HpkuP+PiqlawgD69jAT5Nxr2i6cwiytcwHhK2KJvZI9C1m/4VUil8RvO/ydxmgsFdzdgGpMbUeyyRNOi1k5hMb6hVSMuTrOE/xuDhGExQ219l07sV2kG5fOEnkWHwgqUkbvC0P2KTytY4nHLqJDc3DMGlDbX2aXK/4UuJxizaIkZITS7a3HN5374PrVlYKIcP9xl1BUKqQ7aAml2k1o5uGcN8A+tPz1HF1YVnmE7cyx4FIiUA2ml1k0hX9HB7l4tMO+R9YrMWcf5Anub1BZXUp3Ce4jBM21l0kyhcF/vg6FGeHa345MYv4BVSciTJhj5AbuD2K0dfIXc4jKAbazaS53rv1lYqpIVr2fcgcPox4u/WVnRfJ25GGING2s2cqjKIVUtwGbRtrljLd9CQOHhewUTfiKxWk7Olr2dHyIKlLgejEbasmmdGF/dhuhVrU9xGi6Hksgm/+5Bw813T3mJyRNqIYGdYspVZFzQ6dhNLJ7H+fYWh8Q+cMbzLc/O0evM4srXGjpECaXaT2jApqM4LRavgPnH7ecDRQSErabX3zC4EcXfOVZZUpYs3UIfMsKVR+6hgFzHhvWWWl4EqZtrJpHnyeO0T2icPrqVRyyDRKmbayexv7wdolGfh1hwtsK4G5jDOIHz/lTULUM47PaBmNJm2ssmTq+ssXeHBjgij3G5P+u5QVFIGQ21TNM5aGOHbqKssQ/HiM9kvcWjdCtF6gZNMzbXFhNP2gV2FNQi+OpOR+S+3RvOBVSOr+E5hjyPrQho7/QDNEG2qRNLpHl6WVl3m4p3POFvwEWUN0ByvCQTSttdM48H7tjQWVk73qoUvhiSDbVK0mzyohbuHXofmEaK/xXYJ+Vq7tBUN6lMAdrouC3p96IS8kMzbVK0myY4f+HKdRGsrG9SlDwEfQkXsGLIbapmmcv/sA5TrqC36t4sRdjylU4JC9KwG2plM0zxuT2iFFzAPXyj9ZWRu+tx5UpFv0jn0gQrKyMF5MyaZsDbXG7/qIdp0tHG4jOQumLzBliaZttaLfZFUBSOu7FaUn/+IXETfwUj2E0o6gJ2HB/l8N7jFnzWWBESErabWPvy9bUKqS4y78CME0rbXSTNFRf8H7r1wwxQbltish5nFVIRkhKaTNtc6L3LHAh8+B2yi/tHvXG4nusVwAKMb/0/MCmoWrvASDM0mbay5YRI+7CtC96OPtxudDEyTGmbbWVRgkvR8qaiA8+rLCft7cW8H8UI3E8nzmJVSQIT3+0srHfUbgKA21ZNM8WEy+W7wbj9OuBpm21MKGWN80kaA5PZfoSqkRPLa1h31wIEjiUhcnX/e5VSWVkQnPhtqoYXrjLFpn7M8tjB17xSqfWgoA21StJpM48eSG+5A/dsGUQn8sV7impA4dQjxPyrsBfHd8tUGBIJWkxtrnljE3eu/xTUO/nVsA9I4uVlZ5uQvy9IwYjbWUmaZ5XE9HAWVkXUKmoI3y4vDKZpnKNtccJHK2iA83ej+fvgI3KR9P6qpG/kBCUdxHFisLkq8aZttTCZlj/b0G8XoLX/3fHhZWCVcMsWmZtqmYXz0cpOiBHCqpKUZu76iICRxYVuSULpmF/421MsWmfyhbP4ew1FVKAjFlY437JXImUTm2r/4ZYtMy61hf16RPJIRA8tU1BDc5/JzAkEzTM21lyx7sK9wojRX/OHXoOv05IDbUymaZyscL7qlMA8c/CiK3csceqzuOEU1EPpbz4QEahIShpm21MJmWN924f98WKyf51EEYBli0zNtUzC+6X9P9ysrU1CHyA3RJFFr1w67HpyULT+YMsWmZtquYXz97oKil44sI1bpL8hRSDeMkhiIBwOgxwZ5Fs6+5M+NdH+3Kjv0sreSqqRvGSQxEA4HQY4M8i2dfcmfGuj/blR36WVvJVVI3jJIYiAcDoMcGeRbOvuTPjXR/tyo79LK3kqqkVUnCfqAES8EzTM21lykY4Q+LKxby+9F3ZHR/uC2OGpS9cv6BZXAebhckMGIymaZm2st8/B38i6A/n58pVLKwfURet4UBwSF6UaZttSZljhd2jW9BZWcrX0/hG4Sdt/SBCdH6UMJmWK80zba3URKaik8iB9PR2459CuyOAbi0/GWLTMmYXm2t0vUkNQhRPVldKpAN5HgHyZfdOtGuj/YxwZ5S8u3CjqMgQoyQJRdawvJlE530/+sVg21c8GWLTPf3yJVSVUoCMWVjjfslciZRObav/hli0zLrWF/XpE8khT2dnUwAAAAAAAAAAAACWSy/CAQAAAB7oAsQRNv///////////////////wcDdm9yYmlzDQAAAExhdmY1NS4zMy4xMDABAAAAFQAAAGVuY29kZXI9TGF2ZjU1LjMzLjEwMAEFdm9yYmlzJUJDVgEAQAAAJHMYKkalcxaEEBpCUBnjHELOa+wZQkwRghwyTFvLJXOQIaSgQohbKIHQkFUAAEAAAIdBeBSEikEIIYQlPViSgyc9CCGEiDl4FIRpQQghhBBCCCGEEEIIIYRFOWiSgydBCB2E4zA4DIPlOPgchEU5WBCDJ0HoIIQPQriag6w5CCGEJDVIUIMGOegchMIsKIqCxDC4FoQENSiMguQwyNSDC0KImoNJNfgahGdBeBaEaUEIIYQkQUiQgwZByBiERkFYkoMGObgUhMtBqBqEKjkIH4QgNGQVAJAAAKCiKIqiKAoQGrIKAMgAABBAURTHcRzJkRzJsRwLCA1ZBQAAAQAIAACgSIqkSI7kSJIkWZIlWZIlWZLmiaosy7Isy7IsyzIQGrIKAEgAAFBRDEVxFAcIDVkFAGQAAAigOIqlWIqlaIrniI4IhIasAgCAAAAEAAAQNENTPEeURM9UVde2bdu2bdu2bdu2bdu2bVuWZRkIDVkFAEAAABDSaWapBogwAxkGQkNWAQAIAACAEYowxIDQkFUAAEAAAIAYSg6iCa0535zjoFkOmkqxOR2cSLV5kpuKuTnnnHPOyeacMc4555yinFkMmgmtOeecxKBZCpoJrTnnnCexedCaKq0555xxzulgnBHGOeecJq15kJqNtTnnnAWtaY6aS7E555xIuXlSm0u1Oeecc84555xzzjnnnOrF6RycE84555yovbmWm9DFOeecT8bp3pwQzjnnnHPOOeecc84555wgNGQVAAAEAEAQho1h3CkI0udoIEYRYhoy6UH36DAJGoOcQurR6GiklDoIJZVxUkonCA1ZBQAAAgBACCGFFFJIIYUUUkghhRRiiCGGGHLKKaeggkoqqaiijDLLLLPMMssss8w67KyzDjsMMcQQQyutxFJTbTXWWGvuOeeag7RWWmuttVJKKaWUUgpCQ1YBACAAAARCBhlkkFFIIYUUYogpp5xyCiqogNCQVQAAIACAAAAAAE/yHNERHdERHdERHdERHdHxHM8RJVESJVESLdMyNdNTRVV1ZdeWdVm3fVvYhV33fd33fd34dWFYlmVZlmVZlmVZlmVZlmVZliA0ZBUAAAIAACCEEEJIIYUUUkgpxhhzzDnoJJQQCA1ZBQAAAgAIAAAAcBRHcRzJkRxJsiRL0iTN0ixP8zRPEz1RFEXTNFXRFV1RN21RNmXTNV1TNl1VVm1Xlm1btnXbl2Xb933f933f933f933f931dB0JDVgEAEgAAOpIjKZIiKZLjOI4kSUBoyCoAQAYAQAAAiuIojuM4kiRJkiVpkmd5lqiZmumZniqqQGjIKgAAEABAAAAAAAAAiqZ4iql4iqh4juiIkmiZlqipmivKpuy6ruu6ruu6ruu6ruu6ruu6ruu6ruu6ruu6ruu6ruu6ruu6rguEhqwCACQAAHQkR3IkR1IkRVIkR3KA0JBVAIAMAIAAABzDMSRFcizL0jRP8zRPEz3REz3TU0VXdIHQkFUAACAAgAAAAAAAAAzJsBTL0RxNEiXVUi1VUy3VUkXVU1VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU3TNE0TCA1ZCQCQAQCQEFMtLcaaCYskYtJqq6BjDFLspbFIKme1t8oxhRi1XhqHlFEQe6kkY4pBzC2k0CkmrdZUQoUUpJhjKhVSDlIgNGSFABCaAeBwHECyLECyLAAAAAAAAACQNA3QPA+wNA8AAAAAAAAAJE0DLE8DNM8DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEDSNEDzPEDzPAAAAAAAAADQPA/wPBHwRBEAAAAAAAAALM8DNNEDPFEEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEDSNEDzPEDzPAAAAAAAAACwPA/wRBHQPBEAAAAAAAAALM8DPFEEPNEDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAQ4AAAEGAhFBqyIgCIEwBwSBIkCZIEzQNIlgVNg6bBNAGSZUHToGkwTQAAAAAAAAAAAAAkTYOmQdMgigBJ06Bp0DSIIgAAAAAAAAAAAACSpkHToGkQRYCkadA0aBpEEQAAAAAAAAAAAADPNCGKEEWYJsAzTYgiRBGmCQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAYcAAACDChDBQasiIAiBMAcDiKZQEAgOM4lgUAAI7jWBYAAFiWJYoAAGBZmigCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAABhwAAAIMKEMFBqyEgCIAgBwKIplAcexLOA4lgUkybIAlgXQPICmAUQRAAgAAChwAAAIsEFTYnGAQkNWAgBRAAAGxbEsTRNFkqRpmieKJEnTPE8UaZrneZ5pwvM8zzQhiqJomhBFUTRNmKZpqiowTVUVAABQ4AAAEGCDpsTiAIWGrAQAQgIAHIpiWZrmeZ4niqapmiRJ0zxPFEXRNE1TVUmSpnmeKIqiaZqmqrIsTfM8URRF01RVVYWmeZ4oiqJpqqrqwvM8TxRF0TRV1XXheZ4niqJomqrquhBFUTRN01RNVXVdIIqmaZqqqqquC0RPFE1TVV3XdYHniaJpqqqrui4QTdNUVVV1XVkGmKZpqqrryjJAVVXVdV1XlgGqqqqu67qyDFBV13VdWZZlAK7rurIsywIAAA4cAAACjKCTjCqLsNGECw9AoSErAoAoAADAGKYUU8owJiGkEBrGJIQUQiYlpdJSqiCkUlIpFYRUSiolo5RSailVEFIpqZQKQiollVIAANiBAwDYgYVQaMhKACAPAIAwRinGGHNOIqQUY845JxFSijHnnJNKMeacc85JKRlzzDnnpJTOOeecc1JK5pxzzjkppXPOOeeclFJK55xzTkopJYTOQSellNI555wTAABU4AAAEGCjyOYEI0GFhqwEAFIBAAyOY1ma5nmiaJqWJGma53meKJqmJkma5nmeJ4qqyfM8TxRF0TRVled5niiKommqKtcVRdM0TVVVXbIsiqZpmqrqujBN01RV13VdmKZpqqrrui5sW1VV1XVlGbatqqrqurIMXNd1ZdmWgSy7ruzasgAA8AQHAKACG1ZHOCkaCyw0ZCUAkAEAQBiDkEIIIWUQQgohhJRSCAkAABhwAAAIMKEMFBqyEgBIBQAAjLHWWmuttdZAZ6211lprrYDMWmuttdZaa6211lprrbXWUmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmuttdZaay2llFJKKaWUUkoppZRSSimllFJKBQD6VTgA+D/YsDrCSdFYYKEhKwGAcAAAwBilGHMMQimlVAgx5px0VFqLsUKIMeckpNRabMVzzkEoIZXWYiyecw5CKSnFVmNRKYRSUkottliLSqGjklJKrdVYjDGppNZai63GYoxJKbTUWosxFiNsTam12GqrsRhjayottBhjjMUIX2RsLabaag3GCCNbLC3VWmswxhjdW4ultpqLMT742lIsMdZcAAB3gwMARIKNM6wknRWOBhcashIACAkAIBBSijHGGHPOOeekUow55pxzDkIIoVSKMcaccw5CCCGUjDHmnHMQQgghhFJKxpxzEEIIIYSQUuqccxBCCCGEEEopnXMOQgghhBBCKaWDEEIIIYQQSiilpBRCCCGEEEIIqaSUQgghhFJCKCGVlFIIIYQQQiklpJRSCiGEUkIIoYSUUkophRBCCKWUklJKKaUSSgklhBJSKSmlFEoIIZRSSkoppVRKCaGEEkopJaWUUkohhBBKKQUAABw4AAAEGEEnGVUWYaMJFx6AQkNWAgBkAACQopRSKS1FgiKlGKQYS0YVc1BaiqhyDFLNqVLOIOYklogxhJSTVDLmFEIMQuocdUwpBi2VGELGGKTYckuhcw4AAABBAICAkAAAAwQFMwDA4ADhcxB0AgRHGwCAIERmiETDQnB4UAkQEVMBQGKCQi4AVFhcpF1cQJcBLujirgMhBCEIQSwOoIAEHJxwwxNveMINTtApKnUgAAAAAAAMAPAAAJBcABER0cxhZGhscHR4fICEiIyQCAAAAAAAFwB8AAAkJUBERDRzGBkaGxwdHh8gISIjJAEAgAACAAAAACCAAAQEBAAAAAAAAgAAAAQET2dnUwAAQAAAAAAAAAAjaKehAgAAAEhTii0BRjLV6A+997733vvfe+997733vvfG+8fePvH3j7x94+8fePvH3j7x94+8fePvH3j7x94+8fePvH3gAAAAAAAAAAXm5PqUgABPZ2dTAABLAAAAAAAAACNop6EDAAAAIOuvQAsAAAAAAAAAAAAAAE9nZ1MAAEADAAAAAAAAI2inoQQAAAB/G0m4ATg/8A+997733vvfe+997733vvfK+8B94D7wAB94AAAAD8Kl94D7wH3gAD7wAAAAH4VABem0+pSAAE9nZ1MAAEsDAAAAAAAAI2inoQUAAABc3zKaCwAAAAAAAAAAAAAAT2dnUwAEQAYAAAAAAAAjaKehBgAAAOytEQUBOD/wD733vvfe+997733vvfe+98r7wH3gPvAAH3gAAAAPwqX3gPvAfeAAPvAAAAAfhUAF6bT6lIAAT2dnUwAAQL4AAAAAAACWSy/CAgAAAHsqKaIxAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAKDg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg5PZ2dTAAQAxAAAAAAAAJZLL8IDAAAABLWpWwIBAQ4O",MP4:"data:video/mp4;base64, AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw",WEBM:"data:video/webm;base64, GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAVkhFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsghV17AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU1LjMzLjEwMFdBjUxhdmY1NS4zMy4xMDBzpJBlrrXf3DCDVB8KcgbMpcr+RImIQJBgAAAAAAAWVK5rAQAAAAAAD++uAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDiDgQEj44OEAmJaAOABAAAAAAAABrCBsLqBkK4BAAAAAAAPq9eBAnPFgQKcgQAitZyDdW5khohBX1ZPUkJJU4OBAuEBAAAAAAAAEZ+BArWIQOdwAAAAAABiZIEgY6JPbwIeVgF2b3JiaXMAAAAAAoC7AAAAAAAAgLUBAAAAAAC4AQN2b3JiaXMtAAAAWGlwaC5PcmcgbGliVm9yYmlzIEkgMjAxMDExMDEgKFNjaGF1ZmVudWdnZXQpAQAAABUAAABlbmNvZGVyPUxhdmM1NS41Mi4xMDIBBXZvcmJpcyVCQ1YBAEAAACRzGCpGpXMWhBAaQlAZ4xxCzmvsGUJMEYIcMkxbyyVzkCGkoEKIWyiB0JBVAABAAACHQXgUhIpBCCGEJT1YkoMnPQghhIg5eBSEaUEIIYQQQgghhBBCCCGERTlokoMnQQgdhOMwOAyD5Tj4HIRFOVgQgydB6CCED0K4moOsOQghhCQ1SFCDBjnoHITCLCiKgsQwuBaEBDUojILkMMjUgwtCiJqDSTX4GoRnQXgWhGlBCCGEJEFIkIMGQcgYhEZBWJKDBjm4FITLQagahCo5CB+EIDRkFQCQAACgoiiKoigKEBqyCgDIAAAQQFEUx3EcyZEcybEcCwgNWQUAAAEACAAAoEiKpEiO5EiSJFmSJVmSJVmS5omqLMuyLMuyLMsyEBqyCgBIAABQUQxFcRQHCA1ZBQBkAAAIoDiKpViKpWiK54iOCISGrAIAgAAABAAAEDRDUzxHlETPVFXXtm3btm3btm3btm3btm1blmUZCA1ZBQBAAAAQ0mlmqQaIMAMZBkJDVgEACAAAgBGKMMSA0JBVAABAAACAGEoOogmtOd+c46BZDppKsTkdnEi1eZKbirk555xzzsnmnDHOOeecopxZDJoJrTnnnMSgWQqaCa0555wnsXnQmiqtOeeccc7pYJwRxjnnnCateZCajbU555wFrWmOmkuxOeecSLl5UptLtTnnnHPOOeecc84555zqxekcnBPOOeecqL25lpvQxTnnnE/G6d6cEM4555xzzjnnnHPOOeecIDRkFQAABABAEIaNYdwpCNLnaCBGEWIaMulB9+gwCRqDnELq0ehopJQ6CCWVcVJKJwgNWQUAAAIAQAghhRRSSCGFFFJIIYUUYoghhhhyyimnoIJKKqmooowyyyyzzDLLLLPMOuyssw47DDHEEEMrrcRSU2011lhr7jnnmoO0VlprrbVSSimllFIKQkNWAQAgAAAEQgYZZJBRSCGFFGKIKaeccgoqqIDQkFUAACAAgAAAAABP8hzRER3RER3RER3RER3R8RzPESVREiVREi3TMjXTU0VVdWXXlnVZt31b2IVd933d933d+HVhWJZlWZZlWZZlWZZlWZZlWZYgNGQVAAACAAAghBBCSCGFFFJIKcYYc8w56CSUEAgNWQUAAAIACAAAAHAUR3EcyZEcSbIkS9IkzdIsT/M0TxM9URRF0zRV0RVdUTdtUTZl0zVdUzZdVVZtV5ZtW7Z125dl2/d93/d93/d93/d93/d9XQdCQ1YBABIAADqSIymSIimS4ziOJElAaMgqAEAGAEAAAIriKI7jOJIkSZIlaZJneZaomZrpmZ4qqkBoyCoAABAAQAAAAAAAAIqmeIqpeIqoeI7oiJJomZaoqZoryqbsuq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq4LhIasAgAkAAB0JEdyJEdSJEVSJEdygNCQVQCADACAAAAcwzEkRXIsy9I0T/M0TxM90RM901NFV3SB0JBVAAAgAIAAAAAAAAAMybAUy9EcTRIl1VItVVMt1VJF1VNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVN0zRNEwgNWQkAkAEAkBBTLS3GmgmLJGLSaqugYwxS7KWxSCpntbfKMYUYtV4ah5RREHupJGOKQcwtpNApJq3WVEKFFKSYYyoVUg5SIDRkhQAQmgHgcBxAsixAsiwAAAAAAAAAkDQN0DwPsDQPAAAAAAAAACRNAyxPAzTPAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAA0DwP8DwR8EQRAAAAAAAAACzPAzTRAzxRBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAAsDwP8EQR0DwRAAAAAAAAACzPAzxRBDzRAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAEOAAABBgIRQasiIAiBMAcEgSJAmSBM0DSJYFTYOmwTQBkmVB06BpME0AAAAAAAAAAAAAJE2DpkHTIIoASdOgadA0iCIAAAAAAAAAAAAAkqZB06BpEEWApGnQNGgaRBEAAAAAAAAAAAAAzzQhihBFmCbAM02IIkQRpgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAGHAAAAgwoQwUGrIiAIgTAHA4imUBAIDjOJYFAACO41gWAABYliWKAABgWZooAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAYcAAACDChDBQashIAiAIAcCiKZQHHsSzgOJYFJMmyAJYF0DyApgFEEQAIAAAocAAACLBBU2JxgEJDVgIAUQAABsWxLE0TRZKkaZoniiRJ0zxPFGma53meacLzPM80IYqiaJoQRVE0TZimaaoqME1VFQAAUOAAABBgg6bE4gCFhqwEAEICAByKYlma5nmeJ4qmqZokSdM8TxRF0TRNU1VJkqZ5niiKommapqqyLE3zPFEURdNUVVWFpnmeKIqiaaqq6sLzPE8URdE0VdV14XmeJ4qiaJqq6roQRVE0TdNUTVV1XSCKpmmaqqqqrgtETxRNU1Vd13WB54miaaqqq7ouEE3TVFVVdV1ZBpimaaqq68oyQFVV1XVdV5YBqqqqruu6sgxQVdd1XVmWZQCu67qyLMsCAAAOHAAAAoygk4wqi7DRhAsPQKEhKwKAKAAAwBimFFPKMCYhpBAaxiSEFEImJaXSUqogpFJSKRWEVEoqJaOUUmopVRBSKamUCkIqJZVSAADYgQMA2IGFUGjISgAgDwCAMEYpxhhzTiKkFGPOOScRUoox55yTSjHmnHPOSSkZc8w556SUzjnnnHNSSuacc845KaVzzjnnnJRSSuecc05KKSWEzkEnpZTSOeecEwAAVOAAABBgo8jmBCNBhYasBABSAQAMjmNZmuZ5omialiRpmud5niiapiZJmuZ5nieKqsnzPE8URdE0VZXneZ4oiqJpqirXFUXTNE1VVV2yLIqmaZqq6rowTdNUVdd1XZimaaqq67oubFtVVdV1ZRm2raqq6rqyDFzXdWXZloEsu67s2rIAAPAEBwCgAhtWRzgpGgssNGQlAJABAEAYg5BCCCFlEEIKIYSUUggJAAAYcAAACDChDBQashIASAUAAIyx1lprrbXWQGettdZaa62AzFprrbXWWmuttdZaa6211lJrrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmstpZRSSimllFJKKaWUUkoppZRSSgUA+lU4APg/2LA6wknRWGChISsBgHAAAMAYpRhzDEIppVQIMeacdFRai7FCiDHnJKTUWmzFc85BKCGV1mIsnnMOQikpxVZjUSmEUlJKLbZYi0qho5JSSq3VWIwxqaTWWoutxmKMSSm01FqLMRYjbE2ptdhqq7EYY2sqLbQYY4zFCF9kbC2m2moNxggjWywt1VprMMYY3VuLpbaaizE++NpSLDHWXAAAd4MDAESCjTOsJJ0VjgYXGrISAAgJACAQUooxxhhzzjnnpFKMOeaccw5CCKFUijHGnHMOQgghlIwx5pxzEEIIIYRSSsaccxBCCCGEkFLqnHMQQgghhBBKKZ1zDkIIIYQQQimlgxBCCCGEEEoopaQUQgghhBBCCKmklEIIIYRSQighlZRSCCGEEEIpJaSUUgohhFJCCKGElFJKKYUQQgillJJSSimlEkoJJYQSUikppRRKCCGUUkpKKaVUSgmhhBJKKSWllFJKIYQQSikFAAAcOAAABBhBJxlVFmGjCRcegEJDVgIAZAAAkKKUUiktRYIipRikGEtGFXNQWoqocgxSzalSziDmJJaIMYSUk1Qy5hRCDELqHHVMKQYtlRhCxhik2HJLoXMOAAAAQQCAgJAAAAMEBTMAwOAA4XMQdAIERxsAgCBEZohEw0JweFAJEBFTAUBigkIuAFRYXKRdXECXAS7o4q4DIQQhCEEsDqCABByccMMTb3jCDU7QKSp1IAAAAAAADADwAACQXAAREdHMYWRobHB0eHyAhIiMkAgAAAAAABcAfAAAJCVAREQ0cxgZGhscHR4fICEiIyQBAIAAAgAAAAAggAAEBAQAAAAAAAIAAAAEBB9DtnUBAAAAAAAEPueBAKOFggAAgACjzoEAA4BwBwCdASqwAJAAAEcIhYWIhYSIAgIABhwJ7kPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99YAD+/6tQgKOFggADgAqjhYIAD4AOo4WCACSADqOZgQArADECAAEQEAAYABhYL/QACIBDmAYAAKOFggA6gA6jhYIAT4AOo5mBAFMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAGSADqOFggB6gA6jmYEAewAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAj4AOo5mBAKMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAKSADqOFggC6gA6jmYEAywAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAz4AOo4WCAOSADqOZgQDzADECAAEQEAAYABhYL/QACIBDmAYAAKOFggD6gA6jhYIBD4AOo5iBARsAEQIAARAQFGAAYWC/0AAiAQ5gGACjhYIBJIAOo4WCATqADqOZgQFDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggFPgA6jhYIBZIAOo5mBAWsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAXqADqOFggGPgA6jmYEBkwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIBpIAOo4WCAbqADqOZgQG7ADECAAEQEAAYABhYL/QACIBDmAYAAKOFggHPgA6jmYEB4wAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIB5IAOo4WCAfqADqOZgQILADECAAEQEAAYABhYL/QACIBDmAYAAKOFggIPgA6jhYICJIAOo5mBAjMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAjqADqOFggJPgA6jmYECWwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYICZIAOo4WCAnqADqOZgQKDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggKPgA6jhYICpIAOo5mBAqsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCArqADqOFggLPgA6jmIEC0wARAgABEBAUYABhYL/QACIBDmAYAKOFggLkgA6jhYIC+oAOo5mBAvsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAw+ADqOZgQMjADECAAEQEAAYABhYL/QACIBDmAYAAKOFggMkgA6jhYIDOoAOo5mBA0sAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA0+ADqOFggNkgA6jmYEDcwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIDeoAOo4WCA4+ADqOZgQObADECAAEQEAAYABhYL/QACIBDmAYAAKOFggOkgA6jhYIDuoAOo5mBA8MAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA8+ADqOFggPkgA6jhYID+oAOo4WCBA+ADhxTu2sBAAAAAAAAEbuPs4EDt4r3gQHxghEr8IEK"},MIME_TYPES:{image:["image/gif","image/jpeg","image/pjpeg","image/png","image/svg+xml","image/tiff","image/vnd.microsoft.icon","image/vnd.wap.wbmp","image/webp"],audio:["audio/basic","audio/L24","audio/mp4","audio/aac","audio/mpeg","audio/ogg","audio/ogg; codecs=opus","audio/ogg; codecs=opus+voice","audio/vorbis","audio/x-ms-wma","audio/x-ms-wax","audio/vnd.rn-realaudio","audio/vnd.wave","audio/webm","audio/x-wav"],video:["video/mpeg","video/mp4","video/ogg","video/quicktime","video/webm","video/x-ms-wmv","video/x-flv","video/3gpp","video/3gpp2"],document:["text/cmd","text/css","text/csv","text/html","text/javascript (Obsolete)","text/plain","text/php","text/xml","text/markdown","text/cache-manifestapplication/json","application/xml","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.graphics","application/msword"],pdf:["application/pdf"],table:["application/vnd.oasis.opendocument.spreadsheet","application/vnd.ms-excel"],archive:["application/zip","application/gzip","application/x-rar-compressed","application/x-tar","application/x-7z-compressed"],presentation:["application/vnd.ms-powerpoint","application/vnd.oasis.opendocument.presentation"]},languages:{en:"English","ar-SA":"العربية","az-AZ":"Azərbaycanca","be-BY":"Беларуская","bg-BG":"Български","bs-BA":"Bosanski","ca-ES":"Català","cs-CZ":"Čeština","cy-GB":"Cymraeg","da-DK":"Dansk","de-DE":"Deutsch","el-GR":"Ελληνικά",es419:"Spanish Latin America","es-ES":"Español","et-EE":"Eesti","fa-IR":"فارسی","fi-FI":"Suomi","fil-PH":"Pilipino","fr-FR":"Français","ga-IE":"Gaeilge",he:"עברית","hi-IN":"हिन्दी","hr-HR":"Hrvatski","hu-HU":"Magyar","hy-AM":"Հայերեն","in-ID":"Bahasa Indonesia","is-IS":"Íslenska","it-IT":"Italiano","ja-JP":"日本語","ka-GE":"ქართული","kmr-TR":"Kurmancî (Kurdî)","ko-KR":"한국어","ku-TR":"Kurdî","ky-KG":"Кыргызча","la-LA":"Latina","lb-LU":"Luxembourgish","lt-LT":"Lietuvių","mk-MK":"Македонски","mn-MN":"Монгол","mr-IN":"मराठी","ms-MY":"Bahasa Melayu","nb-NO":"Norsk (bokmål)","ne-NP":"Nepālī","nl-NL":"Nederlands","no-NO":"Norsk (nynorsk)","oc-FR":"Occitan","pa-IN":"ਪੰਜਾਬੀ (ਗੁਰਮੁਖੀ)","pl-PL":"Polski","pt-BR":"Português, brasileiro","pt-PT":"Português","qya-AA":"quenya","ro-RO":"Română","ru-RU":"Русский","sco-GB":"Scots","si-LK":"සිංහල","sk-SK":"Slovenčina","sl-SI":"Slovenščina","sq-AL":"Shqip","sr-Cyrl-ME":"Montenegrin (Cyrillic)","sr-SP":"Српски / Srpski","sv-SE":"Svenska","sw-KE":"Kiswahili","ta-IN":"தமிழ்","te-IN":"తెలుగు","tg-TJ":"Тоҷикӣ","tk-TM":"Türkmençe","tlh-AA":"Klingon","tr-TR":"Türkçe","uk-UA":"Українська","uz-UZ":"Oʻzbekcha / Ўзбекча","vi-VN":"Tiếng Việt","yo-NG":"Yorùbá","zh-CN":"简体中文","zh-TW":"中國傳統的","zu-ZA":"isiZulu"},languages_another_locales:{es419:"es-latin","in-ID":"id"},PERSONAL_AREA_URL:{},XABBER_ACCOUNT_URL:"https://www.xabber.com/account",USE_SOCIAL_AUTH:!0,USE_TAB_SIGNALS:!0,REGISTER_XMPP_ACCOUNT:!0,REGISTER_XMPP_ACCOUNT_URL:"https://www.xabber.com/account/auth/signup/",CHECK_VERSION:!0,DESKTOP_AUTOSTART_OPTION:!1,DEFAULT_LOGIN_SCREEN:"xmpp",GCM_SENDER_ID:"868637702480",GCM_API_KEY:"AIzaSyC1JCBB3LLf_4DG_vRWMEEe0I4X5msEU-M",MESSAGE_ARCHIVE_DB_NAME:"MessageArchive",STANZA_MAX_SIZE:Math.pow(2,16),BLUR_VALUE:25,VIGNETTING_VALUE:128,TRANSPARENCY_VALUE:50,MAIN_COLOR:"red",CLIENT_NAME:"Xabber for Web",CLIENT_RESOURCE:"xabber-web",SHORT_CLIENT_NAME:"Xabber",SHORT_CLIENT_DESCRIPTION:"World’s best XMPP experience",CLIENT_LOGO:"assets/images/xabber-logo-96.png",TOOLBAR_LOGO:"assets/images/xabber-logo.png",ENABLE_XABBER_ACCOUNT:!1,SCREEN_ABOUT:!0,BACKGROUND_IMAGES_XML_URL:"https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/background-images.xml",BACKGROUND_PATTERNS_XML_URL:"https://raw.githubusercontent.com/redsolution/xabber-backgrounds/master/background-patterns.xml",DEVELOPER_URL:"https://redsolution.com",CLIENT_GITHUB_URL:"https://github.com/redsolution/xabber-web",PROJECT_CROWDIN_URL:"https://crowdin.com/project/xabber",CLIENT_LICENSE_GITHUB_URL:"https://github.com/redsolution/xabber-web/blob/master/LICENSE",DEFAULT_EMOJI_FONT:"system",JINGLE_MSG_STATE:{}};s.JINGLE_MSG_STATE[s.JINGLE_MSG_REJECT]="reject",s.JINGLE_MSG_STATE[s.JINGLE_MSG_PROPOSE]="propose",s.JINGLE_MSG_STATE[s.JINGLE_MSG_ACCEPT]="accept",s.MSG_STATE={},s.MSG_STATE[s.MSG_ERROR]="error",s.MSG_STATE[s.MSG_PENDING]="pending",s.MSG_STATE[s.MSG_SENT]="sent",s.MSG_STATE[s.MSG_DELIVERED]="delivered",s.MSG_STATE[s.MSG_DISPLAYED]="displayed",s.MSG_STATE[s.MSG_ARCHIVED]="archived",s.MSG_STATE[s.MSG_BLOCKED]="not-allowed",s.MSG_STATE[s.MSG_SAVED]="saved",s.MSG_VERBOSE_STATE={},s.MSG_VERBOSE_STATE[s.MSG_ERROR]="message__delivering_state__error",s.MSG_VERBOSE_STATE[s.MSG_PENDING]="message__delivering_state__pending",s.MSG_VERBOSE_STATE[s.MSG_SENT]="message__delivering_state__sent",s.MSG_VERBOSE_STATE[s.MSG_DELIVERED]="message__delivering_state__delivered",s.MSG_VERBOSE_STATE[s.MSG_DISPLAYED]="message__delivering_state__displayed",s.MSG_VERBOSE_STATE[s.MSG_ARCHIVED]="message__delivering_state__archived",s.MSG_VERBOSE_STATE[s.MSG_BLOCKED]="message__delivering_state__error",s.MSG_VERBOSE_STATE[s.MSG_SAVED]="message__delivering_state__saved",s.EMOJI_FONTS_LIST={notoColor:{name:"NotoColorEmoji",value:"notoColor",url:"assets/fonts/notocolor/NotoColorEmoji-Regular.ttf",hint:`23 MiB download from ${window.location.hostname}`,attribution_text:'<p>Noto Emoji (Stands for No Tofu) is an <a href="https://github.com/googlefonts/noto-emoji" target="_blank">open source</a> emoji library developed by <a href="https://google.com/" target="_blank">Google</a>.</p><p>Version: 2.042</p><p>License: <a href="https://github.com/googlefonts/noto-emoji/blob/main/fonts/LICENSE" target="_blank">SIL Open Font License 1.1</a></p>',order:0}};const n=s},56214:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>Fs});i(72316);var s=i(13469),n=i.n(s),a=i(19755),o=i.n(a),r=i(56623),c=i.n(r),l=i(21796),d=i.n(l),h=i(63811),g=i.n(h),u=i(72023),p=i.n(u),m=i(57729),v=i.n(m),f=i(58675),b=i.n(f),A=i(49798),w=i.n(A),y=i(52881),x=i.n(y),k=i(72466),C=i(52014),S=i(96762),I=i(4824),E=i.n(I),T=i(1161),M=i.n(T),L=i(20620),B=i(98745),N=i(80395),j=i.n(N),R=i(84028),O=i.n(R),D=i(61877),F=i.n(D),U=i(24063);i(56937),i(33992),i(81670),i(37067),i(67144),i(36993),i(92697),i(93606),i(27069);const P=n().extend({$:o(),_:n(),moment:c(),WaveSurfer:d(),Plyr:k.Z,Quill:C.Z,libsignal:S.Z,slug:g(),sha1:E(),idleJs:j(),opusRecorder:M(),opusRecorderEncoderPath:L.Z,xabber_i18next:b(),xabber_i18next_sprintf:w(),sha256:p(),curve25519js:{sharedKeyCurve:U.gi,signCurve:U.Xx,verifyCurve:U.T},VanillaQR:B.Z,magnificPopup:v(),backgroundImagesXml:O(),backgroundPatternsXml:F(),Strophe:x()},x());var V=i(65279);n().templateSettings={evaluate:/\{\[([\s\S]+?)\]\}/g,interpolate:/\{\{([\s\S]+?)\}\}/g};let G={},z=function(e,t){t||(t={});let s=e.split("."),a=n().template(i(89293)("./"+s.join("/")+".html").default),r=s.pop(),c=G;n().each(s,(function(e){c[e]||(c[e]={}),c=c[e]})),t.is_svg?c[r]=a:c[r]=function(e){return function(e){let t=o()("<div/>").html(e);return t.find(".mdi-svg-template").each((function(){let e=o()(this),t=e.data("svgname");e.removeClass("mdi-svg-template").addClass("mdi-"+t).attr("data-svgname",null),e.html(G.svg[t]())})),t.html()}(a(e))}},H=function(e){z(e,{is_svg:!1})},q=function(e){z(e,{is_svg:!0})};H("base.dialog"),H("base.fingerprints"),H("base.fingerprints_devices"),H("base.fingerprint_item"),H("base.fingerprint_devices_item"),H("base.incoming_trust_session"),H("base.jingle_message_calling"),H("base.plyr_player_popup"),H("base.input_widget"),H("base.toolbar"),H("base.settings"),H("base.settings_modal"),H("base.setting_radio_input"),H("base.setting_emoji_font_radio_input"),H("base.setting_language_radio_input"),H("base.about"),H("base.omemo_enable"),H("base.backgrounds_gallery"),H("base.color_picker"),H("base.color_scheme"),H("accounts.xmpp_login"),H("accounts.add_account"),H("accounts.unregister_account"),H("accounts.change_password"),H("accounts.change_account_password"),H("accounts.toolbar_item"),H("accounts.media_gallery_account_file"),H("accounts.media_gallery_account"),H("accounts.delete_files_media_gallery"),H("accounts.single_account_settings_modal"),H("accounts.account_settings_modal"),H("accounts.trust_item_peer"),H("accounts.trust_item_device"),H("accounts.existing_groupchat_item"),H("accounts.resource"),H("accounts.resource_right"),H("accounts.webcam_panel"),H("accounts.emoji_panel"),H("accounts.emoji_picker"),H("accounts.emoji_picker_tabs"),H("accounts.global_settings_item_modal"),H("accounts.change_status"),H("accounts.token_item_modal"),H("accounts.current_token_item_modal"),H("accounts.audio_file_waveform"),H("accounts.avatars_gallery"),H("accounts.status_message_input_widget"),H("vcard.vcard"),H("vcard.vcard_modal"),H("vcard.vcard_edit_modal"),H("vcard.vcard_right"),H("searching.searching_wide"),H("searching.searching_account_item"),H("searching.existing_groupchat_item"),H("searching.existing_groupchat_details_view"),H("contacts.roster_right"),H("contacts.roster_left"),H("contacts.account_roster_right"),H("contacts.account_roster_left"),H("contacts.group_right"),H("contacts.group_left"),H("contacts.add_contact"),H("contacts.contact_right_item"),H("contacts.contact_left_item"),H("contacts.contact_blocked_item"),H("contacts.contact_details_right"),H("contacts.roster_settings"),H("contacts.group_settings"),H("contacts.groups_checkbox_list"),H("contacts.groups_checkbox_list_contact"),H("contacts.groups_new_group"),H("contacts.groups_list"),H("contacts.add_contact_account_item"),H("contacts.contact_placeholder"),H("contacts.groups"),H("contacts.edit_contact"),H("contacts.edit_group"),H("contacts.preloader"),H("contacts.media_item"),H("contacts.media_items_empty"),H("contacts.audio_file_waveform"),H("contacts.group_chats.group_chat_properties"),H("contacts.group_chats.group_chat_properties_right"),H("contacts.group_chats.group_chat_details"),H("contacts.group_chats.group_chat_details_right"),H("contacts.group_chats.invitation"),H("contacts.group_chats.group_chat_properties_edit"),H("contacts.group_chats.default_restrictions"),H("contacts.group_chats.default_restrictions_right"),H("contacts.group_chats.group_member_item"),H("contacts.group_chats.group_member_item_right"),H("contacts.group_chats.description_input_widget"),H("contacts.group_chats.group_name_input_widget"),H("contacts.group_chats.participant_badge_input_widget"),H("contacts.group_chats.invited_member_item"),H("contacts.group_chats.add_blocked_participant_form"),H("contacts.group_chats.participant_details_right"),H("contacts.group_chats.participant_rights"),H("contacts.group_chats.restriction_item"),H("contacts.group_chats.right_expire_variants"),H("contacts.group_chats.pinned_message"),H("contacts.group_chats.participant_details_item_right"),H("contacts.group_chats.participant_details_item"),H("contacts.group_chats.participants"),H("contacts.group_chats.participants_right_panel"),H("contacts.group_chats.badge_edit_view"),H("contacts.group_chats.private_participant_details"),H("contacts.group_chats.private_participant_details_item_right"),H("contacts.group_chats.set_status"),H("contacts.group_chats.status_item"),H("contacts.group_chats.group_status"),H("contacts.group_chats.group_status_right"),H("contacts.group_chats.file_item"),H("chats.chats_panel"),H("chats.add_chat_account_item"),H("chats.chat_item"),H("chats.chat_head"),H("chats.send_media"),H("chats.saved_chat_head"),H("chats.chat_content"),H("chats.chat_content_placeholder"),H("chats.chat_content_contact"),H("chats.chat_bottom"),H("chats.unread_marker"),H("chats.location_popup"),H("chats.subscription_buttons"),H("chats.forward_panel"),H("chats.chat_placeholder"),H("chats.message_item"),H("chats.messages.main"),H("chats.messages.searched"),H("chats.messages.forwarded"),H("chats.messages.system"),H("chats.messages.file_upload"),H("chats.messages.loading_circle"),H("chats.messages.file"),H("chats.messages.file_loading"),H("chats.messages.link_reference"),H("chats.messages.link_reference_chat"),H("chats.messages.attached_file"),H("chats.messages.video"),H("chats.messages.location"),H("chats.messages.audio_file"),H("chats.messages.audio_file_waveform"),H("chats.messages.auth_request"),H("chats.messages.group_request"),H("chats.messages.template-for-2"),H("chats.messages.template-for-3"),H("chats.messages.template-for-4"),H("chats.messages.template-for-5"),H("chats.messages.template-for-6"),H("chats.messages.hidden-template-for-2"),H("chats.messages.hidden-template-for-3"),H("chats.messages.hidden-template-for-4"),H("chats.messages.hidden-template-for-5"),H("chats.messages.hidden-template-for-6"),H("chats.messages.images_details"),H("chats.messages.saved_main"),H("chats.group_chats.pinned_message_panel"),H("chats.group_chats.add_group_chat"),H("chats.group_chats.invitation_panel_view"),H("chats.group_chats.mention_item"),H("chats.encryption_warning"),H("chats.content_encryption_warning"),H("chats.ephemeral_timer_selector"),H("chats.export_history"),H("notifications.notifications_view"),H("notifications.account_filter_item"),H("notifications.current_verification_sessions"),H("notifications.verification_session"),H("mentions.mentions_panel"),H("mentions.mentions_placeholder"),H("mentions.mention_item"),q("svg.ic-jabber"),q("svg.xmpp"),q("svg.account-outline"),q("svg.qrcode"),q("svg.code"),q("svg.group-public-add"),q("svg.heart-circle"),q("svg.bank-circle"),q("svg.id-outline"),q("svg.clock-outline"),q("svg.index"),q("svg.restrictions-outline"),q("svg.history"),q("svg.chevron-down"),q("svg.camera"),q("svg.camera-retake"),q("svg.vcard"),q("svg.membership"),q("svg.membership-outline"),q("svg.invite"),q("svg.invite-outline"),q("svg.chevron-right-variant"),q("svg.chevron-left-variant"),q("svg.subscription-to"),q("svg.subscription-from"),q("svg.image"),q("svg.file-audio"),q("svg.file-video"),q("svg.file-document"),q("svg.file-presentation"),q("svg.file-zip"),q("svg.file"),q("svg.file-pdf"),q("svg.close"),q("svg.link"),q("svg.picture-in-picture-minimize"),q("svg.picture-in-picture-bottom-right"),q("svg.picture-in-picture-top-right"),q("svg.pause"),q("svg.volume-off"),q("svg.volume-high"),q("svg.plyr"),q("svg.plus"),q("svg.player-float"),q("svg.player-full"),q("svg.player-mini-variant"),q("svg.player-mini"),q("svg.message-bookmark-outline"),q("svg.play"),q("svg.video"),q("svg.cancel"),q("svg.status"),q("svg.status-outline"),q("svg.birthday"),q("svg.birthday-outline"),q("svg.web"),q("svg.xmpp"),q("svg.job"),q("svg.job-outline"),q("svg.address"),q("svg.address-outline"),q("svg.email"),q("svg.email-outline"),q("svg.description"),q("svg.description-outline"),q("svg.contact-add"),q("svg.check"),q("svg.call-outline"),q("svg.call"),q("svg.search"),q("svg.device-cellphone"),q("svg.device-console"),q("svg.device-desktop"),q("svg.device-tablet"),q("svg.device-web"),q("svg.devices"),q("svg.bell"),q("svg.bell-sleep"),q("svg.bell-off"),q("svg.cancel"),q("svg.trash"),q("svg.client"),q("svg.client-outline"),q("svg.database-lock"),q("svg.index"),q("svg.bug"),q("svg.cloud"),q("svg.key"),q("svg.key-variant"),q("svg.account"),q("svg.alert"),q("svg.alert-circle"),q("svg.security"),q("svg.edit"),q("svg.edit-outline"),q("svg.check-circle"),q("svg.blocked-add"),q("svg.information-outline"),q("svg.information"),q("svg.fullname"),q("svg.fullname-outline"),q("svg.ic-at"),q("svg.ic-searching"),q("svg.blocked"),q("svg.bot"),q("svg.bot-variant"),q("svg.group-incognito"),q("svg.group-invite"),q("svg.group-public"),q("svg.task"),q("svg.group-private"),q("svg.channel"),q("svg.rss"),q("svg.rss-variant"),q("svg.server"),q("svg.volume-off-variant"),q("svg.message-group"),q("svg.xabber-offline"),q("svg.xabber-online"),q("svg.saved-messages"),q("svg.account-cancel"),q("svg.web-cancel"),q("svg.palette"),q("svg.chat"),q("svg.star-face"),q("svg.alarm-bell"),q("svg.id"),q("svg.expires"),q("svg.database"),q("svg.download"),q("svg.lock"),q("svg.lock-open"),q("svg.lock-alert"),q("svg.lock-check"),q("svg.lock-cross"),q("svg.lock-question"),q("svg.circles"),q("svg.circles-outline"),q("svg.circle-slice-1"),q("svg.circle-slice-2"),q("svg.circle-slice-3"),q("svg.circle-slice-4"),q("svg.circle-slice-5"),q("svg.circle-slice-6"),q("svg.circle-slice-7"),q("svg.circle-slice-8"),q("svg.translate"),q("svg.trash"),q("svg.crosshairs-gps"),q("svg.crosshairs-question"),q("svg.crosshairs"),q("svg.map-marker-outline"),q("svg.map-marker"),q("svg.minus"),function(e){let t=e.split("."),s=i(92444)("./"+t.join("/")+".json"),a=t.pop(),o=G;n().each(t,(function(e){o[e]||(o[e]={}),o=o[e]})),o[a]=s}("accounts.emojis");const Y=G;let Q={},Z=i(98086),J=[];Object.keys(Z).forEach((e=>{let t=i(10253)(`./${e}/${e}.mp3`),s={file_name:e,name:Z[e].name,audio:t,not_selectable:Z[e].not_selectable};J.push(s)}));let K=i(19093),W=[];Object.keys(K).forEach((e=>{let t=i(90683)(`./${e}/${e}.mp3`),s={file_name:e,name:K[e].name,audio:t,not_selectable:K[e].not_selectable};W.push(s)}));let X=i(40591),ee=[];Object.keys(X).forEach((e=>{let t=i(81089)(`./${e}/${e}.mp3`),s={file_name:e,name:X[e].name,audio:t,not_selectable:X[e].not_selectable};ee.push(s)}));let te=i(9391),ie=[];Object.keys(te).forEach((e=>{let t=i(60255)(`./${e}/${e}.mp3`),s={file_name:e,name:te[e].name,audio:t,not_selectable:te[e].not_selectable};ie.push(s)}));let se=i(86934),ne=[];Object.keys(se).forEach((e=>{let t=i(60623)(`./${e}/${e}.mp3`),s={file_name:e,name:se[e].name,audio:t,not_selectable:se[e].not_selectable};ne.push(s)})),Q.attention=J,Q.ringtones=W,Q.dialtones=ee,Q.notifications=ie,Q.system=ne,Q.all_sounds=J.concat(W).concat(ee).concat(ie).concat(ne);const ae=Q;var oe={smiles_and_people:[{code:128512,x:9,y:3},{code:128515,x:12,y:3},{code:128516,x:13,y:3},{code:128513,x:10,y:3},{code:128518,x:1,y:4},{code:128517,x:0,y:4},{code:129315,x:6,y:10},{code:128514,x:11,y:3},{code:128578,x:5,y:8},{code:128579,x:6,y:8},{code:128521,x:4,y:4},{code:128522,x:5,y:4},{code:128519,x:2,y:4},{code:128525,x:8,y:4},{code:129321,x:12,y:10},{code:128535,x:4,y:5},{code:9786,x:14,y:5},{code:128538,x:7,y:5},{code:128537,x:6,y:5},{code:128523,x:6,y:4},{code:128539,x:8,y:5},{code:128540,x:9,y:5},{code:129322,x:13,y:10},{code:128541,x:10,y:5},{code:129297,x:10,y:9},{code:129303,x:2,y:10},{code:129325,x:2,y:11},{code:129323,x:0,y:11},{code:129300,x:13,y:9},{code:129296,x:9,y:9},{code:129320,x:11,y:10},{code:128528,x:11,y:4},{code:128529,x:12,y:4},{code:128566,x:7,y:7},{code:128527,x:10,y:4},{code:128530,x:13,y:4},{code:128580,x:7,y:8},{code:128556,x:11,y:6},{code:129317,x:8,y:10},{code:128524,x:7,y:4},{code:128532,x:1,y:5},{code:128554,x:9,y:6},{code:129316,x:7,y:10},{code:128564,x:5,y:7},{code:128567,x:8,y:7},{code:129298,x:11,y:9},{code:129301,x:0,y:10},{code:129314,x:5,y:10},{code:129326,x:3,y:11},{code:129319,x:10,y:10},{code:129397,x:7,y:12},{code:129398,x:8,y:12},{code:129396,x:6,y:12},{code:128565,x:6,y:7},{code:129327,x:4,y:11},{code:129312,x:3,y:10},{code:129395,x:5,y:12},{code:128526,x:9,y:4},{code:129299,x:12,y:9},{code:129488,x:1,y:13},{code:128533,x:2,y:5},{code:128543,x:12,y:5},{code:128577,x:4,y:8},{code:9785,x:14,y:4},{code:128558,x:13,y:6},{code:128559,x:0,y:7},{code:128562,x:3,y:7},{code:128563,x:4,y:7},{code:129402,x:9,y:12},{code:128550,x:5,y:6},{code:128551,x:6,y:6},{code:128552,x:7,y:6},{code:128560,x:1,y:7},{code:128549,x:4,y:6},{code:128546,x:1,y:6},{code:128557,x:12,y:6},{code:128561,x:2,y:7},{code:128534,x:3,y:5},{code:128547,x:2,y:6},{code:128542,x:11,y:5},{code:128531,x:0,y:5},{code:128553,x:8,y:6},{code:128555,x:10,y:6},{code:128548,x:3,y:6},{code:128545,x:0,y:6},{code:128544,x:13,y:5},{code:129324,x:1,y:11},{code:128520,x:3,y:4},{code:128127,x:9,y:2},{code:128128,x:10,y:2},{code:9760,x:14,y:3},{code:128169,x:4,y:3},{code:129313,x:4,y:10},{code:128121,x:3,y:2},{code:128122,x:4,y:2},{code:128123,x:5,y:2},{code:128125,x:7,y:2},{code:128126,x:8,y:2},{code:129302,x:1,y:10},{code:128570,x:11,y:7},{code:128568,x:9,y:7},{code:128569,x:10,y:7},{code:128571,x:12,y:7},{code:128572,x:13,y:7},{code:128573,x:0,y:8},{code:128576,x:3,y:8},{code:128575,x:2,y:8},{code:128574,x:1,y:8},{code:128584,x:11,y:8},{code:128585,x:12,y:8},{code:128586,x:13,y:8},{code:128118,x:0,y:2},{code:129490,x:3,y:13},{code:128102,x:12,y:0},{code:128103,x:13,y:0},{code:128113,x:9,y:1},{code:129492,x:5,y:13},{code:129491,x:4,y:13},{code:128116,x:12,y:1},{code:128117,x:13,y:1},{code:128589,x:1,y:9},{code:128590,x:2,y:9},{code:128581,x:8,y:8},{code:128582,x:9,y:8},{code:128129,x:11,y:2},{code:128587,x:0,y:9},{code:128583,x:10,y:8},{code:129318,x:9,y:10},{code:129335,x:10,y:11},{code:128110,x:6,y:1},{code:128373,x:6,y:3},{code:128130,x:12,y:2},{code:128119,x:1,y:2},{code:129332,x:7,y:11},{code:128120,x:2,y:2},{code:128115,x:11,y:1},{code:128114,x:10,y:1},{code:129493,x:6,y:13},{code:129333,x:8,y:11},{code:128112,x:8,y:1},{code:129328,x:5,y:11},{code:129329,x:6,y:11},{code:128124,x:6,y:2},{code:127877,x:0,y:0},{code:129334,x:9,y:11},{code:129464,x:10,y:12},{code:129465,x:11,y:12},{code:129497,x:10,y:13},{code:129498,x:11,y:13},{code:129499,x:12,y:13},{code:129500,x:13,y:13},{code:129501,x:14,y:0},{code:129502,x:14,y:1},{code:129503,x:14,y:2},{code:128134,x:0,y:3},{code:128135,x:1,y:3},{code:128694,x:6,y:9},{code:127939,x:2,y:0},{code:128131,x:13,y:2},{code:128378,x:7,y:3},{code:128372,x:5,y:3},{code:128111,x:7,y:1},{code:129494,x:7,y:13},{code:129495,x:8,y:13},{code:129338,x:13,y:11},{code:127943,x:4,y:0},{code:9975,x:14,y:6},{code:127938,x:1,y:0},{code:127948,x:7,y:0},{code:127940,x:3,y:0},{code:128675,x:3,y:9},{code:127946,x:5,y:0},{code:9977,x:14,y:7},{code:127947,x:6,y:0},{code:128692,x:4,y:9},{code:128693,x:5,y:9},{code:129336,x:11,y:11},{code:129340,x:0,y:12},{code:129341,x:1,y:12},{code:129342,x:2,y:12},{code:129337,x:12,y:11},{code:129496,x:9,y:13},{code:128704,x:7,y:9},{code:128716,x:8,y:9},{code:128109,x:5,y:1},{code:128107,x:3,y:1},{code:128108,x:4,y:1},{code:128143,x:2,y:3},{code:128145,x:3,y:3},{code:128106,x:2,y:1},{code:128483,x:8,y:3},{code:128100,x:10,y:0},{code:128101,x:11,y:0},{code:128099,x:9,y:0}],body_and_clothes:[{code:128075,x:3,y:1},{code:129306,x:10,y:7},{code:128400,x:7,y:6},{code:9995,x:9,y:10},{code:128406,x:9,y:6},{code:128076,x:4,y:1},{code:9996,x:10,y:10},{code:129310,x:3,y:8},{code:129311,x:4,y:8},{code:129304,x:8,y:7},{code:129305,x:9,y:7},{code:128072,x:0,y:1},{code:128073,x:1,y:1},{code:128070,x:9,y:0},{code:128405,x:8,y:6},{code:128071,x:10,y:0},{code:9757,x:6,y:10},{code:128077,x:5,y:1},{code:128078,x:6,y:1},{code:9994,x:8,y:10},{code:128074,x:2,y:1},{code:129307,x:0,y:8},{code:129308,x:1,y:8},{code:128079,x:7,y:1},{code:128588,x:2,y:7},{code:128080,x:8,y:1},{code:129330,x:5,y:8},{code:129309,x:2,y:8},{code:128591,x:3,y:7},{code:9997,x:11,y:0},{code:128133,x:6,y:3},{code:129331,x:6,y:8},{code:128170,x:9,y:5},{code:129461,x:2,y:9},{code:129462,x:3,y:9},{code:128066,x:5,y:0},{code:128067,x:6,y:0},{code:129504,x:6,y:9},{code:129463,x:4,y:9},{code:129460,x:1,y:9},{code:128064,x:3,y:0},{code:128069,x:8,y:0},{code:128068,x:7,y:0},{code:128139,x:7,y:3},{code:128140,x:8,y:3},{code:128152,x:5,y:4},{code:128157,x:10,y:4},{code:128150,x:3,y:4},{code:128151,x:4,y:4},{code:128147,x:0,y:4},{code:128158,x:0,y:5},{code:128149,x:2,y:4},{code:128159,x:1,y:5},{code:10083,x:11,y:1},{code:128148,x:1,y:4},{code:10084,x:11,y:2},{code:129505,x:7,y:9},{code:128155,x:8,y:4},{code:128154,x:7,y:4},{code:128153,x:6,y:4},{code:128156,x:9,y:4},{code:128420,x:10,y:6},{code:128175,x:3,y:6},{code:128162,x:2,y:5},{code:128165,x:5,y:5},{code:128171,x:10,y:5},{code:128166,x:6,y:5},{code:128168,x:8,y:5},{code:128371,x:5,y:6},{code:128163,x:3,y:5},{code:128172,x:0,y:6},{code:128065,x:4,y:0},{code:128488,x:0,y:7},{code:128495,x:1,y:7},{code:128173,x:1,y:6},{code:128164,x:4,y:5},{code:128083,x:0,y:2},{code:128374,x:6,y:6},{code:129405,x:9,y:8},{code:129404,x:8,y:8},{code:128084,x:1,y:2},{code:128085,x:2,y:2},{code:128086,x:3,y:2},{code:129507,x:9,y:9},{code:129508,x:10,y:9},{code:129509,x:0,y:10},{code:129510,x:1,y:10},{code:128087,x:4,y:2},{code:128088,x:5,y:2},{code:128089,x:6,y:2},{code:128090,x:7,y:2},{code:128091,x:8,y:2},{code:128092,x:9,y:2},{code:128093,x:10,y:2},{code:128717,x:4,y:7},{code:127890,x:0,y:0},{code:128094,x:0,y:3},{code:128095,x:1,y:3},{code:129406,x:10,y:8},{code:129407,x:0,y:9},{code:128096,x:2,y:3},{code:128097,x:3,y:3},{code:128098,x:4,y:3},{code:128081,x:9,y:1},{code:128082,x:10,y:1},{code:127913,x:2,y:0},{code:127891,x:1,y:0},{code:129506,x:8,y:9},{code:9937,x:7,y:10},{code:128255,x:4,y:6},{code:128132,x:5,y:3},{code:128141,x:9,y:3},{code:128142,x:10,y:3}],animals_and_nature:[{code:128053,x:6,y:6},{code:128018,x:4,y:3},{code:129421,x:2,y:9},{code:128054,x:7,y:6},{code:128021,x:7,y:3},{code:128041,x:6,y:5},{code:128058,x:0,y:7},{code:129418,x:10,y:8},{code:129437,x:7,y:10},{code:128008,x:5,y:2},{code:129409,x:1,y:8},{code:128047,x:1,y:6},{code:128005,x:2,y:2},{code:128006,x:3,y:2},{code:128052,x:5,y:6},{code:128014,x:0,y:3},{code:129412,x:4,y:8},{code:129427,x:8,y:9},{code:129420,x:1,y:9},{code:128046,x:0,y:6},{code:128002,x:10,y:1},{code:128003,x:0,y:2},{code:128004,x:1,y:2},{code:128055,x:8,y:6},{code:128022,x:9,y:3},{code:128023,x:10,y:3},{code:128061,x:3,y:7},{code:128015,x:1,y:3},{code:128017,x:3,y:3},{code:128016,x:2,y:3},{code:128042,x:7,y:5},{code:128043,x:8,y:5},{code:129433,x:3,y:10},{code:129426,x:7,y:9},{code:128024,x:0,y:4},{code:129423,x:4,y:9},{code:129435,x:5,y:10},{code:128045,x:10,y:5},{code:128001,x:9,y:1},{code:128e3,x:8,y:1},{code:128057,x:10,y:6},{code:128048,x:2,y:6},{code:128007,x:4,y:2},{code:128063,x:5,y:7},{code:129428,x:9,y:9},{code:129415,x:7,y:8},{code:128059,x:1,y:7},{code:128040,x:5,y:5},{code:128060,x:2,y:7},{code:129432,x:2,y:10},{code:129441,x:11,y:0},{code:128062,x:4,y:7},{code:129411,x:3,y:8},{code:128020,x:6,y:3},{code:128019,x:5,y:3},{code:128035,x:0,y:5},{code:128036,x:1,y:5},{code:128037,x:2,y:5},{code:128038,x:3,y:5},{code:128039,x:4,y:5},{code:128330,x:7,y:7},{code:129413,x:5,y:8},{code:129414,x:6,y:8},{code:129442,x:11,y:1},{code:129417,x:9,y:8},{code:129434,x:4,y:10},{code:129436,x:6,y:10},{code:128056,x:9,y:6},{code:128010,x:7,y:2},{code:128034,x:10,y:4},{code:129422,x:3,y:9},{code:128013,x:10,y:2},{code:128050,x:3,y:6},{code:128009,x:6,y:2},{code:129429,x:10,y:9},{code:129430,x:0,y:10},{code:128051,x:4,y:6},{code:128011,x:8,y:2},{code:128044,x:9,y:5},{code:128031,x:7,y:4},{code:128032,x:8,y:4},{code:128033,x:9,y:4},{code:129416,x:8,y:8},{code:128025,x:1,y:4},{code:128026,x:2,y:4},{code:128012,x:9,y:2},{code:129419,x:0,y:9},{code:128027,x:3,y:4},{code:128028,x:4,y:4},{code:128029,x:5,y:4},{code:128030,x:6,y:4},{code:129431,x:1,y:10},{code:128375,x:8,y:7},{code:128376,x:9,y:7},{code:129410,x:2,y:8},{code:129439,x:9,y:10},{code:129440,x:10,y:10},{code:128144,x:6,y:7},{code:127800,x:6,y:0},{code:127989,x:7,y:1},{code:127801,x:7,y:0},{code:129344,x:10,y:7},{code:127802,x:8,y:0},{code:127803,x:9,y:0},{code:127804,x:10,y:0},{code:127799,x:5,y:0},{code:127793,x:0,y:0},{code:127812,x:6,y:1},{code:127794,x:1,y:0},{code:127795,x:2,y:0},{code:127796,x:3,y:0},{code:127797,x:4,y:0},{code:127806,x:0,y:1},{code:127807,x:1,y:1},{code:9752,x:11,y:8},{code:127808,x:2,y:1},{code:127809,x:3,y:1},{code:127810,x:4,y:1},{code:127811,x:5,y:1},{code:129408,x:0,y:8},{code:129438,x:8,y:10},{code:129424,x:5,y:9},{code:129425,x:6,y:9}],food_and_drinks:[{code:127815,x:8,y:0},{code:127816,x:9,y:0},{code:127817,x:0,y:1},{code:127818,x:1,y:1},{code:127819,x:2,y:1},{code:127820,x:3,y:1},{code:127821,x:4,y:1},{code:129389,x:10,y:0},{code:127822,x:5,y:1},{code:127823,x:6,y:1},{code:127824,x:7,y:1},{code:127825,x:8,y:1},{code:127826,x:9,y:1},{code:127827,x:0,y:2},{code:129373,x:4,y:8},{code:127813,x:6,y:0},{code:129381,x:2,y:9},{code:129361,x:2,y:7},{code:127814,x:7,y:0},{code:129364,x:5,y:7},{code:129365,x:6,y:7},{code:127805,x:5,y:0},{code:127798,x:4,y:0},{code:129362,x:3,y:7},{code:129388,x:9,y:9},{code:129382,x:3,y:9},{code:129372,x:3,y:8},{code:127792,x:3,y:0},{code:127838,x:1,y:3},{code:129360,x:1,y:7},{code:129366,x:7,y:7},{code:129384,x:5,y:9},{code:129391,x:10,y:2},{code:129374,x:5,y:8},{code:129472,x:10,y:3},{code:127830,x:3,y:2},{code:127831,x:4,y:2},{code:129385,x:6,y:9},{code:129363,x:4,y:7},{code:127828,x:1,y:2},{code:127839,x:2,y:3},{code:127829,x:2,y:2},{code:127789,x:0,y:0},{code:129386,x:7,y:9},{code:127790,x:1,y:0},{code:127791,x:2,y:0},{code:129369,x:0,y:8},{code:129370,x:1,y:8},{code:127859,x:2,y:5},{code:129368,x:9,y:7},{code:127858,x:1,y:5},{code:129379,x:0,y:9},{code:129367,x:8,y:7},{code:127871,x:4,y:6},{code:129474,x:10,y:5},{code:129387,x:8,y:9},{code:127857,x:0,y:5},{code:127832,x:5,y:2},{code:127833,x:6,y:2},{code:127834,x:7,y:2},{code:127835,x:8,y:2},{code:127836,x:9,y:2},{code:127837,x:0,y:3},{code:127840,x:3,y:3},{code:127842,x:5,y:3},{code:127843,x:6,y:3},{code:127844,x:7,y:3},{code:127845,x:8,y:3},{code:129390,x:10,y:1},{code:127841,x:4,y:3},{code:129375,x:6,y:8},{code:129376,x:7,y:8},{code:129377,x:8,y:8},{code:127846,x:9,y:3},{code:127847,x:0,y:4},{code:127848,x:1,y:4},{code:127849,x:2,y:4},{code:127850,x:3,y:4},{code:127874,x:5,y:6},{code:127856,x:9,y:4},{code:129473,x:10,y:4},{code:129383,x:4,y:9},{code:127851,x:4,y:4},{code:127852,x:5,y:4},{code:127853,x:6,y:4},{code:127854,x:7,y:4},{code:127855,x:8,y:4},{code:127868,x:1,y:6},{code:129371,x:2,y:8},{code:9749,x:4,y:10},{code:127861,x:4,y:5},{code:127862,x:5,y:5},{code:127870,x:3,y:6},{code:127863,x:6,y:5},{code:127864,x:7,y:5},{code:127865,x:8,y:5},{code:127866,x:9,y:5},{code:127867,x:0,y:6},{code:129346,x:8,y:6},{code:129347,x:9,y:6},{code:129380,x:1,y:9},{code:129378,x:9,y:8},{code:127869,x:2,y:6},{code:127860,x:3,y:5},{code:129348,x:0,y:7},{code:128298,x:7,y:6},{code:127994,x:6,y:6}],travel_and_places:[{code:127757,x:13,y:0},{code:127758,x:0,y:1},{code:127759,x:1,y:1},{code:127760,x:2,y:1},{code:128506,x:0,y:8},{code:128510,x:4,y:8},{code:129517,x:12,y:12},{code:127956,x:9,y:3},{code:9968,x:14,y:8},{code:127755,x:11,y:0},{code:128507,x:1,y:8},{code:127957,x:10,y:3},{code:127958,x:11,y:3},{code:127964,x:3,y:4},{code:127965,x:4,y:4},{code:127966,x:5,y:4},{code:127967,x:6,y:4},{code:127963,x:2,y:4},{code:127959,x:12,y:3},{code:129521,x:13,y:12},{code:127960,x:13,y:3},{code:127962,x:1,y:4},{code:127968,x:7,y:4},{code:127969,x:8,y:4},{code:127970,x:9,y:4},{code:127971,x:10,y:4},{code:127972,x:11,y:4},{code:127973,x:12,y:4},{code:127974,x:13,y:4},{code:127976,x:0,y:5},{code:127977,x:1,y:5},{code:127978,x:2,y:5},{code:127979,x:3,y:5},{code:127980,x:4,y:5},{code:127981,x:5,y:5},{code:127983,x:6,y:5},{code:127984,x:7,y:5},{code:128146,x:9,y:5},{code:128508,x:2,y:8},{code:128509,x:3,y:8},{code:9962,x:14,y:7},{code:128332,x:0,y:6},{code:128333,x:1,y:6},{code:9961,x:14,y:6},{code:128331,x:13,y:5},{code:9970,x:14,y:10},{code:9978,x:0,y:14},{code:127745,x:1,y:0},{code:127747,x:3,y:0},{code:127961,x:0,y:4},{code:127748,x:4,y:0},{code:127749,x:5,y:0},{code:127750,x:6,y:0},{code:127751,x:7,y:0},{code:127753,x:9,y:0},{code:9832,x:14,y:0},{code:127904,x:1,y:3},{code:127905,x:2,y:3},{code:127906,x:3,y:3},{code:128136,x:8,y:5},{code:127914,x:5,y:3},{code:128642,x:8,y:8},{code:128643,x:9,y:8},{code:128644,x:10,y:8},{code:128645,x:11,y:8},{code:128646,x:12,y:8},{code:128647,x:13,y:8},{code:128648,x:0,y:9},{code:128649,x:1,y:9},{code:128650,x:2,y:9},{code:128669,x:7,y:10},{code:128670,x:8,y:10},{code:128651,x:3,y:9},{code:128652,x:4,y:9},{code:128653,x:5,y:9},{code:128654,x:6,y:9},{code:128656,x:8,y:9},{code:128657,x:9,y:9},{code:128658,x:10,y:9},{code:128659,x:11,y:9},{code:128660,x:12,y:9},{code:128661,x:13,y:9},{code:128662,x:0,y:10},{code:128663,x:1,y:10},{code:128664,x:2,y:10},{code:128665,x:3,y:10},{code:128666,x:4,y:10},{code:128667,x:5,y:10},{code:128668,x:6,y:10},{code:127950,x:8,y:3},{code:127949,x:7,y:3},{code:128757,x:4,y:12},{code:128690,x:4,y:11},{code:128756,x:3,y:12},{code:128761,x:7,y:12},{code:128655,x:7,y:9},{code:128739,x:9,y:11},{code:128740,x:10,y:11},{code:128738,x:8,y:11},{code:9981,x:1,y:14},{code:128680,x:3,y:11},{code:128677,x:0,y:11},{code:128678,x:1,y:11},{code:128721,x:6,y:11},{code:128679,x:2,y:11},{code:9875,x:14,y:1},{code:9973,x:14,y:13},{code:128758,x:5,y:12},{code:127907,x:4,y:3},{code:128676,x:13,y:10},{code:128755,x:2,y:12},{code:9972,x:14,y:12},{code:128741,x:11,y:11},{code:128674,x:12,y:10},{code:9992,x:2,y:14},{code:128745,x:12,y:11},{code:128747,x:13,y:11},{code:128748,x:0,y:12},{code:128186,x:11,y:5},{code:128641,x:7,y:8},{code:128671,x:9,y:10},{code:128672,x:10,y:10},{code:128673,x:11,y:10},{code:128752,x:1,y:12},{code:128640,x:6,y:8},{code:128760,x:6,y:12},{code:128718,x:5,y:11},{code:129523,x:0,y:13},{code:8987,x:3,y:13},{code:9203,x:7,y:13},{code:8986,x:2,y:13},{code:9200,x:4,y:13},{code:9201,x:5,y:13},{code:9202,x:6,y:13},{code:128368,x:12,y:7},{code:128347,x:13,y:6},{code:128359,x:11,y:7},{code:128336,x:2,y:6},{code:128348,x:0,y:7},{code:128337,x:3,y:6},{code:128349,x:1,y:7},{code:128338,x:4,y:6},{code:128350,x:2,y:7},{code:128339,x:5,y:6},{code:128351,x:3,y:7},{code:128340,x:6,y:6},{code:128352,x:4,y:7},{code:128341,x:7,y:6},{code:128353,x:5,y:7},{code:128342,x:8,y:6},{code:128354,x:6,y:7},{code:128343,x:9,y:6},{code:128355,x:7,y:7},{code:128344,x:10,y:6},{code:128356,x:8,y:7},{code:128345,x:11,y:6},{code:128357,x:9,y:7},{code:128346,x:12,y:6},{code:128358,x:10,y:7},{code:127761,x:3,y:1},{code:127762,x:4,y:1},{code:127763,x:5,y:1},{code:127764,x:6,y:1},{code:127765,x:7,y:1},{code:127766,x:8,y:1},{code:127767,x:9,y:1},{code:127768,x:10,y:1},{code:127769,x:11,y:1},{code:127770,x:12,y:1},{code:127771,x:13,y:1},{code:127772,x:0,y:2},{code:127777,x:5,y:2},{code:9728,x:8,y:13},{code:127773,x:1,y:2},{code:127774,x:2,y:2},{code:11088,x:4,y:14},{code:127775,x:3,y:2},{code:127776,x:4,y:2},{code:127756,x:12,y:0},{code:9729,x:9,y:13},{code:9925,x:14,y:4},{code:9928,x:14,y:5},{code:127780,x:6,y:2},{code:127781,x:7,y:2},{code:127782,x:8,y:2},{code:127783,x:9,y:2},{code:127784,x:10,y:2},{code:127785,x:11,y:2},{code:127786,x:12,y:2},{code:127787,x:13,y:2},{code:127788,x:0,y:3},{code:127744,x:0,y:0},{code:127752,x:8,y:0},{code:127746,x:2,y:0},{code:9730,x:10,y:13},{code:9748,x:13,y:13},{code:9969,x:14,y:9},{code:9889,x:14,y:2},{code:10052,x:3,y:14},{code:9731,x:11,y:13},{code:9924,x:14,y:3},{code:9732,x:12,y:13},{code:128293,x:12,y:5},{code:128167,x:10,y:5},{code:127754,x:10,y:0}],events:[{code:127875,x:4,y:0},{code:127876,x:5,y:0},{code:127878,x:6,y:0},{code:127879,x:7,y:0},{code:129512,x:5,y:6},{code:10024,x:9,y:3},{code:127880,x:8,y:0},{code:127881,x:0,y:1},{code:127882,x:1,y:1},{code:127883,x:2,y:1},{code:127885,x:3,y:1},{code:127886,x:4,y:1},{code:127887,x:5,y:1},{code:127888,x:6,y:1},{code:127889,x:7,y:1},{code:129511,x:4,y:6},{code:127872,x:2,y:0},{code:127873,x:3,y:0},{code:127895,x:0,y:2},{code:127903,x:1,y:2},{code:127915,x:3,y:2},{code:127894,x:8,y:1},{code:127942,x:7,y:3},{code:127941,x:6,y:3},{code:129351,x:4,y:5},{code:129352,x:5,y:5},{code:129353,x:6,y:5},{code:9917,x:8,y:8},{code:9918,x:9,y:0},{code:129358,x:2,y:6},{code:127936,x:5,y:3},{code:127952,x:2,y:4},{code:127944,x:8,y:3},{code:127945,x:0,y:4},{code:127934,x:3,y:3},{code:129359,x:3,y:6},{code:127923,x:1,y:3},{code:127951,x:1,y:4},{code:127953,x:3,y:4},{code:127954,x:4,y:4},{code:129357,x:1,y:6},{code:127955,x:5,y:4},{code:127992,x:6,y:4},{code:129354,x:7,y:5},{code:129355,x:8,y:5},{code:129349,x:3,y:5},{code:9971,x:9,y:1},{code:9976,x:9,y:2},{code:127933,x:2,y:3},{code:127935,x:4,y:3},{code:128759,x:2,y:5},{code:129356,x:0,y:6},{code:127919,x:6,y:2},{code:127921,x:8,y:2},{code:128302,x:8,y:4},{code:129535,x:1,y:7},{code:127918,x:5,y:2},{code:128377,x:0,y:5},{code:127920,x:7,y:2},{code:127922,x:0,y:3},{code:129513,x:6,y:6},{code:129528,x:0,y:7},{code:9824,x:4,y:8},{code:9829,x:6,y:8},{code:9830,x:7,y:8},{code:9827,x:5,y:8},{code:9823,x:3,y:8},{code:127183,x:1,y:0},{code:126980,x:0,y:0},{code:127917,x:4,y:2},{code:128444,x:1,y:5},{code:127912,x:2,y:2},{code:129525,x:7,y:6},{code:129526,x:8,y:6}],objects:[{code:128263,x:1,y:7},{code:128264,x:2,y:7},{code:128265,x:3,y:7},{code:128266,x:4,y:7},{code:128226,x:3,y:5},{code:128227,x:4,y:5},{code:128239,x:3,y:6},{code:128276,x:1,y:8},{code:128277,x:2,y:8},{code:127932,x:2,y:1},{code:127925,x:8,y:0},{code:127926,x:9,y:0},{code:127897,x:0,y:0},{code:127898,x:1,y:0},{code:127899,x:2,y:0},{code:127908,x:4,y:0},{code:127911,x:6,y:0},{code:128251,x:11,y:6},{code:127927,x:10,y:0},{code:127928,x:11,y:0},{code:127929,x:12,y:0},{code:127930,x:0,y:1},{code:127931,x:1,y:1},{code:129345,x:6,y:11},{code:128241,x:5,y:6},{code:128242,x:6,y:6},{code:9742,x:13,y:3},{code:128222,x:12,y:4},{code:128223,x:0,y:5},{code:128224,x:1,y:5},{code:128267,x:5,y:7},{code:128268,x:6,y:7},{code:128187,x:4,y:2},{code:128421,x:5,y:9},{code:128424,x:6,y:9},{code:9e3,x:13,y:2},{code:128433,x:7,y:9},{code:128434,x:8,y:9},{code:128189,x:6,y:2},{code:128190,x:7,y:2},{code:128191,x:8,y:2},{code:128192,x:9,y:2},{code:129518,x:2,y:12},{code:127909,x:5,y:0},{code:127902,x:3,y:0},{code:128253,x:0,y:7},{code:127916,x:7,y:0},{code:128250,x:10,y:6},{code:128247,x:7,y:6},{code:128248,x:8,y:6},{code:128249,x:9,y:6},{code:128252,x:12,y:6},{code:128269,x:7,y:7},{code:128270,x:8,y:7},{code:128367,x:12,y:8},{code:128161,x:8,y:1},{code:128294,x:5,y:8},{code:127982,x:3,y:1},{code:128212,x:3,y:4},{code:128213,x:4,y:4},{code:128214,x:5,y:4},{code:128215,x:6,y:4},{code:128216,x:7,y:4},{code:128217,x:8,y:4},{code:128218,x:9,y:4},{code:128211,x:2,y:4},{code:128210,x:1,y:4},{code:128195,x:12,y:2},{code:128220,x:10,y:4},{code:128196,x:0,y:3},{code:128240,x:4,y:6},{code:128478,x:4,y:10},{code:128209,x:0,y:4},{code:128278,x:3,y:8},{code:127991,x:4,y:1},{code:128176,x:9,y:1},{code:128180,x:11,y:1},{code:128181,x:12,y:1},{code:128182,x:0,y:2},{code:128183,x:1,y:2},{code:128184,x:2,y:2},{code:128179,x:10,y:1},{code:129534,x:13,y:0},{code:128185,x:3,y:2},{code:9993,x:1,y:13},{code:128231,x:8,y:5},{code:128232,x:9,y:5},{code:128233,x:10,y:5},{code:128228,x:5,y:5},{code:128229,x:6,y:5},{code:128230,x:7,y:5},{code:128235,x:12,y:5},{code:128234,x:11,y:5},{code:128236,x:0,y:6},{code:128237,x:1,y:6},{code:128238,x:2,y:6},{code:128499,x:6,y:10},{code:9999,x:2,y:13},{code:10002,x:3,y:13},{code:128395,x:2,y:9},{code:128394,x:1,y:9},{code:128396,x:3,y:9},{code:128397,x:4,y:9},{code:128221,x:11,y:4},{code:128188,x:5,y:2},{code:128193,x:10,y:2},{code:128194,x:11,y:2},{code:128450,x:9,y:9},{code:128197,x:1,y:3},{code:128198,x:2,y:3},{code:128466,x:0,y:10},{code:128467,x:1,y:10},{code:128199,x:3,y:3},{code:128200,x:4,y:3},{code:128201,x:5,y:3},{code:128202,x:6,y:3},{code:128203,x:7,y:3},{code:128204,x:8,y:3},{code:128205,x:9,y:3},{code:128206,x:10,y:3},{code:128391,x:0,y:9},{code:128207,x:11,y:3},{code:128208,x:12,y:3},{code:9986,x:0,y:13},{code:128451,x:10,y:9},{code:128452,x:11,y:9},{code:128465,x:12,y:9},{code:128274,x:12,y:7},{code:128275,x:0,y:8},{code:128271,x:9,y:7},{code:128272,x:10,y:7},{code:128273,x:11,y:7},{code:128477,x:3,y:10},{code:128296,x:7,y:8},{code:9935,x:13,y:11},{code:9874,x:13,y:4},{code:128736,x:3,y:11},{code:128481,x:5,y:10},{code:9876,x:13,y:5},{code:128299,x:9,y:8},{code:127993,x:5,y:1},{code:128737,x:4,y:11},{code:128295,x:6,y:8},{code:128297,x:8,y:8},{code:9881,x:13,y:8},{code:128476,x:2,y:10},{code:9878,x:13,y:6},{code:128279,x:4,y:8},{code:9939,x:13,y:12},{code:129520,x:4,y:12},{code:129522,x:5,y:12},{code:9879,x:13,y:7},{code:129514,x:12,y:11},{code:129515,x:0,y:12},{code:129516,x:1,y:12},{code:128300,x:10,y:8},{code:128301,x:11,y:8},{code:128225,x:2,y:5},{code:128137,x:6,y:1},{code:128138,x:7,y:1},{code:128682,x:8,y:10},{code:128719,x:1,y:11},{code:128715,x:0,y:11},{code:128701,x:10,y:10},{code:128703,x:11,y:10},{code:128705,x:12,y:10},{code:129524,x:6,y:12},{code:129527,x:7,y:12},{code:129529,x:8,y:12},{code:129530,x:9,y:12},{code:129531,x:10,y:12},{code:129532,x:11,y:12},{code:129533,x:12,y:12},{code:129519,x:3,y:12},{code:128722,x:2,y:11},{code:128684,x:9,y:10},{code:9904,x:13,y:9},{code:9905,x:13,y:10},{code:128511,x:7,y:10}],signs:[{code:128686,x:4,y:8},{code:128688,x:6,y:8},{code:9855,x:3,y:13},{code:128697,x:11,y:8},{code:128698,x:12,y:8},{code:128699,x:13,y:8},{code:128700,x:14,y:8},{code:128702,x:0,y:9},{code:128706,x:1,y:9},{code:128707,x:2,y:9},{code:128708,x:3,y:9},{code:128709,x:4,y:9},{code:127975,x:13,y:4},{code:9888,x:7,y:13},{code:128696,x:10,y:8},{code:9940,x:11,y:13},{code:128683,x:2,y:8},{code:128691,x:8,y:8},{code:128685,x:3,y:8},{code:128687,x:5,y:8},{code:128689,x:7,y:8},{code:128695,x:9,y:8},{code:128245,x:7,y:5},{code:128286,x:7,y:6},{code:9762,x:10,y:11},{code:9763,x:11,y:11},{code:11014,x:15,y:5},{code:8599,x:14,y:9},{code:10145,x:14,y:14},{code:8600,x:0,y:10},{code:11015,x:15,y:6},{code:8601,x:1,y:10},{code:11013,x:15,y:4},{code:8598,x:13,y:9},{code:8597,x:12,y:9},{code:8596,x:11,y:9},{code:8617,x:2,y:10},{code:8618,x:3,y:10},{code:10548,x:15,y:2},{code:10549,x:15,y:3},{code:128259,x:12,y:5},{code:128260,x:13,y:5},{code:128281,x:2,y:6},{code:128282,x:3,y:6},{code:128283,x:4,y:6},{code:128284,x:5,y:6},{code:128285,x:6,y:6},{code:128720,x:5,y:9},{code:9883,x:5,y:13},{code:128329,x:14,y:7},{code:10017,x:1,y:14},{code:9784,x:1,y:12},{code:9775,x:0,y:12},{code:10013,x:0,y:14},{code:9766,x:12,y:11},{code:9770,x:13,y:11},{code:9774,x:14,y:11},{code:128334,x:0,y:8},{code:128303,x:14,y:6},{code:9800,x:4,y:12},{code:9801,x:5,y:12},{code:9802,x:6,y:12},{code:9803,x:7,y:12},{code:9804,x:8,y:12},{code:9805,x:9,y:12},{code:9806,x:10,y:12},{code:9807,x:11,y:12},{code:9808,x:12,y:12},{code:9809,x:13,y:12},{code:9810,x:14,y:12},{code:9811,x:0,y:13},{code:9934,x:10,y:13},{code:128256,x:9,y:5},{code:128257,x:10,y:5},{code:128258,x:11,y:5},{code:9654,x:3,y:11},{code:9193,x:5,y:10},{code:9197,x:9,y:10},{code:9199,x:11,y:10},{code:9664,x:4,y:11},{code:9194,x:6,y:10},{code:9198,x:10,y:10},{code:128316,x:12,y:7},{code:9195,x:7,y:10},{code:128317,x:13,y:7},{code:9196,x:8,y:10},{code:9208,x:12,y:10},{code:9209,x:13,y:10},{code:9210,x:14,y:10},{code:9167,x:4,y:10},{code:127910,x:11,y:4},{code:128261,x:14,y:5},{code:128262,x:0,y:6},{code:128246,x:8,y:5},{code:128243,x:5,y:5},{code:128244,x:6,y:5},{code:9792,x:2,y:12},{code:9794,x:3,y:12},{code:10006,x:14,y:13},{code:10133,x:11,y:14},{code:10134,x:12,y:14},{code:10135,x:13,y:14},{code:9854,x:2,y:13},{code:8252,x:6,y:9},{code:8265,x:7,y:9},{code:10067,x:7,y:14},{code:10068,x:8,y:14},{code:10069,x:9,y:14},{code:10071,x:10,y:14},{code:12336,x:15,y:10},{code:128177,x:2,y:5},{code:128178,x:3,y:5},{code:9877,x:4,y:13},{code:9851,x:1,y:13},{code:9884,x:6,y:13},{code:128305,x:1,y:7},{code:128219,x:4,y:5},{code:128304,x:0,y:7},{code:11093,x:15,y:9},{code:9989,x:12,y:13},{code:9745,x:9,y:11},{code:10004,x:13,y:13},{code:10060,x:5,y:14},{code:10062,x:6,y:14},{code:10160,x:15,y:0},{code:10175,x:15,y:1},{code:12349,x:15,y:11},{code:10035,x:2,y:14},{code:10036,x:3,y:14},{code:10055,x:4,y:14},{code:169,x:12,y:0},{code:174,x:13,y:0},{code:8482,x:9,y:9},{code:128288,x:9,y:6},{code:128289,x:10,y:6},{code:128290,x:11,y:6},{code:128291,x:12,y:6},{code:128292,x:13,y:6},{code:127344,x:14,y:0},{code:127374,x:3,y:1},{code:127345,x:0,y:1},{code:127377,x:4,y:1},{code:127378,x:5,y:1},{code:127379,x:6,y:1},{code:8505,x:10,y:9},{code:127380,x:7,y:1},{code:9410,x:0,y:11},{code:127381,x:8,y:1},{code:127382,x:9,y:1},{code:127358,x:1,y:1},{code:127383,x:10,y:1},{code:127359,x:2,y:1},{code:127384,x:11,y:1},{code:127385,x:12,y:1},{code:127386,x:13,y:1},{code:127489,x:10,y:3},{code:127490,x:11,y:3},{code:127543,x:4,y:4},{code:127542,x:3,y:4},{code:127535,x:13,y:3},{code:127568,x:8,y:4},{code:127545,x:6,y:4},{code:127514,x:12,y:3},{code:127538,x:14,y:3},{code:127569,x:9,y:4},{code:127544,x:5,y:4},{code:127540,x:1,y:4},{code:127539,x:0,y:4},{code:12951,x:15,y:12},{code:12953,x:15,y:13},{code:127546,x:7,y:4},{code:127541,x:2,y:4},{code:128308,x:4,y:7},{code:128309,x:5,y:7},{code:9899,x:9,y:13},{code:9898,x:8,y:13},{code:11036,x:15,y:8},{code:9724,x:6,y:11},{code:9723,x:5,y:11},{code:9726,x:8,y:11},{code:9725,x:7,y:11},{code:9642,x:1,y:11},{code:9643,x:2,y:11},{code:128310,x:6,y:7},{code:128311,x:7,y:7},{code:128312,x:8,y:7},{code:128313,x:9,y:7},{code:128314,x:10,y:7},{code:128315,x:11,y:7},{code:128160,x:1,y:5},{code:128280,x:1,y:6},{code:128307,x:3,y:7},{code:128306,x:2,y:7},{code:127937,x:12,y:4},{code:128681,x:1,y:8},{code:127884,x:10,y:4},{code:127988,x:0,y:5},{code:127987,x:14,y:4},{code:127462,x:14,y:1},{code:127463,x:0,y:2},{code:127464,x:1,y:2},{code:127465,x:2,y:2},{code:127466,x:3,y:2},{code:127467,x:4,y:2},{code:127468,x:5,y:2},{code:127469,x:6,y:2},{code:127470,x:7,y:2},{code:127471,x:8,y:2},{code:127472,x:9,y:2},{code:127473,x:10,y:2},{code:127474,x:11,y:2},{code:127475,x:12,y:2},{code:127476,x:13,y:2},{code:127477,x:14,y:2},{code:127478,x:0,y:3},{code:127479,x:1,y:3},{code:127480,x:2,y:3},{code:127481,x:3,y:3},{code:127482,x:4,y:3},{code:127483,x:5,y:3},{code:127484,x:6,y:3},{code:127485,x:7,y:3},{code:127486,x:8,y:3},{code:127487,x:9,y:3}]},re=function(e){if(e<65536)return String.fromCharCode(e);var t=e-65536,i=55296+(t>>10),s=56320+(1023&t);return String.fromCharCode(i)+String.fromCharCode(s)},ce={},le={};for(var de in oe)n().each(oe[de],(function(e){var t=re(e.code);ce[t]=e,!le[de]&&(le[de]=[]),le[de].push(t)}));var he=/[\u{1f300}-\u{1f5ff}\u{1f900}-\u{1f9ff}\u{1f600}-\u{1f64f}\u{1f680}-\u{1f6ff}\u{2600}-\u{26ff}\u{2700}-\u{27bf}\u{1f1e6}-\u{1f1ff}\u{1f191}-\u{1f251}\u{1f004}\u{1f0cf}\u{1f170}-\u{1f171}\u{1f17e}-\u{1f17f}\u{1f18e}\u{3030}\u{2b50}\u{2b55}\u{2934}-\u{2935}\u{2b05}-\u{2b07}\u{2b1b}-\u{2b1c}\u{3297}\u{3299}\u{303d}\u{00a9}\u{00ae}\u{2122}\u{23f3}\u{24c2}\u{23e9}-\u{23ef}\u{25b6}\u{23f8}-\u{23fa}]/gu;String.prototype.emojify=function(e){e||(e={});let t=e.emoji_size||20,i=e.title?` title="${e.title}" `:"";return this.replace(he,(function(e){return`<span ${i} class="emoji emoji-w${t}" data-emoji="${e}"><span class="positioned-emoji">${e}</span></span>`}))},String.prototype.removeEmoji=function(){return this.replace(he,(function(e){return ce[e]?"":e}))},String.prototype.replaceEmoji=function(){return this.replace(he,(function(e){return ce[e]?" ":e}))},o().fn.emojify=function(e,t){return this.find(e).each((function(){var e=o()(this).html();o()(`<div>${e}</div>`).find(".positioned-emoji").length||o()(this).html(e.emojify(t))})),this};const ge={all:le,get:re,getByIndex:function(e){var t;for(var i in oe)if(oe[i][e]){t=oe[i][e];break}return re(t.code)}};var ue=P._,pe=P.$,me=P.SHA1.b64_sha1,_e={},ve=["#1abc9c","#16a085","#f1c40f","#f39c12","#2ecc71","#27ae60","#e67e22","#d35400","#3498db","#2980b9","#e74c3c","#c0392b","#9b59b6","#8e44ad","#bdc3c7","#34495e","#2c3e50","#95a5a6","#7f8c8d","#ec87bf","#d870ad","#f69785","#9ba37e","#b49255","#a94136"],fe=1280,be=function(e,t,i){t=t||"",i=i||512;for(var s=atob(e),n=[],a=0;a<s.length;a+=i){for(var o=s.slice(a,a+i),r=new Array(o.length),c=0;c<o.length;c++)r[c]=o.charCodeAt(c);var l=new Uint8Array(r);n.push(l)}return new Blob(n,{type:t})},Ae=function(e){return this.url=window.URL.createObjectURL(be(e)),_e[e]=this,this},we=function(e){if(e instanceof Ae)return e;if(e&&(ue.isString(e)&&0==e.indexOf("http")||ue.isObject(e)&&e.url&&0==e.url.indexOf("http"))){if(ue.isString(e))return{url:e};if(ue.isObject(e))return e}return _e[e]||new Ae(e)},ye=function(e){var t=e?e.trim():"",i=Math.floor(me(t).charCodeAt(0)%ve.length);return ve[i]},xe=function(e,t){return t&&(e.width>e.height?e.width>t&&(e.height*=t/e.width,e.width=t):e.height>t&&(e.width*=t/e.height,e.height=t)),e};pe.fn.setAvatar=function(e,t){!function(e,t,i){var s=pe(e),n={backgroundImage:'url("'+t.url+'")',backgroundSize:"cover",backgroundColor:"#FFF"};s.css(n)}(this,we(e))};const ke={getCachedImage:we,getBlobImage:be,getDefaultAvatar:function(e,t,i,s,n){var a,o,r,c,l=document.createElement("canvas"),d=l.getContext("2d"),h=e?e.trim():"",g=h.split(" ",2);return a=g[0],o=g.length>1?g[1]:"",r=a[0]||"",c=o?o[0]:a.length>1?a[1]:"",l.width=s||256,l.height=n||256,d.rect(0,0,s||256,n||256),d.fillStyle=t||ye(e),d.fill(),d.font=i||"bold 100px sans-serif",d.fillStyle=i?"#000":"#FFF",d.textAlign="center",i?(d.textBaseline="ideographic",d.fillText(h,s/2||128,n/2+.33*n||160)):d.fillText(r.toUpperCase()+c.toUpperCase(),128,160),l.toDataURL().replace(/^data:image\/(png|gif|jpg|webp|jpeg);base64,/,"")},getAvatarFromFile:function(e){var t=new Image,i=window.URL.createObjectURL(e),s=new pe.Deferred;return t.onload=function(){t.onload=null;var n,a,o=document.createElement("canvas"),r=o.getContext("2d"),c=t.naturalWidth,l=t.naturalHeight,d=xe({width:c,height:l},200);o.width=d.width,o.height=d.height,r.drawImage(t,0,0,o.width,o.height),n=o.toDataURL().replace(/^data:image\/(png|gif|jpg|webp|jpeg);base64,/,""),window.URL.revokeObjectURL(i),o.toBlob((e=>{var t=new FileReader;t.onload=function(){n=t.result.replace(/^data:image\/(png|gif|jpg|webp|jpeg);base64,/,"");let e=atob(n),i=new Uint8Array(e.length);for(let t=0;t<e.length;t++)i[t]=e.charCodeAt(t);a=sha1(i),s.resolve(n,a,e.length)}.bind(this),t.readAsDataURL(e)}),e.type,.8)},t.onerror=function(){t.onerror=null,window.URL.revokeObjectURL(i),s.resolve(!1,!1,!1)},t.src=i,s.promise()},getDefaultColor:ye,getCachedBackground:function(e){return 0==e.indexOf("http")?e:we(e.replace(/^data:image\/(png|gif|jpg|webp|jpeg);base64,/,"")).url},compressImage:function(e){var t=new Image,i=window.URL.createObjectURL(e),s=new pe.Deferred;return t.onload=function(){t.onload=null;var n=document.createElement("canvas"),a=n.getContext("2d"),o=t.naturalWidth,r=t.naturalHeight,c=e.type,l=e.name,d=xe({width:o,height:r},fe);("image/svg+xml"===e.type||e.type.includes("image/gif")||o<fe&&r<fe)&&(e.width=o,e.height=r,s.resolve(e)),n.width=d.width,n.height=d.height,a.drawImage(t,0,0,d.width,d.height),n.toBlob((e=>{const t=new File([e],l,{type:c,lastModified:Date.now()});s.resolve(t)}),c,.8),window.URL.revokeObjectURL(i)},t.onerror=function(){t.onerror=null,window.URL.revokeObjectURL(i),s.resolve(!1)},t.src=i,s.promise()}};var Ce=i(56214),Se=P._,$e=P.$,Ie=($e("<div>").attr("id","modals").appendTo(V.default.CONTAINER_ELEMENT),[]),Ee=function(e,t){this.$modal=$e(e instanceof Function?e():e),this.options=t||{},this.closed=new $e.Deferred};let Te=function(e,t){return P.xabber_i18next.exists(e)?P.xabber_i18next.t(e,{postProcess:"sprintf",sprintf:t}).replace(/\\'/g,"'").replace(/%+\d+[$]/g,"%").replace(/\\n/g,"&#10;"):P.xabber_i18next.default_lang?P.xabber_i18next.default_lang(e,{postProcess:"sprintf",sprintf:t}).replace(/\\'/g,"'").replace(/%+\d+[$]/g,"%").replace(/\\n/g,"&#10;"):""};Se.extend(Ee.prototype,{open:function(e){return this.options.use_queue?(Ie.push(this),1===Ie.length&&this.throw()):this.throw(),setTimeout((()=>{document.addEventListener("keyup",this.clickHandler.bind(this))}),500),this.closed.promise()},throw:function(){this.$modal.appendTo($e("#modals")).prop("modal",this);var e=Se.omit(this.options,["use_queue"]);Se.extend(e,{is_default_complete:!0,complete_data:null}),this.options.use_queue&&this.$modal.one("modal_close",function(e,t){this.$modal.detach(),this.closed.resolve(t.value),Ie.shift(),Ie.length&&Ie[0].throw()}.bind(this)),this.$modal._openModal(e)},close:function(e){var t=Se.omit(e,["use_queue","is_default_complete","complete_data"]);Se.extend(t,{complete:function(){if(this.options.use_queue){var t=Se.isUndefined(e.complete_data)?null:e.complete_data;this.complete(t)}e.is_default_complete?"function"==typeof this.options.complete&&this.options.complete():(this.options.use_queue&&this.complete(),"function"==typeof e.complete&&e.complete())}.bind(this)}),this.$modal.prop("modal",null),this.$modal._closeModal(t)},complete:function(e){document.removeEventListener("keyup",this.clickHandler),this.$modal.trigger("modal_close",{value:e})},clickHandler:function(e){13===e.keyCode&&(this.$modal.find(".modal-footer button.ok-button").click(),e.preventDefault())}}),$e.fn._openModal=$e.fn.openModal,$e.fn.openModal=function(e){return new Ee(this,e).open()},$e.fn._closeModal=$e.fn.closeModal,$e.fn.closeModal=function(e){var t=this.prop("modal");t?t.close(e):this._closeModal(e)};const Me={Modal:Ee,clear_queue:function(){Ie=[]},dialogs:{common:function(e,t,i,s,n,a){var o=new Ee((function(){s||(s=[]);let o=s||[];i||(i={}),"object"!=typeof s||Array.isArray(s)||(o=[]);var r=i.ok_button,c=i.cancel_button,l=(i.optional_buttons||[]).reverse();return r&&(r={text:r.text||Te("ok")}),c&&(c={text:c.text||Te("cancel")}),Y.base.dialog({header:e,text:t,ok_button:r,cancel_button:c,optional_buttons:l,dialog_options:o,flag:n||"",modal_class:a||""})}),{use_queue:!0});return s.modal_class&&o.$modal.addClass(s.modal_class),s.no_dialog_options&&o.$modal.find(".dialog-options-wrap").html(""),s.quoted_text&&o.$modal.find(".modal-content").append(`<div class="dialog-quoted-text">${s.quoted_text}</div>`),s.cancel_button_main&&o.$modal.find(".cancel-button").removeClass("btn-dark"),s.inverted_buttons&&(o.$modal.find(".dialog-options-wrap").html(""),o.$modal.find(".cancel-button").removeClass("btn-dark"),o.$modal.find(".ok-button").addClass("btn-dark"),o.$modal.find(".modal-footer").addClass("inverted-buttons")),s.img_details&&(o.$modal.find(".modal-content").append('<div class="modal-images-details"/>').append('<div class="modal-images-details-btn btn-flat btn-dark btn-main"/>'),o.$modal.find(".modal-images-details-btn").text(Ce.getString("details")),o.$modal.find(".modal-images-details").append('<div class="image-details-container hidden"/>'),o.$modal.find(".image-details-container").html(s.img_details),o.$modal.find(".modal-images-details-btn").click((function(){o.$modal.find(".image-details-container").switchClass("hidden",!o.$modal.find(".image-details-container").hasClass("hidden"))}))),s.blob_image_from_clipboard&&(o.$modal.find(".dialog-options-wrap").html(""),o.$modal.find(".img-from-clipboard")[0].src=s.blob_image_from_clipboard,o.$modal.find(".container-for-img").removeClass("hidden")),s.canvas&&(o.$modal.find(".dialog-options-wrap").html(""),o.$modal.find(".container-for-img").html("").removeClass("hidden")[0].appendChild(s.canvas),s.bottom_text&&$e('<div class="dialog-bottom-text"/>').html(s.bottom_text).appendTo(o.$modal.find(".container-for-img"))),s.escape_button&&o.$modal.find(".modal-header").append('<i class="close-modal mdi mdi-close mdi-24px"></i>'),Se.isUndefined(s.input_placeholder_value)&&!s.input_value||o.$modal.find(".dialog-options-wrap").html($e('<input type="text" placeholder="'+s.input_placeholder_value+'" id="user_value"/>').val(s.input_value)),o.$modal.find(".modal-footer button").click((function(e){var t=$e(e.target).data("option"),i=o.$modal.find(".dialog-option"),s=o.$modal.find("#user_value");if(t&&i.length){var n={};Se.each(i,(function(e){var t=$e(e);n[t.data("name")]=t.find("input").prop("checked")})),o.close({complete_data:n})}else if(s.length)if($e(e.target).hasClass("btn-cancel"))o.close({complete_data:!1});else if($e(e.target).hasClass("optional-button"))o.close({complete_data:t});else{var a=s.val();o.close({complete_data:a})}else o.close({complete_data:t})})),o.$modal.find(".modal-header .close-modal").click((function(){o.close({complete_data:!1})})),o.open()},warning:function(e,t){return this.common(Te("warning"),e,{ok_button:!0},t)},error:function(e,t,i){return this.common(i||Te("xabber_account__login__dialog_error__header"),e,{ok_button:!0},t)},ask:function(e,t,i,s,n){var a,o;return s&&(a=s.ok_button_text,o=s.cancel_button_text),this.common(e,t,{ok_button:{text:a},cancel_button:{text:o}},i,n)},ask_extended:function(e,t,i,s){var n,a,o;return s&&(n=s.ok_button_text,a=s.cancel_button_text,o=!!s.optional_button&&[{value:s.optional_button,name:s.optional_button_text}]),this.common(e,t,{ok_button:{text:n},cancel_button:{text:a},optional_buttons:o},i,"extended")},ask_enter_value:function(e,t,i,s){var n,a;return s&&(n=s.ok_button_text,a=!!s.resend_button_text&&[{value:s.resend_to,name:s.resend_button_text}]),this.common(e,t,{ok_button:{text:n},optional_buttons:a,cancel_button:!0},i)},notify:function(e,t){return this.common(e,t,{ok_button:!0})}}};var Le=P._,Be=P.$;Be.fn.placeCaretAtEnd=function(){if(!this.length)return this;var e=this[0];if(e.focus(),Le.isUndefined(window.getSelection)||Le.isUndefined(document.createRange)){if(!Le.isUndefined(document.body.createTextRange)){var t=document.body.createTextRange();t.moveToElementText(e),t.collapse(!1),t.select()}}else{var i=document.createRange();i.selectNodeContents(e),i.collapse(!1);var s=window.getSelection();s.removeAllRanges(),s.addRange(i)}return this},Be.fn.updateRichTextarea=function(){return this.getTextFromRichTextarea()||this.html(""),this},Be.fn.flushRichTextarea=function(){return this.html(""),this},Be.fn.pasteHtmlAtCaret=function(e){var t,i;if(this[0].focus(),window.getSelection){if((t=window.getSelection()).getRangeAt&&t.rangeCount){(i=t.getRangeAt(0)).deleteContents();var s=document.createElement("div");s.innerHTML=e;for(var n,a,o=document.createDocumentFragment();n=s.firstChild;)a=o.appendChild(n);i.insertNode(o),a&&((i=i.cloneRange()).setStartAfter(a),i.collapse(!0),t.removeAllRanges(),t.addRange(i))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(e);return this},Be.fn.getTextFromRichTextarea=function(){var e=Be("<div>").html(this.html());return e.find(".emoji").each((function(){Be(this).replaceWith(Be(this).data("emoji"))})),e.find("p").each((function(){Be(this).replaceWith(Be(this).html()+"\n")})),e.find("span").each((function(){Be(this).replaceWith(Be(this).html())})),e.find("div").each((function(){var e=Be(this);e.find("br").remove();var t=e.html();e.hasClass("emoji")?e.replaceWith(t):e.replaceWith("\n"+t)})),e.text()};var Ne=i(25108),je=i(48764).Buffer,Re=P.$,Oe=P._,De=P.moment,Fe=P.curve25519js;Re.fn.switchClass=function(e,t){return 1===arguments.length&&(t=!this.hasClass(e)),t?this.addClass(e):this.removeClass(e),this},Re.fn.showIf=function(e){return this.switchClass("hidden",!e)},Re.fn.hideIf=function(e){return this.switchClass("hidden",e)},Re.fn.isVisibleInViewport=function(){let e=Re(this).offset().top,t=e+Re(this).outerHeight(),i=Re(window).scrollTop(),s=i+Re(window).height();return t>i&&e<s},Re.fn.isVisibleInContainer=function(e){if(!this.length||!e.length)return;e=e[0];let t=this[0].offsetTop,i=t+this[0].clientHeight,s=e.scrollTop,n=s+e.clientHeight;return t>=s&&i<=n||t<s&&s<i||t<n&&n<i},Re.fn.isFullyVisibleInContainer=function(e){if(!this.length||!e.length)return;e=e[0];let t=this[0].offsetTop,i=t+this[0].clientHeight,s=e.scrollTop,n=s+e.clientHeight;return t>=s&&i<=n},Re.fn.isBottomVisibleInContainer=function(e){if(!this.length||!e.length)return;return e=e[0],this[0].offsetTop+this[0].clientHeight<=e.scrollTop+e.clientHeight};var Ue=function(e){var t=0===e.indexOf("http://")||0===e.indexOf("https://")?"":"http://",i="";try{i=e.replace(/[!'()]/g,escape).replace(/\*/g,"%2A")}catch(t){i=e}try{e=decodeURI(e)}catch(t){return e}return"<a target='_blank' class='msg-hyperlink' href='"+t+i+"'>"+e+"</a>"};Re.fn.hyperlinkify=function(e){return e||(e={}),(e.selector?this.find(e.selector):this).each((function(t,i){var s=Re(i),n="",a=/((((ftp|http|https):\/\/)|(www\.))(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)|((\b)(([\w#:.@\-]+))?(\.net|\.edu|\.cloud|\.top|\.vip|\.cash|\.im|\.online|\.chat|\.com|\.org|\.ru|\.travel|\.info|\.tv|\.biz|\.mobi|\.tel|\.ar|\.al|\.asia|\.np|\.ng|\.io|\.bb|\.br|\.ca|\.tr|\.co|\.ec|\.fr|\.ht|\.in|\.eg|\.ie|\.et|\.jo|\.mr|\.id|\.iq|\.nl|\.ps|\.ph|\.sl|\.si|\.se|\.af|\.ag|\.be|\.bd|\.bg|\.cl|\.cd|\.my|\.mz|\.mx|\.cz|\.eu|\.dz|\.de|\.hk|\.it|\.la|\.no|\.pl|\.ro|\.sg|\.ke|\.kr|\.ch|\.ug|\.us|\.ve|\.vn|\.at|\.bo|\.cm|\.cn|\.cg|\.dk|\.fi|\.gr|\.gh|\.is|\.ir|\.jp|\.lv|\.ma|\.me|\.pk|\.pe|\.pt|\.sa|\.sk|\.es|\.tz|\.tw|\.ua|\.uz|\.ye)((\/[\w#!:;.?+=&%@!\-\/]+)|(\b)|\/))/gim;s[0].childNodes.forEach(function(i){let s=Re(i),o=i.outerHTML;if("A"!==i.tagName){"#text"===i.nodeName&&(o=Oe.escape(s.text()));let r=o&&o.match(a);if(r=Array.from(new Set(r)),!r||0===r.length)return void(n+=o);if(1===r.length&&r[0]===o)n+=e.decode_uri?decodeURI(o):Ue(o);else{for(t=0;t<r.length;t++)if(e.decode_uri)try{o=o.replace(r[t],decodeURI(r[t]))}catch(e){Ne.log(r[t]),Ne.error(e)}else o=o.replaceAll(new RegExp(`(\\s|^)(${r[t].replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"g"),"$1"+Ue(r[t]));n+=o}}else n+=o}.bind(this)),s.html(n)})),this};var Pe={uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},utoa:function(e){return window.btoa(Oe.unescape(encodeURIComponent(e)))},atou:function(e){return decodeURIComponent(Oe.escape(window.atob(e)))},now:function(){return Math.floor(De.now()/1e3)},randomCode:function(e){let t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=i.length,n=0;for(;n<e;)t+=i.charAt(Math.floor(Math.random()*s)),n+=1;return t},doCurve:function(e,t){if(!e||!t)return;let i=Fe.sharedKeyCurve(new Uint8Array(e),new Uint8Array(t));return je.from(i)},curveSign:function(e,t){if(!e||!t)return;return Fe.signCurve(new Uint8Array(e),t)},curveVerify:function(e,t,i){if(!e||!t)return;return Fe.verifyCurve(new Uint8Array(e),t,i)},stringToArrayBuffer32:function(e){let t=(new TextEncoder).encode(e),i=new ArrayBuffer(32);return new Uint8Array(i).set(t.slice(0,Math.min(t.length,32))),i},createSha256:async function(e){return("string"==typeof e||e instanceof String)&&(e=(new TextEncoder).encode(e)),await crypto.subtle.digest("SHA-256",e)},isJsonString:function(e){try{JSON.parse(e)}catch(e){return!1}return!0},getDateFormat:function(e){let t;return"iso"===e?t="YYYY-MM-DD":"eur"===e?t="DD.MM.YYYY":"usa"===e&&(t="MM/DD/YYYY"),t},pretty_time:function(e){return(e?De(e):De()).format("HH:mm:ss")},pretty_time_since:function(e){let t=new Date(e);var i=Math.floor((new Date-t)/1e3),s=i/31536e3;return s>1?Math.floor(s)+" years":(s=i/2592e3)>1?Math.floor(s)+" months":(s=i/86400)>1?Math.floor(s)+" days":(s=i/3600)>1?Math.floor(s)+" hours":(s=i/60)>1?Math.floor(s)+" minutes":Math.floor(i)+" seconds"},pretty_date:function(e,t){return(e?De(e):De()).format(t||"dddd, MMMM D, YYYY")},pretty_datetime:function(e,t){return(e?De(e):De()).format(t||"MMMM D, YYYY HH:mm:ss")},pretty_short_datetime_recent_chat:function(e){return e=Number(e?De(e):De()),De(e).startOf("day").isSame(De().startOf("day"))||Number(De().subtract(12,"hours")<e)?De(e).format("HH:mm:ss"):Number(De().subtract(12,"hours"))>e&&Number(De().subtract(7,"days"))<=e?De(e).format("ddd"):Number(De().subtract(7,"days"))>e&&Number(De().subtract(1,"year"))<=e?De(e).format("MMM D"):e&&Number(De().subtract(1,"year"))>e?De(e).format("D MMM YYYY"):void 0},pretty_short_datetime:function(e){var t=e?De(e):De(),i=De(t).startOf("day"),s=De(t).startOf("year");return i.isSame(De().startOf("day"))?t.format("HH:mm:ss"):s.isSame(De().startOf("year"))?t.format("MMM D"):t.format("DD/MM/gg")},pretty_short_month_date:function(e){var t=e?De(e):De();return De(t).startOf("day").isSame(De().startOf("day"))?t.format("HH:mm:ss"):t.format("MMM D, YYYY HH:mm:ss")},isImageType:function(e){return e.indexOf("image")>-1&&!(e.indexOf("application")>-1)},tryReadingFile:function(e){return new Promise(((t,i)=>{let s=new FileReader;s.onload=e=>{t()},s.onerror=e=>{Ne.log(s.error),i(s.error)},s.readAsDataURL(e)}))},getDomainFromUrl:function(e){let t=document.createElement("a");return e&&!/^https?:\/\//i.test(e)&&(e="http://"+e),t.href=e,t.hostname},isVideoType:function(e){return e.indexOf("video")>-1},file_type_icon:function(e){let t=Pe.pretty_file_type(e);return"image"===t?"mdi-image":"audio"===t?"mdi-music-note":"video"===t?"mdi-filmstrip":"document"===t?"mdi-file-document-box":"presentation"===t?"mdi-presentation":"archive"===t?"mdi-zip-box":"file"===t?"mdi-file":"pdf"===t?"mdi-file-pdf":"mdi-file"},file_type_icon_svg:function(e){let t=Pe.pretty_file_type(e);return"image"===t?"image":"audio"===t?"file-audio":"video"===t?"file-video":"document"===t?"file-document":"presentation"===t?"file-presentation":"archive"===t?"file-zip":"file"===t?"file":"pdf"===t?"file-pdf":"file"},pretty_file_type:function(e){return V.default.MIME_TYPES.image.includes(e)?"image":V.default.MIME_TYPES.audio.includes(e)?"audio":V.default.MIME_TYPES.video.includes(e)?"video":V.default.MIME_TYPES.document.includes(e)?"document":V.default.MIME_TYPES.pdf.includes(e)?"pdf":V.default.MIME_TYPES.presentation.includes(e)?"presentation":V.default.MIME_TYPES.archive.includes(e)?"archive":V.default.MIME_TYPES.table.includes(e)?"electronic table":"file"},pretty_file_type_with_article:function(e){let t=Pe.pretty_file_type(e);return"pdf"===t&&(t="document"),["a","e","i","o","u"].includes(t[0])?"an "+t:"a "+t},pretty_size:function(e){return e||0==e?Oe.isNaN(Number(e))?e:e<1024?e+" B":e<1048576?(e/1024).toFixed(2)+" KiB":e<1073741824?(e/1048576).toFixed(2)+" MiB":(e/1073741824).toFixed(2)+" GiB":""},pretty_duration:function(e){return Oe.isNaN(Number(e))?e:Oe.isUndefined(e)||""===e?"":e<10?"0:0"+e:e<60?"0:"+e:e>=60?Math.trunc(e/60)+":"+(e%60<10?"0"+e%60:e%60):void 0},pretty_duration_ephemeral_timer:function(e){let t="";switch(e){case"5":t="5s";break;case"10":t="10s";break;case"15":t="15s";break;case"30":t="30s";break;case"60":t="1m";break;case"300":t="5m";break;case"600":t="10m";break;case"900":t="15m";break;default:t=""}return t},pretty_name:function(e){return e?e[0].toUpperCase()+e.replace(/-/," ").substr(1).toLowerCase():""},getKeyByValue:function(e,t){return Object.keys(e).find((i=>e[i]===t))},slice_string:function(e,t,i){return i=Oe.isNumber(i)?i:[...e].length,e.length===[...e].length?e.slice(t,i):Array.from(e).slice(t,i).join("")},slice_pretty_body:function(e,t){if(!t||!t.length)return e;e=e||"",t=t.filter((e=>"groupchat"===e.type||"forward"===e.type));let i=Array.from(P.Strophe.xmlescape(e));return t&&t.forEach(function(e){for(let t=e.start;t<e.end;t++)i[t]=""}.bind(this)),P.Strophe.xmlunescape(i.join("").trim())},markupBodyMessage:function(e,t){let i=Oe.clone(e.attributes),s=i.mentions||[],n=i.markups||[],a=i.mutable_content||[],o=i.blockquotes||[],r=Array.from(P.Strophe.xmlescape(i.original_message||i.message||""));return!t&&(t="span"),a.forEach(function(e){for(let t=e.start;t<e.end;t++)r[t]=""}.bind(this)),s.forEach(function(e){let i=e.start,s=e.end>r.length-1?r.length-1:e.end-1,n=e.target;if(!(i>r.length-1)){if(e.is_gc){let t=n.match(/\?id=\w*/),i=n.match(/\?jid=.*/);t?n=t[0].slice(4):i?n=i[0].slice(5):(n="",e.me=!0)}else n=n.slice(5);if("mention"===t)return r[i]="<"+t+' data-target="?jid='+n+'">'+r[i],void(r[s]+="</"+t+">");r[i]="<"+t+' data-target="'+n+'" class="mention'+(e.me?" ground-color-100":"")+'">'+r[i],r[s]+="</"+t+">"}}.bind(this)),n.forEach(function(e){let t=e.start,i=e.end>r.length-1?r.length-1:e.end-1;if(!(t>r.length-1)&&e.markup.length){let s="",n="";e.markup.forEach(function(e){"object"==typeof e?(s='<a target="_blank" class="msg-hyperlink" href="'+e.uri+'">'+s,n+="</a>"):(s="<"+e[0].toLowerCase()+">"+s,n+="</"+e[0].toLowerCase()+">")}.bind(this)),r[t]=s+r[t],r[i]+=n}}.bind(this)),o.forEach(function(e){let i=e.end>r.length-1?r.length-1:e.end-1;for(let t=e.start;t<e.start+V.default.QUOTE_MARKER.length;t++)r[t]=t===i?"<br>":"";for(let t=e.start;t<i;t++)if("\n"===r[t]){for(let e=t+1;e<=t+V.default.QUOTE_MARKER.length;e++)r[e]="";t+=V.default.QUOTE_MARKER.length-1}if("mention"===t)return r[e.start]="<blockquote>",void(r[i]+="</blockquote>");r[e.start]='<div class="quote">',r[i]+="</div>"}.bind(this)),r.join("").trim()},getOS:function(){let e=window.navigator.platform,t=null;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(e)?t="mac OS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(e)?t="Windows":!t&&/Linux/.test(e)&&(t="Linux"),t},isOverflownWidth:function(e){return e.scrollWidth>e.clientWidth},isOverflownHeight:function(e){return e.scrollHeight>e.clientHeight},render_data_form:function(e){let t=Re('<div class="data-form"/>');return e.fields.forEach(function(e){if("hidden"!==e.type){if("fixed"===e.type){let i=Re('<div class="data-form-field fixed-field"/>');e.label&&i.append(Re('<div class="label"/>').text(e.label)),e.values.forEach(function(e){let t=Re('<div class="value"/>').text(e);i.append(t)}.bind(this)),t.append(i)}if("boolean"===e.type){let i=Re(`<button id=${e.var} class="data-form-field ground-color-100 btn-dark btn-flat btn-main boolean-field"/>`).text(e.label);t.append(i)}}}.bind(this)),t},copyTextToClipboard:function(e,t,i){window.navigator.clipboard&&window.navigator.clipboard.writeText(e).then(function(){if(t){let e=t;this.callback_popup_message(e,1500)}}.bind(this),function(){if(i){let e=i;this.callback_popup_message(e,1500)}}.bind(this))},callback_popup_message:function(e,t){let i=Re(document.body),s=Re('<div class="callback-popup-message"/>').text(e);t=t||3e3,i.find(".callback-popup-message").remove(),i.append(s),setTimeout((function(){s.remove()}),t)},emoji_size:function(e){let t;switch(e){case 1:t=56;break;case 2:t=44;break;case 3:t=32;break;case 4:t=24;break;case 5:t=22;break;default:t=20}return t},openWindow:function(e,t){let i=window.open(e,"_blank");i?i.focus():t&&t()},clearSelection:function(){var e=window.getSelection();e.empty?e.empty():e.removeAllRanges&&e.removeAllRanges()},getCookie:function(e){let t=window.document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},isMobile:{Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},any:function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()}},fromBase64toArrayBuffer:function(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0))).buffer},ArrayBuffertoBase64:function(e){return btoa(String.fromCharCode(...new Uint8Array(e)))},fromBase64toUint8Array:function(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))},Uint8ArraytoBase64:function(e){return btoa(String.fromCharCode(...e))},generateHOTPKey:async function(e,t){let i=window.crypto.subtle,s=this.padCounter(t),n=await i.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-1"}},!1,["sign"]);return await i.sign("HMAC",n,s)},padCounter:function(e){let t=new ArrayBuffer(8),i=new DataView(t),s=("0".repeat(64)+e.toString(2)).slice(-64);for(let e=0;e<64;e+=8){let t=parseInt(s.slice(e,e+8),2);i.setUint8(e/8,t)}return t},DT:function(e){let t=15&e[19];return((127&e[t])<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]).toString(2)},truncate:function(e){let t=this.DT(e);return parseInt(t,2)},generateHOTP:async function(e,t){let i=await this.generateHOTPKey(e,t),s=new Uint8Array(i);return("000000"+this.truncate(s)%10**8).slice(-8)},hmacSha256:async function(e,t){return await crypto.subtle.sign("HMAC",e,t)},stringToArrayBuffer:function(e){let{length:t}=e,i=new Uint8Array(t);for(let s=0;s<t;s++)i[s]=e.charCodeAt(s);return i},AES:{ALGO_NAME:"AES-GCM",decoder:new window.TextDecoder("utf-8"),encoder:new window.TextEncoder("utf-8"),decrypt:async function(e,t,i){let s=await window.crypto.subtle.importKey("raw",e,{name:"HKDF"},!1,["deriveKey","deriveBits"]),n={name:"HKDF",salt:new Uint8Array(32),info:Pe.stringToArrayBuffer("OMEMO Payload"),hash:"SHA-256"},a=await window.crypto.subtle.deriveBits(n,s,640);a=new Uint8Array(a);let o=a.slice(0,32),r=a.slice(32,64),c=a.slice(64);r=await crypto.subtle.importKey("raw",r,{name:"HMAC",hash:"SHA-256"},!1,["sign","verify"]);let l=await Pe.hmacSha256(r,i);if(l=l.slice(0,l.byteLength-16),Pe.ArrayBuffertoBase64(t)!==Pe.ArrayBuffertoBase64(l))return;o=await window.crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!0,["decrypt"]);let d=await window.crypto.subtle.decrypt({name:"AES-CBC",iv:c},o,i);return Pe.AES.decoder.decode(d)},encrypt:async function(e){let t=window.crypto.getRandomValues(new Uint8Array(32)),i=await window.crypto.subtle.importKey("raw",t,{name:"HKDF"},!1,["deriveKey","deriveBits"]),s={name:"HKDF",salt:new Uint8Array(32),info:Pe.stringToArrayBuffer("OMEMO Payload"),hash:"SHA-256"},n=await window.crypto.subtle.deriveBits(s,i,640);n=new Uint8Array(n);let a=n.slice(0,32),o=n.slice(32,64),r=n.slice(64);a=await window.crypto.subtle.importKey("raw",a,{name:"AES-CBC"},!0,["encrypt"]);let c=await Pe.AES.generateAESencryptedMessage(r,a,e);o=await crypto.subtle.importKey("raw",o,{name:"HMAC",hash:"SHA-256"},!1,["sign","verify"]);let l=await Pe.hmacSha256(o,c);return l=l.slice(0,l.byteLength-16),{keydata:new Uint8Array([...t,...new Uint8Array(l)]).buffer,payload:c}},generateAESencryptedMessage:async function(e,t,i){let s={name:"AES-CBC",iv:e},n=Pe.AES.encoder.encode(i);return await window.crypto.subtle.encrypt(s,t,n)},arrayBufferConcat:function(){let e=0,t=null;for(let i in arguments)t=arguments[i],e+=t.byteLength;let i=new Uint8Array(e),s=0;for(let e in arguments)t=arguments[e],i.set(new Uint8Array(t),s),s+=t.byteLength;return i.buffer},generateAESKey:async function(){let e={name:Pe.AES.ALGO_NAME,length:V.default.AES_KEY_LENGTH};return await window.crypto.subtle.generateKey(e,V.default.AES_EXTRACTABLE,["encrypt","decrypt"])}},getBrowser:function(){let e=navigator.userAgent,t=e.indexOf("Chrome")>-1,i=e.indexOf("MSIE")>-1||e.indexOf("Windows NT:")>-1,s=e.indexOf("Firefox")>-1,n=e.indexOf("Safari")>-1;t&&n&&(n=!1);let a=e.indexOf("OP")>-1;return t&&a&&(t=!1),n?"Safari":t?"Chrome":i?"IE":a?"Opera":s?"Firefox":"Unknown browser"},emoji:ge,images:ke,modals:Me,dialogs:Me.dialogs};const Ve=Pe;var Ge=i(23297),ze=i.n(Ge),He=i(24972),qe=i.n(He);const Ye=n().extend({constants:V.default,templates:Y,sounds:ae,client_translation_progress:ze(),utils:Ve,uuid:Ve.uuid},qe(),P);var Qe=i(25108);let Ze=Ye.constants,Je=Ye._,Ke=Ye.$,We=Ye.moment,Xe=Ye.client_translation_progress,et=Ye.xabber_i18next,tt=Ye.xabber_i18next_sprintf,it=Ye.uuid,st=Ye.utils;const nt=new(Backbone.Model.extend({defaults:{version_number:Ye.version_number,actual_version_number:Ye.version_number,audio:!1,video:!1,client_id:it().substring(0,8)},initialize:function(){this.env=Ye,this.fetchURLParams(),this.cleanUpStorage(),this.initDefaultLanguage(),this.detectMediaDevices(),window.navigator.mediaDevices&&(window.navigator.mediaDevices.ondevicechange=this.detectMediaDevices.bind(this)),this.check_config=new Ke.Deferred,this._settings=new this.Settings({id:"settings"},{storage_name:this.getStorageName(),fetch:"before"}),this.settings=this._settings.attributes;let e=window.location.host+window.location.pathname.replace(/\//g,"-");"-"==e[e.length-1]&&e.slice(0,e.length-1),this._cache=new Backbone.ModelWithStorage({id:`cache-${e}`},{storage_name:this.getStorageName(),fetch:"before"}),this.cache=this._cache.attributes,this.cache.client_id&&this.set("client_id",this.cache.client_id),this._cache.save("client_id",this.get("client_id")),this.extendFunction(),this.plyr_players=[],this.current_plyr_player=null,this.on("change:actual_version_number",this.throwNewVersion,this),this.on("quit",this.onQuit,this),this._version_interval=setInterval(this.readActualVersion.bind(this),6e5),window.onerror=(e,t,i,s,n)=>{st.dialogs.error(e+"\n"+t+"\n"+i+":"+s+"\n"+n)},window.ononline=()=>{this.disconnectWhenConnecting()}},initDefaultLanguage:function(){let e=window.navigator.language;100!=(Object.keys(Xe).find((t=>!e.indexOf(t)))||Ze.languages_another_locales[e]&&Object.keys(Xe).find((t=>!Ze.languages_another_locales[e].indexOf(t))))&&(e="en"),this.set("default_language",e)},loadTranslations:async function(e){return new Promise(((t,s)=>{let n={};if(n.lang=e,!n.lang&&(n.lang=this.settings.language),"default"==n.lang&&this.default_translation)return n.lang=this.get("default_language"),n.translation=this.default_translation,void t(n);i(8946)(`./${n.lang.replace(/-/g,"-r")}.js`).then((e=>{n.translation=e,t(n)}))}))},setLocale:function(e,t){let i=this.get("default_language"),s={[i]:{translation:this.default_translation}};e&&(s[e]={translation:t}),et.use(tt),et.init({lng:i,debug:!1,pluralSeparator:"-",resources:s}),e&&(et.changeLanguage(e),We.locale(e)),et.default_lang=et.getFixedT(i)},getOneLiners:function(){return et.exists("motivating_oneliner")?et.t("motivating_oneliner").replace(/\\'/g,"'").split("\n"):et.default_lang?et.default_lang("motivating_oneliner").replace(/\\'/g,"'").split("\n"):[]},getString:function(e,t){return et.exists(e)?et.t(e,{postProcess:"sprintf",sprintf:t}).replace(/\\'/g,"'").replace(/%+\d+[$]/g,"%").replace(/\\n/g,"&#10;"):et.default_lang?et.default_lang(e,{postProcess:"sprintf",sprintf:t}).replace(/\\'/g,"'").replace(/%+\d+[$]/g,"%").replace(/\\n/g,"&#10;"):""},getQuantityString:function(e,t,i){let s=et.language;if(!et.services.pluralResolver.getRule(s))return this.getString(`${e}_plural_0`,i||[t]);let n=parseInt(t,10);et.services.pluralResolver.options.compatibilityJSON="v0";let a=et.services.pluralResolver.getSuffix(s,n);return a=a.replace(/-/g,"_"),"en"!=et.language&&et.exists(`${e}_plural${a}`)||(a=et.services.pluralResolver.getSuffix("en",n),a=!a||a&&!a.length?"_0":"_1"),this.getString(`${e}_plural${a}`,i||[t])},error:function(e){Ze.LOG_LEVEL>=Ze.LOG_LEVEL_ERROR&&Qe.error(e)},warn:function(e){Ze.LOG_LEVEL>=Ze.LOG_LEVEL_WARN&&Qe.warn(e)},info:function(e){Ze.LOG_LEVEL>=Ze.LOG_LEVEL_INFO&&Qe.log(e)},debug:function(e){Ze.LOG_LEVEL>=Ze.LOG_LEVEL_DEBUG&&Qe.log(e)},pretty_last_seen:function(e){return e>=0&&e<=120?this.getString("last_seen_now"):e>120&&e<3600?this.getString("last_seen_minutes",[Math.trunc(e/60)]):e>=3600&&e<7200?this.getString("last_seen_hours"):e>=345600?this.getString("last_seen_date",[Ye.moment().subtract(e,"seconds").format("LL")]):this.getString("last_seen_date",[Ye.moment().subtract(e,"seconds").calendar().toLowerCase()])},readActualVersion:function(){if(!Ze.CHECK_VERSION)return;let e=new XMLHttpRequest;e.open("GET","version.js?"+it(),!0),e.onreadystatechange=()=>{if(4===e.readyState&&200===e.status){let t,i;e.onreadystatechange=null;try{t=e.responseText,i=JSON.parse(t.split("\n")[1].slice(1,-1))}catch(e){return}this.set({actual_version_number:i.version_number,version_description:i.version_description})}},e.send()},extendFunction:function(){String.prototype.trimStart||(String.prototype.trimStart=function(){return this.replace(/^\s+/,"")}),String.prototype.trimEnd||(String.prototype.trimEnd=function(){return Array.from(Array.from(this).reverse().join("").trimStart(/\s$/,"")).reverse().join("")})},onQuit:function(){window.indexedDB.databases?window.indexedDB.databases().then((e=>{e.forEach((e=>{window.indexedDB.deleteDatabase(e.name)}))})):this.accounts.forEach((e=>{indexedDB.deleteDatabase(e.cached_roster.database.name),indexedDB.deleteDatabase(e.cached_sync_conversations.database.name),indexedDB.deleteDatabase(e.cached_server_features.database.name)}));let e=this.getStorageName();for(let t in window.localStorage)(t.startsWith(e)||t.startsWith(Ze.STORAGE_NAME+"-"+Ze.STORAGE_VERSION+"-"+this.cache.id))&&window.localStorage.removeItem(t)},cacheFavicons:async function(){this._cache.save("favicon",URL.createObjectURL(await fetch(Ze.FAVICON_DEFAULT).then((e=>e.blob())))),this._cache.save("favicon_gray",URL.createObjectURL(await fetch(Ze.FAVICON_DEFAULT_GREY).then((e=>e.blob())))),this._cache.save("favicon_message",URL.createObjectURL(await fetch(Ze.FAVICON_MESSAGE).then((e=>e.blob()))))},detectMediaDevices:function(){this.getMediaDevices((e=>{this.set(e)}))},getMediaDevices:function(e,t){window.navigator&&window.navigator.mediaDevices&&window.navigator.mediaDevices.enumerateDevices().then((t=>{let i={audio:!1,video:!1};t.find((e=>"audioinput"===e.kind))&&(i.audio=!0),t.find((e=>"videoinput"===e.kind))&&(i.video=!0),e&&e(i)})).catch((e=>{t&&t(e)}))},throwNewVersion:function(){if(!Ze.CHECK_VERSION)return;let e=this.get("actual_version_number"),t=this.get("version_description");st.dialogs.common(this.getString("dialog_version_update__header",[Ze.CLIENT_NAME]),`${this.getString("dialog_version_update__confirm_text__new_version",[e])}<div class="new-version-description client-text-color-500">${t}</div>${this.getString("dialog_version_update__confirm_text__question_reload_page")}`,{ok_button:{text:this.getString("dialog_version_update__button_reload")},cancel_button:{text:this.getString("dialog_version_update__option_not_now")}}).done((e=>{e&&(this.accounts.models.forEach((e=>{e.cached_server_features.clearDataBase()})),window.location.reload(!0))}))},Settings:Backbone.ModelWithStorage.extend({defaults:{max_connection_retries:-1,idling:!0,idling_time:"default",notifications:!0,notifications_private:!0,notifications_group:!0,jingle_calls:!0,notifications_volume_enabled:!0,notifications_volume:.5,message_preview_private:!1,message_preview_group:!1,private_sound:!0,group_sound:!0,background:{type:"default"},side_panel:{theme:"dark",blur:!1,transparency:50},appearance:{blur:0,vignetting:0,color:"#E0E0E0"},main_color:"default",emoji_font:"default",sound_on_private_message:"beep_up",sound_on_group_message:"beep_up",call_attention:!0,load_media:"default",typing_notifications:"default",mapping_service:"default",desktop_autostart:!1,reconnection_logs:!1,sound_on_call:"marching-band-dave-girtsman",sound_on_dialtone:"marching-band-dave-girtsman",sound_on_connection:"_call_connecting",sound_on_attention:"attention",sound_on_auth_request:"_auth_request",sound_on_call_busy:"_phone_busy",hotkeys:"enter",avatar_shape:"circle",device_metadata:"default",language:"default",load_history:!0,mam_requests_limit:200,mam_messages_limit_start:1,mam_messages_limit:20}}),start:function(){this.check_config.done((e=>{this.cacheFavicons(),this.check_config=void 0,e&&this.trigger("start")}))},configure:function(e){this.loadTranslations(this.get("default_language")).then((e=>(this.default_translation=e.translation,this.loadTranslations()))).then((t=>{this.setLocale(t.lang,t.translation),Je.extend(Ze,Je.pick(e,["CONNECTION_URL","PERSONAL_AREA_URL","LOG_LEVEL","SYNCHRONIZATION_RSM_MAX","ASSETS_URL_PREFIX","CONTAINER_ELEMENT","XABBER_ACCOUNT_URL","REGISTER_XMPP_ACCOUNT","REGISTER_XMPP_ACCOUNT_URL","REGISTER_XMPP_ACCOUNT_TEXT","USE_SOCIAL_AUTH","USE_TAB_SIGNALS","CLIENT_RESOURCE","CONTAINER","CHECK_VERSION","DESKTOP_AUTOSTART_OPTION","DEFAULT_LOGIN_SCREEN","STORAGE_NAME_ENDING","CLIENT_NAME","SHORT_CLIENT_NAME","CLIENT_LOGO","TOOLBAR_LOGO","ENABLE_XABBER_ACCOUNT","SCREEN_ABOUT","DISABLE_LOOKUP_WS","PRIVACY_LOAD_MEDIA","PRIVACY_TYPING_NOTIFICATIONS","PRIVACY_MAPPING_SERVICE"]));let i,s=Ze["LOG_LEVEL_"+Ze.LOG_LEVEL];if(Ze.LOG_LEVEL=s||Ze.LOG_LEVEL_ERROR,Ze.MATERIAL_COLORS.includes(e.MAIN_COLOR)&&(Ze.MAIN_COLOR=e.MAIN_COLOR),"default"==this._settings.get("main_color")&&this._settings.set("main_color",Ze.MAIN_COLOR),this.trigger("update_main_color"),"default"===this._settings.get("load_media")&&null!=e.PRIVACY_LOAD_MEDIA?this._settings.set("load_media",e.PRIVACY_LOAD_MEDIA):"default"===this._settings.get("load_media")&&this._settings.set("load_media",!0),"default"===this._settings.get("typing_notifications")&&null!=e.PRIVACY_TYPING_NOTIFICATIONS?this._settings.set("typing_notifications",e.PRIVACY_TYPING_NOTIFICATIONS):"default"===this._settings.get("typing_notifications")&&this._settings.set("typing_notifications",!0),"default"===this._settings.get("device_metadata")&&null!=e.PRIVACY_DEVICE_METADATA_DEFAULT?this._settings.set("device_metadata",e.PRIVACY_DEVICE_METADATA_DEFAULT):"default"===this._settings.get("device_metadata")&&this._settings.set("device_metadata","contacts"),"default"===this._settings.get("mapping_service")&&null!=e.PRIVACY_MAPPING_SERVICE?this._settings.set("mapping_service",e.PRIVACY_MAPPING_SERVICE):"default"===this._settings.get("mapping_service")&&this._settings.set("mapping_service",!0),"default"===this._settings.get("idling_time")&&null!=e.IDLING_DEFAULT_TIMEOUT?this._settings.set("idling_time",e.IDLING_DEFAULT_TIMEOUT):"default"===this._settings.get("idling_time")&&this._settings.set("idling_time",Ze.IDLING_DEFAULT_TIMEOUT),window.xabber=this,Je.extend(window,Ye),e.SYNCHRONIZATION_RSM_MAX&&(Ze.SYNCHRONIZATION_RSM_MAX=e.SYNCHRONIZATION_RSM_MAX),e.ASSETS_URL_PREFIX&&(Ze.ASSETS_URL_PREFIX=e.ASSETS_URL_PREFIX),e.BACKGROUND_IMAGES_XML_URL&&(Ze.BACKGROUND_IMAGES_XML_URL=e.BACKGROUND_IMAGES_XML_URL),e.BACKGROUND_PATTERNS_XML_URL&&(Ze.BACKGROUND_PATTERNS_XML_URL=e.BACKGROUND_PATTERNS_XML_URL),e.CONTAINER_ELEMENT&&(Ze.CONTAINER_ELEMENT=e.CONTAINER_ELEMENT),e.REGISTRATION_DOMAINS&&(Ze.REGISTRATION_DOMAINS=e.REGISTRATION_DOMAINS),e.LOGIN_DOMAINS&&(Ze.LOGIN_DOMAINS=e.LOGIN_DOMAINS),e.TRUSTED_DOMAINS&&(Ze.TRUSTED_DOMAINS=e.TRUSTED_DOMAINS),e.RECOMMENDED_DOMAIN&&(Ze.RECOMMENDED_DOMAIN=e.RECOMMENDED_DOMAIN),e.DOWNTIME_RECONNECTION_TIMEOUT&&(Ze.DOWNTIME_RECONNECTION_TIMEOUT=e.DOWNTIME_RECONNECTION_TIMEOUT),e.IDLING_MINIMAL_TIMEOUT&&(Ze.IDLING_MINIMAL_TIMEOUT=e.IDLING_MINIMAL_TIMEOUT),e.IDLING_MAXIMUM_TIMEOUT&&(Ze.IDLING_MAXIMUM_TIMEOUT=e.IDLING_MAXIMUM_TIMEOUT),e.PING_SENDING_INTERVAL&&(Ze.PING_SENDING_INTERVAL=e.PING_SENDING_INTERVAL),null!=e.REGISTRATION_BUTTON&&(Ze.REGISTRATION_BUTTON=e.REGISTRATION_BUTTON),null!=e.REGISTRATION_CUSTOM_DOMAIN&&(Ze.REGISTRATION_CUSTOM_DOMAIN=e.REGISTRATION_CUSTOM_DOMAIN),null!=e.LOGIN_CUSTOM_DOMAIN&&(Ze.LOGIN_CUSTOM_DOMAIN=e.LOGIN_CUSTOM_DOMAIN),e.SHORT_CLIENT_DESCRIPTION&&(Ze.SHORT_CLIENT_DESCRIPTION=e.SHORT_CLIENT_DESCRIPTION),e.DEFAULT_EMOJI_FONT&&(Ze.DEFAULT_EMOJI_FONT=e.DEFAULT_EMOJI_FONT),e.EMOJI_FONTS_LIST&&Je.isObject(e.EMOJI_FONTS_LIST)?Ze.EMOJI_FONTS_LIST=e.EMOJI_FONTS_LIST:Object.keys(Ze.EMOJI_FONTS_LIST).forEach((e=>{let t=Ze.EMOJI_FONTS_LIST[e];t.is_outside_url||(t.url=Ze.ASSETS_URL_PREFIX+t.url)})),"default"==this._settings.get("emoji_font")&&this._settings.set("emoji_font",Ze.DEFAULT_EMOJI_FONT),e.CLIENT_NAME&&!e.SHORT_CLIENT_NAME?Ze.SHORT_CLIENT_NAME=e.CLIENT_NAME:!e.CLIENT_NAME&&e.SHORT_CLIENT_NAME&&(Ze.CLIENT_NAME=e.SHORT_CLIENT_NAME),e.TURN_SERVERS_LIST&&(Je.isArray(e.TURN_SERVERS_LIST)?Je.extend(Ze,{TURN_SERVERS_LIST:e.TURN_SERVERS_LIST}):Je.isObject(e.TURN_SERVERS_LIST)&&Object.keys(e.TURN_SERVERS_LIST).length&&Je.extend(Ze,{TURN_SERVERS_LIST:[e.TURN_SERVERS_LIST]})),Ze.FAVICON_DEFAULT=Ze.ASSETS_URL_PREFIX+Ze.FAVICON_DEFAULT,Ze.FAVICON_DEFAULT_GREY=Ze.ASSETS_URL_PREFIX+Ze.FAVICON_DEFAULT_GREY,Ze.FAVICON_MESSAGE=Ze.ASSETS_URL_PREFIX+Ze.FAVICON_MESSAGE,Ze.BACKGROUND_IMAGE=Ze.ASSETS_URL_PREFIX+Ze.BACKGROUND_IMAGE,Ze.CLIENT_LOGO=Ze.ASSETS_URL_PREFIX+Ze.CLIENT_LOGO,Ze.TOOLBAR_LOGO=Ze.ASSETS_URL_PREFIX+Ze.TOOLBAR_LOGO,!Ze.CONNECTION_URL)return st.dialogs.error(this.getString("client_error__missing_connection_url")),void this.check_config.resolve(!1);if(Ze.USE_TAB_SIGNALS){try{i=new BroadcastChannel("xabber-web")}catch(e){Qe.log(e)}i&&(i.onmessage=e=>{"1"!==e.data||i.disabled_client||i.postMessage("2"),"2"===e.data&&(i.disabled_client=!0)},i.postMessage("1"))}if(i&&i.disabled_client)return st.dialogs.error(this.getString("client_error__another_tab_active")),void this.check_config.resolve(!1);let n=this;Backbone.useLocalStorage||this.cache.ignore_localstorage_warning||st.dialogs.warning(this.getString("client_warning__no_local_storage"),[{name:this.getString("ignore"),text:this.getString("client_error__option_show_msg_again")}]).done((function(e){e&&e.ignore&&n._cache.save("ignore_localstorage_warning",!0)})),this.requestNotifications().done((function(e){let t=new Ke.Deferred;if(t.done((()=>{n._cache.save("notifications",e),n._cache.save("endpoint_key",void 0),n.check_config.resolve(!0)})),"system"!==n._settings.get("emoji_font")&&Object.keys(Ze.EMOJI_FONTS_LIST).length){let e,i=Ze.EMOJI_FONTS_LIST[n._settings.get("emoji_font")];i&&i.url?(e=i.url,n.loadEmojiFont(e,t)):t.resolve()}else t.resolve()}))}))},fetchURLParams:function(){let e=window.location.href.split(/[?#]/),t=window.location.href.split("#");if(this.url_params={},e.length>1){let t,i,s=e[1].split("&");for(t=0;t<s.length;t++)i=s[t].split("="),1===i.length?this.url_params[i[0]]=null:this.url_params[i[0]]=i[1]}t.length>1&&(this.url_params.anchor=e[1]),window.history.pushState(null,null,window.location.pathname)},getStorageName:function(){let e=Ze.STORAGE_NAME+"-"+Ze.STORAGE_VERSION;return Ze.STORAGE_NAME_ENDING&&(e=e+"-"+Ze.STORAGE_NAME_ENDING),e},cleanUpStorage:function(){let e=Ze.STORAGE_NAME+"-"+Ze.STORAGE_VERSION;for(let t in window.localStorage)t.startsWith("xabber")&&!t.startsWith(e)&&window.localStorage.removeItem(t)},requestNotifications:function(){let e=new Ke.Deferred,t=this;return window.Notification?"granted"===window.Notification.permission?e.resolve(!0):(t.cache.ignore_notifications_warning||(t.notifications_placeholder=new t.NotificationsPlaceholder),e.resolve(!1)):e.resolve(null),e.promise()},updateFaviconConnected:function(){let e=!1;this.accounts.each((t=>{t.get("enabled")&&(!t.isConnected()||t.session&&t.session.get("auth_failed"))&&(e=!0)})),this.updateAllMessageCounterOnDisconnect(e)},disconnectWhenConnecting:function(e){this.accounts.each((e=>{e.session&&e.connection&&e.get("enabled")&&!e.session.get("reconnecting")&&!e.session.get("connected")&&e.activate()}))},extendWith:function(){return Je.reduce(arguments,(function(e,t){return e}),this)}}));var at=i(33659),ot=i(25108);let rt=nt.env,ct=rt.constants,lt=rt.templates.base,dt=rt.utils,ht=rt.uuid,gt=rt.$,ut=rt._;nt.ViewPath=function(e){this.path=e.split("."),this.applyTo=function(e){let t=e;for(let e=0;e<this.path.length;e++)if(!(t=ut.result(t,this.path[e])))return null;return t}},nt.BasicView=Backbone.View.extend({template:function(){return""},initialize:function(e){e||(e={}),this.parent=e.parent,this.vname=e.vname,this.children={},this.$el.addClass(e.classlist),this.template||(ot.error(this),ot.log(this.template)),e.el||this.$el.html(this.template(ut.extend({view:this},ct))),ut.isUndefined(this.ps_selector)||(this.ps_container=this.$(this.ps_selector),this.ps_container.length&&this.ps_container.perfectScrollbar(ut.extend(this.ps_settings||{},nt.ps_settings))),this.data=new Backbone.Model({visible:!1}),this.data.on("change:visible",this.onChangedVisibility,this),nt.on("update_css",(function(e){this.updateCSS&&this.updateCSS(),e&&e.size_changed&&this.windowResized&&this.windowResized()}),this),this._initialize&&this._initialize(e),this.__initialize&&this.__initialize(e)},isVisible:function(){return this.data.get("visible")},onChangedVisibility:function(){},show:function(){this.onShow.apply(this,arguments),this.data.set("visible",!0),this.trigger("after_show",this),this.updateScrollBar()},hide:function(){this.trigger("before_hide",this),this.data.set("visible",!1),this.onHide.apply(this,arguments)},onShow:function(){this.render.apply(this,arguments),ut.each(this.children,(function(e){e.render.apply(e,arguments)}))},onHide:function(){ut.each(this.children,(function(e){e.onHide.apply(e,arguments)}))},detach:function(){this.$el.detach()},child:function(e){return this.children[e]},addChild:function(e,t,i){let s;return t instanceof Backbone.View?(s=t,s.parent=this):s=new t(ut.extend({parent:this,vname:e},i)),this.children[e]=s,s},removeChild:function(e,t){t||(t={});let i=this.children[e];i&&(delete this.children[e],t.soft?i.detach():i.trigger("remove")&&i.remove())},removeChildren:function(){ut.each(ut.keys(this.children),(e=>{this.removeChild(e)}))},setCustomCss:function(e){this.$el.css(e)},removeCustomCss:function(){this.$el.removeAttr("style")},saveScrollBarOffset:function(){if(this.ps_container&&this.isVisible()){void 0===this.data.get("scroll_top")&&this.data.set("scroll_top",this.getScrollTop())}},updateScrollBar:function(){if(this.ps_container&&this.isVisible()){let e=this.data.get("scroll_top");void 0===e?this.ps_container.perfectScrollbar("update"):(this.data.set("scroll_top",void 0),this.scrollTo(e))}return this},scrollTo:function(e){this.ps_container[0].scrollTop=e,this.ps_container.perfectScrollbar("update")},scrollToTop:function(){this.scrollTo(0)},scrollToBottom:function(){let e=this.ps_container[0].scrollHeight,t=this.ps_container[0].offsetHeight;this.scrollTo(e-t)},scrollToChild:function(e){let t=ut.reduce(e.prevAll(),(function(e,t){return e+t.offsetHeight+2}),0);this.scrollTo(t)},scrollToChildPlus:function(e,t){let i=ut.reduce(e.prevAll(),(function(e,t){return e+t.offsetHeight+2}),0);t=t||0,this.scrollTo(i+t)},getScrollTop:function(){return this.ps_container[0].scrollTop},getScrollBottom:function(){let e=this.ps_container[0].scrollTop;return this.ps_container[0].scrollHeight-(e+this.ps_container[0].offsetHeight)},getPercentScrolled:function(){if(this.isScrolledToTop())return 0;return this.ps_container[0].scrollTop/(this.ps_container[0].scrollHeight-this.ps_container[0].offsetHeight)},isScrolledToTop:function(){return 0===this.getScrollTop()},isScrolledToBottom:function(){let e=this.ps_container[0].scrollTop;return this.ps_container[0].scrollHeight-(e+this.ps_container[0].offsetHeight)<10},destroyView:function(){this.data.set("removed",!0),this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}}),nt.NodeView=nt.BasicView.extend({onShow:function(e,t){return nt.body.data.get("contact_details_view")&&"right_contact"===this.vname?(nt.body.data.get("contact_details_view").scrollTo(nt.body.data.get("contact_details_view").data.get("scroll_top")),void nt.body.data.set("contact_details_view",null)):e.close_settings&&this.children.main_overlay?(this.children.main_overlay.hide(),void this.children.main_overlay.$el.detach()):(t&&t.main_overlay||ut.each(this.children,(function(e){e.hide()})),t&&t.main_overlay||this.$el.children().detach(),t=this.patchTree(t,e)||t,ut.each(this.children,((i,s)=>{t.main_overlay&&"main_overlay"!=s||ut.has(t,s)&&("login"!==s&&this.$el.append(i.$el),this.$el.switchClass("hidden","login"===s),i.show(e,t[s]))})),this.render(e))},onHide:function(e){ut.each(this.children,(function(t){t.hide(e)}))},patchTree:function(){}}),nt.Container=nt.BasicView.extend({className:"container",render:function(e,t){if(ut.isNull(t))return void this.$el.addClass("hidden");this.$el.removeClass("hidden");let i=t.applyTo(e);return this.$el.children().detach(),this.view!==i&&this.onHide(e),this.view=i,this.view&&(this.$el.append(this.view.$el),this.view.show(e)),this},onHide:function(e){this.view&&this.view.hide(e),this.view=null}}),nt.SearchView=nt.BasicView.extend({events:{"keydown .search-input":"keyUpOnSearch","focusout .search-input":"clearSearchSelection","click .close-search-icon":"clearSearch","click .list-item":"onClickItem"},keyUpOnSearch:function(e){e.stopPropagation(),this.ids=this.$(".list-item:not(.hidden)").map((function(){return gt(this).data("id")})).toArray();let t=this.getSelectedItem();if(e.keyCode===ct.KEY_ARROW_DOWN)return this.selectNextItem();if(e.keyCode===ct.KEY_ARROW_UP)return this.selectPreviousItem();if(e.keyCode===ct.KEY_ENTER&&t.length)return e.preventDefault(),this.onEnterPressed(t);if(e.keyCode===ct.KEY_ESCAPE&&!nt.body.screen.get("right_contact")){if(e.preventDefault(),gt(e.target).val())return this.clearSearch();this.close()}this.updateSearch()},getSelectedItem:function(){return this.$('.list-item[data-id="'+this.selection_id+'"]')},selectItem:function(e,t){if(!e)return;this.clearSearchSelection();let i=this.$('.list-item[data-id="'+e+'"]');i.length?this.selection_id=e:(this.ps_container[0].scrollTop=0,i=this.$(".list-item:visible").first(),this.selection_id=i.data("id")),"down"===t&&(i[0].clientHeight+i[0].offsetTop>=this.ps_container[0].clientHeight+this.ps_container[0].scrollTop||i[0].clientHeight+i[0].offsetTop<this.ps_container[0].scrollTop)&&(this.ps_container[0].scrollTop=i[0].offsetTop),"up"===t&&(i[0].offsetTop<=this.ps_container[0].scrollTop||i[0].offsetTop>this.ps_container[0].scrollTop+this.ps_container[0].clientHeight)&&(this.ps_container[0].scrollTop=i[0].offsetTop),i.addClass("selected")},selectNextItem:function(){this.selectItem(this.ids[this.ids.indexOf(this.selection_id)+1],"down")},selectPreviousItem:function(){this.selectItem(this.ids[this.ids.indexOf(this.selection_id)-1],"up")},updateSearch:function(){if(this._update_search_timeout)this.query=!0;else{let e=this.$(".search-input").val();this.$(".search-form").switchClass("active",e),this.clearSearchSelection(),e?this.search(e.toLowerCase()):(this.$(".list-item").removeClass("hidden"),this.onEmptyQuery()),this.updateScrollBar(),this.query=!1,this._update_search_timeout=setTimeout((()=>{this._update_search_timeout=null,this.query&&this.updateSearch()}),150)}},clearSearch:function(e){e&&e.preventDefault(),this.$(".search-input").val(""),this.updateSearch()},clearSearchSelection:function(e){this.selection_id=null,this.$(".list-item.selected").removeClass("selected")},searchAll:function(){this.$(".list-item").removeClass("hidden")},keyUpOnSearchWithQuery:function(){},close:function(){},search:function(){},onEnterPressed:function(){},onEmptyQuery:function(){},onClickItem:function(){}}),nt.SearchPanelView=nt.SearchView.extend({events:{"keydown .search-input":"keyUpOnSearch","focusout .search-input":"clearSearchSelection","click .close-search-icon":"clearSearch","click .list-item":"onClickItem","click .btn-search-messages":"updateSearchWithMessages"},updateSearchWithMessages:function(e){this.search_messages=!0,this.updateSearch()},keyUpOnSearch:function(e){if(e.stopPropagation(),gt(e.target).val())return void this.keyUpOnSearchWithQuery(e);this.ids=this.$(".list-item:not(.hidden)").map((function(){return gt(this).data("id")})).toArray();let t=this.getSelectedItem();if(e.keyCode===ct.KEY_ARROW_DOWN)return this.selectNextItem();if(e.keyCode===ct.KEY_ARROW_UP)return this.selectPreviousItem();if(e.keyCode===ct.KEY_ENTER&&t.length)return e.preventDefault(),this.onEnterPressed(t);if(e.keyCode===ct.KEY_ESCAPE&&!nt.body.screen.get("right_contact")){if(e.preventDefault(),gt(e.target).val())return this.clearSearch();this.close()}this.updateSearch()},onScrollY:function(e){if(nt.all_searched_messages&&nt.all_searched_messages.length&&this.queryid&&!this._loading_messages&&!this._messages_loaded&&this.isScrolledToBottom()){this._loading_messages=!0,e=e||{},this.queryid=ht(),e.query_id=this.queryid;let t=nt.accounts.connected;t.forEach((t=>{let i=nt.all_searched_messages.find((e=>e.account.get("jid")===t.get("jid")));i&&!t.searched_msgs_loaded&&(e.account=t,e.before=i.get("archive_id"),this.MAMRequest(this.query_text,e,(i=>{ut.each(i,(i=>{let s,n=t.chats.receiveChatMessage(i,ut.extend({is_searched:!0},e)),a=nt.all_searched_messages.indexOf(n);n&&(s=new nt.MessageItemView({model:n}),0===a?s.$el.appendTo(this.$(".messages-list-wrap .messages-list")):s.$el.insertBefore(this.$(".messages-list-wrap .message-item").eq(-a)))})),this.$(".messages-list-wrap").switchClass("hidden",!this.$(".messages-list").children().length),this.updateScrollBar(),this._loading_messages=!1})))})),t.filter((e=>e.searched_msgs_loaded)).length===t.length&&(this._messages_loaded=!0)}},onScroll:function(){},keyUpOnSearchWithQuery:function(e){e.stopPropagation(),this.ids=this.$(".searched-lists-wrap .list-item:not(.hidden)").map((function(){return gt(this).data("id")})).toArray();let t=this.getSelectedItemWithQuery();if(e.keyCode===ct.KEY_ARROW_DOWN)return this.selectNextItemWithQuery();if(e.keyCode===ct.KEY_ARROW_UP)return this.selectPreviousItemWithQuery();if(e.keyCode===ct.KEY_ENTER&&t.length)return e.preventDefault(),this.onEnterPressed(t);if(e.keyCode===ct.KEY_ENTER&&(this.search_messages=!0),e.keyCode===ct.KEY_ESCAPE&&!nt.body.screen.get("right_contact")){if(e.preventDefault(),gt(e.target).val())return this.clearSearch();this.close()}this.updateSearch()},getSelectedItemWithQuery:function(){return this.$('.searched-lists-wrap .list-item[data-id="'+this.selection_id+'"]')},selectItemWithQuery:function(e,t){if(!e)return void(this.isScrolledToBottom()&&this.onScrollY());this.clearSearchSelection();let i=this.$('.searched-lists-wrap .list-item[data-id="'+e+'"]');i.length?this.selection_id=e:(this.ps_container[0].scrollTop=0,i=this.$(".searched-lists-wrap .list-item:visible").first(),this.selection_id=i.data("id")),"down"===t&&(i[0].clientHeight+i[0].offsetTop+i.parent().parent()[0].offsetTop>=this.ps_container[0].clientHeight+this.ps_container[0].scrollTop||i[0].clientHeight+i[0].offsetTop+i.parent().parent()[0].offsetTop<this.ps_container[0].scrollTop)&&(this.ps_container[0].scrollTop=i[0].offsetTop+i.parent().parent()[0].offsetTop),"up"===t&&(i[0].offsetTop+i.parent().parent()[0].offsetTop<=this.ps_container[0].scrollTop||i[0].offsetTop+i.parent().parent()[0].offsetTop>this.ps_container[0].scrollTop+this.ps_container[0].clientHeight)&&(this.ps_container[0].scrollTop=i[0].offsetTop+i.parent().parent()[0].offsetTop),i.addClass("selected")},selectNextItemWithQuery:function(){this.selectItemWithQuery(this.ids[this.ids.indexOf(this.selection_id)+1],"down")},selectPreviousItemWithQuery:function(){this.selectItemWithQuery(this.ids[this.ids.indexOf(this.selection_id)-1],"up")},search:function(e){this.$(this.main_container).addClass("hidden"),clearTimeout(this.keyup_timeout),this.keyup_timeout=null,this.query_text=e;let t=(0,at.transliterate)(e);this.$(".contacts-list").html(""),this.$(".chats-list").html(""),nt.accounts.connected.forEach((e=>{if(e.server_features.get(Strophe.NS.XABBER_FAVORITES)){let t=e.chats.getSavedChat();t.set("opened",!0),t.item_view.updateLastMessage()}}));let i=ut.clone(nt.chats);i.comparator="timestamp",i.sort("timestamp").forEach((i=>{let s=i.get("jid").toLowerCase(),n=i.contact?i.contact.get("roster_name")||i.contact.get("name"):i.get("name");if(n&&(n=n.toLowerCase()),(i.get("timestamp")||i.get("saved"))&&(n.indexOf(e)>-1||s.indexOf(e)>-1||n.indexOf(t)>-1||s.indexOf(t)>-1||i.get("saved")&&e.includes("saved"))){let s=n.indexOf(e)>-1||n.indexOf(t)>-1?"by-name":"by-jid",a=nt.chats_view.child(i.get("id"));a&&(a=a.$el.clone().addClass(s)),a&&(this.$(".chats-list-wrap").removeClass("hidden"),"by-name"===s?this.$(".chats-list").prepend(a):this.$(".chats-list .by-jid").length?a.insertBefore(this.$(".chats-list .by-jid").first()):this.$(".chats-list").append(a),a.click((()=>{this.$(".list-item.active").removeClass("active"),nt.chats_view.openChat(i.item_view,{screen:nt.body.screen.get("name")}),a.addClass("active")})))}})),nt.accounts.each((i=>{i.contacts.each((s=>{let n=s.get("jid").toLowerCase(),a=s.get("roster_name")||s.get("name"),o=i.chats.get(s.hash_id),r=o&&o.id;if(a&&(a=a.toLowerCase()),(!r||r&&!this.$('.chat-item[data-id="'+r+'"]').length)&&(a.indexOf(e)>-1||n.indexOf(e)>-1||a.indexOf(t)>-1||n.indexOf(t)>-1)){let o=a.indexOf(e)>-1||a.indexOf(t)>-1?"by-name":"by-jid",r=nt.contacts_view.$(`.account-roster-wrap[data-jid="${i.get("jid")}"] .list-item[data-jid="${n}"]`).first().clone().data("account-jid",i.get("jid"));r.attr({"data-color":i.settings.get("color"),"data-account":i.get("jid")}).addClass(o).prepend(gt('<div class="account-indicator ground-color-700"/>')),"by-name"===o?this.$(".contacts-list").prepend(r):this.$(".contacts-list .by-jid").length?r.insertBefore(this.$(".contacts-list .by-jid").first()):this.$(".contacts-list").append(r),r.click((()=>{this.$(".list-item.active").removeClass("active");let e=i.chats.getChat(s);e&&nt.chats_view.openChat(e.item_view,{clear_search:!1,screen:nt.body.screen.get("name")}),r.addClass("active")}))}}))})),this.$(".chats-list-wrap").switchClass("hidden",!this.$(".chats-list").children().length),this.$(".pinned-chat-list").switchClass("hidden",e),this.$(".contacts-list-wrap").switchClass("hidden",!this.$(".contacts-list").children().length),this.$(".messages-list-wrap").addClass("hidden").find(".messages-list").html(""),e.length>=2&&this.search_messages?(this.search_messages=!1,this.queryid=ht(),this.searchMessages(e,{query_id:this.queryid})):e.length>=2&&!this.search_messages&&this.$(".btn-search-messages").showIf(e)},searchMessages:function(e,t){this._loading_messages=!0,this._messages_loaded=!1,this.$(".messages-list-wrap").showIf(e),this.$(".btn-search-messages").hideIf(e),this.$(".messages-list-wrap .messages-list").html(rt.templates.contacts.preloader()),!(t=t||{}).max&&(t.max=nt.settings.mam_messages_limit),!t.before&&(t.before=""),nt.all_searched_messages=new nt.SearchedMessages;let i=nt.accounts.connected;i.forEach((i=>{i.searched_msgs_loaded=!1,t.account=i,this.MAMRequest(e,t,(e=>{this.$(".messages-list-wrap .messages-list").html(""),this.query_text&&(ut.each(e,(e=>{if(!this.query_text)return;let s,n=i.chats.receiveChatMessage(e,ut.extend({is_searched:!0},t)),a=nt.all_searched_messages.indexOf(n);n&&(s=new nt.MessageItemView({model:n}),0===a?s.$el.appendTo(this.$(".messages-list-wrap .messages-list")):s.$el.insertBefore(this.$(".messages-list-wrap .message-item").eq(-a)))})),this.$(".messages-list-wrap").switchClass("hidden",!this.$(".messages-list").children().length),this.updateScrollBar(),this._loading_messages=!1)}))})),i.filter((e=>e.searched_msgs_loaded)).length===i.length&&(this._messages_loaded=!0)},MAMRequest:function(e,t,i,s){let n=[],a=t.account,o=ht(),r=$iq({type:"set"}).c("query",{xmlns:Strophe.NS.MAM,queryid:o}).c("x",{xmlns:Strophe.NS.DATAFORM,type:"submit"}).c("field",{var:"FORM_TYPE",type:"hidden"}).c("value").t(Strophe.NS.MAM).up().up().c("field",{var:"withtext"}).c("value").t(e).up().up().up().cnode(new Strophe.RSM(t).toXML()),c=a.connection.addHandler((e=>(gt(e).find("result").attr("queryid")===o&&t.query_id===this.queryid&&n.push(e),!0)),rt.Strophe.NS.MAM);a.sendIQFast(r,(function(e){a.connection.deleteHandler(c);let t=gt(e).find(`fin[xmlns="${Strophe.NS.MAM}"]`);if(t.length&&t.attr("queryid")===o){"true"===t.attr("complete")&&(a.searched_msgs_loaded=!0)}i&&i(n)}),(function(){a.connection.deleteHandler(c),s&&s()}))},clearSearch:function(e){e&&e.preventDefault(),this.$(".search-input").val(""),this.updateSearch(),this.onEmptyQuery()},onEmptyQuery:function(){nt.accounts.forEach((function(e){e.searched_msgs_loaded=!1})),this.query_text=null,this.queryid=null,this._messages_loaded=!1,this._loading_messages=!1,this.$(this.main_container).removeClass("hidden"),this.$(".chats-list-wrap").addClass("hidden"),this.$(".pinned-chat-list").removeClass("hidden"),this.$(".contacts-list-wrap").addClass("hidden"),this.$(".messages-list-wrap").addClass("hidden")}}),nt.InputWidget=Backbone.View.extend({field_type:"text",template:lt.input_widget,events:{"click .field-text":"showInput","click .btn-rename":"showInput","keydown .field-input":"keyDown","keyup .field-input":"keyUp","focusout .field-input":"changeValue"},initialize:function(){this.$el.html(this.template({field_name:this.field_name,field_type:this.field_type,placeholder:this.placeholder})),this.$value=this.$(".field-text"),this.$btn=this.$(".btn-rename"),this.$input=this.$(".field-input"),this.updateValue(),this.data=new Backbone.Model({input_mode:!1}),this.data.on("change:input_mode",this.onChangedInputMode,this),this.bindModelEvents()},bindModelEvents:function(){this.model.on("change:"+this.model_field,this.updateValue,this)},showInput:function(){this.data.set("input_mode",!0),this.updateValue()},onChangedInputMode:function(){let e=this.data.get("input_mode");this.$value.hideIf(e),this.$btn.hideIf(e),this.$input.showIf(e).focus()},keyDown:function(e){e.stopPropagation();let t=this.getValue();e.keyCode===ct.KEY_ENTER?this.changeValue():e.keyCode!==ct.KEY_ESCAPE||nt.body.screen.get("right_contact")||(this.$input.removeClass("changed").val(t),this.data.set("input_mode",!1))},keyUp:function(e){let t=this.getValue();this.$input.switchClass("changed",this.$input.val()!==t)},getValue:function(){return this.model.get(this.model_field)},setValue:function(e){this.model.save(this.model_field,e)},changeValue:function(){let e=this.getValue(),t=this.$input.removeClass("changed").val();t!==e&&this.setValue(t),this.data.set("input_mode",!1)},updateValue:function(){let e=this.getValue();this.$value.text(e),this.$input.val(e)}}),nt.Body=nt.NodeView.extend({className:"client-body-wrap",_initialize:function(){this.vname="body",this.data.set("visible",!0),this.screen=new Backbone.Model,this.screen_map=new Backbone.Model,this.screen.on("change",this.update,this),this.screen_map.on("change",this.onScreenMapChanged,this),gt(ct.CONTAINER_ELEMENT).append(this.$el),this.updateBackground(),this.updateMainColor(),this.updateAvatarShape(),gt("#modals").insertAfter(this.$el),nt.on("update_main_color",this.updateMainColor,this),nt.on("update_avatar_shape",this.updateAvatarShape,this)},addScreen:function(e,t){this.screen_map.set(e,t)},updateMainColor:function(){this.$el.attr("data-main-color",nt.settings.main_color),this.$el.siblings("#modals").attr("data-main-color",nt.settings.main_color),gt(window.document).find(".login-container").attr("data-main-color",nt.settings.main_color)},updateAvatarShape:function(){let e=nt.settings.avatar_shape;gt(ct.CONTAINER_ELEMENT).switchClass("non-circle-avatars","circle"!=e),gt(ct.CONTAINER_ELEMENT).switchClass("octagon-avatars","octagon"===e),gt(ct.CONTAINER_ELEMENT).switchClass("hexagon-avatars","hexagon"===e),gt(ct.CONTAINER_ELEMENT).switchClass("pentagon-avatars","pentagon"===e),gt(ct.CONTAINER_ELEMENT).switchClass("rounded-avatars","rounded"===e),gt(ct.CONTAINER_ELEMENT).switchClass("star-avatars","star"===e),gt(ct.CONTAINER_ELEMENT).switchClass("squircle-avatars","squircle"===e)},updateBackground:function(){let e=nt.settings.background||{};e.image?"repeating-pattern"===e.type?this.$el.css({"background-repeat":"repeat","background-size":"unset","background-image":`url("${dt.images.getCachedBackground(e.image)}")`}):"image"===e.type&&this.$el.css({"background-repeat":"no-repeat","background-size":"cover","background-image":`url("${dt.images.getCachedBackground(e.image)}")`}):this.$el.css({"background-repeat":"repeat","background-size":"unset","background-image":`url("${ct.BACKGROUND_IMAGE}")`,"box-shadow":"none"}),this.updateBoxShadow(nt.settings.appearance.vignetting)},updateBoxShadow:function(e){(e=Number(e))?this.$el.css({"box-shadow":`${e}px 0 100px 1px rgba(0, 0, 0, 0.7) inset, -${e}px 0 100px -1px rgba(0, 0, 0, 0.7) inset`}):this.$el.css({"box-shadow":"unset"})},updateBlur:function(e){e=Number(e),nt.blur_overlay.$el.css({"backdrop-filter":`blur(${e}px)`,"-webkit-backdrop-filter":`blur(${e}px)`})},setScreen:function(e,t,i){nt.error(e),i=i||{},gt(window).unbind("keydown.contact_panel"),nt.notifications_placeholder&&nt.main_panel.$el.addClass("notifications-request"),gt(ct.CONTAINER_ELEMENT).switchClass("xabber-login","login"===e),gt(ct.CONTAINER_ELEMENT).switchClass("on-xabber-login","login"!==e);let s,n={stamp:ut.uniqueId()};if(e&&!this.isScreen(e)&&(n.name=e),t&&t.show_placeholder||(n.show_placeholder=null),t&&t.right&&"group_invitation"===t.right||i.right_force_close?n.right_contact=null:n.right_contact=nt.body.screen.get("right_contact"),(!t&&nt.body.screen.get("right")||t&&!t.right&&null!==t.right&&nt.body.screen.get("right"))&&(n.right=nt.body.screen.get("right")),n=ut.extend(n,t),ut.isUndefined(n.chat_item)&&(s=this.screen.get("chat_item"),s&&s.content&&(s.content._prev_scrolltop=s.content.getScrollTop()||s.content._scrolltop)),e){let t=this.screen_map.get(e);t&&t.main_overlay?this.screen.get("previous_screen")||(n.previous_screen={...this.screen.attributes}):n.previous_screen=void 0}(!t||!t.notifications)&&(n.notifications=!1),this.screen.set(ut.extend(n,t),i)},isScreen:function(e){return this.screen.get("name")===e},onScreenMapChanged:function(){let e=this.screen.get("name");ut.has(this.screen_map.changed,e)&&this.update()},showChatPlaceholder:function(){try{nt.right_panel.$el.children().detach(),nt.right_panel.$el.append(nt.chat_placeholder.$el)}catch(e){ot.log(e)}},update:function(){let e=this.screen.attributes,t=this.screen_map.get(e.name);void 0!==t&&(this.onShow(e,t),this.model.trigger("update_screen",this.screen.get("name")),this.model.trigger("update_layout",{screen_changed:e.name}))}}),nt.ToolbarView=nt.BasicView.extend({className:"toolbar noselect",ps_selector:".accounts",template:lt.toolbar,events:{"click .toolbar-logo":"clickAllChats","click .all-chats":"showAllChats","click .contacts":"showContacts","click .archive-chats":"showArchive","click .saved-chats":"showSavedChats","click .mentions":"showNotifications","click .settings":"showSettings","click .settings-modal":"showSettingsModal","click .jingle-calls":"showPlaceholder","click .geolocation-chats":"showPlaceholder","click .add-variant.contact":"showAddContactView","click .add-variant.account":"showAddAccountView","click .add-variant.public-groupchat":"showAddPublicGroupChatView","click .add-variant.incognito-groupchat":"showAddIncognitoGroupChatView"},_initialize:function(){this.$(".add-something").on("change_state",(function(e,t){gt(this).switchClass("active",t).find(".mdi").switchClass("mdi-close",t).switchClass("mdi-plus",!t),t?(this.setAttribute("data-title",this.getAttribute("title")),this.setAttribute("title","")):(this.setAttribute("title",this.getAttribute("data-title")),this.removeAttribute("data-title"))})),nt.on("update_screen",this.onUpdatedScreen,this),this.data.on("change:all_msg_counter",this.onChangedAllMessageCounter,this),this.data.on("change:group_msg_counter",this.onChangedGroupMessageCounter,this),this.data.on("change:mentions_counter",this.onChangedMentionsCounter,this),this.data.on("change:msg_counter",this.onChangedMessageCounter,this),this.data.set({msg_counter:0}),this.data.set({group_msg_counter:0}),this.data.set({all_msg_counter:0}),this.data.set({mentions_counter:0})},render:function(){this.$(".add-something").dropdown({inDuration:50,outDuration:50,constrainWidth:!1,hover:!1,alignment:"left"}),this.$(".add-variant.account").hideIf(!ct.LOGIN_CUSTOM_DOMAIN&&!ct.LOGIN_DOMAINS.length)},updateColor:function(e){},onUpdatedScreen:function(e){"account_settings_modal"!==e&&"settings-modal"!==e&&("all-chats"===e&&(this.$(".toolbar-item:not(.toolbar-logo).all-chats").hasClass("active")||this.$(".toolbar-item:not(.toolbar-logo).chats").hasClass("active")||this.$(".toolbar-item:not(.toolbar-logo).saved-chats").hasClass("active")||this.$(".toolbar-item:not(.toolbar-logo).archive-chats").hasClass("active"))||(this.$(".toolbar-item:not(.toolbar-logo):not(.account-item)").removeClass("active unread"),"notifications"!==e?ut.contains(["all-chats","contacts","settings","settings-modal","search","jingle-calls","geolocation-chats","about"],e)&&this.$(".toolbar-item:not(.toolbar-logo)."+e).addClass("active"):this.$(".toolbar-item:not(.toolbar-logo).mentions").addClass("active")))},clickAllChats:function(e){this.$(".all-chats").click()},showAllChats:function(e,t){let i;i=e&&e.target?gt(e.target).closest(".toolbar-item:not(.toolbar-logo)"):this.$(".all-chats");let s=i.hasClass("active")&&!i.hasClass("unread");this.$(".toolbar-item:not(.account-item):not(.toolbar-logo)").removeClass("active unread").filter(".all-chats").addClass("active").switchClass("unread",s);let n={};t&&(n.no_unread=t),nt.body.setScreen("all-chats",n),nt.trigger("show_all_chats",t),nt.trigger("clear_chats_search"),nt.trigger("update_placeholder")},showArchive:function(e,t){this.$(".toolbar-item:not(.account-item):not(.toolbar-logo)").removeClass("active unread").filter(".archive-chats").addClass("active"),nt.body.setScreen("all-chats"),nt.trigger("show_archive_chats",t),nt.trigger("clear_chats_search"),nt.trigger("update_placeholder")},showSavedChats:function(e,t){if(nt.trigger("clear_chats_search"),this.$(".all-chats.unread").length&&this.showAllChats(null,!0),1===nt.accounts.enabled.length){if(!nt.accounts.enabled[0].server_features.get(Strophe.NS.XABBER_FAVORITES))return;let e=nt.accounts.enabled[0].chats.getSavedChat();e.item_view&&e.item_view.open({right_contact_save:!0,clear_search:!1,scroll_to_chat:!0}),this.$(".active").removeClass("active"),this.$(".saved-chats").addClass("active"),e.once("change:active",(()=>{nt.toolbar_view.$(".toolbar-item:not(.toolbar-logo):not(.account-item)").removeClass("active unread"),nt.toolbar_view.$(".toolbar-item:not(.toolbar-logo)."+nt.body.screen.get("name")).addClass("active")}))}else this.$(".toolbar-item:not(.account-item):not(.toolbar-logo)").removeClass("active unread").filter(".saved-chats").addClass("active"),nt.body.setScreen("all-chats"),nt.trigger("show_saved_chats",t),nt.trigger("update_placeholder")},showNotifications:function(e,t){try{nt.chats.filter((e=>e.account.server_features.get(Strophe.NS.XABBER_NOTIFY)&&e.get("jid")===e.account.server_features.get(Strophe.NS.XABBER_NOTIFY).get("from")&&e.get("notifications")));if(!nt.accounts.enabled.length||!nt.accounts.connected.length)return;this.$(".toolbar-item:not(.account-item):not(.toolbar-logo)").removeClass("active unread").filter(".mentions").addClass("active"),nt.body.setScreen("notifications",{right:"notifications",notifications:nt.notifications_view}),nt.notifications_view&&nt.notifications_view.onShowNotificationsTab()}catch(e){ot.error(e)}},showChatsByAccount:function(e){this.data.get("account_filtering")===e.get("jid")?this.data.set("account_filtering",null):this.data.set("account_filtering",e.get("jid")),this.$(".toolbar-item:not(.toolbar-logo).all-chats").hasClass("active")?this.showAllChats(null,!0):this.$(".toolbar-item:not(.toolbar-logo).archive-chats").hasClass("active")?this.showArchive(null,!0):this.$(".toolbar-item:not(.toolbar-logo).saved-chats").hasClass("active")?this.showSavedChats(null,!0):this.$(".toolbar-item:not(.toolbar-logo).mentions").hasClass("active")?this.showNotifications(null,!0):(this.$(".toolbar-item:not(.toolbar-logo).jingle-calls").hasClass("active")||this.$(".toolbar-item:not(.toolbar-logo).geolocation-chats").hasClass("active"))&&this.showAllChats(null,!0)},showContacts:function(){nt.body.setScreen("contacts",{right_contact:null}),nt.trigger("update_placeholder")},showMentions:function(){nt.body.setScreen("mentions"),nt.trigger("update_placeholder")},showSettings:function(){nt.body.setScreen("settings-modal",{account_block_name:null}),nt.trigger("update_placeholder")},showSettingsModal:function(){nt.body.setScreen("settings-modal",{account_block_name:null}),nt.trigger("update_placeholder")},showPlaceholder:function(e){nt.chats_view&&nt.chats_view.active_chat&&(nt.chats_view.active_chat.model.trigger("hide_chat"),nt.chats_view.active_chat=null),nt.body.setScreen("all-chats",{chat_item:null});let t=gt(e.target).closest(".toolbar-item:not(.toolbar-logo)");this.$(".toolbar-item:not(.toolbar-logo):not(.account-item)").removeClass("active unread"),t.addClass("active"),nt.trigger("update_placeholder")},showAddContactView:function(){nt.trigger("add_contact",{right:null})},showAddAccountView:function(){nt.trigger("add_account",{right:null})},showAddIncognitoGroupChatView:function(){nt.trigger("add_group_chat",{incognito:!0,right:null})},showAddPublicGroupChatView:function(){nt.trigger("add_group_chat",{public:!0,right:null})},setAllMessageCounter:function(){let e=0,t=0,i=0,s=0;return nt.accounts.each((n=>{n.chats.each((n=>{n.contact&&!n.isMuted()&&((n.get("unread")||n.get("const_unread"))&&nt.error(n),n.get("notifications")?s+=n.get("unread")+n.get("const_unread"):(t+=n.get("unread")+n.get("const_unread"),n.contact.get("group_chat")?i+=n.get("unread")+n.get("const_unread"):e+=n.get("unread")+n.get("const_unread")))}));let a=n.contacts.filter((e=>e.get("invitation")&&!e.get("removed")||e.get("subscription_request_in")&&"both"!=e.get("subscription"))).length;if(t+=a,n.omemo&&n.omemo.xabber_trust){let e=n.omemo.xabber_trust.get("active_trust_sessions");n.get("enabled")&&(s+=Object.keys(e).length)}})),{msgs:e,all_msgs:t,group_msgs:i,mentions:s}},recountAllMessageCounter:function(){let e=this.setAllMessageCounter();this.data.set("all_msg_counter",e.all_msgs),this.data.set("msg_counter",e.msgs),this.data.set("group_msg_counter",e.group_msgs),this.data.set("mentions_counter",e.mentions),nt.recountAllMessageCounter()},onChangedMessageCounter:function(){let e=this.data.get("msg_counter");this.$(".msg-indicator").switchClass("unread",e).text()},onChangedGroupMessageCounter:function(){let e=this.data.get("group_msg_counter");this.$(".group-msg-indicator").switchClass("unread",e).text()},onChangedMentionsCounter:function(){let e=this.data.get("mentions_counter");e>=100&&(e="99+"),this.$(".mentions-indicator").switchClass("unread",e).text(e)},onChangedAllMessageCounter:function(){let e=this.data.get("all_msg_counter");e>=100&&(e="99+"),this.$(".all-msg-indicator").switchClass("unread",e).text(e)}}),nt.JingleMessageView=nt.BasicView.extend({className:"modal main-modal jingle-message-view",template:lt.jingle_message_calling,avatar_size:ct.AVATAR_SIZES.XABBER_VOICE_CALL_VIEW,events:{click:"clickOnWindow","click .btn-accept":"accept","click .btn-share-screen":"shareScreen","click .btn-microphone":"toggleMicrophone","click .btn-video":"videoCall","click .btn-volume":"toggleVolume","click .btn-collapse":"collapse","click .btn-cancel":"cancel","click .btn-full-screen":"setFullScreen"},_initialize:function(e){this.model=e.model,this.model.on("destroy",this.onDestroy,this),this.contact=this.model.contact,this.account=this.contact.account,this.model.on("change:state",this.updateCallingStatus,this),this.model.on("change:status",this.updateBackground,this),this.model.on("change:volume_on",this.updateButtons,this),this.model.on("change:video_live",this.updateButtons,this),nt.on("change:video",this.updateButtons,this),this.model.on("change:video_screen",this.updateButtons,this),this.model.on("change:video_in",this.updateCollapsedWindow,this),this.model.on("change:video",this.updateCollapsedWindow,this),this.model.on("change:audio",this.updateButtons,this)},render:function(e){e=e||{},this.updateName(),this.updateCallingStatus(e.status),"in"===e.status?this.updateStatusText(nt.getString("dialog_jingle_message__status_calling")):this.model.set("status","calling"),this.updateAccountJid(),this.updateButtons(),this.$el.openModal({dismissible:!1,ready:()=>{this.updateAvatar(),this.pos1=0,this.pos2=0,this.pos3=0,this.pos4=0,this.$(".collapsed-movable").mousedown((e=>{(e=e||window.event).preventDefault(),this.pos3=e.clientX,this.pos4=e.clientY;let t=!1;document.onmouseup=e=>{document.onmouseup=null,document.onmousemove=null,t||this.collapse()},document.onmousemove=e=>{(e=e||window.event).preventDefault(),this.pos1=this.pos3-e.clientX,this.pos2=this.pos4-e.clientY,this.pos3=e.clientX,this.pos4=e.clientY,this.$el.css("top",this.$el.offset().top-this.pos2+"px"),this.$el.css("left",this.$el.offset().left-this.pos1+"px"),this.$el.css("transform","none"),this.$el.css("right","unset"),t=!0}}))},complete:()=>{this.$el.detach(),this.data.set("visible",!1)}})},setFullScreen:function(){document.fullscreenElement?document.exitFullscreen():this.$el.length&&this.$el[0].requestFullscreen()},cancelFullScreen:function(){if(document.exitFullscreen){document.fullscreenElement&&document.exitFullscreen().then((()=>{document.fullscreenElement&&this.cancelFullScreen()}))}else if(document.mozCancelFullScreen){document.mozFullScreenElement&&document.mozCancelFullScreen(),document.mozFullScreenElement&&this.cancelFullScreen()}else if(document.webkitExitFullscreen){document.webkitCurrentFullScreenElement&&document.webkitExitFullscreen(),document.webkitCurrentFullScreenElement&&this.cancelFullScreen()}else if(document.msExitFullscreen){document.msFullscreenElement&&document.msExitFullscreen(),document.msFullscreenElement&&this.cancelFullScreen()}},windowResized:function(){this.$el.hasClass("collapsed")&&this.$el.css("right",parseInt(nt.main_panel.$el.css("margin-right"))+8+"px")},updateButtons:function(){this.$(".btn-video").switchClass("hidden",!nt.get("video")),this.$(".btn-share-screen").switchClass("active",this.model.get("video_screen")),this.$(".btn-full-screen").switchClass("hidden",!this.model.get("video_in")),this.$(".btn-video").switchClass("mdi-video active",this.model.get("video_live")).switchClass("mdi-video-off",!this.model.get("video_live")),this.$(".btn-volume").switchClass("mdi-volume-high active",this.model.get("volume_on")).switchClass("mdi-volume-off",!this.model.get("volume_on")),this.$(".btn-microphone").switchClass("active mdi-microphone",this.model.get("audio")).switchClass("mdi-microphone-off",!this.model.get("audio"))},updateAvatar:function(){let e=this.contact.cached_image;this.$(".circle-avatar").setAvatar(e,this.avatar_size)},updateBackground:function(){let e=this.model.get("status");this.$el.attr("data-state",e)},updateCallingStatus:function(e){this.$(".buttons-wrap").switchClass("incoming","in"===e)},updateStatusText:function(e){this.$(".calling-status").text(e||"")},updateName:function(){this.$(".name").text(this.contact.get("name"))},updateAccountJid:function(){this.$(".modal-footer .contact-info .jid").text(this.contact.get("jid"))},close:function(){this.$el.closeModal({complete:this.hide.bind(this)})},shareScreen:function(){this.model.set("video_screen",!this.model.get("video_screen"))},isFullScreen:function(){return!!document.fullscreenElement||(!!document.webkitFullscreenElement||!!document.mozFullScreenElement)},accept:function(){this.model.accept(),this.updateCallingStatus(ct.JINGLE_MSG_ACCEPT),this.model.initSession()},clickOnWindow:function(e){gt(e.target).closest(".collapsed-movable").length||gt(e.target).closest(".video-wrap").length&&this.$el.hasClass("collapsed")&&this.$el.hasClass("collapsed-video")&&this.collapse()},collapse:function(e){if(e&&e.stopPropagation(),this.isFullScreen())return void this.cancelFullScreen();this.$el.closest("#modals").siblings("#"+this.$el.data("overlayId")).toggle(),this.$el.toggleClass("collapsed"),this.$el.hasClass("collapsed")?(this.$el.switchClass("collapsed-video",this.model.get("video")||this.model.get("video_in")),this.$el.switchClass("multiple-videos",this.model.get("video")&&this.model.get("video_in"))):(this.$el.css("right",""),this.$el.css("left",""),this.$el.css("width",""),this.$el.css("height",""),this.$el.removeClass("collapsed-video")),this.windowResized()},updateCollapsedWindow:function(){this.updateButtons(),this.$el.hasClass("collapsed")&&(this.$el.switchClass("collapsed-video",this.model.get("video")||this.model.get("video_in")),this.$el.switchClass("multiple-videos",this.model.get("video")&&this.model.get("video_in")))},toggleMicrophone:function(){this.model.set("audio",!this.model.get("audio"))},onDestroy:function(e){let t;t="device_busy"==this.model.get("status")?"dialog_jingle_message__status_device_busy":"busy"==this.model.get("status")?"dialog_jingle_message__status_busy":"accepted_another_device"==this.model.get("status")?"dialog_jingle_message__status_another_device_accepted":"dialog_jingle_message__status_disconnected",this.updateStatusText(nt.getString(t)),setTimeout((()=>{this.close(),this.$el.detach()}),3e3)},videoCall:function(){this.model.set("video_live",!this.model.get("video_live"))},toggleVolume:function(e){gt(e.target).switchClass(this.model.set("volume_on",!this.model.get("volume_on")))},cancel:function(){this.model.reject(),this.close()}}),nt.PlyrPlayerPopupView=nt.BasicView.extend({className:"modal main-modal player-overlay plyr-player-popup-view",template:lt.plyr_player_popup,events:{"click .mdi-close":"closePopup","click .mdi-minimize-float":"floatPopup","click .mdi-minimize-full":"fullPopup","click .mdi-plyr-hide":"hidePopup","click .btn-next-plyr":"nextPlyr","click .btn-previous-plyr":"previousPlyr","click .mdi-open-message":"openMessage","click .mdi-toggle-play":"togglePlay","click .mdi-toggle-mute":"toggleMute"},_initialize:function(e){this.data.set("visibility_state",0),this.data.on("change:visibility_state",this.onVisibilityChange,this),nt.on("plyr_player_updated",this.updatePlyrControls,this)},render:function(e){e=e||{},this.$el.openModal({dismissible:!1,ready:()=>{this.player||(this.player=new Plyr(".plyr-player-popup",{controls:["play-large","play","progress","duration","mute","volume","settings","download","fullscreen"],youtube:{controls:0,disablekb:1,iv_load_policy:3,modestbranding:1,rel:0,showinfo:0}}),this.player.on("play",(e=>{nt.plyr_players.filter((e=>e!=this.player)).forEach((function(e){e.$audio_elem&&e.$audio_elem.voice_message&&e.$audio_elem.voice_message.stopTime()})),nt.trigger("plyr_player_updated")})),this.player.on("pause",(e=>{nt.trigger("plyr_player_updated")})),this.player.on("timeupdate",(e=>{nt.trigger("plyr_player_time_updated")})),this.player.on("volumechange",(e=>{nt.trigger("plyr_player_updated")})),this.player.on("statechange",(e=>{3===e.detail.code&&(this.$(".plyr-player-popup-draggable").removeClass("hidden"),this.$(".plyr-player-popup-draggable").css({width:"",height:""})),nt.trigger("plyr_player_updated")}))),this.$el.closest("#modals").siblings("#"+this.$el.data("overlayId")).mousedown((()=>{this.minimizePopup()})),this.showNewVideo(e),this.onVisibilityChange(),this.updatePlyrControls(),this.pos1=0,this.pos2=0,this.pos3=0,this.pos4=0,this.$(".plyr-player-min-controls-tab").mousedown((e=>{if(e=e||window.event,gt(e.target).closest(".plyr__control--overlaid").length||gt(e.target).closest(".plyr__controls").length||gt(e.target).closest(".mdi-close").length||gt(e.target).closest(".plyr-player-min-controls-buttons").length)return;e.preventDefault(),this.pos3=e.clientX,this.pos4=e.clientY;let t=!1;document.onmouseup=e=>{document.onmouseup=null,document.onmousemove=null,t||gt(e.target).closest(".plyr__control--overlaid").length||this.$(".plyr__video-wrapper").click()},document.onmousemove=e=>{if(e=e||window.event,t=!0,e.preventDefault(),this.$el.hasClass("player-overlay"))return;this.pos1=this.pos3-e.clientX,this.pos2=this.pos4-e.clientY,this.pos3=e.clientX,this.pos4=e.clientY;let i=(this.$el.offset().left-this.pos1)/window.innerWidth*100,s=(this.$el.offset().top-this.pos2)/window.innerHeight*100;this.$el.css("left",i+"%"),this.$el.css("top",s+"%"),this.$el.css("transform","none"),this.$el.css("right","unset")}}))}})},showNewVideo:function(e){e=e||{};let t=new gt.Deferred;t.done((()=>{"youtube"===e.player.provider&&(this.$(".plyr-player-popup-draggable").addClass("hidden"),this.$(".plyr-player-popup-draggable").css({width:400,height:200})),this.account=e.player.chat_item.account,this.updateColorScheme(),this.player.chat_item=e.player.chat_item,this.player.player_item=e.player,this.player.message_unique_id=e.player.message_unique_id;let t={src:e.player.video_src,provider:e.player.provider};e.player.type&&(t.type=e.player.type),this.player.source={type:"video",sources:[t]},nt.current_plyr_player=this.player,this.player.once("ready",(e=>{let t=gt('<svg class="mdi mdi-24px mdi-plyr-custom-controls mdi-minimize mdi-minimize-float mdi-svg-template" data-svgname="player-float"></svg>');t.append(rt.templates.svg["player-float"]()),t.insertBefore(this.$('.plyr__controls__item[data-plyr="fullscreen"]'));let i=gt('<svg class="mdi mdi-24px mdi-plyr-custom-controls mdi-minimize mdi-minimize-full mdi-svg-template" data-svgname="player-full"></svg>');i.append(rt.templates.svg["player-full"]()),i.insertBefore(this.$('.plyr__controls__item[data-plyr="fullscreen"]'));let s=gt('<svg class="mdi mdi-24px mdi-plyr-custom-controls mdi-open-message mdi-svg-template" data-svgname="message-bookmark-outline"></svg>');s.append(rt.templates.svg["message-bookmark-outline"]()),s.insertAfter(this.$('.plyr__controls__item[data-plyr="download"]')),gt('<div class="btn-previous-plyr"><i class="mdi mdi-skip-previous mdi-24px"></i></div>').insertBefore(this.$('.plyr__controls__item[data-plyr="play"]')),gt('<div class="btn-next-plyr"><i class="mdi mdi-skip-next mdi-24px"></i></div>').insertAfter(this.$('.plyr__controls__item[data-plyr="play"]')),this.player.play(),nt.trigger("plyr_player_updated")}))})),e.player&&e.player.video_file&&e.player.video_file.key&&(e.player.key=e.player.video_file.key,e.player.video_file.type&&(e.player.type=e.player.video_file.type)),e.player&&e.player.key&&e.player.chat_item.model&&e.player.video_src&&!e.player.video_decrypted?e.player.chat_item.model.messages.decryptFile(e.player.video_src,e.player.key).then((i=>{e.player.video_src=i,e.player.video_decrypted=!0,t.resolve()})):t.resolve()},closePopup:function(){this.$el.closest("#modals").siblings("#"+this.$el.data("overlayId")).detach(),this.$el.detach(),nt.current_plyr_player=null,nt.plyr_player_popup=null,nt.trigger("plyr_player_updated")},minimizePopup:function(){if(nt.current_plyr_player&&nt.current_plyr_player.$audio_elem)return;let e=this.data.get("visibility_state");e+=1,e>2&&(e=0),this.data.set("visibility_state",e)},hidePopup:function(){nt.current_plyr_player&&nt.current_plyr_player.$audio_elem||this.data.set("visibility_state",2)},floatPopup:function(){nt.current_plyr_player&&nt.current_plyr_player.$audio_elem||this.data.set("visibility_state",1)},fullPopup:function(){nt.current_plyr_player&&nt.current_plyr_player.$audio_elem||this.data.set("visibility_state",0)},onVisibilityChange:function(){let e=this.data.get("visibility_state");this.$el.closest("#modals").siblings("#"+this.$el.data("overlayId")).switchClass("hidden",0!=e),this.$el.switchClass("player-overlay",0===e),this.$el.switchClass("hidden",2===e)},nextPlyr:function(){let e=nt.current_plyr_player.chat_item.model.plyr_players.indexOf(nt.current_plyr_player);if(-1===e&&nt.current_plyr_player.player_item&&(e=nt.current_plyr_player.chat_item.model.plyr_players.indexOf(nt.current_plyr_player.player_item)),nt.current_plyr_player&&e>=0&&e<nt.current_plyr_player.chat_item.model.plyr_players.length-1)if(nt.current_plyr_player.chat_item.model.plyr_players[e+1].$audio_elem){let t=nt.current_plyr_player.chat_item.model.plyr_players[e+1];if(t.$audio_elem.voice_message)t.$audio_elem.voice_message.play();else{let e=gt(t.$audio_elem).find(".file-link-download").attr("href");gt(t.$audio_elem).find(".mdi-play").removeClass("no-uploaded"),t.$audio_elem.voice_message=nt.current_plyr_player.chat_item.content.renderVoiceMessage(gt(t.$audio_elem).find(".file-container")[0],e,nt.current_plyr_player.chat_item.model)}}else nt.plyr_player_popup?nt.plyr_player_popup.showNewVideo({player:nt.current_plyr_player.chat_item.model.plyr_players[e+1]}):(nt.plyr_player_popup=new nt.PlyrPlayerPopupView({}),nt.plyr_player_popup.show({player:nt.current_plyr_player.chat_item.model.plyr_players[e+1]}))},previousPlyr:function(){let e=nt.current_plyr_player.chat_item.model.plyr_players.indexOf(nt.current_plyr_player);if(-1===e&&nt.current_plyr_player.player_item&&(e=nt.current_plyr_player.chat_item.model.plyr_players.indexOf(nt.current_plyr_player.player_item)),nt.current_plyr_player&&e<=nt.current_plyr_player.chat_item.model.plyr_players.length&&e>0)if(nt.current_plyr_player.chat_item.model.plyr_players[e-1].$audio_elem){let t=nt.current_plyr_player.chat_item.model.plyr_players[e-1];if(t.$audio_elem.voice_message)t.$audio_elem.voice_message.play();else{let e=gt(t.$audio_elem).find(".file-link-download").attr("href");gt(t.$audio_elem).find(".mdi-play").removeClass("no-uploaded"),t.$audio_elem.voice_message=nt.current_plyr_player.chat_item.content.renderVoiceMessage(gt(t.$audio_elem).find(".file-container")[0],e,nt.current_plyr_player.chat_item.model)}}else nt.plyr_player_popup?nt.plyr_player_popup.showNewVideo({player:nt.current_plyr_player.chat_item.model.plyr_players[e-1]}):(nt.plyr_player_popup=new nt.PlyrPlayerPopupView({}),nt.plyr_player_popup.show({player:nt.current_plyr_player.chat_item.model.plyr_players[e-1]}))},updatePlyrControls:function(){if(nt.current_plyr_player){let e=nt.current_plyr_player.chat_item.model.plyr_players.indexOf(nt.current_plyr_player.player_item);this.$(".btn-next-plyr").switchClass("disabled",!(e>=0&&e<nt.current_plyr_player.chat_item.model.plyr_players.length-1)),this.$(".btn-previous-plyr").switchClass("disabled",!(e<=nt.current_plyr_player.chat_item.model.plyr_players.length&&e>0)),this.$(".mdi-plyr-play").switchClass("hidden",nt.current_plyr_player.playing),this.$(".mdi-plyr-pause").switchClass("hidden",!nt.current_plyr_player.playing),this.$(".mdi-mute-plyr").switchClass("hidden",!nt.current_plyr_player.muted),this.$(".mdi-unmute-plyr").switchClass("hidden",nt.current_plyr_player.muted)}},openMessage:function(){if(!(this.player&&this.player.chat_item&&this.player.message_unique_id))return;this.floatPopup();let e=this.player.chat_item.model;nt.chats_view.openChat(e.item_view,{right_contact_save:!0,clear_search:!1}),nt.body.setScreen(nt.body.screen.get("name"),{right:"message_context",model:e}),nt.right_contact_panel_saveable&&nt.body.screen.get("right_contact")&&"message_context"===nt.body.screen.get("right")&&(nt.right_contact_panel_saveable?e.contact.showDetailsRight("all-chats",{right_saved:!0}):e.contact.showDetailsRight("all-chats",{right_saved:!1})),e.getMessageContext(this.player.message_unique_id,{message:!0})},togglePlay:function(){if(nt.current_plyr_player)if(nt.current_plyr_player.$audio_elem)if(nt.current_plyr_player.$audio_elem.voice_message)nt.current_plyr_player.$audio_elem.voice_message.playPause();else{let e=gt(nt.current_plyr_player.$audio_elem).find(".file-link-download").attr("href");gt(nt.current_plyr_player.$audio_elem).find(".mdi-play").removeClass("no-uploaded"),nt.current_plyr_player.$audio_elem.voice_message=this.content.renderVoiceMessage(gt(nt.current_plyr_player.$audio_elem).find(".file-container")[0],e)}else nt.current_plyr_player.togglePlay()},toggleMute:function(){nt.current_plyr_player&&(nt.current_plyr_player.muted=!nt.current_plyr_player.muted)},updateColorScheme:function(){this.$el.attr("data-color",this.account.settings.get("color")),this.account.settings.once("change:color",this.updateColorScheme,this)}}),nt.SettingsModalView=nt.BasicView.extend({className:"settings-panel-wrap",template:lt.settings_modal,ps_selector:".settings-panel",events:{"click .background-overlay":"closeSettings","click .btn-back":"backToMenu","click .btn-back-subsettings":"backToSubMenu","click .settings-tabs-wrap.global-settings-tabs .settings-tab:not(.delete-all-accounts)":"jumpToBlock","click .desktop-notifications-clue-wrap b":"goToWebNotifications","click .btn-add-account":"showAddAccountView","click .setting.idling label":"setIdling","change #idle_timeout":"setIdlingTimeout","click .setting.notifications label":"setNotifications","click .private-notifications label":"setPrivateNotifications","click .group-notifications label":"setGroupNotifications","click .notifications-lever label":"setNotifications","click .jingle-calls label":"setJingleCalls","click .setting.message-preview.private-preview label":"setPrivateMessagePreview","click .setting.message-preview.group-preview label":"setGroupMessagePreview","click .call-attention label":"setCallAttention","click .setting.load-media label":"setLoadMedia","click .setting.typing-notifications label":"setTypingNotifications","click .setting.mapping-service label":"setMappingService","click .setting.desktop-autostart label":"setDesktopAutostart","click .setting.reconnection-popup-log label":"setReconnectionLogs","change .sound input[type=radio][name=private_sound]":"setPrivateSound","change .sound input[type=radio][name=group_sound]":"setGroupSound","change .sound input[type=radio][name=call_sound]":"setCallSound","change .sound input[type=radio][name=dialtone_sound]":"setDialtoneSound","change .sound input[type=radio][name=attention_sound]":"setAttentionSound","change .languages-list input[type=radio][name=language]":"changeLanguage","change .emoji-fonts-list input[type=radio][name=emoji_font]":"changeEmojiFont","click .emoji-font-external-url-button":"loadExternalEmojiFont","change #vignetting":"changeVignetting","change #blur":"changeBlur","change #notifications_volume":"changeNotificationsVolume","change #blur_switch":"switchBlur","change #vignetting_switch":"switchVignetting","click .selected-color-wrap":"openColorPicker","click .client-main-color-item":"chooseMainColor","change .background input[type=radio][name=background]":"setBackground","click .current-background-wrap":"changeBackgroundImage","change .hotkeys input[type=radio][name=hotkeys]":"setHotkeys","change .avatar-shape input[type=radio][name=avatar_shape]":"setAvatarShape","change .device-metadata input[type=radio][name=device_metadata]":"setDeviceMetadata","click .settings-tab.delete-all-accounts":"deleteAllAccounts"},_initialize:function(e){this.$(".xabber-info-wrap .version").text(nt.get("version_number")),nt.on("update_main_color",this.updateMainColor,this),this.model.on("change:language",this.updateLanguage,this),this.model.on("change:emoji_font",this.updateEmojiFontLabel,this),this.model.on("change:avatar_shape",this.updateAvatarLabel,this),this.model.on("change:notifications_private",this.updateSoundsLabel,this),this.model.on("change:notifications_group",this.updateSoundsLabel,this),this.model.on("change:call_attention",this.updateSoundsLabel,this),this.model.on("change:private_sound",this.updateSoundsLabel,this),this.model.on("change:group_sound",this.updateSoundsLabel,this),this.model.on("change:sound_on_private_message",this.updateSoundsLabel,this),this.model.on("change:sound_on_group_message",this.updateSoundsLabel,this),this.model.on("change:sound_on_call",this.updateSoundsLabel,this),this.model.on("change:sound_on_dialtone",this.updateSoundsLabel,this),this.model.on("change:sound_on_attention",this.updateSoundsLabel,this),this.ps_container.on("ps-scroll-y",this.onScrollY.bind(this)),gt(document).on("keyup",(e=>{e.keyCode===ct.KEY_ESCAPE&&this.data.get("visible")&&this.closeSettings()})),nt.once("accounts_ready",(()=>{nt.accounts.on("list_changed add change:enabled destroy",this.updateAccounts,this)}))},render:function(e){let t=this.model.attributes,i=t.language,s=t.emoji_font;this.updateSounds(),this.updateLanguages(),this.updateEmojiFonts(),this.$(".notifications input[type=checkbox]").prop({checked:t.notifications&&nt._cache.get("notifications")}),this.$(".notifications-lever input[type=checkbox]").prop({checked:t.notifications&&nt._cache.get("notifications")}),this.$(".sound input[type=radio][name=group_sound]").prop("disabled",!t.notifications_group),this.$(".private-notifications input[type=checkbox]").prop({checked:t.notifications_private}),this.$(".sound input[type=radio][name=private_sound]").prop("disabled",!t.notifications_private),this.$(".sound input[type=radio][name=call_sound]").prop("disabled",!t.jingle_calls),this.$(".sound input[type=radio][name=dialtone_sound]").prop("disabled",!t.jingle_calls),this.$(".group-notifications input[type=checkbox]").prop({checked:t.notifications_group}),this.$(".jingle-calls input[type=checkbox]").prop({checked:t.jingle_calls}),this.$(".sound input[type=radio][name=group_sound]").prop("disabled",!t.notifications_group),this.$(".sound input[type=radio][name=attention_sound]").prop("disabled",!t.call_attention),this.$(".message-preview.private-preview input[type=checkbox]").prop({checked:t.message_preview_private}).prop("disabled",!(t.notifications&&nt._cache.get("notifications")&&t.notifications_private)),this.$(".message-preview.group-preview input[type=checkbox]").prop({checked:t.message_preview_group}).prop("disabled",!(t.notifications&&nt._cache.get("notifications")&&t.notifications_group)),this.$(".desktop-notifications-clue-wrap").hideIf(t.notifications),this.$(".notifications-dependant").switchClass("notifications-dependant-two-line",!t.notifications),this.$(".call-attention input[type=checkbox]").prop({checked:t.call_attention}),this.$(".load-media input[type=checkbox]").prop({checked:t.load_media}),this.$(".typing-notifications input[type=checkbox]").prop({checked:t.typing_notifications}),this.$(".idling input[type=checkbox]").prop({checked:t.idling}),this.$("#idle_timeout").val(t.idling_time).prop("disabled",!t.idling),this.$(".mapping-service input[type=checkbox]").prop({checked:t.mapping_service}),this.$(".reconnection-popup-log input[type=checkbox]").prop({checked:t.reconnection_logs}),ct.DESKTOP_AUTOSTART_OPTION?this.$(".desktop-autostart input[type=checkbox]").prop({checked:t.desktop_autostart}):this.$(".desktop-autostart").remove();let n=t.private_sound?t.sound_on_private_message:"";this.$(`.sound input[type=radio][name=private_sound][value="${n}"]`).prop("checked",!0);let a=t.group_sound?t.sound_on_group_message:"";this.$(`.sound input[type=radio][name=group_sound][value="${a}"]`).prop("checked",!0),this.$(`.sound input[type=radio][name=call_sound][value="${t.sound_on_call}"]`).prop("checked",!0),this.$(`.sound input[type=radio][name=dialtone_sound][value="${t.sound_on_dialtone}"]`).prop("checked",!0),this.$(`.sound input[type=radio][name=attention_sound][value="${t.sound_on_attention}"]`).prop("checked",!0),this.$(`.hotkeys input[type=radio][name=hotkeys][value=${t.hotkeys}]`).prop("checked",!0),this.$(`.avatar-shape input[type=radio][name=avatar_shape][value=${t.avatar_shape}]`).prop("checked",!0),this.$(`.device-metadata input[type=radio][name=device_metadata][value=${t.device_metadata}]`).prop("checked",!0),this.$(".device-metadata-description").text(nt.getString(`settings__section_privacy__${t.device_metadata}_metadata_description`)),i==nt.get("default_language")&&(i="default"),this.$(`.languages-list input[type=radio][name=language][value="${i}"]`).prop("checked",!0),this.$(`.emoji-fonts-list input[type=radio][name=emoji_font][value="${s}"]`).prop("checked",!0),this.$(".client-main-color-item").removeClass("chosen-client-color"),this.$(`.client-main-color-item[data-value="${t.main_color}"]`).addClass("chosen-client-color");let o=isNaN(t.notifications_volume)?100:100*t.notifications_volume;if(this.$("#notifications_volume").val(o),this.$(".settings-panel-head span").text(this.$(".settings-block-wrap:not(.hidden)").attr("data-header")),this.updateAvatarLabel(),this.updateSoundsLabel(),this.updateDescription(),this.updateBackgroundSetting(),this.updateColor(),this.updateMainColor(),this.updateLanguage(),this.updateEmojiFontLabel(),this.$(".toolbar-main-color-setting-wrap .dropdown-button").dropdown({inDuration:100,outDuration:100,belowOrigin:!0,hover:!1}),this.$(".left-column").removeClass("hidden"),this.$(".left-column .settings-tabs-wrap.global-settings-tabs").removeClass("hidden"),this.$(".right-column").addClass("hidden"),this.$(".btn-back").removeClass("hidden"),this.$(".btn-back-subsettings").addClass("hidden"),this.$(".settings-panel-head .description").addClass("hidden"),this.$(".desktop-notifications-clue-wrap b").addClass("client-text-color-500"),this.updateAccounts(e),this.updateHeight(),this.updateSliders(),e&&e.block_name){let t=this.$(`.settings-tab[data-block-name="${e.block_name}"]`);t.length&&this.jumpToBlock({target:t[0]})}return this},updateAccounts:function(e){if(this.settings_single_account_modal&&(this.settings_single_account_modal.removeChild("blocklist"),this.removeChild("single_account"),this.settings_single_account_modal.destroyView(),this.settings_single_account_modal=void 0),1===nt.accounts.length&&nt.accounts.enabled.length){this.$(".accounts-info-wrap").addClass("hidden"),this.$(".btn-add-account").addClass("hidden"),this.$(".single-account-info-wrap").removeClass("hidden");let t=nt.accounts.models[0];this.single_account_has_rendered=!1,this.settings_single_account_modal=this.addChild("single_account",nt.AccountSettingsSingleModalView,{model:t,forced_ps_container:this.ps_container,single_account_modal:!0,el:this.$(".single-account-info-wrap .single-account-info")[0]}),this.single_account_has_rendered||this.settings_single_account_modal.show(null,e),t.trigger("render_single_settings",this.settings_single_account_modal),this.settings_single_account_modal.addChild("blocklist",nt.BlockListView,{account:t,el:this.settings_single_account_modal.$(".block-list-view-wrap")[0]})}else this.$(".btn-add-account").removeClass("hidden"),this.$(".accounts-info-wrap").removeClass("hidden"),this.$(".single-account-info-wrap").addClass("hidden");this.updateHeight()},updateMainColor:function(){this.$(".toolbar-main-color-setting").attr("data-color",this.model.get("main_color"))},updateBackgroundSetting:function(){this.$(`.background input[type=radio][name=background][value=${this.model.get("background").type}]`).prop("checked",!0),this.model.get("background").image&&this.$(".current-background").css("background-image",`url(${dt.images.getCachedBackground(this.model.get("background").image)})`),this.$(".current-background-wrap").switchClass("hidden",!this.model.get("background").image);let e=this.model.get("appearance"),t=!1!==e.blur,i=!1!==e.vignetting;this.$("#blur_switch")[0].checked=t,this.$(".blur-setting .disabled").switchClass("hidden",t),t&&(this.$("#blur")[0].value=e.blur),this.$("#vignetting_switch")[0].checked=i,this.$(".vignetting-setting .disabled").switchClass("hidden",i),i&&(this.$("#vignetting")[0].value=e.vignetting),this.updateScrollBar()},updateColor:function(){let e=this.model.get("appearance").color||"#E0E0E0";this.$(".selected-color-item").css("background-color",e),this.$(".selected-color-hex").text(e);let t=nt.ColorPicker.prototype.materialColors.find((t=>t.variations.find((t=>t.hex.toLowerCase()==e.toLowerCase()))));if(t){let i=t.variations.find((t=>t.hex.toLowerCase()==e.toLowerCase()));this.$(".selected-color-name").text(nt.getString(`account_color_name_${t.color.replace(/-/g,"_")}`).replace(/-/g," ")+` ${i.weight}`)}else this.$(".selected-color-name").text(nt.getString("settings__section_appearance__hint_custom_color"));nt.toolbar_view.updateColor(e)},jumpToBlock:function(e){if(gt(e.target).closest(".switch").length)return;let t=gt(e.target).closest(".settings-tab"),i=this.$(".settings-block-wrap."+t.attr("data-block-name"));if(t.hasClass("link-button"))return t.parent().siblings().removeClass("active"),void this.scrollTo(0);this.$(".settings-block-wrap").addClass("hidden"),this.$(".left-column").addClass("hidden"),this.$(".right-column").removeClass("hidden"),i.removeClass("hidden"),this.$(".settings-panel-head span").text(i.attr("data-header")),t.addClass("active").siblings().removeClass("active"),t.closest(".right-column")&&t.attr("data-subblock-parent-name")&&(this.$(".btn-back").addClass("hidden"),this.$(".btn-back-subsettings").removeClass("hidden"),this.$(".btn-back-subsettings").attr("data-subblock-parent-name",t.attr("data-subblock-parent-name"))),"interface_language"===t.attr("data-block-name")?this.$(".settings-panel-head .description").removeClass("hidden"):this.$(".settings-panel-head .description").addClass("hidden"),this.scrollToTop(),this.updateHeight()},updateHeight:function(){let e;this.$(".left-column.main-left-column").hasClass("hidden")||(e=this.$(".left-column.main-left-column").height()),this.$(".right-column.main-right-column").hasClass("hidden")||(e=this.$(".right-column.main-right-column").height()),this.ps_container.css("height",e+"px"),setTimeout((()=>{this.updateScrollBar()}),500)},updateSliders:function(){this.$(".range-field.range-field-design").each(((e,t)=>{let i=gt(t).find("input"),s=i.attr("min"),n=i.attr("max"),a=i.val(),o=182/(n-s)*(a-s)+10;gt(t).find("span.thumb").css("left",o+"px"),i.hasClass("materialize-timer")?gt(t).find("span.value").text(a+"s"):gt(t).find("span.value").text(a)}))},updateSounds:function(){this.$(".notification-field").html('<form action="#"></form>'),sounds.notifications.forEach(((e,t)=>{if(!e.not_selectable){let t=gt(lt.setting_radio_input({input_name:"private_sound",input_id:`${this.cid}-private-sound-${e.file_name}`,label:e.name,value:e.file_name}));this.$(".notification-field:not(.group-notification-field)").append(t);let i=gt(lt.setting_radio_input({input_name:"group_sound",input_id:`${this.cid}-group-sound-${e.file_name}`,label:e.name,value:e.file_name}));this.$(".group-notification-field").append(i)}}));let e=gt(lt.setting_radio_input({input_name:"private_sound",input_id:`${this.cid}-private-sound-no`,label:"No sound",value:""}));this.$(".notification-field:not(.group-notification-field)").prepend(e);let t=gt(lt.setting_radio_input({input_name:"group_sound",input_id:`${this.cid}-group-sound-no`,label:"No sound",value:""}));this.$(".group-notification-field").prepend(t),this.$(".dialtone-field").html('<form action="#"></form>'),sounds.dialtones.forEach(((e,t)=>{if(!e.not_selectable){let t=gt(lt.setting_radio_input({input_name:"dialtone_sound",input_id:`${this.cid}-dialtone-sound-${e.file_name}`,label:e.name,value:e.file_name}));this.$(".dialtone-field").append(t)}})),this.$(".ringtone-field").html('<form action="#"></form>'),sounds.ringtones.forEach(((e,t)=>{if(!e.not_selectable){let t=gt(lt.setting_radio_input({input_name:"call_sound",input_id:`${this.cid}-call-sound-${e.file_name}`,label:e.name,value:e.file_name}));this.$(".ringtone-field").append(t)}})),this.$(".attention-field").html('<form action="#"></form>'),sounds.attention.forEach(((e,t)=>{if(!e.not_selectable){let t=gt(lt.setting_radio_input({input_name:"attention_sound",input_id:`${this.cid}-attention-sound-${e.file_name}`,label:e.name,value:e.file_name}));this.$(".attention-field").append(t)}}))},updateLanguages:function(){this.$(".languages-list").html('<form action="#"></form>');let e=gt(lt.setting_language_radio_input({input_name:"language",input_id:`${this.cid}-default`,label:nt.getString("settings__languages_list___item_default",[ct.languages[nt.get("default_language")||"en"]]),value:"default",progress:{}}));if(this.$(".languages-list").append(e),!window.navigator.language.includes("en")){let e,t,i="en"===nt.get("default_language")?window.navigator.language:"en",s=Object.keys(client_translation_progress).find((e=>!i.indexOf(e)))||ct.languages_another_locales[i]&&Object.keys(client_translation_progress).find((e=>!ct.languages_another_locales[i].indexOf(e)));if(s){e=client_translation_progress[s],t=100==e?nt.getString("settings__section_interface_language__translation_progress_fully"):nt.getString("settings__section_interface_language__translation_progress",[`${e}%`]);let n=gt(lt.setting_language_radio_input({input_name:"language",input_id:`${this.cid}-${i}`,label:ct.languages[i],value:i,progress:{text:t}}));this.$(".languages-list").append(n)}}for(let e in ct.languages){if(!e||e==nt.get("default_language")||e==window.navigator.language)continue;let t=Object.keys(client_translation_progress).find((t=>!e.indexOf(t)))||ct.languages_another_locales[e]&&Object.keys(client_translation_progress).find((t=>!ct.languages_another_locales[e].indexOf(t)));if(t){let i=client_translation_progress[t],s=100==i?nt.getString("settings__section_interface_language__translation_progress_fully"):nt.getString("settings__section_interface_language__translation_progress",[`${i}%`]),n=gt(lt.setting_language_radio_input({input_name:"language",input_id:`${this.cid}-${e}`,label:ct.languages[e],value:e,progress:{text:s}}));this.$(".languages-list").append(n)}}},updateEmojiFonts:function(){let e=ct.EMOJI_FONTS_LIST;if(!Object.keys(e).length)return void this.$('.settings-tab[data-block-name="emoji_font"').addClass("hidden");this.$('.settings-tab[data-block-name="emoji_font"').removeClass("hidden"),this.$(".emoji-fonts-list").html('<form action="#"></form>');let t=gt(lt.setting_emoji_font_radio_input({input_name:"emoji_font",input_id:`${this.cid}-emoji-font-system`,label:nt.getString("settings__menu_item__emoji_font_system"),value:"system",hint:null}));this.$(".emoji-fonts-list").append(t),e=Object.values(e),e.sort(((e,t)=>e.order-t.order)),e.forEach((e=>{let t="";"Firefox"===dt.getBrowser()&&e.no_glyph&&(t=nt.getString("emoji_font__not_supported_firefox"));let i=e.name,s=gt(lt.setting_emoji_font_radio_input({input_name:"emoji_font",input_id:`${this.cid}-emoji-font-${e.value}`,label:i,value:e.value,hint:e.hint,no_glyph_text:t}));this.$(".emoji-fonts-list").append(s)}))},onScrollY:function(){0===this.getScrollTop()?this.$(".settings-panel-head").removeClass("lined-head"):this.$(".settings-panel-head").addClass("lined-head")},closeSettings:function(e){if(this.current_sound&&this.current_sound.pause(),nt.body.screen&&nt.body.screen.get("previous_screen")){let e=nt.body.screen.get("previous_screen");"notifications"===e.name&&e.open_all_chats?nt.toolbar_view.showAllChats():(e.close_settings=!0,nt.body.setScreen(e.name,e),nt.body.screen.attributes.close_settings=void 0)}else nt.toolbar_view.showAllChats()},backToMenu:function(e){this.current_sound&&this.current_sound.pause(),this.$(".left-column").removeClass("hidden"),this.$(".right-column").addClass("hidden"),this.$(".settings-panel-head .description").addClass("hidden"),this.scrollToTop(),this.updateHeight()},backToSubMenu:function(e){this.current_sound&&this.current_sound.pause();let t=gt(e.target).closest(".btn-back-subsettings"),i=t.attr("data-subblock-parent-name"),s=this.$(".settings-block-wrap."+i),n=s.attr("data-parent-block");this.$(".settings-block-wrap").addClass("hidden"),s.removeClass("hidden"),this.$(".settings-panel-head span.settings-panel-head-title").text(s.attr("data-header")),n?t.attr("data-subblock-parent-name",n):(this.$(".btn-back").removeClass("hidden"),this.$(".btn-back-subsettings").addClass("hidden")),this.$(".settings-panel-head .description").addClass("hidden"),this.scrollToTop(),this.updateHeight()},goToWebNotifications:function(e){this.$('.settings-tab[data-block-name="web-notifications"]').click()},setIdling:function(e){let t=!this.model.get("idling");this.model.save("idling",t),e.preventDefault(),gt(e.target).closest(".setting.idling").find("input").prop("checked",t),this.$("#idle_timeout").prop("disabled",!t)},setIdlingTimeout:function(e){let t=gt(e.target),i=gt(e.target).val();i=parseInt(i),ut.isNaN(i)?i=ct.IDLING_DEFAULT_TIMEOUT:i<ct.IDLING_MINIMAL_TIMEOUT&&(i=ct.IDLING_MINIMAL_TIMEOUT),this.model.save("idling_time",i),t.val(i),e.preventDefault()},setNotificationsVolumeEnabled:function(e){e.preventDefault();let t=!this.model.get("notifications_volume_enabled");this.model.save("notifications_volume_enabled",t),this.$("#notifications_volume_enable").prop("checked",t),this.$(".volume-setting .disabled").switchClass("hidden",t),this.$("#notifications_volume").prop("disabled",!t)},setNotifications:function(e){let t=this.model.get("notifications");e.preventDefault(),null===t?dt.callback_popup_message(nt.getString("notifications__toast_notifications_not_supported"),1500):(t=t&&nt._cache.get("notifications"),nt._cache.get("notifications")?(t=!t,this.model.save("notifications",t),this.$(".setting.notifications input[type=checkbox]").prop("checked",t),this.$(".notifications-lever input[type=checkbox]").prop("checked",t),this.$(".message-preview.private-preview input[type=checkbox]").prop("disabled",!(this.model.get("notifications")&&nt._cache.get("notifications")&&this.model.get("notifications_private"))),this.$(".message-preview.group-preview input[type=checkbox]").prop("disabled",!(this.model.get("notifications")&&nt._cache.get("notifications")&&this.model.get("notifications_group"))),this.$(".desktop-notifications-clue-wrap").hideIf(t),this.$(".notifications-dependant").switchClass("notifications-dependant-two-line",!t)):window.Notification.requestPermission((e=>{nt._cache.save({notifications:"granted"===e,ignore_notifications_warning:!0}),nt.notifications_placeholder&&nt.notifications_placeholder.close(),t="granted"===e,this.model.save("notifications",t||this.model.get("notifications")),this.$(".setting.notifications input[type=checkbox]").prop("checked",t),this.$(".notifications-lever input[type=checkbox]").prop("checked",t),this.$(".message-preview.private-preview input[type=checkbox]").prop("disabled",!(this.model.get("notifications")&&nt._cache.get("notifications")&&this.model.get("notifications_private"))),this.$(".message-preview.group-preview input[type=checkbox]").prop("disabled",!(this.model.get("notifications")&&nt._cache.get("notifications")&&this.model.get("notifications_group"))),this.$(".desktop-notifications-clue-wrap").hideIf(t),this.$(".notifications-dependant").switchClass("notifications-dependant-two-line",!t)})))},setPrivateNotifications:function(e){let t=!this.model.get("notifications_private");this.model.save("notifications_private",t),e.preventDefault(),this.$(".sound input[type=radio][name=private_sound]").prop("disabled",!t),this.$(".message-preview.private-preview input[type=checkbox]").prop("disabled",!(this.model.get("notifications")&&nt._cache.get("notifications")&&this.model.get("notifications_private"))),gt(e.target).closest(".private-notifications").find("input").prop("checked",t)},setGroupNotifications:function(e){let t=!this.model.get("notifications_group");this.model.save("notifications_group",t),e.preventDefault(),this.$(".sound input[type=radio][name=group_sound]").prop("disabled",!t),this.$(".message-preview.group-preview input[type=checkbox]").prop("disabled",!(this.model.get("notifications")&&nt._cache.get("notifications")&&this.model.get("notifications_group"))),gt(e.target).closest(".group-notifications").find("input").prop("checked",t)},setJingleCalls:function(e){let t=!this.model.get("jingle_calls");this.model.save("jingle_calls",t),e.preventDefault(),this.$(".sound input[type=radio][name=call_sound]").prop("disabled",!t),this.$(".sound input[type=radio][name=dialtone_sound]").prop("disabled",!t),gt(e.target).closest(".jingle-calls").find("input").prop("checked",t)},setPrivateMessagePreview:function(e){let t=!this.model.get("message_preview_private");this.model.save("message_preview_private",t),e.preventDefault(),gt(e.target).closest(".setting.message-preview").find("input").prop("checked",t)},setGroupMessagePreview:function(e){let t=!this.model.get("message_preview_group");this.model.save("message_preview_group",t),e.preventDefault(),gt(e.target).closest(".setting.message-preview").find("input").prop("checked",t)},setCallAttention:function(e){let t=!this.model.get("call_attention");this.model.save("call_attention",t),e.preventDefault(),gt(e.target).closest(".call-attention").find("input").prop("checked",t)},setLoadMedia:function(e){let t=!this.model.get("load_media");this.model.save("load_media",t),e.preventDefault(),gt(e.target).closest(".setting.load-media").find("input").prop("checked",t)},setTypingNotifications:function(e){let t=!this.model.get("typing_notifications");this.model.save("typing_notifications",t),e.preventDefault(),gt(e.target).closest(".setting.typing-notifications").find("input").prop("checked",t)},setMappingService:function(e){let t=!this.model.get("mapping_service");this.model.save("mapping_service",t),e.preventDefault(),gt(e.target).closest(".setting.mapping-service").find("input").prop("checked",t)},setDesktopAutostart:function(e){let t=!this.model.get("desktop_autostart");this.model.save("desktop_autostart",t),e.preventDefault(),gt(e.target).closest(".setting.desktop-autostart").find("input").prop("checked",t)},setReconnectionLogs:function(e){let t=!this.model.get("reconnection_logs");this.model.save("reconnection_logs",t),e.preventDefault(),gt(e.target).closest(".setting.reconnection-popup-log").find("input").prop("checked",t)},setPrivateSound:function(e){let t=e.target.value;t?(this.current_sound&&this.current_sound.pause(),this.current_sound=nt.playAudio(t,!1,this.model.get("notifications_volume_enabled")?this.model.get("notifications_volume"):0),this.model.save({private_sound:!0,sound_on_private_message:t})):this.model.save("private_sound",!1)},setGroupSound:function(e){let t=e.target.value;t?(this.current_sound&&this.current_sound.pause(),this.current_sound=nt.playAudio(t,!1,this.model.get("notifications_volume_enabled")?this.model.get("notifications_volume"):0),this.model.save({group_sound:!0,sound_on_group_message:t})):this.model.save("group_sound",!1)},setCallSound:function(e){let t=e.target.value;this.current_sound&&this.current_sound.pause(),this.current_sound=nt.playAudio(t,!1),this.model.save({sound_on_call:t})},setDialtoneSound:function(e){let t=e.target.value;this.current_sound&&this.current_sound.pause(),this.current_sound=nt.playAudio(t,!1),this.model.save({sound_on_dialtone:t})},setAttentionSound:function(e){let t=e.target.value;this.current_sound&&this.current_sound.pause(),this.current_sound=nt.playAudio(t,!1),this.model.save({sound_on_attention:t})},setBackground:function(e){let t=e.target.value;if("default"==t)this.model.save("background",{type:"default"}),nt.body.updateBackground(),this.updateBackgroundSetting();else if("repeating-pattern"==t||"image"==t){(new nt.SetBackgroundView).render({type:t,model:this.model})}},changeBackgroundImage:function(){let e=this.model.get("background").type;if("repeating-pattern"==e||"image"==e){(new nt.SetBackgroundView).render({type:e,model:this.model})}},openColorPicker:function(){this.colorPicker||(this.colorPicker=new nt.ColorPicker({model:this.model})),this.colorPicker.render()},chooseMainColor:function(e){let t=gt(e.target).closest(".client-main-color-item").attr("data-value");this.model.save("main_color",t),this.$(".client-main-color-item").removeClass("chosen-client-color"),this.$(`.client-main-color-item[data-value="${t}"]`).addClass("chosen-client-color"),nt.trigger("update_main_color")},changeBlur:function(){let e=this.$("#blur")[0].value,t=this.model.get("appearance");nt.body.updateBlur(e),this.model.save("appearance",ut.extend(t,{blur:e}))},changeNotificationsVolume:function(){let e=this.$("#notifications_volume")[0].value/100,t=this.$(".sound input[type=radio][name=private_sound]:checked").val()||this.$(".sound input[type=radio][name=group_sound]:checked").val();this.model.save("notifications_volume",e),t&&(this.current_sound&&this.current_sound.pause(),this.current_sound=nt.playAudio(t,!1,e))},changeVignetting:function(){let e=this.$("#vignetting")[0].value,t=this.model.get("appearance");nt.body.updateBoxShadow(e),this.model.save("appearance",ut.extend(t,{vignetting:e}))},switchVignetting:function(){let e=this.$("#vignetting_switch:checked").length,t=this.model.get("appearance"),i=!!e&&this.$("#vignetting")[0].value;this.$(".vignetting-setting .disabled").switchClass("hidden",e),this.model.save("appearance",ut.extend(t,{vignetting:i})),nt.body.updateBoxShadow(i)},switchBlur:function(){let e=this.$("#blur_switch:checked").length,t=this.model.get("appearance"),i=!!e&&this.$("#blur")[0].value;this.$(".blur-setting .disabled").switchClass("hidden",e),this.model.save("appearance",ut.extend(t,{blur:i})),nt.body.updateBlur(i)},setHotkeys:function(e){this.model.save("hotkeys",e.target.value)},setAvatarShape:function(e){this.model.save("avatar_shape",e.target.value),nt.trigger("update_avatar_shape")},setDeviceMetadata:function(e){this.model.save("device_metadata",e.target.value),this.$(".device-metadata-description").text(nt.getString(`settings__section_privacy__${this.model.get("device_metadata")}_metadata_description`)),this.updateHeight()},deleteAllAccounts:function(e){dt.dialogs.ask(nt.getString("button_quit"),nt.getString("settings__dialog_quit_client__confirm",[ct.CLIENT_NAME]),null,{ok_button_text:nt.getString("button_quit")}).done((e=>{e&&nt.trigger("quit")}))},changeLanguage:function(e){let t,i=e.target.value,s=Object.keys(client_translation_progress).find((e=>!i.indexOf(e)))||ct.languages_another_locales[i]&&Object.keys(client_translation_progress).find((e=>!ct.languages_another_locales[i].indexOf(e))),n=client_translation_progress[s];"default"==i&&(n=100),t=100==n&&("en"===nt.get("default_language")&&"default"===i||"en"===i)?nt.getString("settings__dialog_change_language__confirm"):100==n?nt.getString("settings__interface_language__change_language_text_full_translation",[ct.SHORT_CLIENT_NAME,`<a target="_blank" href='${ct.PROJECT_CROWDIN_URL}'>${nt.getString("settings__section_interface_language__text_description__text_translations")}</a>`,ct.SHORT_CLIENT_NAME])+"\n\n"+nt.getString("settings__dialog_change_language__confirm"):0==n?nt.getString("settings__interface_language__change_language_text_no_translation",[ct.SHORT_CLIENT_NAME,`<a target="_blank" href='${ct.PROJECT_CROWDIN_URL}'>${nt.getString("settings__section_interface_language__text_description__text_translation")}</a>`]):nt.getString("settings__interface_language__change_language_text_partial_translation",[ct.SHORT_CLIENT_NAME,`<a target="_blank" href='${ct.PROJECT_CROWDIN_URL}'>${nt.getString("settings__section_interface_language__text_description__text_translation_team")}</a>`,ct.SHORT_CLIENT_NAME])+"\n\n"+nt.getString("settings__dialog_change_language__confirm");let a,o=["change-language-modal"];0==n?o.push("change-language-modal-no-ok"):0!=n&&n<70&&(a=!0),dt.dialogs.ask(nt.getString("settings__dialog_change_language__header"),t,{modal_class:o,no_dialog_options:!0,inverted_buttons:a},{ok_button_text:nt.getString("settings__dialog_change_language__button_change")}).done((e=>{e?(this.model.save("language",i),window.location.reload(!0)):this.$(`.languages-list input[type=radio][name=language][value="${this.model.get("language")}"]`).prop("checked",!0)}))},changeEmojiFont:function(e){let t,i=e.target.value,s=ct.EMOJI_FONTS_LIST[i];if(!s&&"system"!==i)return gt(e.target).closest(".emoji-font-field").detach(),dt.dialogs.error(nt.getString("settings__menu_item__emoji_font_chosen_does_not_exist")),void this.$(`.emoji-fonts-list input[type=radio][name=emoji_font][value="${this.model.get("emoji_font")}"]`).prop("checked",!0);this.load_emoji_external_dfd=new gt.Deferred,this.load_emoji_external_dfd.done((()=>{this.font_load_dfd=new gt.Deferred,this.currently_loaded_font_value=i,this.font_load_dfd.done((s=>{this.emoji_load_date===t&&(this.$(".emoji_font .preloader-wrap").addClass("hidden"),this.$(".emoji_font .emoji-font-download-text").addClass("hidden"),this.$(".emoji_font .emojis-preview").removeClass("hidden"),this.$(".emoji_font .emoji-font-external-url-text").addClass("hidden"),this.$(".emoji_font .emoji-font-external-url-button").addClass("hidden"),this.$(".emoji-fonts-list input[type=radio][name=emoji_font]").prop("disabled",!1),this.font_load_dfd=null,this.currently_loaded_font_value=null,s&&s.error?(this.$(".emoji_font .emoji-font-attribution-text").addClass("hidden"),this.$(`.emoji-fonts-list input[type=radio][name=emoji_font][value="${this.model.get("emoji_font")}"]`).prop("checked",!0),gt(e.target).prop("disabled",!0),"system"!==this.model.get("emoji_font")&&ct.EMOJI_FONTS_LIST[this.model.get("emoji_font")]&&ct.EMOJI_FONTS_LIST[this.model.get("emoji_font")].url&&nt.loadEmojiFont(ct.EMOJI_FONTS_LIST[this.model.get("emoji_font")].url)):this.model.save("emoji_font",i))})),this.$(".emoji_font .emoji-font-external-url-text").addClass("hidden"),this.$(".emoji_font .emoji-font-external-url-button").addClass("hidden"),this.$(".emoji_font .preloader-wrap").removeClass("hidden"),this.$(".emoji_font .emoji-font-download-text").removeClass("hidden");let n="system"===i?i:s.url;this.load_emoji_external_dfd=null,this.$(".emoji-fonts-list input[type=radio][name=emoji_font]").prop("disabled",!0),this.emoji_load_date=Date.now(),t=this.emoji_load_date,this.$('.settings-tab[data-block-name="emoji_font"] .settings-block-label').text(nt.getString("settings__menu_item__emoji_font_downloading_text")),nt.loadEmojiFont(n,this.font_load_dfd)})),this.$(".emoji_font .emojis-preview").addClass("hidden"),this.$(".emoji_font .emoji-font-attribution-text").addClass("hidden"),s&&s.is_outside_url&&"system"!==i?(this.$(".emoji_font .emoji-font-external-url-text").removeClass("hidden"),this.$(".emoji_font .emoji-font-external-url-button").removeClass("hidden")):this.load_emoji_external_dfd.resolve()},loadExternalEmojiFont:function(e){this.load_emoji_external_dfd&&this.load_emoji_external_dfd.resolve()},updateEmojiFontLabel:function(){if(!ct.EMOJI_FONTS_LIST[this.model.get("emoji_font")]&&"system"!==this.model.get("emoji_font"))return void this.$('.settings-tab[data-block-name="emoji_font"] .settings-block-label').text(nt.getString("settings__menu_item__emoji_font_chosen_does_not_exist"));let e="system"===this.model.get("emoji_font")?"system":ct.EMOJI_FONTS_LIST[this.model.get("emoji_font")].name,t="system"===this.model.get("emoji_font")?"":ct.EMOJI_FONTS_LIST[this.model.get("emoji_font")].attribution_text;"system"===e&&(e=nt.getString("settings__menu_item__emoji_font_system")),this.$('.settings-tab[data-block-name="emoji_font"] .settings-block-label').text(e),this.$(".emoji-font-attribution-text").switchClass("hidden",!t),this.$(".emoji-font-attribution-text").html(t),this.$(`.emoji-fonts-list input[type=radio][name=emoji_font][value="${this.model.get("emoji_font")}"]`).prop("checked",!0),this.$(".emoji-fonts-list input[type=radio][name=emoji_font]").prop("disabled",!1),this.$(".emoji_font .emoji-font-external-url-text").addClass("hidden"),this.$(".emoji_font .emoji-font-external-url-button").addClass("hidden"),this.$(".emoji_font .preloader-wrap").addClass("hidden"),this.$(".emoji_font .emoji-font-download-text").addClass("hidden"),this.$(".emoji_font .emojis-preview").removeClass("hidden"),this.font_load_dfd&&this.currently_loaded_font_value&&(this.$(".emoji_font .emojis-preview").addClass("hidden"),this.$(".emoji-font-attribution-text").addClass("hidden"),this.$(".emoji_font .preloader-wrap").removeClass("hidden"),this.$(".emoji_font .emoji-font-download-text").removeClass("hidden"),this.$(".emoji-fonts-list input[type=radio][name=emoji_font]").prop("disabled",!0),this.$(`.emoji-fonts-list input[type=radio][name=emoji_font][value="${this.currently_loaded_font_value}"]`).prop("checked",!0),this.$('.settings-tab[data-block-name="emoji_font"] .settings-block-label').text(nt.getString("settings__menu_item__emoji_font_downloading_text")))},updateLanguage:function(){"default"===this.model.get("language")?this.$('.settings-tab[data-block-name="interface_language"] .settings-block-label').text(nt.getString("settings__languages_list___item_default",[ct.languages[nt.get("default_language")||"en"]])):this.$('.settings-tab[data-block-name="interface_language"] .settings-block-label').text(ct.languages[this.model.get("language")])},showAddAccountView:function(){nt.trigger("add_account",{right:null})},updateDescription:function(){if(!nt.settings.language)return;let e=nt.settings.language,t=Object.keys(client_translation_progress).find((t=>!e.indexOf(t)))||ct.languages_another_locales[e]&&Object.keys(client_translation_progress).find((t=>!ct.languages_another_locales[e].indexOf(t))),i=client_translation_progress[t];if(("default"==e||!e.indexOf("en"))&&(i=100),!ut.isUndefined(i)){let t,s;t=100==i&&("en"===nt.get("default_language")&&"default"===e||"en"===e)?nt.getString("settings__interface_language__text_description_full_translation_english",[ct.SHORT_CLIENT_NAME,`<a target="_blank" class="email-link" href='mailto:${ct.EMAIL_FOR_JOIN_TRANSLATION}'>${ct.EMAIL_FOR_JOIN_TRANSLATION}</a>`,ct.SHORT_CLIENT_NAME]):100==i?nt.getString("settings__interface_language__text_description_full_translation",[ct.SHORT_CLIENT_NAME,ct.SHORT_CLIENT_NAME]):0==i?nt.getString("settings__section_interface_language__text_description_no_translations",[ct.SHORT_CLIENT_NAME]):nt.getString("settings__interface_language__text_description_unfull_translation",[ct.SHORT_CLIENT_NAME]),s=nt.getString("settings__interface_language__text_description_platform",[ct.SHORT_CLIENT_NAME,`<a target="_blank" href='${ct.PROJECT_CROWDIN_URL}'>${ct.PROJECT_CROWDIN_URL}</a>`]),this.$(".description").html(`${t}<br><br>${s}`)}},updateAvatarLabel:function(){let e,t=this.model.get("avatar_shape");"circle"===t&&(e=nt.getString("settings__section_appearance__avatars_circle")),"squircle"===t&&(e=nt.getString("settings__section_appearance__avatars_squircle")),"octagon"===t&&(e=nt.getString("settings__section_appearance__avatars_octagon")),"hexagon"===t&&(e=nt.getString("settings__section_appearance__avatars_hexagon")),"pentagon"===t&&(e=nt.getString("settings__section_appearance__avatars_pentagon")),"rounded"===t&&(e=nt.getString("settings__section_appearance__avatars_rounded")),"star"===t&&(e=nt.getString("settings__section_appearance__avatars_star")),this.$('.settings-tab[data-block-name="avatars"] .settings-block-label').text(e)},updateSoundsLabel:function(){let e,t,i,s=this.model.get("private_sound")&&this.model.get("notifications_private")?this.model.get("sound_on_private_message"):"",n=this.model.get("group_sound")&&this.model.get("notifications_group")?this.model.get("sound_on_group_message"):"",a=this.model.get("call_attention")?this.model.get("sound_on_attention"):"";e=""===s?"No sound":s.replace("_"," "),t=""===n?"No sound":n.replace("_"," "),i=""===a?"No sound":a.replace("_"," "),this.$('.settings-tab[data-block-name="chats-notifications"] .settings-block-label').text(e),this.$('.settings-tab[data-block-name="groupchats-notifications"] .settings-block-label').text(t),this.$('.settings-tab[data-block-name="attention-calls"] .settings-block-label').text(i)}}),nt.mainColorPicker=nt.BasicView.extend({className:"modal main-modal main-color-picker",template:lt.color_scheme,ps_selector:".modal-content",ps_settings:{theme:"item-list"},events:{"click .color-value":"setColor"},_initialize:function(e){this.model=e.model},render:function(){this.$el.openModal({ready:()=>{this.$(".modal-content").css("max-height",Math.min(gt(window).height()-341,456)).perfectScrollbar({theme:"item-list"})},complete:this.close.bind(this)})},setColor:function(e){let t=gt(e.target).closest(".color-value").attr("data-value");this.model.save("main_color",t),nt.trigger("update_main_color"),this.close()},close:function(){this.$el.closeModal({complete:()=>{this.$el.detach(),this.data.set("visible",!1)}})}}),nt.ColorPicker=nt.BasicView.extend({className:"modal main-modal color-picker",materialColors:[{color:"red",variations:[{weight:50,hex:"#FFEBEE"},{weight:100,hex:"#FFCDD2"},{weight:200,hex:"#EF9A9A"},{weight:300,hex:"#E57373"},{weight:400,hex:"#EF5350"},{weight:500,hex:"#F44336"},{weight:600,hex:"#E53935"},{weight:700,hex:"#D32F2F"},{weight:800,hex:"#C62828"},{weight:900,hex:"#B71C1C"}]},{color:"pink",variations:[{weight:50,hex:"#FCE4EC"},{weight:100,hex:"#F8BBD0"},{weight:200,hex:"#F48FB1"},{weight:300,hex:"#F06292"},{weight:400,hex:"#EC407A"},{weight:500,hex:"#E91E63"},{weight:600,hex:"#D81B60"},{weight:700,hex:"#C2185B"},{weight:800,hex:"#AD1457"},{weight:900,hex:"#880E4F"}]},{color:"purple",variations:[{weight:50,hex:"#F3E5F5"},{weight:100,hex:"#E1BEE7"},{weight:200,hex:"#CE93D8"},{weight:300,hex:"#BA68C8"},{weight:400,hex:"#AB47BC"},{weight:500,hex:"#9C27B0"},{weight:600,hex:"#8E24AA"},{weight:700,hex:"#7B1FA2"},{weight:800,hex:"#6A1B9A"},{weight:900,hex:"#4A148C"}]},{color:"deep-purple",variations:[{weight:50,hex:"#EDE7F6"},{weight:100,hex:"#D1C4E9"},{weight:200,hex:"#B39DDB"},{weight:300,hex:"#9575CD"},{weight:400,hex:"#7E57C2"},{weight:500,hex:"#673AB7"},{weight:600,hex:"#5E35B1"},{weight:700,hex:"#512DA8"},{weight:800,hex:"#4527A0"},{weight:900,hex:"#311B92"}]},{color:"indigo",variations:[{weight:50,hex:"#E8EAF6"},{weight:100,hex:"#C5CAE9"},{weight:200,hex:"#9FA8DA"},{weight:300,hex:"#7986CB"},{weight:400,hex:"#5C6BC0"},{weight:500,hex:"#3F51B5"},{weight:600,hex:"#3949AB"},{weight:700,hex:"#303F9F"},{weight:800,hex:"#283593"},{weight:900,hex:"#1A237E"}]},{color:"blue",variations:[{weight:50,hex:"#E3F2FD"},{weight:100,hex:"#BBDEFB"},{weight:200,hex:"#90CAF9"},{weight:300,hex:"#64B5F6"},{weight:400,hex:"#42A5F5"},{weight:500,hex:"#2196F3"},{weight:600,hex:"#1E88E5"},{weight:700,hex:"#1976D2"},{weight:800,hex:"#1565C0"},{weight:900,hex:"#0D47A1"}]},{color:"light-blue",variations:[{weight:50,hex:"#E1F5FE"},{weight:100,hex:"#B3E5FC"},{weight:200,hex:"#81D4FA"},{weight:300,hex:"#4FC3F7"},{weight:400,hex:"#29B6F6"},{weight:500,hex:"#03A9F4"},{weight:600,hex:"#039BE5"},{weight:700,hex:"#0288D1"},{weight:800,hex:"#0277BD"},{weight:900,hex:"#01579B"}]},{color:"cyan",variations:[{weight:50,hex:"#E0F7FA"},{weight:100,hex:"#B2EBF2"},{weight:200,hex:"#80DEEA"},{weight:300,hex:"#4DD0E1"},{weight:400,hex:"#26C6DA"},{weight:500,hex:"#00BCD4"},{weight:600,hex:"#00ACC1"},{weight:700,hex:"#0097A7"},{weight:800,hex:"#00838F"},{weight:900,hex:"#006064"}]},{color:"teal",variations:[{weight:50,hex:"#E0F2F1"},{weight:100,hex:"#B2DFDB"},{weight:200,hex:"#80CBC4"},{weight:300,hex:"#4DB6AC"},{weight:400,hex:"#26A69A"},{weight:500,hex:"#009688"},{weight:600,hex:"#00897B"},{weight:700,hex:"#00796B"},{weight:800,hex:"#00695C"},{weight:900,hex:"#004D40"}]},{color:"green",variations:[{weight:50,hex:"#E8F5E9"},{weight:100,hex:"#C8E6C9"},{weight:200,hex:"#A5D6A7"},{weight:300,hex:"#81C784"},{weight:400,hex:"#66BB6A"},{weight:500,hex:"#4CAF50"},{weight:600,hex:"#43A047"},{weight:700,hex:"#388E3C"},{weight:800,hex:"#2E7D32"},{weight:900,hex:"#1B5E20"}]},{color:"light-green",variations:[{weight:50,hex:"#F1F8E9"},{weight:100,hex:"#DCEDC8"},{weight:200,hex:"#C5E1A5"},{weight:300,hex:"#AED581"},{weight:400,hex:"#9CCC65"},{weight:500,hex:"#8BC34A"},{weight:600,hex:"#7CB342"},{weight:700,hex:"#689F38"},{weight:800,hex:"#558B2F"},{weight:900,hex:"#33691E"}]},{color:"lime",variations:[{weight:50,hex:"#F9FBE7"},{weight:100,hex:"#F0F4C3"},{weight:200,hex:"#E6EE9C"},{weight:300,hex:"#DCE775"},{weight:400,hex:"#D4E157"},{weight:500,hex:"#CDDC39"},{weight:600,hex:"#C0CA33"},{weight:700,hex:"#AFB42B"},{weight:800,hex:"#9E9D24"},{weight:900,hex:"#827717"}]},{color:"yellow",variations:[{weight:50,hex:"#FFFDE7"},{weight:100,hex:"#FFF9C4"},{weight:200,hex:"#FFF59D"},{weight:300,hex:"#FFF176"},{weight:400,hex:"#FFEE58"},{weight:500,hex:"#FFEB3B"},{weight:600,hex:"#FDD835"},{weight:700,hex:"#FBC02D"},{weight:800,hex:"#F9A825"},{weight:900,hex:"#F57F17"}]},{color:"amber",variations:[{weight:50,hex:"#FFF8E1"},{weight:100,hex:"#FFECB3"},{weight:200,hex:"#FFE082"},{weight:300,hex:"#FFD54F"},{weight:400,hex:"#FFCA28"},{weight:500,hex:"#FFC107"},{weight:600,hex:"#FFB300"},{weight:700,hex:"#FFA000"},{weight:800,hex:"#FF8F00"},{weight:900,hex:"#FF6F00"}]},{color:"orange",variations:[{weight:50,hex:"#FFF3E0"},{weight:100,hex:"#FFE0B2"},{weight:200,hex:"#FFCC80"},{weight:300,hex:"#FFB74D"},{weight:400,hex:"#FFA726"},{weight:500,hex:"#FF9800"},{weight:600,hex:"#FB8C00"},{weight:700,hex:"#F57C00"},{weight:800,hex:"#EF6C00"},{weight:900,hex:"#E65100"}]},{color:"deep-orange",variations:[{weight:50,hex:"#FBE9E7"},{weight:100,hex:"#FFCCBC"},{weight:200,hex:"#FFAB91"},{weight:300,hex:"#FF8A65"},{weight:400,hex:"#FF7043"},{weight:500,hex:"#FF5722"},{weight:600,hex:"#F4511E"},{weight:700,hex:"#E64A19"},{weight:800,hex:"#D84315"},{weight:900,hex:"#BF360C"}]},{color:"brown",variations:[{weight:50,hex:"#EFEBE9"},{weight:100,hex:"#D7CCC8"},{weight:200,hex:"#BCAAA4"},{weight:300,hex:"#A1887F"},{weight:400,hex:"#8D6E63"},{weight:500,hex:"#795548"},{weight:600,hex:"#6D4C41"},{weight:700,hex:"#5D4037"},{weight:800,hex:"#4E342E"},{weight:900,hex:"#3E2723"}]},{color:"grey",variations:[{weight:50,hex:"#FAFAFA"},{weight:100,hex:"#F5F5F5"},{weight:200,hex:"#EEEEEE"},{weight:300,hex:"#E0E0E0"},{weight:400,hex:"#BDBDBD"},{weight:500,hex:"#9E9E9E"},{weight:600,hex:"#757575"},{weight:700,hex:"#616161"},{weight:800,hex:"#424242"},{weight:900,hex:"#212121"}]},{color:"blue-grey",variations:[{weight:50,hex:"#ECEFF1"},{weight:100,hex:"#CFD8DC"},{weight:200,hex:"#B0BEC5"},{weight:300,hex:"#90A4AE"},{weight:400,hex:"#78909C"},{weight:500,hex:"#607D8B"},{weight:600,hex:"#546E7A"},{weight:700,hex:"#455A64"},{weight:800,hex:"#37474F"},{weight:900,hex:"#263238"}]}],ps_selector:".material-color-picker-wrap",events:{"click .color-palette-item":"selectColor","click .selected-color-hex":"updateInputField","focusout .selected-color-hex-input":"focusoutInputField","keyup .selected-color-hex-input":"keyUpInput","click .btn-set":"setColor"},_initialize(e){this.model=e.model,this.$el.html(lt.color_picker({materialColors:this.materialColors}))},render:function(){this.$el.openModal({ready:()=>{let e=this.$(".selected-color-hex-input"),t=this.$(".selected-color-hex"),i=this.model.get("appearance").color||"#E0E0E0",s=this.materialColors.find((e=>e.variations.find((e=>e.hex.toLowerCase()==i.toLowerCase()))));if(s){let e=s.variations.find((e=>e.hex.toLowerCase()==i.toLowerCase()));this.$(".selected-color-name").text(nt.getString(`account_color_name_${s.color.replace(/-/g,"_")}`).replace(/-/g," ")+` ${e.weight}`)}else this.$(".selected-color-name").text(nt.getString("settings__section_appearance__hint_custom_color"));i&&(this.$(".selected-color-wrap").removeClass("hidden"),e.addClass("hidden"),t.removeClass("hidden").text(i),i&&this.$(".selected-color-item").css("background-color",i))},complete:this.close.bind(this)})},updateInputField:function(){let e=this.$(".selected-color-hex-input"),t=this.$(".selected-color-hex");e.removeClass("hidden"),e[0].value=t.text(),t.addClass("hidden")},keyUpInput:function(e){e.keyCode==ct.KEY_ENTER&&(e.preventDefault(),this.focusoutInputField());let t=this.$(".selected-color-hex-input")[0].value.trim();this.$(".selected-color-item").css("background-color",t);let i=this.materialColors.find((e=>e.variations.find((e=>e.hex.toLowerCase()==t.toLowerCase()))));if(i){let e=i.variations.find((e=>e.hex.toLowerCase()==t.toLowerCase()));this.$(".selected-color-name").text(nt.getString(`account_color_name_${i.color.replace(/-/g,"_")}`).replace(/-/g," ")+` ${e.weight}`)}else this.$(".selected-color-name").text(nt.getString("settings__section_appearance__hint_custom_color"))},focusoutInputField:function(){let e=this.$(".selected-color-hex-input"),t=this.$(".selected-color-hex"),i=e[0].value.trim(),s=this.materialColors.find((e=>e.variations.find((e=>e.hex.toLowerCase()==i.toLowerCase()))));if(s){let e=s.variations.find((e=>e.hex.toLowerCase()==i.toLowerCase()));this.$(".selected-color-name").text(nt.getString(`account_color_name_${s.color.replace(/-/g,"_")}`).replace(/-/g," ")+` ${e.weight}`)}else this.$(".selected-color-name").text(nt.getString("settings__section_appearance__hint_custom_color"));e.addClass("hidden"),t.removeClass("hidden").text(i),this.$(".selected-color-item").css("background-color",i)},selectColor:function(e){let t=gt(e.target),i=t.attr("data-hex"),s=t.closest(".color-palette-wrapper").attr("data-color-name").replace(/-/g,"_"),n=t.attr("data-weight");this.$(".selected-color-wrap").removeClass("hidden"),this.$(".selected-color-item").css("background-color",i),this.$(".selected-color-name").text(nt.getString(`account_color_name_${s}`).replace(/-/g," ").replace(/-/g," ")+` ${n}`),this.$(".selected-color-hex").text(i);let a=this.$(".selected-color-hex-input"),o=this.$(".selected-color-hex");a.addClass("hidden"),o.removeClass("hidden")},setColor:function(){this.close();let e=this.model.get("appearance");this.model.save("appearance",ut.extend(e,{color:this.$(".selected-color-hex").text()}))},close:function(){this.$el.closeModal({complete:()=>{this.$el.detach(),this.data.set("visible",!1),nt.settings_modal_view.updateColor()}})}}),nt.SetBackgroundView=nt.BasicView.extend({className:"modal main-modal settings-background background-panel",template:lt.backgrounds_gallery,ps_selector:".modal-content",ps_settings:{theme:"item-list"},events:{"click .menu-btn":"updateActiveMenu","click .library-wrap .image-item":"setActiveImage",'change input[type="file"]':"onFileInputChanged","keyup input.url":"onInputChanged","click .btn-add":"addBackground","click .btn-cancel":"close"},_initialize:function(){this.$("input.url")[0].onpaste=this.onPaste.bind(this),this.ps_container.on("ps-scroll-y",this.onScrollY.bind(this))},render:function(e){this.model=e.model,this.type=e.type,this.createLibrary(),this.$(".menu-btn").removeClass("active"),this.$('.menu-btn[data-screen-name="library"]').addClass("active"),"repeating-pattern"==this.type?this.$(".modal-header span").text(nt.getString("settings__dialog_background__header_pattern")):this.$(".modal-header span").text(nt.getString("settings__dialog_background__header_image")),this.$el.openModal({ready:()=>{this.$(".modal-content").css("max-height",Math.min(gt(window).height()-341,456)).perfectScrollbar({theme:"item-list"})},complete:this.close.bind(this)});let t=this.$(".upload-wrap");t[0].ondragenter=function(e){e.preventDefault(),t.addClass("file-drop")},t[0].ondragover=function(e){e.preventDefault()},t[0].ondragleave=function(e){gt(e.relatedTarget).closest(".upload-wrap").length||(e.preventDefault(),t.removeClass("file-drop"))},t[0].ondrop=e=>{e.preventDefault(),e.stopPropagation(),t.removeClass("file-drop");let i,s=e.dataTransfer.files||[];for(let e=0;e<s.length;e++)if(dt.isImageType(s[e].type)){i=s[e];break}i&&this.addFile(i)}},onScrollY:function(){"library"===this.$(".screen-wrap:not(.hidden)").attr("data-screen")&&this.getScrollBottom()<5&&this.loadMoreImages()},getImagesFromXML:function(e){"repeating-pattern"==this.type&&this.model.patterns_library||"images"==this.type&&this.model.img_library||("repeating-pattern"==this.type?this.onGetPatternsCallback(rt.backgroundPatternsXml):this.onGetImagesCallback(rt.backgroundImagesXml)),e&&e()},onGetPatternsCallback:function(e){if(!(e&&e["background-patterns"]&&e["background-patterns"].image))return;let t=[];(e=e["background-patterns"].image).forEach((e=>{t.push({thumbnail:e})})),this.model.patterns_library=t},onGetImagesCallback:function(e){if(!(e&&e["background-images"]&&e["background-images"].image))return;let t=[];(e=e["background-images"].image).forEach((e=>{let i=e.thumbnail,s=e["fullscreen-image"];t.push({thumbnail:i,fs_img:s})})),this.model.img_library=t},onPaste:function(e){let t=e.clipboardData.getData("text").trim();this.$(".image-preview img")[0].onload=()=>{this.$(".image-preview img").removeClass("hidden"),this.updateActiveButton()},this.$(".image-preview img").addClass("hidden")[0].src=t,this.updateActiveButton()},updateActiveMenu:function(e){let t=e.target.getAttribute("data-screen-name");this.$(".menu-btn").removeClass("active"),this.$(`.menu-btn[data-screen-name="${t}"]`).addClass("active"),this.updateScreen(t)},updateScreen:function(e){this.$(".screen-wrap").addClass("hidden"),this.$(`.screen-wrap[data-screen="${e}"]`).removeClass("hidden"),this.scrollToTop(),this.updateActiveButton()},updateActiveButton:function(){let e=this.$(".screen-wrap:not(.hidden)"),t=!0;"library"==e.attr("data-screen")?e.find("div.active").length&&(t=!1):e.find("img:not(.hidden)").length&&(t=!1),this.$(".modal-footer .btn-add").switchClass("non-active",t)},createLibrary:function(){this.getImagesFromXML((()=>{this.loadMoreImages(40)}))},loadMoreImages:function(e){if("repeating-pattern"==this.type&&!this.model.patterns_library||"images"==this.type&&!this.model.img_library)return;!e&&(e=20);let t=this.$(".image-item").length;if(!("repeating-pattern"==this.type&&t>=this.model.patterns_library.length||"images"==this.type&&t>=this.model.img_library.length))for(let i=t;i<t+e;i++){let e=gt('<div class="image-item"/>'),t="repeating-pattern"==this.type?this.model.patterns_library[i]:this.model.img_library[i];if(!t)break;e.css("background-image",`url("${t.thumbnail}")`),e.attr("data-src","repeating-pattern"==this.type?t.thumbnail:t.fs_img),this.$(".library-wrap").append(e)}},setActiveImage:function(e){let t=gt(e.target);t.hasClass("active")?t.removeClass("active"):(this.$(".library-wrap>div").removeClass("active"),t.addClass("active")),this.updateActiveButton()},onFileInputChanged:function(e){let t,i=e.target;for(let e=0;e<i.files.length;e++)if(dt.isImageType(i.files[e].type)){t=i.files[e];break}t&&this.addFile(t),gt(i).val("")},addFile:function(e){let t=new FileReader;t.onload=e=>{let t=new Image,i=e.target.result;t.src=i,this.$('.screen-wrap[data-screen="upload"] img').detach(),this.$('.screen-wrap[data-screen="upload"]').prepend(t),this.updateActiveButton()},t.readAsDataURL(e)},onInputChanged:function(e){if(e.target.value.trim()!=this.$(".image-preview img")[0].src)if(e.target.value.trim()&&e.keyCode!==ct.KEY_CTRL&&e.keyCode!==ct.KEY_SHIFT&&e.keyCode!==ct.KEY_ARROW_UP&&e.keyCode!==ct.KEY_ARROW_DOWN&&e.keyCode!==ct.KEY_ARROW_RIGHT&&e.keyCode!==ct.KEY_ARROW_LEFT){let t=e.target.value.trim();this.$(".image-preview img")[0].onload=()=>{this.$(".image-preview img").removeClass("hidden"),this.updateActiveButton()},this.$(".image-preview img").addClass("hidden")[0].src=t,this.updateActiveButton()}else this.$(".image-preview img").addClass("hidden")[0].src="",this.updateActiveButton()},addBackground:function(){if(this.$(".btn-add").hasClass("non-active"))return;let e,t=new gt.Deferred,i=this.$(".screen-wrap:not(.hidden)");if(t.done((e=>{e?this.model.save("background",{type:this.type,image:e}):this.model.save("background",{type:"default"}),nt.body.updateBackground(),this.close()})),"library"==i.attr("data-screen"))e=i.find("div.active").attr("data-src"),t.resolve(e);else if(e=i.find("img:not(.hidden)")[0].src,"web-address"==i.attr("data-screen")){let i={type:"GET",url:e,headers:{"Access-Control-Allow-Origin":"*"},dataType:"blob",success:function(i){e=i,t.resolve(e)},error:()=>{t.resolve(e)}};gt.ajax(i)}else t.resolve(e)},close:function(){nt.settings_modal_view.updateBackgroundSetting(),this.$el.closeModal({complete:()=>{this.$el.detach(),this.data.set("visible",!1)}})}}),nt.AboutView=nt.BasicView.extend({className:"settings-panel about-panel",template:lt.about,ps_selector:".panel-content",_initialize:function(){this.$(".xabber-info-wrap .version").text(this.model.get("version_number"))},render:function(){}}),nt.DragManager=Backbone.Model.extend({initialize:function(){window.document.onmousedown=this.onMouseDown.bind(this),window.document.onmousemove=this.onMouseMove.bind(this),window.document.onmouseup=this.onMouseUp.bind(this)},onMouseDown:function(e){if(1!=e.which)return;let t=e&&e.target&&e.target.closest?e.target.closest(".drag-handle"):gt(e.target).closest(".drag-handle"),i=t&&t.closest(".draggable");if(!i)return this.resetElem();this.set({elem:i,draghandle_elem:t,downX:e.pageX,downY:e.pageY})},onMouseMove:function(e){if(!this.get("elem"))return;let t=this.get("avatar");if(!t){if(Math.abs(e.pageX-this.get("downX"))<3&&Math.abs(e.pageY-this.get("downY"))<3)return;if(t=this.createAvatar(e),!t)return this.resetElem();this.set("avatar",t);let i=this.getCoords(t);this.set({shiftX:this.get("downX")-i.left,shiftY:this.get("downY")-i.top}),this.startDrag(e)}t.style.left=e.pageX-this.get("shiftX")+"px",t.style.top=e.pageY-this.get("shiftY")+"px";let i=this.findDropElem(e);this.updateDropElem(i)},onMouseUp:function(e){let t=document.querySelector(".recording");t?gt(t).removeClass("recording"):(this.get("avatar")&&this.finishDrag(e),this.resetElem())},resetElem:function(){this.set({elem:null,draghandle_elem:null,avatar:null})},getCoords:function(e){let t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}},createAvatar:function(){let e=this.get("elem"),t=gt(e),i=this.get("draghandle_elem"),s={parent:e.parentNode,nextSibling:e.nextSibling,position:e.position||"",left:e.left||"",top:e.top||"",zIndex:e.zIndex||"",avatar_cursor:e.style.cursor||"",draghandle_elem_cursor:i.style.cursor||""};return t.addClass("dragging"),e.style.cursor="-webkit-grabbing",i.style.cursor="-webkit-grabbing",e.rollback=function(){s.parent.insertBefore(e,s.nextSibling),t.removeClass("dragging"),e.style.position=s.position,e.style.left=s.left,e.style.top=s.top,e.style.zIndex=s.zIndex,e.style.cursor=s.avatar_cursor,i.style.cursor=s.draghandle_elem_cursor},e},startDrag:function(e){let t=this.get("avatar");window.document.body.appendChild(t),t.style.zIndex=9999,t.style.position="absolute"},finishDrag:function(e){let t=this.get("elem"),i=this.get("avatar"),s=this.findDropElem(e);i.rollback(),this.updateDropElem(null),t&&s&&(gt(t).trigger("drag_to",s),gt(s).trigger("drag_from",t))},findDropElem:function(e){let t=this.get("avatar");t.hidden=!0;let i=window.document.elementFromPoint(e.clientX,e.clientY);return t.hidden=!1,i?i.closest(".droppable"):null},updateDropElem:function(e){let t=this.get("drop_elem");this.set("drop_elem",e),t&&gt(t).removeClass("drag-on"),e&&gt(e).addClass("drag-on")}}),ut.extend(nt,{modal_settings:{open:{in_duration:10,out_duration:10,opacity:.4},close:{out_duration:10}},ps_settings:{minScrollbarLength:40,suppressScrollX:!0,wheelSpeed:.5},startBlinkingFavicon:function(e){this._blink_interval&&void 0===e||(clearInterval(this._blink_interval),this._blink_interval=setInterval((()=>{let t,i=gt("link[rel='shortcut icon']");t=i.attr("href").indexOf(this.cache.favicon)>-1||i.attr("href").indexOf(ct.FAVICON_DEFAULT)>-1||i.attr("href").indexOf(this.cache.favicon_gray)>-1||i.attr("href").indexOf(ct.FAVICON_DEFAULT_GREY)>-1?this.cache.favicon_message||ct.FAVICON_MESSAGE:e?this.cache.favicon_gray||ct.FAVICON_DEFAULT_GREY:this.cache.favicon||ct.FAVICON_DEFAULT,i.attr("href",t)}),1e3))},stopBlinkingFavicon:function(e){if(this._blink_interval||void 0!==e){clearInterval(this._blink_interval),this._blink_interval=null;let t=e?this.cache.favicon_gray||ct.FAVICON_DEFAULT_GREY:this.cache.favicon||ct.FAVICON_DEFAULT;gt("link[rel='shortcut icon']").attr("href",t)}},onChangedAllMessageCounter:function(){this.get("all_msg_counter")?(this.startBlinkingFavicon(),window.document.title=nt.getString("notofications__desktop_notification__text",[this.get("all_msg_counter")])):(this.stopBlinkingFavicon(),window.document.title=ct.CLIENT_NAME)},updateAllMessageCounterOnDisconnect:function(e){this.get("all_msg_counter")?(this.startBlinkingFavicon(e),window.document.title=nt.getString("notofications__desktop_notification__text",[this.get("all_msg_counter")])):(this.stopBlinkingFavicon(e),window.document.title=ct.CLIENT_NAME)},loadEmojiFont:function(e,t){if(nt.error("loading Font!"),e&&"system"!==e){let i,s=new FontFace("EmojiFont",`url(${e})`),n=setInterval((()=>{ot.log("status - "+s.status),"loaded"!=s.status&&"error"!=s.status||(clearInterval(n),"loaded"!=s.status||i?"error"!=s.status||i||(i=!0,ot.log("error - interval"),dt.dialogs.error(nt.getString("settings__menu_item__emoji_font_error_loading")),gt(ct.CONTAINER_ELEMENT).removeClass("custom-emoji-font"),t&&t.resolve({error:!0})):(i=!0,ot.log("loaded - interval"),document.fonts.add(s),gt(ct.CONTAINER_ELEMENT).addClass("custom-emoji-font"),t&&t.resolve({})))}),1e3);s.load().then((()=>{ot.log("loaded"),i||(i=!0,document.fonts.add(s),gt(ct.CONTAINER_ELEMENT).addClass("custom-emoji-font"),t&&t.resolve({}))})).catch((e=>{ot.log("error"),i||(i=!0,dt.dialogs.error(nt.getString("settings__menu_item__emoji_font_error_loading")+e),gt(ct.CONTAINER_ELEMENT).removeClass("custom-emoji-font"),t&&t.resolve({error:!0}))}))}else"system"===e&&(ot.log("system font"),gt(ct.CONTAINER_ELEMENT).removeClass("custom-emoji-font"),t&&t.resolve({}))},setAllMessageCounter:function(){let e=0;return nt.accounts.each((t=>{t.chats.each((t=>{t.contact&&!t.isMuted()&&(e+=t.get("unread")+t.get("const_unread"))}));let i=t.contacts.filter((e=>e.get("invitation")&&!e.get("removed")||e.get("subscription_request_in")&&"both"!=e.get("subscription"))).length;e+=i})),e},recountAllMessageCounter:function(){this.get("focused")||this.set("all_msg_counter",this.setAllMessageCounter())},resetMessageCounter:function(){this.set("all_msg_counter",0)},onChangedFocusState:function(){this.get("focused")&&this.resetMessageCounter()},openWindow:function(e){dt.openWindow(e,(()=>{dt.dialogs.error(nt.getString("notifications__error__text_could_not_open_new_tab"))}))},popupNotification:function(e){let t=new window.Notification(e.title,{body:e.text,icon:e.icon});return setTimeout(t.close.bind(t),5e3),t},playAudio:function(e,t,i){(!i&&0!==i||isNaN(i))&&(i=1),t=t||!1;let s=sounds.all_sounds.find((t=>t.file_name===e));if(s){let e=new window.Audio(s.audio);return e.loop=t,e.volume=i,e.play(),e}},stopAudio:function(e){e&&(e.pause(),e.remove())},registerDOMEvents:function(){let e=this;gt(window).on("blur focus",(function(t){e.set("focused","focus"===t.type)})),gt(window).on("resize",(function(t){e.set({width:window.innerWidth,height:window.innerHeight}),e.trigger("update_layout",{size_changed:!0})})),window.document.body.ondragover=e=>{e.preventDefault()},window.document.body.ondrop=e=>{e.preventDefault()}},initIdleJS:function(){this.idleJs&&this.idleJs.stop();let e=this,t=1e3*e._settings.get("idling_time");this.idleJs=new idleJs({idle:t,events:["mousemove","keydown","mousedown","touchstart","focus","blur"],onIdle:()=>{e._settings.get("idling")?e.set("idle",!0):e.set("idle",!1)},onActive:()=>{e.set("idle",!1)},keepTracking:!0,startAtIdle:!1}),this.idleJs.start()},autostartHandler:function(){if(!ct.DESKTOP_AUTOSTART_OPTION)return;if(!window.electronAPI||!window.electronAPI.autostartHandler)return;let e=this._settings.get("desktop_autostart");window.electronAPI.autostartHandler(Boolean(e))}}),nt.once("start",(function(){this.set("all_msg_counter",0),this.on("change:all_msg_counter",this.onChangedAllMessageCounter,this),this.on("change:focused",this.onChangedFocusState,this),this._settings.on("change:idling_time",this.initIdleJS,this),this._settings.on("change:desktop_autostart",this.autostartHandler,this),this.set({focused:window.document.hasFocus(),width:window.innerWidth,height:window.innerHeight}),this.registerDOMEvents(),this.initIdleJS(),this.autostartHandler(),Materialize.modalSettings=this.modal_settings,this.drag_manager=new this.DragManager,this.body=new this.Body({model:this}),this.login_page=this.body.addChild("login",this.NodeView,{classlist:"login-page-wrap",el:gt(document).find(".login-container")[0]}),this.toolbar_view=this.body.addChild("toolbar",this.ToolbarView),this.settings.appearance.color&&this.toolbar_view.updateColor(this.settings.appearance.color),nt.trigger("toolbar_initialized"),this.blur_overlay=this.body.addChild("blur_overlay",this.NodeView,{classlist:"blur-overlay"}),this.main_panel=this.body.addChild("main",this.NodeView,{classlist:"main-wrap"}),this.main_overlay_panel=this.body.addChild("main_overlay",this.NodeView,{classlist:"main-overlay-wrap hidden"}),this.body.updateBlur(this.settings.appearance.blur),this.left_panel=this.main_panel.addChild("left",this.NodeView,{classlist:"panel-wrap left-panel-wrap"}),this.right_panel=this.main_panel.addChild("right",this.NodeView,{classlist:"panel-wrap right-panel-wrap"}),this.right_contact_panel=this.main_panel.addChild("right_contact",this.NodeView,{classlist:"panel-wrap right-contact-panel-wrap"}),this.wide_panel=this.main_panel.addChild("wide",this.NodeView,{classlist:"panel-wrap wide-panel-wrap"}),this.placeholders_wrap=this.main_panel.addChild("placeholders",this.NodeView,{classlist:"wide-placeholders-wrap"}),this.settings_modal_view=this.main_overlay_panel.addChild("settings_modal",this.SettingsModalView,{model:this._settings})}),nt);const pt=nt;let mt=nt.env.utils;nt.AccountSettings=Backbone.Model.extend({idAttribute:"jid",defaults:{timestamp:0,to_sync:!1,synced:!1,deleted:!1},update_timestamp:function(){this.save("timestamp",mt.now())},update_settings:function(e){this.save(_.extend({timestamp:mt.now()},e))},request_data:function(){return{jid:this.get("jid"),timestamp:this.get("timestamp"),settings:_.omit(this.attributes,["jid","timestamp","order","to_sync","synced","deleted"])}}}),nt.AccountSettingsList=Backbone.CollectionWithStorage.extend({model:nt.AccountSettings}),nt.AccountsOrderTimestamp=Backbone.ModelWithStorage.extend({defaults:{timestamp:0}}),nt.once("start",(function(){this.account_settings_list=new this.AccountSettingsList(null,{storage_name:this.getStorageName()+"-account-settings"}),this.account_settings_list.fetch(),this.account_settings_list.order_timestamp=new this.AccountsOrderTimestamp({id:"accounts-order-timestamp"},{storage_name:this.getStorageName(),fetch:"after"})}),nt);const _t=nt;var vt=i(25108);let ft=nt.env,bt=ft._,At=ft.uuid,wt=ft.$iq,yt=ft.utils,xt=ft.Strophe,kt=ft.constants;xt.log=function(e,t){(kt.LOG_LEVEL===kt.LOG_LEVEL_DEBUG||kt.LOG_LEVEL>=kt.LOG_LEVEL_WARN&&e>=xt.LogLevel.WARN||kt.LOG_LEVEL>=kt.LOG_LEVEL_ERROR&&e>=xt.LogLevel.ERROR)&&(vt.info("Strophe log: "),vt.info(t))},xt.addConnectionPlugin("register",{_connection:null,init:function(e){this._connection=e;let t=0;Object.keys(xt.Status).forEach((function(e){t=Math.max(t,xt.Status[e])})),xt.addNamespace("REGISTER","jabber:iq:register"),xt.Status.REGIFAIL=t+1,xt.Status.REGISTER=t+2,xt.Status.REGISTERED=t+3,xt.Status.CONFLICT=t+4,xt.Status.NOTACCEPTABLE=t+5,e.disco&&(e.disco.addFeature&&e.disco.addFeature(xt.NS.REGISTER),e.disco.addNode&&e.disco.addNode(xt.NS.REGISTER,{items:[]}));var i=this,s=e.reset.bind(e);e.reset=function(){s(),i.instructions="",i.fields={},i.registered=!1};var n=e._connect_cb.bind(e);e._connect_cb=function(t,s,a){if(i._registering)i._check_user?i._register_cb_check_user(t,s,a)&&(i.processed_features=!0,delete i._registering):(i._connect_cb_data={req:t,raw:a},i._register_cb(t,s,a)&&(i.processed_features=!0,delete i._registering));else if(i.processed_features){var o=e.xmlInput;e.xmlInput=xt.Connection.prototype.xmlInput;var r=e.rawInput;e.rawInput=xt.Connection.prototype.rawInput,n(t,s,a),e.xmlInput=o,e.rawInput=r,delete i.processed_features}else n(t,s,a)};var a=e.authenticate.bind(e);e.authenticate=function(e){if(void 0===e){var t=this._connection;if(!this.fields.username||!this.domain||!this.fields.password)return void xt.info("Register a JID first!");var i=this.fields.username+"@"+this.domain;t.jid=i,t.authzid=xt.getBareJidFromJid(t.jid),t.authcid=xt.getNodeFromJid(t.jid),t.pass=this.fields.password;var s=this._connect_cb_data.req,n=t.connect_callback,o=this._connect_cb_data.raw;t._connect_cb(s,n,o)}else a(e)}.bind(this)},connect:function(e,t,i,s,n){var a=this._connection;this.domain=xt.getDomainFromJid(e),this.instructions="",this.fields={},this.registered=!1,this._registering=!0,a.connect(this.domain,"",t,i,s,n)},connect_check_user:function(e,t,i,s,n){var a=this._connection;this.domain=xt.getDomainFromJid(e),this.instructions="",this.fields={},this.registered=!1,this._registering=!0,this._check_user=!0,a.connect(this.domain,"",t,i,s,n)},connect_change_password:function(e,t,i,s,n,a){var o=this._connection;this.domain=xt.getDomainFromJid(e),this.instructions="",this.fields={},o.registerSASLMechanisms([xt.SASLAnonymous,xt.SASLExternal,xt.SASLMD5,xt.SASLPlain,xt.SASLSHA1]),o.connect(e,t,i,s,n,a)},_register_cb:function(e,t,i){var s=this._connection;xt.info("_register_cb was called"),s.connected=!0;var n=s._proto._reqToData(e);if(n){if(s.xmlInput!==xt.Connection.prototype.xmlInput&&(n.nodeName===s._proto.strip&&n.childNodes.length?s.xmlInput(n.childNodes[0]):s.xmlInput(n)),s.rawInput!==xt.Connection.prototype.rawInput&&(i?s.rawInput(i):s.rawInput(xt.serialize(n))),s._proto._connect_cb(n)===xt.Status.CONNFAIL)return!1;var a=n.getElementsByTagName("register"),o=n.getElementsByTagName("mechanism");return 0===a.length&&0===o.length?(s._proto._no_auth_received(t),!1):0===a.length?(s._changeConnectStatus(xt.Status.REGIFAIL,null),!0):(s._addSysHandler(this._get_register_cb.bind(this),null,"iq",null,null),s.send(wt({type:"get",id:At(),to:this.domain}).c("query",{xmlns:xt.NS.REGISTER}).tree()),!0)}},_register_cb_check_user:function(e,t,i){var s=this._connection;xt.info("_register_cb was called"),s.connected=!0;var n=s._proto._reqToData(e);if(n){if(s.xmlInput!==xt.Connection.prototype.xmlInput&&(n.nodeName===s._proto.strip&&n.childNodes.length?s.xmlInput(n.childNodes[0]):s.xmlInput(n)),s.rawInput!==xt.Connection.prototype.rawInput&&(i?s.rawInput(i):s.rawInput(xt.serialize(n))),s._proto._connect_cb(n)===xt.Status.CONNFAIL)return!1;var a=n.getElementsByTagName("register"),o=n.getElementsByTagName("mechanism");return 0===a.length&&0===o.length?(s._proto._no_auth_received(t),!1):0===a.length?(s._changeConnectStatus(xt.Status.REGIFAIL,null),!0):(s._changeConnectStatus(xt.Status.REGISTER,null),!0)}},_get_register_cb:function(e){var t,i,s,n=this._connection;if(1!==(i=e.getElementsByTagName("query")).length)return n._changeConnectStatus(xt.Status.REGIFAIL,"unknown"),!1;for(i=i[0],t=0;t<i.childNodes.length;t++)"instructions"!==(s=i.childNodes[t]).tagName.toLowerCase()?"x"!==s.tagName.toLowerCase()&&(n.register.fields[s.tagName.toLowerCase()]=xt.getText(s)):n.register.instructions=xt.getText(s);return n._changeConnectStatus(xt.Status.REGISTER,null),!1},submit:function(){var e=nt.settings.language;"default"===e&&(e=nt.get("default_language"));var t,i,s,n,a=this._connection;for(s=wt({type:"set","xml:lang":e,id:At()}).c("query",{xmlns:xt.NS.REGISTER}),n=Object.keys(this.fields),t=0;t<n.length;t++)i=n[t],s.c(i).t(this.fields[i]).up();a._addSysHandler(this._submit_cb.bind(this),null,"iq",null,null),a.send(s)},_submit_cb:function(e){var t,i,s,n=null,a=this._connection;if((i=e.getElementsByTagName("query")).length>0)for(i=i[0],t=0;t<i.childNodes.length;t++)"instructions"!==(s=i.childNodes[t]).tagName.toLowerCase()?this.fields[s.tagName.toLowerCase()]=xt.getText(s):this.instructions=xt.getText(s);if("error"===e.getAttribute("type")){n=e.getElementsByTagName("error");let t=e.getElementsByTagName("text");if(t.length>0&&(t=t[0].innerHTML),1!==n.length)return a._changeConnectStatus(xt.Status.REGIFAIL,"unknown"),!1;xt.info("Registration failed."),"conflict"===(n=n[0].firstChild.tagName.toLowerCase())?a._changeConnectStatus(xt.Status.CONFLICT,n,t):"not-acceptable"===n?a._changeConnectStatus(xt.Status.NOTACCEPTABLE,n,t):a._changeConnectStatus(xt.Status.REGIFAIL,n,t)}else xt.info("Registration successful."),a._changeConnectStatus(xt.Status.REGISTERED,null);return!1},submit_unregister:function(){var e=nt.settings.language;"default"===e&&(e=nt.get("default_language"));var t,i=this._connection;t=wt({type:"set","xml:lang":e,id:At()}).c("query",{xmlns:xt.NS.REGISTER}).c("remove"),i._addSysHandler(this._submit_unregister_cb.bind(this),null,"iq",null,null),i.send(t)},_submit_unregister_cb:function(e){var t=null,i=this._connection;if("error"===e.getAttribute("type")){t=e.getElementsByTagName("error");let s=e.getElementsByTagName("text");if(s.length>0&&(s=s[0].innerHTML),1!==t.length)return i._changeConnectStatus(xt.Status.REGIFAIL,"unknown"),!1;xt.info("Unregistration failed."),"conflict"===(t=t[0].firstChild.tagName.toLowerCase())?i._changeConnectStatus(xt.Status.CONFLICT,t,s):"not-acceptable"===t?i._changeConnectStatus(xt.Status.NOTACCEPTABLE,t,s):i._changeConnectStatus(xt.Status.REGIFAIL,t,s)}else xt.info("Unregistration successful."),i._changeConnectStatus(xt.Status.REGISTERED,null);return!1}});xt.SASLHOTP=function(){},xt.SASLHOTP.prototype=new xt.SASLMechanism("HOTP",!0,100),xt.SASLHOTP.prototype.test=function(e){return!0},xt.SASLHOTP.prototype.onChallenge=function(e){return function(e){let t,i,s="",n=e.length;for(t=0;t<n;t++)i=e.charCodeAt(t),i>=0&&i<=127?s+=e.charAt(t):i>2047?(s+=String.fromCharCode(224|i>>12&15),s+=String.fromCharCode(128|i>>6&63),s+=String.fromCharCode(128|i>>0&63)):(s+=String.fromCharCode(192|i>>6&31),s+=String.fromCharCode(128|i>>0&63));return s}(String.fromCharCode(0)+e.authcid+String.fromCharCode(0)+e.hotp_pass)},xt.ConnectionManager=function(e,t){t=t||{},this.connection=new xt.Connection(e,t)},xt.ConnectionManager.prototype={connect:function(e,t,i,s){if(this.connection.mechanisms={},this.auth_type=e||"password","password"===this.auth_type)this.connection.registerSASLMechanisms([xt.SASLAnonymous,xt.SASLExternal,xt.SASLMD5,xt.SASLPlain,xt.SASLSHA1]);else{if("x-token"===this.auth_type)return this.connection.registerSASLMechanism(xt.SASLHOTP),delete this.connection._sasl_data["server-signature"],void yt.generateHOTP(yt.fromBase64toArrayBuffer(i),this.connection.counter).then((e=>{this.connection.hotp_pass=e})).then((()=>{this.connection.connect(t,i,s)}));this.connection.registerSASLMechanisms([xt.SASLXOAuth2]),delete this.connection._sasl_data["server-signature"]}this.connection.connect(t,i,s)},reconnect:function(e){if("x-token"===this.auth_type)return this.connection.mechanisms.HOTP||(this.connection.registerSASLMechanism(xt.SASLHOTP),delete this.connection._sasl_data["server-signature"]),this.connection.account&&this.connection.account.get("hotp_counter")&&(this.connection.counter=this.connection.account.get("hotp_counter")),void yt.generateHOTP(yt.fromBase64toArrayBuffer(this.connection.pass),this.connection.counter).then((e=>{this.connection.hotp_pass=e})).then((()=>{this.connection.connect(this.connection.jid,this.connection.pass,e)}));this.connection.connect(this.connection.jid,this.connection.pass,e)}},bt.extend(xt.Connection.prototype,{_attemptSASLAuth:function(e){e=this.sortMechanismsByPriority(e||[]);var t=0,i=!1;for(t=0;t<e.length;++t)if(e[t].prototype.test(this)){this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge_cb.bind(this),null,"challenge",null,null),this._sasl_mechanism=new e[t],this._sasl_mechanism.onStart(this);var s=$build("auth",{xmlns:xt.NS.SASL,mechanism:this._sasl_mechanism.name});if(this._sasl_mechanism.isClientFirst){var n=this._sasl_mechanism.onChallenge(this,null);s.t(btoa(n))}this.send(s.tree()),i=!0,this.account&&this.counter&&this.account.get("x_token")&&"HOTP"===this._sasl_mechanism.name&&(this.counter++,this.account.save({hotp_counter:this.counter}));break}return i},_sasl_auth1_cb:function(e){let t,i;for(this.features=e,t=0;t<e.childNodes.length;t++)i=e.childNodes[t],"bind"===i.nodeName&&(this.do_bind=!0),"session"===i.nodeName&&(this.do_session=!0),"c"===i.nodeName&&i.namespaceURI===xt.NS.CAPS&&(this.caps_ver=i.getAttribute("ver")),"devices"===i.nodeName&&i.namespaceURI===xt.NS.AUTH_DEVICES&&this.options["x-token"]&&(this.x_token_auth=!0),"synchronization"===i.nodeName&&i.namespaceURI===xt.NS.SYNCHRONIZATION&&(this.account.server_features.create({var:i.namespaceURI,from:this.domain}),this.do_synchronization=!0),"sub"===i.nodeName&&i.namespaceURI===xt.NS.SUBSCRIPTION_PREAPPROVAL&&this.account.server_features.create({var:i.namespaceURI,from:this.domain});return this.do_bind?(this.x_token_auth&&(!this.x_token||1e3*parseInt(this.x_token.expire)<ft.moment.now())?this.getXToken((e=>{let t=$(e).find("secret").text(),i=$(e).find("expire").text(),s=$(e).find("device").attr("id");this.x_token={token:t,expire:i,token_uid:s},this.counter=1,this.pass=t,this._send_auth_bind(),this.account&&this.account.save({hotp_counter:this.counter,password:null})}),(()=>{this._send_auth_bind()})):this._send_auth_bind(),!1):(this._changeConnectStatus(xt.Status.AUTHFAIL,null),!1)},_send_auth_bind(){this._addSysHandler(this._sasl_bind_cb.bind(this),null,null,null,"_bind_auth_2");let e=xt.getResourceFromJid(this.jid);e?this.send(wt({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:xt.NS.BIND}).c("resource",{}).t(e).tree()):this.send(wt({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:xt.NS.BIND}).tree())},getXToken:function(e,t){let i,s=At(),n=wt({type:"set",to:this.domain,id:s}).c("register",{xmlns:xt.NS.AUTH_DEVICES});this.account&&(i=this.account.get("old_device_token"));let a=At();"contacts"===nt.settings.device_metadata&&(a=kt.CLIENT_NAME),i&&i.token&&i.token_uid?(n.c("device",{xmlns:xt.NS.AUTH_DEVICES,id:i.token_uid}).c("client").t(a).up().c("secret").t(i.token).up(),"contacts"===nt.settings.device_metadata&&n.c("info").t(`PC, ${yt.getOS()}, ${ft.utils.getBrowser()}`),this.account.save("old_device_token",null)):(n.c("device",{xmlns:xt.NS.AUTH_DEVICES}).c("client").t(a).up(),"contacts"===nt.settings.device_metadata&&n.c("info").t(`PC, ${yt.getOS()}, ${ft.utils.getBrowser()}`));this._addSysHandler(function(i){let s=i.getAttribute("type");if("result"==s)e&&e(i);else{if("error"!=s)throw{name:"StropheError",message:"Got bad IQ type of "+s};t&&t(i)}}.bind(this),xt.NS.AUTH_DEVICES,"iq","result",s),this.send(n.tree())}}),bt.extend(xt.Websocket.prototype,{_onIdle:function(){var e=this._conn._data;if(e.length>0&&!this._conn.paused){for(var t=0;t<e.length;t++)if(null!==e[t]){var i,s;if(i="restart"===e[t]?this._buildStream().tree():e[t],s=xt.serialize(i),this._conn.xmlOutput(i),this._conn.rawOutput(s),!this.socket||1!==this.socket.readyState)return vt.log("data went to pending"),vt.log(this._conn._data.slice(t)),this._conn.account._pending_stanzas.push(this._conn._data.slice(t)),void(this._conn._data=[]);this.socket.send(s)}this._conn._data=[]}},_onOpen:function(){xt.info("Websocket open");var e=this._buildStream();this._conn.xmlOutput(e.tree());var t=xt.serialize(e);this._conn.rawOutput(t),this.socket.send(t),this._conn.openCheckTimeout=setTimeout((()=>this._conn.open_received?void 0:(vt.log("disconnected on open not being received"),void this._conn.disconnect())),5e3)},_handleStreamStart:function(e){var t=!1,i=e.getAttribute("xmlns");"string"!=typeof i?t="Missing xmlns in <open />":i!==xt.NS.FRAMING&&(t="Wrong xmlns in <open />: "+i);var s=e.getAttribute("version");return"string"!=typeof s?t="Missing version in <open />":"1.0"!==s&&(t="Wrong version in <open />: "+s),t?(this._conn._changeConnectStatus(xt.Status.CONNFAIL,t),this._conn._doDisconnect(),!1):(clearTimeout(this._conn.openCheckTimeout),!0)}}),xt.xmlunescape=function(e){let t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'"},i="(?:"+bt.keys(t).join("|")+")",s=RegExp(i),n=RegExp(i,"g");return e=null==e?"":""+e,s.test(e)?e.replace(n,(function(e){return t[e]})):e},xt.addNamespace("ATTENTION","urn:xmpp:attention:0"),xt.addNamespace("CARBONS","urn:xmpp:carbons:2"),xt.addNamespace("FORWARD","urn:xmpp:forward:0"),xt.addNamespace("HASH","urn:xmpp:hashes:2"),xt.addNamespace("HINTS","urn:xmpp:hints"),xt.addNamespace("SCE","urn:xmpp:sce:1"),xt.addNamespace("RECEIPTS","urn:xmpp:receipts"),xt.addNamespace("JINGLE","urn:xmpp:jingle:1"),xt.addNamespace("JINGLE_SECURITY_STUB","urn:xmpp:jingle:security:stub:0"),xt.addNamespace("JINGLE_MSG","urn:xmpp:jingle-message:0"),xt.addNamespace("JINGLE_RTP","urn:xmpp:jingle:apps:rtp:1"),xt.addNamespace("JINGLE_TRANSPORTS_ICE","urn:xmpp:jingle:transports:ice-udp:1"),xt.addNamespace("ADDRESS","http://jabber.org/protocol/address"),xt.addNamespace("CHATSTATES","http://jabber.org/protocol/chatstates"),xt.addNamespace("EXTENDED_CHATSTATES","https://xabber.com/protocol/extended-chatstates"),xt.addNamespace("HTTP_AUTH","http://jabber.org/protocol/http-auth"),xt.addNamespace("AUTH_TOKENS","https://xabber.com/protocol/auth-tokens"),xt.addNamespace("AUTH_DEVICES","https://xabber.com/protocol/devices"),xt.addNamespace("SYNCHRONIZATION","https://xabber.com/protocol/synchronization"),xt.addNamespace("SYNCHRONIZATION_REGULAR_CHAT","urn:xabber:chat"),xt.addNamespace("SYNCHRONIZATION_CHANNEL","https://xabber.com/protocol/channels"),xt.addNamespace("SYNCHRONIZATION_OLD_OMEMO","urn:xmpp:omemo:1"),xt.addNamespace("SYNCHRONIZATION_OMEMO","urn:xmpp:omemo:2"),xt.addNamespace("XABBER_CHAT","urn:xabber:chat"),xt.addNamespace("EXPLICIT_MESSAGE_ENCRYPTION","urn:xmpp:eme:0"),xt.addNamespace("DELIVERY","https://xabber.com/protocol/delivery"),xt.addNamespace("ARCHIVE","https://xabber.com/protocol/archive"),xt.addNamespace("MAM","urn:xmpp:mam:2"),xt.addNamespace("RSM","http://jabber.org/protocol/rsm"),xt.addNamespace("DATAFORM","jabber:x:data"),xt.addNamespace("CHAT_MARKERS","urn:xmpp:chat-markers:0"),xt.addNamespace("VCARD_UPDATE","vcard-temp:x:update"),xt.addNamespace("HTTP_UPLOAD","urn:xmpp:http:upload"),xt.addNamespace("BLOCKING","urn:xmpp:blocking"),xt.addNamespace("SEARCH","jabber:iq:search"),xt.addNamespace("PRIVATE_STORAGE","jabber:iq:private"),xt.addNamespace("MEDIA","urn:xmpp:media-element"),xt.addNamespace("LAST","jabber:iq:last"),xt.addNamespace("GROUP_CHAT","https://xabber.com/protocol/groups"),xt.addNamespace("GROUP_CHAT_INVITE","https://xabber.com/protocol/groups#invite"),xt.addNamespace("GROUP_CHAT_INVITE_HTTP","http://xabber.com/protocol/groups#invite"),xt.addNamespace("WEBCHAT","https://xabber.com/protocol/webchat"),xt.addNamespace("INDEX","https://xabber.com/protocol/index"),xt.addNamespace("PUBSUB","http://jabber.org/protocol/pubsub"),xt.addNamespace("PUBSUB_AVATAR_DATA","urn:xmpp:avatar:data"),xt.addNamespace("PUBSUB_AVATAR_METADATA","urn:xmpp:avatar:metadata"),xt.addNamespace("PUBSUB_AVATAR_METADATA_THUMBNAIL","urn:xmpp:thumbs:1"),xt.addNamespace("REWRITE","https://xabber.com/protocol/rewrite"),xt.addNamespace("REFERENCE","https://xabber.com/protocol/references"),xt.addNamespace("GEOLOC","http://jabber.org/protocol/geoloc"),xt.addNamespace("MARKUP","https://xabber.com/protocol/markup"),xt.addNamespace("VOICE_MESSAGE","https://xabber.com/protocol/voice-messages"),xt.addNamespace("FILES","https://xabber.com/protocol/files"),xt.addNamespace("SUBSCRIPTION_PREAPPROVAL","urn:xmpp:features:pre-approval"),xt.addNamespace("OGP","https://xabber.com/protocol/ogp"),xt.addNamespace("URLDISCO","urn:xabber:http:url"),xt.addNamespace("MEDIAGALLERY","urn:xabber:http:url:mediagallery"),xt.addNamespace("EPHEMERAL","urn:xmpp:ephemeral:0"),xt.addNamespace("XABBER_FAVORITES","urn:xabber:favorites:0"),xt.addNamespace("XABBER_NOTIFY","urn:xabber:xen:0"),xt.addNamespace("XABBER_TRUST","urn:xabber:trust"),xt.addNamespace("DIGITAL_SIGNATURES","urn:xmpp:signed:0"),xt.addNamespace("TRUSTED_MESSAGES","urn:xmpp:tm:1"),xt.addNamespace("DIGITAL_SIGNATURES_ATM","urn:xmpp:atm:1"),xt.addNamespace("PUBSUB_TRUST_SHARING","urn:xmpp:trustsharing:0"),xt.addNamespace("PUBSUB_TRUST_SHARING_ITEMS","urn:xmpp:trustsharing:0:items"),xt.addNamespace("NICK","http://jabber.org/protocol/nick");const Ct=nt;let St=nt.env,$t=(St.constants,St.templates.vcard),It=St.$,Et=St._,Tt=St.moment,Mt=St.Strophe,Lt=St.$iq,Bt=St.$build,Nt=St.utils,jt=function(e){let t={nickname:e.find("NICKNAME").text().trim(),fullname:e.find("FN").text().trim(),first_name:e.find("N GIVEN").text().trim(),middle_name:e.find("N MIDDLE").text().trim(),last_name:e.find("N FAMILY").text().trim(),birthday:e.find("BDAY").text().trim(),job_title:e.find("TITLE").text().trim(),role:e.find("ROLE").text().trim(),url:e.find("URL").text().trim(),description:e.find("DESC").text().trim(),jabber_id:e.find("JABBERID").text().trim(),org:{},photo:{},phone:{},address:{},email:{}};(e.find("X-PRIVACY").length||e.find("X-MEMBERSHIP").length||e.find("X-INDEX").length)&&(t.group_info={jid:t.jabber_id,description:t.description,name:t.nickname,anonymous:e.find("X-PRIVACY").text().trim(),searchable:e.find("X-INDEX").text().trim(),model:e.find("X-MEMBERSHIP").text().trim(),status_msg:e.find("X-STATUS").text().trim(),members_num:e.find("X-MEMBERS").text().trim()});let i=e.find("ORG");i.length&&(t.org.name=i.find("ORGNAME").text().trim(),t.org.unit=i.find("ORGUNIT").text().trim());let s=e.find("PHOTO");return s.length&&(t.photo.image=s.find("BINVAL").text().trim(),t.photo.type=s.find("TYPE").text().trim()),e.find("TEL").each((function(){let e=It(this),i=e.find("NUMBER").text().trim();i&&(e.find("WORK").length?t.phone.work=i:e.find("HOME").length?t.phone.home=i:e.find("MOBILE").length?t.phone.mobile=i:t.phone.default=i)})),e.find("EMAIL").each((function(){let e=It(this),i=e.find("USERID").text().trim();i&&(e.find("WORK").length?t.email.work=i:e.find("HOME").length?t.email.home=i:t.email.default=i)})),e.find("ADR").each((function(){let e=It(this),i={pobox:e.find("POBOX").text().trim(),extadd:e.find("EXTADR").text().trim(),street:e.find("STREET").text().trim(),locality:e.find("LOCALITY").text().trim(),region:e.find("REGION").text().trim(),pcode:e.find("PCODE").text().trim(),country:e.find("CTRY").text().trim()};e.find("WORK").length?t.address.work=i:e.find("HOME").length?t.address.home=i:t.address.default=i})),t};Mt.addConnectionPlugin("vcard",{_connection:null,init:function(e){return this._connection=e,Mt.addNamespace("VCARD","vcard-temp")},get:function(e,t,i){let s=Lt({type:"get",to:e}).c("vCard",{xmlns:Mt.NS.VCARD});this._connection.sendIQ(s,(function(i){if(!t)return;let s=jt(It(i).find("vCard[xmlns="+Mt.NS.VCARD+"]"));return s.jabber_id||(s.jabber_id=e),t(s)}),i)},set:function(e,t,i,s){t.jabber_id||(t.jabber_id=e);let n=Lt({type:"set",to:e}).cnode(function(e){let t=Bt("vCard",{xmlns:Mt.NS.VCARD});return e.nickname&&t.c("NICKNAME").t(e.nickname).up(),e.fullname&&t.c("FN").t(e.fullname).up(),(e.first_name||e.last_name||e.middle_name)&&(t.c("N"),e.first_name&&t.c("GIVEN").t(e.first_name).up(),e.last_name&&t.c("FAMILY").t(e.last_name).up(),e.middle_name&&t.c("MIDDLE").t(e.middle_name).up(),t.up()),e.birthday&&t.c("BDAY").t(e.birthday).up(),e.job_title&&t.c("TITLE").t(e.job_title).up(),e.role&&t.c("ROLE").t(e.role).up(),(e.org.name||e.org.unit)&&(t.c("ORG"),e.org.name&&t.c("ORGNAME").t(e.org.name).up(),e.org.unit&&t.c("ORGUNIT").t(e.org.unit).up(),t.up()),e.url&&t.c("URL").t(e.url).up(),e.photo.image&&(t.c("PHOTO").c("BINVAL").t(e.photo.image).up(),t.c("TYPE").t(e.photo.type||"image/jpeg").up(),t.up()),e.description&&t.c("DESC").t(e.description).up(),e.jabber_id&&t.c("JABBERID").t(e.jabber_id).up(),Et.each(e.phone,(function(e,i){t.c("TEL").c("NUMBER").t(e).up(),"default"!==i&&t.c(i.toUpperCase()).up(),t.up()})),Et.each(e.email,(function(e,i){t.c("EMAIL").c("USERID").t(e).up(),"default"!==i&&t.c(i.toUpperCase()).up(),t.up()})),Et.each(e.address,(function(e,i){t.c("ADR"),"default"!==i&&t.c(i.toUpperCase()).up(),e.pobox&&t.c("POBOX").t(e.pobox).up(),e.extadd&&t.c("EXTADR").t(e.extadd).up(),e.street&&t.c("STREET").t(e.street).up(),e.locality&&t.c("LOCALITY").t(e.locality).up(),e.region&&t.c("REGION").t(e.region).up(),e.pcode&&t.c("PCODE").t(e.pcode).up(),e.country&&t.c("CTRY").t(e.country).up(),t.up()})),t.tree()}(t));this._connection.sendIQ(n,i,s)}}),Nt.vcard={getBlank:function(e){let t=jt(It("<div/>"));return t.jabber_id=e,t}},nt.VCardView=nt.BasicView.extend({template:$t.vcard,_initialize:function(){this.$el.html(this.template()),this.model.on("change:vcard_updated",this.update,this),this.data.on("change:refresh",this.updateRefreshButton,this)},render:function(){this.$(".block-header .block-name").text(this.model.get("group_chat")?"Group chat details":nt.getString("vcard_screen__header")),this.data.set("refresh",!1),this.model.getVCard((()=>{this.update()}))},update:function(){let e,t=this.model.get("vcard");e=this.$(".jid-info-wrap"),e.find(".jabber-id").showIf(t.jabber_id).find(".value").text(t.jabber_id),e.showIf(t.jabber_id),e=this.$(".personal-info-wrap"),e.find(".fullname").showIf(t.fullname).find(".value").text(t.fullname),e.find(".first-name").showIf(t.first_name).find(".value").text(t.first_name),e.find(".middle-name").showIf(t.middle_name).find(".value").text(t.middle_name),e.find(".last-name").showIf(t.last_name).find(".value").text(t.last_name),e.showIf(t.fullname||t.first_name||t.middle_name||t.last_name),e=this.$(".nickname-info-wrap"),e.find(".nickname").showIf(t.nickname).find(".value").text(t.nickname),e.showIf(t.nickname),e=this.$(".birthday-info-wrap"),e.find(".birthday").showIf(t.birthday).find(".value").text(t.birthday),e.showIf(t.birthday),e=this.$(".job-info-wrap"),e.find(".role").showIf(t.role).find(".value").text(t.role),e.find(".job-title").showIf(t.job_title).find(".value").text(t.job_title),e.find(".org-name").showIf(t.org.name).find(".value").text(t.org.name),e.find(".org-unit").showIf(t.org.unit).find(".value").text(t.org.unit),e.showIf(t.role||t.job_title||t.org.name||t.org.unit),e=this.$(".site-info-wrap"),e.find(".url").showIf(t.url).find(".value").text(t.url).hyperlinkify(),e.showIf(t.url),e=this.$(".description-info-wrap"),e.find(".description").showIf(t.description).find(".value").text(t.description),e.showIf(t.description);let i=this.$(".address-info-wrap"),s=Et.clone(t.address),n=!1;i.find(".info").addClass("hidden"),Et.each(s,(function(t,s){e=i.find(".address-"+s),e.find(".pobox").showIf(t.pobox).text(t.pobox),e.find(".extadd").showIf(t.extadd).text(t.extadd),e.find(".street").showIf(t.street).text(t.street),e.find(".locality").showIf(t.locality).text(t.locality),e.find(".region").showIf(t.region).text(t.region),e.find(".pcode").showIf(t.pcode).text(t.pcode),e.find(".country").showIf(t.country).text(t.country);let a=t.pobox||t.extadd||t.street||t.locality||t.region||t.pcode||t.country;a&&(n=!0),e.showIf(a)})),i.showIf(n),e=this.$(".phone-info-wrap");let a=t.phone;a&&(e.find(".phone-work").showIf(a.work).find(".value").text(a.work),e.find(".phone-home").showIf(a.home).find(".value").text(a.home),e.find(".phone-mobile").showIf(a.mobile).find(".value").text(a.mobile),e.find(".phone-default").showIf(a.default).find(".value").text(a.default)),e.showIf(a&&(a.work||a.home||a.mobile||a.default)),e=this.$(".email-info-wrap");let o=t.email;o&&(e.find(".email-work").showIf(o.work).find(".value").text(o.work),e.find(".email-home").showIf(o.home).find(".value").text(o.home),e.find(".email-default").showIf(o.default).find(".value").text(o.default)),e.showIf(o&&(o.work||o.home||o.default)),this.parent.updateScrollBar()},onClickIcon:function(e){let t=It(e.target).closest(".info-wrap").find(".value"),i="";t.each(((e,t)=>{let s=It(t).text();s&&""!=i&&(i+="\n"),s&&(i+=s),i&&Nt.copyTextToClipboard(i,nt.getString("toast__copied_in_clipboard"),nt.getString("toast__not_copied_in_clipboard"))}))},updateRefreshButton:function(){this.$(".btn-vcard-refresh .button").hideIf(this.data.get("refresh")),this.$(".btn-vcard-refresh .preloader-wrapper").showIf(this.data.get("refresh"))},refresh:function(){this.data.get("refresh")||(this.data.set("refresh",!0),this.model.getVCard((()=>{this.data.set("refresh",!1)})))}}),nt.VCardRightView=nt.VCardView.extend({template:$t.vcard_right,__initialize:function(e){this.ps_container=this.$(".full-vcard-content"),this.ps_container.length&&this.ps_container.perfectScrollbar(Et.extend(this.ps_settings||{},nt.ps_settings)),this.ps_container.on("ps-scroll-up ps-scroll-down",this.onScroll.bind(this)),this.model.set("vcard_hidden",!0)},render:function(){this.data.set("refresh",!1),this.update(),this.$(".full-vcard-wrap").hideIf(this.model.get("vcard_hidden")),this.parent.ps_container.length&&(this.model.get("vcard_hidden")?this.parent.ps_container.perfectScrollbar(Et.extend(this.parent.ps_settings||{},nt.ps_settings)):this.parent.ps_container.perfectScrollbar("destroy")),this.model.updateName(),this.model.getVCard((()=>{this.update()}))},update:function(){let e,t=this.model.get("vcard");e=this.$(".jid-info-wrap"),e.find(".jabber-id").showIf(t.jabber_id).find(".value").text(t.jabber_id),e.showIf(t.jabber_id),e=this.$(".vcard-wrap .personal-info-wrap"),e.find(".first-name").showIf(t.first_name).find(".value").text(t.first_name),e.find(".last-name").showIf(t.last_name).find(".value").text(t.last_name),e.showIf(t.first_name||t.last_name),e=this.$(".full-vcard-wrap .personal-info-wrap"),e.find(".fullname").showIf(t.fullname).find(".value").text(t.fullname),e.find(".first-name").showIf(t.first_name).find(".value").text(t.first_name),e.find(".middle-name").showIf(t.middle_name).find(".value").text(t.middle_name),e.find(".last-name").showIf(t.last_name).find(".value").text(t.last_name),e.showIf(t.fullname||t.first_name||t.middle_name||t.last_name),e=this.$(".nickname-info-wrap"),e.find(".nickname").showIf(t.nickname).find(".value").text(t.nickname),e.showIf(t.nickname),e=this.$(".birthday-info-wrap"),e.find(".birthday").showIf(t.birthday).find(".value").text(t.birthday),e.showIf(t.birthday),e=this.$(".job-info-wrap"),e.find(".role").showIf(t.role).find(".value").text(t.role),e.find(".job-title").showIf(t.job_title).find(".value").text(t.job_title),e.find(".org-name").showIf(t.org.name).find(".value").text(t.org.name),e.find(".org-unit").showIf(t.org.unit).find(".value").text(t.org.unit),e.showIf(t.role||t.job_title||t.org.name||t.org.unit),e=this.$(".site-info-wrap"),e.find(".url").showIf(t.url).find(".value").text(t.url).hyperlinkify(),e.showIf(t.url),e=this.$(".description-info-wrap"),e.find(".description").showIf(t.description).find(".value").text(t.description),e.showIf(t.description);let i=this.$(".address-info-wrap"),s=Et.clone(t.address),n=!1;i.find(".info").addClass("hidden"),Et.each(s,(function(t,s){e=i.find(".address-"+s),e.find(".pobox").showIf(t.pobox).text(t.pobox),e.find(".extadd").showIf(t.extadd).text(t.extadd),e.find(".street").showIf(t.street).text(t.street),e.find(".locality").showIf(t.locality).text(t.locality),e.find(".region").showIf(t.region).text(t.region),e.find(".pcode").showIf(t.pcode).text(t.pcode),e.find(".country").showIf(t.country).text(t.country);let a=t.pobox||t.extadd||t.street||t.locality||t.region||t.pcode||t.country;a&&(n=!0),e.showIf(a)})),i.showIf(n),e=this.$(".phone-info-wrap");let a=t.phone;a&&(e.find(".phone-work").showIf(a.work).find(".value").text(a.work),e.find(".phone-home").showIf(a.home).find(".value").text(a.home),e.find(".phone-mobile").showIf(a.mobile).find(".value").text(a.mobile),e.find(".phone-default").showIf(a.default).find(".value").text(a.default)),e.showIf(a&&(a.work||a.home||a.mobile||a.default)),e=this.$(".email-info-wrap");let o=t.email;o&&(e.find(".email-work").showIf(o.work).find(".value").text(o.work),e.find(".email-home").showIf(o.home).find(".value").text(o.home),e.find(".email-default").showIf(o.default).find(".value").text(o.default)),e.showIf(o&&(o.work||o.home||o.default)),this.parent.updateScrollBar()},onScroll:function(){this.ps_container[0].scrollTop>=170?(this.$(".vcard-header-title").addClass("fixed-scroll"),this.$(".vcard-header-title").attr("style","background-color: rgba(255,255,255,1) !important; -webkit-transition: none; -ms-transition: none;transition: none;")):this.ps_container[0].scrollTop>=40?(this.$(".vcard-header-title").removeClass("fixed-scroll"),this.$(".vcard-header-title").attr("style","background-color: rgba(255,255,255,0.5) !important;")):(this.$(".vcard-header-title").removeClass("fixed-scroll"),this.$(".vcard-header-title").attr("style","background-color: rgba(255,255,255,0) !important;"))},onClickIcon:function(e){let t=It(e.target).find(".value"),i="";t.each(((e,t)=>{let s=It(t).text();s&&""!=i&&(i+="\n"),s&&(i+=s),i&&Nt.copyTextToClipboard(i,nt.getString("toast__copied_in_clipboard"),nt.getString("toast__not_copied_in_clipboard"))}))}}),nt.VCardEditModalView=nt.BasicView.extend({className:"account-vcard-edit-modal-wrap account-vcard-edit-wrap",template:$t.vcard_edit_modal,ps_selector:".panel-content",events:{"keyup input":"keyUp","keyup textarea":"keyUp","input .first-name input":"changePlaceholder","input .middle-name input":"changePlaceholder","input .last-name input":"changePlaceholder","click .btn-vcard-save":"save"},_initialize:function(){let e=this;this.$(".datepicker").pickadate({selectMonths:!0,selectYears:100,autoOk:!1,min:new Date(Tt.now()-31536e8),max:new Date(Tt.now()-864e5),format:"dd.mm.yyyy",allowKeyboardControl:!1,today:"",onClose:function(){It(document.activeElement).blur(),e.$(".btn-vcard-back").removeClass("hidden"),e.$(".btn-vcard-save").removeClass("hidden")},klass:{weekday_display:"picker__weekday-display ground-color-700",date_display:"picker__date-display ground-color-500",navPrev:"picker__nav--prev hover-ground-color-100",navNext:"picker__nav--next hover-ground-color-100",selected:"picker__day--selected ground-color-500",now:"picker__day--today text-color-700",buttonClear:"btn-flat btn-main btn-dark",buttonClose:"btn-flat btn-main text-color-700"}}).on("mousedown",(function(e){e.preventDefault()})),this.data.on("change:saving",this.updateSaveButton,this)},render:function(e){e.$el.html(""),e.$el.append(this.$el),this.data.set("saving",!1),this.setData(),Materialize&&Materialize.updateTextFields&&Materialize.updateTextFields(),this.changePlaceholder(),this.updateScrollBar(),this.$(".btn-vcard-save").addClass("hidden")},onHide:function(){this.$el.detach()},close:function(){this.$el.closeModal({complete:this.hide.bind(this)})},changePlaceholder:function(){let e=((this.$(".first-name input").val()+" "+this.$(".middle-name input").val()).trim()+" "+this.$(".last-name input").val()).trim()||this.model.get("jid");this.$(".nickname input").attr("placeholder",e)},setData:function(){let e=this.model.get("vcard");this.$(".nickname input").val(e.nickname),this.$(".fullname input").val(e.fullname),this.$(".first-name input").val(e.first_name),this.$(".last-name input").val(e.last_name),this.$(".middle-name input").val(e.middle_name),this.$(".birthday input").val(e.birthday),this.$(".role input").val(e.role),this.$(".job-title input").val(e.job_title),this.$(".org-name input").val(e.org.name),this.$(".org-unit input").val(e.org.unit),this.$(".url input").val(e.url),this.$(".description textarea").val(e.description),this.$(".phone-work input").val(e.phone.work),this.$(".phone-home input").val(e.phone.home),this.$(".phone-mobile input").val(e.phone.mobile),this.$(".email-work input").val(e.email.work),this.$(".email-home input").val(e.email.home);let t=e.address.work||{},i=this.$(".address-work-wrap");i.find(".pobox input").val(t.pobox),i.find(".extadd input").val(t.extadd),i.find(".street input").val(t.street),i.find(".locality input").val(t.locality),i.find(".region input").val(t.region),i.find(".pcode input").val(t.pcode),i.find(".country input").val(t.country),t=e.address.home||{},i=this.$(".address-home-wrap"),i.find(".pobox input").val(t.pobox),i.find(".extadd input").val(t.extadd),i.find(".street input").val(t.street),i.find(".locality input").val(t.locality),i.find(".region input").val(t.region),i.find(".pcode input").val(t.pcode),i.find(".country input").val(t.country)},getData:function(){let e=Nt.vcard.getBlank(this.model.get("jid"));e.nickname=this.$(".nickname input").val(),e.fullname=this.$(".fullname input").val(),e.first_name=this.$(".first-name input").val(),e.last_name=this.$(".last-name input").val(),e.middle_name=this.$(".middle-name input").val(),e.birthday=this.$(".birthday input").val(),e.role=this.$(".role input").val(),e.job_title=this.$(".job-title input").val(),e.org.name=this.$(".org-name input").val(),e.org.unit=this.$(".org-unit input").val(),e.url=this.$(".url input").val(),e.description=this.$(".description textarea").val(),e.phone.work=this.$(".phone-work input").val(),e.phone.home=this.$(".phone-home input").val(),e.phone.mobile=this.$(".phone-mobile input").val(),e.email.work=this.$(".email-work input").val(),e.email.home=this.$(".email-home input").val(),e.address.work={};let t=e.address.work,i=this.$(".address-work-wrap");return t.pobox=i.find(".pobox input").val(),t.extadd=i.find(".extadd input").val(),t.street=i.find(".street input").val(),t.locality=i.find(".locality input").val(),t.region=i.find(".region input").val(),t.pcode=i.find(".pcode input").val(),t.country=i.find(".country input").val(),e.address.home={},t=e.address.home,i=this.$(".address-home-wrap"),t.pobox=i.find(".pobox input").val(),t.extadd=i.find(".extadd input").val(),t.street=i.find(".street input").val(),t.locality=i.find(".locality input").val(),t.region=i.find(".region input").val(),t.pcode=i.find(".pcode input").val(),t.country=i.find(".country input").val(),e},updateSaveButton:function(){this.$(".btn-vcard-save").text(this.data.get("saving")?nt.getString("saving"):nt.getString("vcard_edit__button_save"))},save:function(){this.data.get("saving")||(this.data.set("saving",!0),this.model.setVCard(this.getData(),(()=>{this.model.getVCard(),this.data.set("saving",!1),this.$(".btn-vcard-back").addClass("hidden"),this.$(".btn-vcard-save").addClass("hidden")}),(function(){Nt.dialogs.error(nt.getString("account_user_info_save_fail")),this.data.set("saving",!1)})))},keyUp:function(){this.$(".btn-vcard-back").removeClass("hidden"),this.$(".btn-vcard-save").removeClass("hidden")}});const Rt=nt;var Ot=i(25108);let Dt=nt.env,Ft=Dt.constants,Ut=Dt.templates.accounts,Pt=Dt.utils,Vt=Dt.$,Gt=Dt.$iq,zt=Dt.$pres,Ht=Dt.uuid,qt=Dt.Strophe,Yt=Dt._,Qt=Dt.moment,Zt=Pt.images,Jt=e=>Pt.pretty_datetime(e,("ru-RU"==nt.settings.language||"default"==nt.settings.language&&"ru-RU"==nt.get("default_language"))&&"D MMMM YYYY HH:mm:ss");nt.Account=Backbone.Model.extend({idAttribute:"jid",defaults:()=>({enabled:!0,auth_type:"password",status:"online",status_message:"",priority:67,auto_login_xa:!1,account_unique_id:Ht().substring(0,8),groupchat_servers_list:[]}),initialize:function(e,t){if(this.retraction_version=null,t||(t={}),e.is_new&&!t.auth_view)return this.is_invalid=!0,void this.on("destroy",this.onDestroy,this);this.last_msg_timestamp=0,this.settings=nt.account_settings_list.get(e.jid),this.settings||(this.settings=nt.account_settings_list.create({jid:e.jid,timestamp:Pt.now()}));let i=Yt.clone(this.settings.attributes);i.color||(i.color=this.collection.getDefaultColor()),i.order||(i.order=this.collection.getLastOrder()+1),this.settings.save(i),this.settings.on("delete_account",this.deleteAccount,this);let s=Yt.clone(e);s.name||(s.name=s.jid),s.image||(s.image=Zt.getDefaultAvatar(s.name)),this.cached_image=Zt.getCachedImage(s.image),s.vcard=Pt.vcard.getBlank(s.jid),s.photo_hash="",this.save(s),this.auth_view=t.auth_view||null,this.session=new Backbone.Model({connected:!1,reconnected:!1,ready_to_send:!1,conn_retries:0,conn_feedback:nt.getString("connection__error__text_disconnected")}),this._waiting_code=!1,this.code_requests=[],this.gallery_code_requests=[],this.xabber_auth={},this.session.on("change:connected",this.onChangedConnected,this),this.CONNECTION_URL=e.websocket_connection_url||Ft.CONNECTION_URL,this.conn_manager=new qt.ConnectionManager(this.CONNECTION_URL,{"x-token":!0}),this.connection=this.conn_manager.connection,this.get("x_token")&&(this.connection.x_token=this.get("x_token")),this.connection.x_token&&this.connection.x_token.counter&&!this.get("hotp_counter")&&this.save({hotp_counter:this.connection.x_token.counter}),this.get("hotp_counter")&&(this.connection.counter=this.get("hotp_counter")),this.on("destroy",this.onDestroy,this),this._added_pres_handlers=[],this._pending_stanzas=[],this._pending_messages=[],this.dfd_presence=new Vt.Deferred,this.resources=new nt.AccountResources(null,{account:this}),this.password_view=new nt.ChangePasswordView({model:this}),this.updateColorScheme(),this.settings.on("change:color",this.updateColorScheme,this),this.on("change:photo_hash",this.getVCard,this),Yt.each(this._init_plugins,(e=>{e.call(this)})),this.connection.xmlInput=function(e){nt.info("input main connection"),nt.info(e)},this.connection.xmlOutput=function(e){nt.info("output main connection"),nt.info(e)},this.once("start",this.start,this),nt.on("start_accounts",(()=>{this.trigger("start")}),this)},start:function(){this.get("enabled")&&this.isOnline()&&this.connect()},_init_plugins:[],getPassword:function(){try{return Pt.atou(this.get("password"))}catch(e){return""}},isConnected:function(){return this.session&&this.session.get("connected")},isReconnecting:function(){return this.session&&this.session.get("reconnecting")},isOnline:function(){return"offline"!==this.get("status")},sendMsg:function(e,t){let i=this.connection.authenticated&&!this.connection.disconnecting&&this.session.get("connected")&&this.session.get("ready_to_send")&&"offline"!==this.get("status");return i&&this.connection.send(e),t&&t(),i},sendMsgPending:function(e){let t=this.connection.authenticated&&!this.connection.disconnecting&&this.session.get("connected")&&"offline"!==this.get("status");return t&&this.connection.send(e),t},sendMsgFast:function(e,t){return this.sendMsg(e,t)},getConnectionForIQ:function(){return this.fast_connection&&!this.fast_connection.disconnecting&&this.fast_connection.authenticated&&this.fast_connection.connected&&"offline"!==this.get("status")?this.fast_connection:this.connection},sendIQFast:function(){let e=this.fast_connection&&!this.fast_connection.disconnecting&&this.fast_connection.authenticated&&this.fast_connection.connected&&"offline"!==this.get("status");return e?(this.fast_connection.sendIQ.apply(this.fast_connection,arguments),e):this.sendIQ.apply(this,arguments)},sendFast:function(e,t,i){Vt(e.nodeTree).first().is("message")?this.sendMsgFast(e,t):this.sendIQFast(e,t,i)},pubAvatar:function(e,t,i){if(!e)return void this.removeAvatar(t,i);let s=new Vt.Deferred;if(s.done(((s,n)=>{if(n){let n=s.hash||e.hash||sha1(e.base64),a=Gt({type:"set"}).c("pubsub",{xmlns:qt.NS.PUBSUB}).c("publish",{node:qt.NS.PUBSUB_AVATAR_METADATA}).c("item",{id:n}).c("metadata",{xmlns:qt.NS.PUBSUB_AVATAR_METADATA}).c("info",{bytes:s.size,id:n,type:s.type,url:s.file});s.thumbnails&&s.thumbnails.forEach((e=>{a.c("thumbnail",{xmlns:qt.NS.PUBSUB_AVATAR_METADATA_THUMBNAIL,url:e.url,width:e.width,height:e.height}).up()})),this.sendIQFast(a,(()=>{t&&t(n)}),(function(e){i&&i(e)}))}else{let n=e.hash||sha1(e.base64),a=Gt({type:"set"}).c("pubsub",{xmlns:qt.NS.PUBSUB}).c("publish",{node:qt.NS.PUBSUB_AVATAR_DATA}).c("item",{id:n}).c("data",{xmlns:qt.NS.PUBSUB_AVATAR_DATA}).t(s),o=Gt({type:"set"}).c("pubsub",{xmlns:qt.NS.PUBSUB}).c("publish",{node:qt.NS.PUBSUB_AVATAR_METADATA}).c("item",{id:n}).c("metadata",{xmlns:qt.NS.PUBSUB_AVATAR_METADATA}).c("info",{bytes:e.size,id:n,type:e.type});this.sendIQFast(a,(()=>{this.sendIQFast(o,(()=>{t&&t(n)}),(function(e){i&&i(e)}))}),(e=>{i&&i(e)}))}})),e.uploaded)s.resolve(e,!0);else if(this.get("gallery_token")&&this.get("gallery_url")&&!e.generated&&!e.uploaded){let t=e.name?e:e.file;this.uploadAvatar(t,(i=>{i.thumbnails&&i.thumbnails.length||i.file?(i.type=t.type,s.resolve(i,!0)):s.resolve(e.base64)}),(t=>{s.resolve(e.base64)}))}else s.resolve(e.base64)},removeAvatar:function(e,t){let i=Gt({type:"set"}).c("pubsub",{xmlns:qt.NS.PUBSUB}).c("publish",{node:qt.NS.PUBSUB_AVATAR_METADATA}).c("item").c("metadata",{xmlns:qt.NS.PUBSUB_AVATAR_METADATA});this.sendIQFast(i,(()=>{e&&e()}),(function(){t&&t()}))},getAvatar:function(e,t,i){let s=Gt({type:"get",to:this.get("jid")}).c("pubsub",{xmlns:qt.NS.PUBSUB}).c("items",{node:qt.NS.PUBSUB_AVATAR_DATA}).c("item",{id:e});this.sendIQFast(s,(e=>{let s=Vt(e).find("data").text();""==s?i&&i(nt.getString("pubsub__error__text_empty_node")):t&&t(s)}))},sendIQ:function(){let e=this.connection.authenticated&&!this.connection.disconnecting&&this.session.get("connected")&&"offline"!==this.get("status");if(e){let e=arguments[0];if("function"==typeof e.tree&&"get"==e.tree().getAttribute("type")){let t=nt.settings.language;"default"==t&&(t=nt.get("default_language")),e.tree().setAttribute("xml:lang",t)}this.connection.sendIQ.apply(this.connection,arguments)}else arguments[0]&&Vt(arguments[0].nodeTree).find('query[xmlns="'+qt.NS.MAM+'"]').length||this._pending_stanzas.push({stanza:arguments,is_iq:!0});return e},parseDataForm:function(e,t){t=t||{};let i=e.attr("type"),s=e.children("title").text(),n=e.children("instructions").text(),a=[],o={};return e.children("field").each(((e,t)=>{let i=Vt(t),s={},n=i.attr("var"),o=i.attr("type"),r=i.attr("label"),c=[],l=[];i.children("value").each(((e,t)=>{c.push(Vt(t).text())})),i.children("option").each(((e,t)=>{let i=Vt(t),s=i.children("value").text(),n=i.attr("label");l.push({value:s,label:n})})),n&&(s.var=n),o&&(s.type=o),r&&(s.label=r),c.length&&(s.values=c),l.length&&(s.options=l),a.push(s)})),i&&(o.type=i),s&&(o.title=s),n&&(o.instructions=n),a.length&&(o.fields=a),o},addDataFormToStanza:function(e,t){return e.c("x",{xmlns:qt.NS.DATAFORM,type:"submit"}),t.title&&e.c("title").t(t.title).up(),t.instructions&&e.c("instructions").t(t.instructions).up(),t.fields.forEach((t=>{let i=Yt.clone(t);delete i.values,delete i.options,e.c("field",i),t.values&&t.values.forEach((t=>{e.c("value").t(t).up()})),e.up()})),e},sendPres:function(e){return this.connection.authenticated&&this.session.get("connected")?this.connection.send(e):this._pending_stanzas.push({stanza:e}),this.connection.authenticated},getOwnNickname:function(){let e;return this.get("vcard")&&(this.get("vcard").nickname?e=this.get("vcard").nickname:this.get("vcard").first_name&&this.get("vcard").last_name?e=this.get("vcard").first_name+" "+this.get("vcard").last_name:this.get("vcard").fullname?e=this.get("vcard").fullname:(this.get("vcard").first_name||this.get("vcard").last_name)&&(e=this.get("vcard").first_name+" "+this.get("vcard").last_name)),e||this.get("jid")},retractMessageById:function(e,t,i,s){let n=Gt({type:"set",to:t}).c("retract-message",{id:e,xmlns:qt.NS.REWRITE,conversation:i,symmetric:!1,type:s,by:this.get("jid")});this.sendIQFast(n,(e=>{}),(e=>{}))},createFastConnection:function(){let e,t=this.get("jid"),i=this.conn_manager.auth_type;if(e="token"===i?this.settings.get("token"):"x-token"===i?this.get("x_token")&&(1e3*Number(this.get("x_token").expire)>Qt.now()||!this.get("x_token").expire)?this.get("x_token").token:void 0:this.getPassword(),!e){let e={login:!0};return options.token_invalidated&&(e.token_invalidated=!0),void this.password_view.show(e)}if(this.fast_conn_manager)return this.fast_connection.disconnect(),this.createFastConnection();this.fast_conn_manager=new qt.ConnectionManager(this.CONNECTION_URL),this.fast_connection=this.fast_conn_manager.connection,this.fast_connection.account=this,this.fast_connection.xmlInput=function(e){nt.info("input fast connection"),nt.info(e)},this.fast_connection.xmlOutput=function(e){nt.info("output fast connection"),nt.info(e)},"x-token"===i&&this.fast_connection&&(this.fast_connection.x_token=this.get("x_token"),this.fast_connection.counter=this.get("hotp_counter"),this.fast_connection.x_token_auth=!0),this.fast_conn_manager.connect(i,t,e,this.onFastConnected.bind(this))},connect:function(e){e=e||{};let t,i=this.get("jid"),s=this.get("auth_type");if("contacts"===nt.settings.device_metadata&&(i+="/"+Ft.CLIENT_RESOURCE+"-"+nt.get("client_id")),this.connection.x_token=this.get("x_token"),this.connection.counter=this.get("hotp_counter"),this.connection.account=this,this.connection.x_token&&!this.connection.counter&&(this.connection.counter=0),t="token"===s?this.settings.get("token"):"x-token"===s?this.get("x_token")&&(1e3*Number(this.get("x_token").expire)>Qt.now()||!this.get("x_token").expire)?this.get("x_token").token:void 0:this.getPassword(),!t){let t={login:!0};return e.token_invalidated&&(t.token_invalidated=!0),void this.password_view.show(t)}this.session.set({connected:!1,reconnected:!1,reconnecting:!1,ready_to_send:!1,conn_retries:0,conn_feedback:nt.getString("application_state_connecting"),auth_failed:!1}),this.restoreStatus(),this.conn_manager.connect(s,i,t,this.connectionCallback.bind(this))},reconnect:function(e){let t=this.session.get("conn_retries"),i=t<3?Ft.RECONNECTION_TIMEOUTS[t]:2e4;e&&(i=1500),this.session.set({connected:!1,reconnected:!1,ready_to_send:!1,reconnecting:!0,conn_retries:++t,conn_feedback:nt.getString("application_state_reconnect_after_some_seconds",[i/1e3]),auth_failed:!1}),this.get("x_token")&&(this.connection.x_token=this.get("x_token")),this.connection.account=this,setTimeout((()=>{this.connFeedback(nt.getString("application_state_connecting")),this.restoreStatus(),this.connection.reset(),Ot.log("started reconnecting"),nt._settings.get("reconnection_logs")&&Pt.callback_popup_message("started reconnecting",3e3),this.conn_manager.reconnect(this.reconnectionCallback.bind(this))}),i)},connectionCallback:function(e,t,i){if(this.session.get("reconnecting"))nt.info("ignore connection callback for status: "+Ft.CONN_STATUSES[e]);else if(this.auth_view&&this.loginCallback(e,t),this.session.set({conn_status:e,conn_condition:t}),e!==qt.Status.ERROR||"conflict"!==t||this.session.get("delete")){if(e===qt.Status.ERROR&&"policy-violation"===t)this.onAuthFailed(t);else if(e===qt.Status.CONNECTED){if(this.session.set("on_token_revoked",!1),this._revoke_on_connect)return this.session.set({connected:!0,reconnected:!1}),void this._revoke_on_connect.resolve();if(this.connection.x_token&&(this.save({auth_type:"x-token",x_token:this.connection.x_token,hotp_counter:this.connection.counter}),this.conn_manager.auth_type="x-token"),this.get("registration_nickname")){let e=Pt.vcard.getBlank(this.get("jid"));e.nickname=this.get("registration_nickname"),this.setVCard(e,(()=>{this.getVCard(),this.set("registration_nickname",null)}),(function(){Pt.dialogs.error(nt.getString("account_user_info_save_fail")),this.set("registration_nickname",null)}))}this.createFastConnection(),this.session.set({connected:!0,reconnected:!1})}else if(e===qt.Status.AUTHFAIL||e===qt.Status.ERROR&&"not-authorized"===t)"x-token"===this.get("auth_type")||this.connection.x_token?this.session.get("conn_retries")<=3&&0===Vt(i).find("credentials-expired").length?this.reconnect(!0):this.onTokenRevoked():this.onAuthFailed();else if(e===qt.Status.DISCONNECTED){if(this.connection&&clearTimeout(this.connection.openCheckTimeout),this.session.get("on_token_revoked"))return;this.connection.flush(),this._main_interval_worker&&this._main_interval_worker.terminate(),this.session.set({connected:!1,ready_to_send:!1})}}else this.onConnectionConflict()},reconnectionCallback:function(e,t,i){if(this.session.get("reconnecting")){if(this.session.set({conn_status:e,conn_condition:t}),e===qt.Status.CONNECTED)Ot.log("reconnected main connection"),nt._settings.get("reconnection_logs")&&Pt.callback_popup_message(`reconnected main connection , conn_retries: ${this.session.get("conn_retries")}`,5e3),this.session.set("on_token_revoked",!1),this.connection.x_token&&this.save({auth_type:"x-token",x_token:this.connection.x_token,hotp_counter:this.connection.counter}),this.createFastConnection(),this.connection.connect_callback=this.connectionCallback.bind(this),this.session.set({connected:!0,reconnected:!0,reconnecting:!1,conn_retries:0});else if(e===qt.Status.ERROR&&"policy-violation"===t)this.onAuthFailed(t);else if(e===qt.Status.AUTHFAIL||e===qt.Status.ERROR&&"not-authorized"===t)"x-token"===this.get("auth_type")||this.connection.x_token?Vt(i).find("credentials-expired").length>0?this.onTokenRevoked():this.session.get("conn_retries")>2?this.onAuthFailed():this.reconnect(!0):this.onAuthFailed();else if(e===qt.Status.DISCONNECTED){if(this.connection&&clearTimeout(this.connection.openCheckTimeout),this.session.get("on_token_revoked"))return;this.connection.flush(),this._main_interval_worker&&this._main_interval_worker.terminate();let i=nt.settings.max_connection_retries;-1===i||this.session.get("conn_retries")<i?(Ot.log(`started another reconnecting, conn_retries: ${this.session.get("conn_retries")},status: ${e} ,condition: ${t} `),nt._settings.get("reconnection_logs")&&Pt.callback_popup_message(`started another reconnecting, conn_retries: ${this.session.get("conn_retries")},status: ${e} ,condition: ${t} `,3e3),this.reconnect()):this.connFeedback(nt.getString("connection__error__connection_lost"))}}else nt.info("ignore reconnection callback for status: "+Ft.CONN_STATUSES[e])},registerCallback:function(e,t,i){if(e===qt.Status.REGISTER)this.connection.register.fields.username=qt.getNodeFromJid(this.get("jid")),this.connection.register.fields.password=this.getPassword(),nt.url_params&&nt.url_params.rkey&&(this.connection.register.fields.key=nt.url_params.rkey),this.connection.register.submit();else if(e===qt.Status.REGISTERED){let e=this.auth_view.$nickname_input.val();this.auth_view.data.set("step",6),e&&this.set("registration_nickname",e)}else e===qt.Status.CONFLICT?(this.auth_view.errorRegistrationFeedback({jid:nt.getString("label_xmpp_id")}),this.auth_view.data.set("step",3)):e===qt.Status.NOTACCEPTABLE?(i?this.auth_view.errorRegistrationFeedback({password:i}):(t=t?": "+t:"",this.auth_view.errorRegistrationFeedback({password:nt.getString("xmpp_login__registration_not_filled")+t})),this.auth_view.data.set("step",4)):e===qt.Status.REGIFAIL&&(i?this.auth_view.errorRegistrationFeedback({password:i}):(t=t?": "+t:"",this.auth_view.errorRegistrationFeedback({password:nt.getString("xmpp_login__registration_failed")+t})),this.auth_view.data.set("step",4))},changePasswordCallback:function(e,t){this.change_password_view&&(e===qt.Status.REGISTERED?this.change_password_view.successFeedback():e===qt.Status.CONFLICT||e===qt.Status.NOTACCEPTABLE||e===qt.Status.REGIFAIL?(t=t?": "+t:"",this.change_password_view.errorFeedback({password:nt.getString("password_changed_fail")+t})):e===qt.Status.AUTHFAIL?this.change_password_view.errorFeedback({old_password:nt.getString("AUTHENTICATION_FAILED")}):e===qt.Status.CONNECTED?(this.change_password_connection.register.fields.username=qt.getNodeFromJid(this.get("jid")),this.change_password_connection.register.fields.password=this.change_password_view.$password_input.val().trim(),this.change_password_connection.register.submit()):e===qt.Status.DISCONNECTED&&(this.change_password_connection&&clearTimeout(this.change_password_connection.openCheckTimeout),this.change_password_connection_manager=void 0,this.change_password_connection=void 0))},unregisterAccountCallback:function(e,t){this.unregister_account_view&&(e===qt.Status.REGISTERED?(this.unregister_account_view.close(),this.trigger("deactivate",this),this.deleteAccount(),nt.settings_modal_view.closeSettings()):e===qt.Status.CONFLICT||e===qt.Status.NOTACCEPTABLE||e===qt.Status.REGIFAIL?(t=t?": "+t:"",this.unregister_account_view.errorFeedback({password:nt.getString("account_unregister_failed")+t}),this.unregister_account_view.data.set("step",0),this.unregister_account_connection&&this.unregister_account_connection.disconnect()):e===qt.Status.AUTHFAIL?(this.unregister_account_view.errorFeedback({password:nt.getString("wrong_password")}),this.unregister_account_view.data.set("step",0),this.unregister_account_connection&&this.unregister_account_connection.disconnect()):e===qt.Status.CONNECTED?this.unregister_account_view.data.set("step",1):e===qt.Status.DISCONNECTED&&(this.unregister_account_connection&&clearTimeout(this.unregister_account_connection.openCheckTimeout),this.unregister_account_connection_manager=void 0,this.unregister_account_connection=void 0))},loginCallback:function(e,t){if(e===qt.Status.CONNECTING)this.auth_view.stepped_auth&&this.auth_view.resetAuthStepper();else if(e===qt.Status.CONNECTED)this.save("is_new",void 0),this.auth_view.stepped_auth&&!this.auth_view.data.get("registration")?this.auth_view.authStepperStart():this.auth_view.endAuth();else if(Yt.contains(Ft.BAD_CONN_STATUSES,e)){let i=!1;e===qt.Status.ERROR||e===qt.Status.CONNFAIL?e=nt.getString("CONNECTION_FAILED"):e===qt.Status.AUTHFAIL?(e=nt.getString("AUTHENTICATION_FAILED"),i=!0):e===qt.Status.DISCONNECTED?e=nt.getString("connection__error__text_disconnected"):e===qt.Status.CONNTIMEOUT&&(e=nt.getString("connection__error__text_timeout_expired")),t=t?": "+t:"",this.auth_view.stepped_auth?this.auth_view.authStepperError(i,{password:e+t}):this.auth_view.errorFeedback({password:e+t}),this.get("is_new")&&this.destroy()}},onAuthFailed:function(e){if(this.auth_view||e){if(e){if(this.auth_view)return;this.session.set({connected:!1,ready_to_send:!1,no_reconnect:!0});nt.getString("XMPP_EXCEPTION");return void Pt.dialogs.ask_extended(nt.getString("error"),nt.getString("modal_policy_violation_text"),{modal_class:"modal-policy-violation",no_dialog_options:!0,quoted_text:e,cancel_button_main:!0},{ok_button_text:nt.getString("disable_account"),cancel_button_text:nt.getString("account_settings"),optional_button:"account-reconnect",optional_button_text:nt.getString("account_reconnect")}).done((e=>{e?"account-reconnect"===e?this.reconnect():(this.save("enabled",!1),this.deactivate()):this.showSettingsModal()}))}}else Pt.dialogs.error(nt.getString("connection__error__text_authentication_failed",[this.get("jid")])),this.password_view.show();this.session.set({auth_failed:!0,connected:!1,ready_to_send:!1,no_reconnect:!0}),this.save({old_device_token:this.get("x_token"),auth_type:"password",password:null,x_token:null}),this.connection.pass="",this.trigger("deactivate",this),this.connFeedback(nt.getString("connection__error__text_authentication_failed_short"))},onConnectionConflict:function(){Pt.dialogs.error(nt.getString("connection__error__text_connection_conflict",[this.get("jid")])),this.session.set({auth_failed:!0,no_reconnect:!0}),this.trigger("deactivate",this),this.connFeedback(nt.getString("connection__error__text_connection_conflict_short"))},getAllXTokens:function(e){let t=[],i=Gt({type:"get",to:this.connection.domain}).c("query",{xmlns:`${qt.NS.AUTH_DEVICES}#items`});this.sendIQFast(i,(i=>{Vt(i).find("device").each(((e,i)=>{let s=Vt(i),n=s.find("client").text(),a=s.find("info").text(),o=s.find("public-label").text(),r=s.find("omemo-id").text(),c=s.attr("id"),l=1e3*Number(s.find("expire").text()),d=1e3*Number(s.find("last-auth").text()),h=s.find("ip").text();t.push({client:n,device:a,description:o,token_uid:c,last_auth:d,expire:l,ip:h,omemo_id:r})})),this.x_tokens_list=t,e&&e()}))},onTokenRevoked:function(){this.auth_view||Pt.dialogs.error(nt.getString("connection__error__text_token_invalidated",[this.get("jid")])),this.session.set({on_token_revoked:!0,auth_failed:!0,connected:!1,no_reconnect:!0}),this.save({auth_type:"password",password:null,x_token:null}),this.connection.pass="",this.trigger("deactivate",this),this.connFeedback(nt.getString("connection__error__text_token_invalidated_short")),this.deleteAccount()},onChangedConnected:function(){this.isConnected()?this.session.get("reconnected")?this.onReconnected():this.onConnected():this.onDisconnected()},onConnected:function(){this.connFeedback(nt.getString("account_state_connected")),this.jid=this.connection.jid,this.resource=qt.getResourceFromJid(this.jid),this.domain=qt.getDomainFromJid(this.jid),this.trigger("activate",this),this.session.get("no_reconnect")&&this.session.set("no_reconnect",!1),this.dfd_presence=new Vt.Deferred,this.afterConnected(),Yt.each(this._after_connected_plugins,(e=>{e.call(this)}))},onFastConnected:function(e){e===qt.Status.CONNECTED?(this.fast_connection.x_token&&(this.save({x_token:this.fast_connection.x_token,hotp_counter:this.fast_connection.counter}),this.fast_conn_manager.auth_type="x-token",this.fast_connection.x_token_auth=!0,this.connection&&this.connection.pass&&(this.fast_connection.pass=this.connection.pass)),Yt.each(this._after_fast_connected_plugins,(e=>{e.call(this)}))):e!==qt.Status.AUTHFAIL&&e!==qt.Status.DISCONNECTED||(this.fast_connection&&clearTimeout(this.fast_connection.openCheckTimeout),this._fast_interval_worker&&this._fast_interval_worker.terminate(),this.fast_conn_manager=void 0,this.fast_connection=void 0,this.connection&&!this.connection.disconnecting&&this.connection.authenticated&&this.connection.connected&&(this.getVCard(),this.auth_view&&this.auth_view.data.get("authentication")||this.trigger("ready_to_get_roster")))},onReconnected:function(){this.connFeedback(nt.getString("account_state_connected")),this.dfd_presence=new Vt.Deferred,this.afterConnected(),Yt.each(this._after_reconnected_plugins,(e=>{e.call(this)}))},afterConnected:function(){this.dfd_presence.done((()=>{this.sendPendingStanzas(),this.sendPendingMessages(),this.session.set({ready_to_send:!0})})),this.registerPresenceHandler(),this.enableCarbons()},getAllMessageRetractions:function(e){let t={xmlns:qt.NS.REWRITE,version:this.retraction_version},i=Gt({type:"get"}).c("query",t);this.sendIQ(i,e)},sendPendingStanzas:function(){Ot.log("pending stanzas"),Ot.log(this._pending_stanzas),Yt.each(this._pending_stanzas,(e=>{Ot.log(e),e.stanza instanceof qt.Builder||e.is_msg?(this.connection.send(e.stanza),e.callback&&e.callback()):e&&e.stanza&&e.is_iq&&this.connection.sendIQ.apply(this.connection,e.stanza)})),this._pending_stanzas=[]},sendPendingMessages:function(){Ot.log("pending messages"),Ot.log(this._pending_messages),this._pending_messages.sort(((e,t)=>e.timestamp>t.timestamp?1:t.timestamp>e.timestamp?-1:0)),Yt.each(this._pending_messages,(e=>{Ot.log(e);let t,i=this.messages.get(e.unique_id);i&&(t=i.get("xml")),i&&i.collection&&i.collection.chat&&i.collection.chat.get("group_chat")?Vt(t).append("<retry to='"+i.collection.chat.get("jid")+"' xmlns='"+qt.NS.DELIVERY+"'/>"):Vt(t).append("<retry xmlns='"+qt.NS.DELIVERY+"'/>"),t&&this.sendMsgPending(t)})),this.trigger("send_pending_messages")},_after_connected_plugins:[],_after_reconnected_plugins:[],_after_fast_connected_plugins:[],onDisconnected:function(){if(this.disconnected_timestamp=this.last_stanza_timestamp,this.session.get("delete"))return void this.destroy();let e=this.session.get("deactivate");e?(this.connFeedback(nt.getString("settings_account__label_state_disconnected")),this.session.set("deactivate",null),"set_off"===e&&this.trigger("deactivate",this)):this.session.get("no_reconnect")?this.session.set("no_reconnect",!1):(this.fast_connection&&this.fast_connection.connected&&this.fast_connection.disconnect(),this.reconnect())},connFeedback:function(e){this.session.set("conn_feedback",e)},enableCarbons:function(){let e=Gt({type:"set"}).c("enable",{xmlns:qt.NS.CARBONS});this.sendIQFast(e)},getVCard:function(e){let t=this.get("jid"),i=Yt.isFunction(e);this.connection&&this.connection.connected&&this.getConnectionForIQ().vcard.get(t,(s=>{let n={vcard:s,vcard_updated:Qt.now()};n.name=s.nickname||(s.first_name+" "+s.last_name).trim()||s.fullname||t,(!this.get("avatar_priority")||this.get("avatar_priority")<=Ft.AVATAR_PRIORITIES.VCARD_AVATAR)&&(s.photo.image?(n.avatar_priority=Ft.AVATAR_PRIORITIES.VCARD_AVATAR,n.image=s.photo.image):n.image=Zt.getDefaultAvatar(n.name),this.cached_image=Zt.getCachedImage(n.image)),this.save(n),i&&e(s)}),(function(){i&&e(null)}))},setVCard:function(e,t,i){let s=Yt.extend(Yt.clone(this.get("vcard")),e);this.connection.vcard.set(this.get("jid"),s,(()=>{this.vcardPhotoUpdated(s.photo.image),t&&t()}),i)},getStatusMessage:function(){return this.get("status_message")||nt.getString([this.get("status")])},setStatus:function(e,t){let i={status_updated:Qt.now()};null!==e&&(i.status=e),null!==t&&(i.status_message=t||""),"offline"===e&&"offline"!==this.get("status")&&(i.status_prev=this.get("status")),this.save(i),this.get("enabled")&&("offline"===e?this.deactivate("set_offline"):this.isConnected()?this.sendPresence():this.activate())},restoreStatus:function(){"offline"===this.get("status")&&this.save({status_updated:Qt.now(),status:this.get("status_prev")||"online",status_prev:void 0})},getAvatarHash:function(e){let t=e||this.get("vcard").photo.image;if(t){let e=atob(t),i=Uint8Array.from(Array.prototype.map.call(e,(function(e){return e.charCodeAt(0)})));return sha1(i)}return""},vcardPhotoUpdated:function(e){let t=zt().c("x",{xmlns:qt.NS.VCARD_UPDATE}).c("photo").t(this.getAvatarHash(e)).up().up();return this.sendPres(t)},sendPresence:function(e,t){e=e||this.get("status");let i=t||this.get("status_message"),s=zt();return"offline"===e?s.attrs({type:"unavailable"}):("online"!==e&&s.c("show").t(e).up(),s.c("status").t(i).up(),s.c("priority").t(this.get("priority")).up(),this.get("x_token")&&s.c("device",{xmlns:qt.NS.AUTH_DEVICES,id:this.get("x_token").token_uid}).up()),s.cnode(this.connection.caps.createCapsNode({node:"https://www.xabber.com/clients/xabber/web"}).tree()),this.sendPres(s)},showSettings:function(e,t){this.showSettingsModal(t)},showSettingsModal:function(e){if(1===nt.accounts.length)return nt.body.setScreen("settings-modal",{account_block_name:e}),void nt.trigger("update_placeholder");let t=!Yt.isUndefined(this.settings_account_modal);t||(this.settings_account_modal=new nt.AccountSettingsModalView({model:this})),this.updateColorScheme(),nt.body.setScreen("account_settings_modal",{account:this,block_name:e}),this.trigger("open_settings"),t||(this.trigger("render_settings"),this.settings_account_modal.addChild("blocklist",nt.BlockListView,{account:this,el:this.settings_account_modal.$(".block-list-view-wrap")[0]})),this.settings_account_modal.updateHeight()},updateColorScheme:function(){let e=this.settings.get("color");this.settings_account_modal&&this.settings_account_modal.$el.attr("data-color",e)},revokeXToken:function(e,t){let i=Gt({type:"set",to:this.connection.domain}).c("revoke",{xmlns:qt.NS.AUTH_DEVICES});for(let t=0;t<e.length;t++)i.c("device",{id:e[t]}).up();this.sendIQFast(i,(()=>{t&&t()}))},revokeAllXTokens:function(e,t){let i=Gt({type:"set",to:this.connection.domain}).c("revoke-all",{xmlns:qt.NS.AUTH_DEVICES});this.sendIQFast(i,(t=>{e(t)}),(function(e){t&&t(e)}))},deleteAccount:function(e,t){this.show_settings_after_delete=e,this.dont_change_screen_after_delete=t;let i=nt.body.screen;i.get("account")&&i.get("account")===this&&"account_settings_modal"===i.get("name")&&(this.show_settings_after_delete=!0),this.get("x_token")&&this.revokeXToken([this.get("x_token").token_uid]),this.session.set("delete",!0),this.deactivate()},activate:function(){this.isConnected()||this.connect()},deactivate:function(e){e||(e="set_off"),this.session.set("deactivate",e),this.isConnected()?(this.connFeedback(nt.getString("settings_account__label_state_disconnecting")),this.sendPresence("offline"),this.connection.disconnect(),this.fast_conn_manager&&this.fast_connection.disconnect()):this.onDisconnected()},onDestroy:function(){this.connection&&!this.connection.register._registering&&(this.connection.connect_callback=null),this.omemo&&(this.omemo.destroy(),this.omemo=void 0),this.groups_settings,this.groups_settings&&this.groups_settings.clearStorage(),this.groupchat_settings&&(this.groupchat_settings.destroy(),this.groupchat_settings=void 0),this.chat_settings&&(this.chat_settings.destroy(),this.chat_settings=void 0),this.settings&&this.settings.destroy(),this.isConnected()&&(this.connection.disconnect(),this.fast_conn_manager&&this.fast_connection.disconnect()),this.cached_sync_conversations&&this.cached_sync_conversations.deleteDataBase(),this.cached_roster&&this.cached_roster.deleteDataBase(),this.cached_server_features&&this.cached_server_features.deleteDataBase(),nt.notifications_view.notifications_chats=nt.notifications_view.notifications_chats.filter((e=>e.account.get("jid")!==this.get("jid"))),nt.notifications_view&&nt.notifications_view.current_content&&nt.notifications_view.current_content.account.get("jid")===this.get("jid")&&(nt.notifications_view.current_content.destroyView(),nt.notifications_view.current_content=null),this.trigger("remove_saved_chat")},registerIQHandler:function(){this.connection.deleteHandler(this._stanza_handler),this._stanza_handler=this.connection.addHandler((e=>(this.onGetIQ(e),!0)),null,"iq","get")},registerSyncedIQHandler:function(){this.connection.deleteHandler(this._synced_stanza_handler),this._synced_stanza_handler=this.connection.addHandler(this.onSyncedIQ.bind(this),qt.NS.SYNCHRONIZATION,"iq","set")},registerPresenceHandler:function(){this.connection.deleteHandler(this._pres_handler),this._pres_handler=this.connection.addHandler((e=>(this.onPresence(e),!0)),null,"presence",null)},onSetIQResult:function(e){let t=Vt(e).attr("to");this.fast_connection&&this.fast_connection.jid===t&&!this.fast_connection.disconnecting&&this.fast_connection.authenticated&&this.fast_connection.connected&&"offline"!==this.get("status")?this.sendIQFast(Gt({type:"result",id:e.getAttribute("id")})):this.connection&&this.connection.jid===t&&this.connection.authenticated&&!this.connection.disconnecting&&this.session.get("connected")&&"offline"!==this.get("status")&&this.sendIQ(Gt({type:"result",id:e.getAttribute("id")}))},onSyncedIQ:function(e){return this.onSetIQResult(e),this.roster.syncConversations(e),!0},onGetIQ:function(e){let t,i=Vt(e),s=i.find(`confirm[xmlns="${qt.NS.HTTP_AUTH}"]`),n=i.find(`query[xmlns="${qt.NS.JINGLE_MSG}"]`),a=i.attr("from");if(s.length&&(t=s.attr("id"),this.get("gallery_auth_request_code")?this.onAuthCode(t):this.gallery_code_requests.push({id:i.attr("id"),code:t})),n.length){let e,t=n.children("session").attr("id");t&&nt.current_voip_call&&t===nt.current_voip_call.get("session_id")&&!nt.current_voip_call.get("state")?(e=Gt({to:a,type:"result",id:i.attr("id")}).c("query",{xmlns:qt.NS.JINGLE_MSG}).c("session",{id:t}),nt.current_voip_call.updateStatus(nt.getString("dialog_jingle_message__status_calling"))):e=Gt({to:a,type:"error",id:i.attr("id")}).c("error",{xmlns:qt.NS.JINGLE_MSG}),this.sendIQFast(e)}},testGalleryTokenExpire:function(e,t){let i=new Date,s=new Date(this.get("gallery_token_expires"));this.get("gallery_auth")?this.once("gallery_token_authenticated",e):i<s?e&&e():this.server_features.get("media-gallery")?(this.initGalleryAuth(this.server_features.get("media-gallery"),t),this.once("gallery_token_authenticated",e)):this.server_features.get("media-gallery")||(this.set("gallery_url",void 0),this.set("gallery_token",void 0),this.set("gallery_token_expires",void 0),e&&e())},testGalleryFileSlot:function(e,t){if(this.get("gallery_token")&&this.get("gallery_url")){let i=new FileReader;i.onloadend=()=>{let s=i.result.split("base64,"),n=atob(s[1]),a=new Uint8Array(n.length);for(let e=0;e<n.length;e++)a[e]=n.charCodeAt(e);Vt.ajax({type:"GET",headers:{Authorization:"Bearer "+this.get("gallery_token")},url:this.get("gallery_url")+"v1/files/slot/",dataType:"json",contentType:"application/json",data:{size:e.size,name:e.name,hash:sha1(a)},success:e=>{Ot.log(e),t&&t(e)},error:e=>{Ot.log(e),t&&t(e.responseJSON)}})},i.onerror=e=>{Ot.log(i.error),t&&t(!1)},i.readAsDataURL(e)}},initGalleryAuth:function(e,t){this.set("gallery_url",e.get("from")),this.get("gallery_url")&&!this.get("gallery_auth")&&(this.set("gallery_token",void 0),this.set("gallery_token_expires",void 0),this.set("gallery_auth",!0),this.gallery_iq_answered=!1,Vt.ajax({type:"POST",url:this.get("gallery_url")+"v1/account/xmpp_code_request/",dataType:"json",contentType:"application/json",data:JSON.stringify({jid:this.jid,type:"iq"}),success:e=>{if(e.request_id){if(this.set("gallery_auth_request_code",e.request_id),this.gallery_auth_errback=t,this.gallery_code_requests.length){let e=this.gallery_code_requests.find((e=>e.id===this.get("gallery_auth_request_code")));e&&e.code&&this.onAuthCode(e.code)}setTimeout((()=>{this.gallery_iq_answered||this.handleCommonGalleryErrors({status:500},t)}),5e3)}},error:e=>{this.handleCommonGalleryErrors(e,t),this.set("gallery_auth",!1),this.gallery_code_requests=[],Ot.log(e)}}))},onAuthCode:function(e){this.gallery_code_requests=[],this.set("gallery_auth_request_code",void 0),e&&(this.gallery_iq_answered=!0,Vt.ajax({type:"POST",url:this.get("gallery_url")+"v1/account/xmpp_auth/",dataType:"json",contentType:"application/json",data:JSON.stringify({jid:this.id,code:e}),success:e=>{e.token&&this.set("gallery_token",e.token),e.expires&&this.set("gallery_token_expires",e.expires),this.trigger("gallery_token_authenticated"),this.set("gallery_auth",!1)},error:e=>{this.set("gallery_auth",!1),this.handleCommonGalleryErrors(e),Ot.log(e)}}))},prepareFiles:function(e,t){e.forEach((e=>{let i=new FileReader;i.onloadend=()=>{let s=i.result.split("base64,"),n=atob(s[1]),a=new Uint8Array(n.length);for(let e=0;e<n.length;e++)a[e]=n.charCodeAt(e);this.testFile({size:e.size,name:e.name,hash:sha1(a)},e,t)},i.readAsDataURL(e)}))},handleCommonGalleryErrors:function(e,t){let i;!t&&(t=this.gallery_auth_errback),this.gallery_auth_errback=void 0,e&&e.responseJSON&&e.responseJSON.error&&(i=e.responseJSON.error),401===e.status?this.server_features.get("media-gallery")?this.initGalleryAuth(this.server_features.get("media-gallery"),t):(this.set("gallery_url",null),this.set("gallery_token",null),t&&t("No Media Gallery server feature")):500===e.status?(this.set("gallery_url",null),this.set("gallery_token",null),t&&t(nt.getString("media_gallery_server_error"))):t&&t("Media Gallery error - "+(i||e.status))},getStorageStats:function(e,t){this.testGalleryTokenExpire((()=>{e&&(e={}),this.get("gallery_token")&&this.get("gallery_url")&&Vt.ajax({type:"GET",headers:{Authorization:"Bearer "+this.get("gallery_token")},url:this.get("gallery_url")+"v1/files/stats/",dataType:"json",contentType:"application/json",data:e,success:e=>{t&&t(e)},error:e=>{this.handleCommonGalleryErrors(e),Ot.log(e)}})}))},testFile:function(e,t,i){this.testGalleryTokenExpire((()=>{this.get("gallery_token")&&this.get("gallery_url")&&Vt.ajax({type:"GET",headers:{Authorization:"Bearer "+this.get("gallery_token")},url:this.get("gallery_url")+"v1/files/slot/",dataType:"json",contentType:"application/json",data:e,success:e=>{this.uploadFile(t,i)},error:e=>{this.handleCommonGalleryErrors(e),Ot.log(e)}})}))},uploadFile:function(e,t,i){this.testGalleryTokenExpire((()=>{if(this.get("gallery_token")&&this.get("gallery_url")){let s=new FormData,n={};e.duration&&(n.duration=e.duration),s.append("file",e,e.name),s.append("metadata",JSON.stringify(n)),e.size&&s.append("size",e.size),e.voice?(s.append("media_type",e.type+"+voice"),s.append("context","voice")):s.append("media_type",e.type),Vt.ajax({type:"POST",headers:{Authorization:"Bearer "+this.get("gallery_token")},url:this.get("gallery_url")+"v1/files/upload/",data:s,contentType:!1,processData:!1,success:e=>{Ot.log(e),t&&t(e)},error:e=>{this.handleCommonGalleryErrors(e),Ot.log(e),i&&i(e)}})}}))},uploadAvatar:function(e,t,i){this.testGalleryTokenExpire((()=>{if(this.get("gallery_token")&&this.get("gallery_url")){e||i&&i("no file");let s=new FormData;s.append("file",e,e.name),s.append("media_type",e.type),s.append("context","avatar"),Vt.ajax({type:"POST",headers:{Authorization:"Bearer "+this.get("gallery_token")},url:this.get("gallery_url")+"v1/files/upload/",data:s,contentType:!1,processData:!1,success:e=>{Ot.log(e),t&&t(e)},error:e=>{this.handleCommonGalleryErrors(e),Ot.log(e),i&&i(e)}})}}))},deleteFile:function(e,t,i){this.testGalleryTokenExpire((()=>{if(this.get("gallery_token")&&this.get("gallery_url")&&e){let s={id:e,contexts:["file","voice"]};Vt.ajax({type:"DELETE",headers:{Authorization:"Bearer "+this.get("gallery_token")},url:this.get("gallery_url")+"v1/files/",dataType:"json",contentType:"application/json",data:JSON.stringify(s),success:e=>{Ot.log(e),t&&t(e)},error:e=>{this.handleCommonGalleryErrors(e),Ot.log(e),i&&i(e)}})}}))},deleteFileByUrl:function(e,t,i){this.testGalleryTokenExpire((()=>{if(this.get("gallery_token")&&this.get("gallery_url")&&e){let s={file:e,contexts:["file","voice"]};Vt.ajax({type:"DELETE",headers:{Authorization:"Bearer "+this.get("gallery_token")},url:this.get("gallery_url")+"v1/files/",dataType:"json",contentType:"application/json",data:JSON.stringify(s),success:e=>{Ot.log(e),t&&t(e)},error:e=>{this.handleCommonGalleryErrors(e),Ot.log(e),i&&i(e)}})}}))},getOpenGraphData:function(e,t,i){this.testGalleryTokenExpire((()=>{this.get("gallery_token")&&this.get("gallery_url")&&Vt.ajax({type:"POST",headers:{Authorization:"Bearer "+this.get("gallery_token"),"Content-Type":"application/json"},url:this.get("gallery_url")+"v1/opengraph/",dataType:"json",contentType:"application/json",data:JSON.stringify({url:e}),success:e=>{e.site=Vt(e.ogp).closest('meta[property="og:site_name"]').attr("content"),e.type=Vt(e.ogp).closest('meta[property="og:type"]').attr("content"),e.url=Vt(e.ogp).closest('meta[property="og:url"]').attr("content"),e.description=Vt(e.ogp).closest('meta[property="og:description"]').attr("content"),e.title=Vt(e.ogp).closest('meta[property="og:title"]').attr("content"),e.image=Vt(e.ogp).closest('meta[property="og:image"]').attr("content"),e.image_height=Vt(e.ogp).closest('meta[property="og:image:height"]').attr("content"),e.image_width=Vt(e.ogp).closest('meta[property="og:image:width"]').attr("content"),e.video_url=Vt(e.ogp).closest('meta[property="og:video:url"]').attr("content"),Ot.log(e),t&&t(e)},error:e=>{this.handleCommonGalleryErrors(e),i&&i(e),Ot.log(e)}})}))},createMessageFromIQ:function(e){let t=this.contacts.mergeContact(e.from_jid);this.chats.getChat(t).messages.create(e)},onPresence:function(e){let t=Vt(e),i=e.getAttribute("type");if("error"===i)return;let s=e.getAttribute("from"),n=qt.getBareJidFromJid(s);if(n!==this.get("jid"))return void Yt.each(this._added_pres_handlers,(function(t){t(e,n)}));let a=qt.getResourceFromJid(s),o=Number(t.find("priority").text()),r=t.find("show").text()||"online",c=t.find("status").text();Yt.isNaN(o)&&(o=0);let l=t.find(`x[xmlns="${qt.NS.VCAD_UPDATE}"]`);if(l.length&&this.get("avatar_priority")&&this.get("avatar_priority")<=Ft.AVATAR_PRIORITIES.VCARD_AVATAR&&this.save("photo_hash",l.find("photo").text()),a){let e=this.resources.get(a);if("unavailable"===i)e&&e.destroy();else{let i={resource:a,priority:o,status:r,status_message:c},s=t.find(`device[xmlns="${qt.NS.AUTH_DEVICES}"]`);s&&this.x_tokens_list&&s.attr("id")&&(i.token_uid=s.attr("id")),e?e.set(i):e=this.resources.create(i)}}}},{addInitPlugin:function(e){this.prototype._init_plugins.push(e)},addConnPlugin:function(e,t,i){t&&this.prototype._after_connected_plugins.push(e),i&&this.prototype._after_reconnected_plugins.push(e)},addFastConnPlugin:function(e,t,i){t&&this.prototype._after_fast_connected_plugins.push(e)}}),nt.Accounts=Backbone.CollectionWithStorage.extend({model:nt.Account,comparator:function(e,t){return e.settings.get("order")<t.settings.get("order")?-1:1},_initialize:function(e,t){this.settings_list=nt.account_settings_list,this.getEnabledList(),this.getConnectedList(),this.on("add",this.onAdd,this),this.on("destroy",this.onDestroy,this),this.on("change:enabled",this.getEnabledList,this),this.on("change:omemo_enabled",this.onOmemoChanged,this),this.on("update_order",this.onUpdatedOrder,this),this.on("add destroy activate deactivate",this.onListChanged,this),this.on("destroy deactivate",this.onAccountDisconnected,this),nt.on("quit",this.onQuit,this),nt.on("quit_accounts",this.onQuitAccounts,this),this.settings_list.on("add_settings",this.onSettingsAdded,this)},onQuit:function(){Yt.each(Yt.clone(this.models),(function(e){e.deleteAccount(!0),e.password_view.closeModal(),Pt.modals.clear_queue()})),!this.models.length&&nt.body.setScreen("login",{chat_item:null})},onQuitAccounts:function(){Yt.each(Yt.clone(this.models),(function(e){e.settings.get("to_sync")&&(e.deleteAccount(),e.password_view.closeModal(),Pt.modals.clear_queue())})),!this.models.length&&nt.body.setScreen("login")},getEnabledList:function(){this.enabled=this.filter((e=>e.get("enabled")))},getConnectedList:function(){this.trigger("connected_list_changed"),this.connected=this.filter((e=>e.isConnected()))},onListChanged:function(){this.getEnabledList(),this.getConnectedList(),this.trigger("list_changed",this)},onOmemoChanged:function(e){this.trigger("omemo_changed",e)},onAdd:function(e){e.is_invalid&&e.destroy()},onDestroy:function(e){if(!e.get("is_new")){if(!this.length)nt.body.setScreen("login");else if(e.show_settings_after_delete)nt.body.setScreen("settings-modal",{account_block_name:null});else if(e.dont_change_screen_after_delete)return}},onAccountDisconnected:function(){nt.toolbar_view.recountAllMessageCounter(),nt.recountAllMessageCounter()},onSettingsAdded:function(e){let t=e.get("jid");this.get(t)||this.create({jid:t})},onUpdatedOrder:function(){this.sort(),this.getEnabledList(),this.getConnectedList()},getLastOrder:function(){return this.length?this.last().settings.get("order"):0},getDefaultColor:function(){let e={},t=Ft.MATERIAL_COLORS;this.each((function(t){e[t.settings.get("color")]=!0}));for(let i=0;i<t.length;i++)if(!e[t[i]])return t[i];return"red"},moveBefore:function(e,t){let i=this.indexOf(t),s=i>0?this.at(i-1).settings.get("order"):0;e.settings.save("order",(t.settings.get("order")+s)/2),this._updateOrder()},moveToBottom:function(e){e.settings.save("order",this.getLastOrder()+1),this._updateOrder()},_updateOrder:function(){this.sort(),this.each((function(e,t){e.settings.save({order:t+1})})),this.trigger("update_order")}}),nt.AccountToolbarItemView=nt.BasicView.extend({className:"toolbar-item account-item",template:Ut.toolbar_item,avatar_size:Ft.AVATAR_SIZES.TOOLBAR_ACCOUNT_ITEM,events:{"click .filter-chats":"filterChats","click .account-item-avatar-wrap":"showSettings"},_initialize:function(){this.updateConnected(),this.updateAuthState(),this.updateStatus(),this.updateAvatar(),this.updateColorScheme(),this.$el.attr("data-jid",this.model.get("jid")),this.model.session.on("change:auth_failed",this.updateAuthState,this),this.model.session.on("change:connected",this.updateConnected,this),this.model.on("change:status",this.updateStatus,this),this.model.on("change:image",this.updateAvatar,this),this.model.settings.on("change:color",this.updateColorScheme,this),this.model.on("open_settings",this.setActive,this)},updateConnected:function(){this.$el.switchClass("disconnected",!this.model.isConnected()),nt.updateFaviconConnected()},updateAuthState:function(){let e=this.model.session.get("auth_failed");nt.updateFaviconConnected(),this.$(".status").hideIf(e),this.$(".auth-failed").showIf(e)},updateStatus:function(){this.$(".status").attr("data-status",this.model.get("status"))},updateAvatar:function(){let e=this.model.cached_image;this.$(".circle-avatar").setAvatar(e,this.avatar_size)},updateColorScheme:function(){this.$el.attr("data-color",this.model.settings.get("color"))},filterChats:function(e){if(e.stopPropagation(),Vt(e.target).closest(".single-item").length)return nt.body.setScreen("settings-modal",{account_block_name:null}),void nt.trigger("update_placeholder");nt.toolbar_view.$(".toolbar-item.account-item").removeClass("active"),nt.toolbar_view.data.get("account_filtering")!=this.model.get("jid")&&this.$el.addClass("active"),nt.toolbar_view.showChatsByAccount(this.model)},showSettings:function(){nt.body.setScreen("settings-modal",{account_block_name:null}),nt.trigger("update_placeholder")}}),nt.ToolbarAccountsBlockView=nt.BasicView.extend({_initialize:function(){this.updateList(),this.model.on("add change:enabled",this.updateOneInList,this),this.model.on("update_order",this.updateList,this),this.model.on("destroy",this.onAccountRemoved,this)},updateList:function(e){this.$el.find(".single-item").removeClass("single-item"),Yt.each(this.children,(function(e){e.detach()})),Yt.each(this.model.enabled,(e=>{let t=e.get("jid"),i=this.child(t);!i&&(i=this.addChild(t,nt.AccountToolbarItemView,{model:e})),this.$el.append(i.$el),1===this.model.enabled.length&&this.$el.find(".toolbar-item.account-item").addClass("single-item")})),this.$el.find(".toolbar-item.settings-modal").switchClass("hidden",0!=this.model.enabled.length),this.parent.updateScrollBar()},updateOneInList:function(e){let t=e.get("jid");if(e.get("enabled")){let i=this.child(t);i?i.$el.detach():i=this.addChild(t,nt.AccountToolbarItemView,{model:e});let s=this.model.enabled.indexOf(e);0===s?this.$el.prepend(i.$el):this.$(".account-item").eq(s-1).after(i.$el)}else e.last_msg_timestamp=0,this.removeChild(t);this.$el.find(".single-item").removeClass("single-item"),1===this.model.enabled.length&&this.$el.find(".toolbar-item.account-item").addClass("single-item"),this.$el.find(".toolbar-item.settings-modal").switchClass("hidden",0!=this.model.enabled.length),this.parent.updateScrollBar()},onAccountRemoved:function(e){this.removeChild(e.get("jid")),this.parent.updateScrollBar(),1===this.model.enabled.length&&this.$el.find(".toolbar-item.account-item").addClass("single-item"),this.$el.find(".toolbar-item.settings-modal").switchClass("hidden",0!=this.model.enabled.length)}}),nt.Resource=Backbone.Model.extend({idAttribute:"resource",defaults:{priority:0}}),nt.ResourceView=nt.BasicView.extend({className:"resource-wrap",template:Ut.resource,_initialize:function(e){this.update(),this.model.on("change",this.update,this)},update:function(){let e=this.model.attributes;return this.$(".status").attr("data-status",e.status),this.$(".status-message").text(e.status_message||nt.getString(e.status)),this.$(".client").text(e.client||nt.getString("please_wait")),this.$(".resource").text(e.resource),this.$(".priority").text(e.priority),this}}),nt.ResourceRightView=nt.BasicView.extend({className:"resource-wrap",template:Ut.resource_right,_initialize:function(e){this.update(),this.model.on("change",this.update,this)},update:function(){let e=this.model.attributes;return this.$(".status").attr("data-status",e.status),this.$(".status-message").text(e.status_message||nt.getString(e.status)),this.$(".client").text(e.client||nt.getString("please_wait")),this.$(".resource").text(e.resource),this.$(".priority").text(e.priority),this}}),nt.Resources=Backbone.Collection.extend({model:nt.Resource,comparator:function(e,t){let i=e.get("priority"),s=t.get("priority");return i>s?-1:i<s?1:0},requestInfo:function(e,t){let i=this.jid+"/"+e.get("resource");this.connection&&this.connection.connected&&this.connection.disco.info(i,null,(i=>{let s=Vt(i).find("identity[category=client]");s.length&&e.set("client",s.attr("name")),this.attention_supported=this.isFeatureSupported(i,qt.NS.ATTENTION),t&&t()}))},isFeatureSupported:function(e,t){let i=Vt(e),s=!1;return i.find("feature").each((function(){Vt(this).attr("var")===t&&(s=!0)})),s}}),nt.ResourcesView=nt.BasicView.extend({_initialize:function(){this.renderByInit(),this.model.on("add",this.onResourceAdded,this),this.model.on("remove",this.onResourceRemoved,this),this.model.on("reset",this.onReset,this),this.model.on("change:priority",this.onPriorityChanged,this)},renderByInit:function(){this.model.each((e=>{this.onResourceAdded(e)}))},onResourceAdded:function(e){this.model.requestInfo(e),this.addChild(e.get("resource"),nt.ResourceView,{model:e}),this.updatePosition(e),this.$el.removeClass("hidden"),this.parent.updateScrollBar()},onPriorityChanged:function(e){this.model.sort(),this.updatePosition(e)}}),nt.AccountResources=nt.Resources.extend({initialize:function(e,t){this.jid=t.account.get("jid"),this.connection=t.account.connection}}),nt.AccountResourcesView=nt.ResourcesView.extend({onResourceRemoved:function(e){this.removeChild(e.get("resource")),this.parent.updateScrollBar()},onReset:function(){this.removeChildren(),this.parent.updateScrollBar()},updatePosition:function(e){let t=this.child(e.get("resource"));if(!t)return;t.$el.detach();let i=this.model.indexOf(e);0===i?this.$(".main-resource").after(t.$el):this.$(".resource-wrap").eq(i).after(t.$el),this.updateScrollBar()}}),nt.AccountVCardModalView=nt.VCardView.extend({template:Dt.templates.vcard.vcard_modal,events:{"click .btn-vcard-refresh":"refresh","click .btn-vcard-edit":"showEditView","click .details-icon":"onClickIcon"},__initialize:function(){this.updateButtons(),this.model.on("activate deactivate",this.updateButtons,this)},updateButtons:function(){let e=this.model.isConnected();this.$(".btn-vcard-edit").showIf(e),this.$(".btn-vcard-refresh").showIf(e)},showEditView:function(e){this.vcard_edit_modal=new nt.VCardEditModalView({model:this.model}),this.vcard_edit_modal.show({$el:e})}}),nt.AccountMediaGalleryView=nt.BasicView.extend({template:Ut.media_gallery_account,events:{"change input.gallery-upload":"onFileInputChanged","click .gallery-file:not(.gallery-avatar) .btn-delete":"deleteFile","click .gallery-file.gallery-avatar .btn-delete":"deleteAvatar","click .gallery-file .checkbox-field":"selectFile","click .btn-delete-selection":"deleteSelectedFiles","click .settings-tab:not(.settings-deletion-button)":"onTabClick","click .show-deletion":"showDeleteFilesView","click .btn-back-gallery":"backToMain","click .gallery-file":"onClickFile","click .btn-close-selection":"disableFilesSelect"},_initialize:function(){this.account=this.model,this.$el.html(this.template()),this.parent.ps_container.on("ps-scroll-y",this.onScroll.bind(this)),this.account.on("update_avatar_list",this.onUpdateAvatars.bind(this))},render:function(){this.updateStorage();this.$(".dropdown-button").dropdown({inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"right"})},onScroll:function(){if(this.$el.hasClass("hidden"))return;this.parent.ps_container[0].scrollTop/(this.parent.ps_container[0].scrollHeight-this.parent.ps_container[0].offsetHeight)>.8&&!this.loading_files&&this.current_page<this.total_pages&&(this.current_page++,this.current_options.page=this.current_page,"avatars"===this.current_options.type?this.getAvatars(this.current_options):this.getFiles(this.current_options))},updateStorage:function(e,t){this.account.getStorageStats(null,(e=>{let t=Pt.pretty_size(e.total.used)||"0";this.$(".btn-delete-files-dropdown").hideIf(!(e.total&&e.total.used)),this.$(".gallery-manage-storage").hideIf(!(e.total&&e.total.used)),this.$(".storage-usage").html(t+nt.getString("of")+Pt.pretty_size(e.quota)),this.$(".storage-usage-images").hideIf(!(e.images&&e.images.used)),this.$(".storage-label-images").hideIf(!(e.images&&e.images.used)),e.images&&!Yt.isUndefined(e.images.used)&&this.$(".storage-usage-images .storage-usage-amount").html(Pt.pretty_size(e.images.used)),this.$(".storage-label-videos").hideIf(!(e.videos&&e.videos.used)),this.$(".storage-usage-videos").hideIf(!(e.videos&&e.videos.used)),e.videos&&!Yt.isUndefined(e.videos.used)&&this.$(".storage-usage-videos .storage-usage-amount").html(Pt.pretty_size(e.videos.used)),this.$(".storage-label-voices").hideIf(!(e.voices&&e.voices.used)),this.$(".storage-usage-voices").hideIf(!(e.voices&&e.voices.used)),e.voices&&!Yt.isUndefined(e.voices.used)&&this.$(".storage-usage-voices .storage-usage-amount").html(Pt.pretty_size(e.voices.used)),this.$(".storage-label-files").hideIf(!(e.files&&e.files.used)),this.$(".storage-usage-files").hideIf(!(e.files&&e.files.used)),e.files&&!Yt.isUndefined(e.files.used)&&this.$(".storage-usage-files .storage-usage-amount").html(Pt.pretty_size(e.files.used)),this.$(".storage-label-avatars").hideIf(!(e.avatars&&e.avatars.used)),e.avatars&&!Yt.isUndefined(e.avatars.used)&&this.$(".storage-usage-avatars .storage-usage-amount").html(Pt.pretty_size(e.avatars.used)),e.images&&this.$(".storage-progress-images").css("width",(e.images.used/e.quota*100).toFixed(2)+"%"),e.videos&&this.$(".storage-progress-videos").css("width",(e.videos.used/e.quota*100).toFixed(2)+"%"),e.voices&&this.$(".storage-progress-voices").css("width",(e.voices.used/e.quota*100).toFixed(2)+"%"),e.files&&this.$(".storage-progress-files").css("width",(e.files.used/e.quota*100).toFixed(2)+"%"),e.avatars&&this.$(".storage-progress-avatars").css("width",(e.avatars.used/e.quota*100).toFixed(2)+"%"),this.parent&&(this.parent.$('.settings-tab[data-block-name="media-gallery"] .settings-block-label').text(nt.getString("settings_account__storage_label",[Pt.pretty_size(e.total.used),Pt.pretty_size(e.quota)])),this.parent.updateHeight()),nt.settings_modal_view.$('.settings-tab[data-block-name="media-gallery"] .settings-block-label').length&&(nt.settings_modal_view.$('.settings-tab[data-block-name="media-gallery"] .settings-block-label').text(nt.getString("settings_account__storage_label",[Pt.pretty_size(e.total.used),Pt.pretty_size(e.quota)])),nt.settings_modal_view.updateHeight())}))},filterType:function(e,t){this.$(".gallery-files").html(""),"image"===e||"video"===e||"avatars"===e?(this.$(".gallery-files").removeClass("voice"),this.$(".gallery-files").removeClass("file"),this.$(".gallery-files").addClass("grid")):"voice"===e?(this.$(".gallery-files").addClass("voice"),this.$(".gallery-files").removeClass("file"),this.$(".gallery-files").removeClass("grid")):(this.$(".gallery-files").removeClass("voice"),this.$(".gallery-files").addClass("file"),this.$(".gallery-files").removeClass("grid"));let i={type:e};t&&(i.order_by=t),this.current_options=i,"avatars"===e?this.getAvatars(i):this.getFiles(i)},onTabClick:function(e){let t=Vt(e.target).closest(".settings-tab"),i=t.attr("data-media-type"),s=t.attr("data-header-text");this.current_page=1,this.total_pages=0,this.parent.$(".btn-back-settings").addClass("hidden"),this.parent.$(".settings-panel-head-title").text(s),this.parent.$(".btn-select-files").removeClass("hidden"),this.parent.$(".btn-sorting").removeClass("hidden"),this.parent.$(".btn-more.media-gallery-button").removeClass("hidden"),this.$(".gallery-wrap").addClass("hidden"),this.$(".media-gallery-items-wrap").removeClass("hidden"),this.$(".media-gallery-items-wrap").attr("data-value",i),this.$(".gallery-files").html(""),this.filterType(i),this.parent&&this.parent.updateHeight(),nt.settings_modal_view&&nt.settings_modal_view.updateHeight()},backToMain:function(e){this.parent.$(".btn-back-settings").removeClass("hidden"),this.parent.$(".btn-select-files").addClass("hidden"),this.parent.$(".btn-sorting").addClass("hidden"),this.parent.$(".settings-panel-head-title").text(nt.getString("account_cloud_storage")),this.parent.$(".btn-more.media-gallery-button").addClass("hidden"),this.$(".gallery-wrap").removeClass("hidden"),this.$(".media-gallery-items-wrap").addClass("hidden"),this.updateStorage(),this.parent&&this.parent.updateHeight(),nt.settings_modal_view&&nt.settings_modal_view.updateHeight()},onUpdateAvatars:function(e){this.updateStorage(!1,!0),"avatars"===this.$(".media-gallery-items-wrap").attr("data-value")&&(this.current_page=1,this.total_pages=0,this.$(".gallery-files").html(""),this.filterType("avatars"))},showDeleteFilesView:function(e){nt.trigger("show_delete_files",{model:this.account,gallery_view:this})},sortFiles:function(e){let t=Vt(e.target).closest(".btn-gallery-sorting"),i=this.$(".media-gallery-items-wrap").attr("data-value"),s=t.attr("data-value");this.current_page=1,this.total_pages=0,this.$(".gallery-files").html(""),this.filterType(i,s)},onClickFile:function(e){let t=Vt(e.target);if(t.hasClass("uploaded-video")){let e=t.closest(".gallery-file").attr("data-file");Pt.dialogs.common("",'<video class="gallery-video-frame" controls autoplay=1 width="420" height="315" src="'+e+'"></video>',null,null,null,"gallery-video-modal")}else{if(t.hasClass("no-uploaded")||t.hasClass("gallery-audio-file-not-uploaded")){let e=t.closest(".gallery-file"),i=e.attr("data-file");return e.find(".mdi-play").removeClass("audio-file-play"),e[0].voice_message=this.renderVoiceMessage(e.find(".gallery-file-audio-container")[0],i),this.prev_audio_message&&this.prev_audio_message.voice_message.pause(),void(this.prev_audio_message=e[0])}if(t.hasClass("mdi-play")){let e=t.closest(".gallery-file");return this.prev_audio_message.voice_message.pause(),this.prev_audio_message=e[0],void e[0].voice_message.play()}t.hasClass("mdi-pause")&&this.prev_audio_message.voice_message.pause()}},renderVoiceMessage:function(e,t){let i=e.innerHTML,s="waveform"+Qt.now(),n=Vt(e),a=n.closest(".gallery-file");n.addClass("voice-message-rendering").html(Vt(Ut.audio_file_waveform({waveform_id:s})));let o=this.createAudio(t,s);return o.on("ready",(()=>{a.find(".gallery-file-placeholder-background .mdi").removeClass("no-uploaded"),a.find(".gallery-file-placeholder-background").removeClass("gallery-audio-file-not-uploaded");let e=Math.round(o.getDuration());n.find(".voice-msg-total-time").text(Pt.pretty_duration(e)),o.play()})),o.on("error",(()=>{n.removeClass("voice-message-rendering"),e.innerHTML=i,o.unAll(),n.find(".voice-message-play").get(0).remove(),Pt.callback_popup_message(nt.getString("jingle__error__audio_not_supported"),3e3)})),o.on("play",(()=>{a.find(".gallery-file-placeholder-background .mdi").addClass("mdi-pause").removeClass("mdi-play"),a.addClass("playing");let e=setInterval((function(){let t=Math.round(o.getCurrentTime());o.isPlaying()?n.find(".voice-msg-current-time").text(Pt.pretty_duration(t)):clearInterval(e)}),100)})),o.on("finish",(()=>{a.find(".gallery-file-placeholder-background .mdi").removeClass("mdi-pause").addClass("mdi-play"),a.removeClass("playing")})),o.on("pause",(()=>{a.find(".gallery-file-placeholder-background .mdi").removeClass("mdi-pause").addClass("mdi-play"),a.removeClass("playing")})),n.find(".voice-message-volume")[0].onchange=()=>{o.setVolume(n.find(".voice-message-volume").val()/100)},o},createAudio:function(e,t){let i=WaveSurfer.create({container:"#"+t,scrollParent:!1,barWidth:3,height:48,barHeight:48,cursorColor:"rgba(211,47,47,0.8)",autoCenter:!1,normalize:!0,hideScrollBar:!0,progressColor:"#757575"});return i.load(e),i.setVolume(.5),i},getFiles:function(e){this.account.testGalleryTokenExpire((()=>{if(e&&e.file&&(e={}),e=Object.assign({obj_per_page:50,order_by:"-id"},e),this.account.get("gallery_token")&&this.account.get("gallery_url")){if(this.loading_files&&this.current_rendered_type===e.type&&!e.page)return;this.current_rendered_type=e.type,"voice"===e.type&&(e.contexts="voice",delete e.type),this.loading_files=!0,Vt(Dt.templates.contacts.preloader()).appendTo(this.$(".gallery-files")),Vt.ajax({type:"GET",headers:{Authorization:"Bearer "+this.account.get("gallery_token")},url:this.account.get("gallery_url")+"v1/files/",dataType:"json",contentType:"application/json",data:e,success:t=>{e.type?t.type=e.type:e.contexts&&(t.type=e.contexts),this.renderFiles(t),this.loading_files=!1},error:e=>{this.account.handleCommonGalleryErrors(e),this.current_rendered_type=void 0,Ot.log(e),this.loading_files=!1,this.$(".gallery-files .preloader-wrapper").remove()}})}}))},getAvatars:function(e){this.account.testGalleryTokenExpire((()=>{if(e&&e.file&&(e={}),e=Object.assign({obj_per_page:50,order_by:"-id",type:"avatars",contexts:"avatar"},e),this.account.get("gallery_token")&&this.account.get("gallery_url")){if(this.loading_files&&this.current_rendered_type===e.type&&!e.page)return;this.current_rendered_type=e.type,this.loading_files=!0,delete e.type,Vt(Dt.templates.contacts.preloader()).appendTo(this.$(".gallery-files")),Vt.ajax({type:"GET",headers:{Authorization:"Bearer "+this.account.get("gallery_token")},url:this.account.get("gallery_url")+"v1/files/",dataType:"json",contentType:"application/json",data:e,success:e=>{e.type="avatars",this.renderFiles(e),this.loading_files=!1},error:e=>{this.account.handleCommonGalleryErrors(e),this.current_rendered_type=void 0,Ot.log(e),this.loading_files=!1,this.$(".gallery-files .preloader-wrapper").remove()}})}}))},renderFiles:function(e){if(e.type!=this.$(".media-gallery-items-wrap").attr("data-value"))return;this.total_pages=e.total_pages,this.$(".gallery-files .preloader-wrapper").remove(),e.items&&e.items.length?e.items.forEach((t=>{let i;t.thumbnail&&t.thumbnail.url&&(t.thumbnail=t.thumbnail.url),t.metadata&&t.metadata.duration&&(i=Pt.pretty_duration(t.metadata.duration));let s=Vt(Ut.media_gallery_account_file({file:t,svg_icon:Pt.file_type_icon_svg(t.media_type),filesize:Pt.pretty_size(t.size),created_at:Pt.pretty_date(t.created_at),duration:i,download_only:!1}));"avatars"===e.type&&s.addClass("gallery-avatar"),s.appendTo(this.$(".gallery-files")),s.find(".uploaded-img").length&&s.find(".uploaded-img").magnificPopup({type:"image",closeOnContentClick:!0,fixedContentPos:!0,mainClass:"mfp-no-margins mfp-with-zoom",image:{verticalFit:!0,titleSrc:function(e){return'<a class="image-source-link" href="'+e.el.attr("src")+'" target="_blank">'+e.name+"</a>"}},zoom:{enabled:!0,duration:300}})})):this.$(".gallery-files").html(`<div class="no-files">${nt.getString("no_files")}</div>`);this.$(".dropdown-button").dropdown({inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"right"}),this.parent&&this.parent.updateHeight&&this.parent.updateHeight()},deleteFile:function(e){let t=Vt(e.target).closest(".gallery-file"),i=t.attr("data-id");this.account.deleteFile(i,(e=>{t.detach()}),(e=>{}))},deleteAvatar:function(e){this.account.testGalleryTokenExpire((()=>{let t=Vt(e.target).closest(".gallery-file"),i=t.attr("data-id");this.account.get("gallery_token")&&this.account.get("gallery_url")&&i&&Vt.ajax({type:"DELETE",headers:{Authorization:"Bearer "+this.account.get("gallery_token")},url:this.account.get("gallery_url")+"v1/files/",dataType:"json",contentType:"application/json",data:JSON.stringify({id:i,contexts:["avatar"]}),success:e=>{t.detach()},error:e=>{this.account.handleCommonGalleryErrors(e),Ot.log(e)}})}))},enableFilesSelect:function(e){this.$(".media-gallery-items-wrap").addClass("select-items-state"),this.parent.$(".settings-panel-head-title").addClass("hidden"),this.parent.$(".btn-more.media-gallery-button").addClass("hidden"),this.parent.$(".btn-back-settings").addClass("hidden"),this.onSelectFile()},disableFilesSelect:function(e){this.$(".media-gallery-items-wrap").removeClass("select-items-state"),this.parent.$(".settings-panel-head-title").removeClass("hidden"),this.parent.$(".btn-more.media-gallery-button").removeClass("hidden"),this.parent.$(".btn-back-settings").removeClass("hidden"),this.$(".gallery-file .checkbox-field input:checked").prop("checked",!1)},selectFile:function(e){let t=Vt(e.target).closest(".checkbox-field").find("input");t.prop("checked",!t.prop("checked")),this.onSelectFile()},onSelectFile:function(){if(!this.$(".media-gallery-items-wrap").attr("data-value"))return;let e,t=this.$(".gallery-file .checkbox-field input:checked").length;e=nt.getQuantityString(`media_gallery_selected_${this.$(".media-gallery-items-wrap").attr("data-value")}_header`,t),this.$(".gallery-selection-head").text(e),this.$(".gallery-file .checkbox-field input:checked").closest(".gallery-file").addClass("selected-gallery-file"),this.$(".gallery-file .checkbox-field input:not(:checked)").closest(".gallery-file").removeClass("selected-gallery-file")},deleteSelectedFiles:function(){this.$(".gallery-file .checkbox-field input:checked").each(((e,t)=>{Vt(t).closest(".gallery-file").attr("data-id")&&("avatars"===this.$(".media-gallery-items-wrap").attr("data-value")?this.deleteAvatar({target:t}):this.deleteFile({target:t}))})),this.disableFilesSelect()},onFileInputChanged:function(e){let t=e.target,i=[];for(let e=0;e<t.files.length;e++)i.push(t.files[e]);i&&(this.account.prepareFiles(i,this.openStoragePanel.bind(this)),Vt(t).val(""))}}),nt.DeleteFilesFromGalleryView=nt.BasicView.extend({className:"modal main-modal delete-files-modal",ps_selector:".modal-content",ps_settings:{wheelPropagation:!0},template:Ut.delete_files_media_gallery,events:{"click .btn-confirm":"deleteFilesFiltered","click .btn-delete-files-percent":"deletePercent","click .btn-cancel":"close","click .gallery-file":"onClickFile","change #delete_avatars":"onChangeCheckbox"},render:function(e){this.account=e.model,this.gallery_view=e.gallery_view,this.delete_percent=null,this.$el.openModal({ready:this.onRender.bind(this),complete:this.close.bind(this)})},onRender:function(e){this.$el.removeClass("wide-deletion"),this.$(".media-gallery-delete-items-wrap").addClass("hidden"),this.$(".deletion-variants").removeClass("hidden"),this.$(".modal-footer").addClass("hidden"),this.$(".gallery-files").addClass("hidden"),this.$(".list-variant.tab").addClass("hidden"),this.$(".delete-files-preview-container").addClass("hidden"),this.$(".setting-name").addClass("hidden"),this.$(".delete-files-preview-wrap .gallery-files").html(""),this.$(".media-gallery-delete-items-wrap .no-files").addClass("hidden"),this.$(".modal-header").text(nt.getString("media_gallery_delete_files")),this.$(".delete-avatars-checkbox input").prop("checked",!1),this.$(".btn-confirm").prop("disabled",!1),this.$(".delete-avatars-checkbox").addClass("hidden"),this.$(".delete-avatars-checkbox").addClass("hidden2"),this.updateScrollBar()},onClickFile:function(e){let t=Vt(e.target);if(t.hasClass("uploaded-video")){let e=t.closest(".gallery-file").attr("data-file");Pt.dialogs.common("",'<video class="gallery-video-frame" controls autoplay=1 width="420" height="315" src="'+e+'"></video>',null,null,null,"gallery-video-modal")}else{if(t.hasClass("no-uploaded")||t.hasClass("gallery-audio-file-not-uploaded")){let e=t.closest(".gallery-file"),i=e.attr("data-file");return e.find(".mdi-play").removeClass("audio-file-play"),e[0].voice_message=this.gallery_view.renderVoiceMessage(e.find(".gallery-file-audio-container")[0],i),this.prev_audio_message&&this.prev_audio_message.voice_message.pause(),void(this.prev_audio_message=e[0])}if(t.hasClass("mdi-play")){let e=t.closest(".gallery-file");return this.prev_audio_message.voice_message.pause(),this.prev_audio_message=e[0],void e[0].voice_message.play()}t.hasClass("mdi-pause")&&this.prev_audio_message.voice_message.pause()}},onChangeCheckbox:function(e){let t=Vt(e.target);this.delete_avatars=t.prop("checked"),this.$(".delete-files-avatars").switchClass("hidden",!t.prop("checked")),this.has_files||(this.$(".media-gallery-delete-items-wrap .no-files").switchClass("hidden",t.prop("checked")),this.$(".delete-files-text").switchClass("hidden",!t.prop("checked")),this.$(".btn-confirm").prop("disabled",!t.prop("checked")))},deletePercent:function(e){let t=Vt(e.target).closest(".btn-delete-files-percent").attr("data-value");this.$el.addClass("wide-deletion"),this.$(".deletion-variants").addClass("hidden"),this.$(".modal-header").text(nt.getString("media_gallery_delete_files_header")),this.updateScrollBar(),this.delete_avatars=!1,this.delete_percent=t,this.has_files=!1,this.current_page_preview=1,Vt(Dt.templates.contacts.preloader()).appendTo(this.$(".modal-content")),this.getFilesForDeletion()},getFilesForDeletion:function(e){this.account.testGalleryTokenExpire((()=>{if(e&&e.file&&(e={}),!e&&(e={}),e=Object.assign({obj_per_page:50},e),this.account.get("gallery_token")&&this.account.get("gallery_url")){let t;"100"===this.delete_percent?(t=this.account.get("gallery_url")+"v1/files/",e.contexts=["file","avatar","voice"]):t=this.account.get("gallery_url")+"v1/files/percent/"+this.delete_percent+"/",Vt.ajax({type:"GET",headers:{Authorization:"Bearer "+this.account.get("gallery_token")},url:t,dataType:"json",contentType:"application/json",data:e,traditional:!0,success:t=>{Ot.log(t);let i=this.current_page_preview;i<t.total_pages?(this.current_page_preview++,e.page=this.current_page_preview,this.getFilesForDeletion(e)):(this.$(".preloader-wrapper").remove(),this.$(".modal-footer").removeClass("hidden"),this.$(".media-gallery-delete-items-wrap").removeClass("hidden"),"100"===this.delete_percent&&this.$(".delete-avatars-checkbox").removeClass("hidden"),this.updateScrollBar()),this.renderForDeletion(t),1===i&&t.items&&t.items.length?this.has_files||(this.$(".media-gallery-delete-items-wrap .no-files").removeClass("hidden"),this.$(".delete-files-text").addClass("hidden"),this.$(".btn-confirm").prop("disabled",!0)):1===i&&t.items&&(this.$(".media-gallery-delete-items-wrap .no-files").removeClass("hidden"),this.$(".delete-files-text").addClass("hidden"),this.$(".btn-confirm").prop("disabled",!0))},error:e=>{Ot.log(e),this.$(".preloader-wrapper").remove(),this.$(".media-gallery-delete-items-wrap .no-files").removeClass("hidden"),this.$(".delete-files-text").addClass("hidden"),this.$(".btn-confirm").prop("disabled",!0),this.updateScrollBar()}})}}))},renderForDeletion:function(e){if(e.items&&e.items.length){e.items.forEach((e=>{let t;e.thumbnail&&e.thumbnail.url&&(e.thumbnail=e.thumbnail.url),e.is_avatar=Boolean("avatar"===e.context),e.metadata&&e.metadata.duration&&(t=Pt.pretty_duration(e.metadata.duration));let i=Vt(Ut.media_gallery_account_file({file:e,svg_icon:Pt.file_type_icon_svg(e.media_type),filesize:Pt.pretty_size(e.size),created_at:Pt.pretty_date(e.created_at),duration:t,download_only:!0}));e.is_avatar||(this.has_files=!0),e.is_avatar?(i.appendTo(this.$(".gallery-files.delete-files-avatars")),"100"!==this.delete_percent?this.$(".delete-files-avatars").removeClass("hidden"):this.$(".delete-avatars-checkbox").removeClass("hidden2")):e.media_type&&e.media_type.includes("image")?(i.appendTo(this.$(".gallery-files.delete-files-images")),this.$(".delete-files-images").removeClass("hidden")):e.media_type&&e.media_type.includes("video")?(i.appendTo(this.$(".gallery-files.delete-files-videos")),this.$(".delete-files-videos").removeClass("hidden")):e.media_type&&"voice"===e.context?(i.appendTo(this.$(".gallery-files.delete-files-voices")),this.$(".delete-files-voices").removeClass("hidden")):(i.appendTo(this.$(".gallery-files.delete-files-files")),this.$(".delete-files-files").removeClass("hidden")),i.find(".uploaded-img").length&&i.find(".uploaded-img").magnificPopup({type:"image",closeOnContentClick:!0,fixedContentPos:!0,mainClass:"mfp-no-margins mfp-with-zoom",image:{verticalFit:!0,titleSrc:function(e){return'<a class="image-source-link" href="'+e.el.attr("src")+'" target="_blank">'+e.name+"</a>"}},zoom:{enabled:!0,duration:300}})}));let t={inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"right"};this.$(".dropdown-button").dropdown(t),this.$(".list-variant.tab:not(.hidden)").length&&this.$(".list-variant.tab:not(.hidden)").first().click(),this.updateScrollBar()}},deleteFilesFiltered:function(e){this.delete_percent&&Pt.dialogs.ask(nt.getString("media_gallery_delete_files_confirm_delete_header"),nt.getString("media_gallery_delete_files_confirm_delete_text"),null,{ok_button_text:nt.getString("delete")}).done((e=>{e&&(Vt(Dt.templates.contacts.preloader()).appendTo(this.$(".modal-footer")),this.account.testGalleryTokenExpire((()=>{if(this.account.get("gallery_token")&&this.account.get("gallery_url")){let e,t={};"100"===this.delete_percent?(e=this.account.get("gallery_url")+"v1/files/",this.delete_avatars?t.contexts=["file","avatar","voice"]:t.contexts=["file","voice"]):e=this.account.get("gallery_url")+"v1/files/percent/"+this.delete_percent+"/",Vt.ajax({type:"DELETE",headers:{Authorization:"Bearer "+this.account.get("gallery_token")},url:e,dataType:"json",contentType:"application/json",data:JSON.stringify(t),success:e=>{Ot.log(e),this.close()},error:e=>{this.account.handleCommonGalleryErrors(e),this.close(),Ot.log(e)}})}})))}))},onHide:function(){this.$el.detach(),this.gallery_view.updateStorage()},close:function(){this.closeModal()},closeModal:function(){this.$el.closeModal({complete:this.hide.bind(this)})}}),nt.AccountSettingsModalView=nt.BasicView.extend({className:"settings-panel-wrap",template:Ut.account_settings_modal,ps_selector:".settings-panel",ps_settings:{wheelPropagation:!0},avatar_size:Ft.AVATAR_SIZES.ACCOUNT_SETTINGS_LEFT,events:{"click .background-overlay":"closeSettings","change .main-info-wrap .circle-avatar input":"changeAvatar","click .btn-choose-image":"chooseAvatar","click .btn-back":"showSettings","click .btn-back-settings":"backToMenu","click .btn-back-subsettings-account":"backToSubMenu","click .btn-emoji-panel":"openEmojiPanel","click .btn-selfie":"openWebcamPanel","click .settings-tab[data-block-name='status']":"openChangeStatus","click .settings-tabs-wrap .settings-tab:not(.delete-account):not(.settings-non-tab)":"jumpToBlock","click .tokens-wrap .settings-tab.token-wrap":"jumpToBlock","click .settings-tab.delete-account":"deleteAccount","click .settings-tab.unregister-account":"unregisterAccount","change .enabled-state input":"setEnabled","change .setting-send-chat-states input":"setTypingNotification","change .setting-use-omemo input":"setEnabledOmemo","click .btn-change-password":"showPasswordView","click .btn-reconnect":"reconnect",click:"hideResources","change .sync-account":"changeSyncSetting","click .btn-delete-settings":"deleteSettings","click .color-picker-button":"changeColor","click .btn-qr-code":"showQRCode","click .btn-revoke-token":"revokeXToken","click .devices-wrap .btn-revoke-all-tokens":"revokeAllXTokens","click .btn-manage-devices":"openDevicesWindow","click .btn-block":"openBlockWindow","click .blocked-contact input":"selectUnblock","click .btn-unblock-selected":"unblockSelected","click .btn-deselect-blocked":"deselectBlocked","click .btn-gallery-sorting":"sortFiles","click .btn-select-files":"enableFilesSelect","click .all-sessions .device-encryption.active":"openFingerprint","click .device-information-trust":"openFingerprintDevice","click .btn-purge-keys":"purgeKeys"},_initialize:function(e){e.forced_ps_container&&(this.ps_container=e.forced_ps_container),this.status_field=new nt.StatusMessageModalWidget({el:this.$(".status-wrap")[0],model:this.model}),this.updateName(),this.updateAvatar(),this.updateBlocks(),this.model.on("change:name",this.updateName,this),this.model.on("change:image",this.updateAvatar,this),this.model.on("change:gallery_token",this.updateGallery,this),this.model.on("activate deactivate",this.updateBlocks,this),this.model.on("destroy",this.remove,this),this.ps_container.on("ps-scroll-y",this.onScrollY.bind(this)),this.vcard_view=this.addChild("vcard",nt.AccountVCardModalView,{model:this.model}),this.gallery_view=this.addChild("media-gallery",nt.AccountMediaGalleryView,{model:this.model,el:this.$(".media-gallery")[0]}),this.$(".account-name .value").text(this.model.get("jid")),this.updateStatus(),this.updateView(),this.showConnectionStatus(),this.updateSynchronizationBlock(),this.model.resources.on("change",this.updateXTokens,this),this.model.resources.on("add",this.updateXTokens,this),this.model.resources.on("destroy",this.updateXTokens,this),this.model.groups.on("change",this.updateGroupsLabel,this),this.model.groups.on("add",this.updateGroupsLabel,this),this.model.groups.on("destroy",this.updateGroupsLabel,this),this.model.session.on("change:reconnecting",this.updateReconnectButton,this),this.model.session.on("change:conn_feedback",this.showConnectionStatus,this),this.model.settings.on("change:to_sync",this.updateSyncOption,this),this.model.settings.on("change:deleted",this.updateDelSettingsButton,this),this.model.settings.on("change:to_sync change:synced",this.updateSyncState,this),this.model.on("change:enabled",this.updateEnabled,this),this.model.on("update_omemo_devices",this.updateOmemoDevices,this),this.model.on("trusting_updated",this.updateOmemoDevices,this),this.model.on("trusting_updated",this.updateXTokens,this),this.model.on("xabber_trust_items_updated",this.updateTrustItems,this),this.model.settings.on("change:omemo",this.updateEnabledOmemo,this),this.model.settings.on("change:encrypted_chatstates",this.updateEncryptedChatstates,this),this.model.on("change:status_updated",this.updateStatus,this),this.model.on("activate deactivate",this.updateView,this),this.model.on("change:auth_type",this.updateView,this),this.model.on("destroy",this.remove,this),e&&!e.single_account_modal&&Vt(document).on("keyup.account_settings_modal",(t=>{t.keyCode===Ft.KEY_ESCAPE&&this.data.get("visible")&&!e.single_account_modal&&this.closeSettings()}))},render:function(e){this.$(".circle-avatar.dropdown-button").dropdown({inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"left"}),this.updateCSS(),this.updateEnabledOmemo(),this.updateEncryptedChatstates(),this.updateEnabled(),this.updateXTokens(),this.updateGroupsLabel(),this.updateTrustItems(),this.updateView(),this.$(".main-resource .client").text(Ft.CLIENT_NAME),this.$(".main-resource .resource").text(this.model.resource),this.$(".main-resource .priority").text(this.model.get("priority")),this.$(`.color-scheme input[type=radio][name=account_color][value="${this.model.settings.get("color")}"]`).prop("checked",!0);if(this.$(".dropdown-button").dropdown({inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"right"}),this.$(".panel-content-wrap").removeClass("hidden"),this.ps_container.length&&this.ps_container.perfectScrollbar(Yt.extend(this.ps_settings||{},nt.ps_settings)),this.updateOmemoDevices,this.$(".left-column").removeClass("hidden"),this.$(".right-column").addClass("hidden"),this.$(".btn-back-settings").removeClass("hidden"),this.$(".btn-back-subsettings-account").addClass("hidden"),this.$(".btn-sorting").addClass("hidden"),this.$(".settings-panel-head-title").removeClass("hidden"),this.$(".media-gallery-button.btn-more").addClass("hidden"),this.updateHeight(),this.updateBlockedLabel(),e&&e.block_name){let t=this.$(`.settings-tab[data-block-name="${e.block_name}"]`);t.length&&this.jumpToBlock({target:t[0]})}return this},updateHeight:function(){let e;this.$(".left-column").hasClass("hidden")||(e=this.$(".left-column").height()),this.$(".right-column").hasClass("hidden")||(e=this.$(".right-column").height()),this.ps_container.css("height",e+"px"),this.updateScrollBar()},updateBlockedLabel:function(){if(!this.model.blocklist||!this.model.blocklist.list)return;let e=Object.keys(this.model.blocklist.list).length,t=0===e?nt.getString("no_entries"):nt.getQuantityString("entry_count",e);this.$('.settings-tab[data-block-name="blocklist"] .settings-block-label').text(t)},onScrollY:function(){0===this.getScrollTop()?this.$(".settings-panel-head").removeClass("lined-head"):this.$(".settings-panel-head").addClass("lined-head"),this.getScrollTop()>=180?this.$(".settings-account-head").addClass("head-scrolled"):this.$(".settings-account-head").removeClass("head-scrolled")},jumpToBlock:function(e){this.jumpToBlockHandler(e)},jumpToBlockHandler:function(e){if(Vt(e.target).closest(".device-encryption").length||Vt(e.target).closest(".btn-revoke-token").length)return;let t=Vt(e.target).closest(".settings-tab"),i=this.$(".settings-block-wrap."+t.attr("data-block-name")),s=t.attr("data-block-name");s&&(this.$(".device-more-button.btn-more").hideIf("encryption"!=s),"media-gallery"!=s&&this.$(".media-gallery-button.btn-more").addClass("hidden")),"password"!==s?(this.$(".settings-block-wrap").addClass("hidden"),this.$(".left-column").addClass("hidden"),this.$(".right-column").removeClass("hidden"),i.removeClass("hidden"),this.$(".settings-panel-head span.settings-panel-head-title").text(i.attr("data-header")),"media-gallery"===s&&(this.gallery_view.$(".media-gallery-items-wrap:not(.delete-files-preview-wrap)").removeClass("select-items-state"),this.gallery_view.disableFilesSelect(),this.gallery_view.backToMain()),"blocklist"===s&&(this.$(".blocklist-tabs-wrap .tabs .indicator").remove(),this.$(".blocklist-tabs-wrap .tabs").tabs(),this.$(".blocklist-tabs-wrap .indicator").addClass("ground-color-500")),"vcard-tab"===s&&this.vcard_view.showEditView(this.$(".vcard")),"device-information"===s&&(i.attr("data-token-uid",t.attr("data-token-uid")),this.updateDeviceInformation(t.attr("data-token-uid"))),this.$(".btn-back-subsettings-account").attr("data-subblock-parent-name",""),t.closest(".right-column")&&t.attr("data-subblock-parent-name")&&(this.$(".btn-back-settings").addClass("hidden"),this.$(".btn-back-subsettings-account").removeClass("hidden"),this.$(".btn-back-subsettings-account").attr("data-subblock-parent-name",t.attr("data-subblock-parent-name"))),this.scrollToTop(),this.updateHeight()):nt.trigger("change_account_password",this.model)},backToMenu:function(e){this.backToMenuHandler(e)},backToMenuHandler:function(e){this.$(".left-column").removeClass("hidden"),this.$(".right-column").addClass("hidden"),this.scrollToTop(),this.updateHeight()},backToSubMenu:function(e){this.backToSubMenuHandler(e)},backToSubMenuHandler:function(e){let t=Vt(e.target).closest(".btn-back-subsettings-account"),i=t.attr("data-subblock-parent-name");if(!i)return void this.backToMenu(e);let s=this.$(".settings-block-wrap."+i),n=s.attr("data-parent-block");i&&this.$(".device-more-button.btn-more").hideIf("encryption"!=i),this.$(".settings-block-wrap").addClass("hidden"),s.removeClass("hidden"),this.$(".settings-panel-head span.settings-panel-head-title").text(s.attr("data-header")),n?(t.attr("data-subblock-parent-name",n),this.deselectBlocked()):(this.$(".btn-back-settings").removeClass("hidden"),this.$(".btn-back-subsettings-account").addClass("hidden")),this.scrollToTop(),this.updateHeight()},updateName:function(){this.$(".name").text(this.model.get("name")),this.$(".jid").text(this.model.get("jid")),this.updateNameCSS()},updateAvatar:function(){let e=this.model.cached_image;this.$(".circle-avatar").setAvatar(e,this.avatar_size)},updateBlocks:function(){let e=this.model.isConnected();this.$(".main-info-wrap").switchClass("disconnected",!e),this.$('.settings-tab[data-block-name="profile"]').showIf(e),this.$('.settings-tab[data-block-name="encryption"]').showIf(e),this.$(".profile-image-dropdown").showIf(e),this.$(".set-groupchat-avatar").showIf(e),this.updateGallery(),this.updateScrollBar()},updateGallery:function(){let e=this.model.isConnected();this.$('.settings-tab[data-block-name="media-gallery"]').showIf(e&&this.model.get("gallery_token"))},updateNameCSS:function(){if(!this.isVisible())return;let e=this.$(".name");e.removeAttr("style");let t=this.$(".name-wrap").width(),i=e.width(),s=22;for(;i>t&&s>12;)e.css({"font-size":s}),i=e.width(),s-=2;e.css({"margin-left":(t-i)/2})},chooseAvatar:function(){if(this.model.get("gallery_token")&&this.model.get("gallery_url")){(new nt.SetAvatarView).render({model:this.model})}else this.$(".main-info-wrap .circle-avatar input").click()},showSettings:function(){nt.body.setScreen("settings-modal",{account_block_name:null}),nt.trigger("update_placeholder")},closeSettings:function(e){nt.settings_modal_view.closeSettings()},openEmojiPanel:function(){(new nt.EmojiProfileImageView).open({model:this.model})},openWebcamPanel:function(){(new nt.WebcamProfileImageView).open({model:this.model})},changeAvatar:function(e){let t=e.target;if(!t.files.length)return;let i=t.files[0];t.value="",!(i.size>Ft.MAX_AVATAR_FILE_SIZE)||this.model.get("gallery_token")&&this.model.get("gallery_url")?i.type.startsWith("image")?(this.$(".circle-avatar").find(".preloader-wrap").addClass("visible").find(".preloader-wrapper").addClass("active"),Pt.images.getAvatarFromFile(i).done(((e,t,s)=>{e?this.model.pubAvatar({base64:e,hash:t,size:s,type:i.type,file:i},(()=>{this.$(".circle-avatar").setAvatar(e,this.avatar_size),this.$(".circle-avatar").find(".preloader-wrap").removeClass("visible").find(".preloader-wrapper").removeClass("active")}),(()=>{this.$(".circle-avatar").find(".preloader-wrap").removeClass("visible").find(".preloader-wrapper").removeClass("active"),Pt.dialogs.error(nt.getString("group_settings__error__wrong_image"))})):Pt.dialogs.error(nt.getString("group_settings__error__wrong_image"))}))):Pt.dialogs.error(nt.getString("group_settings__error__wrong_image")):Pt.dialogs.error(nt.getString("group_settings__error__avatar_too_large"))},updateCSS:function(){this.updateNameCSS()},openChangeStatus:function(){!nt.change_status_view&&(nt.change_status_view=new nt.ChangeStatusView),nt.change_status_view.open(this.model)},deleteAccount:function(){Pt.dialogs.ask(nt.getString("settings_account__button_quit_account"),nt.getString("dialog_quit_account__confirm"),[],{ok_button_text:nt.getString("button_quit")}).done((e=>{e&&this.model.deleteAccount(!0)}))},unregisterAccount:function(){nt.trigger("unregister_account",this.model)},updateStatus:function(){let e=this.model.get("status");this.$(".settings-block-wrap.status .settings-subblock-wrap .status").attr("data-status",e),this.$('.settings-tab[data-block-name="status"] .settings-block-label').text(this.model.getStatusMessage())},updateOmemoDevices:function(){if(this.model.omemo&&this.model.omemo.store){this.model.omemo.store.get("identityKey")?this.$(".btn-manage-devices").removeClass("hidden2"):this.model.omemo.store.once("change:identityKey",(()=>{this.$(".btn-manage-devices").removeClass("hidden2")}),this)}else this.$(".btn-manage-devices").addClass("hidden2")},updateView:function(){this.model.isConnected();this.$(".connection-wrap .buttons-wrap .btn-change-password").hideIf("x-token"===this.model.get("auth_type")),this.$(".connection-wrap .buttons-wrap .btn-reconnect").hideIf("x-token"===this.model.get("auth_type")),this.updateScrollBar()},updateSynchronizationBlock:function(){this.updateSyncState(),this.updateSyncOption(),this.updateDelSettingsButton()},showResources:function(e){this.$(".token-resource-wrap").hideIf(!0);let t=Vt(e.target).attr("data-resource-id");this.$(`.token-resource-wrap[data-resource-id="${t}"]`).hideIf(!1)},hideResources:function(e){Vt(e.target).hasClass("last-auth")&&Vt(e.target).hasClass("resource")||Vt(e.target).closest(".token-resource-wrap").length>0||this.$(".token-resource-wrap").hideIf(!0)},renderAllXTokens:function(){this.$(".sessions-wrap").html(""),this.$(".orphaned-fingerprints-wrap").html(""),this.$(".device-encryption-warning").attr("data-not-trusted-count",0),this.$('.settings-tab[data-block-name="devices"] .settings-block-label').text(nt.getQuantityString("settings_account__devices_subheader_label",this.model.x_tokens_list.length));let e=this.model.x_tokens_list.length,t=0;Vt(Yt.sortBy(this.model.x_tokens_list,"-last_auth")).each(((i,s)=>{let n={resource_obj:void 0,client:s.client,device:s.device||nt.getString("unknown"),token_uid:s.token_uid,ip:s.ip,last_auth:(a=s.last_auth,Pt.pretty_datetime(a,"MMM DD, YYYY")),expire:Jt(s.expire)};var a;let o=this.model.resources.findWhere({token_uid:s.token_uid});if(o&&(n.resource_obj=o.toJSON()),this.model.get("x_token")&&this.model.get("x_token").token_uid==s.token_uid){n.is_omemo=!!this.model.omemo;let i=Vt(Ut.current_token_item_modal(n));return this.$(".current-session").append(i),t++,void(t===e&&(Yt.isUndefined(this.$(".device-encryption-warning").attr("data-not-trusted-count"))||this.$(".device-encryption-warning").switchClass("hidden","0"==this.$(".device-encryption-warning").attr("data-not-trusted-count"))))}let r=Vt(Ut.token_item_modal(n));if(this.$(".all-sessions").append(r),this.model.omemo){!this.omemo_own_devices&&(this.omemo_own_devices=new nt.FingerprintsOwnDevices({model:this.model.omemo}));let i=s.omemo_id?s.omemo_id:Number(n.token_uid.slice(0,8));this.omemo_own_devices.updateTrustDevice(Number(i),r,this,(()=>{this.$(`.settings-block-wrap.device-information[data-token-uid="${n.token_uid}"]`).length&&!this.$(`.settings-block-wrap.device-information[data-token-uid="${n.token_uid}"]`).hasClass("hidden")&&this.updateDeviceInformation(n.token_uid),t++,t===e&&(Yt.isUndefined(this.$(".device-encryption-warning").attr("data-not-trusted-count"))||this.$(".device-encryption-warning").switchClass("hidden","0"==this.$(".device-encryption-warning").attr("data-not-trusted-count")))}),(()=>{t++,t===e&&(Yt.isUndefined(this.$(".device-encryption-warning").attr("data-not-trusted-count"))||this.$(".device-encryption-warning").switchClass("hidden","0"==this.$(".device-encryption-warning").attr("data-not-trusted-count")))}))}else s.omemo_id&&(r.find(".device-encryption span").text(nt.getString("settings_account__unverified_device")),r.find(".device-encryption .mdi-lock").removeClass("hidden")),t++,t===e&&(Yt.isUndefined(this.$(".device-encryption-warning").attr("data-not-trusted-count"))||this.$(".device-encryption-warning").switchClass("hidden","0"==this.$(".device-encryption-warning").attr("data-not-trusted-count")))})),this.$(".all-sessions").children().length?(this.$(".all-sessions-wrap").removeClass("hidden"),this.$(".active-sessions-label").removeClass("hidden"),this.$(".btn-revoke-all-tokens").removeClass("hidden")):(this.$(".all-sessions-wrap").addClass("hidden"),this.$(".active-sessions-label").addClass("hidden"),this.$(".btn-revoke-all-tokens").addClass("hidden")),this.$(".devices-wrap").removeClass("hidden"),!this._single_account&&this.$(".token-wrap").attr("data-subblock-parent-name",""),this.updateHeight()},updateDeviceInformation:function(e){let t=this.model.x_tokens_list.find((t=>t.token_uid===e));this.$(".device-information-last-seen").showIf(Jt(t.last_auth)).find(".device-information-text").text(Jt(t.last_auth)),this.$(".device-information-device").showIf(t.device).find(".device-information-text").text(t.device),this.$(".device-information-client").showIf(t.client).find(".device-information-text").text(t.client),this.$(".device-information-ip").showIf(t.ip).find(".device-information-text").text(t.ip),this.$(".device-information-expires").showIf(Jt(t.expire)).find(".device-information-text").text(Jt(t.expire)),this.$(".device-information-device-id").showIf(t.omemo_id).find(".device-information-text").text(t.omemo_id),this.$(".device-information-security-label").showIf(t.omemo_id);let i,s=this.model.resources.findWhere({token_uid:e});if(i=s?s.get("status_message")||s.get("status")&&nt.getString(s.get("status"))||nt.getString("account_state_connected"):this.model.get("x_token").token_uid==t.token_uid?this.model.get("status_message")||this.model.get("status")&&nt.getString(this.model.get("status"))||nt.getString("account_state_connected"):nt.getString("offline"),this.$(".device-information-status .device-information-text").text(i),this.model.get("x_token")&&(this.$(".btn-revoke-token").hideIf(this.model.get("x_token").token_uid==t.token_uid),this.$(".device-information-trust").switchClass("hidden",this.model.get("x_token").token_uid==t.token_uid)),t.omemo_id&&this.model.omemo){let i=new Vt.Deferred,s=this.model.omemo.own_devices[t.omemo_id];i.done((i=>{i.match(/.{1,8}/g)&&(i=i.match(/.{1,8}/g).join(" ")),this.$(".device-information-fingerprint").showIf(i).find(".device-information-text").text(i);let s=this.$(`.token-wrap[data-token-uid="${e}"]`);this.$(".device-information-trust").removeClass("hidden"),this.$(".device-information-trust-text").text(s.attr("data-trust-text")),this.$(".device-information-trust").attr("data-trust",s.attr("data-trust")),this.$(".device-information-trust-text").attr("data-trust",s.attr("data-trust")),this.model.get("x_token")&&this.model.get("x_token").token_uid==t.token_uid&&(this.$(".device-information-trust-text").text(nt.getString("settings_account__omemo_enabled")),this.$(".device-information-trust").addClass("hidden"),this.$(".device-information-trust").attr("data-trust","trust"),this.$(".device-information-trust-text").attr("data-trust","trust"))})),s.get("fingerprint")?i.resolve(s.get("fingerprint")):s.get("ik")?(s.set("fingerprint",s.generateFingerprint()),i.resolve(s.get("fingerprint"))):s.getBundle().then((({pk:e,spk:t,ik:n})=>{s.set("ik",Pt.fromBase64toArrayBuffer(n));let a=s.generateFingerprint();s.get("fingerprint")&&s.get("fingerprint")===a||s.set("fingerprint",a),i.resolve(s.get("fingerprint"))}))}else this.$(".device-information-fingerprint").addClass("hidden"),this.$(".device-information-trust").addClass("hidden"),this.$(".device-information-trust-text").text(""),this.$(".device-information-trust").attr("data-trust",""),this.$(".device-information-trust-text").attr("data-trust","");this.$(".settings-panel-head span.settings-panel-head-title").text(t.device)},openFingerprint:function(e){if(this.model.omemo){let t=Vt(e.target).closest(".device-encryption"),i=t.hasClass("is-own");!this.omemo_own_devices&&(this.omemo_own_devices=new nt.FingerprintsOwnDevices({model:this.model.omemo}));let s=this.model.x_tokens_list.find((e=>e.token_uid===t.closest(".token-wrap").attr("data-token-uid"))),n=s&&s.omemo_id?s.omemo_id:Number(t.closest(".token-wrap").attr("data-token-uid").slice(0,8));this.omemo_own_devices.open(Number(n),i)}},openFingerprintDevice:function(e){if(this.model.omemo){if(Vt(e.target).closest(".device-information-trust.device-information-trust-own").length)return;let t=Vt(e.target).closest(".device-information");!this.omemo_own_devices&&(this.omemo_own_devices=new nt.FingerprintsOwnDevices({model:this.model.omemo}));let i=this.model.x_tokens_list.find((e=>e.token_uid===t.attr("data-token-uid"))),s=i&&i.omemo_id?i.omemo_id:Number(t.attr("data-token-uid").slice(0,8));this.omemo_own_devices.open(Number(s),!1)}},updateXTokens:function(){if(!this.data.get("removed"))return"x-token"!==this.model.get("auth_type")?(this.$(".tokens").addClass("hidden"),void this.$(".sessions-wrap").children().html("")):void this.model.getAllXTokens((()=>{this.$(".sessions-wrap").html(""),this.model.x_tokens_list&&this.model.x_tokens_list.length&&this.renderAllXTokens()}))},updateGroupsLabel:function(){let e=this.model.groups.length,t=0===e?nt.getString("contact_circles_empty"):nt.getQuantityString("settings_account__section_header_circles",e);this.$('.settings-tab[data-block-name="circles-groups"] .settings-block-label').text(t)},updateTrustItems:function(){if(this.$(".settings-trust-items-wrap").html(""),this.model.omemo&&this.model.omemo.xabber_trust){let e=this.model.omemo.xabber_trust.get("trusted_devices"),t=0;Object.keys(e).forEach((i=>{let s=Vt(Ut.trust_item_peer({jid:i}));this.$(".settings-trust-items-wrap").append(s);let n=e[i];n.sort(((e,t)=>e.after_trust===t.after_trust?e.timestamp-t.timestamp:e.after_trust?-1:1)),n.forEach((e=>{if(e.is_me)return;let i=e.after_trust?"direct":"indirect",n={device:e,fingerprint:e.fingerprint?e.fingerprint.match(/.{1,8}/g).join(" "):null,time:Jt(e.timestamp),trust_type:nt.getString(`settings_account__trust__trust_type_${i}`)},a=Vt(Ut.trust_item_device(n));t++,s.find(".trust-item-devices-wrap").append(a)}))})),t?this.$('.settings-tab[data-block-name="trust"]').removeClass("hidden"):this.$('.settings-tab[data-block-name="trust"]').addClass("hidden")}else this.$('.settings-tab[data-block-name="trust"]').addClass("hidden")},revokeXToken:function(e){Pt.dialogs.ask(nt.getString("terminate_session_title"),nt.getString("terminate_session_text"),{},{ok_button_text:nt.getString("button_terminate")}).done((t=>{if(!t)return;let i=Vt(e.target).closest(".settings-block-wrap.device-information").attr("data-token-uid");this.model.revokeXToken([i],(()=>{if(this.model.get("x_token")){if(this.model.get("x_token").token_uid===i)return void this.model.deleteAccount(!0);this.model.getAllXTokens((()=>{this.$(".sessions-wrap").html(""),this.$(".btn-back-subsettings-account").length&&this.backToSubMenu({target:this.$(".btn-back-subsettings-account")[0]}),this.model.x_tokens_list&&this.model.x_tokens_list.length&&this.renderAllXTokens()}))}}))}))},revokeAllXTokens:function(){Pt.dialogs.ask(nt.getString("settings_account__dialog_terminate_sessions__header"),nt.getString("terminate_all_sessions_title"),null,{ok_button_text:nt.getString("button_terminate")}).done((e=>{e&&this.model.x_tokens_list&&this.model.revokeAllXTokens((()=>{this.model.getAllXTokens((()=>{this.$(".sessions-wrap").html(""),this.model.x_tokens_list&&this.model.x_tokens_list.length&&this.renderAllXTokens()}))}))}))},updateSyncState:function(){let e;e=this.model.settings.get("to_sync")?this.model.settings.get("synced")?"yes":"no":"off",this.$(".sync-status").text(nt.getString(Ft.SYNCED_STATUS_DATA[e].tip));let t=Ft.SYNCED_STATUS_DATA[e].icon,i=this.$(".sync-status-icon");i.removeClass(i.attr("data-mdiclass")).attr("data-mdiclass",t).addClass(t)},updateSyncOption:function(){this.$(".sync-account").prop("checked",this.model.settings.get("to_sync"))},updateDelSettingsButton:function(){this.$(".btn-delete-settings").hideIf(this.model.settings.get("deleted"))},updateEnabled:function(){let e=this.model.get("enabled");this.$(".enabled-state input[type=checkbox]").prop("checked",e)},updateEnabledOmemo:function(){let e=this.model.settings.get("omemo");Yt.isUndefined(e)&&(e=!1),e&&this.model.omemo_enable_view&&this.model.omemo_enable_view.close(),this.$(".setting-use-omemo input[type=checkbox]").prop("checked",e),this.$(".omemo-settings-wrap .setting-wrap:not(.omemo-enable)").switchClass("hidden",!e),this.$(".device-more-button").switchClass("hidden",!e),this.$(".label-encryption-enabled").switchClass("hidden",!e),this.$(".label-encryption-disabled").switchClass("hidden",e),this.model.omemo||this.$(".btn-manage-devices").addClass("hidden2"),this.updateHeight()},updateEncryptedChatstates:function(){let e=this.model.settings.get("encrypted_chatstates");this.$(".setting-send-chat-states input[type=checkbox]").prop("checked",e)},updateReconnectButton:function(){this.$(".btn-reconnect").switchClass("disabled",this.model.session.get("reconnecting"))},setEnabled:function(e){let t=this.$(".enabled-state input").prop("checked");this.model.save("enabled",t),t?this.model.activate():this.model.deactivate(),1!==nt.accounts.length&&this.showSettings()},setEnabledOmemo:function(){let e=this.$(".setting-use-omemo input").prop("checked");this.model.settings.save("omemo",e),this.$(".omemo-settings-wrap .setting-wrap:not(.omemo-enable)").switchClass("hidden",!e),e?this.initOmemo():this.destroyOmemo()},setTypingNotification:function(){let e=this.$(".setting-send-chat-states input").prop("checked");this.model.settings.save("encrypted_chatstates",e)},initOmemo:function(){this.model.omemo=new nt.Omemo({id:"omemo"},{account:this.model,storage_name:nt.getStorageName()+"-omemo-settings-"+this.model.get("jid"),fetch:"before"}),setTimeout((()=>{this.model.omemo.onConnected(),this.updateXTokens()}),1e3)},destroyOmemo:function(){this.model.omemo.destroy(),this.model.omemo=void 0,this.updateXTokens()},openDevicesWindow:function(){this.model.omemo?(!this.omemo_devices&&(this.omemo_devices=new nt.Fingerprints({model:this.model.omemo})),this.omemo_devices.open()):Pt.dialogs.error(nt.getString("omemo__chat__placeholder_encryption_disabled"))},purgeKeys:function(){Pt.dialogs.ask(nt.getString("omemo__dialog_purge_keys__header"),nt.getString("omemo__dialog_purge_keys__text"),null,{ok_button_text:nt.getString("omemo__dialog_purge_keys__button_purge_keys")}).done((e=>{if(e)if(this.model.omemo){let e=this.model.omemo.get("device_id");this.model.omemo.save("prekeys",{}),this.model.omemo.bundle&&(this.model.omemo.bundle.preKeys=[]),this.model.omemo.own_devices[e]&&(this.model.omemo.own_devices[e].preKeys=[],this.model.omemo.own_devices[e].set({ik:null,fingerprint:null})),this.model.getConnectionForIQ().omemo.removeItemFromNode(`${qt.NS.OMEMO}:bundles`,e)}else{let e=new nt.Omemo({id:"omemo"},{account:this.model,storage_name:nt.getStorageName()+"-omemo-settings-"+this.model.get("jid"),fetch:"before"});e.save("prekeys",{}),this.model.getConnectionForIQ().omemo.removeItemFromNode(`${qt.NS.OMEMO}:bundles`,e.get("device_id")),e.destroy()}}))},showConnectionStatus:function(){this.$(".conn-status").text(this.model.session.get("conn_feedback"))},showPasswordView:function(){this.model.password_view.show()},reconnect:function(){this.model.session.get("reconnecting")||(this.model.save("enabled",!0),this.model.connection.connected?this.model.connection.disconnect():this.model.connect())},changeSyncSetting:function(e){let t=Vt(e.target).prop("checked"),i=this.model.settings;i.save("to_sync",t),t&&i.update_timestamp()},deleteSettings:function(){Pt.dialogs.ask(nt.getString("progress_title_delete_settings"),nt.getString("delete_settings_summary"),[{name:"delete_account",checked:this.model.settings.get("to_sync"),text:nt.getString("delete_settings__optional_button__delete_synced_account")}],{ok_button_text:nt.getString("delete")}).done((e=>{e&&(e.delete_account?this.model.settings.get("to_sync")||this.model.deleteAccount(!0):this.model.settings.save("to_sync",!1))}))},changeColor:function(e){let t=Vt(e.target).closest(".color-picker-button").attr("data-color-value");this.model.settings.update_settings({color:t}),this.$el.attr("data-color",this.model.settings.get("color")),nt.accounts.trigger("account_color_updated")},showQRCode:function(){let e=new VanillaQR({url:"xmpp:"+this.model.get("jid"),noBorder:!0});Pt.dialogs.ask(nt.getString("dialog_show_qr_code__header"),null,{escape_button:!0,canvas:e.domElement,bottom_text:'<div class="name">'+this.model.get("jid")+"</div>"},{cancel_button_text:" ",ok_button_text:" "},"hidden").done((e=>{}))},openBlockWindow:function(){Pt.dialogs.ask_enter_value(nt.getString("dialog_block_xmpp_address__text"),null,{modal_class:"account-add-blocked",input_placeholder_value:nt.getString("dialog_block_xmpp_address__hint_address")},{ok_button_text:nt.getString("contact_bar_block")}).done((e=>{if(e){let t=this.model.contacts.get(e);t?t.block():this.model.contacts.blockContact(e)}}))},selectUnblock:function(e){this.children&&this.children.blocklist&&this.children.blocklist.selectUnblock()},unblockSelected:function(){this.children&&this.children.blocklist&&this.children.blocklist.unblockSelected()},deselectBlocked:function(){this.children&&this.children.blocklist&&this.children.blocklist.deselectBlocked()},sortFiles:function(e){this.gallery_view&&this.gallery_view.sortFiles(e)},enableFilesSelect:function(){this.gallery_view&&this.gallery_view.enableFilesSelect()}}),nt.AccountSettingsSingleModalView=nt.AccountSettingsModalView.extend({className:"single-account-settings-panel-wrap",template:Ut.single_account_settings_modal,render:function(e,t,i){if(!Yt.isNull(e))return;this.$el.detach(),this.parent.$(".single-account-info-wrap").append(this.$el),this.ps_container=this.parent.ps_container,this.gallery_view.render(),this._single_account=!0,this.$el.attr("data-color",this.model.settings.get("color")),this.$(".circle-avatar.dropdown-button").dropdown({inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"left"}),this.updateCSS(),this.updateEnabledOmemo(),this.updateEncryptedChatstates(),this.updateEnabled(),this.updateXTokens(),this.updateGroupsLabel(),this.updateView(),this.$(".main-resource .client").text(Ft.CLIENT_NAME),this.$(".main-resource .resource").text(this.model.resource),this.$(".main-resource .priority").text(this.model.get("priority")),this.$(`.color-scheme input[type=radio][name=account_color][value="${this.model.settings.get("color")}"]`).prop("checked",!0);if(this.$(".dropdown-button").dropdown({inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"right"}),this.$(".panel-content-wrap").removeClass("hidden"),this.ps_container.length&&this.ps_container.perfectScrollbar(Yt.extend(this.ps_settings||{},nt.ps_settings)),this.updateOmemoDevices,this.$(".left-column").removeClass("hidden"),this.$(".right-column").addClass("hidden"),this.$(".btn-back-settings").removeClass("hidden"),this.$(".btn-back-subsettings-account").addClass("hidden"),this.updateHeight(),this.updateBlockedLabel(),t&&t.account_block_name){let e=this.$(`.settings-tab[data-block-name="${t.account_block_name}"]`);e.length&&this.jumpToBlock({target:e[0]})}return this.parent.single_account_has_rendered=!0,this},jumpToBlock:function(e){this.parent.$(".left-column .settings-tabs-wrap.global-settings-tabs").addClass("hidden"),this.jumpToBlockHandler(e)},backToMenu:function(e){this.parent.$(".left-column .settings-tabs-wrap.global-settings-tabs").removeClass("hidden"),this.backToMenuHandler(e)},backToSubMenu:function(e){this.parent.$(".left-column .settings-tabs-wrap.global-settings-tabs").addClass("hidden"),this.backToSubMenuHandler(e)},updateHeight:function(){this.parent.updateHeight()}}),nt.StatusMessageWidget=nt.InputWidget.extend({field_name:"status-message",placeholder:"Set custom status",bindModelEvents:function(){this.model.on("change:status_updated",this.updateValue,this)},getValue:function(){return this.model.getStatusMessage()},setValue:function(e){this.model.setStatus(null,e)}}),nt.StatusMessageModalWidget=nt.InputWidget.extend({field_name:"status-message",placeholder:"Set custom status",template:Ut.status_message_input_widget,showInput:function(){this.$input.prop("disabled")||(this.data.set("input_mode",!0),this.updateValue())},keyUp:function(){let e=this.getValue();this.$input.switchClass("changed",this.$input.val()!==e)},bindModelEvents:function(){this.model.on("change:status_updated",this.updateValue,this)},getValue:function(){return this.model.getStatusMessage()},setValue:function(e){this.model.setStatus(null,e)}}),nt.AccountSettingsItemModalView=nt.BasicView.extend({className:"xmpp-account draggable droppable",template:Ut.global_settings_item_modal,avatar_size:Ft.AVATAR_SIZES.SETTINGS_ACCOUNT_ITEM,events:{"click .account-info-wrap":"showSettings","change .enabled-state input":"setEnabled"},_initialize:function(){this.updateEnabled(),this.updateNickname(),this.updateAvatar(),this.updateColorScheme(),this.updateSyncState(),this.showConnectionStatus(),this.model.on("change:enabled",this.updateEnabled,this),this.model.on("change:vcard",this.updateNickname,this),this.model.settings.on("change:omemo",this.updateEnabledOmemo,this),this.model.on("change:image",this.updateAvatar,this),this.model.settings.on("change:color",this.updateColorScheme,this),this.model.session.on("change:conn_feedback",this.showConnectionStatus,this),this.$el.on("drag_to",this.onDragTo.bind(this)),this.$(".move-account-to-this").on("move_xmpp_account",this.onMoveAccount.bind(this)),this.model.settings.on("change:to_sync",this.updateSyncState,this)},updateNickname:function(){let e;this.model.get("vcard")&&(this.model.get("vcard").nickname?e=this.model.get("vcard").nickname:this.model.get("vcard").first_name&&this.model.get("vcard").last_name?e=this.model.get("vcard").first_name+" "+this.model.get("vcard").last_name:this.model.get("vcard").fullname?e=this.model.get("vcard").fullname:(this.model.get("vcard").first_name||this.model.get("vcard").last_name)&&(e=this.model.get("vcard").first_name+" "+this.model.get("vcard").last_name)),e?(this.$(".nickname").text(e),this.$(".jid").text(this.model.get("jid")),this.$(".nickname-wrap").removeClass("single-row"),this.$(".jid-wrap").removeClass("hidden")):(this.$(".nickname").text(this.model.get("jid")),this.$(".nickname-wrap").addClass("single-row"),this.$(".jid-wrap").addClass("hidden"))},updateAvatar:function(){let e=this.model.cached_image;this.$(".circle-avatar").setAvatar(e,this.avatar_size)},updateColorScheme:function(){this.$el.attr("data-color",this.model.settings.get("color"))},showConnectionStatus:function(){},updateEnabled:function(){let e=this.model.get("enabled");this.$el.switchClass("disabled",!e),this.$(".enabled-state input[type=checkbox]").prop("checked",e)},setEnabled:function(e){let t=this.$(".enabled-state input").prop("checked");this.model.save("enabled",t),t?this.model.activate():this.model.deactivate()},onDragTo:function(e,t){t&&Vt(t).trigger("move_xmpp_account",this.model)},onMoveAccount:function(e,t){this.model.collection.moveBefore(t,this.model)},updateSyncState:function(){},showSettings:function(){this.model.get("enabled")?this.model.showSettingsModal():Pt.dialogs.ask_extended(nt.getString("settings_account__enable_account_label"),nt.getString("settings_account__enable_account_text",[this.model.get("jid")]),{modal_class:"modal-offline-account",no_dialog_options:!0},{ok_button_text:nt.getString("button_enable"),optional_button:"delete-account",optional_button_text:nt.getString("settings_account__button_quit_account")}).done((e=>{if(e)if("delete-account"===e){this.model._revoke_on_connect=Vt.Deferred();let e=setTimeout((()=>{this.model._revoke_on_connect.resolve()}),5e3);this.model._revoke_on_connect.done((()=>{clearTimeout(e),this.model._revoke_on_connect=void 0,this.model.deleteAccount(null,!0)})),this.model.save("enabled",!0),this.model.activate()}else this.model.save("enabled",!0),this.model.activate()}))}}),nt.SettingsAccountsModalBlockView=nt.BasicView.extend({_initialize:function(){this.updateList(),this.updateSyncState(),this.model.on("add",this.updateOneInList,this),this.model.on("update_order",this.updateList,this),this.model.on("destroy",this.onAccountRemoved,this),this.model.on("add",this.parent.updateAccounts,this.parent),this.model.on("update_order",this.parent.updateAccounts,this.parent),this.model.on("destroy",this.parent.updateAccounts,this.parent),this.$(".move-account-to-bottom").on("move_xmpp_account",this.onMoveAccountToBottom.bind(this))},updateList:function(){Yt.each(this.children,(function(e){e.detach()})),this.model.each((e=>{let t=e.get("jid"),i=this.child(t);i||(i=this.addChild(t,nt.AccountSettingsItemModalView,{model:e})),this.$(".no-accounts-tip").before(i.$el)})),this.updateHtml(),this.parent.updateScrollBar()},updateOneInList:function(e){let t=e.get("jid"),i=this.child(t);i?i.$el.detach():i=this.addChild(t,nt.AccountSettingsItemModalView,{model:e});let s=this.model.indexOf(e);0===s?this.$(".no-accounts-tip").after(i.$el):this.$(".xmpp-account").eq(s-1).after(i.$el),this.updateHtml(),this.parent.updateScrollBar()},onAccountRemoved:function(e){this.removeChild(e.get("jid")),this.updateHtml(),this.parent.updateScrollBar()},render:function(){this.updateHtml(),Yt.each(this.children,(function(e){e.updateEnabled()}))},updateHtml:function(){this.$(".no-accounts-tip").hideIf(this.model.length)},updateSyncState:function(){},onMoveAccountToBottom:function(e,t){this.model.moveToBottom(t)}}),nt.ChangeStatusView=nt.BasicView.extend({className:"modal main-modal change-status-modal",template:Ut.change_status,events:{"click .status-values li":"changeStatus","click .status-message-wrap .clear-input":"clearStatusMessageInput","keyup .status-message":"keyUp","change .apply-to-all":"changeApplyToAll"},open:function(e){this.account=e,this.highlightStatus(e.get("status")),this.restoreStatusMessageInput(),this.show()},highlightStatus:function(e){this.$('.status-values li[data-value="'+e+'"]').addClass("active").siblings().removeClass("active")},changeStatus:function(e){let t=Vt(e.target).closest("li").data("value");this.highlightStatus(t),this.do_change(),this.closeModal()},restoreStatusMessageInput:function(){let e=this.account.get("status_message");this.$(".status-message").val(e).switchClass("filled",e),e||this.$(".status-message").attr("placeholder",this.account.getStatusMessage())},clearStatusMessageInput:function(){let e=nt.getString(this.account.get("status"));this.$(".status-message").val("").attr("placeholder",e).removeClass("filled")},keyUp:function(e){if(e.keyCode===Ft.KEY_ENTER)this.do_change(),this.closeModal();else{let e=this.$(".status-message").val();this.$(".status-message").switchClass("filled",e)}},do_change:function(){let e=this.$(".status-values li.active").data("value"),t=this.$(".status-message").val();this.apply_to_all?nt.accounts.each((function(i){i.setStatus(e,t)})):this.account.setStatus(e,t)},changeApplyToAll:function(e){this.apply_to_all=Vt(e.target).prop("checked")},render:function(){this.$el.openModal({ready:this.onRender.bind(this),complete:this.close.bind(this)})},onRender:function(){Materialize&&Materialize.updateTextFields&&Materialize.updateTextFields()},onHide:function(){this.$el.detach()},close:function(){this.$(".status-message").val()||this.do_change(),this.closeModal()},closeModal:function(){this.$el.closeModal({complete:this.hide.bind(this)})}}),nt.SetAvatarView=nt.BasicView.extend({className:"modal main-modal avatar-picker background-panel",template:Ut.avatars_gallery,ps_selector:".modal-content",ps_settings:{theme:"item-list"},events:{"click .menu-btn":"updateActiveMenu","click .library-wrap .image-item":"setActiveImage",'change input[type="file"]':"onFileInputChanged","keyup input.url":"onInputChanged","click .btn-add":"addAvatarSelecter","click .btn-cancel":"close"},_initialize:function(){this.$("input.url")[0].onpaste=this.onPaste.bind(this)},render:function(e){this.model=e.model,this.contact=e.contact,this.participant=e.participant,this.parent=e.parent,this.createLibrary(),this.$(".menu-btn").removeClass("active"),this.$('.menu-btn[data-screen-name="library"]').addClass("active"),this.$(".modal-header span").text(nt.getString("account_set_avatar_header")),this.$el.openModal({ready:()=>{this.$(".modal-content").perfectScrollbar({theme:"item-list"})},complete:this.close.bind(this)});let t=this.$(".upload-wrap");t[0].ondragenter=function(e){e.preventDefault(),t.addClass("file-drop")},t[0].ondragover=function(e){e.preventDefault()},t[0].ondragleave=function(e){Vt(e.relatedTarget).closest(".upload-wrap").length||(e.preventDefault(),t.removeClass("file-drop"))},t[0].ondrop=e=>{e.preventDefault(),e.stopPropagation(),t.removeClass("file-drop");let i,s=e.dataTransfer.files||[];for(let e=0;e<s.length;e++)if(Pt.isImageType(s[e].type)){i=s[e];break}i&&this.addFile(i)}},onPaste:function(e){let t=e.clipboardData.getData("text").trim();this.$(".image-preview img")[0].onload=()=>{this.$(".image-preview img").removeClass("hidden"),this.updateActiveButton()},this.$(".image-preview img").addClass("hidden")[0].src=t,this.updateActiveButton()},updateActiveMenu:function(e){let t=e.target.getAttribute("data-screen-name");this.$(".menu-btn").removeClass("active"),this.$(`.menu-btn[data-screen-name="${t}"]`).addClass("active"),this.updateScreen(t)},updateScreen:function(e){this.$(".screen-wrap").addClass("hidden"),this.$(`.screen-wrap[data-screen="${e}"]`).removeClass("hidden"),this.scrollToTop(),this.updateActiveButton()},updateActiveButton:function(){let e=this.$(".screen-wrap:not(.hidden)"),t=!0;"library"==e.attr("data-screen")?e.find("div.active").length&&(t=!1):e.find("img:not(.hidden)").length&&(t=!1),this.$(".modal-footer .btn-add").switchClass("non-active",t)},renderFiles:function(e){this.$(".library-wrap .preloader-wrapper").remove(),e.items.length&&(this.current_items=e.items,e.items.forEach(((e,t)=>{let i=Vt('<div class="image-item"/>');i.css("background-image",`url("${e.thumbnail.url}")`),i.attr("data-src",e.file),i.attr("data-id",t),this.$(".library-wrap").append(i)})))},createLibrary:function(){this.model.testGalleryTokenExpire((()=>{let e={order_by:"-id",contexts:"avatar"};this.model.get("gallery_token")&&this.model.get("gallery_url")&&(this.$(".library-wrap").html(Dt.templates.contacts.preloader()),Vt.ajax({type:"GET",headers:{Authorization:"Bearer "+this.model.get("gallery_token")},url:this.model.get("gallery_url")+"v1/files/",dataType:"json",contentType:"application/json",data:e,success:e=>{Ot.log(e),this.renderFiles(e)},error:e=>{this.model.handleCommonGalleryErrors(e),Ot.log(e),this.$(".library-wrap .preloader-wrapper").remove()}}))}))},setActiveImage:function(e){let t=Vt(e.target);t.hasClass("active")?t.removeClass("active"):(this.$(".library-wrap>div").removeClass("active"),t.addClass("active")),this.updateActiveButton()},onFileInputChanged:function(e){let t,i=e.target;for(let e=0;e<i.files.length;e++)if(Pt.isImageType(i.files[e].type)){t=i.files[e];break}t&&this.addFile(t),Vt(i).val("")},addFile:function(e){let t=new FileReader;t.onload=t=>{let i=new Image,s=t.target.result;i.src=s,this.$('.screen-wrap[data-screen="upload"] img').detach(),this.$('.screen-wrap[data-screen="upload"]').prepend(i),this.current_file=e,this.updateActiveButton()},t.readAsDataURL(e)},onInputChanged:function(e){if(e.target.value.trim()!=this.$(".image-preview img")[0].src)if(e.target.value.trim()&&e.keyCode!==Ft.KEY_CTRL&&e.keyCode!==Ft.KEY_SHIFT&&e.keyCode!==Ft.KEY_ARROW_UP&&e.keyCode!==Ft.KEY_ARROW_DOWN&&e.keyCode!==Ft.KEY_ARROW_RIGHT&&e.keyCode!==Ft.KEY_ARROW_LEFT){let t=e.target.value.trim();this.$(".image-preview img")[0].onload=()=>{this.$(".image-preview img").removeClass("hidden"),this.updateActiveButton()},this.$(".image-preview img").addClass("hidden")[0].src=t,this.updateActiveButton()}else this.$(".image-preview img").addClass("hidden")[0].src="",this.updateActiveButton()},addAvatarSelecter:function(){this.contact?this.addNotOwnAvatar():this.addAvatar()},addAvatar:function(){if(this.$(".btn-add").hasClass("non-active"))return;let e,t=new Vt.Deferred,i=this.$(".screen-wrap:not(.hidden)");t.done(((t,i)=>{i?(e.type=e.media_type,this.model.pubAvatar(e,(()=>{this.current_items=[],this.close(),this.model.trigger("update_avatar_list")}),(()=>{Pt.dialogs.error(nt.getString("group_settings__error__wrong_image"))}))):Pt.images.getAvatarFromFile(t).done(((e,i,s)=>{e?this.model.pubAvatar({base64:e,hash:i,size:s,type:t.type,file:t},(()=>{this.close(),this.model.trigger("update_avatar_list")}),(()=>{Pt.dialogs.error(nt.getString("group_settings__error__wrong_image"))})):Pt.dialogs.error(nt.getString("group_settings__error__wrong_image"))}))})),this.$(".modal-preloader-wrap").html(Dt.templates.contacts.preloader()),this.$(".btn-add").addClass("hidden-disabled"),"library"==i.attr("data-screen")?(e=this.current_items[i.find("div.active").attr("data-id")],e.uploaded=!0,t.resolve(e,!0)):"web-address"==i.attr("data-screen")?(e=i.find("img:not(.hidden)")[0].src,this.createFileFromURL(e).then((e=>{t.resolve(e)}),(e=>{this.$(".preloader-wrapper").remove(),this.$(".btn-add").removeClass("hidden-disabled"),Pt.dialogs.error(nt.getString("group_settings__error__wrong_image"))}))):t.resolve(this.current_file)},addNotOwnAvatar:function(){if(this.$(".btn-add").hasClass("non-active"))return;let e,t=new Vt.Deferred,i=this.$(".screen-wrap:not(.hidden)"),s="";this.participant&&this.participant.get("id")&&(s="#"+this.participant.get("id")),t.done(((t,i)=>{i?(e.type=e.media_type,this.contact.pubAvatar(e,s,(()=>{this.current_items=[],this.close(),this.parent&&this.participant&&this.parent.updateMemberAvatar(this.participant,!0)}),(()=>{Pt.dialogs.error(nt.getString("group_settings__error__wrong_image"))}))):Pt.images.getAvatarFromFile(t).done(((e,i,n)=>{e?this.contact.pubAvatar({base64:e,hash:i,size:n,type:t.type,file:t},s,(()=>{this.close(),this.parent&&this.participant&&this.parent.updateMemberAvatar(this.participant,!0)}),(()=>{Pt.dialogs.error(nt.getString("group_settings__error__wrong_image"))})):Pt.dialogs.error(nt.getString("group_settings__error__wrong_image"))}))})),this.$(".modal-preloader-wrap").html(Dt.templates.contacts.preloader()),this.$(".btn-add").addClass("hidden-disabled"),"library"==i.attr("data-screen")?(e=this.current_items[i.find("div.active").attr("data-id")],e.uploaded=!0,t.resolve(e,!0)):"web-address"==i.attr("data-screen")?(e=i.find("img:not(.hidden)")[0].src,this.createFileFromURL(e).then((e=>{t.resolve(e)}),(e=>{this.$(".preloader-wrapper").remove(),this.$(".btn-add").removeClass("hidden-disabled"),Pt.dialogs.error(nt.getString("group_settings__error__wrong_image"))}))):t.resolve(this.current_file)},createFileFromURL:async function(e){let t=await fetch(e),i=await t.blob();return new File([i],"avatar.png",{type:"image/png"})},close:function(){this.$el.closeModal({complete:()=>{this.$el.detach(),this.data.set("visible",!1)}})}}),nt.WebcamProfileImageView=nt.BasicView.extend({className:"modal main-modal webcam-panel",template:Ut.webcam_panel,events:{"click .btn-save":"addAvatarSelecter","click .btn-cancel":"close"},open:function(e){this.account=e.model,this.contact=e.contact,this.participant=e.participant,this.parent=e.parent,this.registration=e.registration,this.registration_view=e.registration_view,this.width=342,this.height=256,this.streaming=!1,this.video=null,this.canvas=null,this.photo=null,this.startbutton=null,this.show(),this.startupStream()},render:function(){this.$el.openModal({complete:this.close.bind(this)})},onHide:function(){if(this.video&&this.video.srcObject&&this.video.srcObject.getTracks()){this.video.srcObject.getTracks().forEach((function(e){e.stop()})),this.video.srcObject=null}this.$el.detach()},close:function(){this.closeModal()},closeModal:function(){this.$el.closeModal({complete:this.hide.bind(this)})},startupStream:function(e){this.video=this.$(".webcam-video")[0],this.canvas=this.$("#canvas")[0],this.photo=this.$(".webcam-photo")[0],this.startbutton=this.$(".btn-take-photo")[0],navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((e=>{this.video.srcObject=e,this.video.play()})).catch((e=>{Ot.log("An error occurred: "+e)})),this.video.addEventListener("canplay",(e=>{this.streaming||(isNaN(this.height)&&(this.height=this.width/(4/3)),this.video.setAttribute("width",this.width),this.video.setAttribute("height",this.height),this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this.streaming=!0)}),!1),this.startbutton.addEventListener("click",(e=>{this.takePicture(),e.preventDefault()}),!1),this.$(".circle-icon")[0].addEventListener("click",(e=>{Vt(e.target).closest(".circle-icon").hasClass("disabled")||(this.clearPhoto(),e.preventDefault())}),!1),this.clearPhoto()},clearPhoto:function(e){let t=this.canvas.getContext("2d");t.fillStyle="#AAA",t.fillRect(0,0,this.canvas.width,this.canvas.height);let i=this.canvas.toDataURL("image/png");this.photo.setAttribute("src",i),this.$(".btn-take-photo").hideIf(!1),this.$(".btn-save").hideIf(!0),this.$(".output").hideIf(!0)},takePicture:function(e){let t=this.canvas.getContext("2d");if(this.$(".btn-take-photo").hideIf(!0),this.$(".btn-save").hideIf(!1),this.$(".output").hideIf(!1),this.width&&this.height){this.canvas.width=this.width,this.canvas.height=this.height,t.drawImage(this.video,0,0,this.width,this.height),t.globalCompositeOperation="destination-in",t.beginPath(),t.closePath(),t.fill();let e=this.canvas.toDataURL("image/png");this.photo.setAttribute("src",e)}else this.clearPhoto()},addAvatarSelecter:function(e){this.contact?this.saveNotOwnAvatar():this.saveAvatar()},saveAvatar:function(){let e=Zt.getBlobImage(this.canvas.toDataURL("image/png").replace(/^data:image\/(png|gif|jpg|webp|jpeg);base64,/,"")),t=new File([e],"avatar.png",{type:"image/png"});t.base64=this.canvas.toDataURL("image/png").replace(/^data:image\/(png|gif|jpg|webp|jpeg);base64,/,""),t&&t.base64&&(this.registration&&this.registration_view?(this.registration_view.avatar=t,this.registration_view.$(".btn-next").prop("disabled",!1),this.registration_view.$(".circle-avatar").addClass("changed"),this.registration_view.$(".circle-avatar").setAvatar(this.canvas.toDataURL("image/png").replace(/^data:image\/(png|gif|jpg|webp|jpeg);base64,/,""),this.member_details_avatar_size),this.close()):(this.$(".modal-preloader-wrap").html(Dt.templates.contacts.preloader()),this.$(".btn-save").addClass("hidden-disabled"),this.$(".circle-icon").addClass("disabled"),this.account.pubAvatar(t,(()=>{this.close()}),(()=>{Pt.dialogs.error(nt.getString("group_settings__error__wrong_image"))}))))},saveNotOwnAvatar:function(){let e=Zt.getBlobImage(this.canvas.toDataURL("image/png").replace(/^data:image\/(png|gif|jpg|webp|jpeg);base64,/,"")),t=new File([e],"avatar.png",{type:"image/png"}),i="";this.participant&&this.participant.get("id")&&(i="#"+this.participant.get("id")),t.base64=this.canvas.toDataURL("image/png").replace(/^data:image\/(png|gif|jpg|webp|jpeg);base64,/,""),t&&t.base64&&(this.$(".modal-preloader-wrap").html(Dt.templates.contacts.preloader()),this.$(".btn-save").addClass("hidden-disabled"),this.$(".circle-icon").addClass("disabled"),this.contact.pubAvatar(t,i,(()=>{this.close(),this.parent&&this.participant&&this.parent.updateMemberAvatar(this.participant,!0)}),(()=>{Pt.dialogs.error(nt.getString("group_settings__error__wrong_image"))})))}}),nt.EmojiProfileImageView=nt.BasicView.extend({className:"modal main-modal emoji-panel",template:Ut.emoji_panel,events:{"click .profile-image-background-color":"changeColor","click .avatar-wrap":"openEmojiPicker","click .close-modal":"close","click .btn-save":"addAvatarSelecter","click .btn-cancel":"close"},open:function(e){this.account=e.model,this.contact=e.contact,this.participant=e.participant,this.parent=e.parent,this.registration=e.registration,this.registration_view=e.registration_view,this.emoji_panel_view=this.addChild("emoji_picker_panel",nt.EmojiPickerView,{}),this.show()},render:function(){this.$el.openModal({complete:this.close.bind(this)})},onHide:function(){this.$el.detach()},close:function(){this.closeModal()},closeModal:function(){this.$el.closeModal({complete:this.hide.bind(this)})},openEmojiPicker:function(){this.emoji_panel_view.open(this)},changeColor:function(e){let t=Vt(e.target).data("value");this.$(".profile-image-background-color").removeClass("chosen-background-color"),Vt(e.target).addClass("chosen-background-color"),this.$(".circle-avatar").attr("class","circle-avatar"),this.$(".circle-avatar").attr("data-value",t),this.$(".circle-avatar").addClass("ground-color-"+t+"-100")},addAvatarSelecter:function(e){this.contact?this.saveNotOwnAvatar():this.saveAvatar()},saveAvatar:function(e){let t=Zt.getDefaultAvatar(this.$(".chosen-emoji").data("value"),this.$(".circle-avatar").css("background-color"),"96px EmojiFont",176,176),i=Zt.getBlobImage(t),s=new File([i],"avatar.png",{type:"image/png"});s.base64=i,this.registration&&this.registration_view?s&&s.base64&&(this.registration_view.avatar=s,this.registration_view.$(".btn-next").prop("disabled",!1),this.registration_view.$(".circle-avatar").addClass("changed"),this.registration_view.$(".circle-avatar").setAvatar(t,this.member_details_avatar_size),nt._settings.save("main_color",this.$(".circle-avatar").attr("data-value")),nt.trigger("update_main_color"),this.close()):s&&s.base64&&(this.$(".modal-preloader-wrap").html(Dt.templates.contacts.preloader()),this.$(".btn-save").addClass("hidden-disabled"),this.account.pubAvatar(s,(()=>{this.close()}),(()=>{Pt.dialogs.error(nt.getString("group_settings__error__wrong_image"))})))},saveNotOwnAvatar:function(e){let t=Zt.getBlobImage(Zt.getDefaultAvatar(this.$(".chosen-emoji").data("value"),this.$(".circle-avatar").css("background-color"),"96px EmojiFont",176,176)),i=new File([t],"avatar.png",{type:"image/png"}),s="";this.participant&&this.participant.get("id")&&(s="#"+this.participant.get("id")),i.base64=t,i&&i.base64&&(this.$(".modal-preloader-wrap").html(Dt.templates.contacts.preloader()),this.$(".btn-save").addClass("hidden-disabled"),this.contact.pubAvatar(i,s,(()=>{this.close(),this.parent&&this.participant&&this.participant.get("jid")===this.account.get("jid")&&this.parent.updateMemberAvatar(this.participant,!0)}),(()=>{Pt.dialogs.error(nt.getString("group_settings__error__wrong_image"))})))}}),nt.EmojiPickerView=nt.BasicView.extend({className:"modal main-modal emoji-panel emoji-picker",template:Ut.emoji_picker,events:{"click .emojis-bottom-tab-selector":"pickEmojiTab","click .emoji-picker-emoji":"pickEmoji","click .close-modal":"close"},open:function(){this.$el.openModal({complete:this.close.bind(this)}),this.readEmojisJSON(),this.show()},readEmojisJSON:function(){this.emojis=Ut.emojis,this.emojis.length&&(this.$(".emoji-picker-wrap").html(Ut.emoji_picker_tabs({emojis:this.emojis})),this.ps_container=this.$(".emojis-tab"),this.ps_container.length&&this.ps_container.perfectScrollbar(Yt.extend(this.ps_settings||{},nt.ps_settings)))},render:function(){},onHide:function(){this.$el.detach()},close:function(){this.closeModal()},closeModal:function(){this.$el.closeModal({complete:this.hide.bind(this)})},scrollTo:function(e){this.ps_container.each((t=>{this.ps_container[t].scrollTop=e})),this.ps_container.perfectScrollbar("update")},scrollToTop:function(){this.scrollTo(0)},pickEmojiTab:function(e){let t=Vt(e.target).data("value");this.$(".emojis-bottom-tab-selector").removeClass("chosen-emoji-selector"),Vt(e.target).addClass("chosen-emoji-selector"),this.$(".emojis-tab").removeClass("chosen-emoji-tab").addClass("hidden"),this.$(`.emojis-tab[data-value="${t}"]`).removeClass("hidden").addClass("chosen-emoji-tab"),this.scrollToTop()},pickEmoji:function(e){let t=Vt(e.target).closest(".emoji-picker-emoji").data("value");this.parent.$(".chosen-emoji").attr("data-value",t).text(t),this.close()}}),nt.ChangePasswordView=nt.BasicView.extend({className:"modal main-modal change-password-modal",template:Ut.change_password,events:{"click .btn-change":"submit","click .btn-cancel":"close","keyup input[name=password]":"keyUp"},_initialize:function(){return this.$("input[name=jid]").val(this.model.get("jid")),this.$password_input=this.$("input[name=password]"),this.data.on("change:authentication",this.updateButtons,this),nt.on("quit",this.onQuit,this),this},render:function(e){e||(e={}),this.is_login=e.login,this.token_invalidated=e.token_invalidated,this.$(".modal-header span").text(this.is_login?nt.getString("xabber_account__social_links__button_log_in"):nt.getString("button_set_pass")),this.$(".btn-cancel").text(this.is_login?nt.getString("skip"):nt.getString("cancel")),this.$(".btn-change").text(this.is_login?nt.getString("xabber_account__social_links__button_log_in"):nt.getString("set")),this.$el.openModal({use_queue:!0,ready:this.onRender.bind(this),complete:this.close.bind(this)})},onRender:function(){Materialize&&Materialize.updateTextFields&&Materialize.updateTextFields(),this.authFeedback({}),this.$password_input.val("").focus()},getActionName:function(){return this.is_login?nt.getString("login"):nt.getString("set")},keyUp:function(e){e.keyCode===Ft.KEY_ENTER&&this.submit()},submit:function(){if(this.data.get("authentication"))return void this.cancel();this.data.set("authentication",!0),this.authFeedback({});this.model.get("jid");let e=this.$password_input.val();if(!e)return this.errorFeedback({password:nt.getString("dialog_change_password__error__text_input_pass")});e=e.trim(),this.authFeedback({password:nt.getString("dialog_change_password__feedback__text_auth_with_pass")}),this.model.connection.connected?(this.model.once("deactivate",(()=>{this.setPassword(e)})),this.model.deactivate()):this.setPassword(e)},setPassword:function(e){this.model.last_msg_timestamp=0,this.model.save({auth_type:"password",password:Pt.utoa(e),enabled:!0}),this.model.auth_view=this,this.model.connect()},cancel:function(){this.data.set("authentication",!1)},updateButtons:function(){let e=this.data.get("authentication");this.$(".btn-change").text(e?nt.getString("stop"):this.getActionName())},authFeedback:function(e){this.$password_input.switchClass("invalid",e.password).siblings("span.errors").text(e.password||"")},errorFeedback:function(e){this.authFeedback(e),this.data.set("authentication",!1)},successFeedback:function(){this.data.set("authentication",!1),this.closeModal()},endAuth:function(e){this.model.save("is_new",void 0),this.successFeedback(this.model),this.model.auth_view=null},onHide:function(){this.$el.detach()},onQuit:function(){this.closeModal()},close:function(){this.is_login&&this.model.save("enabled",!1),this.token_invalidated&&this.model.deleteAccount(),this.cancel(),this.closeModal()},closeModal:function(){this.model.auth_view=null,this.$el.closeModal({complete:this.hide.bind(this)})}}),nt.ChangeAccountPasswordView=nt.BasicView.extend({className:"modal main-modal change-account-password-modal",template:Ut.change_account_password,events:{"click .btn-change":"submit","click .btn-cancel":"close","keyup input":"keyUp"},render:function(e){this.account=e.model,this.$el.openModal({ready:this.onRender.bind(this),complete:this.close.bind(this)})},onRender:function(e){this.$(".original-state").removeClass("hidden"),this.$(".success-state").addClass("hidden"),this.$old_password_input=this.$("input[name=old_password]"),this.$password_input=this.$("input[name=password]"),this.$password_confirm_input=this.$("input[name=password_confirm]"),this.authFeedback({}),this.$password_input.val(""),this.$password_confirm_input.val(""),this.$old_password_input.val("").focus(),this.keyUp()},keyUp:function(e){e&&e.keyCode===Ft.KEY_ENTER&&this.submit(),this.$old_password_input.val()&&this.$password_input.val()&&this.$password_confirm_input.val()?this.$(".btn-change").prop("disabled",!1):this.$(".btn-change").prop("disabled",!0),this.authFeedback({})},submit:function(){this.authFeedback({});let e=this.account.get("jid"),t=this.$old_password_input.val(),i=this.$password_input.val(),s=this.$password_confirm_input.val();return t?i?i!=s?this.errorFeedback({password_confirm:nt.getString("settings_account__alert_passwords_do_not_match")}):(t=t.trim(),this.authFeedback({password_confirm:nt.getString("dialog_change_password__feedback__text_auth_with_pass"),password_not_error:!0}),void(this.account.change_password_connection_manager||(this.account.change_password_view=this,this.account.change_password_connection_manager=new qt.ConnectionManager(this.account.CONNECTION_URL),this.account.change_password_connection=this.account.change_password_connection_manager.connection,this.account.change_password_connection.account=this.account,this.account.change_password_connection.register.connect_change_password(e,t,this.account.changePasswordCallback.bind(this.account))))):this.errorFeedback({password:nt.getString("dialog_change_password__error__text_input_pass")}):this.errorFeedback({old_password:nt.getString("dialog_change_password__error__text_input_pass")})},authFeedback:function(e){this.$password_input.switchClass("invalid",e.password).siblings("span.errors").text(e.password||""),this.$old_password_input.switchClass("invalid",e.old_password).siblings("span.errors").text(e.old_password||""),this.$password_confirm_input.switchClass("invalid",e.password_confirm&&!e.password_not_error).siblings("span.errors").switchClass("non-error",e.password_not_error).text(e.password_confirm||""),this.parent&&this.parent.updateHeight()},errorFeedback:function(e){this.account.change_password_connection&&this.account.change_password_connection.disconnect(),this.authFeedback(e)},successFeedback:function(){this.account.change_password_connection&&this.account.change_password_connection.disconnect(),this.$(".original-state").addClass("hidden"),this.$(".success-state").removeClass("hidden")},onHide:function(){this.$el.detach(),this.account&&this.account.unregister_account_connection_manager&&this.account.unregister_account_connection&&this.account.unregister_account_connection.disconnect()},close:function(){this.closeModal()},closeModal:function(){this.$el.closeModal({complete:this.hide.bind(this)})}}),nt.AuthView=nt.BasicView.extend({_initialize:function(){return this.$jid_input=this.$("input[name=jid]"),this.$password_input=this.$("input[name=password]"),this.data.on("change:authentication",this.updateButtons,this),this},render:function(){this.onRender()},onRender:function(){this.account=null,this.authFeedback({}),Materialize&&Materialize.updateTextFields&&Materialize.updateTextFields(),this.$jid_input.val("").focus(),this.$password_input.val(""),this.updateButtons(),this.updateOptions&&this.updateOptions()},keyUp:function(e){e.keyCode===Ft.KEY_ENTER&&this.submit()},submit:function(){if(this.data.get("authentication"))return void this.cancel();this.data.set("authentication",!0),this.authFeedback({});let e=this.$jid_input.val(),t=this.$password_input.val();if(this.data.get("registration")){let t=this.$("#new_account_domain").val()||this.$(".xmpp-server-dropdown-wrap .select-xmpp-server .property-value").text();if(!(Ft.REGISTRATION_CUSTOM_DOMAIN||Ft.REGISTRATION_DOMAINS.indexOf(t)>-1))return this.errorRegistrationFeedback({domain:nt.getString("account_auth__error__registration_custom_domain")});e=e+"@"+t}else if(this.$(".input-field-jid .xmpp-server-dropdown-wrap").length&&!this.$(".input-field-jid .xmpp-server-dropdown-wrap").hasClass("hidden")&&(this.$("#sign_in_domain")&&this.$("#sign_in_domain").val()||this.$(".xmpp-server-dropdown-wrap .select-auth-xmpp-server .property-value").text())){let t=this.$("#sign_in_domain").val()||this.$(".xmpp-server-dropdown-wrap .select-auth-xmpp-server .property-value").text();e=e+"@"+t}if(!e)return this.data.get("registration")?this.errorRegistrationFeedback({jid:nt.getString("account_auth__error__text_input_username")}):this.errorFeedback({jid:nt.getString("account_auth__error__text_input_username")});if(e=e.trim(),!t)return this.data.get("registration")?this.errorRegistrationFeedback({password:nt.getString("dialog_change_password__error__text_input_pass")}):this.errorFeedback({password:nt.getString("dialog_change_password__error__text_input_pass")});if(!(this.data.get("registration")||Ft.LOGIN_CUSTOM_DOMAIN||Ft.LOGIN_DOMAINS.indexOf(qt.getDomainFromJid(e))>-1))return this.errorFeedback({jid:nt.getString("account_auth__error__login_custom_domain")});t=t.trim();let i=e.indexOf("@");if(i<=0||i===e.length-1)return this.data.get("registration")?this.errorRegistrationFeedback({jid:nt.getString("account_auth__error__text_wrong_username")}):this.errorFeedback({jid:nt.getString("account_auth__error__text_wrong_username")});if(e=qt.getBareJidFromJid(e).toLowerCase(),nt.accounts.get(e)){if(this.data.get("registration"))return this.errorRegistrationFeedback({jid:nt.getString("settings_account__alert_account_exists")});this.errorFeedback({jid:nt.getString("settings_account__alert_account_exists")})}else this.data.get("registration")?this.registerFeedback({registration_success:!0,password:nt.getString("account_registration__feedback__text_registration")}):this.authStepperShow(),this.getWebsocketURL(e,(i=>{this.account=nt.accounts.create({jid:e,websocket_connection_url:i||Ft.CONNECTION_URL,password:Pt.utoa(t),is_new:!0},{auth_view:this}),this.data.get("registration")?this.account.connection.register.connect(e,this.account.registerCallback.bind(this.account)):this.account.trigger("start")}))},getWebsocketURL:function(e,t){if(Ft.DISABLE_LOOKUP_WS)t&&t(null);else{let i=qt.getDomainFromJid(e),s={type:"GET",url:window.location.protocol+"//"+i+"/.well-known/host-meta",dataType:"xml",success:e=>{let i=Vt(e).find("Link").attr("href");i?t&&t(i):t&&t(null)},error:()=>{t&&t(null)},timeout:5e3};Vt.ajax(s)}},cancel:function(){this.data.set("authentication",!1),this.onRender(),this.account&&(this.account.destroy(),this.account=null)},authFeedback:function(e){this.$jid_input.switchClass("invalid",e.jid).siblings("span.errors").text(e.jid||""),this.$password_input.switchClass("invalid",e.password).siblings("span.errors").text(e.password||"")},errorFeedback:function(e){this.authFeedback(e),this.data.set("authentication",!1)},authStepperShow:function(){this.authFeedback({password:nt.getString("account_auth__feedback__text_authentication")})},endAuth:function(e){this.account.save("is_new",void 0),this.successFeedback(this.account),this.account.auth_view=null},socialAuth:function(e){let t=window.location.href,i=Vt(e.target).closest(".btn-social").data("provider");"email"==i?nt.body.setScreen("login",{login_screen:"xabber"}):window.location.href=Ft.XABBER_ACCOUNT_URL+"/social/login/"+i+"/?origin="+t+"&source=Xabber Web"}}),nt.XmppLoginPanel=nt.AuthView.extend({className:"login-panel",template:Ut.xmpp_login,events:{"click .btn-log-in":"login","click .btn-sign-up-instead":"logoutAndRegister","click .btn-register-form":"openRegisterForm","click .btn-login-form":"openLoginForm","click .btn-register":"register","click .btn-cancel":"cancel","click .btn-go-back-menu":"openButtonsMenu","click .btn-go-back":"openPreviousStep","click .btn-next":"openNextStep","click .btn-skip":"registerWithoutAvatar","click .btn-finish-log-in":"endAuth","keyup input[name=register_nickname]":"keyUpNickname","keyup input[name=register_jid]":"keyUpJid","keyup input[name=jid]":"keyUpLogin","keyup input[name=password]":"keyUpLogin","keyup input[name=sign_in_domain]":"keyUpLogin","keyup input[name=register_domain]":"keyUpDomain","focusout input[name=register_domain]":"focusoutDomain","keyup input[name=register_password]":"keyUpPassword","change .circle-avatar input":"changeAvatar","change .device-metadata input[type=radio][name=device_metadata]":"setDeviceMetadata","click .auth-settings":"openLoginSettings","click .btn-choose-image":"chooseAvatar","click .btn-emoji-panel":"openEmojiPanel","click .btn-selfie":"openWebcamPanel","click #select-xmpp-server .property-variant":"changePropertyValueRegistration","click #select-auth-xmpp-server .property-variant":"changePropertyValueAuth"},__initialize:function(){return this.$nickname_input=this.$("input[name=register_nickname]"),this.$domain_input=this.$("input[name=register_domain]"),this.data.on("change:step",this.handleRegistrationStep,this),this},onRender:function(){this.data.set("step",1),this.account=null,this.stepped_auth=!0,this.stepped_auth_complete=!1,this.authFeedback({}),this.registerFeedback({}),this.$(".btn-go-back").hideIf(!1),this.$(".btn-skip").hideIf(!0),this.$nickname_input.val(""),this.$jid_input.val(""),this.$password_input.val(""),this.$(".circle-avatar").css({"background-image":""}),this.$(".circle-avatar").css({"background-color":""}),this.updateButtons(),this.updateDomains(),this.updateAuthDomains();let e={inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"left"};this.$(".property-field .select-xmpp-server .caret").dropdown(e),this.$(".property-field .select-xmpp-server .xmpp-server-item-wrap").dropdown(e),this.$(".property-field .select-auth-xmpp-server .caret").dropdown(e),this.$(".property-field .select-auth-xmpp-server .xmpp-server-item-wrap").dropdown(e),this.$(".avatar-wrap.dropdown-button").dropdown(e),this.$(".btn-register-form").hideIf(!Ft.REGISTRATION_BUTTON),this.$(".btn-login-form").hideIf(!Ft.LOGIN_CUSTOM_DOMAIN&&!Ft.LOGIN_DOMAINS.length),this.$(".register-form-jid .dropdown-content .set-custom-domain").hideIf(!Ft.REGISTRATION_CUSTOM_DOMAIN),this.$(".login-form-jid .dropdown-content .set-custom-domain").hideIf(!Ft.LOGIN_CUSTOM_DOMAIN),this.updateOptions&&this.updateOptions(),this.$("#select-xmpp-server").hideIf(nt.url_params.rkey),this.$(".select-xmpp-server .caret").hideIf(nt.url_params.rkey),this.$(`.device-metadata input[type=radio][name=device_metadata][value=${nt.settings.device_metadata}]`).prop("checked",!0),this.$(".device-metadata-description").text(nt.getString(`settings__section_privacy__${nt.settings.device_metadata}_metadata_description`)),"signup"==nt.url_params.anchor||nt.url_params.rkey?this.data.set("step",2):"signin"==nt.url_params.anchor&&this.data.set("step",0),Materialize&&Materialize.updateTextFields&&Materialize.updateTextFields()},openButtonsMenu:function(){this.data.set("step",1),this.$(".settings-block-wrap.privacy").addClass("hidden")},register:function(){this.data.get("registration")?this.cancel():(this.data.set("registration",!0),this.$jid_input.prop("disabled",!0),this.$password_input.prop("disabled",!0),this.submit())},login:function(){this.submit()},keyUpNickname:function(e){this.$nickname_input.val()?this.$(".btn-next").prop("disabled",!1):this.$(".btn-next").prop("disabled",!0),this.$nickname_input.val()&&e&&e.keyCode===Ft.KEY_ENTER&&this.openNextStep()},keyUpJid:function(e){if(clearTimeout(this._check_user_timeout),this.$(".btn-next").prop("disabled")||!e||e.keyCode!==Ft.KEY_ENTER){if(this.$jid_input.val()&&this.$jid_input.val().includes("@")&&Ft.REGISTRATION_CUSTOM_DOMAIN)return this.setCustomDomainRegistration(this.$(".register-form-jid .property-field.xmpp-server-dropdown-wrap .property-value")),this.$domain_input.val(this.$jid_input.val().split("@")[1]),this.$jid_input.val(this.$jid_input.val().split("@")[0]),void this.$domain_input.focus();if(this.$(".btn-next").prop("disabled",!0),this.$jid_input.val()){let e=/^(([^<>()[\]\\.,;:\s%@\"]+(\.[^<>()[\]\\.,;:\s%@\"]+)*)|(\".+\"))$/,t=/^((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,i=this.$domain_input.val()||this.$(".register-form-jid .xmpp-server-dropdown-wrap .property-value").text();if(!e.test(this.$jid_input.val()))return this.registerFeedback({jid:nt.getString("account_add__alert_localpart_invalid")});if(!t.test(i))return this.registerFeedback({domain:nt.getString("account_add__alert_invalid_domain")});if(this.registerFeedback({}),!(Ft.REGISTRATION_CUSTOM_DOMAIN||Ft.REGISTRATION_DOMAINS.indexOf(i)>-1))return this.registerFeedback({domain:nt.getString("account_auth__error__registration_custom_domain")});this._check_user_timeout=setTimeout((()=>{i=this.$domain_input.val()||this.$(".register-form-jid .xmpp-server-dropdown-wrap .property-value").text(),this.$(".btn-next").prop("disabled",!0),this._registration_username=this.$jid_input.val(),this._registration_domain=i,i?(this.auth_connection&&this.auth_connection.domain!=i&&this.auth_connection.disconnect(),this.auth_connection?this.auth_connection&&this.auth_connection.connected&&(this.auth_connection.register._connection._addSysHandler(this.handleRegisterStanza.bind(this.auth_connection.register),null,"iq",null,null),this.auth_connection.register._connection.send(Gt({type:"get",id:Ht(),to:this.auth_connection.register.domain}).c("query",{xmlns:qt.NS.REGISTER}).c("username").t(this._registration_username.trim()).tree())):this.getWebsocketURL(i,(e=>{this.CONNECTION_URL=e||Ft.CONNECTION_URL,this.auth_conn_manager=new qt.ConnectionManager(this.CONNECTION_URL),this.auth_connection=this.auth_conn_manager.connection,this.auth_connection.register.connect_check_user(i,this.checkUserCallback.bind(this))}))):this.registerFeedback({jid:nt.getString("account_add__alert_invalid_domain")})}),1e3)}else this.registerFeedback({})}else this.openNextStep()},keyUpPassword:function(e){this.$password_input.val()?this.$(".btn-next").prop("disabled",!1):this.$(".btn-next").prop("disabled",!0),this.$password_input.val()&&e&&e.keyCode===Ft.KEY_ENTER&&this.openNextStep()},keyUpDomain:function(){},keyUpLogin:function(e){this.$jid_input.val()&&this.$password_input.val()?this.$(".btn-log-in").prop("disabled",!1):this.$(".btn-log-in").prop("disabled",!0),this.$(".login-step-wrap").hideIf(!0),this.authFeedback({}),this.$(".input-field-jid .xmpp-server-dropdown-wrap").hideIf(this.$jid_input.val()&&this.$jid_input.val().includes("@")&&Ft.LOGIN_CUSTOM_DOMAIN),this.$jid_input.val()&&this.$jid_input.val().includes("@")&&Ft.LOGIN_CUSTOM_DOMAIN?this.$(".input-field-jid").addClass("input-field-jid-borders"):this.$(".input-field-jid").removeClass("input-field-jid-borders"),e&&this.$jid_input.val()&&this.$password_input.val()&&e.keyCode===Ft.KEY_ENTER&&this.login()},focusoutDomain:function(){this.$jid_input.val()&&(this.$domain_input.val()||this.$(".register-form-jid .xmpp-server-dropdown-wrap .property-value").text())&&this.keyUpJid()},handleRegisterStanza:function(e){let t,i,s,n,a=this._connection;if(i=e.getElementsByTagName("query"),1!==i.length)return a._changeConnectStatus(qt.Status.REGIFAIL,"unknown"),!1;for(i=i[0],t=0;t<i.childNodes.length;t++)s=i.childNodes[t],"instructions"!==s.tagName.toLowerCase()?"username"!==s.tagName.toLowerCase()?"registered"!==s.tagName.toLowerCase()?"x"!==s.tagName.toLowerCase()&&(a.register.fields[s.tagName.toLowerCase()]=qt.getText(s)):n=!0:qt.getText(s)&&(this._supports_check_user=!0):a.register.instructions=qt.getText(s);return this._supports_check_user?n?a._changeConnectStatus(qt.Status.CONFLICT,null):a._changeConnectStatus(qt.Status.REGISTERED,null):a._changeConnectStatus(qt.Status.REGIFAIL,"not-supported"),!1},checkUserCallback:function(e,t){e!==qt.Status.REGISTER&&e!==qt.Status.REGIFAIL||(!this.$('.select-xmpp-server .property-variant[data-value="'+this.auth_connection.register.domain+'"]').length&&Ft.REGISTRATION_CUSTOM_DOMAIN&&Vt("<div/>",{class:"field-jid property-variant set-default-domain"}).text(this.auth_connection.register.domain).attr("data-value",this.auth_connection.register.domain).insertBefore(this.$(".register-form-jid .dropdown-content .set-custom-domain")),this.$(".select-xmpp-server .input-group-chat-domain").addClass("hidden"),this.$("#new_account_domain").val(""),this.$(".select-xmpp-server .xmpp-server-item-wrap .property-value").text(this.auth_connection.register.domain).removeClass("hidden").attr("data-value",this.auth_connection.register.domain)),e===qt.Status.REGISTER?this.auth_connection&&this.auth_connection.connected&&(this.auth_connection.register._connection._addSysHandler(this.handleRegisterStanza.bind(this.auth_connection.register),null,"iq",null,null),this.auth_connection.register._connection.send(Gt({type:"get",id:Ht(),to:this.auth_connection.register.domain}).c("query",{xmlns:qt.NS.REGISTER}).c("username").t(this._registration_username.trim()).tree())):e===qt.Status.REGISTERED?(this.registerFeedback({user_success:!0,jid:nt.getString("xmpp_login__registration_jid_available")}),this.$(".btn-next").prop("disabled",!1)):e===qt.Status.CONFLICT?(this.registerFeedback({jid:nt.getString("xmpp_login__registration_jid_occupied")}),this.$(".btn-next").prop("disabled",!0)):e===qt.Status.CONNFAIL?(this.registerFeedback({jid:nt.getString("CONNECTION_FAILED")+": "+t}),this.$(".btn-next").prop("disabled",!0)):e===qt.Status.REGIFAIL?("not-supported"===t?(this.registerFeedback({}),this.$(".btn-next").prop("disabled",!1)):(this.registerFeedback({jid:nt.getString("xmpp_login__registration_jid_not_supported")}),this.$(".btn-next").prop("disabled",!0)),this.auth_connection.disconnect()):e===qt.Status.CONNECTING?(clearTimeout(this._check_user_connection_timeout),this._check_user_connection_timeout=setTimeout((()=>{this.auth_connection&&!this.auth_connection.connected&&(this.auth_connection._no_response=!0,this.auth_connection.disconnect())}),1e4)):e===qt.Status.DISCONNECTED&&(this.auth_connection&&clearTimeout(this.auth_connection.openCheckTimeout),this.auth_connection&&this.auth_connection._no_response&&(this.registerFeedback({jid:nt.getString("account_add__alert_invalid_domain")}),this.$(".btn-next").prop("disabled",!0)),this.auth_conn_manager=void 0,this.auth_connection=void 0)},openPreviousStep:function(){let e=this.data.get("step");"number"==typeof e&&(e--,this.data.set("step",e))},openNextStep:function(){let e=this.data.get("step");"number"==typeof e&&(e++,this.data.set("step",e))},handleRegistrationStep:function(){let e=this.data.get("step");if(-1===e&&(this.$(".server-feature .preloader-wrapper").addClass("active").addClass("visible"),this.$(".server-feature .mdi").hideIf(!0),this.$(".server-feature").removeClass("active-feature"),this.$(".server-feature .mdi").addClass(".mdi-alert").removeClass("mdi-checkbox-marked-circle"),this.$(".login-form-header").text(nt.getString("signin_server_features")),this.$(".login-form-server-features .register-form-step-header").text(nt.getString("signin_checking_features_message",[this.account.domain])),this.$(".btn-go-back-menu").hideIf(!0),this.$(".login-form-jid").hideIf(!0),this.$(".login-form-server-features").hideIf(!1),this.$(".btn-log-in").hideIf(!0),this.checkFeaturesStepper()),0===e)this.$jid_input=this.$("input[name=jid]"),this.$password_input=this.$("input[name=password]"),this.$domain_input=this.$("input[name=sign_in_domain]"),this.$domain_input.val(""),this.$jid_input.val(""),this.$password_input.val(""),this.keyUpLogin(),this.$(".login-step-wrap").hideIf(!0),this.authFeedback({}),this.resetAuthStepper(),this.$(".login-panel-form.xmpp-login-form .buttons-wrap").removeClass("server-features-additional-button"),this.$(".login-form-header").text(nt.getString("title_login_xabber_account")),this.$(".btn-go-back-menu").hideIf(!1),this.$(".login-panel-intro").hideIf(!0),this.$(".register-form").hideIf(!0),this.$(".xmpp-login-form").hideIf(!1),this.$(".login-form-jid").hideIf(!1),this.$(".login-form-server-features").hideIf(!0),this.$(".btn-log-in").hideIf(!1),this.$(".btn-finish-log-in").hideIf(!0),this.$(".btn-sign-up-instead").hideIf(!0),this.$jid_input.focus();else if(1===e)this.$(".login-panel-intro").hideIf(!1),this.$(".register-form").hideIf(!0),this.$(".xmpp-login-form").hideIf(!0);else if(2===e)this.$jid_input=this.$("input[name=register_jid]"),this.$password_input=this.$("input[name=register_password]"),this.$domain_input=this.$("input[name=register_domain]"),this.keyUpNickname(),this.$(".login-form-header").text(nt.getString("title_register_xabber_account")),this.$(".login-form-url").hideIf(!1),this.$(".login-panel-intro").hideIf(!0),this.$(".register-form").hideIf(!1),this.$(".xmpp-login-form").hideIf(!0),this.$(".register-form-nickname").hideIf(!1),this.$(".register-form-jid").hideIf(!0),this.$(".register-form-password").hideIf(!0),this.$(".register-form-picture").hideIf(!0),this.$nickname_input.focus();else if(3===e){if(!this.$nickname_input.val())return this.registerFeedback({nickname:nt.getString("dialog_add_circle__error__text_input_name")}),this.data.set("step",2);this.$(".login-form-header").text(nt.getString("hint_username")),this.$(".register-form-nickname").hideIf(!0),this.$(".register-form-jid").hideIf(!1),this.$(".register-form-password").hideIf(!0),this.$(".register-form-picture").hideIf(!0),this.keyUpJid(),this.$jid_input.focus(),this.$password_input.val("")}else if(4===e){if(!this.$jid_input.val())return this.registerFeedback({jid:nt.getString("account_auth__error__text_input_username")}),this.data.set("step",3);this.$(".login-form-header").text(nt.getString("hint_pass")),this.$(".register-form-nickname").hideIf(!0),this.$(".register-form-jid").hideIf(!0),this.$(".register-form-password").hideIf(!1),this.$(".register-form-picture").hideIf(!0),this.keyUpPassword(),this.$password_input.focus()}else if(5===e){if(!this.$password_input.val())return this.registerFeedback({password:nt.getString("dialog_change_password__error__text_input_pass")}),this.data.set("step",4);this.register()}else 6===e?(this.$(".login-form-header").text(nt.getString("xmpp_login__registration_header_avatar")),this.$(".login-form-url").hideIf(!0),this.$(".btn-go-back").hideIf(!0),this.$(".btn-skip").hideIf(!1),this.$(".register-form-nickname").hideIf(!0),this.$(".register-form-jid").hideIf(!0),this.$(".register-form-password").hideIf(!0),this.$(".register-form-picture").hideIf(!1),this.$(".btn-next").prop("disabled",!0),this.auth_connection&&this.auth_connection.disconnect(),this.account.connection&&this.account.connection.register&&this.account.connection.register._connection&&this.account.connection.register._connection.disconnect(),this.account.set("deferred_auth",!0),setTimeout((()=>{this.account.trigger("start")}),1e3)):e>=7&&(this.avatar&&this.account.pubAvatar(this.avatar,(()=>{}),(()=>{Pt.dialogs.error(nt.getString("group_settings__error__wrong_image"))})),this.successRegistrationFeedback())},registerWithoutAvatar:function(){this.successRegistrationFeedback()},logoutAndRegister:function(){this.account.session.set("delete",!0),this.account.deactivate(),this.openRegisterForm()},openRegisterForm:function(){this.data.set("step",2)},openLoginForm:function(){this.data.set("step",0)},updateButtons:function(){let e=this.data.get("authentication");this.$(".btn-log-in").prop("disabled",e)},updateDomains:function(){let e=Ft.REGISTRATION_DOMAINS;if(nt.url_params.rkey&&e.length)for(let t=e.length-1;t>=0;t--)sha1(e[t]).substr(0,10).includes(nt.url_params.rkey.substr(0,10))||e.splice(t,1);this.$(".register-form-jid .field-jid.property-variant").remove(),e.length?this.$(".register-form-jid .xmpp-server-dropdown-wrap .field-jid").text(e[0]):this.setCustomDomainRegistration(this.$(".register-form-jid .property-field.xmpp-server-dropdown-wrap .property-value")),this.$(".register-form-jid .modal-content .jid-field .set-default-domain").remove();for(let t=0;t<e.length;t++)Vt("<div/>",{class:"field-jid property-variant set-default-domain"}).text(e[t]).attr("data-value",e[t]).insertBefore(this.$(".register-form-jid .dropdown-content .set-custom-domain"))},updateAuthDomains:function(){let e=Ft.LOGIN_DOMAINS;this.$(".login-form-jid .field-jid.property-variant").remove(),e.length?this.$(".login-form-jid .xmpp-server-dropdown-wrap .field-jid").text(e[0]):this.setCustomDomainAuth(this.$(".login-form-jid .property-field.xmpp-server-dropdown-wrap .property-value")),this.$(".login-form-jid .modal-content .jid-field .set-default-domain").remove();for(let t=0;t<e.length;t++)Vt("<div/>",{class:"field-jid property-variant set-default-domain"}).text(e[t]).attr("data-value",e[t]).insertBefore(this.$(".login-form-jid .dropdown-content .set-custom-domain"))},setCustomDomainRegistration:function(e){this.$("#new_account_domain").val(""),e.addClass("hidden").text(""),this.$(".select-xmpp-server .caret").addClass("hidden"),this.$(".select-xmpp-server .input-group-chat-domain").removeClass("hidden")},setCustomDomainAuth:function(e){this.$("#sign_in_domain").val(""),e.addClass("hidden").text(""),this.$(".select-auth-xmpp-server .caret").addClass("hidden"),this.$(".select-auth-xmpp-server .input-group-chat-domain").removeClass("hidden")},changePropertyValueRegistration:function(e){let t=Vt(e.target),i=t.closest(".property-field").find(".property-value");t.hasClass("set-custom-domain")?this.setCustomDomainRegistration(i):(t.hasClass("set-default-domain")&&(this.$(".select-xmpp-server .input-group-chat-domain").addClass("hidden"),this.$("#new_account_domain").val("")),i.text(t.text()),i.removeClass("hidden").attr("data-value",t.attr("data-value")),this.$(".select-xmpp-server .caret").removeClass("hidden"),this.$jid_input.val()&&(this.$domain_input.val()||this.$(".register-form-jid .xmpp-server-dropdown-wrap .property-value").text())&&this.keyUpJid())},changePropertyValueAuth:function(e){let t=Vt(e.target),i=t.closest(".property-field").find(".property-value");t.hasClass("set-custom-domain")?this.setCustomDomainAuth(i):(t.hasClass("set-default-domain")&&(this.$(".select-auth-xmpp-server .input-group-chat-domain").addClass("hidden"),this.$("#sign_in_domain").val("")),i.text(t.text()),i.removeClass("hidden").attr("data-value",t.attr("data-value")),this.$(".select-auth-xmpp-server .caret").removeClass("hidden"))},chooseAvatar:function(){this.$(".circle-avatar input").click()},openEmojiPanel:function(){(new nt.EmojiProfileImageView).open({model:this.account,registration:!0,registration_view:this})},openWebcamPanel:function(){(new nt.WebcamProfileImageView).open({model:this.account,registration:!0,registration_view:this})},changeAvatar:function(e){let t=e.target;if(!t.files.length)return;let i=t.files[0];t.value="",i.size>Ft.MAX_AVATAR_FILE_SIZE?Pt.dialogs.error(nt.getString("group_settings__error__avatar_too_large")):i.type.startsWith("image")?Pt.images.getAvatarFromFile(i).done((e=>{e&&(i.base64=e,this.avatar=i,this.$(".btn-next").prop("disabled",!1),this.$(".circle-avatar").addClass("changed"),this.$(".circle-avatar").setAvatar(e,this.member_details_avatar_size))})):Pt.dialogs.error(nt.getString("group_settings__error__wrong_image"))},openLoginSettings:function(e){this.$(".settings-block-wrap.privacy").removeClass("hidden")},setDeviceMetadata:function(e){nt._settings.save("device_metadata",e.target.value),this.$(".device-metadata-description").text(nt.getString(`settings__section_privacy__${nt._settings.get("device_metadata")}_metadata_description`))},successFeedback:function(){this.data.set("step",-1)},checkFeaturesStepper:function(){this.$(".server-features-error").text("");let e=1e3;setTimeout((()=>{this.account.server_features.get(qt.NS.MAM)?(this.$(`.server-feature[data-xmlns="${qt.NS.MAM}"]`).addClass("active-feature"),this.$(`.server-feature[data-xmlns="${qt.NS.MAM}"] .mdi`).hideIf(!1).removeClass(".mdi-alert").addClass("mdi-checkbox-marked-circle")):this.$(`.server-feature[data-xmlns="${qt.NS.MAM}"] .mdi`).hideIf(!1).addClass(".mdi-alert").removeClass("mdi-checkbox-marked-circle"),this.$(`.server-feature[data-xmlns="${qt.NS.MAM}"] .preloader-wrapper`).removeClass("active").removeClass("visible"),setTimeout((()=>{this.account.server_features.get(qt.NS.SYNCHRONIZATION)?(this.$(`.server-feature[data-xmlns="${qt.NS.SYNCHRONIZATION}"]`).addClass("active-feature"),this.$(`.server-feature[data-xmlns="${qt.NS.SYNCHRONIZATION}"] .mdi`).hideIf(!1).removeClass(".mdi-alert").addClass("mdi-checkbox-marked-circle")):this.$(`.server-feature[data-xmlns="${qt.NS.SYNCHRONIZATION}"] .mdi`).hideIf(!1).addClass(".mdi-alert").removeClass("mdi-checkbox-marked-circle"),this.$(`.server-feature[data-xmlns="${qt.NS.SYNCHRONIZATION}"] .preloader-wrapper`).removeClass("active").removeClass("visible"),setTimeout((()=>{this.account.server_features.get(qt.NS.REWRITE)?(this.$(`.server-feature[data-xmlns="${qt.NS.REWRITE}"]`).addClass("active-feature"),this.$(`.server-feature[data-xmlns="${qt.NS.REWRITE}"] .mdi`).hideIf(!1).removeClass(".mdi-alert").addClass("mdi-checkbox-marked-circle")):this.$(`.server-feature[data-xmlns="${qt.NS.REWRITE}"] .mdi`).hideIf(!1).addClass(".mdi-alert").removeClass("mdi-checkbox-marked-circle"),this.$(`.server-feature[data-xmlns="${qt.NS.REWRITE}"] .preloader-wrapper`).removeClass("active").removeClass("visible"),setTimeout((()=>{this.account.server_features.get(qt.NS.AUTH_DEVICES)?(this.$(`.server-feature[data-xmlns="${qt.NS.AUTH_DEVICES}"]`).addClass("active-feature"),this.$(`.server-feature[data-xmlns="${qt.NS.AUTH_DEVICES}"] .mdi`).hideIf(!1).removeClass(".mdi-alert").addClass("mdi-checkbox-marked-circle")):this.$(`.server-feature[data-xmlns="${qt.NS.AUTH_DEVICES}"] .mdi`).hideIf(!1).addClass(".mdi-alert").removeClass("mdi-checkbox-marked-circle"),this.$(`.server-feature[data-xmlns="${qt.NS.AUTH_DEVICES}"] .preloader-wrapper`).removeClass("active").removeClass("visible"),setTimeout((()=>{this.account.server_features.get(qt.NS.PUBSUB)?(this.$(`.server-feature[data-xmlns="${qt.NS.PUBSUB}"]`).addClass("active-feature"),this.$(`.server-feature[data-xmlns="${qt.NS.PUBSUB}"] .mdi`).hideIf(!1).removeClass(".mdi-alert").addClass("mdi-checkbox-marked-circle")):this.$(`.server-feature[data-xmlns="${qt.NS.PUBSUB}"] .mdi`).hideIf(!1).addClass(".mdi-alert").removeClass("mdi-checkbox-marked-circle"),this.$(`.server-feature[data-xmlns="${qt.NS.PUBSUB}"] .preloader-wrapper`).removeClass("active").removeClass("visible"),setTimeout((()=>{this.account.server_features.get(qt.NS.HTTP_UPLOAD)?(this.$(`.server-feature[data-xmlns="${qt.NS.HTTP_UPLOAD}"]`).addClass("active-feature"),this.$(`.server-feature[data-xmlns="${qt.NS.HTTP_UPLOAD}"] .mdi`).hideIf(!1).removeClass(".mdi-alert").addClass("mdi-checkbox-marked-circle")):this.$(`.server-feature[data-xmlns="${qt.NS.HTTP_UPLOAD}"] .mdi`).hideIf(!1).addClass(".mdi-alert").removeClass("mdi-checkbox-marked-circle"),this.$(`.server-feature[data-xmlns="${qt.NS.HTTP_UPLOAD}"] .preloader-wrapper`).removeClass("active").removeClass("visible"),setTimeout((()=>{Ft.RECOMMENDED_DOMAIN&&6!=this.$(".server-feature.active-feature").length&&(this.$(".server-features-error").text(nt.getString("signin_not_all_features",[Ft.RECOMMENDED_DOMAIN])),this.$(".login-panel-form.xmpp-login-form .buttons-wrap").addClass("server-features-additional-button"),this.$(".btn-sign-up-instead").hideIf(!1)),6!=this.$(".server-feature.active-feature").length?(this.$(".btn-finish-log-in").text(nt.getString("signin_proceed_anyway")),this.$(".btn-finish-log-in").addClass("btn-main").removeClass("btn-main-filled")):(this.$(".btn-finish-log-in").text(nt.getString("xaccount_next")),this.$(".btn-finish-log-in").removeClass("btn-main").addClass("btn-main-filled")),this.$(".btn-finish-log-in").hideIf(!1)}),e)}),e)}),e)}),e)}),e)}),e)}),e)},endAuth:function(e){this.account.save("is_new",void 0),this.data.set("registration",!1),this.data.set("authentication",!1),!this.account.get("deferred_auth")&&nt.body.setScreen("all-chats",{right:null}),this.account.trigger("ready_to_get_roster"),this.account.auth_view=null},authFeedback:function(e){this.$jid_input.switchClass("invalid",e.jid),this.$(".login-form-jid .login-jid-error").text(e.jid||"").showIf(e.jid),this.$password_input.switchClass("invalid",e.password),this.$(".login-form-jid .login-password-error").text(e.password||"").showIf(e.password),this.$(".login-form-jid .register-form-step-description").hideIf(e.password||e.jid)},resetAuthStepper:function(){this.$(".login-step .preloader-wrapper").addClass("active").addClass("visible"),this.$(".login-step .mdi").hideIf(!0),this.$(".login-step").removeClass("active-feature"),this.$(".login-step .mdi").addClass("mdi-alert-circle").removeClass("mdi-checkbox-marked-circle")},authStepperShow:function(){this.$(".login-step-wrap").hideIf(!1),this.$(".login-step").hideIf(!0)},authStepperStart:function(){this.$(".login-step.connecting-step").hideIf(!1);let e=1e3;setTimeout((()=>{this.$(".login-step.connecting-step").addClass("active-feature"),this.$(".login-step.connecting-step .preloader-wrapper").removeClass("active").removeClass("visible"),this.$(".login-step.connecting-step .mdi").hideIf(!1).removeClass("mdi-alert-circle").addClass("mdi-checkbox-marked-circle"),this.$(".login-step.credentials-step").hideIf(!1),setTimeout((()=>{this.$(".login-step.credentials-step").addClass("active-feature"),this.$(".login-step.credentials-step .preloader-wrapper").removeClass("active").removeClass("visible"),this.$(".login-step.credentials-step .mdi").hideIf(!1).removeClass("mdi-alert-circle").addClass("mdi-checkbox-marked-circle"),setTimeout((()=>{this.account&&this.account.connection&&(Ft.TRUSTED_DOMAINS.indexOf(this.account.connection.domain)>-1?this.endAuth():(this.stepped_auth_complete=!0,this.first_features_received&&this.successFeedback()))}),e)}),e)}),e)},authStepperError:function(e,t){this.$(".login-step-wrap").hideIf(!1),this.$(".login-step.connecting-step").hideIf(!1),setTimeout((()=>{if(!e)return this.$(".login-step.connecting-step .preloader-wrapper").removeClass("active").removeClass("visible"),this.$(".login-step.connecting-step .mdi").hideIf(!1),void this.errorFeedback(t);this.$(".login-step.connecting-step").addClass("active-feature"),this.$(".login-step.connecting-step .preloader-wrapper").removeClass("active").removeClass("visible"),this.$(".login-step.connecting-step .mdi").hideIf(!1).removeClass("mdi-alert-circle").addClass("mdi-checkbox-marked-circle"),this.$(".login-step.credentials-step").hideIf(!1),setTimeout((()=>{this.$(".login-step.credentials-step .preloader-wrapper").removeClass("active").removeClass("visible"),this.$(".login-step.credentials-step .mdi").hideIf(!1),this.errorFeedback(t)}),1e3)}),1e3)},registerFeedback:function(e){e.user_success?(this.$(".register-form-jid .register-form-step-error").addClass("available").text(e.jid||"").showIf(e.jid),this.$jid_input.removeClass("invalid"),this.$(".register-form-jid .register-form-step-description").hideIf(e.jid)):e.registration_success?(this.$(".register-form-password .register-form-step-error").addClass("available").text(e.password||"").showIf(e.password),this.$password_input.removeClass("invalid"),this.$(".register-form-password .register-form-step-description").hideIf(e.password)):(this.$nickname_input.switchClass("invalid",e.nickname),this.$(".register-form-nickname.register-form-step-error").text(e.nickname||"").showIf(e.nickname),this.$(".register-form-nickname .register-form-step-description").hideIf(e.nickname),this.$jid_input.switchClass("invalid",e.jid),this.$domain_input.switchClass("invalid",e.domain),this.$(".register-form-jid .register-form-step-error").removeClass("available").text(e.jid||e.domain||"").showIf(e.jid||e.domain),this.$(".register-form-jid .register-form-step-description").hideIf(e.jid||e.domain),this.$password_input.switchClass("invalid",e.password),this.$(".register-form-password .register-form-step-error").removeClass("available").text(e.password||"").showIf(e.password),this.$(".register-form-password .register-form-step-description").hideIf(e.password))},errorRegistrationFeedback:function(e){this.registerFeedback(e),this.data.set("registration",!1),this.data.set("authentication",!1),this.$jid_input.prop("disabled",!1),this.$password_input.prop("disabled",!1),this.account&&this.account.destroy()},successRegistrationFeedback:function(){this.$jid_input.prop("disabled",!1),this.$password_input.prop("disabled",!1),this.account.set("deferred_auth",!1),nt.toolbar_view.showAllChats()}}),nt.AddAccountView=nt.XmppLoginPanel.extend({className:"modal main-modal add-account-modal",template:Ut.add_account,events:{"click .login-type":"changeLoginType","click .btn-log-in":"login","click .btn-cancel":"logout","click .btn-go-back-menu":"close","click .btn-finish-log-in":"endAuth","keyup input[name=jid]":"keyUpLogin","keyup input[name=password]":"keyUpLogin","keyup input[name=sign_in_domain]":"keyUpLogin","click .property-variant":"changePropertyValueAuth"},render:function(e){this.$el.openModal({ready:this.onRender.bind(this),complete:this.close.bind(this)})},onRender:function(){this.data.set("step",0),this.account=null,this.stepped_auth=!0,this.stepped_auth_complete=!1,this.authFeedback({}),this.$jid_input=this.$("input[name=jid]"),this.$password_input=this.$("input[name=password]"),this.$domain_input=this.$("input[name=sign_in_domain]"),this.$jid_input.val(""),this.$password_input.val(""),this.keyUpLogin(),this.updateAuthDomains(),this.$(".login-step-wrap").hideIf(!0),this.resetAuthStepper(),this.$(".login-panel-form.xmpp-login-form .buttons-wrap").removeClass("server-features-additional-button"),this.$(".modal-header").text(nt.getString("account_add")),this.$(".login-form-jid").hideIf(!1),this.$(".login-form-server-features").hideIf(!0),this.$(".btn-log-in").hideIf(!1),this.$(".btn-cancel").hideIf(!0),this.$(".btn-finish-log-in").hideIf(!0);let e={inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"left"};this.$(".property-field .select-auth-xmpp-server .caret").dropdown(e),this.$(".property-field .select-auth-xmpp-server .xmpp-server-item-wrap").dropdown(e),this.$(".login-form-jid .dropdown-content .set-custom-domain").hideIf(!Ft.LOGIN_CUSTOM_DOMAIN),Materialize&&Materialize.updateTextFields&&Materialize.updateTextFields(),this.updateButtons(),this.updateOptions&&this.updateOptions()},handleRegistrationStep:function(){-1===this.data.get("step")&&(this.$(".server-feature .preloader-wrapper").addClass("active").addClass("visible"),this.$(".server-feature .mdi").hideIf(!0),this.$(".server-feature").removeClass("active-feature"),this.$(".server-feature .mdi").addClass(".mdi-alert").removeClass("mdi-checkbox-marked-circle"),this.$(".modal-header").text(nt.getString("signin_server_features")),this.$(".login-form-jid").hideIf(!0),this.$(".login-form-server-features").hideIf(!1),this.$(".btn-log-in").hideIf(!0),this.checkFeaturesStepper())},logout:function(){this.account.session.set("delete",!0),this.account.deactivate(),this.closeModal()},endAuth:function(){this.account.save("is_new",void 0),this.data.set("authentication",!1),this.account.trigger("ready_to_get_roster"),this.account.auth_view=null,this.closeModal()},checkFeaturesStepper:function(){this.$(".server-features-error").text("");let e=1e3;setTimeout((()=>{this.account&&this.account.server_features.get(qt.NS.MAM)?(this.$(`.server-feature[data-xmlns="${qt.NS.MAM}"]`).addClass("active-feature"),this.$(`.server-feature[data-xmlns="${qt.NS.MAM}"] .mdi`).hideIf(!1).removeClass(".mdi-alert").addClass("mdi-checkbox-marked-circle")):this.$(`.server-feature[data-xmlns="${qt.NS.MAM}"] .mdi`).hideIf(!1).addClass(".mdi-alert").removeClass("mdi-checkbox-marked-circle"),this.$(`.server-feature[data-xmlns="${qt.NS.MAM}"] .preloader-wrapper`).removeClass("active").removeClass("visible"),setTimeout((()=>{this.account&&this.account.server_features.get(qt.NS.SYNCHRONIZATION)?(this.$(`.server-feature[data-xmlns="${qt.NS.SYNCHRONIZATION}"]`).addClass("active-feature"),this.$(`.server-feature[data-xmlns="${qt.NS.SYNCHRONIZATION}"] .mdi`).hideIf(!1).removeClass(".mdi-alert").addClass("mdi-checkbox-marked-circle")):this.$(`.server-feature[data-xmlns="${qt.NS.SYNCHRONIZATION}"] .mdi`).hideIf(!1).addClass(".mdi-alert").removeClass("mdi-checkbox-marked-circle"),this.$(`.server-feature[data-xmlns="${qt.NS.SYNCHRONIZATION}"] .preloader-wrapper`).removeClass("active").removeClass("visible"),setTimeout((()=>{this.account&&this.account.server_features.get(qt.NS.REWRITE)?(this.$(`.server-feature[data-xmlns="${qt.NS.REWRITE}"]`).addClass("active-feature"),this.$(`.server-feature[data-xmlns="${qt.NS.REWRITE}"] .mdi`).hideIf(!1).removeClass(".mdi-alert").addClass("mdi-checkbox-marked-circle")):this.$(`.server-feature[data-xmlns="${qt.NS.REWRITE}"] .mdi`).hideIf(!1).addClass(".mdi-alert").removeClass("mdi-checkbox-marked-circle"),this.$(`.server-feature[data-xmlns="${qt.NS.REWRITE}"] .preloader-wrapper`).removeClass("active").removeClass("visible"),setTimeout((()=>{this.account&&this.account.server_features.get(qt.NS.AUTH_DEVICES)?(this.$(`.server-feature[data-xmlns="${qt.NS.AUTH_DEVICES}"]`).addClass("active-feature"),this.$(`.server-feature[data-xmlns="${qt.NS.AUTH_DEVICES}"] .mdi`).hideIf(!1).removeClass(".mdi-alert").addClass("mdi-checkbox-marked-circle")):this.$(`.server-feature[data-xmlns="${qt.NS.AUTH_DEVICES}"] .mdi`).hideIf(!1).addClass(".mdi-alert").removeClass("mdi-checkbox-marked-circle"),this.$(`.server-feature[data-xmlns="${qt.NS.AUTH_DEVICES}"] .preloader-wrapper`).removeClass("active").removeClass("visible"),setTimeout((()=>{this.account&&this.account.server_features.get(qt.NS.PUBSUB)?(this.$(`.server-feature[data-xmlns="${qt.NS.PUBSUB}"]`).addClass("active-feature"),this.$(`.server-feature[data-xmlns="${qt.NS.PUBSUB}"] .mdi`).hideIf(!1).removeClass(".mdi-alert").addClass("mdi-checkbox-marked-circle")):this.$(`.server-feature[data-xmlns="${qt.NS.PUBSUB}"] .mdi`).hideIf(!1).addClass(".mdi-alert").removeClass("mdi-checkbox-marked-circle"),this.$(`.server-feature[data-xmlns="${qt.NS.PUBSUB}"] .preloader-wrapper`).removeClass("active").removeClass("visible"),setTimeout((()=>{this.account&&this.account.server_features.get(qt.NS.HTTP_UPLOAD)?(this.$(`.server-feature[data-xmlns="${qt.NS.HTTP_UPLOAD}"]`).addClass("active-feature"),this.$(`.server-feature[data-xmlns="${qt.NS.HTTP_UPLOAD}"] .mdi`).hideIf(!1).removeClass(".mdi-alert").addClass("mdi-checkbox-marked-circle")):this.$(`.server-feature[data-xmlns="${qt.NS.HTTP_UPLOAD}"] .mdi`).hideIf(!1).addClass(".mdi-alert").removeClass("mdi-checkbox-marked-circle"),this.$(`.server-feature[data-xmlns="${qt.NS.HTTP_UPLOAD}"] .preloader-wrapper`).removeClass("active").removeClass("visible"),setTimeout((()=>{Ft.RECOMMENDED_DOMAIN&&6!=this.$(".server-feature.active-feature").length&&this.$(".server-features-error").text(nt.getString("signin_not_all_features",[Ft.RECOMMENDED_DOMAIN])),6!=this.$(".server-feature.active-feature").length?this.$(".btn-finish-log-in").text(nt.getString("signin_proceed_anyway")):this.$(".btn-finish-log-in").text(nt.getString("xaccount_next")),this.$(".btn-finish-log-in").hideIf(!1),this.$(".btn-cancel").hideIf(!1)}),e)}),e)}),e)}),e)}),e)}),e)}),e)},onHide:function(){this.$el.detach()},close:function(){this.cancel(),this.closeModal()},closeModal:function(){this.$el.closeModal({complete:this.hide.bind(this)})}}),nt.UnregisterAccountView=nt.XmppLoginPanel.extend({className:"modal main-modal unregister-account-modal",template:Ut.unregister_account,events:{"click .login-type":"changeLoginType","click .btn-log-in":"login","click .btn-submit-unregister":"submitUnregister","click .btn-cancel":"close","keyup input[name=jid]":"keyUpLogin","keyup input[name=password]":"keyUpLogin","keyup input[name=sign_in_domain]":"keyUpLogin","change input[type=checkbox]":"keyUpLogin","click .property-variant":"changePropertyValueAuth"},render:function(e){this.account=e.model,this.$el.openModal({ready:this.onRender.bind(this),complete:this.close.bind(this)})},onRender:function(e){this.authFeedback({}),this.data.set("step",0),this.$jid_input=this.$("input[name=jid]"),this.$password_input=this.$("input[name=password]"),this.$("input[type=checkbox]").prop("checked",!1),this.$jid_input.val(""),this.$password_input.val(""),this.keyUpLogin(),Materialize&&Materialize.updateTextFields&&Materialize.updateTextFields()},keyUpLogin:function(e){let t=this.$("input[type=checkbox]:checked").length;this.$password_input.val()&&2===t?this.$(".btn-log-in").prop("disabled",!1):this.$(".btn-log-in").prop("disabled",!0),this.$jid_input.val()&&this.$jid_input.val()===`delete ${this.account.get("jid")} account`?this.$(".btn-submit-unregister").prop("disabled",!1):this.$(".btn-submit-unregister").prop("disabled",!0),this.authFeedback({})},authFeedback:function(e){this.$jid_input.switchClass("invalid",e.jid),this.$(".login-form-jid .login-jid-error").text(e.jid||"").showIf(e.jid),this.$password_input.switchClass("invalid",e.password&&!e.password_not_error),this.$(".login-form-jid .login-password-error").switchClass("non-error",e.password_not_error).text(e.password||"")},unregisterAccount:function(e,t){let i=Gt({type:"set",to:this.connection.domain,from:this.get("jid")}).c("query",{xmlns:qt.NS.REGISTER}).c("remove");this.sendIQFast(i,(t=>{e(t)}),(function(e){t&&t(e)}))},login:function(e,t){this.submit()},submit:function(){this.authFeedback({});let e=this.$password_input.val();if(!e)return this.errorFeedback({password:nt.getString("dialog_change_password__error__text_input_pass")});this.authFeedback({password:nt.getString("dialog_change_password__feedback__text_auth_with_pass"),password_not_error:!0}),this.account.unregister_account_connection_manager||(this.account.unregister_account_view=this,this.account.unregister_account_connection_manager=new qt.ConnectionManager(this.account.CONNECTION_URL),this.account.unregister_account_connection=this.account.unregister_account_connection_manager.connection,this.account.unregister_account_connection.account=this.account,this.account.unregister_account_connection.register.connect_change_password(this.account.get("jid"),e,this.account.unregisterAccountCallback.bind(this.account)))},submitUnregister:function(){return this.authFeedback({}),this.$jid_input.val()!==`delete ${this.account.get("jid")} account`?this.errorFeedback({jid:nt.getString("settings_account__unregister_jid_mismatch")}):this.account&&this.account.unregister_account_connection_manager&&this.account.unregister_account_connection?void this.account.unregister_account_connection.register.submit_unregister():(this.data.set("step",0),this.errorFeedback({password:nt.getString("settings_account__connection_broken")}))},handleRegistrationStep:function(){let e=this.data.get("step");0===e?(this.$(".login-form-step-wrap").removeClass("hidden"),this.$(".btn-log-in").removeClass("hidden"),this.$(".btn-submit-unregister").addClass("hidden"),this.$(".login-confirm-form-step-wrap").addClass("hidden"),this.$(".modal-header span").text(nt.getString("settings_account__delete_account_modal_title")),this.$(".modal-description-text").text(nt.getString("settings_account__delete_account_modal_text"))):1===e&&(this.$(".login-form-step-wrap").addClass("hidden"),this.$(".btn-log-in").addClass("hidden"),this.$(".btn-submit-unregister").removeClass("hidden"),this.$(".login-confirm-form-step-wrap").removeClass("hidden"),this.$(".modal-header span").text(nt.getString("settings_account__confirm_delete_account_modal_title")),this.$(".modal-description-text").html(nt.getString("settings_account__confirm_delete_account_modal_text",[`<nobr>delete ${this.account.get("jid")} account</nobr>`])))},endAuth:function(){},checkFeaturesStepper:function(){},onHide:function(){this.$el.detach(),this.account&&this.account.unregister_account_connection_manager&&this.account.unregister_account_connection&&this.account.unregister_account_connection.disconnect()},close:function(){this.closeModal()},closeModal:function(){this.$el.closeModal({complete:this.hide.bind(this)})}}),nt.once("start",(function(){this.xmpp_login_panel=nt.login_page.addChild("xmpp_login",this.XmppLoginPanel),this.account_settings_modal=nt.main_overlay_panel.addChild("account_settings_modal",this.Container,{classlist:"account-settings-panel"}),this.accounts=new this.Accounts(null,{storage_name:this.getStorageName()+"-accounts"}),this.accounts.fetch(),this.trigger("accounts_ready"),this.toolbar_view.addChild("accounts",this.ToolbarAccountsBlockView,{model:this.accounts,el:this.toolbar_view.$(".accounts")[0]}),this.settings_modal_view.addChild("accounts_modal",this.SettingsAccountsModalBlockView,{model:this.accounts,el:this.settings_modal_view.$(".accounts-info-wrap")[0]}),this.on("add_account",(function(){this.add_account_view||(this.add_account_view=new this.AddAccountView),this.add_account_view.show()}),this),this.on("unregister_account",(function(e){this.unregister_account_view||(this.unregister_account_view=new this.UnregisterAccountView),this.unregister_account_view.show({model:e})}),this),this.on("change_account_password",(function(e){this.change_account_password_view||(this.change_account_password_view=new this.ChangeAccountPasswordView),this.change_account_password_view.show({model:e})}),this),this.on("show_delete_files",(function(e){this.delete_files_view||(this.delete_files_view=new this.DeleteFilesFromGalleryView),this.delete_files_view.show(e)}),this),this.on("show_export_messages",(function(e){this.export_history_view||(this.export_history_view=new this.ExportChatHistoryView),this.export_history_view.show(e)}),this),Vt(window).bind("beforeunload",(function(){nt.current_voip_call&&nt.current_voip_call.reject()})),window.onbeforeunload=()=>{Yt.each(this.accounts.connected,(function(e){e.sendPresence("offline")}))},this.login_page.patchTree=function(e,t){return"xmpp"===(t.login_screen||Ft.DEFAULT_LOGIN_SCREEN)?{xmpp_login:null}:{xabber_login:null}}}),nt);const Kt=nt;var Wt=i(25108);let Xt=nt.env,ei=Xt.$,ti=(Xt._,Xt.moment),ii=Xt.Strophe;Xt.$iq;nt.ClientFeature=Backbone.Model.extend({idAttribute:"namespace"}),nt.FeatureView=nt.BasicView.extend({className:"client-feature",template:function(){this.$el.append('<div class="feature-check-icon mdi mdi-24px"/>').append('<div class="feature-name one-line"/>'),this.$(".feature-check-icon").append(Xt.templates.svg["check-circle"]())},_initialize:function(e,t){this.render(),this.model.collection.account.settings_account_modal&&this.$el.appendTo(this.model.collection.account.settings_account_modal.$(".capabilities")),e.single_account&&e.single_account.$(".capabilities").length&&this.$el.appendTo(e.single_account.$(".capabilities")),this.model.on("change",this.render,this),this.model.on("destroy",this.remove,this)},render:function(){let e=this.model.get("verbose_name"),t=this.model.get("supports");this.$(".feature-name").text(e),this.$(".feature-check-icon").showIf(t)}}),nt.ClientFeatures=Backbone.Collection.extend({model:nt.ClientFeature,initialize:function(e,t){this.account=t.account,this.account.on("render_settings",this.render,this),this.account.on("render_single_settings",this.renderSingleAccount,this),this.connection=this.account.connection;let i=uuid();"contacts"!==nt.settings.device_metadata&&"server"!==nt.settings.device_metadata||(i=constants.CLIENT_NAME),this.connection.disco.addIdentity("client","web",i,"en"),this.addFeature(ii.NS.LAST,"XEP-0012: Last Activity"),this.addFeature(ii.NS.VCARD,"XEP-0054: vCard-temp"),this.addFeature(ii.NS.RSM,"XEP-0059: Result Set Management"),this.addFeature(ii.NS.PUBSUB,"XEP-0060: Publish-Subscribe"),this.addFeature(ii.NS.REGISTER,"XEP-0077: In-Band Registration"),this.connection.disco.addFeature(ii.NS.CHATSTATES),this.addFeature(ii.NS.BLOCKING,"XEP-0191: Blocking Command"),this.addFeature(ii.NS.PING,"XEP-0199: XMPP Ping"),this.connection.disco.addFeature(ii.NS.ATTENTION,"XEP-0244: Attention"),this.addFeature(ii.NS.CARBONS,"XEP-0280: Message carbons"),this.addFeature(ii.NS.MAM,"XEP-0313: Message archive management"),this.connection.disco.addFeature(ii.NS.CHAT_MARKERS),this.connection.disco.addFeature(ii.NS.PUBSUB_AVATAR_METADATA+"+notify"),this.connection.disco.addFeature(ii.NS.PUBSUB_TRUST_SHARING_ITEMS+"+notify"),this.addFeature(ii.NS.HTTP_UPLOAD,"XEP-0363: HTTP File Upload"),this.addFeature(ii.NS.SYNCHRONIZATION,"XEP-SYNC: Client Synchronization"),this.addFeature(ii.NS.AUTH_DEVICES,"XEP-DEVICES: HOTP and Device Management"),this.addFeature(ii.NS.ARCHIVE,"XEP-ARCHIVED: Archived Chats"),this.addFeature(ii.NS.DELIVERY,"XEP-DELIVERY: Reliable message delivery"),this.addFeature(ii.NS.GROUP_CHAT,"XEP-GROUPS: Groups"),this.addFeature(ii.NS.REWRITE,"XEP-RETRACT: Message Delete and Rewrite")},addFeature:function(e,t){this.create({namespace:e,verbose_name:t});this.connection.disco.addFeature(e)},render:function(){this.models.forEach((e=>{new nt.FeatureView({model:e})}))},renderSingleAccount:function(e){e.$(".capabilities").html(""),this.models.forEach((t=>{new nt.FeatureView({model:t,single_account:e})}))}}),nt.ServerFeature=Backbone.Model.extend({idAttribute:"var"}),nt.ServerFeatures=Backbone.Collection.extend({model:nt.ServerFeature,initialize:function(e,t){this.account=t.account,this.connection=this.account.connection,this.on("add",this.onFeatureAdded,this)},request:function(){let e=ei.Deferred();e.done((e=>{this.account.cached_server_features.getAllFromCachedFeatures((t=>{t&&t.length&&!e?(t.forEach((e=>{e.var&&"caps_version"===e.var||this.create({var:e.var,from:e.from})})),this.is_cached=!0):this.connection.disco.info(this.account.domain,null,this.onInfo.bind(this)),this.connection.disco.items(this.account.domain,null,this.onItems.bind(this))}))})),this.connection.caps_ver?this.account.cached_server_features.getFromCachedFeatures("caps_version",(t=>{t&&t.ver===this.connection.caps_ver&&t.timestamp&&Date.now()/1e3-t.timestamp<86400?e.resolve():this.account.cached_server_features.putInCachedFeatures({var:"caps_version",ver:this.connection.caps_ver,timestamp:Date.now()/1e3},(()=>{e.resolve(!0)}))})):e.resolve(!0)},onItems:function(e){let t=[];ei(e).find("query item").each(((e,i)=>{let s=ei(i).attr("jid"),n=ei(i).attr("name"),a=ei(i).attr("node");a===ii.NS.GROUP_CHAT&&(t.push(s),this.account.set("groupchat_servers_list",t)),this.connection.disco.addItem(s,n,a,(()=>{})),this.connection.disco.info(s,null,this.onInfo.bind(this))}))},onInfo:function(e){let t=ei(e),i=t.attr("from"),s=this;t.find("feature").each((function(){let e=ei(this).attr("var");e===ii.NS.XABBER_NOTIFY&&i===s.connection.domain||s.create({var:e,from:i})})),t.find("x").each((function(){let e=ei(this).find('field[var="FORM_TYPE"] value');if(e.length&&e.text()===ii.NS.URLDISCO&&s.account.domain===i){let e=ei(this).find('field[var="'+ii.NS.MEDIAGALLERY+'"] value');e.length&&e.text()&&s.create({var:"media-gallery",from:e.text()})}})),!this.account.auth_view||constants.TRUSTED_DOMAINS.indexOf(this.account.connection.domain)>-1||(this.account.auth_view.first_features_received=!0,this.account.auth_view.stepped_auth_complete&&this.account.auth_view.successFeedback())},onFeatureAdded:function(e){let t=e.get("var"),i=this.account.client_features.get(t);i&&i.set("supports",!0),t!=ii.NS.SUBSCRIPTION_PREAPPROVAL&&t!=ii.NS.SYNCHRONIZATION&&this.account.cached_server_features.putInCachedFeatures({var:t,from:e.get("from")}),"media-gallery"===t&&(this.account.set("gallery_auth",!1),this.account.get("gallery_token")&&this.account.get("gallery_url")&&this.account.get("gallery_url")==e.get("from")||this.account.initGalleryAuth(e))}}),nt.Account.addInitPlugin((function(){this.client_features=new nt.ClientFeatures(null,{account:this}),this.server_features=new nt.ServerFeatures(null,{account:this})})),nt.Account.addConnPlugin((function(){this.last_stanza_timestamp=ti.now(),this.connection.deleteHandler(this._last_stanza_handler),this._last_stanza_handler=this.connection.addHandler((()=>(this.last_stanza_timestamp=ti.now(),!0))),this.connection.deleteHandler(this._pong_handler),this._pong_handler=this.connection.ping.addPingHandler((e=>(this.last_stanza_timestamp=ti.now(),this.connection.ping.pong(e),!0))),this._main_interval_worker&&this._main_interval_worker.terminate(),this._main_interval_worker=new Worker(new URL(i.p+i.u(6552),i.b)),this._main_interval_worker.onmessage=()=>{let e=(ti.now()-this.last_stanza_timestamp)/1e3;(!navigator.onLine||e>(constants.DOWNTIME_RECONNECTION_TIMEOUT||15))&&(navigator.onLine||(Wt.log("navigator: "+navigator.onLine),Wt.log("this.connection.connected: "+this.connection.connected),nt._settings.get("reconnection_logs")&&utils.callback_popup_message("this.connection.connected: "+this.connection.connected,2e3)),Wt.log("downtime main to disconnect: "+e),nt._settings.get("reconnection_logs")&&utils.callback_popup_message("downtime main to disconnect: "+e,2e3),Wt.log(this.connection.connected),this.connection.connected?this.connection.disconnect():this.connect(),this._main_interval_worker.terminate()),e>(constants.PING_SENDING_INTERVAL||10)&&(Wt.log("downtime main to ping: "+e),this.connection&&this.connection.ping.ping(this.get("domain")))},this._main_interval_worker.postMessage({}),this.server_features.request()}),!0,!0),nt.Account.addFastConnPlugin((function(){this.last_fast_stanza_timestamp=ti.now(),this.fast_connection.deleteHandler(this._last_fast_stanza_handler),this._last_fast_stanza_handler=this.fast_connection.addHandler((()=>(this.last_fast_stanza_timestamp=ti.now(),!0))),this.fast_connection.deleteHandler(this._fast_pong_handler),this._fast_pong_handler=this.fast_connection.ping.addPingHandler((e=>(this.last_fast_stanza_timestamp=ti.now(),this.fast_connection.ping.pong(e),!0))),this._fast_interval_worker&&this._fast_interval_worker.terminate(),this._fast_interval_worker=new Worker(new URL(i.p+i.u(6736),i.b)),this._fast_interval_worker.onmessage=()=>{let e=(ti.now()-this.last_fast_stanza_timestamp)/1e3;(!navigator.onLine||e>(constants.DOWNTIME_RECONNECTION_TIMEOUT||15))&&(navigator.onLine||(Wt.log("navigator: "+navigator.onLine),Wt.log("this.connection.connected: "+this.fast_connection.connected),nt._settings.get("reconnection_logs")&&utils.callback_popup_message("this.connection.connected: "+this.fast_connection.connected,2e3)),Wt.log("downtime fast to disconnect: "+e),nt._settings.get("reconnection_logs")&&utils.callback_popup_message("downtime fast to disconnect: "+e,2e3),Wt.log(this.fast_connection.connected),this.fast_connection.connected?this.fast_connection.disconnect():this.fast_connection.connect("password",this.fast_connection.jid,this.fast_connection.pass),this._fast_interval_worker.terminate()),e>(constants.PING_SENDING_INTERVAL||10)&&(Wt.log("downtime fast to ping: "+e),this.fast_connection&&this.fast_connection.ping.ping(this.get("domain")))},this._fast_interval_worker.postMessage({})}),!0,!0),nt.Account.addConnPlugin((function(){let e=this.connection.disco;this.connection.addHandler(e._onDiscoInfo.bind(e),ii.NS.DISCO_INFO,"iq","get",null,null),this.connection.addHandler(e._onDiscoItems.bind(e),ii.NS.DISCO_ITEMS,"iq","get",null,null)}),!1,!0);const si=nt;var ni=i(25108);let ai=nt.env,oi=ai.constants,ri=ai.templates.contacts,ci=ai.utils,li=ai.$,di=ai.$iq,hi=ai.$pres,gi=ai.Strophe,ui=ai._,pi=ai.moment,mi=ai.VanillaQR,_i=ai.uuid,vi=ci.images,fi=ci.emoji;nt.Contact=Backbone.Model.extend({idAttribute:"jid",defaults:{status:"offline",status_message:"",subscription:void 0,subscription_request_in:!1,subscription_request_out:!1,groups:[],group_chat:!1},initialize:function(e,t){this.on("change:group_chat",this.onChangedGroupchat,this),this.account=t.account,e.avatar&&(e.image=e.avatar,delete e.avatar);let i=ui.clone(e);i.resource?i.full_jid=i.jid+"/"+i.resource:i.group_chat&&(i.full_jid=i.jid+"/Group"),this.account&&this.account.domain===i.jid&&ui.extend(i,{server:!0,status:"online"}),i.name=i.roster_name||i.name||i.jid,i.image||(i.photo_hash="",i.image=vi.getDefaultAvatar(i.name)),this.account.blocklist.isBlocked(i.jid)&&(i.blocked=!0),this.cached_image=vi.getCachedImage(i.image),i.vcard=ci.vcard.getBlank(i.jid),this.set(i),this.onChangedGroupchat(),this.domain=gi.getDomainFromJid(this.get("jid")),!this.get("group_chat")&&this.account&&this.account.chat_settings&&this.set("group_chat",ui.contains(this.account.chat_settings.get("group_chat"),this.get("jid"))),this.hash_id=ai.b64_sha1(this.account.get("jid")+"-"+i.jid),this.resources=new nt.ContactResources(null,{contact:this}),this.on("update_avatar",this.updateAvatar,this),this.on("change:full_jid",this.updateCachedInfo,this),this.on("change:name",this.updateCachedInfo,this),this.on("change:vcard_updated",this.updateCachedInfo,this),this.on("change:roster_name",this.updateName,this),this.on("destroy",this.onDestroy,this),this.account.dfd_presence.done((()=>{this.get("blocked")||this.get("vcard_updated")||i.is_deleted||this.getVCard()}))},getStatusMessage:function(){let e=this.get("subscription"),t=(this.get("subscription_request_in"),this.get("subscription_request_out")),i="";return this.get("blocked")?i=nt.getString("action_contact_blocked"):this.get("group_chat")?this.get("group_info")?(this.get("group_info").members_num&&(i+=nt.getQuantityString("contact_groupchat_status_member",this.get("group_info").members_num)),this.get("group_info").online_members_num>0&&(i+=nt.getString("contact_groupchat_status_online",[this.get("group_info").online_members_num||0]))):i=e?this.get("status_message")||nt.getString(this.get("status")):nt.getString("contact_state_no_subscriptions"):i="from"===e?t?nt.getString("contact_state_outgoing_request"):nt.getString("chat_receives_presence_updates"):"none"===e?t?nt.getString("contact_state_outgoing_request"):nt.getString("contact_state_in_contact_list"):e?this.get("status_message")||nt.getString(this.get("status")):nt.getString("contact_state_not_in_contact_list"),i},getSubscriptionStatuses:function(){let e=this.get("subscription"),t=this.get("subscription_preapproved"),i=this.get("subscription_request_in"),s=this.get("subscription_request_out"),n="",a="",o="",r="",c="";return this.get("blocked")&&(r=nt.getString("action_contact_blocked")),"both"===e?(r=nt.getString("subscription_status_out_to"),c=nt.getString("subscription_status_in_from"),n=nt.getString("subscription_status_description_both")):"from"===e?s?(r=nt.getString("subscription_status_out_requested"),c=nt.getString("subscription_status_in_from"),n=nt.getString("subscription_status_description_out_requested_in_from")):(r=nt.getString("subscription_status_out_none"),c=nt.getString("subscription_status_in_from"),n=nt.getString("subscription_status_description_out_none_in_from")):"to"===e?i?(r=nt.getString("subscription_status_out_to"),c=nt.getString("subscription_status_in_request_incoming"),n=nt.getString("subscription_status_description_out_to_in_request_incoming")):(r=nt.getString("subscription_status_out_to"),c=nt.getString("subscription_status_in_not_allowed"),n=nt.getString("subscription_status_description_out_to_in_not_allowed"),t&&(c=nt.getString("subscription_status_is_allowed"),n=nt.getString("subscription_status_description_out_to_in_allowed"))):"none"===e?s&&i?(r=nt.getString("subscription_status_out_requested"),c=nt.getString("subscription_status_in_request_incoming"),n=nt.getString("subscription_status_description_out_requested_in_request_incoming")):s?(r=nt.getString("subscription_status_out_requested"),c=nt.getString("subscription_status_in_not_allowed"),n=nt.getString("subscription_status_description_out_requested_in_not_allowed"),t&&(c=nt.getString("subscription_status_is_allowed"),n=nt.getString("subscription_status_description_out_request_in_allowed"))):i?(r=nt.getString("subscription_status_out_none"),c=nt.getString("subscription_status_in_request_incoming"),n=nt.getString("subscription_status_description_out_none_in_request_incoming")):(r=nt.getString("subscription_status_out_none"),c=nt.getString("subscription_status_in_not_allowed"),n=nt.getString("subscription_status_description_out_none_in_not_allowed"),t&&(c=nt.getString("subscription_status_is_allowed"),n=nt.getString("subscription_status_description_out_none_in_allowed"))):e||(r=nt.getString("contact_add")),s&&(a="request"),i&&(o="request"),"to"===e&&(a="subbed"),"from"===e&&(o="subbed"),"both"===e&&(a="subbed",o="subbed"),{status_out:r,status_in:c,status_out_color:a,status_in_color:o,status_description:n}},getIcon:function(){return this.get("blocked")?"blocked":this.get("invitation")?"group-invite":this.get("group_chat")?this.get("jid").includes("redmine_issue_")?"task":this.get("private_chat")?"group-private":this.get("incognito_chat")?"group-incognito":"group-public":this.get("server")?"server":this.get("bot")?"bot":void 0},updateAvatar:function(){this.account.cached_roster.getFromRoster(this.get("jid"),(e=>{e&&this.get("photo_hash")===e.photo_hash||this.getVCard()}))},getVCard:function(e){let t=this.get("jid"),i=ui.isFunction(e);this.account.getConnectionForIQ().vcard.get(t,(s=>{if(s.group_info){let e=this.get("group_info")||{};e=ui.extend(e,s.group_info),this.set({group_info:e}),delete s.group_info}let n={vcard:s,vcard_updated:pi.now(),name:this.get("roster_name")};n.name||(this.get("group_chat")?n.name=s.nickname||this.get("name"):n.name=s.nickname||(s.first_name+" "+s.last_name).trim()||s.fullname||t),(!this.get("avatar_priority")||this.get("avatar_priority")<=oi.AVATAR_PRIORITIES.VCARD_AVATAR)&&(s.photo.image?(n.avatar_priority=oi.AVATAR_PRIORITIES.VCARD_AVATAR,n.image=s.photo.image):n.image=vi.getDefaultAvatar(n.name),this.cached_image=vi.getCachedImage(n.image)),this.set(n),i&&e(s)}),(function(){i&&e(null)}))},updateCachedInfo:function(){this.account.cached_roster.getFromRoster(this.get("jid"),(e=>{e=e||{};let t={jid:this.get("jid"),in_roster:ui.isUndefined(this.get("in_roster"))?e.in_roster:this.get("in_roster"),groups:this.get("groups"),subscription:ui.isUndefined(this.get("subscription"))?e.subscription:this.get("subscription"),roster_name:ui.isUndefined(this.get("roster_name"))?e.roster_name:this.get("roster_name"),subscription_request_out:this.get("subscription_request_out"),subscription_request_in:this.get("subscription_request_in"),name:this.get("name"),vcard_updated:this.get("vcard_updated")},i=this.get("full_jid");(this.get("photo_hash")||this.get("image"))&&ui.extend(t,{photo_hash:this.get("photo_hash")||this.account.getAvatarHash(this.get("image")),avatar_priority:this.get("avatar_priority"),avatar:this.get("image")}),i&&(t.resource=gi.getResourceFromJid(i)),this.account.cached_roster.putInRoster(t)}))},onChangedGroupchat:function(){this.get("group_chat")&&this.get("removed")&&nt.error("removed contact became groupchat"),this.get("group_chat")&&(this.set("full_jid",this.get("jid")+"/Group"),this.updateCounters(),this.participants=new nt.Participants(null,{contact:this}))},onDestroy:function(){this.account&&this.account.groupchat_settings&&this.participants&&(this.participants.reset(),this.account.groupchat_settings.resetParticipantsList(this.get("jid")))},getBlockedParticipants:function(e,t){let i=di({type:"get",to:this.get("full_jid")||this.get("jid")}).c("query",{xmlns:gi.NS.GROUP_CHAT+"#block"});this.account.sendFast(i,e,t)},updateCounters:function(){nt.toolbar_view.recountAllMessageCounter()},getLastSeen:function(){if("offline"==this.get("status")){if(!gi.getNodeFromJid(this.get("jid")))return void this.set({status_message:"Server"});let e=di({type:"get",to:this.get("jid")}).c("query",{xmlns:gi.NS.LAST});this.account.sendIQFast(e,(e=>{let t=this.getLastSeenStatus(e);return"offline"==this.get("status")&&this.set({status_message:t}),this}))}},getMyInfo:function(e){this.participants.participantsRequest({id:"",properties:!0},(t=>{let i=li(li(t).find("query user")),s=this.account.chat_settings.getAvatarInfoById(i.find("id").text());i.length&&this.participants&&this.participants.createFromStanza(i,{my_info:!0}),s&&s.avatar_hash==this.my_info.get("avatar")&&this.my_info.set("b64_avatar",s.avatar_b64),this.trigger("update_my_info"),this.participants.participantsRequest({id:""},(t=>{let i=this.account.parseDataForm(li(t).find(`x[xmlns="${gi.NS.DATAFORM}"]`));this.my_rights=i,this.trigger("permissions_changed"),e&&e()}))}))},getAvatar:function(e,t,i,s){let n=this.get("jid"),a=di({type:"get",to:n}).c("pubsub",{xmlns:gi.NS.PUBSUB}).c("items",{node:t}).c("item",{id:e});this.account.sendIQFast(a,(e=>{let t=li(e).find("data").text();""==t?s&&s(nt.getString("pubsub__error__text_empty_node")):i&&i(t)}))},pubAvatar:function(e,t,i,s){let n=new li.Deferred;if(n.done(((n,a)=>{if(a){let a=n.hash||e.hash||sha1(e.base64),o=di({type:"set",to:this.get("jid")}).c("pubsub",{xmlns:gi.NS.PUBSUB}).c("publish",{node:gi.NS.PUBSUB_AVATAR_METADATA+t}).c("item",{id:a}).c("metadata",{xmlns:gi.NS.PUBSUB_AVATAR_METADATA}).c("info",{bytes:n.size,id:a,type:n.type,url:n.file});n.thumbnails&&n.thumbnails.forEach((e=>{o.c("thumbnail",{xmlns:gi.NS.PUBSUB_AVATAR_METADATA_THUMBNAIL,url:e.url,width:e.width,height:e.height}).up()})),this.account.sendIQFast(o,(()=>{i&&i(a)}),(function(e){s&&s(e)}))}else{let a=e.hash||sha1(e.base64),o=di({type:"set",to:this.get("jid")}).c("pubsub",{xmlns:gi.NS.PUBSUB}).c("publish",{node:gi.NS.PUBSUB_AVATAR_DATA+t}).c("item",{id:a}).c("data",{xmlns:gi.NS.PUBSUB_AVATAR_DATA}).t(n),r=di({type:"set",to:this.get("jid")}).c("pubsub",{xmlns:gi.NS.PUBSUB}).c("publish",{node:gi.NS.PUBSUB_AVATAR_METADATA+t}).c("item",{id:a}).c("metadata",{xmlns:gi.NS.PUBSUB_AVATAR_METADATA}).c("info",{bytes:e.size,id:a,type:e.type});this.account.sendIQFast(o,(()=>{this.account.sendIQFast(r,(()=>{i&&i(a)}),(function(e){s&&s(e)}))}),(e=>{s&&s(e)}))}})),e.uploaded)n.resolve(e,!0);else if(this.account.get("gallery_token")&&this.account.get("gallery_url")&&!e.generated&&!e.uploaded){let t=e.name?e:e.file;this.account.uploadAvatar(t,(i=>{i.thumbnails&&i.thumbnails.length||i.file?(i.type=t.type,n.resolve(i,!0)):n.resolve(e.base64)}),(t=>{n.resolve(e.base64)}))}else n.resolve(e.base64)},getLastSeenStatus:function(e){let t=li(e).children("query").attr("seconds"),i=pi.now()-1e3*t;return this.set({last_seen:i}),nt.pretty_last_seen(t)},pres:function(e){let t=hi({to:this.get("jid"),type:e});return"subscribe"===e&&t.c("nick",{xmlns:gi.NS.NICK}).t(this.account.getOwnNickname()),this.account.sendPres(t),this},pushInRoster:function(e,t,i){e||(e={});let s=e.name||this.get("roster_name"),n=e.groups||this.get("groups"),a=di({type:"set"}).c("query",{xmlns:gi.NS.ROSTER}).c("item",{jid:this.get("jid"),name:s});return ui.each(n,(function(e){a.c("group").t(e).up()})),this.account.sendIQFast(a,t,i),this.set("known",!0),this.set("removed",!1),this},removeFromRoster:function(e,t){if(!this.get("removed")){let i=di({type:"set"}).c("query",{xmlns:gi.NS.ROSTER}).c("item",{jid:this.get("jid"),subscription:"remove"});this.account.cached_roster.removeFromRoster(this.get("jid")),this.account.sendIQFast(i,e,t),this.set("known",!1),this.set("removed",!0),this.get("group_chat")&&(this.set("group_chat",!1),this.participants.reset(),this.account.groupchat_settings.resetParticipantsList(this.get("jid")))}return this},acceptRequest:function(e){this.pres("subscribed"),e&&e()},askRequest:function(e){this.pres("subscribe"),e&&e()},blockRequest:function(e){this.block(e)},declineRequest:function(e){this.pres("unsubscribed"),this.removeFromRoster(e)},declineSubscription:function(){this.pres("unsubscribe"),this.set("subscription_request_out",!1)},declineSubscribe:function(){this.pres("unsubscribed"),!this.account.server_features.get(gi.NS.SUBSCRIPTION_PREAPPROVAL)&&this.set("subscription_preapproved",!1)},deleteWithDialog:function(){let e=this.get("group_chat"),t=e?nt.getString("group_remove"):nt.getString("remove_contact"),i=e?nt.getString("group_remove_confirm",[this.get("name").bold()]):nt.getString("contact_delete_confirm_short",[this.get("name").bold()]),s=e?null:[{name:"delete_history",checked:!1,text:nt.getString("delete_contact__label_delete_history")}];ci.dialogs.ask(t,i,s,{ok_button_text:nt.getString("delete")}).done((t=>{if(t)if(e){let e=this.domain,t=gi.getNodeFromJid(this.get("jid")),i=di({to:e,type:"set"}).c("query",{xmlns:`${gi.NS.GROUP_CHAT}#delete`}).t(t);this.account.sendIQFast(i,(()=>{this.declineSubscription();let e=this.account.chats.getChat(this);this.removeFromRoster(),e.trigger("close_chat"),nt.body.setScreen("all-chats",{right_contact:"",right:void 0})}))}else{let e=this.account.chats.getChat(this);this.removeFromRoster(),t.delete_history&&(e.retractAllMessages(!1),e.deleteFromSynchronization(),nt.body.setScreen("all-chats",{right_contact:"",right:void 0})),nt.trigger("clear_search")}}))},blockWithDialog:function(){let e=this.get("group_chat"),t=this,i=e?nt.getString("block_group__header"):nt.getString("contact_block"),s={ok_button_text:nt.getString("contact_bar_block")},n=nt.getString("block_contact_confirm_short",[this.get("name").bold()]);e||(s.optional_button=nt.getString("contact_block_and_delete"),n+=`\n${nt.getString("block_contact_warning",[this.get("jid")])}`),ci.dialogs.ask(i,n,null,s).done((function(i){if(i){if(!e){let e=t.account.chats.getChat(t);"block & delete"===i&&(t.removeFromRoster(),e.retractAllMessages(!1),e.deleteFromSynchronization(),e.set("active",!1))}t.blockRequest(),nt.trigger("clear_search"),e||nt.body.setScreen("all-chats",{right_contact:"",right:void 0})}}))},unblockWithDialog:function(){let e=this;ci.dialogs.ask(nt.getString("chat_settings__button_unblock_contact"),nt.getString("unblock_contact_confirm_short",[this.get("name")]),null,{ok_button_text:nt.getString("contact_bar_unblock")}).done((function(t){t&&(e.unblock(),nt.trigger("clear_search"))}))},block:function(e,t){let i=di({type:"set"}).c("block",{xmlns:gi.NS.BLOCKING}).c("item",{jid:this.get("jid")});this.account.sendIQFast(i,e,t),this.set("blocked",!0),this.set("known",!1)},unblock:function(e,t){let i=di({type:"set"}).c("unblock",{xmlns:gi.NS.BLOCKING}).c("item",{jid:this.get("jid")});this.account.sendIQFast(i,e,t),this.set("blocked",!1)},setActiveStateSendInterval:function(){let e=$msg({to:this.get("jid"),type:"chat"}).c("active",{xmlns:gi.NS.CHATSTATES});clearTimeout(this._sending_active_chatstate_timeout),clearInterval(this._sending_active_chatstate_interval),this._sending_active_chatstate_timeout=setTimeout((()=>{this._sending_active_chatstate_interval=setInterval((()=>{this.account.sendMsg(e)}),oi.PRESENT_INTERVAL)}),oi.PRESENT_INTERVAL)},handlePresence:function(e){let t=li(e),i=e.getAttribute("type"),s=t.find(`x[xmlns="${gi.NS.VCARD_UPDATE}"]`);s.length&&this.get("avatar_priority")&&this.get("avatar_priority")<=oi.AVATAR_PRIORITIES.VCARD_AVATAR&&(this.set("photo_hash",s.find("photo").text()),this.trigger("update_avatar"));let n=li(e).find(`x[xmlns="${gi.NS.GROUP_CHAT}"]`);if(n.length>0&&n.children().length){this.set("full_jid",t.attr("from")),this.get("group_chat")||(this.set("group_chat",!0),this.account.chat_settings.updateGroupChatsList(this.get("jid"),this.get("group_chat")));let i=this.parseGroupInfo(li(e)),s=this.get("group_info")||{};ui.extend(s,i),this.set("group_info",s),this.get("roster_name")||s.name===this.get("name")||this.set("name",s.name),this.set({status:s.status,status_updated:pi.now(),status_message:s.members_num+" members"+nt.getString("contact_groupchat_status_online",[s.online_members_num||0])})}if("subscribe"===i)this.set("subscription_request_in",!0),this.get("subscription_preapproved")?this.pres("subscribed"):this.trigger("presence",this,"subscribe");else if("subscribed"===i)this.get("group_chat")&&(this.get("subscription_request_out")||this.get("subscription")),this.get("subscription"),this.trigger("presence",this,"subscribed");else if("unsubscribe"===i){if(this.set("subscription_request_in",!1),this.get("group_chat")){let e=this.account.chats.getChat(this),t=this.get("sync_deleted");this.removeFromRoster(),t?e.trigger("close_chat"):e.deleteFromSynchronization((()=>{e.trigger("close_chat")}),(()=>{e.trigger("close_chat")}))}}else if("unsubscribed"===i)this.set("subscription_request_out",!1);else{let s=e.getAttribute("from"),n=gi.getResourceFromJid(s),a=Number(t.find("priority").text()),o=t.find("show").text()||"online",r=t.find("status"),c=r.text();ui.isNaN(a)&&(a=0),clearTimeout(this._reset_status_timeout);let l=this.resources.get(n);if("unavailable"===i)this.set({last_seen:pi.now()}),l&&l.destroy();else{this.set({last_seen:void 0});let e={resource:n,priority:a,status:o};r.length&&(e.status_message=c),l?l.set(e):l=this.resources.create(e)}}},parseGroupInfo:function(e){let t=this.get("jid"),i=e.find(`x[xmlns="${gi.NS.GROUP_CHAT}"]`),s=i.find("name").text(),n=i.find("membership"),a=e.children("show").text()||("unavailable"===e.attr("type")?"unavailable":"online"),o=e.children("status").text(),r=i.find("privacy").text(),c=i.find("index"),l=i.find("description"),d=Number(i.find("pinned-message").text()),h=this.get("pinned_message")?this.get("pinned_message").get("stanza_id"):0,g=i.find("parent-chat").text()||!1,u=Number(i.find("members").text()),p=i.find("present"),m={jid:t,name:s,status_msg:o,privacy:r,status:a,members_num:u};c.length&&(m.searchable=c.text()),n.length&&(m.model=n.text()),l.length&&(m.description=l.text()),p.length&&(m.online_members_num=Number(p.text())),g&&this.set("private_chat",g),"incognito"===r&&this.set("incognito_chat",!0);let _,v=this.account.chats.get(this.hash_id);return i.find("pinned-message").length&&h!=d&&(v&&(v.item_view&&!v.item_view.content&&(v.item_view.content=new nt.ChatContentView({chat_item:v.item_view})),_=v.item_view.content.$pinned_message),_&&(d?this.getMessageByStanzaId(d,(e=>{this.parsePinnedMessage(e,_)})):(this.set("pinned_message",void 0),this.parsePinnedMessage(void 0,_)))),m},getAllRights:function(e){let t=di({type:"get",to:this.get("full_jid")||this.get("jid")}).c("query",{xmlns:`${gi.NS.GROUP_CHAT}#rights`});this.account.sendIQFast(t,(t=>{let i=li(t).find("permission"),s=li(t).find("restriction");this.all_rights={permissions:i,restrictions:s},e&&e()}))},getMessageByStanzaId:function(e,t,i){i=i||{};let s=_i(),n=this.account,a=n.fast_connection&&!n.fast_connection.disconnecting&&n.fast_connection.authenticated&&n.fast_connection.connected&&"offline"!==n.get("status")?n.fast_connection:n.connection,o=n.chats.getChat(this,i.encrypted&&"encrypted"),r=this.get("group_chat")?this.get("full_jid")||this.get("jid"):this.account.get("jid"),c=di({type:"set",to:r}).c("query",{xmlns:gi.NS.MAM,queryid:s}).c("x",{xmlns:gi.NS.DATAFORM,type:"submit"}).c("field",{var:"FORM_TYPE",type:"hidden"}).c("value").t(gi.NS.MAM).up().up().c("field",{var:"ids"}).c("value").t(e).up().up();if(this.account.server_features.get(gi.NS.ARCHIVE)){c.c("field",{var:"conversation-type"});let e=o.get("sync_type")?o.get("sync_type"):o.getConversationType(o);c.c("value").t(e).up().up()}let l=a.addHandler((e=>{let i=li(e);return i.find("result").attr("queryid")===s&&t&&t(i),!0}),gi.NS.MAM);this.account.sendIQFast(c,(()=>{a.deleteHandler(l)}),(()=>{a.deleteHandler(l)}))},MAMRequest:function(e,t,i){let s,n=this.account,a=e.fast&&n.fast_connection&&!n.fast_connection.disconnecting&&n.fast_connection.authenticated&&n.fast_connection.connected&&"offline"!==n.get("status"),o=a?n.fast_connection:n.connection,r=this,c=n.chats.getChat(r,e.encrypted&&"encrypted"),l=[],d=_i(),h=r&&r.get("group_chat"),g=!0;if(delete e.fast,s=di(h?{type:"set",to:r.get("full_jid")||r.get("jid")}:{type:"set"}),s.c("query",{xmlns:gi.NS.MAM,queryid:d}).c("x",{xmlns:gi.NS.DATAFORM,type:"submit"}).c("field",{var:"FORM_TYPE",type:"hidden"}).c("value").t(gi.NS.MAM).up().up(),this.account.server_features.get(gi.NS.ARCHIVE)){s.c("field",{var:"conversation-type"});let t=c.get("sync_type")?c.get("sync_type"):c.getConversationType(c);s.c("value").t(t).up().up(),s.c("field",{var:"with-tags"}),e.filter_image&&s.c("value").t("image").up(),e.filter_video&&s.c("value").t("video").up(),e.filter_voice&&s.c("value").t("voice").up(),e.filter_files&&s.c("value").t("document").up(),s.up()}h||s.c("field",{var:"with"}).c("value").t(this.get("jid")).up().up(),e.var&&e.var.forEach((e=>{s.c("field",{var:e.var}).c("value").t(e.value).up().up()})),s.up().cnode(new gi.RSM(e).toXML());let u=new li.Deferred;n.chats.onStartedMAMRequest(u),u.done((function(){let e=o.addHandler((function(e){if(r&&h==r.get("group_chat")){li(e).find("result").attr("queryid")===d&&l.push(e)}else l=[],g=!1;return!0}),gi.NS.MAM),c=function(i){o.deleteHandler(e),n.chats.onCompletedMAMRequest(u);let s=li(i).find(`fin[xmlns="${gi.NS.MAM}"]`);if(s.length&&s.attr("queryid")===d){let e=new gi.RSM({xml:s.find("set")[0]});e.complete="true"===s.attr("complete"),t&&t(g,l,e)}},p=function(t){o.deleteHandler(e),nt.error("MAM error"),nt.error(t),n.chats.onCompletedMAMRequest(u),i&&i(t)};a?n.sendFast(s,c,p):n.sendIQ(s,c,p)}))},getFilesFromStanza:function(e,t){let i,s=(e=t&&t.cached_message?e.find("content"):e.find("message")).children(`reference[xmlns="${gi.NS.REFERENCE}"]`).length?e.children(`reference[xmlns="${gi.NS.REFERENCE}"]`):e.children("envelope").children("content").children(`reference[xmlns="${gi.NS.REFERENCE}"]`),n=[];return t&&t.cached_stanza_id&&(i=t.cached_stanza_id),s.each(((t,s)=>{let a=li(s);if("mutable"===a.attr("type")){let t=a.find(`file-sharing[xmlns="${gi.NS.FILES}"]`).first();if(t.length){let s=t.parent(`voice-message[xmlns="${gi.NS.VOICE_MESSAGE}"]`).length?"voice":"file",a=t.children("file"),o={},r=[];if(t.children("sources").children("uri").each(((e,t)=>{r.push(li(t).text())})),o={name:a.children("name").text(),hash:a.children(`hash[xmlns="${gi.NS.HASH}"]`).text(),size:a.children("size").text(),uniqueid:e.attr("id")||i,created_at:a.children("created").text(),thumbnail:a.children(`thumbnail[xmlns="${gi.NS.PUBSUB_AVATAR_METADATA_THUMBNAIL}"]`).attr("uri"),media_type:a.children("media-type").text(),duration:a.children("duration").text(),description:a.children("desc").text(),height:a.children("height").text(),width:a.children("width").text(),voice:"voice"===s,sources:r},0==r[0].indexOf("aescbc")){let e=r[0].replace(/^aescbc/,"https"),t=ci.fromBase64toArrayBuffer(e.slice(e.length-64));e=e.slice(0,e.length-64-1),ui.extend(o,{sources:[e],key:t}),o.has_encrypted_files=!0}n.push(o)}}})),n},parsePinnedMessage:function(e,t){if(e){let i=e.find("result message").first();if(this.get("pinned_message")&&this.get("pinned_message").stanza_id===i.find("stanza-id").attr("id"))return;let s=this.account.chats.receiveChatMessage(e,{pinned_message:!0});this.set("pinned_message",s),this.renderPinnedMessage(s,t)}else this.renderPinnedMessage(null,t)},renderPinnedMessage:function(e,t){if(e){let s=e.get("images")||[],n=e.get("files")||[],a=e.get("locations"),o=e.get("forwarded_message"),r=null,c=ui.escape(e.get("message"));if(e.get("videos")&&e.get("videos").length&&(n=n.concat(e.get("videos"))),o){let e=o[0].get("user_info")||{};c||(o.length>1?c=nt.getQuantityString("forwarded_messages_count",o.length):(c=o[0].get("message")||o[0].get("forwarded_message")&&nt.getString("forwarded_messages_count_plural_0",[o[0].get("forwarded_message").length]),r=e.nickname||o[0].get("from_jid")||e.id))}s&&s.length&&n&&n.length?c=`<span class=text-color-500>${nt.getString("recent_chat__last_message__attachments",[s.length+n.length])}</span>`:(s&&s.length&&(1==s.length&&(c=`<span class=text-color-500>${nt.getString("recent_chat__last_message__images_plural_0")}: </span>`+s[0].name),s.length>1&&(c=`<span class=text-color-500>${nt.getQuantityString("recent_chat__last_message__images",s.length)}</span>`)),n&&n.length&&(1==n.length&&(c=`<span class=text-color-500>${nt.getString("recent_chat__last_message__files_plural_0")}: </span>`+n[0].name+" ("+n[0].size+")"),n.length>1&&(c=`<span class=text-color-500>${nt.getQuantityString("recent_chat__last_message__files",n.length)}</span>`))),a&&a.length&&(1==a.length&&(c=`<span class=text-color-500>${nt.getString("recent_chat__last_message__locations_plural_0")}</span>`),a.length>1&&(c=`<span class=text-color-500>${nt.getQuantityString("recent_chat__last_message__locations",a.length)}</span>`));let l=this.participants.get(e.get("user_info")),d=l&&l.get("nickname")?l.get("nickname"):null,h=e.get("user_info")||{},g={author:d||h.nickname||e.get("from_jid")||h.id,time:(i=e.get("time"),ci.pretty_datetime(i,("ru-RU"==nt.settings.language||"default"==nt.settings.language&&"ru-RU"==nt.get("default_language"))&&"D MMMM YYYY HH:mm:ss")),message:c,fwd_author:r},u=li(ri.group_chats.pinned_message(g)),p=this.account.chats.get(this.hash_id);if(p&&p.item_view&&p.item_view.content){p=p.item_view.content,p.isScrolledToBottom()&&p.scrollToBottom()}t.html(u).emojify(".chat-msg-content",{emoji_size:18});let m=t.height();t.siblings(".chat-content").css({height:"calc(100% - "+m+"px)"}),t.attr("data-uniqueid",e.get("unique_id"))}else t.html(""),t.siblings(".chat-content").css({height:"100%"});var i},resetStatus:function(e){clearTimeout(this._reset_status_timeout),this._reset_status_timeout=setTimeout((()=>{this.set({status_updated:pi.now(),status:"offline",status_message:""})}),e||5e3)},searchByParticipants:function(e,t){if(this.participants.version){let i=this.participants.search(e);t&&t(i)}else this.participants.participantsRequest({},(()=>{let i=this.participants.search(e);t&&t(i)}))},updateName:function(){this.get("roster_name")&&this.get("name")!==this.get("roster_name")&&this.set("name",this.get("roster_name"))},showDetails:function(e){this.details_view||(this.details_view=this.get("group_chat")?new nt.GroupChatDetailsView({model:this}):new nt.ContactDetailsView({model:this})),e||(e="contacts"),nt.body.setScreen(e,{right:"contact_details",contact:this})},showDetailsRight:function(e,t){let i,s,n=this.account.chats.getChat(this);n.get("notifications")||(n&&(n.item_view.content||(n.item_view.content=new nt.ChatContentView({chat_item:n.item_view}))),s=n.item_view.content.getScrollTop(),nt.chats_view&&(i=nt.chats_view.getScrollTop()),t=t||{},this.details_view_right||t.encrypted||(this.details_view_right=this.get("group_chat")?new nt.GroupChatDetailsViewRight({model:this}):new nt.ContactDetailsViewRight({model:this})),!this.details_view_right_encrypted&&t.encrypted&&(this.details_view_right_encrypted=new nt.ContactDetailsViewRight({model:this,encrypted:!0})),e||(e="contacts"),nt.body.screen.get("right_contact")&&"search"!=t.type&&"members"!=t.type&&"participant"!=t.type&&!t.right_saved?(this.set("search_hidden",!0),nt.body.setScreen(e,{right_contact:"",contact:this})):(t.encrypted?nt.body.setScreen(e,{right_contact:"contact_details_encrypted",contact:this}):nt.body.setScreen(e,{right_contact:"contact_details",contact:this}),this.details_view_right&&this.details_view_right.contact_searched_messages_view&&(this.details_view_right.contact_searched_messages_view.hideSearch(),"search"===t.type&&(this.details_view_right.contact_searched_messages_view.clearSearch(),this.details_view_right.showSearchMessages()),"members"===t.type&&this.details_view_right.$('.tabs:not(.participant-tabs) .list-variant[data-value="participants"]').click(),this.details_view_right.onScroll())),s&&n.item_view.content.scrollTo(s),i&&nt.chats_view.scrollTo(i))}}),nt.SetGroupchatStatusView=nt.BasicView.extend({className:"modal main-modal change-status-modal",template:ri.group_chats.set_status,events:{"click .status-values li":"changeStatus"},open:function(e){this.contact=e,this.account=this.contact.account,this.show(),this.getStatuses()},updateIcons:function(){let e=this.contact.getIcon();this.$(".status-bulb").addClass("hidden"),e&&this.$(".status-bulb").removeClass("hidden").switchClass(e,"server"==e||"blocked"==e).html(ai.templates.svg[e]())},highlightStatus:function(e){this.$(`.status-values li[data-value="${e}"]`).addClass("active").siblings().removeClass("active"),this.updateIcons()},getStatuses:function(){let e=di({to:this.contact.get("full_jid")||this.contact.get("jid"),type:"get"}).c("query",{xmlns:`${gi.NS.GROUP_CHAT}#status`});this.account.sendFast(e,(e=>{this.data_form=this.account.parseDataForm(li(e).find('x[xmlns="'+gi.NS.DATAFORM+'"]'));let t=this.data_form.fields.find((e=>"status"==e.var)),i=(this.data_form.fields.find((e=>"status"==e.var))||[]).options||[];if(!i.length||"fixed"==t.type)return this.closeModal(),void ci.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it"));this.renderStatuses(i)}),(()=>{this.closeModal(),ci.dialogs.error(nt.getString("set_group_status__error__service_unavailable"))}))},renderStatuses:function(e){this.$(".status-values").html(""),e.forEach((e=>{let t=e,i=this.data_form.fields.find((e=>e.var==t.value));t.show=i?i.values[0]:t.value;let s=li(ri.group_chats.status_item({status:t}));this.$(".status-values").append(s)})),this.highlightStatus(this.contact.get("status"))},changeStatus:function(e){let t=li(e.target).closest("li").data("value");this.highlightStatus(t),this.do_change(),this.closeModal()},do_change:function(){let e=this.$(".status-values li.active").data("value");this.setStatus(e)},render:function(){this.$el.openModal({complete:this.close.bind(this)})},setStatus:function(e){if(!this.data_form||this.contact.get("group_info").status===e)return;let t=di({to:this.contact.get("full_jid")||this.contact.get("jid"),type:"set"}).c("query",{xmlns:`${gi.NS.GROUP_CHAT}#status`}),i=this.data_form.fields.find((e=>"status"===e.var)),s=this.data_form.fields.indexOf(i);i.values=[e],this.data_form.fields[s]=i,t=this.account.addDataFormToStanza(t,this.data_form),this.account.sendFast(t)},onHide:function(){this.$el.detach()},close:function(){this.$(".status-message").val()||this.do_change(),this.closeModal()},closeModal:function(){this.$el.closeModal({complete:this.hide.bind(this)})}}),nt.ContactItemView=nt.BasicView.extend({className:"roster-contact list-item",_initialize:function(e){this.account=this.model.account,this.$el.attr({"data-id":_i(),"data-jid":this.model.get("jid")}),this.$(".jid").text(this.model.get("jid")),this.interval_last,this.updateName(),this.updateStatus(),this.updateAvatar(),this.selectView(),this.updateGroupChat(),this.updateIcon(),this.model.on("change:name",this.updateName,this),this.model.on("change:image",this.updateAvatar,this),this.model.on("change:status_updated",this.updateStatus,this),this.model.on("change:subscription",this.updateStatus,this),this.model.on("change:subscription_preapproved",this.updateStatus,this),this.model.on("change:subscription_request_in",this.updateStatus,this),this.model.on("change:subscription_request_out",this.updateStatus,this),this.model.on("change:private_chat",this.updateIcon,this),this.model.on("change:incognito_chat",this.updateIcon,this),this.model.on("change:bot",this.updateIcon,this),this.model.on("change:blocked",this.onBlocked,this),this.model.on("change:status_message",this.updateStatusMsg,this),this.model.on("change:last_seen",this.lastSeenUpdated,this),this.model.on("change:group_chat",this.updateGroupChat,this)},updateName:function(){this.$(".name").text(this.model.get("name"))},updateAvatar:function(){this.$(".circle-avatar").setAvatar(this.model.cached_image,this.avatar_size)},updateStatus:function(){if(this.$(".status").attr("data-status",this.model.get("status")),this.$(".chat-icon").attr("data-status",this.model.get("status")),this.$(".status-message").text(this.model.getStatusMessage()),"offline"==this.model.get("status")){if(!gi.getNodeFromJid(this.model.get("jid")))return void this.model.set({status_message:"Server"});if(this.model.get("last_seen")){let e=(pi.now()-this.model.get("last_seen"))/1e3,t=nt.pretty_last_seen(e);this.model.set({status_message:t})}}},onBlocked:function(){this.updateIcon(),this.$el.switchClass("blocked",this.model.get("blocked"))},selectView:function(){this.model.get("group_chat")&&(this.$(".private-chat").addClass("hidden"),this.$(".group_chat").removeClass("hidden"))},lastSeenUpdated:function(){"offline"==this.model.get("status")&&this.model.get("last_seen")&&ui.isUndefined(this.interval_last)?this.interval_last=setInterval((()=>{let e=(pi.now()-this.model.get("last_seen"))/1e3,t=nt.pretty_last_seen(e);this.model.set({status_message:t})}),6e4):clearInterval(this.interval_last)},updateGroupChat:function(){let e=this.model.get("group_chat");this.$(".status").hideIf(e),this.updateIcon()},updateIcon:function(){let e=this.model.getIcon();this.$(".chat-icon").addClass("hidden"),this.model.get("invitation")||e&&this.$(".chat-icon").removeClass("hidden").switchClass(e,"server"==e||"blocked"==e).html(ai.templates.svg[e]())},updateStatusMsg:function(){this.$(".status-message").text(this.model.getStatusMessage())}}),nt.ContactItemRightView=nt.ContactItemView.extend({template:ri.contact_right_item,avatar_size:oi.AVATAR_SIZES.CONTACT_RIGHT_ITEM,events:{click:"clickOnItem",mouseover:"showJid",mouseleave:"hideJid"},showJid:function(){this.$(".name").text()!==this.model.get("jid")&&(this.$(".status-message").addClass("hidden"),this.$(".jid").removeClass("hidden"))},hideJid:function(){this.$(".jid").addClass("hidden"),this.$(".status-message").removeClass("hidden")},clickOnItem:function(){this.model.trigger("open_chat",this.model)}}),nt.ContactItemLeftView=nt.ContactItemView.extend({template:ri.contact_left_item,avatar_size:oi.AVATAR_SIZES.CONTACT_LEFT_ITEM,events:{click:"clickOnItem"},__initialize:function(){this.updateDisplayStatus(),this.updateBlockedState(),this.updateMutedState(),this.updateGroupChat(),this.model.on("change:display",this.updateDisplayStatus,this),this.model.on("change:blocked",this.updateBlockedState,this),this.model.on("change:group_chat",this.updateGroupChat,this)},updateDisplayStatus:function(){this.$el.switchClass("active",this.model.get("display"))},updateBlockedState:function(){this.$el.switchClass("blocked",this.model.get("blocked"))},updateMutedState:function(){this.$(".muted-icon").hide()},clickOnItem:function(){let e={};nt.chats_view.active_chat&&nt.chats_view.active_chat.model.get("jid")===this.model.get("jid")&&nt.chats_view.active_chat.model.get("encrypted")&&(e.encrypted=!0),this.model.trigger("open_chat",this.model,e)}}),nt.ContactResources=nt.Resources.extend({initialize:function(e,t){this.contact=t.contact,this.jid=t.contact.get("jid"),this.connection=t.contact.account.connection,this.on("add change",this.onResourceUpdated,this),this.on("remove",this.onResourceRemoved,this)},onResourceUpdated:function(e){e===this.first()&&this.contact.set({status_updated:pi.now(),status:e.get("status"),status_message:e.get("status_message")})},onResourceRemoved:function(){let e={status_updated:pi.now()};this.length?(e.status=this.first().get("status"),e.status_message=this.first().get("status_message")):(e.status="offline",e.status_message=""),this.contact.set(e)}}),nt.ContactResourcesView=nt.ResourcesView.extend({onResourceAdded:function(e){this.addChild(e.get("resource"),nt.ResourceView,{model:e}),this.updatePosition(e),this.$el.removeClass("hidden"),this.parent.updateScrollBar()},onResourceRemoved:function(e){this.removeChild(e.get("resource")),this.$el.showIf(this.model.length),this.parent.updateScrollBar()},onReset:function(){this.removeChildren(),this.$el.addClass("hidden"),this.parent.updateScrollBar()},updatePosition:function(e){let t=this.child(e.get("resource"));if(!t)return;t.$el.detach();let i=this.model.indexOf(e);0===i?this.$(".resources-wrap").prepend(t.$el):this.$(".resource-wrap").eq(i-1).after(t.$el),this.updateScrollBar()}}),nt.ContactResourcesRightView=nt.ResourcesView.extend({className:"modal main-modal resource-modal",_initialize:function(){this.model.on("remove",this.onResourceRemoved,this),this.model.on("reset",this.onReset,this),this.model.on("change:priority",this.onPriorityChanged,this)},renderByInit:function(){this.model.each((e=>{this.onResourceAdded(e)}))},open:function(){this.model.length&&this.$el.openModal({ready:()=>{this.$el.html('<svg class="details-icon mdi mdi-24px "></svg><div class="resources-wrap"></div>'),this.$el.find(".details-icon").html(ai.templates.svg["ic-jabber"]()),this.renderByInit()}})},onResourceAdded:function(e){this.model.requestInfo(e),this.addChild(e.get("resource"),nt.ResourceRightView,{model:e}),this.updatePosition(e),this.$el.removeClass("hidden")},onResourceRemoved:function(e){this.removeChild(e.get("resource")),this.$el.showIf(this.model.length)},onReset:function(){this.removeChildren(),this.$el.addClass("hidden")},updatePosition:function(e){let t=this.child(e.get("resource"));if(!t)return;t.$el.detach();let i=this.model.indexOf(e);0===i?this.$(".resources-wrap").prepend(t.$el):this.$(".resource-wrap").eq(i-1).after(t.$el),this.updateScrollBar()}}),nt.ContactVCardView=nt.VCardView.extend({events:{"click .btn-vcard-refresh":"refresh","click .details-icon":"onClickIcon"}}),nt.ContactRightVCardView=nt.VCardRightView.extend({events:{"click .btn-vcard-refresh":"refresh","click .info-hover":"onClickIcon","click .info-wrap.more":"showVCard","click .btn-back":"hideVCard"},showVCard:function(e){this.model.set("vcard_hidden",!1),this.$(".full-vcard-wrap").hideIf(this.model.get("vcard_hidden")),this.model.getVCard((()=>{this.updateName(),this.update()})),this.parent.$(".buttons-wrap.fixed-scroll").addClass("hidden2"),this.$(".vcard-header").css({width:nt.right_contact_panel.$el.find(".details-panel-right").width()}),this.parent.scrollToTop(),this.parent.ps_container.length&&this.parent.ps_container.perfectScrollbar("destroy")},hideVCard:function(e){this.model.set("vcard_hidden",!0),this.parent.ps_container.length&&this.parent.ps_container.perfectScrollbar(ui.extend(this.parent.ps_settings||{},nt.ps_settings)),this.scrollToTop(),this.onScroll(),this.parent.onScroll(),this.$(".full-vcard-wrap").hideIf(this.model.get("vcard_hidden"))},updateName:function(){this.$(".main-info .name-wrap").text(this.model.get("name")),this.model.get("name")!=this.model.get("roster_name")?this.$(".main-info .name-wrap").addClass("name-is-custom"):this.$(".main-info .name-wrap").removeClass("name-is-custom")}}),nt.ContactDetailsViewRight=nt.BasicView.extend({className:"details-panel-right contact-details-panel",template:ri.contact_details_right,avatar_size:oi.AVATAR_SIZES.CONTACT_DETAILS,events:{"click .btn-escape:not(.btn-top)":"openChat","click .btn-escape.btn-top":"scrollToTopSmooth","click .btn-edit":"showEdit","click .btn-chat":"openChat","click .panel-background-clickable":"openChat","click .btn-search":"showSearchMessages","click .btn-voice-call":"voiceCall","click .btn-add":"addContact","click .btn-delete":"deleteContact","click .btn-block":"blockContact","click .btn-qr-code":"showQRCode","click .btn-unblock":"unblockContact","click .btn-mute-dropdown":"muteChat","click .btn-mute.muted":"unmuteChat","click .list-variant":"changeList","click .btn-auth-request":"requestAuthorization"},_initialize:function(e){this.encrypted=e.encrypted,this.ps_container=this.$(".panel-content-wrap"),this.account=this.model.account,this.chat=this.account.chats.getChat(this.model,e.encrypted&&"encrypted"),this.name_field=new nt.ContactNameWidget({el:this.$(".name-wrap")[0],model:this.model}),this.name_field.$(".contact-name-input").prop("disabled",!0),this.encrypted||(this.contact_edit_view=this.addChild("edit",nt.ContactEditView,{model:this.model,el:this.$(".edit-block-wrap")[0]})),this.contact_searched_messages_view=this.addChild("search",nt.ContactSearchedMessagesView,{model:this.account.chats.getChat(this.model),query_text:"1",el:this.$(".search-messages-block-wrap")[0]}),this.vcard_view=this.addChild("vcard",nt.ContactRightVCardView,{model:this.model,el:this.$(".vcard")[0]}),this.edit_groups_view=this.addChild("groups",nt.ContactEditGroupsView,{el:this.$(".groups-block-wrap")[0]}),this.updateName(),this.updateStatus(),this.updateAvatar(),this.updateButtons(),this.updateColorScheme(),this.account.settings.on("change:color",this.updateColorScheme,this),this.ps_container.on("ps-scroll-y",this.onScroll.bind(this)),this.model.on("change",this.update,this),this.chat.on("change:muted",this.updateNotifications,this),nt.on("change:video",this.updateJingleButtons,this),nt.on("change:audio",this.updateJingleButtons,this)},render:function(e){this.model.get("vcard_updated")||this.vcard_view.refresh(),this.model.get("saved_search_panel")?this.ps_container.perfectScrollbar("destroy"):this.ps_container.length&&this.ps_container.perfectScrollbar(ui.extend(this.ps_settings||{},nt.ps_settings)),this.$(".btn-mute").dropdown({inDuration:100,outDuration:100,hover:!1}),this.encrypted&&(this.$(".btn-search-messages").remove(),this.$(".btn-edit").remove(),this.$(".btn-qr-code").remove()),this.updateChilds(),this.updateSubscriptions(),this.updateJingleButtons(),this.updateStatusMsg(),this.updateName(),this.updateNotifications(),this.setButtonsWidth(),this.updateList("image"),nt.once("update_css",this.updateIndicator,this),this.onScroll(),this.model.resources.models.forEach((e=>{this.model.resources.requestInfo(e)})),li(window).bind("keydown.contact_panel",this.keydownHandler.bind(this))},updateChilds:function(){this.vcard_view&&!this.model.get("vcard_hidden")&&this.vcard_view.hideVCard(),this.contact_edit_view&&!this.model.get("edit_hidden")&&this.contact_edit_view.hideEdit()},updateIndicator:function(){this.$(".tabs .indicator").remove(),this.$(".tabs").tabs(),this.$(".indicator").addClass("ground-color-500")},keydownHandler:function(e){nt.body.$el.siblings(".mfp-ready").length||li.magnificPopup.instance.isOpen||e.keyCode!==oi.KEY_ESCAPE||nt.body.$el.siblings("#modals").children(".open").length||(this.model.showDetailsRight("all-chats"),li(window).unbind("keydown.contact_panel"))},openChat:function(e){this.model.showDetailsRight("all-chats")},updateColorScheme:function(){this.$el.attr("data-color",this.account.settings.get("color"))},scrollToTopSmooth:function(){this.$(".header-buttons").attr("style","background-color: rgba(255,255,255,0) !important;"),this.$(".header-buttons .block-name").addClass("fade-out"),this.$(".btn-escape").removeClass("btn-top"),this.$(".btn-escape i").addClass("mdi-close").removeClass("mdi-arrow-right"),this.$(".buttons-wrap").hideIf(!1),this.$(".btn-edit").hideIf(!1),this.$(".btn-qr-code").hideIf(!1),this.ps_container.animate({scrollTop:0},400,(()=>{this.onScroll()}))},setButtonsWidth:function(){let e=[];this.$(".button-wrap").each(((t,i)=>{e.push(i.clientWidth)})),this.$(".button-wrap").css("width",`${Math.max.apply(null,e)}px`)},onChangedVisibility:function(){this.model.set("display",this.isVisible())},updateJingleButtons:function(){this.$(".btn-voice-call").switchClass("non-active",!nt.get("audio"))},update:function(){let e=this.model.changed;ui.has(e,"name")&&this.updateName(),ui.has(e,"image")&&this.updateAvatar(),ui.has(e,"status_updated")&&this.updateStatus(),ui.has(e,"subscription")&&this.updateSubscriptions(),ui.has(e,"subscription_request_in")&&this.updateSubscriptions(),ui.has(e,"blocked")&&this.updateStatusMsg(),ui.has(e,"status_message")&&this.updateStatusMsg(),(ui.has(e,"in_roster")||ui.has(e,"blocked")||ui.has(e,"subscription"))&&this.updateButtons()},updateName:function(){this.$(".main-info .name-wrap").text(this.model.get("name")),this.model.get("roster_name")&&this.model.get("name")!=this.model.get("roster_name")?this.$(".main-info .name-wrap").addClass("name-is-custom"):this.$(".main-info .name-wrap").removeClass("name-is-custom")},onScroll:function(){if(this.model.get("saved_search_panel")&&!this.model.get("search_hidden"))return this.ps_container.perfectScrollbar("destroy"),!0;let e;this.$(".bottom-block:not(.edit-bottom-block)")&&(e=this.$(".bottom-block:not(.edit-bottom-block)").get(0).getBoundingClientRect().top),this.ps_container[0].scrollTop>=250?(this.$(".header-buttons").attr("style","background-color: rgba(255,255,255,1) !important; -webkit-transition: none; -ms-transition: none;transition: none;"),this.$(".main-info").css({width:nt.right_contact_panel.$el.find(".details-panel-right").width()}),this.$(".header-buttons .block-name:not(.second-text)").removeClass("fade-out"),this.$(".header-buttons .block-name.second-text").addClass("fade-out")):this.ps_container[0].scrollTop>=40?(this.$(".header-buttons").attr("style","background-color: rgba(255,255,255,0.5) !important;"),this.$(".header-buttons .block-name").addClass("fade-out")):(this.$(".header-buttons").attr("style","background-color: rgba(255,255,255,0) !important;"),this.$(".header-buttons .block-name").addClass("fade-out")),!ui.isUndefined(e)&&e<=160?(this.$(".btn-escape").addClass("btn-top"),this.$(".btn-escape i").addClass("mdi-arrow-right").removeClass("mdi-close"),this.$(".buttons-wrap").hideIf(!0),this.$(".btn-edit").hideIf(!0),this.$(".btn-qr-code").hideIf(!0),this.$(".header-buttons .block-name:not(.second-text)").addClass("fade-out"),this.$(".header-buttons .block-name.second-text").removeClass("fade-out"),this.$(".header-buttons .block-name.second-text").text(this.$(".list-variant .active").text())):(this.$(".btn-escape").removeClass("btn-top"),this.$(".btn-escape i").addClass("mdi-close").removeClass("mdi-arrow-right"),this.$(".buttons-wrap").hideIf(!1),this.$(".btn-edit").hideIf(!1),this.$(".btn-qr-code").hideIf(!1))},updateStatus:function(){this.$(".main-info .status").attr("data-status",this.model.get("status")),this.$(".main-info .status-message").text(this.model.getStatusMessage())},updateStatusMsg:function(){this.$(".main-info .status-message").text(this.model.getStatusMessage())},updateAvatar:function(){let e=this.model.cached_image;this.$(".circle-avatar").setAvatar(e,this.avatar_size)},updateButtons:function(){let e=this.model.get("in_roster"),t=this.model.get("blocked"),i=this.model.get("server"),s=this.model.get("subscription");this.$(".btn-add").hideIf(e),this.$(".btn-block-wrap .contact-btn").switchClass("btn-block",!t).switchClass("btn-unblock",t),this.$(".btn-block-wrap .btn-name").text(t?nt.getString("contact_bar_unblock"):nt.getString("contact_bar_block")),this.$(".buttons-wrap .button-wrap:not(.btn-block-wrap):not(.btn-search-messages)").switchClass("non-active",t),this.$(".contact-mute-dropdown").hideIf(t),this.$(".btn-auth-request").showIf(!i&&e&&!t&&"both"!==s&&"to"!==s)},updateNotifications:function(){this.chat.isMuted()?(this.chat.isMuted()>48e8?this.$(".btn-mute").html(ai.templates.svg["bell-off"]()):this.$(".btn-mute").html(ai.templates.svg["bell-sleep"]()),this.$(".btn-mute").addClass("muted").addClass("active")):(this.$(".btn-mute").html(ai.templates.svg.bell()),this.$(".btn-mute").removeClass("muted")),this.$(".btn-mute-dropdown").hideIf(this.chat.isMuted()),this.$(".btn-unmute-dropdown").hideIf(!this.chat.isMuted())},showQRCode:function(){let e=new mi({url:"xmpp:"+this.model.get("jid"),noBorder:!0});ci.dialogs.ask(nt.getString("dialog_show_qr_code__header"),null,{escape_button:!0,canvas:e.domElement,bottom_text:'<div class="name">'+this.model.get("name")+'</div><div class="jid">'+this.model.get("jid")+"</div>"},{cancel_button_text:" ",ok_button_text:" "},"hidden").done((e=>{}))},updateSubscriptions:function(){let e=this.model.get("subscription"),t=this.model.get("subscription_request_in"),i=this.model.get("subscription_request_out"),s=this.$('label[for="outcoming-subscription"]'),n=this.$('label[for="incoming-subscription"]');"both"===e?(n.text(nt.getString("contact_subscription_send")).prev("input").prop("checked",!0),s.text(nt.getString("contact_subscription_receive")).prev("input").prop("checked",!0)):"from"===e?(n.text(nt.getString("contact_subscription_send")).prev("input").prop("checked",!0),s.text(nt.getString("contact_subscription_ask")).prev("input").prop("checked",!1)):"to"===e?(n.text(nt.getString("contact_subscription_accept")).prev("input").prop("checked",!!this.model.get("subscription_preapproved")),s.text(nt.getString("contact_subscription_receive")).prev("input").prop("checked",!0)):e&&"none"!==e||(n.text(nt.getString("contact_subscription_accept")).prev("input").prop("checked",!!this.model.get("subscription_preapproved")),s.text(nt.getString("contact_subscription_ask")).prev("input").prop("checked",!1)),t&&"both"!==e&&n.text(nt.getString("contact_subscription_send")).prev("input").prop("checked",!1),i&&s.text(nt.getString("contact_subscription_ask")).prev("input").prop("checked",!0)},showEdit:function(e){this.contact_edit_view.showEdit()},voiceCall:function(e){li(e.target).closest(".button-wrap").hasClass("non-active")||this.model.get("blocked")||nt.get("audio")&&this.initCall(e)},initCall:function(){if(nt.current_voip_call)return void ci.callback_popup_message(nt.getString("jingle__error__call_in_progress"),1e3);let e=this.account.chats.getChat(this.model);e.item_view.content||(e.item_view.content=new nt.ChatContentView({chat_item:e.item_view})),e.item_view.content.initJingleMessage()},deleteContact:function(){this.model.deleteWithDialog()},blockContact:function(){this.model.blockWithDialog()},unblockContact:function(){this.model.unblockWithDialog()},muteChat:function(e){if(this.model.get("blocked"))return;let t,i=li(e.target).closest(".btn-mute-dropdown").data("mute");"minutes15"===i&&(t=900),"hours1"===i&&(t=3600),"hours2"===i&&(t=7200),"day"===i&&(t=86400),"forever"===i&&(t=0),this.chat.muteChat(t)},unmuteChat:function(e){this.model.get("blocked")||this.chat.muteChat("")},showSearchMessages:function(e){this.scrollToTop(),this.ps_container.length&&this.ps_container.perfectScrollbar("destroy"),this.model.set("search_hidden",!1),this.$(".search-wrap").hideIf(this.model.get("search_hidden")),this.contact_searched_messages_view.$search_form.find("input").focus()},addContact:function(){nt.add_contact_view.show({account:this.account,jid:this.model.get("jid")})},changeList:function(e){let t=li(e.target).closest(".list-variant"),i=t.data("value");this.$(".tabs").animate({scrollLeft:t.position().left},400),this.ps_container.animate({scrollTop:this.$(".bottom-block:not(.edit-bottom-block)").position().top+this.ps_container.scrollTop()-120},200,(()=>{this.onScroll()})),this.$(".header-buttons .block-name.second-text").text(t.text()),this.updateList(i)},updateList:function(e){let t=this.child(e);!t&&(t=this.addList(e)),t&&(this.$(".tabs .list-variant a").removeClass("active"),this.$('.tabs .list-variant[data-value="'+e+'"] a').addClass("active"),t._render())},addList:function(e){let t;switch(e){case"image":t=nt.MediaImagesView;break;case"video":t=nt.MediaVideosView;break;case"files":t=nt.MediaFilesView;break;case"voice":t=nt.MediaVoiceView}return t?this.addChild(e,t,{model:this.model,encrypted:this.encrypted,el:this.$(".participants-wrap")[0]}):void 0},requestAuthorization:function(){this.model.pres("subscribe"),this.model.trigger("presence",this.model,"subscribe_from"),this.openChat()}}),nt.GroupChatDetailsViewRight=nt.BasicView.extend({className:"details-panel-right groupchat-details-panel",template:ri.group_chats.group_chat_details_right,ps_selector:".panel-content-wrap",avatar_size:oi.AVATAR_SIZES.CONTACT_DETAILS,member_avatar_size:oi.AVATAR_SIZES.GROUPCHAT_MEMBER_ITEM,events:{"click .btn-mute-dropdown":"muteChat","click .btn-mute.muted":"unmuteChat","click .btn-edit":"showEdit","click .btn-search":"showSearchMessages","click .btn-clear-history-chat":"clearHistory","click .btn-qr-code":"showQRCode","click .btn-leave":"leaveGroupChat","click .btn-invite":"inviteUser","click .btn-delete-group":"deleteGroup","click .btn-edit-settings":"editProperties","click .btn-default-restrictions":"showRestrictions","click .btn-chat":"openChat","click .panel-background-clickable":"openChat","click .btn-escape:not(.btn-top)":"openChat","click .btn-escape.btn-top":"scrollToTopSmooth","click .btn-clear-history":"retractAllMessages","change .circle-avatar input":"changeAvatar","click .description-edit-wrap .btn-choose-image":"chooseAvatar","click .description-edit-wrap .btn-selfie":"makeSelfie","click .description-edit-wrap .btn-emoji-panel":"makeEmojiAvatar","click .tabs:not(.participant-tabs) .list-variant":"changeList","click .edit-pictured-buttons .list-variant":"changeList"},_initialize:function(){this.account=this.model.account,this.chat=this.account.chats.getChat(this.model),this.name_field=new nt.ContactNameWidget({el:this.$(".name-wrap")[0],model:this.model}),this.name_field.$(".contact-name-input").prop("disabled",!0),this.participants=this.addChild("participants",nt.ParticipantsViewRight,{model:this.model,el:this.$(".participants-wrap")[0]}),this.edit_groups_view=this.addChild("groups",nt.ContactEditGroupsView,{el:this.$(".groups-block-wrap")[0]}),this.contact_edit_view=this.addChild("edit",nt.GroupEditView,{model:this.model,el:this.$(".edit-block-wrap")[0]}),this.group_chat_properties=this.addChild("properties_view",nt.GroupChatPropertiesViewRight,{model:this.model,el:this.$(".group-chat-properties-wrap")[0]}),this.group_chat_status=this.addChild("status_view",nt.GroupChatStatusViewRight,{model:this.model,el:this.$(".status-block-wrap")[0]}),this.contact_searched_messages_view=this.addChild("search",nt.ContactSearchedMessagesView,{model:this.account.chats.getChat(this.model),query_text:"1",el:this.$(".search-messages-block-wrap")[0]}),this.group_chat_properties_edit=new nt.GroupChatPropertiesEditView({model:this.model}),this.default_restrictions_edit_right=this.addChild("restrictions",nt.DefaultRestrictionsRightView,{model:this.model,el:this.$(".restrictions-block-wrap")[0]}),this.updateName(),this.updateStatus(),this.updateAvatar(),this.updateColorScheme(),this.ps_container.on("ps-scroll-y",this.onScroll.bind(this)),this.account.settings.on("change:color",this.updateColorScheme,this),this.model.on("change",this.update,this),this.chat.on("change:muted",this.updateNotifications,this),this.model.on("permissions_changed",this.updateButtons,this),this.model.on("change:subscription",this.updateButtons,this)},render:function(){this.updateName(),this.updateButtons(),this.model.my_rights||this.model.getMyInfo((()=>{this.updateButtons()})),this.model.get("saved_search_panel")?this.ps_container.perfectScrollbar("destroy"):this.ps_container.length&&this.ps_container.perfectScrollbar(ui.extend(this.ps_settings||{},nt.ps_settings)),this.$(".btn-mute").dropdown({inDuration:100,outDuration:100,hover:!1}),this.$(".btn-delete").showIf("both"===this.model.get("subscription")),this.$(".btn-join").showIf("both"!==this.model.get("subscription"));let e={inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"right"};return this.$(".select-users-list-wrap .dropdown-button").dropdown(e),this.$(".circle-avatar.dropdown-button").dropdown(e),this.$(".dropdown-button").dropdown(e),this.onScroll(),this.updateChilds(),this.updateNotifications(),this.updateList("participants"),this.setButtonsWidth(),nt.once("update_css",this.updateIndicator,this),li(window).bind("keydown.contact_panel",this.keydownHandler.bind(this)),this},updateIndicator:function(){this.$(".tabs.not-edit .indicator").remove(),this.$(".tabs.not-edit").tabs(),this.$(".tabs.not-edit .indicator").addClass("ground-color-500")},updateChilds:function(){this.model.get("vcard_hidden")||this.group_chat_properties.hideVCard(),this.model.get("edit_hidden")||this.contact_edit_view.hideEdit(),this.model.get("restrictions_hidden")||this.default_restrictions_edit_right.hideRestrictions(),this.model.set("participant_hidden",!0),this.$(".participant-details-wrap").hideIf(this.model.get("participant_hidden"))},showEdit:function(e){this.contact_edit_view.showEdit()},showRestrictions:function(e){this.default_restrictions_edit_right.showRestrictions()},hideRestrictions:function(e){this.model.set("restrictions_hidden",!0),this.$(".restrictions-wrap").hideIf(this.model.get("restrictions_hidden")),this.showEdit()},keydownHandler:function(e){nt.body.$el.siblings(".mfp-ready").length||li.magnificPopup.instance.isOpen||e.keyCode!==oi.KEY_ESCAPE||nt.body.$el.siblings("#modals").children(".open").length||(this.model.showDetailsRight("all-chats"),li(window).unbind("keydown.contact_panel"))},updateNotifications:function(){this.chat.isMuted()?(this.chat.isMuted()>48e8?this.$(".btn-mute").html(ai.templates.svg["bell-off"]()):this.$(".btn-mute").html(ai.templates.svg["bell-sleep"]()),this.$(".btn-mute").addClass("muted").addClass("active")):(this.$(".btn-mute").html(ai.templates.svg.bell()),this.$(".btn-mute").removeClass("muted")),this.$(".btn-mute-dropdown").hideIf(this.chat.isMuted())},update:function(){let e=this.model.changed;ui.has(e,"name")&&this.updateName(),ui.has(e,"image")&&this.updateAvatar(),(ui.has(e,"status_updated")||ui.has(e,"status_message"))&&this.updateStatus()},updateColorScheme:function(){this.$el.attr("data-color",this.account.settings.get("color"))},setButtonsWidth:function(){let e=[];this.$(".button-wrap").each(((t,i)=>{e.push(i.clientWidth)})),this.$(".button-wrap").css("width",`${Math.max.apply(null,e)}px`)},updateButtons:function(){let e=this.model.my_rights&&this.model.my_rights.fields.find((e=>"owner"==e.var&&e.values)),t=this.model.my_rights&&this.model.my_rights.fields.find((e=>"change-group"==e.var&&e.values)),i=this.model.get("blocked");this.$(".btn-settings-wrap").switchClass("non-active",!e),this.$(".btn-edit-settings").switchClass("hidden",!(e||t)),this.$(".btn-invite-wrap").switchClass("non-active",this.model.get("private_chat")||"both"!=this.model.get("subscription")),this.$(".btn-default-restrictions-wrap").switchClass("non-active",!e),this.$(".btn-block").hideIf(i),this.$(".btn-unblock").showIf(i)},updateName:function(){this.$(".main-info .contact-name").text(this.model.get("name"))},muteChat:function(e){if(this.model.get("blocked"))return;let t,i=li(e.target).closest(".btn-mute-dropdown").data("mute");"minutes15"===i&&(t=900),"hours1"===i&&(t=3600),"hours2"===i&&(t=7200),"day"===i&&(t=86400),"forever"===i&&(t=0),this.chat.muteChat(t)},unmuteChat:function(e){this.model.get("blocked")||this.chat.muteChat("")},showSearchMessages:function(e){this.scrollToTop(),this.ps_container.length&&this.ps_container.perfectScrollbar("destroy"),this.model.set("search_hidden",!1),this.$(".search-wrap").hideIf(this.model.get("search_hidden")),this.contact_searched_messages_view.$search_form.find("input").focus()},onScroll:function(){if(this.model.get("saved_search_panel")&&!this.model.get("search_hidden"))return this.ps_container.perfectScrollbar("destroy"),!0;let e;this.$(".bottom-block:not(.edit-bottom-block):not(.participant-bottom-block)")&&(e=this.$(".bottom-block:not(.edit-bottom-block):not(.participant-bottom-block)").get(0).getBoundingClientRect().top),this.ps_container[0].scrollTop>=250?(this.$(".header-buttons").attr("style","background-color: rgba(255,255,255,1) !important; -webkit-transition: none; -ms-transition: none;transition: none;"),this.$(".main-info").css({width:nt.right_contact_panel.$el.find(".details-panel-right").width()}),this.$(".header-buttons .block-name:not(.second-text)").removeClass("fade-out"),this.$(".header-buttons .block-name.second-text").addClass("fade-out")):this.ps_container[0].scrollTop>=40?(this.$(".header-buttons").attr("style","background-color: rgba(255,255,255,0.5) !important;"),this.$(".header-buttons .block-name").addClass("fade-out")):(this.$(".header-buttons").attr("style","background-color: rgba(255,255,255,0) !important;"),this.$(".header-buttons .block-name").addClass("fade-out")),!ui.isUndefined(e)&&e<=160?(this.$(".btn-escape").addClass("btn-top"),this.$(".btn-escape i").addClass("mdi-arrow-right").removeClass("mdi-close"),this.$(".buttons-wrap").hideIf(!0),this.$(".btn-edit").hideIf(!0),this.$(".btn-qr-code").hideIf(!0),this.$(".header-buttons .block-name:not(.second-text)").addClass("fade-out"),this.$(".header-buttons .block-name.second-text").removeClass("fade-out"),this.$(".header-buttons .block-name.second-text").text(this.$(".tabs:not(.participant-tabs) .list-variant .active").text())):(this.$(".btn-escape").removeClass("btn-top"),this.$(".btn-escape i").addClass("mdi-close").removeClass("mdi-arrow-right"),this.$(".buttons-wrap").hideIf(!1),this.$(".btn-edit").hideIf(!1),this.$(".btn-qr-code").hideIf(!1))},clearHistory:function(){this.chat&&this.chat.item_view&&this.chat.item_view.content&&this.chat.item_view.content.head&&this.chat.item_view.content.head.clearHistory()},showQRCode:function(){let e=new mi({url:"xmpp:"+this.model.get("jid"),noBorder:!0});ci.dialogs.ask(nt.getString("dialog_show_qr_code__header"),null,{escape_button:!0,canvas:e.domElement,bottom_text:'<div class="name">'+this.model.get("name")+'</div><div class="jid">'+this.model.get("jid")+"</div>"},{cancel_button_text:" ",ok_button_text:" "},"hidden").done((e=>{}))},editProperties:function(e){if(!li(e.target).closest(".button-wrap").hasClass("non-active")){let e=di({to:this.model.get("full_jid")||this.model.get("jid"),type:"get"}).c("query",{xmlns:gi.NS.GROUP_CHAT});this.account.sendIQFast(e,(e=>{let t=this.account.parseDataForm(li(e).find(`x[xmlns="${gi.NS.DATAFORM}"]`));this.group_chat_properties_edit.open(t)}),(()=>{ci.callback_popup_message(nt.getString("groupchat_you_have_no_permissions_to_do_it"),3e3)}))}},leaveGroupChat:function(e){if(li(e.target).closest(".button-wrap").hasClass("non-active"))return;let t=this.model;ci.dialogs.ask(nt.getString("groupchat_leave_full"),nt.getString("groupchat_leave_confirm",[t.get("name")]),null,{ok_button_text:nt.getString("groupchat_leave")}).done((e=>{if(e){t.declineSubscription();let e=this.account.chats.getChat(t);t.removeFromRoster(),e.deleteFromSynchronization((()=>{e.trigger("close_chat"),nt.body.setScreen("all-chats",{right:void 0,right_contact:null})}),(()=>{e.trigger("close_chat"),nt.body.setScreen("all-chats",{right:void 0,right_contact:null})}))}}))},inviteUser:function(e){li(e.target).closest(".button-wrap").hasClass("non-active")||(nt.invite_panel||(nt.invite_panel=new nt.InvitationPanelView({model:nt.opened_chats})),nt.invite_panel.open(this.account,this.model))},scrollToTopSmooth:function(){this.$(".header-buttons").attr("style","background-color: rgba(255,255,255,0) !important;"),this.$(".header-buttons .block-name").addClass("fade-out"),this.$(".btn-escape").removeClass("btn-top"),this.$(".btn-escape i").addClass("mdi-close").removeClass("mdi-arrow-right"),this.$(".buttons-wrap").hideIf(!1),this.$(".btn-edit").hideIf(!1),this.$(".btn-qr-code").hideIf(!1),this.ps_container.animate({scrollTop:0},400,(()=>{this.onScroll()}))},changeList:function(e){let t=li(e.target).closest(".list-variant"),i=t.data("value");"blocked"!=i&&"invitations"!=i&&(this.$(".tabs").animate({scrollLeft:t.position().left-80},400),this.ps_container.animate({scrollTop:this.$(".bottom-block:not(.edit-bottom-block):not(.participant-bottom-block)").position().top+this.ps_container.scrollTop()-120},400,(()=>{this.onScroll()})),this.$(".header-buttons .block-name.second-text").text(t.text())),this.updateList(i)},updateList:function(e){let t=this.child(e);!t&&(t=this.addList(e)),t&&("invitations"===e||"blocked"===e?(this.$(".edit-wrap .tabs .list-variant a").removeClass("active"),this.$('.edit-wrap .tabs .list-variant[data-value="'+e+'"] a').addClass("active")):(this.$(".tabs.not-edit .list-variant a").removeClass("active"),this.$('.tabs.not-edit .list-variant[data-value="'+e+'"] a').addClass("active")),t._render())},addList:function(e){let t,i;switch(e){case"image":t=nt.MediaImagesView;break;case"video":t=nt.MediaVideosView;break;case"files":t=nt.MediaFilesView;break;case"voice":t=nt.MediaVoiceView;break;case"blocked":t=nt.BlockedView,i=!0;break;case"invitations":t=nt.InvitationsView,i=!0}return t&&i?this.addChild(e,t,{model:this.model,el:this.$(".participants-edit-wrap")[0]}):t?this.addChild(e,t,{model:this.model,el:this.$(".participants-wrap")[0]}):void 0},getInvitations:function(e,t){let i=di({type:"get",to:this.model.get("full_jid")||this.model.get("jid")}).c("query",{xmlns:gi.NS.GROUP_CHAT+"#invite"});this.account.sendFast(i,e,t)},deleteGroup:function(){this.model.deleteWithDialog()},blockContact:function(){this.model.blockWithDialog()},unblockContact:function(){this.model.unblockWithDialog()},updateStatus:function(){this.$(".main-info .status-message").text(this.model.getStatusMessage())},updateAvatar:function(){let e=this.model.cached_image;this.$(".main-info .circle-avatar").setAvatar(e,this.avatar_size)},openChat:function(e){this.model.showDetailsRight("all-chats")},chooseAvatar:function(){if(this.account.get("gallery_token")&&this.account.get("gallery_url")){(new nt.SetAvatarView).render({model:this.account,contact:this.model,parent:this})}else this.$(".circle-avatar input").click()},makeSelfie:function(){if(this.account.get("gallery_token")&&this.account.get("gallery_url")){(new nt.WebcamProfileImageView).open({model:this.account,contact:this.model,parent:this})}else this.$(".circle-avatar input").click()},makeEmojiAvatar:function(){if(this.account.get("gallery_token")&&this.account.get("gallery_url")){(new nt.EmojiProfileImageView).open({model:this.account,contact:this.model,parent:this})}else this.$(".circle-avatar input").click()},changeAvatar:function(e){let t=e.target;if(!t.files.length)return;let i=t.files[0];t.value="",i.size>oi.MAX_AVATAR_FILE_SIZE?ci.dialogs.error(nt.getString("group_settings__error__avatar_too_large")):i.type.startsWith("image")?(li(t).siblings(".preloader-wrap").addClass("visible").find(".preloader-wrapper").addClass("active"),ci.images.getAvatarFromFile(i).done((e=>{e&&(i.base64=e,this.model.pubAvatar(i,"",(function(){li(t).siblings(".preloader-wrap").removeClass("visible").find(".preloader-wrapper").removeClass("active")}),(function(e){li(t).siblings(".preloader-wrap").removeClass("visible").find(".preloader-wrapper").removeClass("active");let i=li(e).find("text").text()||nt.getString("groupchat_you_have_no_permissions_to_do_it");ci.dialogs.error(i)})))}))):ci.dialogs.error(nt.getString("group_settings__error__wrong_image"))},retractAllMessages:function(){let e=this.account.chats.getChat(this.model);ci.dialogs.ask(nt.getString("delete_messages__header"),nt.getString("delete_messages__confirm"),null,{ok_button_text:nt.getString("delete")}).done((t=>{t&&e.retractAllMessages(!0)}))}}),nt.GroupChatStatusView=nt.BasicView.extend({template:ri.group_chats.group_status,events:{"click .status-wrap":"setStatus","click .btn-edit-status":"setStatus"},_initialize:function(){this.$el.html(this.template()),this.render(),this.model.on("change:status",this.render,this),this.model.on("change:group_info",this.render,this)},render:function(){let e=this.model.get("group_info");e&&(this.$(".status").attr("data-status",e.status||this.model.get("status")),this.$(".status-message").text(e.status_msg))},setStatus:function(){(new nt.SetGroupchatStatusView).open(this.model)}}),nt.GroupChatStatusViewRight=nt.BasicView.extend({template:ri.group_chats.group_status_right,events:{"click .group-chat-status-wrap":"setStatus","click .btn-edit-status":"setStatus"},_initialize:function(){this.$el.html(this.template()),this.render(),this.model.on("change:status",this.render,this),this.model.on("change:group_info",this.render,this)},render:function(){let e=this.model.get("group_info");e&&(this.updateIcon(),this.$(".status").attr("data-status",e.status||this.model.get("status")),this.$(".status-message").text(e.status_msg))},updateIcon:function(){let e=this.model.getIcon();this.$(".status-bulb").addClass("hidden"),this.model.get("invitation")||e&&this.$(".status-bulb").removeClass("hidden").switchClass(e,"server"==e||"blocked"==e).html(ai.templates.svg[e]())},setStatus:function(){(new nt.SetGroupchatStatusView).open(this.model)}}),nt.GroupChatPropertiesView=nt.BasicView.extend({template:ri.group_chats.group_chat_properties,events:{"click .group-chat-properties .details-icon":"onClickIcon"},_initialize:function(){this.$el.html(this.template()),this.contact=this.model,this.account=this.model.account,this.model.on("change:group_info",this.update,this),this.model.on("change:vcard_updated",this.update,this)},render:function(){this.model.get("vcard_updated")||this.model.vcard&&this.model.vcard.refresh(),this.update()},update:function(){let e=this.model.get("group_info")||{};this.$(".block-name").text(this.model.get("incognito_group")?nt.getString("incognito_group_settings__header"):nt.getString("public_group_settings__header")),this.$(".jabber-id .value").text(e.jid),this.$(".name .value").text(e.name),this.$(".description .value").text(e.description),this.$(".model .value").text(ci.pretty_name(e.model)),this.$(".status .value").text(ci.pretty_name(e.status)),this.$(".searchable .value").text("none"===e.searchable?nt.getString("groupchat_index_type_none"):ci.pretty_name(e.searchable)),this.$(".name-info-wrap").switchClass("hidden",!e.name),this.$(".description-info-wrap").switchClass("hidden",!e.description),this.$(".model-info-wrap").switchClass("hidden",!e.model),this.$(".status-info-wrap").switchClass("hidden",!e.status),this.$(".searchable-info-wrap").switchClass("hidden",!e.searchable)},onClickIcon:function(e){let t=li(e.target).closest(".info-wrap"),i=t.find(".value"),s="";i.each(((e,i)=>{let n=li(i).text();if(t.hasClass("searchable-info-wrap")){let e=t.find(".label").first().text();n===nt.getString("groupchat_index_type_none")&&(n+=" "+e.toLowerCase())}n&&""!=s&&(s+="\n"),n&&(s+=n),s&&ci.copyTextToClipboard(s,nt.getString("toast__copied_in_clipboard"),nt.getString("toast__not_copied_in_clipboard"))}))}}),nt.GroupChatPropertiesViewRight=nt.BasicView.extend({template:ri.group_chats.group_chat_properties_right,events:{"click .btn-vcard-refresh":"refresh","click .info-hover":"onClickIcon","click .btn-back":"hideVCard"},_initialize:function(){this.$el.html(this.template()),this.contact=this.model,this.account=this.model.account,this.model.on("change:group_info",this.update,this),this.model.on("change:vcard_updated",this.update,this),this.ps_container=this.$(".full-vcard-content"),this.ps_container.length&&this.ps_container.perfectScrollbar(ui.extend(this.ps_settings||{},nt.ps_settings)),this.ps_container.on("ps-scroll-up ps-scroll-down",this.onScroll.bind(this)),this.model.set("vcard_hidden",!0)},render:function(){this.model.get("vcard_updated")||this.model.vcard&&this.model.vcard.refresh(),this.$(".full-vcard-wrap").hideIf(this.model.get("vcard_hidden")),this.parent.ps_container.length&&(this.model.get("vcard_hidden")?this.parent.ps_container.perfectScrollbar(ui.extend(this.parent.ps_settings||{},nt.ps_settings)):this.parent.ps_container.perfectScrollbar("destroy")),this.model.updateName(),this.model.updateAvatar(),this.hideMoreDescription(),this.model.getVCard((()=>{this.updateName(),this.update(),this.parent.contact_edit_view&&this.parent.contact_edit_view.update()}))},onScroll:function(){this.ps_container[0].scrollTop>=170?(this.$(".vcard-header-title").addClass("fixed-scroll"),this.$(".vcard-header-title").attr("style","background-color: rgba(255,255,255,1) !important; -webkit-transition: none; -ms-transition: none;transition: none;")):this.ps_container[0].scrollTop>=40?(this.$(".vcard-header-title").removeClass("fixed-scroll"),this.$(".vcard-header-title").attr("style","background-color: rgba(255,255,255,0.5) !important;")):(this.$(".vcard-header-title").removeClass("fixed-scroll"),this.$(".vcard-header-title").attr("style","background-color: rgba(255,255,255,0) !important;"))},hideMoreDescription:function(e){this.$(".vcard-wrap .info.description").hasClass("short")||(this.$(".vcard-wrap .info.description").addClass("short"),this.$(".show-vcard").hideIf(!1))},showVCard:function(e){this.model.set("vcard_hidden",!1),this.$(".full-vcard-wrap").hideIf(this.model.get("vcard_hidden")),this.model.getVCard((()=>{this.updateName(),this.update()})),this.parent.$(".buttons-wrap.fixed-scroll").addClass("hidden2"),this.$(".vcard-header").css({width:nt.right_contact_panel.$el.find(".details-panel-right").width()}),this.parent.scrollToTop(),this.parent.ps_container.length&&this.parent.ps_container.perfectScrollbar("destroy")},hideVCard:function(e){this.model.set("vcard_hidden",!0),this.parent.ps_container.length&&this.parent.ps_container.perfectScrollbar(ui.extend(this.parent.ps_settings||{},nt.ps_settings)),this.scrollToTop(),this.onScroll(),this.parent.onScroll(),this.$(".full-vcard-wrap").hideIf(this.model.get("vcard_hidden"))},updateName:function(){this.$(".main-info .name-wrap").text(this.model.get("name")),this.model.get("name")!=this.model.get("roster_name")?this.$(".main-info .name-wrap").addClass("name-is-custom"):this.$(".main-info .name-wrap").removeClass("name-is-custom")},update:function(){let e=this.model.get("group_info")||{};this.$(".block-name").text(this.model.get("incognito_group")?nt.getString("incognito_group_settings__header"):nt.getString("public_group_settings__header")),this.$(".jabber-id .value").text(e.jid),this.$(".name .value").text(e.name),this.$(".description .value").text(e.description),this.$(".model .value").text(ci.pretty_name(e.model)),this.$(".status .value").text(ci.pretty_name(e.status)),this.$(".searchable .value").text("none"===e.searchable?nt.getString("groupchat_index_type_none"):ci.pretty_name(e.searchable)),this.$(".name-info-wrap").switchClass("hidden",!e.name),this.$(".description-info-wrap").switchClass("hidden",!e.description),this.$(".model-info-wrap").switchClass("hidden",!e.model),this.$(".status-info-wrap").switchClass("hidden",!e.status),this.$(".searchable-info-wrap").switchClass("hidden",!e.searchable)},onClickIcon:function(e){let t=li(e.target).find(".value"),i="";t.each(((e,t)=>{let s=li(t).text();s&&""!=i&&(i+="\n"),s&&(i+=s),i&&ci.copyTextToClipboard(i,nt.getString("toast__copied_in_clipboard"),nt.getString("toast__not_copied_in_clipboard"))}))}}),nt.GroupChatPropertiesEditView=nt.BasicView.extend({className:"modal dialog-modal group-chat-properties-edit",events:{"click .btn-save":"saveChanges","click .btn-cancel":"close","change input":"updateSaveButton","keyup .property-wrap .text-field":"updateSaveButton"},_initialize:function(){this.account=this.model.account,this.contact=this.model,this.model.on("change:name",this.updateName,this)},open:function(e){this.data_form=e;let t=this.data_form.fields.filter((e=>"fixed"==e.type||"hidden"==e.type)).length==this.data_form.fields.length;this.$el.html(ri.group_chats.group_chat_properties_edit({all_fixed:t,fields:e.fields,privacy:this.contact.get("incognito_group"),jid:this.model.get("jid")})),this.$el.openModal({ready:()=>{this.$(".modal-content").css("height",this.$el.height()-115).perfectScrollbar({theme:"item-list"}),this.updateScrollBar()},complete:()=>{this.$el.detach(),this.$(".modal-content").css("height","100%"),this.data.set("visible",!1)}})},close:function(){this.$el.closeModal({complete:()=>{this.$el.detach(),this.$(".modal-content").css("height","100%"),this.data.set("visible",!1)}})},updateName:function(){this.$(".name-info-wrap").find(".name").find(".value").text(this.model.get("name"))},saveChanges:function(){if(this.$(".btn-save").hasClass("non-active"))return;let e=!1,t=di({type:"set",to:this.contact.get("full_jid")||this.contact.get("jid")}).c("query",{xmlns:gi.NS.GROUP_CHAT});this.data_form.fields.forEach((t=>{if("hidden"===t.type||"fixed"===t.type)return;let i=t.values?t.values[0]:null,s=this.$("."+t.var+"-field input:checked"),n=this.$("."+t.var+'-field input[type="text"]'),a=this.$("."+t.var+"-field textarea"),o="";if(s.length&&(o=s[0].id),n.length&&(o=n.val()),a.length&&(o=a.val()),i!==o){let i=this.data_form.fields.indexOf(t);t.values=[o],this.data_form.fields[i]=t,e=!0}})),e?(t=this.account.addDataFormToStanza(t,this.data_form),this.account.sendIQFast(t,(e=>{let t=li(e),i=ui.clone(this.contact.get("group_info")),s={name:t.find('field[var="name"] value').text(),searchable:t.find('field[var="index"]').children("value").text(),model:t.find('field[var="membership"]').children("value").text(),description:t.find('field[var="description"] value').text(),status:t.find('field[var="status"]').children("value").text()};this.$("button").addClass("non-active"),this.close(),ui.extend(i,s),this.model.set("group_info",i)}),(e=>{this.$("button").addClass("non-active");let t=li(e).find("error text").text()||nt.getString("groupchat_you_have_no_permissions_to_do_it");this.close(),ci.dialogs.error(t)}))):this.$("button").removeClass("non-active")},updateSaveButton:function(){let e=!1;this.data_form.fields.forEach((t=>{if("hidden"===t.type||"fixed"===t.type)return;let i=t.values?t.values[0]:null,s=this.$("."+t.var+"-field input:checked"),n=this.$("."+t.var+'-field input[type="text"]'),a=this.$("."+t.var+"-field textarea"),o="";s.length&&(o=s[0].id),n.length&&(o=n.val()),a.length&&(o=a.val()),i!==o&&(e=!0)})),this.$(".btn-save").switchClass("non-active",!e)}}),nt.InvitationsView=nt.BasicView.extend({events:{},status:"invitations",member_avatar_size:oi.AVATAR_SIZES.GROUPCHAT_MEMBER_ITEM,_initialize:function(e){this.contact=e.model,this.contact.participants.on("participants_updated",this._render,this),this.contact.on("invitations_send",this._render,this),this.account=this.contact.account,this.$error=li('<p class="errors"/>')},_render:function(){this.$el.length&&0==this.$el.closest("body").length&&(this.$el=this.parent.$(".participants-edit-wrap")),this.$el.html(li(ri.preloader())),this.updateInvitations()},updateInvitations:function(){this.parent.$(".block-name-panel:not(.second-text)").html(nt.getString("groupchat_invitations")),this.parent.getInvitations((e=>{this.$el.html(""),li(e).find("query").find("user").each(((e,t)=>{let i={jid:li(t).attr("jid"),status:this.status},s=li(ri.group_chats.invited_member_item(i)),n=vi.getDefaultAvatar(i.jid);this.$el.append(s),s.find(".circle-avatar").setAvatar(n,this.member_avatar_size)})),li(e).find("query").find("user").length||this.$el.html(this.$error.text(nt.getString("group_settings__invitations__no_pending_invitations"))),this.parent.contact_edit_view&&this.parent.contact_edit_view.showInviteButton()}),(e=>{this.$el.html(this.$error.text(li(e).find("text").text()||nt.getString("groupchat_you_have_no_permissions_to_do_it")))}))},revokeInvitation:function(e){let t=li(e.target).closest(".invitations-user"),i=t.data("jid"),s=di({to:this.contact.get("full_jid")||this.contact.get("jid"),type:"set"}).c("revoke",{xmlns:`${gi.NS.GROUP_CHAT}#invite`}).c("jid").t(i);this.account.sendIQFast(s,(()=>{t.remove(),this.parent.contact_edit_view&&this.parent.contact_edit_view.updateRemoveParticipantButton(),!this.$el.children().length&&this.$el.html(this.$error.text(nt.getString("group_settings__invitations__no_pending_invitations")))}))},revokeInvitationByElement:function(e){let t=e.data("jid"),i=di({to:this.contact.get("full_jid")||this.contact.get("jid"),type:"set"}).c("revoke",{xmlns:`${gi.NS.GROUP_CHAT}#invite`}).c("jid").t(t);this.account.sendIQFast(i,(()=>{e.remove(),!this.$el.children().length&&this.$el.html(this.$error.text(nt.getString("group_settings__invitations__no_pending_invitations")))}))}}),nt.MediaBaseView=nt.BasicView.extend({status:"base",member_avatar_size:oi.AVATAR_SIZES.GROUPCHAT_MEMBER_ITEM,_initialize:function(e){this.contact=e.model,this.participant=e.participant,this.encrypted=e.encrypted,this.account=this.contact.account,this.chat=this.account.chats.getChat(this.contact,this.encrypted&&"encrypted"),this.temporary_items=[],this.parent.ps_container.on("ps-scroll-up.mediagallery ps-scroll-down.mediagallery",this.onScroll.bind(this)),nt.on("update_screen",this.onUpdatedScreen,this),nt.on("update_layout",this.onUpdatedScreen,this)},_render:function(){this.$el.length&&0==this.$el.closest("body").length&&(this.$el=this.parent.$(".participants-details-media-wrap")),this.$el.html(li(ri.preloader())),this.all_messages_loaded=!1,this.temporary_items=[],this.encrypted?this.getMediaFromDecryptedMessages():this.messagesFileRequest({},(()=>{this.$el.html("<div class='gallery-files'></div>"),this.updateMedia()}))},onScroll:function(){if(!this.active)return;this.parent.ps_container[0].scrollTop/(this.parent.ps_container[0].scrollHeight-this.parent.ps_container[0].offsetHeight)>.8&&this.last_rsm_message&&!this.all_messages_loaded&&!this.loading_messages&&this.loadMoreFiles()},onUpdatedScreen:function(){let e=nt.body.$el.height()-320;this.$el.css("min-height",`${e}px`)},updateForParticipant:function(){this.delegateEvents({}),this.parent.ps_container.off("ps-scroll-up.mediagallery").off("ps-scroll-down.mediagallery").on("ps-scroll-up.mediagallery ps-scroll-down.mediagallery",this.onScroll.bind(this)),this.$(".gallery-file").on("click",(e=>{this.onClickFile(e)}))},getMediaFromDecryptedMessages:function(){let e=new li.Deferred;if(e.done((()=>{"filter_image"===this.filter_type?this.$el.html("<div class='gallery-files images grid'></div>"):"filter_video"===this.filter_type?this.$el.html("<div class='gallery-files videos grid'></div>"):"filter_voice"===this.filter_type?this.$el.html("<div class='gallery-files voice'></div>"):"filter_files"===this.filter_type?this.$el.html("<div class='gallery-files files'></div>"):this.$el.html("<div class='gallery-files'></div>"),this.updateMedia()})).fail((()=>{this.temporary_items=[],this.$el.html("<div class='gallery-files'></div>"),this.updateMedia()})),this.account.omemo&&this.account.omemo.cached_messages){let t=this.account.omemo.cached_messages.getMessages(this.contact);for(let[e,i]of Object.entries(t)){let t=this.contact.getFilesFromStanza(li(i.envelope),{cached_message:!0,cached_stanza_id:e});t.length&&(this.temporary_items=this.temporary_items.concat(t))}if(this.temporary_items.length){let t=[],i=0;this.temporary_items.forEach(((s,n)=>{"filter_image"===this.filter_type&&oi.MIME_TYPES.image.includes(s.media_type)||"filter_video"===this.filter_type&&oi.MIME_TYPES.video.includes(s.media_type)||"filter_voice"===this.filter_type&&oi.MIME_TYPES.audio.includes(s.media_type)||"filter_files"===this.filter_type&&!(oi.MIME_TYPES.image.includes(s.media_type)||oi.MIME_TYPES.video.includes(s.media_type)||oi.MIME_TYPES.audio.includes(s.media_type))?"filter_image"===this.filter_type&&s.sources&&s.sources[0]?this.chat.messages.decryptFile(s.sources[0],s.key).then((n=>{s.sources[0]=n,s.thumbnail=null,t=t.concat([s]),i++,i===this.temporary_items.length&&(this.temporary_items=t,e.resolve())})):(t=t.concat([s]),i++):i++,i===this.temporary_items.length&&(this.temporary_items=t,e.resolve())}))}else e.reject()}else e.reject()},loadMoreFiles:function(){li(ri.preloader()).appendTo(this.$(".gallery-files")),this.messagesFileRequest({[this.filter_type]:!0,before:this.last_rsm_message},(()=>{this.updateMedia(!0)}))},filterEncryptedFiles:function(){return this.temporary_items},encryptedFilesHandler:function(){let e=0;this.temporary_items=this.filterEncryptedFiles(),this.temporary_items.length?this.temporary_items.forEach(((t,i)=>{let s=t.sources[0];t.key?this.chat.messages.decryptFile(s,t.key).then((i=>{this.active&&(t.sources[0]=i,e++,e===this.temporary_items.length&&(this.updateEncryptedMedia(),this.loading_messages=!1))})):e++})):(this.updateEncryptedMedia(),this.loading_messages=!1,this.all_messages_loaded||this.loadMoreFiles())},updateEncryptedMedia:function(e){!this.$(".gallery-files").length&&this.$el.html("<div class='gallery-files'></div>"),this.updateMedia()},updateMedia:function(e){this.active&&(this.temporary_items.length&&(this.temporary_items.reverse(),this.temporary_items.forEach((e=>{"filter_voice"===this.filter_type&&(e.true_voice=!0),li(ri.media_item({file:e,is_encrypted:this.encrypted,svg_icon:ci.file_type_icon_svg(e.media_type),filesize:ci.pretty_size(e.size),duration:ci.pretty_duration(e.duration)})).appendTo(this.$(".gallery-files"))}))),this.temporary_items=[],this.$(".gallery-files .gallery-empty").remove(),li(ri.media_items_empty()).appendTo(this.$(".gallery-files")),"filter_image"===this.filter_type?this.$(".gallery-files .gallery-empty-text").html(`${nt.getString("no_images")}`):"filter_video"===this.filter_type?this.$(".gallery-files .gallery-empty-text").html(`${nt.getString("no_videos")}`):"filter_voice"===this.filter_type&&this.$(".gallery-files .gallery-empty-text").html(`${nt.getString("no_voice_messages")}`),this.$(".gallery-files .preloader-wrapper").remove())},messagesFileRequest:function(e,t){if(!this.active||this.loading_messages)return;let i=e||{};_i();this.loading_messages=!0,!i.max&&(i.max=nt.settings.mam_messages_limit),!i.after&&!i.before&&(i.before=""),this.encrypted&&(i.encrypted=this.encrypted),this.parent.participant&&(i.var=[{var:"with",value:this.parent.participant.id}]),this.contact.MAMRequest(i,((i,s,n)=>{let a=0;if(this.encrypted){if(!s.length)return this.loading_messages=!1,void(t&&t());li(ri.preloader()).appendTo(this.$(".gallery-files"))}li(s).each(((t,i)=>{let o=li(i),r=[];if(this.encrypted){let t=new li.Deferred;t.done((e=>{r=this.contact.getFilesFromStanza(e),r.length&&(this.temporary_items=this.temporary_items.concat(r)),a++,a===s.length&&(this.last_rsm_message=n.first,this.encryptedFilesHandler())})).fail((()=>{a++,a===s.length&&(this.last_rsm_message=n.first,this.all_messages_loaded=!0,this.encryptedFilesHandler())})),this.account.omemo.receiveChatMessage(o,{searched_message:!0,gallery:!0,query:e},t)}else r=this.contact.getFilesFromStanza(o),this.account.chats.receiveChatMessage(o,{searched_message:!0,query:e}),r.length&&(this.temporary_items=this.temporary_items.concat(r))})),this.encrypted||(this.last_rsm_message=n.first,s.length||(this.all_messages_loaded=!0),this.loading_messages=!1,"filter_files"===this.filter_type&&(this.temporary_items=this.temporary_items.filter((e=>!(e.media_type&&(e.media_type.includes("image")||e.media_type.includes("video")&&!e.has_encrypted_files))))),this.temporary_items.length>=nt.settings.mam_messages_limit||"filter_files"!==this.filter_type||this.all_messages_loaded?t&&t():this.messagesFileRequest({[this.filter_type]:!0,before:this.last_rsm_message},t))}),(()=>{}))},onClickFile:function(e){let t=li(e.target);if(t.hasClass("no-uploaded")||t.hasClass("gallery-audio-file-not-uploaded")){let e=t.closest(".gallery-file"),i=e.attr("data-file");return e.find(".mdi-play").removeClass("audio-file-play"),e[0].voice_message=this.renderVoiceMessage(e.find(".gallery-file-audio-container")[0],i),this.prev_audio_message&&this.prev_audio_message.voice_message.pause(),void(this.prev_audio_message=e[0])}if(t.hasClass("mdi-play")||t.children(".mdi-play").length){let e=t.closest(".gallery-file");return this.prev_audio_message.voice_message.pause(),this.prev_audio_message=e[0],void e[0].voice_message.play()}if(t.hasClass("mdi-pause")||t.children(".mdi-pause").length)this.prev_audio_message.voice_message.pause();else if(!t.parents(".gallery-file-audio-container").length||t.closest(".audio-control-time").length){let e=t.closest(".gallery-file");this.parent.saveScrollBarOffset(),nt.body.data.set("contact_details_view",this.parent),this.chat.getMessageContext(e.data("uniqueid"),{searched_messages:!0,encrypted:this.encrypted})}},renderVoiceMessage:function(e,t){let i=e.innerHTML,s="waveform"+pi.now(),n=li(e),a=n.closest(".gallery-file");n.addClass("voice-message-rendering").html(li(ri.audio_file_waveform({waveform_id:s})));let o=this.createAudio(t,s);return o.on("ready",(()=>{a.find(".gallery-file-placeholder-background .mdi").removeClass("no-uploaded"),a.find(".gallery-file-placeholder-background").removeClass("gallery-audio-file-not-uploaded");let e=Math.round(o.getDuration());n.find(".voice-msg-total-time").text(ci.pretty_duration(e)),o.play()})),o.on("error",(()=>{n.removeClass("voice-message-rendering"),e.innerHTML=i,o.unAll(),n.find(".voice-message-play").length&&n.find(".voice-message-play").get(0).remove(),ci.callback_popup_message(nt.getString("jingle__error__audio_not_supported"),3e3)})),o.on("play",(()=>{a.find(".gallery-file-placeholder-background .mdi").addClass("mdi-pause").removeClass("mdi-play"),a.addClass("playing");let e=setInterval((function(){let t=Math.round(o.getCurrentTime());o.isPlaying()?n.find(".voice-msg-current-time").text(ci.pretty_duration(t)):clearInterval(e)}),100)})),o.on("finish",(()=>{a.find(".gallery-file-placeholder-background .mdi").removeClass("mdi-pause").addClass("mdi-play"),a.removeClass("playing")})),o.on("pause",(()=>{a.find(".gallery-file-placeholder-background .mdi").removeClass("mdi-pause").addClass("mdi-play"),a.removeClass("playing")})),n.find(".voice-message-volume")[0].onchange=()=>{o.setVolume(n.find(".voice-message-volume").val()/100)},o},createAudio:function(e,t){let i=WaveSurfer.create({container:"#"+t,scrollParent:!1,barWidth:3,height:48,barHeight:48,cursorColor:"rgba(211,47,47,0.8)",autoCenter:!1,normalize:!0,hideScrollBar:!0,progressColor:"#757575"});return i.load(e),i.setVolume(.5),i}}),nt.MediaImagesView=nt.MediaBaseView.extend({events:{"click .gallery-files.images .gallery-file":"onClickFile"},status:"image",_render:function(){this.$el.length&&0==this.$el.closest("body").length&&(this.$el=this.parent.$(".participants-details-media-wrap")),this.$el.html(li(ri.preloader())),this.active=!0,this.parent.children.video&&(this.parent.children.video.active=!1),this.parent.children.files&&(this.parent.children.files.active=!1),this.parent.children.voice&&(this.parent.children.voice.active=!1),this.all_messages_loaded=!1,this.filter_type="filter_image",this.temporary_items=[],this.encrypted?this.getMediaFromDecryptedMessages():this.messagesFileRequest({[this.filter_type]:!0},(()=>{this.temporary_items=this.temporary_items.filter((e=>"image"===ci.pretty_file_type(e.media_type))),this.$el.html("<div class='gallery-files images grid'></div>"),this.updateMedia(),this.participant&&this.updateForParticipant()})),this.onUpdatedScreen()},filterEncryptedFiles:function(){return this.temporary_items.filter((e=>"image"===ci.pretty_file_type(e.media_type)))},updateEncryptedMedia:function(e){!this.$(".gallery-files.images.grid").length&&this.$el.html("<div class='gallery-files images grid'></div>"),this.updateMedia()},loadMoreFiles:function(){li(ri.preloader()).appendTo(this.$(".gallery-files")),this.messagesFileRequest({[this.filter_type]:!0,before:this.last_rsm_message},(()=>{this.temporary_items=this.temporary_items.filter((e=>"image"===ci.pretty_file_type(e.media_type))),this.updateMedia(!0)}))}}),nt.MediaVideosView=nt.MediaBaseView.extend({events:{"click .gallery-files.videos .gallery-file":"onClickFile"},status:"video",_render:function(){this.$el.length&&0==this.$el.closest("body").length&&(this.$el=this.parent.$(".participants-details-media-wrap")),this.$el.html(li(ri.preloader())),this.active=!0,this.parent.children.image&&(this.parent.children.image.active=!1),this.parent.children.files&&(this.parent.children.files.active=!1),this.parent.children.voice&&(this.parent.children.voice.active=!1),this.all_messages_loaded=!1,this.filter_type="filter_video",this.temporary_items=[],this.encrypted?this.getMediaFromDecryptedMessages():this.messagesFileRequest({[this.filter_type]:!0},(()=>{this.temporary_items=this.temporary_items.filter((e=>"video"===ci.pretty_file_type(e.media_type))),this.$el.html("<div class='gallery-files videos grid'></div>"),this.updateMedia(),this.participant&&this.updateForParticipant()})),this.onUpdatedScreen()},filterEncryptedFiles:function(){return this.temporary_items.filter((e=>"video"===ci.pretty_file_type(e.media_type)))},updateEncryptedMedia:function(e){!this.$(".gallery-files.videos.grid").length&&this.$el.html("<div class='gallery-files videos grid'></div>"),this.updateMedia()},loadMoreFiles:function(){li(ri.preloader()).appendTo(this.$(".gallery-files")),this.messagesFileRequest({[this.filter_type]:!0,before:this.last_rsm_message},(()=>{this.temporary_items=this.temporary_items.filter((e=>"video"===ci.pretty_file_type(e.media_type))),this.updateMedia(!0)}))}}),nt.MediaFilesView=nt.MediaBaseView.extend({events:{"click .gallery-files.files .gallery-file":"onClickFile"},status:"files",_render:function(){this.$el.length&&0==this.$el.closest("body").length&&(this.$el=this.parent.$(".participants-details-media-wrap")),this.$el.html(li(ri.preloader())),this.active=!0,this.parent.children.image&&(this.parent.children.image.active=!1),this.parent.children.video&&(this.parent.children.video.active=!1),this.parent.children.voice&&(this.parent.children.voice.active=!1),this.all_messages_loaded=!1,this.filter_type="filter_files",this.temporary_items=[],this.encrypted?this.getMediaFromDecryptedMessages():this.messagesFileRequest({[this.filter_type]:!0},(()=>{this.temporary_items=this.temporary_items.filter((e=>"video"!=ci.pretty_file_type(e.media_type)&&"image"!=ci.pretty_file_type(e.media_type))),this.$el.html("<div class='gallery-files files'></div>"),this.updateMedia(),this.participant&&this.updateForParticipant()})),this.onUpdatedScreen()},filterEncryptedFiles:function(){return this.temporary_items.filter((e=>"video"!=ci.pretty_file_type(e.media_type)&&"image"!=ci.pretty_file_type(e.media_type)))},updateEncryptedMedia:function(e){!this.$(".gallery-files.files").length&&this.$el.html("<div class='gallery-files files'></div>"),this.updateMedia()},loadMoreFiles:function(){li(ri.preloader()).appendTo(this.$(".gallery-files")),this.messagesFileRequest({[this.filter_type]:!0,before:this.last_rsm_message},(()=>{this.temporary_items=this.temporary_items.filter((e=>"video"!=ci.pretty_file_type(e.media_type)&&"image"!=ci.pretty_file_type(e.media_type))),this.updateMedia(!0)}))}}),nt.MediaVoiceView=nt.MediaBaseView.extend({events:{"click .gallery-files.voice .gallery-file":"onClickFile"},status:"files",_render:function(){this.$el.length&&0==this.$el.closest("body").length&&(this.$el=this.parent.$(".participants-details-media-wrap")),this.$el.html(li(ri.preloader())),this.active=!0,this.parent.children.image&&(this.parent.children.image.active=!1),this.parent.children.video&&(this.parent.children.video.active=!1),this.parent.children.files&&(this.parent.children.files.active=!1),this.all_messages_loaded=!1,this.filter_type="filter_voice",this.temporary_items=[],this.encrypted?this.getMediaFromDecryptedMessages():this.messagesFileRequest({[this.filter_type]:!0},(()=>{this.temporary_items=this.temporary_items.filter((e=>e.voice)),this.$el.html("<div class='gallery-files voice'></div>"),this.updateMedia(),this.participant&&this.updateForParticipant()})),this.onUpdatedScreen()},filterEncryptedFiles:function(){return this.temporary_items.filter((e=>e.voice))},updateEncryptedMedia:function(e){!this.$(".gallery-files.voice").length&&this.$el.html("<div class='gallery-files voice'></div>"),this.updateMedia()},loadMoreFiles:function(){li(ri.preloader()).appendTo(this.$(".gallery-files")),this.messagesFileRequest({[this.filter_type]:!0,before:this.last_rsm_message},(()=>{this.temporary_items=this.temporary_items.filter((e=>e.voice)),this.updateMedia(!0)}))}}),nt.BlockedView=nt.BasicView.extend({status:"blocked",member_avatar_size:oi.AVATAR_SIZES.GROUPCHAT_MEMBER_ITEM,_initialize:function(e){this.contact=e.model,this.account=this.contact.account,this.$error=li('<p class="errors"/>')},_render:function(){this.$el.length&&0==this.$el.closest("body").length&&(this.$el=this.parent.$(".participants-edit-wrap")),this.$el.html(li(ri.preloader())),this.updateBlockedParticipants()},updateBlockedParticipants:function(){this.parent.$(".block-name-panel:not(.second-text)").html(nt.getString("group_settings__block_list__header")),this.contact.getBlockedParticipants((e=>{this.$el.html(""),li(e).find("query").children().each(((e,t)=>{let i={jid:li(t).attr("jid")?li(t).attr("jid"):li(t).text(),status:this.status},s=li(ri.group_chats.invited_member_item(i)),n=vi.getDefaultAvatar(i.jid);this.$el.append(s),s.find(".circle-avatar").setAvatar(n,this.member_avatar_size)})),li(e).find("query").children.length||this.$el.append(this.$error.text(nt.getString("groupchat_blocklist_empty"))),this.parent.contact_edit_view&&this.parent.contact_edit_view.showBlockButton()}),(e=>{this.$el.html(this.$error.text(li(e).find("text").text()||nt.getString("groupchat_you_have_no_permissions_to_do_it")))}))},unblockUser:function(e){let t=li(e.target).closest(".blocked-user"),i=t.data("jid"),s=i.toString().includes("@")?"jid":"domain",n=di({type:"set",to:this.contact.get("full_jid")||this.contact.get("jid")}).c("unblock",{xmlns:`${gi.NS.GROUP_CHAT}#block`}).c(s).t(i);this.account.sendFast(n,(()=>{t.remove(),this.parent.contact_edit_view&&this.parent.contact_edit_view.updateRemoveParticipantButton(),!this.$el.children().length&&this.$el.html(this.$error.text(nt.getString("groupchat_blocklist_empty")))}))},unblockUserByElement:function(e){let t=e.data("jid"),i=t.toString().includes("@")?"jid":"domain",s=di({type:"set",to:this.contact.get("full_jid")||this.contact.get("jid")}).c("unblock",{xmlns:`${gi.NS.GROUP_CHAT}#block`}).c(i).t(t);this.account.sendFast(s,(()=>{e.remove(),!this.$el.children().length&&this.$el.html(this.$error.text(nt.getString("groupchat_blocklist_empty")))}))},blockId:function(){ci.dialogs.ask_enter_value(nt.getString("contact_bar_block"),nt.getString("groupchat_dialog_block__text"),{input_placeholder_value:nt.getString("groupchat_dialog_block__input_placeholder")},{ok_button_text:nt.getString("contact_bar_block")}).done((e=>{if(e){let t=e.includes("@")?"jid":"domain",i=di({type:"set",to:this.contact.get("full_jid")||this.contact.get("jid")}).c("block",{xmlns:`${gi.NS.GROUP_CHAT}#block`}).c(t).t(e);this.account.sendIQFast(i,(()=>{this.updateBlockedParticipants()}),(function(e){ci.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it"))}))}}))}}),nt.ParticipantsView=nt.BasicView.extend({className:"overflow-visible",ps_selector:".members-list-wrap",ps_settings:{theme:"item-list"},template:ri.group_chats.participants,member_avatar_size:oi.AVATAR_SIZES.GROUPCHAT_MEMBER_ITEM,events:{"click .participant-wrap":"showParticipantProperties","keyup .participants-search-form":"keyUpSearch","click .close-search-icon":"clearSearch","click .btn-block":"blockParticipant","click .btn-kick":"kickParticipant"},_initialize:function(){this.account=this.model.account,this.participants=this.model.participants,this.participants.on("participants_updated",this.onParticipantsUpdated,this),this.model.on("change:status_updated",this.updateParticipantsList,this),this.$(this.ps_selector).perfectScrollbar(this.ps_settings)},_render:function(){return this.$el.html(this.template()).addClass("request-waiting"),this.participant_properties_panel=new nt.ParticipantPropertiesView({model:this.model}),this.updateParticipants(),this.$(".members-list-wrap").perfectScrollbar({theme:"item-list"}),this},updateParticipants:function(){this.model.participants.participantsRequest({version:this.participants.version},(e=>{let t=li(e).find("query").attr("version");this.participants.version>t||(t&&this.account.groupchat_settings.setParticipantsListVersion(this.model.get("jid"),t),this.participants.version<t&&this.participants.updateVersion(),this.renderParticipants())}),(()=>{this.$el.removeClass("request-waiting")}))},updateParticipantsList:function(){this.$el.find(".members-list-wrap tbody").html(""),this.updateParticipants()},onParticipantsUpdated:function(){this.$el.html(this.template()).addClass("request-waiting"),this.renderParticipants()},renderParticipants:function(){this.participants.each((e=>{this.renderMemberItem(e)})),this.$el.removeClass("request-waiting")},blockParticipant:function(e){let t=li(e.target).closest(".participant-wrap");ci.dialogs.ask(nt.getString("groupchat__dialog_block_member__header"),nt.getString("groupchat__dialog_block_member__confirm",[t.find(".participant-info .nickname").text()]),null,{ok_button_text:nt.getString("groupchat_block")}).done((e=>{if(e){let e=this.participants.get(t.attr("data-id"));e&&e.block((()=>{t.remove(),this.parent.updateScrollBar()}),(e=>{li(e).find("not-allowed").length&&ci.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it"))}))}}))},kickParticipant:function(e){let t=li(e.target).closest(".participant-wrap");ci.dialogs.ask(nt.getString("groupchat_kick_member"),nt.getString("groupchat_do_you_really_want_to_kick_membername",[t.find(".participant-info .nickname").text()]),null,{ok_button_text:nt.getString("groupchat_kick")}).done((e=>{if(e){let e=this.participants.get(t.attr("data-id"));e&&e.kick((()=>{t.remove(),this.parent.updateScrollBar()}),(e=>{li(e).find("not-allowed").length&&ci.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it"))}))}}))},renderMemberItem:function(e){if(!e||!e.attributes||!e.attributes.id)return e&&e.destroy(),void(e&&e.attributes&&this.account.groupchat_settings.removeParticipantFromList(this.model.get("jid"),e.attributes.id));let t=ui.clone(e.attributes);t.nickname=ui.escape(t.nickname),t.badge=ui.escape(t.badge),t.is_me=t.jid==this.account.get("jid"),t.pretty_present=t.present?pi(t.present).isValid()?pi(t.present).fromNow():pi(t.present.substr(0,t.present.length-1)).fromNow():"";let i=li(ri.group_chats.group_member_item(t)),s=this.$('tr[data-id="'+t.id+'"]');i.emojify(".badge",{emoji_size:16}),s.length?(s.hasClass("active")&&i.addClass("active"),i.insertBefore(s),s.detach()):t.is_me?i.prependTo(this.$(".members-list-wrap tbody")):i.appendTo(this.$(".members-list-wrap tbody")),this.updateMemberAvatar(t)},updateMemberAvatar:function(e){let t=vi.getDefaultAvatar(e.nickname||e.jid||e.id),i=e.id?this.$('tr[data-id="'+e.id+'"] .circle-avatar'):this.$('.list-item[data-jid="'+e.jid+'"] .circle-avatar');if(i.setAvatar(t,this.member_avatar_size),e.avatar){let t=this.account.chat_settings.getB64Avatar(e.id);if(this.account.chat_settings.getHashAvatar(e.id)==e.avatar&&t)i.setAvatar(t,this.member_avatar_size);else if(e.avatar_url)this.account.chat_settings.updateCachedAvatars(e.id,e.avatar,e.avatar_url),this.$('.list-item[data-id="'+e.id+'"] .circle-avatar').setAvatar(e.avatar_url,this.member_avatar_size),this.account.get("jid")===e.jid&&(this.model.my_info.set({avatar:e.avatar,b64_avatar:e.avatar_url}),this.model.trigger("update_my_info"));else{let t=`${gi.NS.PUBSUB_AVATAR_DATA}#${e.id}`;this.model.getAvatar(e.avatar,t,(t=>{this.account.chat_settings.updateCachedAvatars(e.id,e.avatar,t),this.$('.list-item[data-id="'+e.id+'"] .circle-avatar').setAvatar(t,this.member_avatar_size),this.account.get("jid")===e.jid&&(this.model.my_info.set("b64_avatar",t),this.model.trigger("update_my_info"))}))}}},showParticipantProperties:function(e){let t=li(e.target);if(t.closest(".buttons-wrap").length)return;let i=t.closest(".participant-wrap"),s=i.attr("data-id"),n=this.model.participants.get(s);i.attr("data-jid")&&i.attr("data-jid")===this.account.get("jid")&&(s=""),this.model.participants.participantsRequest({id:s},(e=>{let t=this.account.parseDataForm(li(e).find(`x[xmlns="${gi.NS.DATAFORM}"]`));this.participant_properties_panel.open(n,t)}))},keyUpSearch:function(e){e.keyCode!==oi.KEY_ESCAPE||nt.body.screen.get("right_contact")?this.searchParticipant():this.clearSearch(e)},searchParticipant:function(){let e=this.$(".participants-search-form input").val().toLowerCase();this.$(".members-list-wrap .participant-wrap").each(((t,i)=>{let s=li(i),n=s.data("id"),a=this.model.participants.find((e=>e.get("id")===n)),o=a.get("jid").toLowerCase(),r=a.get("nickname").toLowerCase();s.hideIf(r.indexOf(e)<0&&o.indexOf(e)<0)})),e?this.$(".close-search-icon").show():this.$(".close-search-icon").hide()},clearSearch:function(e){e&&e.preventDefault(),this.$(".search-input").val(""),this.searchParticipant()}}),nt.ParticipantsViewRight=nt.BasicView.extend({className:"overflow-visible",ps_settings:{theme:"item-list"},template:ri.group_chats.participants_right_panel,member_avatar_size:oi.AVATAR_SIZES.GROUPCHAT_MEMBER_ITEM,events:{"click .participant-wrap":"showParticipantProperties","keyup .participants-search-form":"keyUpSearch","click .close-search-icon":"clearSearch","click .btn-kick":"kickParticipantDialog","click .btn-edit-member":"showParticipantPropertiesEdit","click .btn-mute":"kickParticipantDialog"},_initialize:function(){this.account=this.model.account,this.participants=this.model.participants,this.participants.on("change",this.onParticipantsChanged,this),this.participants.on("participants_updated",this.onParticipantsUpdated,this),this.model.on("change:status_updated",this.updateParticipantsList,this),this.participant_properties_panel=this.addChild("participant_properties_panel",nt.ParticipantPropertiesViewRight,{model:this.model,el:this.parent.$(".participant-view-wrap")[0],parent:this.parent}),nt.on("update_screen",this.onUpdatedScreen,this),nt.on("update_layout",this.onUpdatedScreen,this)},_render:function(){return this.$el.html(this.template()).addClass("request-waiting"),this.updateParticipants(),this},onUpdatedScreen:function(){let e=nt.body.$el.height()-320;this.$el.css("min-height",`${e}px`)},updateParticipants:function(){this.model.participants.participantsRequest({version:this.participants.version},(e=>{let t=li(e).find("query").attr("version");this.participants.version>t||(t&&this.account.groupchat_settings.setParticipantsListVersion(this.model.get("jid"),t),this.participants.version<t&&this.participants.updateVersion(),this.renderParticipants())}),(()=>{this.$el.removeClass("request-waiting")}))},updateParticipantsList:function(){this.updateParticipants()},onParticipantsUpdated:function(){this.$el.html(this.template()).addClass("request-waiting"),this.renderParticipants()},onParticipantsChanged:function(){this.updateParticipants()},renderParticipants:function(){this.participants.each((e=>{this.renderMemberItem(e)})),this.$(".participants-search-form input").val()&&this.searchParticipant(),this.$el.removeClass("request-waiting")},blockParticipant:function(e){let t=li(e.target).closest(".participant-wrap");ci.dialogs.ask(nt.getString("groupchat__dialog_block_member__header"),nt.getString("groupchat__dialog_block_member__confirm",[t.find(".participant-info .nickname").text()]),null,{ok_button_text:nt.getString("groupchat_block")}).done((e=>{if(e){let e=this.participants.get(t.attr("data-id"));e&&e.block((()=>{t.remove(),this.parent.updateScrollBar()}),(e=>{li(e).find("not-allowed").length&&ci.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it"))}))}}))},kickParticipant:function(e){let t=li(e.target).closest(".participant-wrap");ci.dialogs.ask(nt.getString("groupchat_kick_member"),nt.getString("groupchat_do_you_really_want_to_kick_membername",[t.find(".participant-info .nickname").text()]),null,{ok_button_text:nt.getString("groupchat_kick")}).done((e=>{if(e){let e=this.participants.get(t.attr("data-id"));e&&e.kick((()=>{t.remove(),this.parent.updateScrollBar()}),(e=>{li(e).find("not-allowed").length&&ci.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it"))}))}}))},kickParticipantDialog:function(e){let t=li(e.target).closest(".participant-wrap");ci.dialogs.ask_extended(nt.getString("groupchat_kick_member"),nt.getString("groupchat_do_you_really_want_to_kick_membername",[t.find(".participant-info .nickname").text()]),null,{ok_button_text:nt.getString("groupchat_kick"),optional_button:"block",optional_button_text:nt.getString("groupchat_block")}).done((e=>{if(e)if("block"===e){let e=this.participants.get(t.attr("data-id"));e&&e.block((()=>{t.remove(),this.parent.updateScrollBar()}),(e=>{li(e).find("not-allowed").length&&ci.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it"))}))}else{this.participants.get(t.attr("data-id")).kick((()=>{t.remove(),this.parent.updateScrollBar()}),(e=>{li(e).find("not-allowed").length&&ci.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it"))}))}}))},renderMemberItem:function(e){if(!e||!e.attributes||!e.attributes.id)return e&&e.destroy(),void(e&&e.attributes&&this.account.groupchat_settings.removeParticipantFromList(this.model.get("jid"),e.attributes.id));let t=ui.clone(e.attributes);t.nickname=ui.escape(t.nickname),t.badge=ui.escape(t.badge),t.is_me=t.jid==this.account.get("jid"),t.pretty_present=t.present?pi(t.present).isValid()?pi(t.present).fromNow():pi(t.present.substr(0,t.present.length-1)).fromNow():"";let i=li(ri.group_chats.group_member_item_right(t)),s=this.$('tr[data-id="'+t.id+'"]');s.length?(s.hasClass("active")&&i.addClass("active"),i.insertBefore(s),s.detach()):t.is_me?i.prependTo(this.$(".members-list-wrap tbody")):i.appendTo(this.$(".members-list-wrap tbody")),this.updateMemberAvatar(t)},updateMemberAvatar:function(e){let t=vi.getDefaultAvatar(e.nickname||e.jid||e.id),i=e.id?this.$('tr[data-id="'+e.id+'"] .circle-avatar'):this.$('.list-item[data-jid="'+e.jid+'"] .circle-avatar');if(i.setAvatar(t,this.member_avatar_size),e.avatar){let t=this.account.chat_settings.getB64Avatar(e.id);if(this.account.chat_settings.getHashAvatar(e.id)==e.avatar&&t)i.setAvatar(t,this.member_avatar_size);else if(e.avatar_url)this.account.chat_settings.updateCachedAvatars(e.id,e.avatar,e.avatar_url),this.$('.list-item[data-id="'+e.id+'"] .circle-avatar').setAvatar(e.avatar_url,this.member_avatar_size),this.account.get("jid")===e.jid&&(this.model.my_info.set({avatar:e.avatar,b64_avatar:e.avatar_url}),this.model.trigger("update_my_info"));else{let t=`${gi.NS.PUBSUB_AVATAR_DATA}#${e.id}`;this.model.getAvatar(e.avatar,t,(t=>{this.account.chat_settings.updateCachedAvatars(e.id,e.avatar,t),this.$('.list-item[data-id="'+e.id+'"] .circle-avatar').setAvatar(t,this.member_avatar_size),this.account.get("jid")===e.jid&&(this.model.my_info.set("b64_avatar",t),this.model.trigger("update_my_info"))}))}}},showParticipantProperties:function(e){let t=li(e.target);if(t.closest(".buttons-wrap").length)return;let i=t.closest(".participant-wrap"),s=i.attr("data-id"),n=this.model.participants.get(s);i.attr("data-jid")&&i.attr("data-jid")===this.account.get("jid")&&(s=""),this.model.participants.participantsRequest({id:s},(e=>{let t=this.account.parseDataForm(li(e).find(`x[xmlns="${gi.NS.DATAFORM}"]`));this.participant_properties_panel.open(n,t)}))},showParticipantPropertiesEdit:function(e){let t=li(e.target).closest(".participant-wrap"),i=t.attr("data-id"),s=this.model.participants.get(i);t.attr("data-jid")&&t.attr("data-jid")===this.account.get("jid")&&(i=""),this.model.participants.participantsRequest({id:i},(e=>{let t=this.account.parseDataForm(li(e).find(`x[xmlns="${gi.NS.DATAFORM}"]`));this.participant_properties_panel.open(s,t),this.participant_properties_panel.showNamePanel(),this.participant_properties_panel.changeBackButton()}))},keyUpSearch:function(e){e.keyCode!==oi.KEY_ESCAPE||nt.body.screen.get("right_contact")?this.searchParticipant():this.clearSearch(e)},searchParticipant:function(){let e=this.$(".participants-search-form input").val().toLowerCase();this.$(".members-list-wrap .participant-wrap").each(((t,i)=>{let s=li(i),n=s.data("id"),a=this.model.participants.find((e=>e.get("id")===n)),o=a.get("jid").toLowerCase(),r=a.get("nickname").toLowerCase();s.hideIf(r.indexOf(e)<0&&o.indexOf(e)<0)})),e?this.$(".close-search-icon").show():this.$(".close-search-icon").hide()},clearSearch:function(e){e&&e.preventDefault(),this.$(".search-input").val(""),this.searchParticipant()}}),nt.ParticipantPropertiesView=nt.BasicView.extend({className:"modal dialog-modal edit-rights",template:ri.group_chats.participant_rights,member_details_avatar_size:oi.AVATAR_SIZES.PARTICIPANT_DETAILS_ITEM,ps_selector:".modal-content",ps_settings:{theme:"item-list"},events:{"click .btn-cancel-changes":"close","change .clickable-field input":"changeRights","click .btn-save-user-rights":"saveRights","click .participant-details-item:not(.unsubscribed) .nickname":"editNickname","change .circle-avatar input":"changeAvatar","click .btn-block-participant":"block","click .btn-kick-participant":"kick","click .btn-set-badge":"editBadge","click .btn-participant-messages":"getMessages","click .btn-chat":"getPrivateChat","click .property-variant":"changeTimerValue","keydown .rich-textarea":"checkKeydown","keyup .rich-textarea":"checkKeyup"},_initialize:function(){this.contact=this.model,this.account=this.model.account},open:function(e,t){e&&(this.participant=e,this.participant.on("change:badge",this.onBadgeUpdated,this),this.data_form=t,this.render(),this.$el.openModal({ready:()=>{this.$el.css("height",""),.1*li(window).height()+this.$el.height()>li(window).height()&&this.$el.css("height",.9*li(window).height()),this.$(".modal-content").css("max-height","calc(100% - "+(64+this.$(".header").height())+"px)"),this.scrollToTop(),this.updateSaveButton();let e={inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"left"};this.$(".select-timer .dropdown-button").dropdown(e),this.$(".participant-details-item .dropdown-button").dropdown(ui.extend(e,{alignment:"right"}))},complete:()=>{this.render(),this.$el.detach(),this.data.set("visible",!1)}}))},close:function(){this.$el.closeModal({complete:()=>{this.render(),this.$el.detach(),this.data.set("visible",!1)}})},render:function(){this.new_avatar="";let e,t=ui.clone(this.participant.attributes);t.nickname=ui.escape(t.nickname),t.blocked=t.blocked,t.subscription=null===t.subscription?null:"both",t.badge=ui.escape(t.badge),t.is_myself=t.jid===this.account.get("jid"),t.is_blocked_contact=this.account.blocklist.isBlocked(t.jid),t.incognito_chat=!(!this.contact.get("group_info")||"incognito"!==this.contact.get("group_info").privacy),this.contact.get("private_chat")?(this.$el.addClass("edit-rights-private"),e=li(ri.group_chats.private_participant_details(t))):e=li(ri.group_chats.participant_details_item(t)),this.$(".header").html(e),this.$(".buttons-wrap .button-wrap:not(.btn-chat-wrap):not(.btn-participant-messages-wrap)").switchClass("non-active",null===t.subscription),this.$(".btn-chat-wrap").switchClass("non-active",this.participant.get("jid")===this.account.get("jid")),this.updateMemberAvatar(this.participant),this.participant_messages=[],this.actual_rights=[],this.contact.get("private_chat")?(this.$(".modal-content").addClass("hidden"),this.$(".modal-footer").switchClass("hidden",this.participant.get("jid")!==this.account.get("jid"))):this.setActualRights(),this.updateScrollBar(),this.$(".participant-info #edit-nickname").on("focusout",(()=>{let e=this.$("#edit-nickname").getTextFromRichTextarea().trim();""===e&&(e=this.participant.get("nickname")),this.$(".participant-info #edit-nickname").hide(),this.$(".participant-info .nickname").show(),this.updateNickname(e)})),this.$(".content").perfectScrollbar({theme:"item-list"})},updateMemberAvatar:function(e){let t=e.get("id"),i=this.$(`.participant-details-item[data-id="${t}"] .circle-avatar`);if(e.image=vi.getDefaultAvatar(e.get("nickname")||e.get("jid")||t),i.setAvatar(e.image,this.member_details_avatar_size),this.$('.participant-details-item[data-id="'+e.id+'"]').emojify(".badge",{emoji_size:18}),e.get("avatar"))if(this.account.chat_settings.getHashAvatar(t)==e.get("avatar")&&this.account.chat_settings.getB64Avatar(t))i.setAvatar(this.account.chat_settings.getB64Avatar(t),this.member_details_avatar_size);else if(e.get("avatar_url"))i.setAvatar(e.get("avatar_url"),this.member_details_avatar_size);else{let i=gi.NS.PUBSUB_AVATAR_DATA+"#"+t;this.contact.getAvatar(e.get("avatar"),i,(e=>{this.$(".circle-avatar").setAvatar(e,this.member_details_avatar_size)}))}else this.account.chat_settings.getHashAvatar(t)&&i.setAvatar(this.account.chat_settings.getB64Avatar(t),this.member_details_avatar_size)},updateRightsView:function(e){!li(e.target).hasClass("non-active")&&this.render(this.participant)},getMessages:function(e){let t=this.account.chats.getChat(this.contact);t.messages_view=new nt.ParticipantMessagesView({model:t,contact:this.contact,participant:this.participant.attributes}),t.messages_view.messagesRequest(e,(()=>{this.close(),nt.body.setScreen("all-chats",{right:"participant_messages",model:t})}))},changeAvatar:function(e){let t=e.target;if(!t.files.length)return;let i=t.files[0];t.value="",i.size>oi.MAX_AVATAR_FILE_SIZE?ci.dialogs.error(nt.getString("group_settings__error__avatar_too_large")):i.type.startsWith("image")?ci.images.getAvatarFromFile(i).done((e=>{e&&(i.base64=e,this.new_avatar=i,this.$(".circle-avatar").addClass("changed").setAvatar(e,this.member_details_avatar_size),this.updateSaveButton())})):ci.dialogs.error(nt.getString("group_settings__error__wrong_image"))},changeTimerValue:function(e){let t=li(e.target),i=t.closest(".select-timer").find(".property-value"),s=t.closest(".right-item").find("input");t.attr("data-value")!==i.attr("data-value")&&(t.closest(".right-item").addClass("changed-timer changed"),this.updateSaveButton()),i.text(t.text()),i.attr("data-value",t.attr("data-value")),"0"===t.attr("data-value")?i.addClass("default-value").text(nt.getString("dialog_rights__button_set_timer")):i.hasClass("default-value")&&i.removeClass("default-value"),s.prop("checked")||s.click()},onBadgeUpdated:function(e){let t=ui.escape(e.get("badge"));this.updateBadge(t)},updateBadge:function(e){this.$(".badge").html(e).switchClass("hidden",!e),this.$(".participant-info").emojify(".badge")},updateButtons:function(e){this.$(".btn-save-user-rights").switchClass("non-active",!e)},updateSaveButton:function(){let e=this.$(".changed").length;this.updateButtons(e)},updateNickname:function(e){let t=this.$('.participant-details-item[data-id="'+this.participant.get("id")+'"]'),i=t.find(".nickname");i.html(gi.xmlescape(e)),t.emojify(".nickname"),e!==this.participant.get("nickname")?i.addClass("changed"):i.removeClass("changed"),this.updateSaveButton()},editNickname:function(){this.contact.get("private_chat")&&this.account.get("jid")!==this.participant.get("jid")||(this.$(".participant-info .nickname").hide(),this.$(".participant-info #edit-nickname").text(this.$(".participant-info .nickname").text()).show().placeCaretAtEnd())},editBadge:function(e){li(e.target).closest(".button-wrap").hasClass("non-active")||(this.edit_badge_panel=new nt.EditBadgeView({model:this}))},checkKeydown:function(e){e&&e.keyCode===oi.KEY_ENTER&&(e.preventDefault(),li(document.activeElement).blur())},checkKeyup:function(e){let t=li(e.target).getTextFromRichTextarea().trim();if("edit-nickname"===e.target.id){let e=t!==this.participant.get("nickname");this.updateButtons(e)}},retractUserMessages:function(){ci.dialogs.ask(nt.getString("dialog_delete_user_messages__header"),nt.getString("dialog_delete_user_messages__header",[this.participant.get("nickname")||this.participant.get("jid")||this.participant.get("id")]),null,{ok_button_text:nt.getString("delete")}).done((e=>{if(e&&this.participant.get("id")){this.account.chats.getChat(this.contact).retractMessagesByUser(this.participant.get("id"))}}))},block:function(){ci.dialogs.ask(nt.getString("groupchat__dialog_block_member__header"),nt.getString("groupchat__dialog_block_member__confirm",[this.participant.get("nickname")]),null,{ok_button_text:nt.getString("groupchat_block")}).done((e=>{e&&this.participant.block((()=>{this.close()}),(function(e){li(e).find("not-allowed").length&&ci.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it"))}))}))},kick:function(e){li(e.target).closest(".button-wrap").hasClass("non-active")||ci.dialogs.ask(nt.getString("groupchat_kick_member"),nt.getString("groupchat_do_you_really_want_to_kick_membername",[this.participant.get("nickname")]),null,{ok_button_text:nt.getString("groupchat_kick")}).done((e=>{e&&this.participant.kick((()=>{this.close()}),(e=>{li(e).find("not-allowed").length&&ci.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it"))}))}))},setActualRights:function(){this.$(".rights-wrap").html(""),this.data_form.fields&&this.data_form.fields.forEach((e=>{if("list-single"!==(e=ui.clone(e)).type&&("fixed"!==e.type||e.values&&0!=e.values[0]))"fixed"===e.type&&e.values&&this.$(".rights-wrap").append(li('<div class="rights-header"/>').text(e.values[0]));else{!e.values&&(e.values=[]);let t,i={pretty_name:e.label,name:e.var,expires:e.values?e.values[0]:void 0},s=li(ri.group_chats.restriction_item({name:i.name,pretty_name:i.pretty_name,type:e.type}));if(e.options&&(t=li(ri.group_chats.right_expire_variants({right_name:"default-"+i.name,expire_options:e.options})),s.append(t)),this.$(".rights-wrap").append(s),i.expires&&(this.actual_rights.push({name:i.name,expires:i.expires}),this.$(".right-item #"+i.name).prop("checked",!0).addClass(i.expires),0!=i.expires)){this.$(".right-item.restriction-"+i.name).find(".select-timer .property-value").attr("data-value",i.expires).removeClass("default-value").text(pi(1e3*Number(i.expires)).fromNow())}}}))},getPrivateChat:function(e){if(li(e.target).closest(".button-wrap").hasClass("non-active"))return;let t=this.participant.get("jid"),i=this.account.contacts.get(t);if(!t||this.contact.get("incognito_chat")){let e=di({to:this.contact.domain,type:"set"}).c("query",{xmlns:`${gi.NS.GROUP_CHAT}#create`}).c("peer-to-peer",{jid:this.contact.get("jid"),id:this.participant.get("id")});this.account.sendIQFast(e,(e=>{let t=li(e).find("query localpart").text()+"@"+this.contact.domain,i=this.account.contacts.mergeContact(t);i.set("group_chat",!0),i.set("subscription_preapproved",!0),i.pres("subscribed"),i.set("known",!0),i.set("removed",!1),setTimeout((()=>{i.pres("subscribe")}),500),this.close(),this.account.chats.openChat(i),this.account.chats.getChat(i).messages.createSystemMessage({from_jid:t,message:nt.getString("groupchat__private_chat__text_message_init",[this.participant.get("nickname"),this.contact.get("jid")])})}),(e=>{let t=li(e).find(`x[xmlns="${gi.NS.GROUP_CHAT}"] jid`).text();if(t){let e=this.account.contacts.mergeContact(t),i=this.account.chats.getChat(e);return this.close(),void(i&&i.trigger("open"))}let i=li(e).find('text[lang="en"]').text()||li(e).find("text").first().text()||nt.getString("groupchat_you_have_no_permissions_to_do_it");this.close(),ci.dialogs.error(i)}))}else{if(i&&i.get("in_roster"))return this.close(),void i.trigger("open_chat",i);this.close(),nt.add_contact_view.show({account:this.account,jid:t})}},changeRights:function(e){let t=li(e.target),i=t.closest(".right-item"),s=t.prop("id");t.prop("checked")?this.actual_rights.find((e=>e.name===s))?i.hasClass("changed-timer")?i.addClass("changed"):i.removeClass("changed"):i.addClass("changed"):this.actual_rights.find((e=>e.name===s))?i.addClass("changed"):(i.removeClass("changed"),i.hasClass("changed-timer")&&i.find(".timer-item-wrap .property-value").addClass("default-value").text(nt.getString("dialog_rights__button_set_timer")).attr("data-value","")),this.updateSaveButton()},saveRights:function(e){if(li(e.target).hasClass("non-active"))return;let t=li(e.target),i=(this.account.get("jid"),this.participant.get("id")),s=this.$(".participant-details-item .circle-avatar"),n=this.$(".participant-info .nickname").text(),a=this.new_avatar,o=!1,r=!1,c=di({type:"set",to:this.contact.get("full_jid")||this.contact.get("jid")}).c("query",{xmlns:gi.NS.GROUP_CHAT+"#members"}).c("user",{xmlns:gi.NS.GROUP_CHAT,id:i});if(this.$(".buttons-wrap .btn-save-user-rights").addClass("non-active"),a&&s.find(".preloader-wrap").addClass("visible").find(".preloader-wrapper").addClass("active"),n!=this.participant.get("nickname")&&(r=!0,c.c("nickname").t(n).up()),this.$(".right-item").each(((e,t)=>{if(li(t).hasClass("changed")){let e=li(t),i=e.find(".field input")[0].id;if(e.find(".field input:checked").val()){let t=e.find(".select-timer .timer-item-wrap .property-value").attr("data-value"),s=this.data_form.fields.find((e=>e.var===i)),n=this.data_form.fields.indexOf(s);s.values=[t],this.data_form.fields[n]=s,o=!0}else{let e=this.data_form.fields.find((e=>e.var===i));if(e.values.length){let t=this.data_form.fields.indexOf(e);e.values=[],this.data_form.fields[t]=e,o=!0}}}})),a&&this.contact.pubAvatar(a,"#"+i,(()=>{this.$(".buttons-wrap button").removeClass("non-active"),s.find(".preloader-wrap").removeClass("visible").find(".preloader-wrapper").removeClass("active"),this.$(`.participant-details-item[data-id="${i}"] .circle-avatar`).setAvatar(a.base64,this.member_details_avatar_size),this.close()}),(function(e){this.$(".buttons-wrap button").removeClass("non-active"),s.find(".preloader-wrap").removeClass("visible").find(".preloader-wrapper").removeClass("active");let t=li(e).find("text").text()||nt.getString("groupchat_you_have_no_permissions_to_do_it");!r&&ci.dialogs.error(t)})),r&&this.account.sendIQFast(c,(()=>{this.$(".buttons-wrap button").removeClass("non-active"),this.participant.set("nickname",n),this.close()}),(e=>{this.$(".buttons-wrap button").removeClass("non-active"),this.close(),li(e).find("not-allowed").length&&ci.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it"))})),o){let e=di({type:"set",to:this.contact.get("full_jid")||this.contact.get("jid")}).c("query",{xmlns:gi.NS.GROUP_CHAT+"#rights"});e=this.account.addDataFormToStanza(e,this.data_form),this.account.sendIQFast(e,(()=>{this.close()}),(e=>{this.close(),li(e).find("not-allowed").length&&ci.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it"))}))}t.blur()}}),nt.ParticipantPropertiesViewRight=nt.BasicView.extend({className:"modal dialog-modal edit-rights",template:ri.group_chats.participant_details_right,member_details_avatar_size:oi.AVATAR_SIZES.PARTICIPANT_DETAILS_ITEM,events:{"click .btn-back:not(.btn-top)":"close","click .btn-back.btn-top":"scrollToTopSmooth","click .btn-edit-participant":"showNamePanel","click .btn-back-name":"hidePanel","change .clickable-field input":"changeRights","click .btn-reset":"render","click .btn-reset-name":"resetPanel","click .btn-save-user-rights":"saveRights","change .circle-avatar input":"changeAvatar","click .btn-kick-participant":"kickParticipantDialog","click .btn-set-visibility-wrap":"setVisibility","click .info-hover":"onClickIcon","click .btn-set-badge":"editBadge","click .btn-participant-messages":"getMessages","click .btn-chat-participant":"getPrivateChat","click .property-variant":"changeTimerValue","click .set-groupchat-avatar-text":"clickAvatarInput","click .btn-choose-image":"chooseAvatar","click .btn-selfie":"makeSelfie","click .btn-emoji-panel":"makeEmojiAvatar","keydown .rich-textarea":"checkKeydown","keyup .rich-textarea":"checkKeyup","click .list-variant":"changeList"},_initialize:function(){this.contact=this.model,this.account=this.model.account},open:function(e,t){if(this.model.set("participant_hidden",!1),this.parent.scrollToTop(),this.parent.ps_container.length&&this.parent.ps_container.perfectScrollbar("destroy"),this.$(".participant-details-wrap").hideIf(this.model.get("participant_hidden")),!e)return;this.participant=e,this.participant.on("change:badge",this.onBadgeUpdated,this),this.participant.on("change:avatar_url",this.updateMemberAvatar,this),this.data_form=t,this.render(),this.updateSaveButton();let i={inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"left"};this.$(".select-timer .dropdown-button").dropdown(i),this.$(".circle-avatar.dropdown-button").dropdown(i),this.$(".participant-details-item .dropdown-button").dropdown(ui.extend(i,{alignment:"right"}))},close:function(){this.model.set("participant_hidden",!0),this.parent.ps_container.length&&(this.parent.ps_container.perfectScrollbar(ui.extend(this.parent.ps_settings||{},nt.ps_settings)),this.parent.onScroll()),this.ps_container&&this.ps_container.length&&this.ps_container.perfectScrollbar("destroy"),this.$(".participant-details-wrap").hideIf(this.model.get("participant_hidden"))},render:function(){this.$el.html(this.template(ui.extend({view:this},oi))),this.new_avatar="";let e,t=ui.clone(this.participant.attributes);t.nickname=ui.escape(t.nickname),t.blocked=t.blocked,t.pretty_present=t.present?pi(t.present).isValid()?pi(t.present).fromNow():pi(t.present.substr(0,t.present.length-1)).fromNow():"",t.subscription=null===t.subscription?null:"both",t.badge=ui.escape(t.badge),t.is_myself=t.jid===this.account.get("jid"),t.is_blocked_contact=this.account.blocklist.isBlocked(t.jid),t.incognito_chat=!(!this.contact.get("group_info")||"incognito"!==this.contact.get("group_info").privacy),this.contact.get("private_chat")?(this.$el.addClass("edit-rights-private"),e=li(ri.group_chats.private_participant_details_item_right(t))):e=li(ri.group_chats.participant_details_item_right(t)),this.$(".participant-details-info-wrap").html(e),this.$(".buttons-wrap .button-wrap:not(.btn-chat-wrap):not(.btn-participant-messages-wrap)").switchClass("non-active",null===t.subscription),this.$(".btn-chat-wrap").switchClass("non-active",this.participant.get("jid")===this.account.get("jid")),this.updateMemberAvatar(this.participant),this.participant_messages=[],this.actual_rights=[],this.contact.get("private_chat")?(this.$(".modal-content").addClass("hidden"),this.$(".modal-footer").switchClass("hidden",this.participant.get("jid")!==this.account.get("jid"))):this.setActualRights(),this.updateScrollBar(),this.$(".participant-info #edit-nickname").on("focusout",(()=>{let e=this.$("#edit-nickname").getTextFromRichTextarea().trim();""===e&&(e=this.participant.get("nickname")),this.$(".participant-info #edit-nickname").hide(),this.$(".participant-info .nickname").show(),this.updateNickname(e)})),this.ps_container=this.$(".participant-details-wrap"),this.ps_container.length&&this.ps_container.perfectScrollbar(ui.extend(this.parent.ps_settings||{},nt.ps_settings)),this.ps_container.on("ps-scroll-y",this.onScroll.bind(this)),this.onScroll(),this.participant_name_field=new nt.ParticipantNameRightWidget({el:this.$(".edit-participant-name-wrap")[0],model:this.participant,parent:this}),this.participant_badge_field=new nt.ParticipantBadgeRightWidget({el:this.$(".edit-participant-badge-wrap")[0],model:this.participant,parent:this}),this.updateList("image"),nt.once("update_css",this.updateIndicator,this),this.updateIndicator(),this.$(".participant-details-edit-wrap").hideIf(!0),this.$(".block-name:not(.second-text)").hideIf(!0)},updateIndicator:function(){this.$(".tabs .indicator").remove(),this.$(".tabs").tabs(),this.$(".indicator").addClass("ground-color-500")},showNamePanel:function(){this.$(".participant-details-edit-wrap").hideIf(!1),this.$(".btn-edit-participant").hideIf(!0),this.$(".parent-btn").hideIf(!0),this.$(".child-btn").hideIf(!1),this.$(".block-header").attr("style","background-color: rgba(255,255,255,0) !important;"),this.$(".block-name.second-text").text(""),this.$(".block-name:not(.second-text)").text(nt.getString("groupchat_member_edit")),this.$(".block-name:not(.second-text)").hideIf(!1),this.ps_container&&this.ps_container.length&&this.ps_container.perfectScrollbar("destroy"),this.ps_container=this.$(".participant-details-edit-wrap"),this.ps_container.length&&this.ps_container.perfectScrollbar(ui.extend(this.parent.ps_settings||{},nt.ps_settings))},changeBackButton:function(){this.$(".parent-btn").hideIf(!1),this.$(".child-btn").hideIf(!0)},hidePanel:function(){this.$(".participant-details-edit-wrap").hideIf(!0),this.$(".btn-edit-participant").hideIf(!1),this.$(".parent-btn").hideIf(!1),this.$(".child-btn").hideIf(!0),this.$(".block-name:not(.second-text)").hideIf(!0),this.ps_container=this.$(".participant-details-wrap"),this.ps_container.length&&this.ps_container.perfectScrollbar(ui.extend(this.parent.ps_settings||{},nt.ps_settings)),this.ps_container&&this.ps_container.length&&this.ps_container.perfectScrollbar(ui.extend(this.parent.ps_settings||{},nt.ps_settings)),this.onScroll()},resetPanel:function(){this.participant_name_field.updateValue(!0),this.participant_badge_field.updateValue(!0),this.new_avatar="",this.updateMemberAvatar(this.participant),this.updateSaveButton()},changeList:function(e){let t=li(e.target).closest(".list-variant"),i=t.data("value");this.$(".tabs").animate({scrollLeft:t.position().left},400),this.ps_container.animate({scrollTop:this.$(".bottom-block").position().top+this.ps_container.scrollTop()-120},400,(()=>{this.onScroll()})),this.$(".block-header .block-name.second-text").text(t.text()),this.updateList(i)},updateList:function(e){let t=this.child(e);!t&&(t=this.addList(e)),t&&(this.$(".tabs .list-variant a").removeClass("active"),this.$('.tabs .list-variant[data-value="'+e+'"] a').addClass("active"),t._render())},addList:function(e){let t;switch(e){case"image":t=nt.MediaImagesView;break;case"video":t=nt.MediaVideosView;break;case"files":t=nt.MediaFilesView;break;case"voice":t=nt.MediaVoiceView}return t?this.addChild(e,t,{model:this.model,participant:!0,el:this.$(".participants-details-media-wrap")[0]}):void 0},changeName:function(e){this.updateSaveButton()},changeBadge:function(e){this.updateSaveButton()},onClickIcon:function(e){let t=li(e.target).find(".value"),i="";t.each(((e,t)=>{let s=li(t).text();s&&""!=i&&(i+="\n"),s&&(i+=s),i&&ci.copyTextToClipboard(i,nt.getString("toast__copied_in_clipboard"),nt.getString("toast__not_copied_in_clipboard"))}))},scrollToTopSmooth:function(){this.$(".block-header").attr("style","background-color: rgba(255,255,255,0) !important;"),this.$(".block-name.second-text").text(""),this.$(".block-name.second-text").addClass("fade-out"),this.$(".block-name:not(.second-text)").removeClass("fade-out"),this.$(".btn-back").removeClass("btn-top"),this.$(".btn-back i").addClass("mdi-close").removeClass("mdi-arrow-right"),this.$(".buttons-wrap").hideIf(!1),this.$(".btn-edit").hideIf(!1),this.$(".btn-qr-code").hideIf(!1),this.ps_container.animate({scrollTop:0},400,(()=>{this.onScroll()}))},onScroll:function(){let e;this.ps_container[0].scrollTop>=220?(this.$(".block-header").attr("style","background-color: rgba(255,255,255,1) !important; -webkit-transition: none; -ms-transition: none;transition: none;"),this.$(".block-name.second-text").text(this.participant.get("nickname")),this.$(".block-name.second-text").removeClass("fade-out"),this.$(".block-name:not(.second-text)").addClass("fade-out")):this.ps_container[0].scrollTop>=170?(this.$(".block-header").attr("style","background-color: rgba(255,255,255,1) !important; -webkit-transition: none; -ms-transition: none;transition: none;"),this.$(".block-name.second-text").addClass("fade-out"),this.$(".block-name:not(.second-text)").removeClass("fade-out")):this.ps_container[0].scrollTop>=1?(this.$(".block-header").attr("style","background-color: rgba(255,255,255,0.5) !important;"),this.$(".block-name.second-text").addClass("fade-out"),this.$(".block-name:not(.second-text)").removeClass("fade-out")):(this.$(".block-header").attr("style","background-color: rgba(255,255,255,0) !important;"),this.$(".block-name.second-text").text(""),this.$(".block-name.second-text").addClass("fade-out"),this.$(".block-name:not(.second-text)").removeClass("fade-out")),this.$(".bottom-block")&&(e=this.$(".bottom-block").get(0).getBoundingClientRect().top),!ui.isUndefined(e)&&e<=170?(this.$(".btn-back").addClass("btn-top"),this.$(".participant-details-item .buttons-wrap").addClass("hidden2"),this.$(".btn-edit").hideIf(!0),this.$(".btn-qr-code").hideIf(!0),this.$(".btn-edit-participant").hideIf(!0),this.$(".block-header .block-name.second-text").text(this.$(".tabs .list-variant .active").text())):(this.$(".btn-back").removeClass("btn-top"),this.$(".participant-details-item .buttons-wrap").removeClass("hidden2"),this.$(".btn-edit").hideIf(!1),this.$(".btn-qr-code").hideIf(!1),this.$(".participant-details-edit-wrap").hasClass("hidden")&&this.$(".btn-edit-participant").hideIf(!1))},clickAvatarInput:function(e){this.$(".circle-avatar input").click()},updateMemberAvatar:function(e,t){let i=e.get("id"),s=this.$(".circle-avatar");if(e.image=vi.getDefaultAvatar(e.get("nickname")||e.get("jid")||i),s.setAvatar(e.image,this.member_details_avatar_size),s.removeClass("changed"),e.get("avatar"))if(this.account.chat_settings.getHashAvatar(i)==e.get("avatar")&&this.account.chat_settings.getB64Avatar(i)&&!t)s.setAvatar(this.account.chat_settings.getB64Avatar(i),this.member_details_avatar_size);else if(e.get("avatar_url"))s.setAvatar(e.get("avatar_url"),this.member_details_avatar_size);else{let t=gi.NS.PUBSUB_AVATAR_DATA+"#"+i;this.contact.getAvatar(e.get("avatar"),t,(e=>{this.$(".circle-avatar").setAvatar(e,this.member_details_avatar_size)}))}else this.account.chat_settings.getHashAvatar(i)&&s.setAvatar(this.account.chat_settings.getB64Avatar(i),this.member_details_avatar_size)},updateRightsView:function(e){!li(e.target).hasClass("non-active")&&this.render(this.participant)},getMessages:function(e){let t=this.account.chats.getChat(this.contact);t.messages_view=new nt.ParticipantMessagesView({model:t,contact:this.contact,participant:this.participant.attributes}),t.messages_view.messagesRequest(e,(()=>{nt.body.setScreen("all-chats",{right:"participant_messages",model:t}),this.open(this.participant,this.data_form)}))},chooseAvatar:function(){if(this.account.get("gallery_token")&&this.account.get("gallery_url")){(new nt.SetAvatarView).render({model:this.account,contact:this.contact,participant:this.participant,parent:this})}else this.clickAvatarInput()},makeSelfie:function(){if(this.account.get("gallery_token")&&this.account.get("gallery_url")){(new nt.WebcamProfileImageView).open({model:this.account,contact:this.contact,participant:this.participant,parent:this})}else this.clickAvatarInput()},makeEmojiAvatar:function(){if(this.account.get("gallery_token")&&this.account.get("gallery_url")){(new nt.EmojiProfileImageView).open({model:this.account,contact:this.contact,participant:this.participant,parent:this})}else this.clickAvatarInput()},changeAvatar:function(e){let t=e.target;if(!t.files.length)return;let i=t.files[0];t.value="",i.size>oi.MAX_AVATAR_FILE_SIZE?ci.dialogs.error(nt.getString("group_settings__error__avatar_too_large")):i.type.startsWith("image")?ci.images.getAvatarFromFile(i).done((e=>{e&&(i.base64=e,this.new_avatar=i,this.$(".participant-details-edit-wrap .circle-avatar").addClass("changed"),this.$(".circle-avatar").setAvatar(e,this.member_details_avatar_size),this.updateSaveButton())})):ci.dialogs.error(nt.getString("group_settings__error__wrong_image"))},changeTimerValue:function(e){let t=li(e.target),i=t.closest(".select-timer").find(".property-value"),s=t.closest(".right-item").find("input");t.attr("data-value")!==i.attr("data-value")&&(t.closest(".right-item").addClass("changed-timer changed"),this.updateSaveButton()),i.text(t.text()),i.attr("data-value",t.attr("data-value")),"0"===t.attr("data-value")?i.addClass("default-value").text(nt.getString("dialog_rights__button_set_timer")):i.hasClass("default-value")&&i.removeClass("default-value"),s.prop("checked")||s.click()},onBadgeUpdated:function(e){let t=ui.escape(e.get("badge"));this.updateBadge(t)},updateBadge:function(e){this.$(".badge").html(e).switchClass("hidden",!e),this.$(".participant-info").emojify(".badge"),this.$(".participant-info").emojify(".participant-edit-badge")},updateButtons:function(e){this.$(".btn-save-user-rights").switchClass("non-active",!e),this.$(".btn-save-user-rights").switchClass("fade-out",!e),this.$(".btn-edit-participant").switchClass("fade-out",e),e?(this.$(".block-name.second-text").html(nt.getString("edit_vcard")),this.$(".block-header .details-icon").removeClass("mdi-arrow-right").addClass("mdi-close"),this.$(".block-header .details-icon.parent-btn").removeClass("btn-back").addClass("btn-reset"),this.$(".block-header .details-icon.child-btn").removeClass("btn-back-name").addClass("btn-reset-name"),this.$(".block-header .block-name:not(.second-text)").addClass("fade-out"),this.$(".block-header .block-name.second-text").removeClass("fade-out")):(this.$(".block-header .details-icon").addClass("mdi-arrow-right").removeClass("mdi-close"),this.$(".block-header .details-icon.parent-btn").addClass("btn-back").removeClass("btn-reset"),this.$(".block-header .details-icon.child-btn").addClass("btn-back-name").removeClass("btn-reset-name"),this.$(".block-header .block-name:not(.second-text)").removeClass("fade-out"),this.$(".block-header .block-name.second-text").addClass("fade-out"))},updateSaveButton:function(){let e=this.$(".changed").length;this.updateButtons(e)},updateNickname:function(e){let t=this.$('.participant-details-item[data-id="'+this.participant.get("id")+'"]'),i=t.find(".nickname");i.html(gi.xmlescape(e)),t.emojify(".nickname"),e!==this.participant.get("nickname")?i.addClass("changed"):i.removeClass("changed"),this.updateSaveButton()},editNickname:function(){this.contact.get("private_chat")&&this.account.get("jid")!==this.participant.get("jid")||(this.$(".participant-info .nickname").hide(),this.$(".participant-info #edit-nickname").text(this.$(".participant-info .nickname").text()).show().placeCaretAtEnd())},editBadge:function(e){li(e.target).closest(".button-wrap").hasClass("non-active")||(this.edit_badge_panel=new nt.EditBadgeView({model:this}))},checkKeydown:function(e){e&&e.keyCode===oi.KEY_ENTER&&(e.preventDefault(),li(document.activeElement).blur())},checkKeyup:function(e){let t=li(e.target).getTextFromRichTextarea().trim();if("edit-nickname"===e.target.id){let e=t!==this.participant.get("nickname");this.updateButtons(e)}},retractUserMessages:function(){ci.dialogs.ask(nt.getString("dialog_delete_user_messages__header"),nt.getString("dialog_delete_user_messages__header",[this.participant.get("nickname")||this.participant.get("jid")||this.participant.get("id")]),null,{ok_button_text:nt.getString("delete")}).done((e=>{if(e&&this.participant.get("id")){this.account.chats.getChat(this.contact).retractMessagesByUser(this.participant.get("id"))}}))},block:function(){ci.dialogs.ask(nt.getString("groupchat__dialog_block_member__header"),nt.getString("groupchat__dialog_block_member__confirm",[this.participant.get("nickname")]),null,{ok_button_text:nt.getString("groupchat_block")}).done((e=>{e&&this.participant.block((()=>{this.close()}),(function(e){li(e).find("not-allowed").length&&ci.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it"))}))}))},kick:function(e){li(e.target).closest(".button-wrap").hasClass("non-active")||ci.dialogs.ask(nt.getString("groupchat_kick_member"),nt.getString("groupchat_do_you_really_want_to_kick_membername",[this.participant.get("nickname")]),null,{ok_button_text:nt.getString("groupchat_kick")}).done((e=>{e&&this.participant.kick((()=>{this.close()}),(e=>{li(e).find("not-allowed").length&&ci.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it"))}))}))},kickParticipantDialog:function(e){li(e.target).closest(".button-wrap").hasClass("non-active")||ci.dialogs.ask_extended(nt.getString("groupchat_kick_member"),nt.getString("groupchat_do_you_really_want_to_kick_membername",[this.participant.get("nickname")]),null,{ok_button_text:nt.getString("groupchat_kick"),optional_button:"block",optional_button_text:nt.getString("groupchat_block")}).done((e=>{e&&("block"===e?this.participant.block((()=>{this.close(),this.parent.participants._render()}),(e=>{li(e).find("not-allowed").length&&ci.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it"))})):this.participant.kick((()=>{this.close(),this.parent.participants._render()}),(e=>{li(e).find("not-allowed").length&&ci.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it"))})))}))},setVisibility:function(e){ci.dialogs.error("Feature not yet implemented")},setActualRights:function(){this.$(".rights-wrap").html(""),this.data_form.fields&&this.data_form.fields.forEach((e=>{if("list-single"===(e=ui.clone(e)).type||"fixed"===e.type&&(!e.values||0==e.values[0]||e.values&&e.label)){!e.values&&(e.values=[]);let t,i={pretty_name:e.label,name:e.var,expires:e.values?e.values[0]:void 0},s=li(ri.group_chats.restriction_item({name:i.name,pretty_name:i.pretty_name,type:e.type}));if(e.options&&(t=li(ri.group_chats.right_expire_variants({right_name:"default-"+i.name,expire_options:e.options})),s.append(t)),this.$(".rights-wrap").append(s),i.expires&&(this.actual_rights.push({name:i.name,expires:i.expires}),this.$(".right-item #"+i.name).prop("checked",!0).addClass(i.expires),0!=i.expires)){let e=this.$(".right-item.restriction-"+i.name);e.find(".select-timer .property-value").length?e.find(".select-timer .property-value").attr("data-value",i.expires).removeClass("default-value").text(pi(1e3*Number(i.expires)).fromNow()):(e.append(li('<div class="select-timer"/>')),e.find(".select-timer").attr("data-value",i.expires).text(pi(1e3*Number(i.expires)).fromNow()))}}else"fixed"===e.type&&e.values&&this.$(".rights-wrap").append(li('<div class="rights-header"/>').text(e.values[0]))}))},getPrivateChat:function(e){if(li(e.target).closest(".button-wrap").hasClass("non-active"))return;let t=this.participant.get("jid"),i=this.account.contacts.get(t);if(!t||this.contact.get("incognito_chat")){let e=di({to:this.contact.domain,type:"set"}).c("query",{xmlns:`${gi.NS.GROUP_CHAT}#create`}).c("peer-to-peer",{jid:this.contact.get("jid"),id:this.participant.get("id")});this.account.sendIQFast(e,(e=>{let t=li(e).find("query localpart").text()+"@"+this.contact.domain,i=this.account.contacts.mergeContact(t);i.set("group_chat",!0),i.set("subscription_preapproved",!0),i.pres("subscribed"),i.set("known",!0),i.set("removed",!1),setTimeout((()=>{i.pres("subscribe")}),500),this.close(),i.set("in_roster",!0),i.trigger("open_chat",i),i.trigger("remove_invite",i),this.account.chats.getChat(i).messages.createSystemMessage({from_jid:t,message:nt.getString("groupchat__private_chat__text_message_init",[this.participant.get("nickname"),this.contact.get("jid")])})}),(e=>{let t=li(e).find(`x[xmlns="${gi.NS.GROUP_CHAT}"] jid`).text();if(t){let e=this.account.contacts.mergeContact(t),i=this.account.chats.getChat(e);return this.close(),void(i&&i.trigger("open"))}let i=li(e).find('text[lang="en"]').text()||li(e).find("text").first().text()||nt.getString("groupchat_you_have_no_permissions_to_do_it");this.close(),ci.dialogs.error(i)}))}else{if(i&&i.get("in_roster"))return this.close(),void i.trigger("open_chat",i);this.close(),nt.add_contact_view.show({account:this.account,jid:t})}},changeRights:function(e){let t=li(e.target),i=t.closest(".right-item"),s=t.prop("id");t.prop("checked")?this.actual_rights&&!this.actual_rights.find((e=>e.name===s))||i.hasClass("changed-timer")?i.addClass("changed"):i.removeClass("changed"):this.actual_rights&&this.actual_rights.find((e=>e.name===s))?i.addClass("changed"):(i.removeClass("changed"),i.hasClass("changed-timer")&&i.find(".timer-item-wrap .property-value").addClass("default-value").text(nt.getString("dialog_rights__button_set_timer")).attr("data-value","")),this.updateSaveButton()},saveRights:function(e){if(li(e.target).hasClass("non-active"))return;let t=li(e.target),i=(this.account.get("jid"),this.participant.get("id")),s=this.$(".participant-details-item .circle-avatar"),n=this.$(".participant-name-input").val(),a=this.$(".participant-badge-input").val(),o=this.new_avatar,r=!1,c=!1,l=di({type:"set",to:this.contact.get("full_jid")||this.contact.get("jid")}).c("query",{xmlns:gi.NS.GROUP_CHAT+"#members"}).c("user",{xmlns:gi.NS.GROUP_CHAT,id:i});if(this.$(".buttons-wrap .btn-save-user-rights").addClass("non-active"),o&&s.find(".preloader-wrap").addClass("visible").find(".preloader-wrapper").addClass("active"),n!=this.participant.get("nickname")&&(c=!0,l.c("nickname").t(n).up()),Array.from(a).length>32?ci.dialogs.error(nt.getString("groupchat__set_badge__error_length")):a!=this.participant.get("badge")&&(c=!0,l.c("badge").t(a).up()),this.$(".right-item").each(((e,t)=>{if(li(t).hasClass("changed")){let e=li(t),i=e.find(".field input")[0].id;if(e.find(".field input:checked").val()){let t=e.find(".select-timer .timer-item-wrap .property-value").attr("data-value"),s=this.data_form.fields.find((e=>e.var===i)),n=this.data_form.fields.indexOf(s);s.values=[t],this.data_form.fields[n]=s,r=!0}else{let e=this.data_form.fields.find((e=>e.var===i));if(e.values.length){let t=this.data_form.fields.indexOf(e);e.values=[],this.data_form.fields[t]=e,r=!0}}}})),o&&this.contact.pubAvatar(o,"#"+i,(()=>{s.find(".preloader-wrap").removeClass("visible").find(".preloader-wrapper").removeClass("active"),this.$(".circle-avatar").setAvatar(o.base64,this.member_details_avatar_size),this.close()}),(function(e){s.find(".preloader-wrap").removeClass("visible").find(".preloader-wrapper").removeClass("active");let t=li(e).find("text").text()||nt.getString("groupchat_you_have_no_permissions_to_do_it");!c&&ci.dialogs.error(t),this.close()})),c&&this.account.sendIQFast(l,(()=>{this.$(".buttons-wrap button").removeClass("non-active"),this.participant.set("nickname",n),this.close()}),(e=>{this.$(".buttons-wrap button").removeClass("non-active"),this.close(),li(e).find("not-allowed").length&&ci.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it"))})),r){let e=di({type:"set",to:this.contact.get("full_jid")||this.contact.get("jid")}).c("query",{xmlns:gi.NS.GROUP_CHAT+"#rights"});e=this.account.addDataFormToStanza(e,this.data_form),this.account.sendIQFast(e,(()=>{this.close()}),(e=>{this.close(),li(e).find("not-allowed").length&&ci.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it"))}))}t.blur()}}),nt.EditBadgeView=nt.BasicView.extend({className:"modal edit-badge",template:ri.group_chats.badge_edit_view,events:{"click .btn-cancel":"close","click .btn-save":"saveNewBadge","keydown .badge-text":"checkKey"},_initialize:function(){this.account=this.model.account,this.contact=this.model.contact,this.participant=this.model.participant,this.$el.openModal({ready:()=>{this.participant.get("badge")?this.typeEmoticon(this.participant.get("badge")):this.$(".badge-text").focus()},complete:()=>{this.$el.detach(),this.data.set("visible",!1)}});let e,t=this.$(".insert-emoticon"),i=this.$(".emoticons-panel-wrap"),s=this.$(".emoticons-panel");for(let e in fi.all){let t=li('<div class="emoji-list-wrap"/>'),i=e.replace(/ /g,"_");li(`<div id=${i} class="emoji-list-header">${nt.getString(oi.EMOJI_LIST_NAME(e))}</div>`).appendTo(t),ui.each(fi.all[e],(function(e){li('<div class="emoji-wrap"/>').html(e.emojify({emoji_size:24,sprite:i})).appendTo(t)})),t.appendTo(s),s.siblings(".emoji-menu").append(fi.all[e][0].emojify({href:i,title:oi.EMOJI_LIST_NAME(e),tag_name:"a",emoji_size:20}))}s.perfectScrollbar(ui.extend({theme:"item-list"},nt.ps_settings)),this.$(".emoji-menu .emoji").click((e=>{s[0].scrollTop=this.$(".emoji-list-wrap "+e.target.attributes.href.value)[0].offsetTop-4})),t.hover((t=>{t&&t.preventDefault&&t.preventDefault(),i.addClass("opened"),e&&clearTimeout(e),s.perfectScrollbar("update")}),(t=>{t&&t.preventDefault&&t.preventDefault(),e&&clearTimeout(e),e=setTimeout((function(){i.is(":hover")||i.removeClass("opened")}),800)})),i.hover(null,(t=>{t&&t.preventDefault&&t.preventDefault(),e&&clearTimeout(e),e=setTimeout((function(){i.removeClass("opened")}),200)})),i.mousedown((e=>{if(e&&e.preventDefault&&e.preventDefault(),e.button)return;let t=li(e.target).closest(".emoji-wrap").find(".emoji");t.length&&this.typeEmoticon(t.data("emoji"))}))},close:function(){this.$el.closeModal({complete:()=>{this.$el.detach(),this.data.set("visible",!1)}})},saveNewBadge:function(){let e=this.$(".badge-text").getTextFromRichTextarea();if(Array.from(e).length>32)this.$(".modal-content .error").text(nt.getString("groupchat__set_badge__error_length"));else if(e!=this.participant.get("badge")){let t=di({type:"set",to:this.contact.get("full_jid")||this.contact.get("jid")}).c("query",{xmlns:`${gi.NS.GROUP_CHAT}#members`}).c("user",{xmlns:gi.NS.GROUP_CHAT,id:this.participant.get("id")}).c("badge").t(e);this.account.sendIQFast(t,(()=>{this.model.updateBadge(e),this.close()}),(()=>{this.$(".modal-content .error").text(nt.getString("groupchat_you_have_no_permissions_to_do_it"))}))}},typeEmoticon:function(e){let t=e.emojify({tag_name:"span"});this.$(".badge-text").focus().pasteHtmlAtCaret(t)},checkKey:function(e){e.keyCode===oi.KEY_ENTER&&(e.preventDefault(),this.saveNewBadge())}}),nt.DefaultRestrictionsView=nt.BasicView.extend({className:"modal dialog-modal edit-default-restrictions",template:ri.group_chats.default_restrictions,events:{"click .btn-default-restrictions-save":"saveChanges","click .btn-default-restrictions-cancel":"close","change #default_restriction_expires":"changeExpiresTime","click .group-info-editor .property-variant":"changePropertyValue","click .select-timer .property-variant":"changeTimerValue","click .clickable-field input":"changeRestriction","keyup .clickable-field input":"keyUpInput","change .clickable-field input":"updateSaveButton"},_initialize:function(){this.contact=this.model,this.account=this.contact.account},open:function(){this.update((()=>{this.$el.openModal({ready:()=>{this.$(".select-timer .dropdown-button").dropdown({inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"left"}),this.updateScrollBar()},complete:()=>{this.$el.detach(),this.data.set("visible",!1)}})}))},close:function(){this.$el.closeModal({complete:()=>{this.hide.bind(this)}})},update:function(e){this.$(".btn-default-restrictions-save").addClass("non-active"),this.default_restrictions=[],this.actual_default_restrictions=[],this.$("button").blur();let t=di({type:"get",to:this.contact.get("full_jid")||this.contact.get("jid")}).c("query",{xmlns:`${gi.NS.GROUP_CHAT}#default-rights`});this.account.sendFast(t,(t=>{this.showDefaultRestrictions(t),e&&e()}),(()=>{ci.callback_popup_message(nt.getString("groupchat_you_have_no_permissions_to_do_it"),3e3)}))},updateSaveButton:function(){let e=!1;this.$(".default-restrictions-list-wrap .right-item").each(((t,i)=>{let s=li(i),n=s.find("input").attr("id"),a=s.find(".select-timer .property-value").attr("data-value");n=n.slice(8,n.length),this.actual_default_restrictions.find((e=>e.name==n&&e.expires==a))||(s.find("input").prop("checked")||this.actual_default_restrictions.find((e=>e.name==n)))&&(e=!0)})),this.$(".btn-default-restrictions-save").switchClass("non-active",!e)},changeRestriction:function(e){let t=li(e.target);t.prop("checked")||t.closest(".right-item").find(".select-timer .property-value").attr("data-value","").addClass("default-value").text(nt.getString("dialog_rights__button_set_timer"))},keyUpInput:function(e){e&&e.keyCode===oi.KEY_ENTER&&li(e.target).click()},changePropertyValue:function(e){let t=li(e.target),i=t.closest(".property-field").find(".property-value");i.text(t.text()),i.attr("data-value",t.attr("data-value"))},changeTimerValue:function(e){let t=li(e.target),i=t.closest(".select-timer").find(".property-value"),s=t.closest(".right-item").find("input");i.text(t.text()),i.attr("data-value",t.attr("data-value")),0==t.attr("data-value")?(i.addClass("default-value"),i.text(nt.getString("dialog_rights__button_set_timer"))):i.hasClass("default-value")&&i.removeClass("default-value"),s.prop("checked")||s.prop("checked",!0),this.updateSaveButton()},showDefaultRestrictions:function(e){let t=this.account.parseDataForm(li(e).find(`x[xmlns="${gi.NS.DATAFORM}"]`));t&&(this.default_restrictions=ui.clone(t)),t.fields.forEach((e=>{if("fixed"===e.type||"hidden"===e.type)return;let t={pretty_name:e.label,name:e.var,expires:e.values?e.values[0]:void 0},i=this.$(".default-restrictions-list-wrap .right-item.restriction-default-"+t.name),s=li(ri.group_chats.restriction_item({name:"default-"+t.name,pretty_name:t.pretty_name,type:e.type})),n=li(ri.group_chats.right_expire_variants({right_name:"default-"+t.name,expire_options:e.options}));if(i.length&&i.detach(),s.append(n),this.$(".default-restrictions-list-wrap").append(s),t.expires&&(this.actual_default_restrictions.push({name:t.name,expires:t.expires}),this.$(".right-item #default-"+t.name).prop("checked",!0).addClass(t.expires),0!=t.expires)){this.$(".right-item.restriction-default-"+t.name).find(".select-timer .property-value").attr("data-value",t.expires).removeClass("default-value").text(e.options.find((e=>e.value===t.expires)).label)}}))},saveChanges:function(){if(this.$(".btn-default-restrictions-save").hasClass("non-active"))return;this.$("button").blur();let e=di({to:this.contact.get("full_jid")||this.contact.get("jid"),type:"set"}).c("query",{xmlns:`${gi.NS.GROUP_CHAT}#default-rights`}),t=!1,i=ui.clone(this.default_restrictions);this.$(".default-restrictions-list-wrap .right-item").each(((e,s)=>{let n=li(s),a=n.find("input").attr("id"),o=n.find(".select-timer .property-value").attr("data-value");if(a=a.slice(8,a.length),!this.actual_default_restrictions.find((e=>e.name==a&&e.expires==o)))if(n.find("input").prop("checked")){let e=i.fields.find((e=>e.var===a)),s=i.fields.indexOf(e);e.values=[o],i.fields[s]=e,t=!0}else if(this.actual_default_restrictions.find((e=>e.name==a))){let e=i.fields.find((e=>e.var===a)),s=i.fields.indexOf(e);e.values=[""],i.fields[s]=e,t=!0}})),t&&(this.account.addDataFormToStanza(e,i),this.account.sendIQFast(e,(()=>{this.close()}),(e=>{let t=li(e).find("error text").text()||nt.getString("groupchat_you_have_no_permissions_to_do_it");ci.dialogs.error(t),this.close()})))},changeExpiresTime:function(e){let t=li(e.target),i=t.val(),s=t.prev();"0"==t.val()?s.find(".restriction-description").text(nt.getString("groupchat__rights_timer__indefinitely")):s.find(".restriction-description").text(nt.getString("groupchat__rights_timer__text_expire",[Number(i)])),s.find("input").removeClass().addClass(i),t.remove()}}),nt.DefaultRestrictionsRightView=nt.BasicView.extend({className:"modal dialog-modal edit-default-restrictions",template:ri.group_chats.default_restrictions_right,events:{"click .btn-default-restrictions-save":"saveChanges","click .btn-default-restrictions-cancel":"hideRestrictions","click .btn-back":"hideRestrictions","click .btn-reset":"showRestrictions","change #default_restriction_expires":"changeExpiresTime","click .group-info-editor .property-variant":"changePropertyValue","click .select-timer .property-variant":"changeTimerValue","click .clickable-field input":"changeRestriction","keyup .clickable-field input":"keyUpInput","change .clickable-field input":"updateSaveButton"},_initialize:function(){this.contact=this.model,this.account=this.contact.account,this.model.set("restrictions_hidden",!0)},render:function(){this.$el.html(this.template(ui.extend({view:this},oi))),this.$(".restrictions-wrap").hideIf(this.model.get("restrictions_hidden"))},showRestrictions:function(e){this.model.set("restrictions_hidden",!1),this.update((()=>{this.$(".select-timer .dropdown-button").dropdown({inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"left"}),this.$(".restrictions-wrap").hideIf(this.model.get("restrictions_hidden")),this.updateSaveButton()}))},hideRestrictions:function(e){this.parent.hideRestrictions()},open:function(){this.update((()=>{this.$el.openModal({ready:()=>{this.$(".select-timer .dropdown-button").dropdown({inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"left"}),this.updateScrollBar()},complete:()=>{this.$el.detach(),this.data.set("visible",!1)}})}))},update:function(e){this.$(".btn-default-restrictions-save").addClass("fade-out"),this.default_restrictions=[],this.actual_default_restrictions=[],this.$("button").blur();let t=di({type:"get",to:this.contact.get("full_jid")||this.contact.get("jid")}).c("query",{xmlns:`${gi.NS.GROUP_CHAT}#default-rights`});this.account.sendFast(t,(t=>{this.showDefaultRestrictions(t),e&&e()}),(()=>{ci.callback_popup_message(nt.getString("groupchat_you_have_no_permissions_to_do_it"),3e3)}))},updateSaveButton:function(){let e=!1;this.$(".default-restrictions-list-wrap .right-item").each(((t,i)=>{let s=li(i),n=s.find("input").attr("id"),a=s.find(".select-timer .property-value").attr("data-value");n=n.slice(8,n.length),this.actual_default_restrictions.find((e=>e.name==n&&e.expires==a))||(s.find("input").prop("checked")||this.actual_default_restrictions.find((e=>e.name==n)))&&(e=!0)})),this.$(".btn-default-restrictions-save").switchClass("fade-out",!e),e?(this.$(".block-name.second-text").html(nt.getString("edit_vcard")),this.$(".restrictions-header .details-icon").removeClass("mdi-arrow-right").addClass("mdi-close"),this.$(".restrictions-header .details-icon").removeClass("btn-back").addClass("btn-reset"),this.$(".restrictions-header .block-name:not(.second-text)").addClass("fade-out"),this.$(".restrictions-header .block-name.second-text").removeClass("fade-out")):(this.$(".restrictions-header .details-icon").addClass("mdi-arrow-right").removeClass("mdi-close"),this.$(".restrictions-header .details-icon").addClass("btn-back").removeClass("btn-reset"),this.$(".restrictions-header .block-name:not(.second-text)").removeClass("fade-out"),this.$(".restrictions-header .block-name.second-text").addClass("fade-out"))},changeRestriction:function(e){let t=li(e.target);t.prop("checked")||t.closest(".right-item").find(".select-timer .property-value").attr("data-value","").addClass("default-value").text(nt.getString("dialog_rights__button_set_timer"))},keyUpInput:function(e){e&&e.keyCode===oi.KEY_ENTER&&li(e.target).click()},changePropertyValue:function(e){let t=li(e.target),i=t.closest(".property-field").find(".property-value");i.text(t.text()),i.attr("data-value",t.attr("data-value"))},changeTimerValue:function(e){let t=li(e.target),i=t.closest(".select-timer").find(".property-value"),s=t.closest(".right-item").find("input");i.text(t.text()),i.attr("data-value",t.attr("data-value")),0==t.attr("data-value")?(i.addClass("default-value"),i.text(nt.getString("dialog_rights__button_set_timer"))):i.hasClass("default-value")&&i.removeClass("default-value"),s.prop("checked")||s.prop("checked",!0),this.updateSaveButton()},showDefaultRestrictions:function(e){let t=this.account.parseDataForm(li(e).find(`x[xmlns="${gi.NS.DATAFORM}"]`));t&&(this.default_restrictions=ui.clone(t)),t.fields.forEach((e=>{if("fixed"===e.type||"hidden"===e.type)return;let t={pretty_name:e.label,name:e.var,expires:e.values?e.values[0]:void 0},i=this.$(".default-restrictions-list-wrap .right-item.restriction-default-"+t.name),s=li(ri.group_chats.restriction_item({name:"default-"+t.name,pretty_name:t.pretty_name,type:e.type})),n=li(ri.group_chats.right_expire_variants({right_name:"default-"+t.name,expire_options:e.options}));if(i.length&&i.detach(),s.append(n),this.$(".default-restrictions-list-wrap").append(s),t.expires&&(this.actual_default_restrictions.push({name:t.name,expires:t.expires}),this.$(".right-item #default-"+t.name).prop("checked",!0).addClass(t.expires),0!=t.expires)){this.$(".right-item.restriction-default-"+t.name).find(".select-timer .property-value").attr("data-value",t.expires).removeClass("default-value").text(e.options.find((e=>e.value===t.expires)).label)}}))},saveChanges:function(){if(this.$(".btn-default-restrictions-save").hasClass("fade-out"))return;this.$(".btn-default-restrictions-save").addClass("fade-out"),this.$(".edit-save-preloader.preloader-wrap").addClass("visible").find(".preloader-wrapper").addClass("active"),this.$("button").blur();let e=di({to:this.contact.get("full_jid")||this.contact.get("jid"),type:"set"}).c("query",{xmlns:`${gi.NS.GROUP_CHAT}#default-rights`}),t=!1,i=ui.clone(this.default_restrictions);this.$(".default-restrictions-list-wrap .right-item").each(((e,s)=>{let n=li(s),a=n.find("input").attr("id"),o=n.find(".select-timer .property-value").attr("data-value");if(a=a.slice(8,a.length),!this.actual_default_restrictions.find((e=>e.name==a&&e.expires==o)))if(n.find("input").prop("checked")){let e=i.fields.find((e=>e.var===a)),s=i.fields.indexOf(e);e.values=[o],i.fields[s]=e,t=!0}else if(this.actual_default_restrictions.find((e=>e.name==a))){let e=i.fields.find((e=>e.var===a)),s=i.fields.indexOf(e);e.values=[""],i.fields[s]=e,t=!0}})),t&&(this.account.addDataFormToStanza(e,i),this.account.sendIQFast(e,(()=>{this.$(".edit-save-preloader.preloader-wrap").removeClass("visible").find(".preloader-wrapper").removeClass("active"),this.hideRestrictions()}),(e=>{let t=li(e).find("error text").text()||nt.getString("groupchat_you_have_no_permissions_to_do_it");ci.dialogs.error(t),this.$(".edit-save-preloader.preloader-wrap").removeClass("visible").find(".preloader-wrapper").removeClass("active"),this.hideRestrictions()})))},changeExpiresTime:function(e){let t=li(e.target),i=t.val(),s=t.prev();"0"==t.val()?s.find(".restriction-description").text(nt.getString("groupchat__rights_timer__indefinitely")):s.find(".restriction-description").text(nt.getString("groupchat__rights_timer__text_expire",[Number(i)])),s.find("input").removeClass().addClass(i),t.remove()}}),nt.Participant=Backbone.Model.extend({idAttribute:"id",initialize:function(e,t){let i=ui.clone(e);this.model=t.model,this.contact=t.contact?t.contact:this.model.contact,this.account=this.contact.account,this.on("change:avatar",this.getBase64Avatar,this),this.set(i),this.getBase64Avatar()},getBase64Avatar:function(){if(this.get("id")&&this.get("avatar")){let e=this.account.chat_settings.getAvatarInfoById(this.get("id"));if(e&&e.avatar_hash==this.get("avatar"))return this.set("b64_avatar",e.avatar_b64),void(this.get("jid")===this.account.get("jid")&&this.contact.trigger("update_my_info"));if(this.get("avatar_url"))this.account.chat_settings.updateCachedAvatars(this.get("id"),this.get("avatar"),this.get("avatar_url")),this.set("b64_avatar",this.get("avatar_url")),this.get("jid")===this.account.get("jid")&&this.contact.trigger("update_my_info");else{let e=gi.NS.PUBSUB_AVATAR_DATA+"#"+this.get("id");this.contact.getAvatar(this.get("avatar"),e,(e=>{this.account.chat_settings.updateCachedAvatars(this.get("id"),this.get("avatar"),e),this.set("b64_avatar",e),this.get("jid")===this.account.get("jid")&&this.contact.trigger("update_my_info")}))}}},kick:function(e,t){let i=this.get("id"),s=this.get("jid"),n=di({type:"set",to:this.contact.get("full_jid")||this.contact.get("jid")}).c("kick",{xmlns:gi.NS.GROUP_CHAT});s?n.c("jid").t(s):n.c("id").t(i),this.account.sendIQFast(n,(()=>{e&&e()}),(e=>{t&&t(e)}))},block:function(e,t){let i=this.get("id"),s=di({type:"set",to:this.contact.get("full_jid")||this.contact.get("jid")}).c("block",{xmlns:`${gi.NS.GROUP_CHAT}#block`}).c("id").t(i);this.account.sendIQFast(s,(()=>{e&&e()}),(function(e){t&&t(e)}))}}),nt.Participants=Backbone.Collection.extend({model:nt.Participant,comparator:"nickname",initialize:function(e,t){this.contact=t.contact,this.account=this.contact.account,this.account.groupchat_settings&&(this.version=this.account.groupchat_settings.getParticipantsListVersion(this.contact.get("jid"))),this.getCachedParticipants(),this.contact.on("update_participants",this.updateParticipants,this),this.on("change:nickname",this.sort,this)},updateVersion:function(){this.version=this.account.groupchat_settings.getParticipantsListVersion(this.contact.get("jid"))||this.version},getCachedParticipants:function(){this.account.groupchat_settings&&this.account.groupchat_settings.getParticipantsList(this.contact.get("jid")).forEach((e=>{this.mergeParticipant(e)}))},mergeParticipant:function(e){"object"!=typeof e&&(e={id:e});let t=this.get(e.id);return t?t.set(e):t=this.create(e,{model:this}),t},resetParticipants:function(){this.version=0,ui.each(ui.clone(this.models),(function(e){e.destroy()}))},getRights:function(e){let t=[];return li(e).each(((e,i)=>{let s=li(i).attr("name"),n=li(i).attr("translation"),a=li(i).attr("issued-at"),o=li(i).attr("expires");t.push({name:s,pretty_name:n,issued_time:a,expires_time:o})})),t},updateParticipants:function(){this.participantsRequest({version:this.version},(()=>{this.trigger("participants_updated");let e=this.account.chats.getChat(this.contact);e.item_view&&(e.item_view.content||(e.item_view.content=new nt.ChatContentView({chat_item:e.item_view})),e.item_view.content.updatePinnedMessage())}))},participantsRequest:function(e,t,i){let s=(e=e||{}).id,n=e.version||0,a=di({to:this.contact.get("full_jid"),type:"get"});null!=s?e.properties?a.c("query",{xmlns:`${gi.NS.GROUP_CHAT}#members`,id:s}):a.c("query",{xmlns:`${gi.NS.GROUP_CHAT}#rights`}).c("user",{xmlns:gi.NS.GROUP_CHAT,id:s}):a.c("query",{xmlns:`${gi.NS.GROUP_CHAT}#members`,version:n}),this.account.sendFast(a,(e=>{let i=li(e),s=i.find("query").attr("version");s&&(this.version=Number(s)),i.find("query user").each(((e,t)=>{let i=li(t),s=i.find("subscription").text(),n=i.attr("id");"none"===s?(this.get(n)&&this.get(n).destroy(),this.account.groupchat_settings.removeParticipantFromList(this.contact.get("jid"),n),this.trigger("participants_updated")):this.createFromStanza(i)})),t&&t(e)}),(e=>{i&&i(e)}))},search:function(e){let t=[];return this.models.forEach((i=>{let s=i.get("jid");if(e){e=e.toLowerCase();let n=i.get("nickname");(s&&s.toLowerCase().indexOf(e)>-1||n&&n.toLowerCase().indexOf(e)>-1)&&t.push(i)}else t.push(i)})),t},createFromStanza:function(e,t){let i=e.find("jid").text(),s=e.find("nickname").text(),n=e.attr("id"),a=e.find("badge").text(),o=e.find("present").text(),r=e.find(`metadata[xmlns="${gi.NS.PUBSUB_AVATAR_METADATA}"]`).find("info").attr("id"),c=e.find(`metadata[xmlns="${gi.NS.PUBSUB_AVATAR_METADATA}"]`).find("info").attr("url"),l=e.find("role").text();!s.trim().length&&(s=i||n);let d={jid:i,id:n,avatar:r,avatar_url:c,nickname:s,badge:a,present:o,role:l};this.contact.get("incognito_chat")&&t&&!0===t.my_info&&(d.jid=this.account.get("jid"));let h=this.mergeParticipant(d);return this.account.get("jid")===h.get("jid")&&(this.contact.my_info=h)&&this.contact.trigger("update_my_info"),this.account.groupchat_settings.updateParticipant(this.contact.get("jid"),d),h}}),nt.GroupChatSettings=Backbone.ModelWithStorage.extend({defaults:{participants_lists:[]},getParticipantsListVersion:function(e){let t=ui.clone(this.get("participants_lists")).find((t=>t.jid===e));return t?t.version:0},setParticipantsListVersion:function(e,t){let i=ui.clone(this.get("participants_lists")),s=i.find((t=>t.jid===e)),n=i.indexOf(s);-1!=n&&i.splice(n,1),s?s.version=t:s={jid:e,participants_list:[],version:0},i.push(s),this.save("participants_lists",i)},getParticipantsList:function(e){let t=ui.clone(this.get("participants_lists")).find((t=>t.jid===e));return t&&t.participants_list?t.participants_list:[]},updateParticipant:function(e,t){let i=ui.clone(this.get("participants_lists")),s=i.find((t=>t.jid===e)),n=s&&s.version||0,a=s&&s.participants_list||[],o=i.indexOf(s);if(a.length){let e=a.find((e=>e.id===t.id)),i=a.indexOf(e);-1!=i?a[i]=t:a.push(t)}else a.push(t);-1!=o&&i.splice(o,1),i.push({jid:e,participants_list:a,version:n}),this.save("participants_lists",i)},setParticipantsList:function(e,t){let i=ui.clone(this.get("participants_lists")),s=i.find((t=>t.jid===e))||[],n=i.indexOf(s);-1!=n&&i.splice(n,1),i.push({jid:e,participants_list:t,version:s.version}),this.save("participants_lists",i)},removeParticipantFromList:function(e,t){let i=this.getParticipantsList(e);if(i.length){let s=i.indexOf(i.find((e=>e.id===t)));-1!=s&&i.splice(s,1),this.setParticipantsList(e,i)}},resetParticipantsList:function(e){let t=ui.clone(this.get("participants_lists")),i=t.indexOf(t.find((t=>t.jid===e)));-1!=i&&t.splice(i,1),t.push({jid:e,participants_list:[],version:0}),this.save("participants_lists",t)}}),nt.GroupchatInvitationView=nt.BasicView.extend({className:"details-panel invitation-view",template:ri.group_chats.invitation,ps_selector:".panel-content",avatar_size:oi.AVATAR_SIZES.CONTACT_DETAILS,events:{"click .btn-join":"join","click .btn-decline":"reject","click .btn-block":"blockContact"},_initialize:function(e){this.account=this.model.account,this.$(".msg-text").text(e.message&&e.message.get("message")?e.message.get("message"):nt.getString("groupchat__public_group__text_invitation",[this.account.get("jid")])),this.message=e.message,this.model.on("change",this.update,this)},render:function(){this.model.set("visible",!0),this.updateAvatar(),this.updateName()},hide:function(){this.trigger("before_hide",this),this.data.set("visible",!1),this.model.set("visible",!1),this.onHide.apply(this,arguments)},update:function(){let e=this.model.changed;ui.has(e,"name")&&this.updateName(),ui.has(e,"image")&&this.updateAvatar()},openChat:function(){this.model.set("in_roster",!0),this.model.trigger("open_chat",this.model)},closeChat:function(){let e=this.account.chats.getChat(this.model);e.set({opened:!1,display:!1,active:!1,is_accepted:void 0}),nt.body.setScreen("all-chats",{right:void 0}),e.item_view.content.readMessages()},updateAvatar:function(){let e=this.model.cached_image;this.$(".circle-avatar").setAvatar(e,this.avatar_size)},updateName:function(){this.$(".main-info  .name-wrap").text(this.model.get("name")),this.model.get("name-wrap")==this.model.get("jid")?(this.$(".main-info .name-wrap").addClass("name-is-jid"),this.$(".main-info  .jid").text("")):(this.$(".main-info .name-wrap").removeClass("name-is-jid"),this.$(".main-info  .jid").text(this.model.get("jid")))},blockInvitation:function(){if(this.account.connection&&this.account.connection.do_synchronization)return;let e=this.model.get("jid"),t=di({type:"get"}).c("blocklist",{xmlns:gi.NS.BLOCKING}),i=di({type:"set"}).c("unblock",{xmlns:gi.NS.BLOCKING}),s=di({type:"set"}).c("block",{xmlns:gi.NS.BLOCKING}).c("item",{jid:this.model.get("jid")+"/"+pi.now()});this.account.sendIQFast(t,(t=>{let n=li(t).find("item");n.length>0&&n.each((function(t,s){let n=li(s).attr("jid");n.indexOf(e)>-1&&i.c("item",{jid:n}).up()})),li(i.nodeTree).find("item").length?this.account.sendIQFast(i,(()=>{this.account.sendIQFast(s)})):this.account.sendIQFast(s)}))},join:function(){let e=this.model;e.set("subscription_preapproved",!0),e.pres("subscribed"),e.set("known",!0),e.set("removed",!1),setTimeout((()=>{e.pres("subscribe")}),500),this.blockInvitation(),e.getMyInfo(),this.openChat(),e.trigger("remove_invite",e);this.account.chats.getChat(this.model)},reject:function(){let e=this.model;this.closeChat();let t=di({to:e.get("full_jid")||e.get("jid"),type:"set"}).c("decline",{xmlns:`${gi.NS.GROUP_CHAT}#invite`});this.account.sendFast(t,(()=>{}),(()=>{e.declineRequest(),this.blockInvitation()})),e.trigger("remove_invite",e)},blockContact:function(){let e=this.model;ci.dialogs.ask(nt.getString("contact_block"),nt.getString("block_contact_confirm",[e.get("name"),this.account.get("jid")]),null,{ok_button_text:nt.getString("contact_bar_block")}).done((function(t){t&&(e.trigger("remove_invite",e),e.block(),nt.trigger("clear_search"))})),this.blockInvitation(),this.closeChat(),e.trigger("remove_invite",e)}}),nt.ContactNameWidget=nt.InputWidget.extend({field_name:"contact-name",placeholder:"",model_field:"name",setValue:function(e){if(""===name){this.model.set("roster_name",null);let e=this.getDefaultName();this.model.set("name",e)}this.model.pushInRoster({name:e})},showInput:function(){this.$input.prop("disabled")||(this.data.set("input_mode",!0),this.updateValue())},getDefaultName:function(){let e=null;if(this.model.get("group_chat"))e=this.model.get("group_info")?this.model.get("group_info").name:this.model.get("jid");else{let t=this.model.get("vcard");e=t.nickname||(t.first_name+" "+t.last_name).trim()||t.fullname||this.model.get("jid")}return e},keyUp:function(){let e=this.getValue();this.$input.switchClass("changed",this.$input.val()!==e),this.$input.val()||this.$input.prop("placeholder",this.getDefaultName()||nt.getString("contact_settings__hint_set_name"))}}),nt.ContactNameRightWidget=nt.InputWidget.extend({field_name:"contact-name",placeholder:"",model_field:"name",template:ri.group_chats.group_name_input_widget,setValue:function(e){if(""===name){this.model.set("roster_name",null);let e=this.getDefaultName();this.model.set("name",e)}this.model.pushInRoster({name:e})},getDefaultName:function(){let e=null;if(this.model.get("group_chat"))e=this.model.get("group_info")?this.model.get("group_info").name:this.model.get("jid");else{let t=this.model.get("vcard");e=t.nickname||(t.first_name+" "+t.last_name).trim()||t.fullname||this.model.get("jid")}return e},updateValue:function(){let e=this.getValue();this.$value.text(e),this.$input.val()||(this.$input.prop("placeholder",this.getDefaultName()||nt.getString("contact_settings__hint_set_name")),this.model.get("roster_name")&&this.$input.val(this.model.get("roster_name"))),this.model.get("roster_name")?this.$value.removeClass("name-is-default"):this.$value.addClass("name-is-default")},keyUp:function(){let e=this.getValue();this.$input.switchClass("changed",this.$input.val()!==e),this.$input.val()||this.$input.prop("placeholder",this.getDefaultName()||nt.getString("contact_settings__hint_set_name"))}}),nt.GroupNameRightWidget=nt.InputWidget.extend({field_name:"group-name",placeholder:"",template:ri.group_chats.group_name_input_widget,initialize:function(e){this.parent=e.parent,this.$el.html(this.template({field_name:this.field_name,field_type:this.field_type,placeholder:this.placeholder})),this.$value=this.$(".field-text"),this.$btn=this.$(".btn-rename"),this.$input=this.$(".field-input");let t,i=this.$(".insert-emoticon"),s=this.$(".emoticons-panel-wrap"),n=this.$(".emoticons-panel");for(let e in fi.all){let t=li('<div class="emoji-list-wrap"/>'),i=e.replace(/ /g,"_");li(`<div id=${i} class="emoji-list-header">${nt.getString(oi.EMOJI_LIST_NAME(e))}</div>`).appendTo(t),ui.each(fi.all[e],(function(e){li('<div class="emoji-wrap"/>').html(e.emojify({emoji_size:24,sprite:i})).appendTo(t)})),t.appendTo(n),n.siblings(".emoji-menu").append(fi.all[e][0].emojify({href:i,title:oi.EMOJI_LIST_NAME(e),tag_name:"a",emoji_size:20}))}n.perfectScrollbar(ui.extend({theme:"item-list"},nt.ps_settings)),this.$(".emoji-menu .emoji").click((e=>{n[0].scrollTop=this.$(".emoji-list-wrap "+e.target.attributes.href.value)[0].offsetTop-4})),i.hover((e=>{e&&e.preventDefault&&e.preventDefault(),s.addClass("opened"),t&&clearTimeout(t),n.perfectScrollbar("update")}),(e=>{e&&e.preventDefault&&e.preventDefault(),t&&clearTimeout(t),t=setTimeout((function(){s.is(":hover")||s.removeClass("opened")}),800)})),s.hover(null,(e=>{e&&e.preventDefault&&e.preventDefault(),t&&clearTimeout(t),t=setTimeout((function(){s.removeClass("opened")}),200)})),s.mousedown((e=>{if(e&&e.preventDefault&&e.preventDefault(),e.button)return;let t=li(e.target).closest(".emoji-wrap").find(".emoji");t.length&&(this.$input.val((function(){return this.value+t.data("emoji")})),this.$input.scrollLeft(1e3),this.changeValue())})),this.updateValue(),this.data=new Backbone.Model({input_mode:!1})},changeValue:function(){this.setValue(this.$input.val())},setValue:function(e){this.$input.val()?this.parent.changeName(e):this.parent.changeName(this.getDefaultName()),this.updateValue()},getDefaultName:function(){let e=null;return this.model.get("group_chat")&&(e=this.model.get("group_info")&&this.model.get("group_info").name?this.model.get("group_info").name:this.model.get("jid")),e},updateValue:function(e){let t=this.getValue();this.$value.text(t),this.$input.val()&&!e||(this.$input.prop("placeholder",this.getDefaultName()||nt.getString("contact_settings__hint_set_name")),this.model.get("group_info")&&this.model.get("group_info").name&&this.$input.val(this.model.get("group_info").name),e&&this.changeValue())},getValue:function(){if(this.model.get("group_info"))return this.model.get("group_info").name},keyUp:function(){let e=this.getValue();this.$input.switchClass("changed",this.$input.val()!==e),this.$input.val()?this.changeValue():this.$input.prop("placeholder",this.getDefaultName()||nt.getString("contact_settings__hint_set_name"))}}),nt.ParticipantNameRightWidget=nt.InputWidget.extend({field_name:"participant-name",placeholder:"",template:ri.group_chats.group_name_input_widget,initialize:function(e){this.parent=e.parent,this.$el.html(this.template({field_name:this.field_name,field_type:this.field_type,placeholder:this.placeholder})),this.$value=this.$(".field-text"),this.$btn=this.$(".btn-rename"),this.$input=this.$(".field-input");let t,i=this.$(".insert-emoticon"),s=this.$(".emoticons-panel-wrap"),n=this.$(".emoticons-panel");for(let e in fi.all){let t=li('<div class="emoji-list-wrap"/>'),i=e.replace(/ /g,"_");li(`<div id=${i} class="emoji-list-header">${nt.getString(oi.EMOJI_LIST_NAME(e))}</div>`).appendTo(t),ui.each(fi.all[e],(function(e){li('<div class="emoji-wrap"/>').html(e.emojify({emoji_size:24,sprite:i})).appendTo(t)})),t.appendTo(n),n.siblings(".emoji-menu").append(fi.all[e][0].emojify({href:i,title:oi.EMOJI_LIST_NAME(e),tag_name:"a",emoji_size:20}))}n.perfectScrollbar(ui.extend({theme:"item-list"},nt.ps_settings)),this.$(".emoji-menu .emoji").click((e=>{n[0].scrollTop=this.$(".emoji-list-wrap "+e.target.attributes.href.value)[0].offsetTop-4})),i.hover((e=>{e&&e.preventDefault&&e.preventDefault(),s.addClass("opened"),t&&clearTimeout(t),n.perfectScrollbar("update")}),(e=>{e&&e.preventDefault&&e.preventDefault(),t&&clearTimeout(t),t=setTimeout((function(){s.is(":hover")||s.removeClass("opened")}),800)})),s.hover(null,(e=>{e&&e.preventDefault&&e.preventDefault(),t&&clearTimeout(t),t=setTimeout((function(){s.removeClass("opened")}),200)})),s.mousedown((e=>{if(e&&e.preventDefault&&e.preventDefault(),e.button)return;let t=li(e.target).closest(".emoji-wrap").find(".emoji");t.length&&(this.$input.val((function(){return this.value+t.data("emoji")})),this.$input.scrollLeft(1e3),this.changeValue())})),this.updateValue(),this.data=new Backbone.Model({input_mode:!1})},changeValue:function(){this.setValue(this.$input.val())},setValue:function(e){this.updateValue(),this.$input.val()?this.parent.changeName(e):this.parent.changeName(this.getDefaultName())},getDefaultName:function(){let e=null;return e=this.model.get("nickname")?this.model.get("nickname"):this.model.get("jid"),e},updateValue:function(e){let t=this.getValue();this.$value.text(t),this.$input.val()&&!e||(this.$input.prop("placeholder",this.getDefaultName()||nt.getString("contact_settings__hint_set_name")),this.model.get("nickname")&&this.$input.val(this.model.get("nickname")),e&&this.changeValue()),this.$input.switchClass("changed",this.$input.val()!==t)},getValue:function(){if(this.model.get("nickname"))return this.model.get("nickname")},keyUp:function(){this.getValue();this.$input.val()?this.changeValue():this.$input.prop("placeholder",this.getDefaultName()||nt.getString("contact_settings__hint_set_name"))}}),nt.ParticipantBadgeRightWidget=nt.InputWidget.extend({field_name:"participant-badge",placeholder:"",template:ri.group_chats.group_name_input_widget,initialize:function(e){this.parent=e.parent,this.$el.html(this.template({field_name:this.field_name,field_type:this.field_type,placeholder:this.placeholder})),this.$value=this.$(".field-text"),this.$btn=this.$(".btn-rename"),this.$input=this.$(".field-input");let t,i=this.$(".insert-emoticon"),s=this.$(".emoticons-panel-wrap"),n=this.$(".emoticons-panel");for(let e in fi.all){let t=li('<div class="emoji-list-wrap"/>'),i=e.replace(/ /g,"_");li(`<div id=${i} class="emoji-list-header">${nt.getString(oi.EMOJI_LIST_NAME(e))}</div>`).appendTo(t),ui.each(fi.all[e],(function(e){li('<div class="emoji-wrap"/>').html(e.emojify({emoji_size:24,sprite:i})).appendTo(t)})),t.appendTo(n),n.siblings(".emoji-menu").append(fi.all[e][0].emojify({href:i,title:oi.EMOJI_LIST_NAME(e),tag_name:"a",emoji_size:20}))}n.perfectScrollbar(ui.extend({theme:"item-list"},nt.ps_settings)),this.$(".emoji-menu .emoji").click((e=>{n[0].scrollTop=this.$(".emoji-list-wrap "+e.target.attributes.href.value)[0].offsetTop-4})),i.hover((e=>{e&&e.preventDefault&&e.preventDefault(),s.addClass("opened"),t&&clearTimeout(t),n.perfectScrollbar("update")}),(e=>{e&&e.preventDefault&&e.preventDefault(),t&&clearTimeout(t),t=setTimeout((function(){s.is(":hover")||s.removeClass("opened")}),800)})),s.hover(null,(e=>{e&&e.preventDefault&&e.preventDefault(),t&&clearTimeout(t),t=setTimeout((function(){s.removeClass("opened")}),200)})),s.mousedown((e=>{if(e&&e.preventDefault&&e.preventDefault(),e.button)return;let t=li(e.target).closest(".emoji-wrap").find(".emoji");t.length&&(this.$input.val((function(){return this.value+t.data("emoji")})),this.$input.scrollLeft(1e3),this.changeValue())})),this.updateValue(!0)},changeValue:function(){this.setValue(this.$input.val())},setValue:function(e){this.updateValue(),this.parent.changeBadge(e)},updateValue:function(e){let t=this.getValue();this.$input.val()||this.$input.prop("placeholder",nt.getString("groupchat_member_badge")),e&&(this.$input.val(t),this.changeValue()),this.$input.switchClass("changed",this.$input.val()!==t)},getValue:function(){return ui.escape(this.model.get("badge"))},keyUp:function(){this.$input.val()||this.$input.prop("placeholder",nt.getString("groupchat_member_badge")),this.changeValue()}}),nt.GroupDescriptionRightWidget=nt.InputWidget.extend({field_name:"group-description",template:ri.group_chats.description_input_widget,placeholder:"",initialize:function(e){this.parent=e.parent,this.$el.html(this.template({field_name:this.field_name,field_type:this.field_type,placeholder:this.placeholder})),this.$value=this.$(".field-text"),this.$btn=this.$(".btn-rename"),this.$input=this.$(".field-input"),this.updateValue(),this.data=new Backbone.Model({input_mode:!1})},changeValue:function(){this.setValue(this.$input.val())},setValue:function(e){this.parent.changeDescription(e),this.updateValue()},getDefaultName:function(){let e=null;return this.model.get("group_chat")&&this.model.get("group_info")&&this.model.get("group_info").description&&(e=this.model.get("group_info").description),e},updateValue:function(e){this.getValue();this.$input.val()&&!e||(this.$input.prop("placeholder",nt.getString("groupchat_example_description")),e&&this.model.get("group_info")&&this.$input.val(this.model.get("group_info").description),e&&this.changeValue())},keyDown:function(e){e.stopPropagation();let t=this.getValue();e.keyCode!==oi.KEY_ESCAPE||nt.body.screen.get("right_contact")||(this.$input.removeClass("changed").val(t),this.data.set("input_mode",!1))},getValue:function(){if(this.model.get("group_info"))return this.model.get("group_info").description},keyUp:function(){let e=this.getValue();this.$input.switchClass("changed",this.$input.val()!==e),this.$input.val()||this.$input.prop("placeholder",nt.getString("groupchat_example_description")),this.changeValue()}}),nt.ContactEditGroupsView=nt.BasicView.extend({template:ri.groups,events:{"click .group":"removeGroup","click .existing-group-field":"editGroup","change .new-group-name input":"checkNewGroup","keyup .new-group-name input":"checkNewGroup","click .new-group-checkbox":"addNewGroup","keyup #new-group-name":"keyupAddNewGroup","focusin #new-group-name":"focusinAddNewGroup","focusout #new-group-name":"focusoutAddNewGroup","keydown #new-group-name":"keydownAddNewGroup"},_initialize:function(e){this.account=this.parent.account,this.model=this.parent.model,this.model.set("groups_hidden",!0),this.model.on("change:in_roster update_groups",this.onUpdate,this)},render:function(e,t){if(this.$el.html(this.template()),this.model.get("in_roster")){let e=ui.clone(this.model.get("groups")),t=ui.map(this.account.groups.notSpecial(),(function(t){let i=t.get("name");return{name:i,checked:ui.contains(e,i),id:_i()}}));t.filter((function(e){return!e.checked})).length?this.$(".groups-wrap").removeClass("empty-groups-wrap"):this.$(".groups-wrap").addClass("empty-groups-wrap"),this.$(".checkbox-list").html(ri.groups_checkbox_list({groups:t})).appendTo(this.$(".groups-wrap")),this.ps_container=this.$(".checkbox-list"),this.ps_container.length&&this.ps_container.perfectScrollbar(ui.extend(this.ps_settings||{},nt.ps_settings)),this.scrollToTop(),e.length?this.$(".groups").html(ri.groups_list({groups:t})).appendTo(this.$(".groups-wrap-list")):this.$(".groups").html('<div class="empty-groups">'+nt.getString("contact_circles_empty")+"</div>"),this.$(".groups").append(ri.groups_new_group())}this.$el.showIf(this.model.get("in_roster")),t&&t.on_add?(this.$(".groups-wrap").hideIf(!1),this.$(".input-field input").focus()):this.$(".groups-wrap").hideIf(!0),this._update_template=!1,this.parent.updateScrollBar()},onUpdate:function(e){this._update_template?(this.render(this,{on_add:!0}),this.$(".new-group-name input").focus()):this.render()},removeGroup:function(e){let t=li(e.target).closest(".group").attr("data-groupname"),i=ui.clone(this.model.get("groups")),s=i.indexOf(t);s>=0&&i.splice(s,1),this._update_template=!1,this.model.pushInRoster({groups:i})},removeLastGroup:function(e){let t=ui.clone(this.model.get("groups"));t.length&&(t.pop(),this._update_template=!0,this.model.pushInRoster({groups:t}))},editGroup:function(e){clearTimeout(this._hide_timeout);let t=li(e.target).closest(".input-field").find("input"),i=!t.prop("checked"),s=t.attr("data-groupname"),n=ui.clone(this.model.get("groups")),a=n.indexOf(s);t.prop("checked",i),i?n.push(s):a>=0&&n.splice(a,1),this._update_template=!0,this.model.pushInRoster({groups:n})},checkNewGroup:function(e){let t=li(e.target).val();this.$(".new-group-checkbox").showIf(t&&!this.account.groups.get(t))},keyupAddNewGroup:function(e){let t=this.$(".new-group-name input").val();e.keyCode===oi.KEY_ENTER&&t&&this.addNewGroup()},keydownAddNewGroup:function(e){let t=this.$(".new-group-name input").val();e.keyCode!==oi.KEY_BACKSPACE||t||this.removeLastGroup()},focusinAddNewGroup:function(e){clearTimeout(this._hide_timeout),this.$(".groups-wrap").hideIf(!1),this.$(".empty-groups").hideIf(!0)},focusoutAddNewGroup:function(e){this.$(".empty-groups").hideIf(!1),this.$(".new-group-name input").val()&&this.addNewGroup(),this._hide_timeout=setTimeout((()=>{this.$(".groups-wrap").hideIf(!0),this.$(".new-group-name input").val("")}),100)},addNewGroup:function(){let e=this.$(".new-group-name input").val(),t=ui.clone(this.model.get("groups"));t.indexOf(e)<0&&t.push(e),this.model.pushInRoster({groups:t}),this._update_template=!0}}),nt.ContactEditView=nt.BasicView.extend({template:ri.edit_contact,events:{"click .btn-back":"hideEdit","click .btn-request":"requestSubscription","click .btn-allow":"allowSubscription","click .btn-cancel-request":"cancelSubscriptionRequest","click .btn-allow-request":"handleSubscriptionRequest","click .btn-disallow-request":"cancelSubscriptionIn","click .btn-disallow-preapproved":"cancelSubscriptionIn","click .btn-cancel-subscription-out":"cancelSubscriptionOut","click .btn-cancel-subscription-in":"cancelSubscriptionIn"},_initialize:function(e){this.account=this.parent.account,this.model=this.parent.model,this.model.set("edit_hidden",!0),this.model.on("change:status_updated",this.updateStatuses,this),this.model.on("change:subscription",this.updateStatuses,this),this.model.on("change:subscription_preapproved",this.updateStatuses,this),this.model.on("change:blocked",this.updateStatuses,this),this.model.on("change:subscription_request_in",this.updateStatuses,this),this.model.on("change:subscription_request_out",this.updateStatuses,this)},render:function(){this.$el.html(this.template(ui.extend({view:this},oi))),this.$(".edit-wrap").hideIf(this.model.get("edit_hidden")),this.name_field=new nt.ContactNameRightWidget({el:this.$(".name-wrap")[0],model:this.model}),this.$(".status-out.dropdown-button").dropdown({inDuration:100,outDuration:100,hover:!1}),this.$(".status-in.dropdown-button").dropdown({inDuration:100,outDuration:100,hover:!1}),this.updateStatuses()},showEdit:function(){this.model.set("edit_hidden",!1),this.parent.scrollToTop(),this.parent.ps_container.length&&this.parent.ps_container.perfectScrollbar("destroy"),this.$(".edit-wrap").hideIf(this.model.get("edit_hidden"))},updateStatuses:function(){let e=this.model.getSubscriptionStatuses(),t=this.model.get("subscription_preapproved");e&&(this.$(".status-out").addClass(e.status_out_class),this.$(".status-out .value").text(e.status_out),this.$(".status-out").showIf(e.status_out),this.$(".status-in").addClass(e.status_in_class),this.$(".status-in  .value").text(e.status_in),this.$(".status-in").showIf(e.status_in),this.$(".status-description .value").html(e.status_description),this.$(".status-description").showIf(e.status_description),this.$(".btn-delete").hideIf(!this.model.get("in_roster")),"request"===e.status_out_color&&(this.$(".status-out").addClass("text-color-500").addClass("request").removeClass("subbed"),this.$(".status-out").addClass("text-decoration-color-300")),"request"===e.status_in_color&&(this.$(".status-in").addClass("text-color-500").addClass("request").removeClass("subbed"),this.$(".status-in").addClass("text-decoration-color-300")),"subbed"===e.status_out_color&&(this.$(".status-out").addClass("text-color-500").addClass("subbed").removeClass("request"),this.$(".status-out").addClass("text-decoration-color-300")),"subbed"===e.status_in_color&&(this.$(".status-in").addClass("text-color-500").addClass("subbed").removeClass("request"),this.$(".status-in").addClass("text-decoration-color-300")),""===e.status_out_color&&(this.$(".status-out").removeClass("text-color-500").removeClass("request").removeClass("subbed"),this.$(".status-out").removeClass("text-decoration-color-300")),""===e.status_in_color&&(this.$(".status-in").removeClass("text-color-500").removeClass("request").removeClass("subbed"),this.$(".status-in").removeClass("text-decoration-color-300")),this.$(".btn-request").hideIf(!(""===e.status_out_color)),this.$(".btn-allow").hideIf(!(""===e.status_in_color&&!t)),this.$(".btn-disallow-preapproved").hideIf(!(""===e.status_in_color&&t)),this.$(".btn-cancel-request").hideIf(!("request"===e.status_out_color)),this.$(".btn-allow-request").hideIf(!("request"===e.status_in_color)),this.$(".btn-disallow-request").hideIf(!("request"===e.status_in_color)),this.$(".btn-cancel-subscription-out").hideIf(!("subbed"===e.status_out_color)),this.$(".btn-cancel-subscription-in").hideIf(!("subbed"===e.status_in_color)))},requestSubscription:function(){this.model.askRequest()},allowSubscription:function(){this.model.acceptRequest(),!this.account.server_features.get(gi.NS.SUBSCRIPTION_PREAPPROVAL)&&this.set("subscription_preapproved",!0)},cancelSubscriptionRequest:function(){this.model.declineSubscription()},handleSubscriptionRequest:function(){this.model.acceptRequest()},cancelSubscriptionIn:function(){this.model.declineSubscribe(),this.model.set("subscription_request_in",!1)},cancelSubscriptionOut:function(){this.model.declineSubscription()},hideEdit:function(e){this.model.set("edit_hidden",!0),this.parent.ps_container.length&&this.parent.ps_container.perfectScrollbar(ui.extend(this.parent.ps_settings||{},nt.ps_settings)),this.$(".edit-wrap").hideIf(this.model.get("edit_hidden"))}}),nt.GroupEditView=nt.BasicView.extend({template:ri.edit_group,events:{"click .btn-save":"saveChanges","click .edit-header:not(.property-header) .btn-back":"hideEdit","click .btn-reset":"resetPanel","click .btn-edit":"showDescriptionProperty","click .btn-back-panel":"hidePanel","click .membership-field .property-radio input":"changeMembership","click .index-field .property-radio input ":"changeIndex","click .index-property:not(.property-disabled)":"showIndexProperty","click .membership-property:not(.property-disabled)":"showMembershipProperty","click .btn-back.btn-property-back":"hideProperty","click .list-variant":"showPanel","click .revoke-invitation":"revokeInvitation","click .btn-reset-panel":"deselectParticipants","click .btn-remove-selected":"actionSelectedParticipants","click .participants-edit-wrap .list-item":"selectParticipant","click .unblock-user":"unblockUser","click .set-groupchat-avatar-text":"clickAvatarInput","click .btn-add-block":"blockId","keydown .field-input":"keyDownName","keyup .field-input":"keyUp","focusout .field-input":"changeValue","click .btn-request":"requestSubscription","click .btn-allow":"allowSubscription","click .btn-cancel-request":"cancelSubscriptionRequest","click .btn-allow-request":"handleSubscriptionRequest","click .btn-disallow-request":"cancelSubscriptionIn","click .btn-disallow-preapproved":"cancelSubscriptionIn","click .btn-cancel-subscription-out":"cancelSubscriptionOut","click .btn-cancel-subscription-in":"cancelSubscriptionIn"},_initialize:function(e){this.account=this.parent.account,this.model=this.parent.model,this.model.set("edit_hidden",!0),this.model.on("change:group_info",this.update,this),this.model.on("change:status_updated",this.updateStatuses,this),this.model.on("change:subscription",this.updateStatuses,this),this.model.on("change:subscription_preapproved",this.updateStatuses,this),this.model.on("change:blocked",this.updateStatuses,this),this.model.on("change:subscription_request_in",this.updateStatuses,this),this.model.on("change:subscription_request_out",this.updateStatuses,this)},render:function(){this.$el.html(this.template(ui.extend({view:this},oi))),this.$(".edit-wrap").hideIf(this.model.get("edit_hidden")),this.$(".edit-group-wrap").showIf("both"===this.model.get("subscription")),this.$(".subscription-statuses").showIf("both"!==this.model.get("subscription")),this.$(".index-property-edit-wrap").hideIf(!0),this.$(".membership-property-edit-wrap").hideIf(!0),this.$(".description-edit-wrap").hideIf(!0);let e={inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"right"};this.$(".property-dropdown").dropdown(e),this.$(".circle-avatar.dropdown-button").dropdown(e),this.group_name_field=new nt.GroupNameRightWidget({el:this.$(".edit-group-name-wrap")[0],model:this.model,parent:this}),this.group_description_field=new nt.GroupDescriptionRightWidget({el:this.$(".edit-group-description-wrap")[0],model:this.model,parent:this}),this.$(".status-out.dropdown-button").dropdown({inDuration:100,outDuration:100,hover:!1}),this.$(".status-in.dropdown-button").dropdown({inDuration:100,outDuration:100,hover:!1}),this.updateStatuses(),this.update()},update:function(){let e,t,i,s=this.model.get("group_info")||{};if(s&&("public"===s.privacy&&(i=nt.getString("groupchat_public_group")),"incognito"===s.privacy&&(i=nt.getString("groupchat_incognito_group")),"none"===s.searchable&&(t=nt.getString("groupchat_index_type_none"),this.$(".property-wrap #none").prop("checked",!0)),"local"===s.searchable&&(t=nt.getString("groupchat_index_type_local"),this.$(".property-wrap #local").prop("checked",!0)),"global"===s.searchable&&(t=nt.getString("groupchat_index_type_global"),this.$(".property-wrap #global").prop("checked",!0)),"open"===s.model&&(e=nt.getString("groupchat_membership_type_open"),this.$(".property-wrap #open").prop("checked",!0)),"member-only"===s.model&&(e=nt.getString("groupchat_membership_type_members_only"),this.$(".property-wrap #member-only").prop("checked",!0))),this.$(".main-edit-header .block-name:not(.second-text)").text(i),this.$(".membership-property span").text(e),this.$(".index-property span").text(t),this.$(".edit-group-name").text(s.name),this.$(".edit-group-description").text(s.description),this.group_name_field&&this.group_name_field.updateValue(!0),this.group_description_field&&this.group_description_field.updateValue(!0),this.$(".btn-save").switchClass("fade-out",!0),this.model.my_rights&&this.model.my_rights.fields.find((e=>"owner"==e.var&&e.values))){let e=di({type:"get",to:this.model.get("full_jid")||this.model.get("jid")}).c("query",{xmlns:`${gi.NS.GROUP_CHAT}#default-rights`});this.account.sendFast(e,(e=>{let t=this.account.parseDataForm(li(e).find(`x[xmlns="${gi.NS.DATAFORM}"]`)),i=0;t.fields.forEach((e=>{if("fixed"===e.type||"hidden"===e.type)return;(e.values?e.values[0]:void 0)&&i++})),0===i&&(i=""),this.$(".btn-default-restrictions .edit-button-value").text(i)}),(()=>{ci.callback_popup_message(nt.getString("groupchat_you_have_no_permissions_to_do_it"),3e3)}))}this.updateAvatar()},updateStatuses:function(){let e=this.model.getSubscriptionStatuses(),t=this.model.get("subscription_preapproved");e&&(this.$(".status-out").addClass(e.status_out_class),this.$(".status-out .value").text(e.status_out),this.$(".status-out").showIf(e.status_out),this.$(".status-in").addClass(e.status_in_class),this.$(".status-in  .value").text(e.status_in),this.$(".status-in").showIf(e.status_in),this.$(".status-description .value").html(e.status_description),this.$(".status-description").showIf(e.status_description),this.$(".btn-delete").hideIf(!this.model.get("in_roster")),"request"===e.status_out_color&&(this.$(".status-out").addClass("text-color-500").addClass("request").removeClass("subbed"),this.$(".status-out").addClass("text-decoration-color-300")),"request"===e.status_in_color&&(this.$(".status-in").addClass("text-color-500").addClass("request").removeClass("subbed"),this.$(".status-in").addClass("text-decoration-color-300")),"subbed"===e.status_out_color&&(this.$(".status-out").addClass("text-color-500").addClass("subbed").removeClass("request"),this.$(".status-out").addClass("text-decoration-color-300")),"subbed"===e.status_in_color&&(this.$(".status-in").addClass("text-color-500").addClass("subbed").removeClass("request"),this.$(".status-in").addClass("text-decoration-color-300")),""===e.status_out_color&&(this.$(".status-out").removeClass("text-color-500").removeClass("request").removeClass("subbed"),this.$(".status-out").removeClass("text-decoration-color-300")),""===e.status_in_color&&(this.$(".status-in").removeClass("text-color-500").removeClass("request").removeClass("subbed"),this.$(".status-in").removeClass("text-decoration-color-300")),this.$(".btn-request").hideIf(!(""===e.status_out_color)),this.$(".btn-allow").hideIf(!(""===e.status_in_color&&!t)),this.$(".btn-disallow-preapproved").hideIf(!(""===e.status_in_color&&t)),this.$(".btn-cancel-request").hideIf(!("request"===e.status_out_color)),this.$(".btn-allow-request").hideIf(!("request"===e.status_in_color)),this.$(".btn-disallow-request").hideIf(!("request"===e.status_in_color)),this.$(".btn-cancel-subscription-out").hideIf(!("subbed"===e.status_out_color)),this.$(".btn-cancel-subscription-in").hideIf(!("subbed"===e.status_in_color))),this.$(".edit-group-wrap").showIf("both"===this.model.get("subscription")),this.$(".subscription-statuses").showIf("both"!==this.model.get("subscription"))},requestSubscription:function(){this.model.askRequest(),setTimeout((()=>{}),1e3)},allowSubscription:function(){this.model.acceptRequest(),!this.account.server_features.get(gi.NS.SUBSCRIPTION_PREAPPROVAL)&&this.set("subscription_preapproved",!0)},cancelSubscriptionRequest:function(){this.model.declineSubscription()},handleSubscriptionRequest:function(){this.model.acceptRequest()},cancelSubscriptionIn:function(){this.model.declineSubscribe(),this.model.set("subscription_request_in",!1)},cancelSubscriptionOut:function(){this.model.declineSubscription()},updateAvatar:function(){let e=this.model.cached_image;this.$(".main-info .circle-avatar").setAvatar(e,this.avatar_size)},showMembershipProperty:function(){this.$(".membership-property-edit-wrap").hideIf(!1),this.ps_container.length&&this.ps_container.perfectScrollbar("destroy")},showIndexProperty:function(){this.$(".index-property-edit-wrap").hideIf(!1),this.ps_container.length&&this.ps_container.perfectScrollbar("destroy")},showDescriptionProperty:function(){this.$(".description-edit-wrap").hideIf(!1),this.group_description_field.$input.height(this.group_description_field.$input[0].scrollHeight-8),this.ps_container.length&&this.ps_container.perfectScrollbar("destroy")},hideProperty:function(){this.$(".index-property-edit-wrap").hideIf(!0),this.$(".description-edit-wrap").hideIf(!0),this.$(".membership-property-edit-wrap").hideIf(!0),this.ps_container.length&&this.ps_container.perfectScrollbar(ui.extend(this.parent.ps_settings||{},nt.ps_settings))},revokeInvitation:function(e){li(e.target).closest(".invitations-user");this.parent.children&&this.parent.children.invitations&&this.parent.children.invitations.revokeInvitation(e)},showBlockButton:function(e){this.$(".edit-bottom-block .btn-add-block").hideIf(!1)},showInviteButton:function(e){this.$(".edit-bottom-block .btn-invite").hideIf(!1)},unblockUser:function(e){this.parent.children&&this.parent.children.blocked&&this.parent.children.blocked.unblockUser(e)},actionSelectedParticipants:function(e){this.$(".list-item.selected").each(((e,t)=>{li(t).hasClass("invitations-user")&&this.parent.children&&this.parent.children.invitations&&this.parent.children.invitations.revokeInvitationByElement(li(t)),li(t).hasClass("blocked-user")&&this.parent.children&&this.parent.children.blocked&&this.parent.children.blocked.unblockUserByElement(li(t)),(li(t).hasClass("blocked-user")||li(t).hasClass("invitations-user"))&&li(t).removeClass("selected")})),this.updateRemoveParticipantButton()},blockId:function(){this.parent.children&&this.parent.children.blocked&&this.parent.children.blocked.blockId()},deselectParticipants:function(e){this.$(".list-item.selected").removeClass("selected"),this.updateRemoveParticipantButton()},selectParticipant:function(e){if(li(e.target).parent().hasClass("revoke-invitation")||li(e.target).parent().hasClass("unblock-user")||li(e.target).hasClass("revoke-invitation")||li(e.target).hasClass("unblock-user"))return;let t=li(e.target).closest(".list-item"),i=t.hasClass("selected");t.switchClass("selected",!i),this.updateRemoveParticipantButton()},updateRemoveParticipantButton:function(){let e=this.$(".list-item.selected").length;this.$(".block-name-panel.second-text span").html(e),e?(this.$(".participants-edit-back").removeClass("mdi-arrow-right").addClass("mdi-close"),this.$(".participants-edit-back").removeClass("btn-back-panel").addClass("btn-reset-panel"),this.$(".block-name-panel:not(.second-text)").addClass("fade-out"),this.$(".edit-bottom-block .btn-invite").addClass("fade-out"),this.$(".edit-bottom-block .btn-add-block").addClass("fade-out"),this.$(".block-name-panel.second-text").removeClass("fade-out"),this.$(".btn-remove-selected").removeClass("fade-out")):(this.$(".participants-edit-back").addClass("mdi-arrow-right").removeClass("mdi-close"),this.$(".participants-edit-back").addClass("btn-back-panel").removeClass("btn-reset-panel"),this.$(".block-name-panel:not(.second-text)").removeClass("fade-out"),this.$(".edit-bottom-block .btn-invite").removeClass("fade-out"),this.$(".edit-bottom-block .btn-add-block").removeClass("fade-out"),this.$(".block-name-panel.second-text").addClass("fade-out"),this.$(".btn-remove-selected").addClass("fade-out"))},clickAvatarInput:function(e){this.$(".circle-avatar input").click()},hidePanel:function(){this.parent.getInvitations((e=>{let t=li(e).find("query").find("user").length;0===t&&(t=""),this.$(".invitations-variant .counted").html(t)})),this.model.getBlockedParticipants((e=>{let t=li(e).find("query").children().length;0===t&&(t=""),this.$(".blocked-variant .counted").html(t)})),this.$(".btn-back-panel").hideIf(!0),this.$(".block-name-panel").hideIf(!0),this.$(".edit-bottom-block .btn-add-block").hideIf(!0),this.$(".edit-bottom-block .btn-invite").hideIf(!0),this.$(".btn-remove-selected").hideIf(!0),this.$(".participants-edit-wrap").hideIf(!0)},showPanel:function(){this.$(".btn-back-panel").hideIf(!1),this.$(".block-name-panel").hideIf(!1),this.$(".btn-remove-selected").hideIf(!1),this.$(".participants-edit-wrap").hideIf(!1),this.updateRemoveParticipantButton(),this.ps_container.length&&this.ps_container.perfectScrollbar("destroy"),this.ps_container=this.$(".participants-edit-wrap"),this.ps_container.length&&this.ps_container.perfectScrollbar(ui.extend(this.parent.ps_settings||{},nt.ps_settings))},resetPanel:function(){this.updateSaveButton(),this.showEdit()},updateSaveButton:function(){let e=!1;this.data_form.fields.forEach((t=>{if("hidden"===t.type||"fixed"===t.type)return;let i=t.values?t.values[0]:null;t.var in this.original_data_form_values&&this.original_data_form_values[t.var]!=i&&(e=!0)})),this.$(".btn-save").switchClass("fade-out",!e),this.$(".btn-qr-code").hideIf(e),e?(this.$(".block-name.second-text").html(nt.getString("edit_vcard")),this.$(".edit-header:not(.main-edit-header) .details-icon").removeClass("mdi-arrow-right").addClass("mdi-close"),this.$(".edit-header:not(.main-edit-header) .details-icon").removeClass("btn-back").addClass("btn-reset"),this.$(".edit-header:not(.main-edit-header) .block-name:not(.second-text)").addClass("fade-out"),this.$(".edit-header:not(.main-edit-header) .block-name.second-text").removeClass("fade-out")):(this.$(".edit-header:not(.main-edit-header) .details-icon").addClass("mdi-arrow-right").removeClass("mdi-close"),this.$(".edit-header:not(.main-edit-header) .details-icon").addClass("btn-back").removeClass("btn-reset"),this.$(".edit-header:not(.main-edit-header) .block-name:not(.second-text)").removeClass("fade-out"),this.$(".edit-header:not(.main-edit-header) .block-name.second-text").addClass("fade-out"));let t=this.model.get("group_info")||{};t&&("public"===t.privacy&&this.$(".main-edit-header .block-name:not(.second-text)").html(nt.getString("groupchat_public_group")),"incognito"===t.privacy&&this.$(".main-edit-header .block-name:not(.second-text)").html(nt.getString("groupchat_incognito_group")))},changeName:function(e){if(this.data_form&&e){let t=this.data_form.fields.findIndex((e=>"name"==e.var));this.original_data_form_values.name||(this.original_data_form_values.name=this.data_form.fields[t].values[0]),this.data_form.fields[t].values=[e],this.updateSaveButton()}},changeDescription:function(e){if(this.data_form){let t=this.data_form.fields.findIndex((e=>"description"==e.var));this.original_data_form_values.description||(this.original_data_form_values.description=this.data_form.fields[t].values[0]),this.data_form.fields[t].values=[e],this.updateSaveButton()}},changeMembership:function(e){let t,i=li(e.target).attr("id");if(this.data_form&&i){let e=this.data_form.fields.findIndex((e=>"membership"==e.var));this.original_data_form_values.membership||(this.original_data_form_values.membership=this.data_form.fields[e].values[0]),this.data_form.fields[e].values=[i],"open"===i&&(t=nt.getString("groupchat_membership_type_open")),"member-only"===i&&(t=nt.getString("groupchat_membership_type_members_only")),this.$(".membership-property span").text(t),this.updateSaveButton()}},changeIndex:function(e){let t,i=li(e.target).attr("id");if(this.data_form&&i){let e=this.data_form.fields.findIndex((e=>"index"==e.var));this.original_data_form_values.index||(this.original_data_form_values.index=this.data_form.fields[e].values[0]),this.data_form.fields[e].values=[i],"none"===i&&(t=nt.getString("groupchat_index_type_none")),"local"===i&&(t=nt.getString("groupchat_index_type_local")),"global"===i&&(t=nt.getString("groupchat_index_type_global")),this.$(".index-property span").text(t),this.updateSaveButton()}},saveChanges:function(){if(this.$(".btn-save").hasClass("fade-out"))return;this.$(".btn-save").addClass("fade-out"),this.group_name_field.$input.prop("disabled",!0),this.group_description_field.$input.prop("disabled",!0),this.$(".edit-save-preloader.preloader-wrap").addClass("visible").find(".preloader-wrapper").addClass("active");let e=di({type:"set",to:this.model.get("full_jid")||this.model.get("jid")}).c("query",{xmlns:gi.NS.GROUP_CHAT});e=this.account.addDataFormToStanza(e,this.data_form),this.account.sendIQFast(e,(e=>{let t=li(e),i=ui.clone(this.model.get("group_info")),s={name:t.find('field[var="name"] value').text(),searchable:t.find('field[var="index"]').children("value").text(),model:t.find('field[var="membership"]').children("value").text(),description:t.find('field[var="description"] value').text(),status:t.find('field[var="status"]').children("value").text()};ui.extend(i,s),this.model.set("group_info",i),this.group_name_field.$input.prop("disabled",!1),this.group_description_field.$input.prop("disabled",!1),this.hideProperty(),this.$(".edit-save-preloader.preloader-wrap").removeClass("visible").find(".preloader-wrapper").removeClass("active"),this.resetPanel()}),(e=>{let t=li(e).find("error text").text()||nt.getString("groupchat_you_have_no_permissions_to_do_it");ci.dialogs.error(t),this.group_name_field.$input.prop("disabled",!1),this.group_description_field.$input.prop("disabled",!1),this.hideProperty(),this.$(".edit-save-preloader.preloader-wrap").removeClass("visible").find(".preloader-wrapper").removeClass("active")}))},showEdit:function(e){let t=di({to:this.model.get("full_jid")||this.model.get("jid"),type:"get"}).c("query",{xmlns:gi.NS.GROUP_CHAT});this.parent.$(".group-edit-preloader").html(ai.templates.contacts.preloader()),this.account.sendIQFast(t,(e=>{this.data_form=this.account.parseDataForm(li(e).find(`x[xmlns="${gi.NS.DATAFORM}"]`)),this.original_data_form_values={},this.model.set("edit_hidden",!1),this.parent.scrollToTop(),this.parent.ps_container.length&&this.parent.ps_container.perfectScrollbar("destroy"),this.ps_container=this.$(".edit-wrap"),this.ps_container.length&&this.ps_container.perfectScrollbar(ui.extend(this.parent.ps_settings||{},nt.ps_settings)),this.update(),this.$(".group-property:not(.privacy-property)").removeClass("disabled"),this.group_name_field.$input.hideIf(!1),this.group_description_field.$input.hideIf(!1),this.group_name_field.$input.prop("disabled",!1),this.group_description_field.$input.prop("disabled",!1),this.$(".circle-avatar input").prop("disabled",!1),this.$(".set-groupchat-avatar-text").hideIf(!1),this.$(".group-property").removeClass("property-disabled"),this.$(".membership-property .details-icon-right").hideIf(!1),this.$(".index-property .details-icon-right").hideIf(!1),this.$(".circle-avatar .set-groupchat-avatar").hideIf(!1),this.$(".btn-edit").hideIf(!1),this.$(".edit-bottom-block").hideIf(!1),this.$(".btn-default-restrictions").hideIf(!1),this.$(".btn-delete-group").hideIf(!1),this.$(".btn-clear-history-chat").hideIf(!1),this.$(".btn-back-panel").hideIf(!0),this.$(".block-name-panel").hideIf(!0),this.$(".edit-bottom-block .btn-add-block").hideIf(!0),this.$(".edit-bottom-block .btn-invite").hideIf(!0),this.$(".btn-remove-selected").hideIf(!0),this.$(".participants-edit-wrap").hideIf(!0),this.parent.getInvitations((e=>{let t=li(e).find("query").find("user").length;0===t&&(t=""),this.$(".invitations-variant .counted").html(t)})),this.model.getBlockedParticipants((e=>{let t=li(e).find("query").children().length;0===t&&(t=""),this.$(".blocked-variant .counted").html(t)})),this.$(".edit-wrap").hideIf(this.model.get("edit_hidden")),this.parent.$(".group-edit-preloader").html(""),this.group_description_field.$input.height(this.group_description_field.$input[0].scrollHeight-8),this.$(".tabs .indicator").remove()}),(()=>{this.model.set("edit_hidden",!1),this.parent.scrollToTop(),this.parent.ps_container.length&&this.parent.ps_container.perfectScrollbar("destroy"),this.ps_container=this.$(".edit-wrap"),this.ps_container.length&&this.ps_container.perfectScrollbar(ui.extend(this.parent.ps_settings||{},nt.ps_settings)),this.update(),this.group_name_field.$input.prop("disabled",!0),this.group_description_field.$input.prop("disabled",!0),this.group_description_field.$input.val()||this.group_description_field.$input.hideIf(!0),this.$(".circle-avatar input").prop("disabled",!0),this.$(".set-groupchat-avatar-text").hideIf(!0),this.$(".group-property").addClass("property-disabled"),this.$(".membership-property .details-icon-right").hideIf(!0),this.$(".index-property .details-icon-right").hideIf(!0),this.$(".circle-avatar .set-groupchat-avatar").hideIf(!0),this.$(".group-property:not(.privacy-property)").addClass("disabled"),this.$(".btn-edit").hideIf(!0),this.$(".edit-bottom-block").hideIf(!0),this.$(".btn-default-restrictions").hideIf(!0),this.$(".btn-delete-group").hideIf(!0),this.$(".btn-clear-history-chat").hideIf(!0),this.$(".btn-back-panel").hideIf(!0),this.$(".block-name-panel").hideIf(!0),this.$(".edit-bottom-block .btn-add-block").hideIf(!0),this.$(".edit-bottom-block .btn-invite").hideIf(!0),this.$(".btn-remove-selected").hideIf(!0),this.$(".participants-edit-wrap").hideIf(!0);this.model.get("group_info");this.$(".edit-wrap").hideIf(this.model.get("edit_hidden")),this.parent.$(".group-edit-preloader").html(""),this.group_description_field.$input.height(this.group_description_field.$input[0].scrollHeight-8),this.$(".tabs .indicator").remove()}))},hideEdit:function(e){this.model.set("edit_hidden",!0),this.parent.ps_container.length&&this.parent.ps_container.perfectScrollbar(ui.extend(this.parent.ps_settings||{},nt.ps_settings)),this.ps_container.length&&this.ps_container.perfectScrollbar("destroy"),this.$(".edit-wrap").hideIf(this.model.get("edit_hidden"))}}),nt.ContactsBase=Backbone.Collection.extend({model:nt.Contact}),nt.GroupContacts=nt.ContactsBase.extend({initialize:function(e,t){this.group=t.group,this.on("change",this.onContactChanged,this)},comparator:function(e,t){if("online-first"===nt.settings.roster.sorting){let i=e.get("status"),s=t.get("status"),n=oi.STATUS_WEIGHTS[i],a=oi.STATUS_WEIGHTS[s],o=n>=oi.STATUS_WEIGHTS.offline;if(o^a>=oi.STATUS_WEIGHTS.offline)return o?1:-1}let i,s;return i=e.get("name").toLowerCase(),s=t.get("name").toLowerCase(),i<s?-1:i>s?1:0},onContactChanged:function(e){let t=e.changed;(ui.has(t,"name")||ui.has(t,"status_updated"))&&(this.sort(),this.trigger("update_contact_item",e))}}),nt.Group=Backbone.Model.extend({defaults:{counter:{all:0,online:0}},initialize:function(e,t){this.account=t.account,e.name||(e.name=e.id),this.set(e),this._settings=this.account.groups_settings.get(e.name),this._settings||(this._settings=this.account.groups_settings.create({name:e.name})),this.settings=this._settings.attributes,this.contacts=new nt.GroupContacts(null,{group:this}),this.settings_view=new nt.GroupSettingsView({model:this}),this.contacts.on("add update_contact_item",this.updateCounter,this),this.contacts.on("destroy",this.onContactRemoved,this),nt._roster_settings.on("change",this.onChangedRosterSettings,this)},isSpecial:function(){return ui.isNumber(this.get("id"))},updateCounter:function(){let e=this.contacts.length,t=e-this.contacts.where({status:"offline"}).length;this.set("counter",{all:e,online:t})},renameGroup:function(e){let t=this.get("name"),i=ui.clone(this.settings);i.name=e,this._settings.destroy(),this._settings=this.account.groups_settings.create(i),this.settings=this._settings.attributes,this.set({id:e,name:e}),this.trigger("rename",this,t),ui.each(ui.clone(this.contacts.models),(function(i){let s=ui.clone(i.get("groups")),n=s.indexOf(t);n>=0&&s.splice(n,1),n=s.indexOf(e),n<0&&s.push(e),i.pushInRoster({groups:s})}))},deleteGroup:function(){let e=this.get("name");this._settings.destroy(),ui.each(ui.clone(this.contacts.models),(function(t){let i=ui.clone(t.get("groups")),s=i.indexOf(e);s>=0&&i.splice(s,1),t.pushInRoster({groups:i})}))},removeContact:function(e){this.contacts.get(e)&&(this.contacts.remove(e),this.onContactRemoved(e))},onContactRemoved:function(e){this.updateCounter(),this.trigger("remove_contact",e),this.contacts.length||this.destroy()},onChangedRosterSettings:function(){let e=nt._roster_settings.changed;ui.has(e,"show_offline")&&this._settings.trigger("change:show_offline"),ui.has(e,"sorting")&&(this.contacts.sort(),this._settings.trigger("change:sorting"))},showSettings:function(){nt.body.setScreen("settings-modal",{account_block_name:null}),nt.trigger("update_placeholder")}}),nt.GroupView=nt.BasicView.extend({className:"roster-group",events:{"click .group-head":"toggle","click .group-head .group-icon":"showGroupSettings","mouseover .group-head":"showSettingsIcon","mouseleave .group-head":"updateGroupIcon"},_initialize:function(){this.account=this.model.account,this.updateName(),this.updateGroupIcon(),this.updateMembersCounter(),this.model.contacts.on("add",this.onContactAdded,this),this.model.on("remove_contact",this.onContactRemoved,this),this.model.contacts.on("update_contact_item",this.updateContactItem,this),this.model.on("change:name",this.updateName,this),this.model.on("change:counter",this.updateMembersCounter,this),this.model._settings.on("change:show_offline",this.onChangedOfflineSetting,this),this.model._settings.on("change:sorting",this.onChangedSortingSetting,this),this.data.on("change:expanded",this.updateExpanded,this)},updateExpanded:function(){let e=this.data.get("expanded");this.$el.switchClass("shrank",!e),this.$(".arrow").switchClass("mdi-chevron-down",e),this.$(".arrow").switchClass("mdi-chevron-right",!e),this.$(".roster-contact").showIf(e),this.parent.parent.onListChanged()},updateGroupIcon:function(){let e,t=this.model.settings.show_offline;"default"===t?e="settings":"yes"===t?e="group-filled":"no"===t&&(e="group-outline"),this.$(".group-icon").attr("data-mdi",e).hideIf("settings"===e)},updateName:function(){this.$(".group-name").text(this.model.get("name"))},updateMembersCounter:function(){let e=this.model.get("counter");this.$(".participant-counter").text("("+e.online+"/"+e.all+")")},onContactAdded:function(e){this.addChild(e.get("jid"),this.item_view,{model:e});this.updateContactItem(e)},onContactRemoved:function(e){this.removeChild(e.get("jid")),this.parent.parent.onListChanged()},updateContactItem:function(e){let t=this.child(e.get("jid"));if(!t)return;let i=nt.settings.roster,s=this.model.settings,n="default"===s.show_offline,a="yes"===s.show_offline||n&&"yes"===i.show_offline,o=oi.STATUS_WEIGHTS[e.get("status")]>=6;t.$el.switchClass("invisible",o&&!a).detach();let r=this.model.contacts.indexOf(e);return 0===r?this.$(".group-head").after(t.$el):this.$(".roster-contact").eq(r-1).after(t.$el),t.$el.showIf(this.data.get("expanded")),this.parent.parent.onListChanged(),t},showSettingsIcon:function(){this.$(".group-icon").attr("data-mdi","settings").removeClass("hidden")},showGroupSettings:function(e){e.stopPropagation(),this.model.showSettings()},onChangedOfflineSetting:function(){this.updateGroupIcon();let e=nt.settings.roster,t=this.model.settings,i="default"===t.show_offline,s="yes"===t.show_offline||i&&"yes"===e.show_offline;ui.each(this.children,(function(e){let t=oi.STATUS_WEIGHTS[e.model.get("status")]>=6;e.$el.switchClass("invisible",t&&!s)})),this.parent.parent.onListChanged()},onChangedSortingSetting:function(){ui.each(this.children,(function(e){e.$el.detach()})),this.model.contacts.each((e=>{this.updateContactItem(e)})),this.parent.parent.onListChanged()}}),nt.GroupRightView=nt.GroupView.extend({template:ri.group_right,item_view:nt.ContactItemRightView,__initialize:function(){this.data.set("expanded",this.model.settings.expanded)},toggle:function(){let e=!this.data.get("expanded");this.data.set("expanded",e),this.model._settings.save("expanded",e)}}),nt.GroupLeftView=nt.GroupView.extend({template:ri.group_left,item_view:nt.ContactItemLeftView,__initialize:function(){this.data.set("expanded",!0)},toggle:function(e){e.stopPropagation(),this.data.set("expanded",!this.data.get("expanded"))}}),nt.GroupSettingsView=nt.BasicView.extend({className:"modal main-modal group-settings",template:ri.group_settings,ps_selector:".modal-content",avatar_size:oi.AVATAR_SIZES.GROUP_SETTINGS,events:{"change .offline input[type=radio][name=offline]":"setOffline","click .btn-apply":"applySettings","click .btn-delete":"deleteGroup","click .btn-cancel":"close"},_initialize:function(){this._settings=this.model._settings;this.model.get("name");this.model.isSpecial()&&(this.$(".group-name input").attr("readonly",!0),this.$(".btn-delete").addClass("hidden")),this.model.on("destroy",this.onDestroy,this)},render:function(){this.$(".group-name input").val(this.model.get("name")),this.$(".group-name .errors").addClass("hidden"),this.$(".offline input[type=radio][name=offline][value="+this.model.settings.show_offline+"]").prop("checked",!0),this.$el.openModal({ready:function(){Materialize&&Materialize.updateTextFields&&Materialize.updateTextFields()},complete:this.hide.bind(this)})},setOffline:function(e){this.model._settings.save("show_offline",e.target.value)},validateName:function(e){return e?this.model.collection.get(e)?nt.getString("dialog_add_circle__error__text_wrong_name"):void 0:nt.getString("dialog_add_circle__error__text_input_name")},applySettings:function(){let e=this.$(".group-name input").val();if(e!==this.model.get("name")){let t=this.validateName(e);if(t)return void this.$(".group-name .errors").text(t).removeClass("hidden");this.model.renameGroup(e)}this.close()},deleteGroup:function(){let e=this.model.get("name");ci.dialogs.ask(nt.getString("circle_remove"),nt.getString("circle_remove_confirm",[e]),null,{ok_button_text:nt.getString("remove")}).done((e=>{e&&this.model.deleteGroup()}))},onHide:function(){this.$el.detach()},close:function(){this.$el.closeModal({complete:this.hide.bind(this)})},onDestroy:function(){this.$el.closeModal({complete:this.remove.bind(this)})}}),nt.Groups=Backbone.Collection.extend({model:nt.Group,initialize:function(e,t){this.account=t.account,this.on("change:id",this.sort,this),this.account.on("render_settings",this.render,this),this.account.on("render_single_settings",this.renderSingleAccount,this)},comparator:function(e,t){return e.isSpecial()===t.isSpecial()?e.get("id")<t.get("id")?-1:1:e.isSpecial()?1:-1},notSpecial:function(){return this.filter((function(e){return!e.isSpecial()}))},onGroupAdded:function(e){e.acc_view=new nt.AccountGroupView({model:e})},onGroupAddedSingleAccount:function(e){e.acc_view=new nt.AccountGroupView({model:e,single_account:this.single_account})},render:function(){this.on("add",this.onGroupAdded,this),this.models.forEach((e=>{e.acc_view=new nt.AccountGroupView({model:e})}))},renderSingleAccount:function(e){e.$(".groups").html(""),!this.rendered_once&&this.on("add",this.onGroupAddedSingleAccount,this),this.single_account=e,this.rendered_once=!0,this.models.forEach((t=>{t.acc_view=new nt.AccountGroupView({model:t,single_account:e})}))}}),nt.Contacts=nt.ContactsBase.extend({initialize:function(e,t){this.account=t.account,this.account.on("deactivate destroy",this.removeAllContacts,this),this.collections=[],this.on("add",ui.bind(this.updateInCollections,this,"add")),this.on("change",ui.bind(this.updateInCollections,this,"change"))},addCollection:function(e){this.collections.push(e)},updateInCollections:function(e,t){ui.each(this.collections,(function(i){i.update(t,e)}))},mergeContact:function(e){"object"!=typeof e&&(e={jid:e});let t=this.get(e.jid);return t?(e.avatar&&(e.image=e.avatar,delete e.avatar,t.cached_image=vi.getCachedImage(e.image)),e.group_chat&&e.is_deleted&&delete e.group_chat,t.set(e)):t=this.create(e,{account:this.account}),t},blockContact:function(e,t,i){let s=di({type:"set"}).c("block",{xmlns:gi.NS.BLOCKING}).c("item",{jid:e});this.account.sendIQFast(s,t,i)},unblockContact:function(e,t,i){let s=di({type:"set"}).c("unblock",{xmlns:gi.NS.BLOCKING}).c("item",{jid:e});this.account.sendIQFast(s,t,i)},removeAllContacts:function(){ui.each(ui.clone(this.models),(function(e){e.destroy()})),this.account.trigger("remove_saved_chat")},handlePresence:function(e,t){this.mergeContact(t).handlePresence(e)}}),nt.BlockList=Backbone.Model.extend({initialize:function(e,t){this.account=t.account,this.list={},this.contacts=this.account.contacts,this.contacts.on("add_to_blocklist",this.onContactAdded,this),this.contacts.on("remove_from_blocklist",this.onContactRemoved,this)},length:function(){return Object.keys(this.list).length},isBlocked:function(e){return this.list.hasOwnProperty(e)},onContactRemoved:function(e){delete this.list[e]},onContactAdded:function(e){this.list[e.jid]=e},registerHandler:function(){this.account.connection.deleteHandler(this._stanza_handler),this._stanza_handler=this.account.connection.addHandler(this.onBlockingIQ.bind(this),gi.NS.BLOCKING,"iq","set",null,this.account.get("jid"))},getFromServer:function(){let e=di({type:"get"}).c("blocklist",{xmlns:gi.NS.BLOCKING});this.account.sendIQFast(e,this.onBlockingIQ.bind(this))},onBlockingIQ:function(e){let t=li(e).find(`[xmlns="${gi.NS.BLOCKING}"]`),i=t[0].tagName.toLowerCase().startsWith("block");return t.find("item").each(((e,t)=>{let s=t.getAttribute("jid"),n=gi.getResourceFromJid(s),a=gi.getDomainFromJid(s),o={jid:s},r=this.contacts.get(s);n&&(o.resource=!0),a===s&&(o.domain=!0),i?this.contacts.trigger("add_to_blocklist",o):(this.contacts.trigger("remove_from_blocklist",s),r&&r.trigger("remove_from_blocklist",r)),r&&r.set("blocked",i)})),!0}}),nt.Roster=nt.ContactsBase.extend({initialize:function(e,t){this.account=t.account,this.roster_version=t.roster_version||0,this.groups=this.account.groups,this.contacts=this.account.contacts,this.contacts.on("add_to_roster",this.onContactAdded,this),this.contacts.on("change_in_roster",this.onContactChanged,this),this.contacts.on("remove_from_roster",this.onContactRemoved,this)},update:function(e,t){e.get("in_roster")||e.get("known")?this.get(e)?"change"===t&&e.trigger("change_in_roster",e):(this.add(e),e.trigger("add_to_roster",e)):this.get(e)&&(this.remove(e),e.trigger("remove_from_roster",e))},onContactAdded:function(e){if(!e.get("in_roster"))return;let t=e.get("groups");t.length?ui.each(t,ui.bind(this.addContactToGroup,this,e)):this.addContactToGroup(e,oi.GENERAL_GROUP_ID)},onContactChanged:function(e){let t=e.changed,i=ui.has(t,"known"),s=ui.has(t,"in_roster"),n=ui.has(t,"groups");if(s||i||n){let t;e.get("in_roster")?(t=ui.clone(e.get("groups")),t.length||t.push(oi.GENERAL_GROUP_ID)):e.get("known")&&(t=[]);let i=this.groups.filter((function(e){return!ui.contains(t,e.get("id"))}));ui.each(i,(function(t){t.removeContact(e)})),ui.each(t,ui.bind(this.addContactToGroup,this,e)),e.trigger("update_groups")}},onContactRemoved:function(e){ui.each(this.groups.filter(),(function(t){t.removeContact(e)}))},getGroup:function(e){let t=this.groups.get(e);if(t)return t;let i={id:e};return e===oi.GENERAL_GROUP_ID?i.name=nt.settings.roster.general_group_name:e===oi.NON_ROSTER_GROUP_ID&&(i.name=nt.settings.roster.non_roster_group_name),this.groups.create(i,{account:this.account})},addContactToGroup:function(e,t){this.getGroup(t).contacts.add(e)},registerHandler:function(){this.account.connection.deleteHandler(this._stanza_handler),this._stanza_handler=this.account.connection.addHandler(this.onRosterIQ.bind(this),gi.NS.ROSTER,"iq","set",null,this.account.get("jid"))},syncFromServer:function(e,t,i){e=e||{};let s={xmlns:gi.NS.SYNCHRONIZATION},n=e.cached_conversations_exclude||[];e.stamp&&(s.stamp=e.stamp),delete e.stamp,delete e.cached_conversations_exclude;let a=di({type:"get"}).c("query",s).cnode(new gi.RSM(e).toXML());this.account.sendFast(a,(a=>{this.onSyncIQ(a,s.stamp,t,i,e.last_version_sync,n).then((()=>{}))}))},syncCachedConversations:function(e,t,i,s){li(s).each(((e,t)=>{this.syncConversation(null,null,t.conversation,i)}))},syncConversations:function(e,t,i,s){li(e).find("conversation").each(((n,a)=>{this.syncConversation(e,t,a,i,s)}))},syncConversation:function(e,t,i,s,n){if(!li(i).length||!this.account||this.account.session.get("delete"))return;e||(i=li(li.parseXML(i)).find("conversation")[0]);let a=li(i),o=a.attr("jid"),r=!1;if(n&&li(n).each(((e,t)=>{if(!t.account_conversation_type||!t.account_conversation_type.split)return;t.account_conversation_type.split("/")[0]===o&&t.account_conversation_type!==li(i).attr("jid")+"/"+li(i).attr("type")&&(a.attr("type")===gi.NS.GROUP_CHAT||t.account_conversation_type.includes(gi.NS.GROUP_CHAT))&&this.account.cached_sync_conversations.removeFromCachedConversations(t.account_conversation_type)})),this.account.server_features.get(gi.NS.XABBER_FAVORITES)&&this.account.server_features.get(gi.NS.XABBER_FAVORITES).get("from")&&o===this.account.server_features.get(gi.NS.XABBER_FAVORITES).get("from")&&(r=!0),a.attr("type")===gi.NS.SYNCHRONIZATION_OLD_OMEMO)return!0;let c,l=a.children('metadata[node="'+gi.NS.SYNCHRONIZATION+'"]'),d=a.attr("type"),h=a.children("presence"),g=a.children('metadata[node="'+gi.NS.GROUP_CHAT+'"]'),u=d===gi.NS.GROUP_CHAT&&"incognito"===g.children('x[xmlns="'+gi.NS.GROUP_CHAT+'"]').children("privacy").text(),p=u&&g.children('x[xmlns="'+gi.NS.GROUP_CHAT+'"]').children("parent").text(),m=d===gi.NS.GROUP_CHAT||p||u,_=d===gi.NS.SYNCHRONIZATION_OMEMO,v=!r&&this.contacts.mergeContact({jid:o,group_chat:m,private_chat:p,incognito_chat:u,is_deleted:"deleted"===a.attr("status")}),f=r?this.account.chats.getSavedChat():this.account.chats.getChat(v,_&&"encrypted",!0),b=l.children("last-message").children("message"),A=a.children('metadata[node="'+gi.NS.JINGLE_MSG+'"]').children("call"),w=l.children("unread"),y=Math.trunc(Number(a.attr("stamp"))/1e3),x=w.attr("after"),k=l.children("delivered").attr("id"),C=l.children("displayed").attr("id"),S=Number(w.attr("count"))||0,$=b.find("invite").length,I=a.children('metadata[node="'+gi.NS.REWRITE+'"]').children("retract").attr("version"),E={synced_msg:!0},T=f.get("last_sync_timestamp");if(T&&T>y)return ni.log("old_sync_conv"),void ni.log(i);if(f.set("last_sync_timestamp",y),!(b.children("stanza-id").length&&b.children("stanza-id").attr("id")&&f.retracted_msg_id_list.includes(b.children("stanza-id").attr("id")))){if(f.set("sync_type",d),e&&"deleted"!==a.attr("status")&&this.account.cached_sync_conversations.putInCachedConversations({account_conversation_type:li(i).attr("jid")+"/"+li(i).attr("type"),conversation:i.outerHTML}),!f.item_view.content&&(f.get("sync_type")===gi.NS.XABBER_NOTIFY||$||_&&this.account.omemo)&&(f.item_view.content=new nt.ChatContentView({chat_item:f.item_view}),f.get("sync_type")===gi.NS.XABBER_NOTIFY&&this.account.server_features.get(gi.NS.XABBER_NOTIFY)&&o===this.account.server_features.get(gi.NS.XABBER_NOTIFY).get("from"))){if(nt.notifications_view){let e;nt.notifications_view.notifications_chats.some((e=>e.account.get("jid")===f.account.get("jid")))||(e=new nt.NotificationsChatContentView({chat_item:f.item_view}),this.account.notifications_content=e,nt.notifications_view.notifications_chats.push(e),e.data.set("notification_content",!0))}f.set("notifications",!0),v.set("subscription","both"),f.item_view.content.loadNotificationsHistoryToPreviousLastMsg(),nt.accounts.trigger("notification_chat_created")}if((a.attr("pinned")||"0"===a.attr("pinned"))&&f.set("pinned",a.attr("pinned")),_&&this.account.omemo&&(f.set("timestamp",y),f.set("opened",!0),f.last_message&&f.last_message.get("message")||f.item_view.updateEncryptedChat()),r||(a.attr("mute")||"0"===a.attr("mute")?(a.attr("mute")<Date.now()/1e3?f.set("muted",!1):f.set("muted",a.attr("mute")),this.account.chat_settings&&this.account.chat_settings.updateMutedList(v.get("jid"),a.attr("mute")),v.details_view_right&&v.details_view_right.updateNotifications()):f.set("muted",!1)),"archived"===a.attr("status")?f.set("archived",!0):"active"!==a.attr("status")||r||f.set("archived",!1),"deleted"===a.attr("status")||f.get("sync_type")===gi.NS.XABBER_NOTIFY&&this.account.server_features.get(gi.NS.XABBER_NOTIFY)&&o!==this.account.server_features.get(gi.NS.XABBER_NOTIFY).get("from")?(f.get("display")&&nt.body.setScreen(nt.body.screen.get("name"),{right_contact:"",right:void 0}),f.set("opened",!1),f.set("const_unread",0),this.account.cached_sync_conversations.removeFromCachedConversations(li(i).attr("jid")+"/"+li(i).attr("type")),this.account.chat_settings.updateGroupChatsList(v.get("jid"),!1),nt.toolbar_view.recountAllMessageCounter(),nt.chats_view.clearSearch(),v&&v.set("sync_deleted",!0),m&&(v&&v.set("in_roster",!1),v&&v.set("known",!1),v&&v.set("removed",!0),this.account.cached_roster.removeFromRoster(o),v.participants&&v.participants.reset(),this.account.groupchat_settings.resetParticipantsList(v.get("jid")))):v&&v.set("sync_deleted",!1),A.length){let e=A.children("message"),t=e.attr("from"),i=e.children("propose").attr("id");f.getCallingAvailability(t,i,(()=>{if(nt.current_voip_call){let e=gi.getBareJidFromJid(t)===gi.getBareJidFromJid(nt.current_voip_call.get("contact_full_jid"))?"device_busy":"busy";f.sendReject({session_id:i,reason:e}),f.messages.createSystemMessage({from_jid:this.account.get("jid"),message:nt.getString("jingle__system_message__cancelled_call")})}else f.initIncomingCall(t,i)}))}if(f.set("last_delivered_id",k),f.set("last_displayed_id",C),f.set("last_read_msg",x),f.trigger("update_last_read_msg",{sync_update:!0}),b.length||(f.set("timestamp",y),Number(k)||Number(C)||Number(x)||f.item_view.content||f.get("group_chat")||(f.item_view.content=new nt.ChatContentView({chat_item:f.item_view})),!f.messages.length&&f.item_view.updateEmptyChat()),t&&0!==f.retraction_version&&f.retraction_version<I&&f.trigger("get_retractions_list"),I&&(f.retraction_version=I),t&&f.item_view&&f.item_view.content&&!$&&f.trigger("get_missed_history",t/1e3),S&&(E.is_unread=!0),E.delay=b.children("time"),0==S&&(E.sync_timestamp=y),b.length&&(c=this.account.chats.receiveChatMessage(b,E)),c?(!c.get("is_unread")&&w.attr("count")>0&&!c.isSenderMe()&&"system"!==c.get("type")&&(w.attr("after")<c.get("stanza_id")||w.attr("after")<c.get("contact_stanza_id"))&&c.set("is_unread",!0),$||_&&this.account.omemo||(c.isSenderMe()&&(c.get("stanza_id")==C||r)?c.set("state",oi.MSG_DISPLAYED):c.isSenderMe()&&c.set("state",oi.MSG_DELIVERED),this.account.messages.add(c),(f.last_message&&c.get("timestamp")>f.last_message.get("timestamp")||!f.last_message)&&(f.last_message=c,f.get("notifications")&&f.account.trigger("notification_last_msg_updated",c.get("stanza_id")),f.item_view.updateLastMessage(c),c.get("stanza_id")&&f.set("synced_msg",c))),f.set("first_archive_id",c.get("stanza_id"))):b.length&&!c&&(f.messages&&f.messages.length||(f.set("timestamp",y),Number(k)||Number(C)||Number(x)||f.item_view.content||f.get("group_chat")||(f.item_view.content=new nt.ChatContentView({chat_item:f.item_view})),f.item_view.updateEmptyChat())),!_||this.account.omemo){let e=f.messages.get(x);if(e&&S){f.messages.filter((t=>t.get("timestamp")>e.get("timestamp")&&!t.isSenderMe())).forEach((e=>e.set("is_unread",!0)));let t=f.messages.filter((t=>t.get("timestamp")>e.get("timestamp")&&!t.isSenderMe()&&t.get("was_readen"))),i=t[t.length-1];t.forEach((e=>{e.set("is_unread",!1)})),S-=t.length,S<0&&(S=0),i&&f.sendMarker(i.get("msgid"),"displayed",i.get("stanza_id"),i.get("contact_stanza_id"),i.get("encrypted")&&i.get("ephemeral_timer"),!0)}f.messages_unread.reset(),f.set("unread",0),f.set("const_unread",S),c&&c.isSenderMe()&&S&&0==x&&!r&&f.set("const_unread",0)}h.length?v&&v.handlePresence(h[0]):v&&v.set("subscription_request_in",!1),nt.toolbar_view.recountAllMessageCounter()}},onSyncIQ:async function(e,t,i,s,n,a){let o=Number(li(e).children(`query[xmlns="${gi.NS.SYNCHRONIZATION}"]`).attr("stamp")),r=li(e).find(`query set[xmlns="${gi.NS.RSM}"]`).children("last").text();this.account.last_msg_timestamp=Math.round(o/1e3);let c=li(e).find("set last");t||(c.length?this.last_chat_msg_id=c.text():this.conversations_loaded=!0),this.account.set("last_sync",o),this.account.settings.update_settings({last_sync_timestamp:o}),nt.chats_view.hideChatsFeedback(),!t&&this.account.server_features.get(gi.NS.XABBER_FAVORITES)&&this.account.chats.getSavedChat(),s&&this.account.set("first_sync",o),!li(e).find("conversation").length||li(e).find("conversation").length<oi.SYNCHRONIZATION_RSM_MAX?this.account.cached_sync_conversations.getAllFromCachedConversations((i=>{if(n||(a=a.concat(li(e).find("conversation").map((function(){return li(this).attr("jid")+"/"+li(this).attr("type")})).toArray()),i=i.filter((e=>!a.includes(e.account_conversation_type))),this.account.session.get("reconnected")||this.syncCachedConversations(null,t,s,i)),this.syncConversations(e,t,s,i),this.account.cached_sync_conversations.putInCachedConversations({account_conversation_type:"last_sync_timestamp",timestamp:o}),!n){if(this.account.server_features.get(gi.NS.XABBER_FAVORITES)){let e=this.account.chats.getSavedChat();e.set("opened",!0),e.item_view.updateLastMessage()}this.account.getAllMessageRetractions((e=>{let t=li(e).find(`query[xmlns="${gi.NS.REWRITE}"]`).attr("version");t>this.account.retraction_version&&(this.account.retraction_version=t)})),this.account.sendPresence(),this.account.dfd_presence.resolve(),this.account.get("first_sync")&&this.syncFromServer({stamp:this.account.get("first_sync"),max:oi.SYNCHRONIZATION_RSM_MAX,last_version_sync:!0},!0)}})):li(e).find("conversation").length&&this.account.cached_sync_conversations.getAllFromCachedConversations((i=>{a=a.concat(li(e).find("conversation").map((function(){return li(this).attr("jid")+"/"+li(this).attr("type")})).toArray()),this.syncConversations(e,t,s,i);let o={max:oi.SYNCHRONIZATION_RSM_MAX,after:r};t&&(o.stamp=t),n&&(o.last_version_sync=!0),a&&a.length&&(o.cached_conversations_exclude=a),this.syncFromServer(o)}))},getRoster:function(){let e=this.roster_version;this.account.cached_roster.getAllFromRoster((t=>{t.length||0==e||(this.roster_version=0),this.getFromServer()}))},getFromServer:function(){let e=di({type:"get"}).c("query",{xmlns:gi.NS.ROSTER,ver:this.roster_version});this.account.sendIQFast(e,(e=>{this.onRosterIQ(e)}))},onRosterIQ:function(e){let t=li(e).children("query").attr("ver"),i=li(e).attr("type");return li(e).children("query").find("item").each(((e,t)=>{this.onRosterItem(t,i)})),"set"===e.getAttribute("type")?this.account.onSetIQResult(e):"result"===e.getAttribute("type")&&(t&&(this.roster_version=t),this.account.cached_roster.putInRoster({jid:"roster_version",is_version:!0,version:this.roster_version})),!0},onRosterItem:function(e,t){let i,s=e.getAttribute("jid");if(s===this.account.get("jid"))return;let n=this.contacts.mergeContact(s),a=e.getAttribute("subscription"),o=e.getAttribute("approved"),r=e.getAttribute("ask");if(!n.get("invitation")||"both"!==a&&"to"!==a||(n.set("invitation",!1),n.trigger("remove_invite")),"remove"===a)return n.set({in_roster:!1,known:!1,name:n.get("jid"),subscription:void 0,subscription_request_out:!1}),n.set("subscription_preapproved",!1),void this.account.cached_roster.removeFromRoster(s);let c=[];li(e).find("group").each((function(){let e=li(this).text();c.indexOf(e)<0&&c.push(e)}));let l={subscription:a||"none",in_roster:!0,roster_name:e.getAttribute("name"),groups:c};"both"===a&&(l.subscription_request_out=!1,l.subscription_request_in=!1,"set"===t&&(i=!0)),"from"===a&&(l.subscription_request_in=!1,"set"===t&&(i=!0)),"to"===a&&(l.subscription_request_out=!1),l.subscription_request_out="subscribe"===r,l.roster_name&&(l.name=l.roster_name),this.account.server_features.get(gi.NS.SUBSCRIPTION_PREAPPROVAL)&&(l.subscription_preapproved=!!o||o),n.set(l),n.updateCachedInfo(),i&&this.account.sendPresence()}}),nt.AccountRosterView=nt.BasicView.extend({className:"account-roster-wrap",events:{"click .roster-account-info-wrap .status-button":"openChangeStatus","click .roster-account-info":"toggle"},_initialize:function(e){this.account=e.account,this.groups=this.account.groups,this.roster=this.account.roster,this.contacts=this.account.contacts,this.$el.attr("data-jid",this.account.get("jid")),this.$el.appendTo(this.parent.$(".contact-list")),this.$info=this.$(".roster-account-info-wrap"),this.updateName(),this.updateStatus(),this.updateAvatar(),this.updateColorScheme(),this.account.on("change:name",this.updateName,this),this.account.on("change:image",this.updateAvatar,this),this.account.on("change:status_updated",this.updateStatus,this),this.account.settings.on("change:color",this.updateColorScheme,this),this.groups.on("add",this.onGroupAdded,this),this.groups.on("rename",this.onGroupRenamed,this),this.groups.on("destroy",this.onGroupRemoved,this),this.data.on("change:expanded",this.updateExpanded,this),this.data.set("expanded",!0)},updateName:function(){this.$info.find(".name").text(this.account.get("name"))},updateStatus:function(){this.$info.find(".status").attr("data-status",this.account.get("status")),this.$info.find(".status-message").text(this.account.getStatusMessage())},updateAvatar:function(){let e=this.account.cached_image;this.$info.find(".circle-avatar").setAvatar(e,this.avatar_size)},updateColorScheme:function(){this.$el.attr("data-color",this.account.settings.get("color"))},updateExpanded:function(){let e=this.data.get("expanded");this.$el.switchClass("shrank",!e),this.parent.updateScrollBar()},updateGroupPosition:function(e){e.$el.detach();let t=this.groups.indexOf(e.model);0===t?this.$info.after(e.$el):this.$(".roster-group").eq(t-1).after(e.$el),this.parent.updateScrollBar()},onGroupAdded:function(e){let t=this.addChild(e.get("id"),this.group_view,{model:e});this.updateGroupPosition(t)},onGroupRenamed:function(e,t){let i=this.child(t);delete this.children[t],this.children[e.get("name")]=i,i&&this.updateGroupPosition(i)},onGroupRemoved:function(e){this.removeChild(e.get("id"))},toggle:function(e){this.data.set("expanded",!this.data.get("expanded"))},openChangeStatus:function(e){nt.change_status_view||(nt.change_status_view=new nt.ChangeStatusView),nt.change_status_view.open(this.account)}}),nt.AccountRosterRightView=nt.AccountRosterView.extend({template:ri.account_roster_right,group_view:nt.GroupRightView,avatar_size:oi.AVATAR_SIZES.ROSTER_RIGHT_ACCOUNT_ITEM,__initialize:function(){this.contacts.on("add_to_roster change_in_roster remove_from_roster",this.updateCounter,this),this.contacts.on("add_to_roster remove_from_roster",this.updateGlobalCounter,this)},updateCounter:function(){this.roster||(this.roster=this.account.roster);let e=this.roster.length,t=e-this.roster.where({status:"offline"}).length;this.$info.find(".counter").text(t+"/"+e)},updateGlobalCounter:function(){this.parent.updateCounter()}}),nt.AccountRosterLeftView=nt.AccountRosterView.extend({template:ri.account_roster_left,group_view:nt.GroupLeftView,avatar_size:oi.AVATAR_SIZES.ROSTER_LEFT_ACCOUNT_ITEM,__initialize:function(){this.$info.find(".jid").text(this.account.get("jid"))},search:function(e){this.$el.removeClass("shrank"),this.$(".group-head").addClass("hidden");let t=0,i={};this.$(".roster-contact").each(((s,n)=>{let a=li(n),o=a.data("jid"),r=this.roster.get(o);if(!r)return;if(i[r.hash_id])return void a.addClass("hidden");i[r.hash_id]=!0;let c=r.get("name").toLowerCase().indexOf(e)<0&&o.indexOf(e)<0;a.hideIf(c),c||t++})),this.$(".roster-account-info-wrap").showIf(t)},searchAll:function(){this.$el.switchClass("shrank",!this.data.get("expanded")),this.$(".roster-account-info-wrap").removeClass("hidden"),this.$(".group-head").removeClass("hidden"),this.$(".list-item").removeClass("hidden")}}),nt.BlockListView=nt.BasicView.extend({avatar_size:oi.AVATAR_SIZES.CONTACT_BLOCKED_ITEM,events:{"click .btn-reset-panel":"deselectParticipants","click .btn-remove-selected":"actionSelectedParticipants"},_initialize:function(e){this.account=e.account;for(let e in this.account.blocklist.list)this.onContactAdded(this.account.blocklist.list[e],!1);this.updateTabsLabel(),this.account.contacts.on("add_to_blocklist",this.onContactAdded,this),this.account.contacts.on("remove_from_blocklist",this.onContactRemoved,this)},render:function(e){this.deselectBlocked()},selectUnblock:function(e){this.updateUnblockButton()},deselectBlocked:function(e){this.parent.$(".blocked-contact input").prop("checked",!1),this.updateUnblockButton()},updateUnblockButton:function(){let e=this.parent.$(".blocked-contact input:checked").length;this.parent.$(".btn-unblock-selected").hideIf(!e),this.parent.$(".btn-deselect-blocked").hideIf(!e),this.parent.$(".btn-block").hideIf(e)},unblockSelected:function(e){this.parent.$(".blocked-contact input:checked").closest(".blocked-contact").each(((e,t)=>{this.unblockContactByJid(li(t).attr("data-jid"))}))},unblockContactByJid:function(e){let t=this.account.contacts.get(e);t?t.unblock():this.account.contacts.unblockContact(e)},hideEmptyContainers:function(){this.$(".blocked-list:empty").each(((e,t)=>{li(t).closest(".settings-block-wrap").find(".placeholder").removeClass("hidden")})),this.updateUnblockButton()},onContactAdded:function(e){let t;if(this.$(".blocked-contact").each(((i,s)=>{li(s).attr("data-jid")===e.jid&&(t=!0)})),this.$(".blocked-domains").each(((i,s)=>{li(s).attr("data-jid")===e.jid&&(t=!0)})),this.parent.$(".blocked-invitations").each(((i,s)=>{li(s).attr("data-jid")===e.jid&&(t=!0)})),t)return;let i=ri.contact_blocked_item({jid:e.jid});e.resource?(this.parent.$(".blocked-invitations").append(i),this.parent.$('.settings-tab[data-block-name="blocklist-invitations"]').removeClass("hidden"),this.parent.$(".blocked-invitations-placeholder").addClass("hidden")):e.domain?(this.$(".blocked-domains").append(i),this.$(".blocked-domains-placeholder").addClass("hidden")):(this.$(".blocked-contacts").append(i),this.$(".blocked-contacts-placeholder").addClass("hidden")),this.parent&&this.parent.updateHeight&&(this.parent.updateBlockedLabel(),this.parent.updateHeight(),setTimeout((()=>{this.parent.updateScrollBar()}),250)),this.updateTabsLabel()},onContactRemoved:function(e){this.parent.$(`.blocked-contact[data-jid="${e}"]`).detach(),this.parent&&this.parent.updateHeight&&(this.parent.updateBlockedLabel(),this.parent.updateHeight(),setTimeout((()=>{this.parent.updateScrollBar()}),250)),this.updateTabsLabel(),this.hideEmptyContainers()},updateTabsLabel:function(){if(!this.account.blocklist||!this.account.blocklist.list)return;let e,t,i;e=t=i=0;for(let s in this.account.blocklist.list){let n=this.account.blocklist.list[s];n.resource?i++:n.domain?t++:e++}let s=0===e?nt.getString("blocked_contacts_empty"):nt.getQuantityString("blocked_contacts_number_tab_label",e),n=0===t?nt.getString("blocked_domains_empty"):nt.getQuantityString("blocked_domains_number",t),a=0===i?nt.getString("blocked_invitations_empty"):nt.getQuantityString("blocked_invitations_number",i);this.$('.settings-tab[data-block-name="blocklist-contacts"] .settings-block-label').text(s),this.$('.settings-tab[data-block-name="blocklist-domains"] .settings-block-label').text(n),this.$('.settings-tab[data-block-name="blocklist-invitations"] .settings-block-label').text(a)}}),nt.RosterView=nt.SearchPanelView.extend({ps_selector:".contact-list-wrap",_initialize:function(){this._settings=nt._roster_settings,this.model.on("activate",this.updateOneRosterView,this),this.model.on("update_order",this.updateRosterViews,this),this.model.on("deactivate destroy",this.removeRosterView,this),this.on("before_hide",this.saveScrollBarOffset,this),this.$("input").on("input",this.updateSearch.bind(this))},updateOneRosterView:function(e){let t=e.get("jid"),i=this.child(t);if(i)i.$el.detach();else{if(!e.isConnected())return;i=this.addChild(t,this.account_roster_view,{account:e})}let s=this.model.connected.indexOf(e);0===s?this.$(".contact-list").prepend(i.$el):this.$(".contact-list").children().eq(s-1).after(i.$el),this.updateScrollBar()},updateRosterViews:function(){ui.each(this.children,(function(e){e.detach()})),this.model.each((e=>{let t=e.get("jid"),i=this.child(t);i&&this.$(".contact-list").append(i.$el)})),this.updateScrollBar()},removeRosterView:function(e){this.removeChild(e.get("jid")),this.updateScrollBar()}}),nt.RosterLeftView=nt.RosterView.extend({className:"roster-left-container container",template:ri.roster_left,ps_settings:{theme:"item-list"},main_container:".contact-list",account_roster_view:nt.AccountRosterLeftView,__initialize:function(){this.model.on("list_changed",this.updateLeftIndicator,this),this.ps_container.on("ps-scroll-y",this.onScrollY.bind(this))},updateLeftIndicator:function(){this.$el.attr("data-indicator",this.model.connected.length>1)},getContactForItem:function(e){let t=li(e),i=t.parent().parent().data("jid"),s=t.data("jid"),n=this.child(i);return n&&n.roster.get(s)},render:function(e){("chat"!==e.right&&"message_context"!==e.right&&"participant_messages"!==e.right||e.clear_search&&"chat"===e.right)&&this.clearSearch()},searchAll:function(){ui.each(this.children,(function(e){e.searchAll()}))},selectItem:function(e,t){if(!e)return void("up"===t&&(this.ps_container[0].scrollTop=0));this.clearSearchSelection();let i=this.$('.list-item[data-id="'+e+'"]');i.length?this.selection_id=e:(this.ps_container[0].scrollTop=0,i=this.$(".list-item:visible").first(),this.selection_id=i.data("id")),i.length&&"down"===t&&(i[0].clientHeight+i[0].offsetTop+i.parent()[0].offsetTop+i.closest(".account-roster-wrap")[0].offsetTop>=this.ps_container[0].clientHeight+this.ps_container[0].scrollTop||i[0].clientHeight+i[0].offsetTop+i.parent()[0].offsetTop+i.closest(".account-roster-wrap")[0].offsetTop<this.ps_container[0].scrollTop)&&(this.ps_container[0].scrollTop=i[0].offsetTop+i.parent()[0].offsetTop+i.closest(".account-roster-wrap")[0].offsetTop),i.length&&"up"===t&&(i[0].offsetTop+i.parent()[0].offsetTop+i.closest(".account-roster-wrap")[0].offsetTop<=this.ps_container[0].scrollTop||i[0].offsetTop+i.parent()[0].offsetTop+i.closest(".account-roster-wrap")[0].offsetTop>this.ps_container[0].scrollTop+this.ps_container[0].clientHeight)&&(this.ps_container[0].scrollTop=i[0].offsetTop+i.parent()[0].offsetTop+i.closest(".account-roster-wrap")[0].offsetTop),i.addClass("selected")},onEnterPressed:function(e){let t;e.closest(".searched-lists-wrap").length&&(this.clearSearch(),this.$(".list-item.active").removeClass("active"),e.hasClass("chat-item")&&(t=nt.chats_view.child(e.data("id")),t&&t.open({screen:nt.body.screen.get("name"),clear_search:!1}),e.addClass("active")),e.hasClass("roster-contact")&&(t=nt.accounts.get(e.data("account")).chats.get(nt.accounts.get(e.data("account")).contacts.get(e.data("jid")).hash_id),t&&(t=t.item_view),t&&nt.chats_view.openChat(t,{clear_search:!1,screen:nt.body.screen.get("name")}),e.addClass("active")),e.hasClass("message-item")&&e.click())},onListChanged:function(){this.updateSearch()}}),nt.RosterSettingsView=nt.BasicView.extend({className:"roster-settings-wrap",template:ri.roster_settings,events:{"change .offline-contacts input":"setOfflineSetting","change .sorting-contacts input":"setSortingSetting"},_initialize:function(){this.$el.appendTo(this.parent.$(".settings-subblock-wrap.contact-list"))},render:function(){this.$(".offline-contacts input[type=radio][name=offline-contacts][value="+this.model.get("show_offline")+"]").prop("checked",!0),this.$(".sorting-contacts input[type=radio][name=sorting-contacts][value="+this.model.get("sorting")+"]").prop("checked",!0)},setOfflineSetting:function(){this.model.save("show_offline",this.$(".offline-contacts input[type=radio][name=offline-contacts]:checked").val())},setSortingSetting:function(){this.model.save("sorting",this.$(".sorting-contacts input[type=radio][name=sorting-contacts]:checked").val())}}),nt.AccountGroupView=nt.BasicView.extend({className:"group",template:function(){this.$el.append('<div class="group-name one-line"/><span class="group-members-count"/>')},events:{click:"showGroupSettings"},_initialize:function(e,t){this.$(".group-name").text(this.model.get("name")),this.$(".group-members-count").text(this.model.get("counter").all);let i,s=this.model.collection.indexOf(this.model);e.single_account&&e.single_account.model.get("jid")!=this.model.account.get("jid")||(i=e.single_account?e.single_account.$(".groups"):this.model.account.settings_account_modal.$(".groups"),0===s?i.prepend(this.$el):i.children().eq(s-1).after(this.$el),this.model.on("destroy",this.remove,this))},showGroupSettings:function(){this.model.showSettings()}}),nt.ContactPlaceholderView=nt.BasicView.extend({className:"placeholder-wrap contact-placeholder-wrap noselect",template:ri.contact_placeholder,_initialize:function(e){nt.on("update_placeholder",this.onPlaceholderUpdate,this)},onPlaceholderUpdate:function(){nt.toolbar_view.$(".toolbar-item.jingle-calls.active").length||nt.toolbar_view.$(".toolbar-item.geolocation-chats.active").length?this.$(".text").text(nt.getString("message_manager_error_not_implemented")):this.$(".text").text(nt.getString("contact_list__placeholder"))}}),nt.AddContactView=nt.BasicView.extend({className:"modal main-modal add-contact-modal",template:ri.add_contact,avatar_size:oi.AVATAR_SIZES.SYNCHRONIZE_ACCOUNT_ITEM,events:{"click .dropdown-content#select-account-for-add-contact":"selectAccount","click .existing-group-field label":"editGroup","change .new-group-name input":"checkNewGroup","keyup .new-group-name input":"checkNewGroup","keyup .name-field #new_contact_username":"checkJid","focusout .name-field #new_contact_username":"focusoutInputField","focusout .new-group-name #new-group-name":"addNewGroup","click .btn-add":"stepForward","click .btn-cancel":"close"},_initialize:function(){this.group_data=new Backbone.Model,this.group_data.on("change",this.updateGroups,this)},render:function(e){if(!nt.accounts.connected.length)return void ci.dialogs.error(nt.getString("dialog_add_contact__error__text_no_accounts"));e||(e={});let t=e.account?[e.account]:nt.accounts.connected,i=e.jid||"";return this.$('input[name="username"]').val(i).attr("readonly",!!i).removeClass("invalid"),this.$(".single-acc").showIf(1===t.length),this.$(".multiple-acc").hideIf(1===t.length),this.$(".dropdown-content#select-account-for-add-contact").empty(),ui.each(t,(e=>{this.$(".dropdown-content#select-account-for-add-contact").append(this.renderAccountItem(e))})),this.$(".account-dropdown-wrap").hideIf(t.length<2),this.bindAccount(t[0]),this.$("span.errors").text(""),this.$el.openModal({ready:()=>{Materialize&&Materialize.updateTextFields&&Materialize.updateTextFields(),this.$(".account-dropdown-wrap").dropdown({inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"left"}),this.$('input[name="username"]').focus()},complete:this.close.bind(this)}),this},bindAccount:function(e){this.account=e,this.$(".account-dropdown-wrap .dropdown-button .account-item-wrap").replaceWith(this.renderAccountItem(e)),this.renderGroupsForAccount(e)},stepForward:function(){if(this.account.connection&&this.account.connection.connected){let e=this.$("input[name=username]").val().trim();this.$el.append(li(ri.preloader())),this.$(".btn-add").addClass("hidden-disabled");let t=setTimeout((()=>{this.$(".preloader-wrapper").remove(),this.$(".btn-add").removeClass("hidden-disabled"),this.addContact()}),4e3);this.account.getConnectionForIQ().vcard.get(e,(e=>{clearTimeout(t);let i=e.username?e.username:e.fullname?e.fullname:"";i&&this.$("input[name=contact_name]").val(i),this.$(".preloader-wrapper").remove(),this.$(".btn-add").removeClass("hidden-disabled"),this.addContact()}),(e=>{clearTimeout(t),this.$(".preloader-wrapper").remove(),this.$(".btn-add").removeClass("hidden-disabled"),this.$("input[name=username]").addClass("invalid").siblings(".errors").text(li(e).find("error text").text())}))}else this.$(".preloader-wrapper").remove(),this.$(".btn-add").removeClass("hidden-disabled"),this.$("input[name=username]").addClass("invalid").siblings(".errors").text(nt.getString("NOT_CONNECTED"))},renderAccountItem:function(e){let t=li(ri.add_contact_account_item({jid:e.get("jid"),name:e.get("name")}));return t.find(".circle-avatar").setAvatar(e.cached_image,this.avatar_size),t},renderGroupsForAccount:function(e){this.group_data.set({selected:[],groups:ui.map(e.groups.notSpecial(),(function(e){return e.get("name")}))},{silent:!0}),this.updateGroups()},updateGroups:function(){let e=this.group_data.get("selected");this.$(".groups").html(ri.groups_checkbox_list_contact({groups:ui.map(this.group_data.get("groups"),(function(t){return{name:t,id:_i(),checked:ui.contains(e,t)}}))}))},selectAccount:function(e){let t=li(e.target).closest(".account-item-wrap"),i=nt.accounts.get(t.data("jid"));this.bindAccount(i)},editGroup:function(e){e.preventDefault();let t=li(e.target).siblings("input"),i=!t.prop("checked"),s=t.attr("data-groupname"),n=ui.clone(this.group_data.get("selected")),a=n.indexOf(s);t.prop("checked",i),i?a<0&&n.push(s):a>=0&&n.splice(a,1),this.group_data.set("selected",n)},checkNewGroup:function(e){let t=li(e.target).val();this.$(".new-group-checkbox #new_group_checkbox").prop("disabled",!(t&&!ui.contains(this.group_data.get("groups"),t))),e.keyCode===oi.KEY_ENTER&&this.addNewGroup()},addNewGroup:function(e){if(e&&e.preventDefault(),this.$(".new-group-checkbox #new_group_checkbox").prop("disabled"))return;let t=this.$(".new-group-name input").val(),i=ui.clone(this.group_data.get("groups"));if(i.indexOf(t)<0){let e=ui.clone(this.group_data.get("selected"));e.push(t),i.push(t),this.group_data.set({groups:i,selected:e})}},focusoutInputField:function(){this.$("input[name=username]").val().trim()||(this.$("input[name=username]").removeClass("invalid"),this.$("span.errors").text("").addClass("hidden"))},checkJid:function(e){let t,i=this.$("input[name=username]").val().trim();!/^(([^<>()[\]\\.,;:\s%@\"]+(\.[^<>()[\]\\.,;:\s%@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([^<>()[\]\\.,;:\s%@\"]+(\.[^<>()[\]\\.,;:\s%@\"]+)*)|(\".+\"))|(([0-9]{1,3}\.){3}[0-9]{1,3})|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(i)&&i&&(t=nt.getString("dialog_add_contact__error__text_invalid_jid")),t?this.$("input[name=username]").addClass("invalid").siblings(".errors").text(t):(this.$("input[name=username]").removeClass("invalid"),this.$("span.errors").text("").addClass("hidden"),e.keyCode===oi.KEY_ENTER&&this.stepForward())},addContact:function(){this.$("span.errors").text("").addClass("hidden");let e,t,i=this.$("input[name=username]").removeClass("invalid").val().trim();this.$("input[name=contact_name]").removeClass("invalid").val(),this.group_data.get("selected");i&&(i=i.toLowerCase()),i=gi.getBareJidFromJid(i),i?i===this.account.get("jid")?t=nt.getString("dialog_add_contact__error__text_can_not_add_youself"):/^(([^<>()[\]\\.,;:\s%@\"]+(\.[^<>()[\]\\.,;:\s%@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(i)?(e=this.account.contacts.mergeContact(i),e.get("in_roster")&&(t=nt.getString("dialog_add_contact__error__text_already_in_roster"))):t=nt.getString("dialog_add_contact__error__text_invalid_jid"):t=nt.getString("dialog_add_contact__error__text_input_username"),t?this.$("input[name=username]").addClass("invalid").siblings(".errors").text(t):(!this.account.server_features.get(gi.NS.SUBSCRIPTION_PREAPPROVAL)&&e.set("subscription_preapproved",!0),e.pres("subscribed"),e.set("known",!0),e.set("removed",!1),setTimeout((()=>{e.pres("subscribe")}),500),e.trigger("presence",e,"subscribe_from"),e.trigger("open_chat",e,{right_force_close:!0,force_opened_state:!0}),this.close())},onHide:function(){this.$el.detach()},close:function(){this.$el.closeModal({complete:this.hide.bind(this)})}}),nt.GroupSettings=Backbone.Model.extend({idAttribute:"name",defaults:{expanded:!0,show_offline:"default",sorting:"default",custom_notifications:!1,notifications:!1,message_preview:!1}}),nt.GroupsSettings=Backbone.CollectionWithStorage.extend({model:nt.GroupSettings,_initialize:function(e,t){this.account=t.account,this.account.on("destroy",this.clearStorage,this),this.fetch()}}),nt.RosterSettings=Backbone.ModelWithStorage.extend({defaults:function(){return{pinned:!1,show_offline:"yes",sorting:"online-first",general_group_name:nt.getString("circles__name_general_circle"),non_roster_group_name:nt.getString("circles__name_non_roster_circle")}}}),nt.CachedRoster=Backbone.ModelWithDataBase.extend({putInRoster:function(e,t){this.database.put("roster_items",e,(function(e){t&&t(e)}))},getFromRoster:function(e,t){this.database.get("roster_items",e,(function(e){t&&t(e)}))},getAllFromRoster:function(e){this.database.get_all("roster_items",null,(function(t){e&&e(t||[])}))},removeFromRoster:function(e,t){this.database.remove("roster_items",e,(function(e){t&&t(e)}))},clearDataBase:function(){this.database.clear_database("roster_items")},deleteDataBase:function(){this.database.delete_database("roster_items")}}),nt["CachedSyncСonversations"]=Backbone.ModelWithDataBase.extend({putInCachedConversations:function(e,t){this.database.put("conversation_items",e,(function(e){t&&t(e)}))},getFromCachedConversations:function(e,t){this.database.get("conversation_items",e,(function(e){t&&t(e)}))},getAllFromCachedConversations:function(e){this.database.get_all("conversation_items",null,(function(t){e&&e(t||[])}))},removeFromCachedConversations:function(e,t){this.database.remove("conversation_items",e,(function(e){t&&t(e)}))},clearDataBase:function(){this.database.clear_database("conversation_items")},deleteDataBase:function(){this.database.delete_database("conversation_items")}}),nt.CachedServerFeatures=Backbone.ModelWithDataBase.extend({putInCachedFeatures:function(e,t){this.database.put("server_features_items",e,(function(e){t&&t(e)}))},getFromCachedFeatures:function(e,t){this.database.get("server_features_items",e,(function(e){t&&t(e)}))},getAllFromCachedFeatures:function(e){this.database.get_all("server_features_items",null,(function(t){e&&e(t||[])}))},removeFromCachedFeatures:function(e,t){this.database.remove("server_features_items",e,(function(e){t&&t(e)}))},clearDataBase:function(){this.database.clear_database("server_features_items")},deleteDataBase:function(){this.database.delete_database("server_features_items")}}),nt.Account.addInitPlugin((function(){this.groups_settings=new nt.GroupsSettings(null,{account:this,storage_name:nt.getStorageName()+"-groups-settings-"+this.get("jid")}),this.cached_roster=new nt.CachedRoster(null,{name:"cached-roster-list-"+this.get("jid")+"-"+this.get("account_unique_id"),objStoreName:"roster_items",primKey:"jid"}),this.cached_sync_conversations=new nt["CachedSyncСonversations"](null,{name:"cached-conversation-list-v108-"+this.get("jid")+"-"+this.get("account_unique_id"),objStoreName:"conversation_items",primKey:"account_conversation_type"}),this.cached_server_features=new nt.CachedServerFeatures(null,{name:"cached-features-list-"+this.get("jid")+"-"+this.get("account_unique_id"),objStoreName:"server_features_items",primKey:"var"}),this.groupchat_settings=new nt.GroupChatSettings({id:"group-chat-settings"},{account:this,storage_name:nt.getStorageName()+"-group-chat-settings-"+this.get("jid"),fetch:"after"}),this.groups=new nt.Groups(null,{account:this}),this.contacts=new nt.Contacts(null,{account:this}),this.cached_roster.on("database_open_failed",(()=>{this.contacts.addCollection(this.roster=new nt.Roster(null,{account:this,roster_version:0})),this.trigger("roster_created")})),this.cached_roster.on("database_opened",(()=>{this.cached_roster.getFromRoster("roster_version",(e=>{let t=e&&e.version?e.version:0;this.contacts.addCollection(this.roster=new nt.Roster(null,{account:this,roster_version:t})),this.trigger("roster_created")}))})),this.blocklist=new nt.BlockList(null,{account:this}),this._added_pres_handlers.push(this.contacts.handlePresence.bind(this.contacts)),this.on("ready_to_get_roster",(function(){let e=new li.Deferred;e.done((()=>{this.resources.reset(),this.contacts.each((function(e){e.resources.reset(),e.resetStatus()})),this.cached_roster.getAllFromRoster((e=>{if(li(e).each(((e,t)=>{"roster_version"!==t.jid&&this.contacts.mergeContact(t)})),this.connection&&this.connection.do_synchronization&&nt.chats_view){let e={};this.cached_sync_conversations.getFromCachedConversations("last_sync_timestamp",(t=>{let i=t&&t.timestamp?t.timestamp:null;!this.roster.last_chat_msg_id&&(e.max=oi.SYNCHRONIZATION_RSM_MAX),i&&(e.stamp=i),this.roster.syncFromServer(e,Boolean(i),!0),this.roster.getRoster()}))}else this.roster.getRoster(),this.sendPresence(),this.dfd_presence.resolve();this.blocklist.getFromServer()}))})),ni.log(this.roster),this.roster?e.resolve():this.once("roster_created",(()=>{e.resolve()}))}),this)})),nt.Account.addConnPlugin((function(){this.registerIQHandler(),this.registerSyncedIQHandler(),this.roster?this.roster.registerHandler():this.once("roster_created",(()=>{this.roster.registerHandler()})),this.blocklist.registerHandler()}),!0,!0),nt.once("start",(function(){this._roster_settings=new this.RosterSettings({id:"roster-settings"},{storage_name:this.getStorageName(),fetch:"after"}),this.settings.roster=this._roster_settings.attributes,this.contacts_view=this.left_panel.addChild("contacts",this.RosterLeftView,{model:this.accounts}),this.contact_container=this.right_panel.addChild("details",this.Container),this.details_container=this.right_contact_panel.addChild("details",this.Container),this.contact_placeholder=this.right_panel.addChild("contact_placeholder",this.ContactPlaceholderView),this.add_contact_view=new this.AddContactView,this.on("add_contact",(function(){this.add_contact_view.show()}),this)}),nt);const bi=nt;var Ai=i(25108);let wi=nt.env,yi=wi.constants,xi=wi.templates.chats,ki=wi.utils,Ci=wi.$,Si=wi.$iq,$i=wi.$msg,Ii=wi.Strophe,Ei=wi._,Ti=wi.moment,Mi=wi.uuid,Li=ki.images,Bi=ki.emoji,Ni=e=>ki.pretty_date(e,("ru-RU"==nt.settings.language||"default"==nt.settings.language&&"ru-RU"==nt.get("default_language"))&&"dddd, D MMMM YYYY"),ji=e=>ki.pretty_datetime(e,("ru-RU"==nt.settings.language||"default"==nt.settings.language&&"ru-RU"==nt.get("default_language"))&&"D MMMM YYYY HH:mm:ss");nt.Message=Backbone.Model.extend({idAttribute:"unique_id",defaults:function(){let e=Mi();return{msgid:e,unique_id:e,type:"main",state:yi.MSG_PENDING}},initialize:function(){let e=this.get("time"),t={};e?t.timestamp=Number(Ti(e)):(t.timestamp=Ti.now(),t.time=Ti(t.timestamp).format()),this.get("origin_id")||this.isSenderMe()&&!this.get("synced_from_server")&&!this.get("carbon_copied")&&!this.get("is_archived")&&this.set("origin_id",this.get("msgid")),this.updateUniqueId(),this.set(t),this.on("change:origin_id change:stanza_id change:archived_id",this.updateUniqueId,this)},updateUniqueId:function(){this.set("unique_id",this.get("stanza_id")||this.get("archived_id")||this.get("origin_id")||this.get("msgid"))},destroyOnEcho:function(){this.set("state",yi.MSG_DELIVERED),this.collection&&this.collection.chat&&this.collection.chat.item_view&&this.collection.chat.item_view.content?this.collection.chat.item_view.content.removeMessage(this):this.destroy()},getText:function(){let e=this.get("forwarded_message");return e&&e.length?e[0].get("message"):this.get("message")},getState:function(){return yi.MSG_STATE[this.get("state")]},getVerboseState:function(){let e=nt.getString(yi.MSG_VERBOSE_STATE[this.get("state")]);return this.account?this.account.isOnline()||(e=nt.getString("account_is_offline")):this.collection.account.isOnline()||(e=nt.getString("account_is_offline")),e},isSenderMe:function(){return!this.get("notification_msg")&&(this.account?this.account.get("jid")===this.get("from_jid"):this.collection&&this.collection.account?this.collection.account.get("jid")===this.get("from_jid"):void 0)},handleEphemeralMessage:function(){this.collection.account.omemo&&this.collection.account.omemo.cached_messages.putMessage(this.collection.chat.contact,this.get("stanza_id"),{ephemeral_removed:!0}),this.collection.chat.item_view.content||(this.collection.chat.item_view.content=new nt.ChatContentView({chat_item:this.collection.chat.item_view})),this.collection.chat.item_view.content.removeMessage(this)},checkEphemeralTimer:function(){if(this.get("ethemeral_removed")||!this.get("displayed_time"))return;let e=this.get("displayed_time"),t=new Date(e),i=((new Date).getTime()-t.getTime())/1e3,s=this.get("ephemeral_timer")-i;clearTimeout(this.ephemeral_timeout),s<=0?this.handleEphemeralMessage():this.ephemeral_timeout=setTimeout((()=>{this.handleEphemeralMessage()}),1e3*s)}}),nt.MessagesBase=Backbone.Collection.extend({model:nt.Message}),nt.SearchedMessages=nt.MessagesBase.extend({comparator:"timestamp",initialize:function(){this.collections=[],this.on("add",Ei.bind(this.updateInCollections,this,"add")),this.on("change",Ei.bind(this.updateInCollections,this,"change"))},addCollection:function(e){this.collections.push(e)},updateInCollections:function(e,t){Ei.each(this.collections,(function(i){i.update(t,e)}))}}),nt.Messages=Backbone.Collection.extend({model:nt.Message,comparator:"timestamp",initialize:function(e,t){this.chat=t.chat,this.account=t.account},checkEphemeralTimers:function(e,t){let i;this.filter((e=>e.get("ephemeral_timer"))).reverse().forEach((e=>{e.get("is_unread")||e.isSenderMe()&&e.get("state")===yi.MSG_DELIVERED||(e.get("displayed_time")&&!e.get("dynamic_displayed_time")?i=e.get("displayed_time"):i&&(e.set("dynamic_displayed_time",!0),e.set("displayed_time",i)),e.checkEphemeralTimer())}))},createInvitationFromStanza:function(e,t){t=t||{};let i,s=e.find("invite").attr("jid")||e.attr("from"),n=t.delay||e.children("delay"),a=Ii.getBareJidFromJid(s),o=e.children("body").text(),r=e.find("markable").length>0,c=e.attr("id"),l=e.children("archived").attr("id"),d=e.children("origin-id").attr("id"),h=t.stanza_id||l||d||c,g=h&&this.get(h),u=e.children('x[xmlns="'+Ii.NS.GROUP_CHAT+'"]'),p={};if(!g&&h&&(h=d||t.stanza_id||l||c,g=this.get(h)),g)return g;if(!a)return;let m={xml:t.xml||e[0],carbon_copied:t.carbon_copied&&!t.is_archived,markable:r,msgid:c,is_forwarded:t.is_forwarded,forwarded_message:t.forwarded_message||null,from_jid:a,origin_id:d,stanza_id:t.stanza_id,archive_id:l,contact_stanza_id:t.contact_stanza_id,is_archived:t.is_archived};n.length&&(m.time=n.attr("stamp")),t.synced_msg&&(m.synced_invitation_from_server=!0),o&&(m.message=o);let _=this.account.contacts.mergeContact({jid:Ii.getBareJidFromJid(a),group_chat:!0}),v=this.account.chats.getChat(_);if(!v.item_view.content&&(v.item_view.content=new nt.ChatContentView({chat_item:v.item_view})),_.set("in_roster",!1),u.length){let e=u.find("name").text(),t=u.find("membership").text(),s=u.find("privacy").text(),n=u.find("index").text(),a=u.find("parent-chat").text(),o=u.find("description").text();e&&(p.name=e),t&&(p.model=e),s&&(p.privacy=s),n&&(p.searchable=n),o&&(p.description=o),a.length&&(i=!0),i&&_.set("private_chat",!0),"incognito"===s&&_.set("incognito_chat",!0);let r=_.get("group_info")||{};Ei.extend(r,p),_.set("group_info",r)}return v.messages.createSystemMessage(Ei.extend(m,{from_jid:a,auth_request:!0,invite:!0,private_invite:i||!1,is_accepted:!1,silent:!1,message:e.find("reason").text()}))},createFromStanza:function(e,t){t||(t={});let i,s=t.delay||e.children("delay"),n=e.attr("from")||t.from_jid,a=Ii.getBareJidFromJid(n),o=e.children("body").length?e.children("body").text():e.children("envelope").children("content").children("body").text(),r=e.find("markable").length>0,c=e.children("archived").attr("id"),l=e.children("origin-id").attr("id"),d=e.attr("id"),h=t.stanza_id||c||l||d,g=h&&this.get(h);if(!g&&h&&(h=l||t.stanza_id||c||d,g=this.get(h)),!g&&this.chat&&(this.chat.get("saved")||this.chat.get("group_chat"))&&(g=this.findWhere({origin_id:l})),t.replaced){let i=e.children("replace").attr("conversation");if(e.children("replace").children("message").children(`encrypted[xmlns="${Ii.NS.SYNCHRONIZATION_OLD_OMEMO}"]`).length)return;if(e.children("replace").children("message").children(`encrypted[xmlns="${Ii.NS.OMEMO}"]`).length&&this.account.omemo&&!t.forwarded)return void this.account.omemo.receiveChatMessage(e,Ei.extend(t,{from_jid:i,conversation:i}));o=(e=e.children("replace").children("message")).children("body").length?e.children("body").text():e.children("envelope").children("content").children("body").text();let s=e.children("stanza-id").first().attr("id");if(g=this.find((e=>e.get("stanza_id")===s||e.get("contact_stanza_id")===s)),!g)return;a=g.get("from_jid"),d=g.get("msgid");let n=g.get("xml");n.innerHTML=e[0].innerHTML,t.xml=n,t.forwarded_message=g.get("forwarded_message")}if(g&&!t.replaced&&!t.context_message&&!t.is_unread_archived&&!t.searched_message&&!t.pinned_message&&!t.participant_message&&!t.echo_msg&&!t.is_searched){if(e.find('[xmlns="'+Ii.NS.EPHEMERAL+'"]').length&&!e.find('[xmlns="'+Ii.NS.EPHEMERAL+'"]').closest("system-message").length&&t.encrypted){if(g.set("ephemeral_timer",e.find('[xmlns="'+Ii.NS.EPHEMERAL+'"]').attr("timer")),t.sync_timestamp&&g.set("displayed_time",t.sync_timestamp),this.chat.contact){let t=this.account.omemo.cached_messages.getMessage(this.chat.contact,e.find(`stanza-id[by="${this.account.get("jid")}"]`).attr("id"));t&&t.envelope&&t.displayed_time&&g.set("displayed_time",t.displayed_time)}g.collection.checkEphemeralTimers()}return g}if(t.notification_msg){i=e.children(`notification[xmlns="${Ii.NS.XABBER_NOTIFY}"]`).children("forwarded").children("message"),n=i.attr("from"),a=Ii.getBareJidFromJid(n),o=i.children("body").text();let s=i.attr("from"),r=e.children(`addresses[xmlns="${Ii.NS.ADDRESS}"]`).children('address[type="ofrom"]').attr("jid");if(!r||r!==s)return void this.account.retractMessageById(t.stanza_id,this.account.get("jid"),a,this.chat.get("sync_type"))}let u,p={xml:t.xml||e[0],original_message:o,carbon_copied:t.carbon_copied&&!t.is_archived,markable:r,msgid:d,is_forwarded:t.is_forwarded,forwarded_message:t.forwarded_message||null,from_jid:a,contact_stanza_id:t.contact_stanza_id,is_archived:t.is_archived,is_unread_archived:t.is_unread_archived,is_between_anchors:t.is_between_anchors,notification_msg:t.notification_msg,not_encrypted:t.not_encrypted||null,not_verified_device:t.not_verified_device||null,not_verified_device_no_device:t.not_verified_device_no_device||null,device_id:t.device_id||null},m=[],_=[],v=[],f=[],b=[],A=[],w=[],y=[],x=[];if(t.notification_msg&&i.length){p.notification_msg_content=i[0],p.not_verified_device=null;let e=i.children(`authenticated-key-exchange[xmlns="${Ii.NS.XABBER_TRUST}"]`);if(e.length&&e.children("verification-start").length&&(p.trust_sid=e.attr("sid"),p.trust_device_id=e.children("verification-start").attr("device-id")),i.children("envelope").length&&i.find(`content share[xmlns="${Ii.NS.PUBSUB_TRUST_SHARING}"]`).length){let e=`${this.account.jid} updated their devices`;p.original_message=o=e,p.notification_trust_msg=!0}}if(t.encrypted&&Ei.extend(p,{encrypted:!0}),t.hasOwnProperty("is_trusted")&&Ei.extend(p,{is_trusted:t.is_trusted}),u=t.notification_msg&&i?i.children(`reference[xmlns="${Ii.NS.REFERENCE}"]`):e.children(`reference[xmlns="${Ii.NS.REFERENCE}"]`).length?e.children(`reference[xmlns="${Ii.NS.REFERENCE}"]`):e.children("envelope").children("content").children(`reference[xmlns="${Ii.NS.REFERENCE}"]`),u.each(((e,t)=>{let i=Ci(t),s=i.attr("type"),n=parseInt(i.attr("begin")),a=parseInt(i.attr("end"));if("decoration"===s)if(i.children(`mention[xmlns="${Ii.NS.MARKUP}"]`).length){let e=i.children(`mention[xmlns="${Ii.NS.MARKUP}"]`),t=e.text(),s=e.attr("node")===Ii.NS.GROUP_CHAT;m.push({start:n,end:a,target:t,is_gc:s})}else{let e=[];i.children().each(((t,i)=>{yi.MARKUP_TAGS.indexOf(i.tagName)>-1&&Ci(i).attr("xmlns")===Ii.NS.MARKUP&&("link"===i.tagName?e.push({type:i.tagName,uri:Ci(i).text()}):"quote"===i.tagName?_.push({start:n,end:a}):e.push(i.tagName))})),e.length&&v.push({start:n,end:a,markup:e})}else if("mutable"===s){let e=i.children(`geoloc[xmlns="${Ii.NS.GEOLOC}"]`).first(),t={};if(e.children("lat").text()&&e.children("lon").text()&&(t={lat:e.children("lat").text(),lon:e.children("lon").text()},y.push(t),f.push({start:n,end:a,type:"geolocation"})),i.children(`ogp[xmlns="${Ii.NS.OGP}"]`).length){let e=i.children(`ogp[xmlns="${Ii.NS.OGP}"]`).first(),t={};e.length&&(t={site:e.children('meta[property="og:site_name"]').attr("content"),type:e.children('meta[property="og:type"]').attr("content"),url:e.children('meta[property="og:url"]').attr("content"),description:e.children('meta[property="og:description"]').attr("content"),title:e.children('meta[property="og:title"]').attr("content"),image:e.children('meta[property="og:image"]').attr("content"),image_width:e.children('meta[property="og:image:width"]').attr("content"),image_height:e.children('meta[property="og:image:height"]').attr("content"),video_url:e.children('meta[property="og:video:url"]').attr("content"),original_text:e.attr("url"),start:n,end:a},x.push(t),f.push({start:n,end:a,type:"link_reference"}))}let s=i.find(`file-sharing[xmlns="${Ii.NS.FILES}"]`).first();if(i.children("forwarded").length)f.push({start:n,end:a,type:"forward"});else if(s.length){let e=s.parent(`voice-message[xmlns="${Ii.NS.VOICE_MESSAGE}"]`).length?"voice":"file",t=s.children("file"),i={},o=[];if(f.push({start:n,end:a,type:e}),s.children("sources").children("uri").each(((e,t)=>{o.push(Ci(t).text())})),i={name:t.children("name").text(),hash:t.children(`hash[xmlns="${Ii.NS.HASH}"]`).text(),size:t.children("size").text(),type:t.children("media-type").text(),duration:t.children("duration").text(),description:t.children("desc").text(),height:t.children("height").text(),width:t.children("width").text(),thumbnail:t.children(`thumbnail[xmlns="${Ii.NS.PUBSUB_AVATAR_METADATA_THUMBNAIL}"]`).attr("uri"),voice:"voice"===e,sources:o},0==o[0].indexOf("aescbc")){let e=o[0].replace(/^aescbc/,"https"),t=ki.fromBase64toArrayBuffer(e.slice(e.length-64));e=e.slice(0,e.length-64-1),Ei.extend(i,{sources:[e],key:t}),p.has_encrypted_files=!0}"image"===this.getFileType(t.children("media-type").text())?A.push(i):"video"===this.getFileType(t.children("media-type").text())?w.push(i):b.push(i)}}})),e.children('x[xmlns="'+Ii.NS.GROUP_CHAT+'"]').each(((i,s)=>{let n=Ci(s).children(`reference[type="mutable"][xmlns="${Ii.NS.REFERENCE}"]`),a=n.children(`user[xmlns="${Ii.NS.GROUP_CHAT}"]`).first();if(n.length){let i=parseInt(n.attr("begin")),s=parseInt(n.attr("end"));f.push({start:i,end:s,type:"groupchat"});let o=a.attr("id"),r=a.children("jid").text();Ei.extend(p,{user_info:{id:o,jid:r,nickname:a.children("nickname").text()||r||o,role:a.children("role").text(),avatar:a.children(`metadata[xmlns="${Ii.NS.PUBSUB_AVATAR_METADATA}"]`).children("info").attr("id"),avatar_url:a.children(`metadata[xmlns="${Ii.NS.PUBSUB_AVATAR_METADATA}"]`).children("info").attr("url"),badge:a.children("badge").text()},from_jid:r||o,groupchat_jid:Ii.getBareJidFromJid(t.is_sender?e.attr("to"):e.attr("from"))})}})),_.length&&(p.blockquotes=_),m.length&&(p.mentions=m),v.length&&(p.markups=v),A.length&&(p.images=A),w.length&&(p.videos=w),b.length&&(p.files=b),y.length&&(p.locations=y),x.length&&(p.link_references=x),p.mutable_content=f,p.mutable_content.length||(p.forwarded_message=null),t.stanza_id&&(p.stanza_id=t.stanza_id),l&&(p.origin_id=l),c&&(p.archive_id=c),(t.replaced||m.length)&&(p.mentions=m),(t.replaced||v.length)&&(p.markups=v),(t.replaced||b.length)&&(p.files=b),(t.replaced||A.length)&&(p.images=A),(t.replaced||w.length)&&(p.videos=w),(t.replaced||x.length)&&(p.link_references=x),e.children(`x[xmlns="${Ii.NS.GROUP_CHAT}#system-message"]`).length&&(p.type="system",p.participants_version=e.children(`x[xmlns="${Ii.NS.GROUP_CHAT}#system-message"]`).attr("version")),e.children(`x[xmlns="${Ii.NS.DATAFORM}"]`).length&&e.children(`x[xmlns="${Ii.NS.DATAFORM}"]`).find('field[var="FORM_TYPE"][type="hidden"] value').text()===Ii.NS.WEBCHAT){let t=[];e.children(`addresses[xmlns="${Ii.NS.ADDRESS}"]`).children("address").each(((e,i)=>{let s=Ci(i);t.push({type:s.attr("type"),jid:s.attr("jid")})})),p.data_form=Ei.extend(this.account.parseDataForm(e.children(`x[xmlns="${Ii.NS.DATAFORM}"]`)),{addresses:t})}if(o&&(o=ki.slice_pretty_body(o,f)),p.forwarded_message||""!==o.removeEmoji()||(p.only_emoji=Array.from(o).length),p.message=o,t.echo_msg&&(s=e.children("time")),s.length&&(p.time=s.attr("stamp")),(p.carbon_copied||a==this.account.get("jid")&&(t.is_archived||t.synced_msg))&&(p.state=yi.MSG_SENT),t.synced_msg&&(p.synced_from_server=!0),t.missed_history&&(p.missed_msg=!0),t.is_unread_archived&&"system"!==p.type){let e=this.find((e=>this.chat.get("last_read_msg")&&(e.get("stanza_id")===this.chat.get("last_read_msg")||e.get("contact_stanza_id")===this.chat.get("last_read_msg"))));e?Number(Ti(p.time))>e.get("timestamp")&&(p.is_unread=!0):p.is_unread=!0}if(t.echo_msg&&(p.state=yi.MSG_DELIVERED,p.timestamp=Number(Ti(p.time)),p.from_jid=this.account.get("jid")),(t.context_message||t.participant_message||t.searched_message||t.is_searched)&&(p.state=yi.MSG_ARCHIVED),t.carbon_copied&&t.encrypted&&this.chat&&this.chat.item_view&&!this.chat.item_view.content&&(this.chat.item_view.content=new nt.ChatContentView({chat_item:this.chat.item_view})),t.pinned_message)return this.account.pinned_messages.create(p);if(t.participant_message)return this.account.participant_messages.create(p);if(t.searched_message)return t.query&&(p.query=t.query),t.searched_in_contact_messages&&(p.searched_in_contact_messages=t.searched_in_contact_messages),this.account.searched_messages.create(p);if(t.context_message)return this.account.context_messages.create(p);if(t.echo_msg&&g&&g.destroyOnEcho(),!(t.replaced||t.encrypted&&t.is_unread_archived)||!g){if(t.is_searched){let t=Ii.getBareJidFromJid(e.attr("from"));return t===this.account.get("jid")&&(t=Ii.getBareJidFromJid(e.attr("to"))),g=nt.all_searched_messages.create(p),g.contact=this.account.contacts.mergeContact(t),g.account=this.account,g}if(e.find('[xmlns="'+Ii.NS.EPHEMERAL+'"]').length&&!e.find('[xmlns="'+Ii.NS.EPHEMERAL+'"]').closest("system-message").length&&t.encrypted&&(p.ephemeral_timer=e.find('[xmlns="'+Ii.NS.EPHEMERAL+'"]').attr("timer"),t.sync_timestamp&&(p.displayed_time=t.sync_timestamp),this.chat.contact)){let t=this.account.omemo.cached_messages.getMessage(this.chat.contact,e.find(`stanza-id[by="${this.account.get("jid")}"]`).attr("id"));t&&t.envelope&&t.displayed_time&&(p.displayed_time=t.displayed_time)}return!t.synced_msg&&this.chat&&this.chat.item_view&&!this.chat.item_view.content&&(this.chat.item_view.content=new nt.ChatContentView({chat_item:this.chat.item_view})),g=this.create(p),t.encrypted&&t.is_unread&&g.set("is_unread",!0),e.find('[xmlns="'+Ii.NS.EPHEMERAL+'"]').length&&!e.find('[xmlns="'+Ii.NS.EPHEMERAL+'"]').closest("system-message").length&&t.encrypted&&g.collection.checkEphemeralTimers(),g}g.set(p)},decryptFile:async function(e,t){return new Promise(((i,s)=>{fetch(e).then((e=>{e.blob().then((e=>{try{let s=new FileReader;s.onloadend=()=>{let e=s.result,n=t.slice(0,32),a=t.slice(32);ki.AES.decrypt(n,a,e).then((e=>{i(e)}))},s.readAsArrayBuffer(e)}catch(e){i(null)}}))})).catch((()=>{i(null)}))}))},getFilename:function(e){let t=e.lastIndexOf("/");return e.substr(t+1,e.length-1)},getFileType:function(e){let t=e.indexOf("/")>-1?e.indexOf("/"):e.length;return e.slice(0,t)},createSystemMessage:function(e){return this.create(Ei.extend({type:"system",silent:!0,state:yi.MSG_DISPLAYED},e))}}),nt.EphemeralTimerSelector=nt.BasicView.extend({className:"modal main-modal change-ephemeral-timer-modal",ps_selector:".modal-content",ps_settings:{wheelPropagation:!0},template:xi.ephemeral_timer_selector,events:{"click .btn-set-ephemeral-timer":"changeTimer"},render:function(e){this.model=e.model,this.account=e.account,this.updateColorScheme(),this.updateScrollBar(),this.model.get("chat_ephemeral_timer")&&this.updateSelectedTimer(),this.$el.openModal({ready:this.onRender.bind(this),complete:this.close.bind(this)})},updateColorScheme:function(){this.$el.attr("data-color",this.account.settings.get("color"))},onRender:function(e){this.model.get("chat_ephemeral_timer")&&this.scrollToChildPlus(this.$(".btn-set-ephemeral-timer.selected"),-45)},updateSelectedTimer:function(){let e=this.$(`.btn-set-ephemeral-timer[data-value="${this.model.get("chat_ephemeral_timer")}"`);this.$(".btn-set-ephemeral-timer").removeClass("selected"),e.addClass("selected")},changeTimer:function(e){let t=Ci(e.target).closest(".btn-set-ephemeral-timer");this.$(".btn-set-ephemeral-timer").removeClass("selected"),t.addClass("selected"),this.model.set("chat_ephemeral_timer",t.attr("data-value"))},onHide:function(){this.$el.detach()},close:function(){this.closeModal()},closeModal:function(){this.$el.closeModal({complete:this.hide.bind(this)})}}),nt.JingleMessage=Backbone.Model.extend({defaults:{duration:0,contact_full_jid:"",session_id:0,audio:!0,volume_on:!0,video_in:!1,video_screen:!1,state:0},initialize:function(e,t){(e=e||{}).video_live=e.video_live||!1,e.video=e.video_live,this.contact=t.contact,this.account=this.contact.account,this.registerIqHandler(),this.audio_notifiation=nt.playAudio(e.call_initiator?nt.settings.sound_on_call:nt.settings.sound_on_dialtone,!0),this.modal_view=new nt.JingleMessageView({model:this}),this.conn=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun01.pool-01.xabber.org:3478"}].concat(yi.TURN_SERVERS_LIST),sdpSemantics:"unified-plan"}),this.$remote_video_el=Ci('<video autoplay class="webrtc-remote-video"/>'),this.$remote_audio_el=Ci('<audio autoplay class="webrtc-remote-audio hidden"/>'),this.$local_video=this.modal_view.$el.find(".webrtc-local-video"),this.current_timer=0,this.conn.onconnectionstatechange=this.onChangeConnectionState.bind(this),this.set(e),this.get("in")&&this.updateStatus(nt.getString("dialog_jingle_message__status_calling")),this.onChangedMediaType(),this.conn.ontrack=e=>{this.remote_stream=e.streams[0],this.modal_view.$el.find(".webrtc-remote-audio")[0].srcObject=e.streams[0]},this._waiting_timeout=setTimeout((()=>{!this.get("state")&&"calling"===this.get("status")&&this.get("call_initiator")===this.account.get("jid")&&this.reject()}),1e3*yi.JINGLE_WAITING_TIME),this.conn.onicecandidate=this.onIceCandidate.bind(this),this.conn.oniceconnectionstatechange=this.onChangeIceConnectionState.bind(this),this.on("change:audio",this.setEnabledAudioTrack,this),this.on("change:video",this.onChangedVideoValue,this),this.on("change:video_live",this.setEnabledVideoTrack,this),this.on("change:video_screen",this.setEnabledScreenShareVideoTrack,this),this.on("change:video_in",this.onChangedRemoteVideo,this),this.on("change:volume_on",this.onChangedVolume,this),this.on("destroy",this.onDestroy,this)},registerIqHandler:function(){this.account.connection.deleteHandler(this.iq_handler),this.iq_handler=this.account.connection.addHandler((e=>(this.onIQ(e),!0)),null,"iq","set")},updateStatus:function(e){this.modal_view.updateStatusText(e)},updateTimer:function(){this.updateStatus(ki.pretty_duration(++this.current_timer))},startTimer:function(){this.updateTimer(),clearInterval(this.call_timer),this.call_timer=setInterval((()=>{this.updateTimer()}),1e3)},onConnected:function(){this.get("video_live")&&this.onChangedVideoValue(),nt.stopAudio(this.audio_notifiation),setTimeout((()=>{this.set("status","connected"),nt.trigger("update_jingle_button"),this.updateStatus(),this.startTimer()}),1e3)},onChangeConnectionState:function(e){let t=e.target,i=t.connectionState;"connected"===i?this.onConnected():(this.updateStatus(ki.pretty_name(i)+"..."),"failed"===i&&(clearTimeout(this._timeout_failed),this._timeout_failed=setTimeout((()=>{"failed"!==t.connectionState&&"disconnected"!==t.connectionState||(this.set("status",i),nt.trigger("update_jingle_button"),this.reject(),this.destroy(),this.updateStatus(nt.getString("dialog_jingle_message__status_network_error")),nt.current_voip_call=null)}),4e4),t.restartIce()),"disconnected"===i&&(this.set("status",i),nt.trigger("update_jingle_button"),this.destroy(),nt.current_voip_call=null))},onIceCandidate:function(e){e&&e.candidate&&e.candidate.candidate&&this.sendCandidate(e.candidate)},onChangeIceConnectionState:function(e){let t=e.target,i=t.iceConnectionState;"failed"===i&&(clearTimeout(this._timeout_failed),this._timeout_failed=setTimeout((()=>{"failed"!==t.iceConnectionState&&"disconnected"!==t.connectionState||(this.set("status",i),nt.trigger("update_jingle_button"),this.reject(),this.destroy(),this.updateStatus(nt.getString("dialog_jingle_message__status_network_error")),nt.current_voip_call=null)}),4e4),t.restartIce()),"connected"===i&&!this.conn.connectionState&&this.onConnected()},onChangedMediaType:function(){this.$local_video.switchClass("hidden",!this.get("video"))},onChangedRemoteVideo:function(){let e=this.get("video_in");e?(this.$remote_video_el[0].srcObject=this.remote_stream,this.modal_view.$el.find(".webrtc-remote-audio").replaceWith(this.$remote_video_el),this.modal_view.$el.switchClass("multiple-videos",this.get("video")&&this.get("video_in"))):(this.$remote_audio_el[0].srcObject=this.remote_stream,this.modal_view.$el.find(".webrtc-remote-video").replaceWith(this.$remote_audio_el)),this.modal_view.$el.find(".default-screen").switchClass("hidden",e),this.onChangedVolume()},onChangedVolume:function(){this.get("volume_on")?(this.modal_view.$el.find(".webrtc-remote-audio")[0]&&(this.modal_view.$el.find(".webrtc-remote-audio")[0].muted=!1),this.modal_view.$el.find(".webrtc-remote-video")[0]&&(this.modal_view.$el.find(".webrtc-remote-video")[0].muted=!1)):(this.modal_view.$el.find(".webrtc-remote-audio")[0]&&(this.modal_view.$el.find(".webrtc-remote-audio")[0].muted=!0),this.modal_view.$el.find(".webrtc-remote-video")[0]&&(this.modal_view.$el.find(".webrtc-remote-video")[0].muted=!0))},setEnabledAudioTrack:function(){this.local_stream.getAudioTracks()[0].enabled=this.get("audio")},setEnabledVideoTrack:function(){let e=this.get("video_live"),t=this.conn.getSenders().find((e=>e.track&&(e.track.default||e.track.screen)));e&&this.set("video_screen",!1),t&&e&&this.createVideoStream(),!t&&this.local_stream&&(this.local_stream.getVideoTracks()[0].enabled=e),this.set("video",e||this.get("video_screen"))},onDestroy:function(){clearTimeout(this._waiting_timeout),clearInterval(this.call_timer),clearTimeout(this._timeout_failed),nt.stopAudio(this.audio_notifiation),this.account.connection.deleteHandler(this.iq_handler),this.stopTracks(),this.conn.close()},setEnabledScreenShareVideoTrack:function(){let e=this.get("video_screen"),t=this.conn.getSenders().find((e=>e.track&&!e.track.screen));e&&this.set("video_live",!1),t&&e&&this.createScreenShareVideoStream(),!t&&this.local_stream&&(this.local_stream.getVideoTracks()[0].enabled=e),this.set("video",e||this.get("video_live"))},onChangedVideoValue:function(){let e=this.get("video")?"enable":"disable";this.sendVideoStreamState(e),this.onChangedMediaType()},createScreenShareVideoStream:function(){navigator.mediaDevices.getDisplayMedia({video:!0}).then((e=>{this.$local_video[0].srcObject=e,e.getVideoTracks().forEach((e=>{Ei.extend(e,{screen:!0}),this.local_stream.addTrack(e),this.conn.addTrack(e,this.local_stream),this.conn.getSenders().find((e=>!e.track||e.track&&"video"===e.track.kind)).replaceTrack(e)}))}))},sendVideoStreamState:function(e){let t=Si({to:this.get("contact_full_jid"),type:"set"}).c("query",{xmlns:Ii.NS.JINGLE_MSG}).c("video",{state:e,id:this.get("session_id")});this.account.sendIQFast(t)},onIQ:function(e){let t=Ci(e),i=t.find('jingle[action="session-initiate"]'),s=t.find('jingle[action="session-accept"]'),n=t.find('jingle[action="session-info"]'),a=t.find(`query[xmlns="${Ii.NS.JINGLE_MSG}"] video`),o=t.attr("from"),r=Si({to:o,type:"result",id:t.attr("id")});if(i.length){if(i.attr("sid")!==this.get("session_id"))return;let e=i.find(`description[xmlns="${Ii.NS.JINGLE_RTP}"]`).text();e&&this.conn.setRemoteDescription(new RTCSessionDescription({type:"offer",sdp:e})),this.acceptSession(e),this.account.sendIQFast(r)}if(s.length){if(s.attr("sid")!==this.get("session_id"))return;let e=s.find(`description[xmlns="${Ii.NS.JINGLE_RTP}"]`).text();e&&this.conn.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:e})),this.account.sendIQFast(r)}if(n.length){if(n.attr("sid")!==this.get("session_id"))return;let e=n.find("candidate");e.length&&this.conn.addIceCandidate(new RTCIceCandidate({candidate:e.text(),sdpMLineIndex:e.attr("sdpMLineIndex"),sdpMid:e.attr("sdpMid")})),this.account.sendIQFast(r)}if(a.length){if(a.attr("id")===this.get("session_id")){let e=a.attr("state");"enable"===e&&this.set("video_in",!0),"disable"===e&&this.set("video_in",!1)}this.account.sendIQFast(r)}},startCall:function(){this.set("call_initiator",this.account.get("jid")),this.createAudioStream(),this.get("video_live")&&this.createVideoStream(),this.propose()},createAudioStream:function(){try{navigator.mediaDevices.getUserMedia({audio:!0}).then((e=>{this.local_stream=e,this.$local_video[0].srcObject=e;let t=this.initVideoTrack();this.local_stream.addTrack(t),this.conn.addTrack(t,this.local_stream),e.getAudioTracks().forEach((e=>this.conn.addTrack(e,this.local_stream)))}))}catch(e){ki.dialogs.error(e)}},createVideoStream:function(){try{navigator.mediaDevices.getUserMedia({video:!0}).then((e=>{this.$local_video[0].srcObject=e,e.getVideoTracks().forEach((e=>{this.local_stream.addTrack(e),this.conn.addTrack(e,this.local_stream),this.conn.getSenders().find((e=>!e.track||e.track&&"video"===e.track.kind)).replaceTrack(e)}))}))}catch(e){ki.dialogs.error(e)}},stopTracks:function(){this.local_stream&&this.local_stream.getTracks().forEach((e=>{e.stop(),this.local_stream.removeTrack(e)}))},propose:function(){this.updateStatus(nt.getString("dialog_jingle_message__status_search"));let e=$i({type:"chat",to:this.contact.get("jid")}).c("propose",{xmlns:Ii.NS.JINGLE_MSG,id:this.get("session_id")}).c("description",{xmlns:Ii.NS.JINGLE_RTP,media:"audio"}).up().up().c("no-store",{xmlns:Ii.NS.HINTS}).up().c("markable").attrs({xmlns:Ii.NS.CHAT_MARKERS}).up().c("body").t(nt.getString("jingle__text_body_message")).up().c("origin-id",{id:Mi(),xmlns:"urn:xmpp:sid:0"});this.account.sendMsg(e)},accept:function(){let e=$i({type:"chat",to:this.get("contact_full_jid")||this.contact.get("jid")}).c("accept",{xmlns:Ii.NS.JINGLE_MSG,id:this.get("session_id")}).up().c("no-store",{xmlns:Ii.NS.HINTS}).up().c("markable").attrs({xmlns:Ii.NS.CHAT_MARKERS}).up().c("origin-id",{id:Mi(),xmlns:"urn:xmpp:sid:0"});this.set("jingle_start",Ti.now()),this.account.sendMsg(e),nt.stopAudio(this.audio_notifiation),this.set("status","connecting"),nt.trigger("update_jingle_button"),this.updateStatus(nt.getString("dialog_jingle_message__status_connecting")),this.audio_notifiation=nt.playAudio(nt.settings.sound_on_connection,!0)},reject:function(e){if("disconnected"===this.get("status")||"disconnecting"===this.get("status"))return;let t=$i({type:"chat",to:this.get("contact_full_jid")||this.contact.get("jid")}).c("reject",{xmlns:Ii.NS.JINGLE_MSG,id:this.get("session_id")});if(this.get("jingle_start")){let i=Ti.now(),s=Math.round((i-this.get("jingle_start"))/1e3),n={initiator:this.get("call_initiator")};this.call_timer&&Ei.extend(n,{start:Ti(this.get("jingle_start")).format(),end:Ti(i).format(),duration:s}),e&&(n.reason=e),t.c("call",n).up()}t.up().c("store",{xmlns:Ii.NS.HINTS}).up().c("markable").attrs({xmlns:Ii.NS.CHAT_MARKERS}).up().c("origin-id",{id:Mi(),xmlns:"urn:xmpp:sid:0"}),this.account.sendMsg(t),this.createSystemMessage(t),this.set("status","disconnected"),nt.trigger("update_jingle_button"),this.destroy(),nt.current_voip_call=null},createSystemMessage:function(e){let t=Ci(e.nodeTree),i=this.account.chats.getChat(this.contact);if(t.find("call").attr("end")){let e=t.find("call").attr("duration"),s=t.find("call").attr("initiator");i.messages.createSystemMessage({from_jid:this.account.get("jid"),session_id:t.find("reject").attr("id"),message:nt.getString(s&&s===this.account.get("jid")?"jingle__system_message__outgoing_call":"jingle__system_message__incoming_call",[ki.pretty_duration(e)])})}else i.messages.createSystemMessage({from_jid:this.account.get("jid"),session_id:t.find("reject").attr("id"),message:nt.getString("jingle__system_message__cancelled_call")})},initVideoTrack:function(){let e=Object.assign(document.createElement("canvas"),{width:320,height:240}),t=e.getContext("2d");t.fillRect(0,0,e.width,e.height);let i=t.getImageData(0,0,e.width,e.height);return requestAnimationFrame((function e(){for(let e=0;e<i.data.length;e++)i.data[e++]=i.data[e++]=i.data[e++]=1;t.putImageData(i,0,0),requestAnimationFrame(e)})),Ei.extend(e.captureStream(60).getTracks()[0],{default:!0})},initSession:function(){navigator.mediaDevices.getUserMedia({audio:!0}).then((e=>{this.local_stream=e,this.$local_video[0].srcObject=e;let t=this.initVideoTrack();return this.local_stream.addTrack(t),this.conn.addTrack(t,this.local_stream),e.getAudioTracks().forEach((e=>this.conn.addTrack(e,this.local_stream))),this.conn.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})})).then((e=>{this.set("session_initiator",this.account.get("jid")),this.conn.setLocalDescription(e).then((()=>{let t=e.sdp,i=Si({to:this.get("contact_full_jid"),type:"set"}).c("jingle",{xmlns:Ii.NS.JINGLE,action:"session-initiate",initiator:this.account.get("jid"),sid:this.get("session_id")}).c("content",{creator:"initiator",name:"voice"}).c("description",{xmlns:Ii.NS.JINGLE_RTP,media:"audio"}).c("sdp").t(t).up().up().c("security",{xmlns:Ii.NS.JINGLE_SECURITY_STUB});this.account.sendIQFast(i)}))}))},sendCandidate:function(e){let t=Si({to:this.get("contact_full_jid"),type:"set"}).c("jingle",{xmlns:Ii.NS.JINGLE,action:"session-info",initiator:this.get("session_initiator"),sid:this.get("session_id")}).c("content",{creator:"initiator",name:"voice"}).c("description",{xmlns:Ii.NS.JINGLE_RTP,media:"audio"}).up().c("transport",{xmlns:Ii.NS.JINGLE_TRANSPORTS_ICE}).c("candidate",{sdpMLineIndex:e.sdpMLineIndex,sdpMid:e.sdpMid}).t(e.candidate);this.account.sendIQFast(t)},acceptSession:async function(){this.set("session_initiator",this.contact.get("jid")),this.conn.createAnswer().then((e=>{this.conn.setLocalDescription(e).then((()=>{let t=e.sdp,i=Si({to:this.get("contact_full_jid"),type:"set"}).c("jingle",{xmlns:Ii.NS.JINGLE,action:"session-accept",initiator:this.contact.get("jid"),sid:this.get("session_id")}).c("content",{creator:"initiator",name:"voice"}).c("description",{xmlns:Ii.NS.JINGLE_RTP,media:"audio"}).c("sdp").t(t).up().up().c("security",{xmlns:Ii.NS.JINGLE_SECURITY_STUB});this.account.sendIQFast(i)}))}))}}),nt.Chat=Backbone.Model.extend({defaults:{opened:!0,active:!1,display:!1,displayed_sent:!1,last_displayed_id:0,last_delivered_id:0,unread:0,timestamp:0,const_unread:0,encrypted:!1},initialize:function(e,t){this.contact=t.contact,this.sync_created=t.sync_created,this.account=this.contact?this.contact.account:t.account;let i=this.contact?this.contact.get("jid"):e.jid;this.set({id:e&&e.id||this.contact.hash_id,jid:i}),e&&"encrypted"===e.type&&this.set("encrypted",!0),e&&"saved"===e.type&&(this.set("saved",!0),this.account.on("remove_saved_chat",this.onContactDestroyed,this)),this.retraction_version=0,this.contact?(this.set("group_chat",this.contact.get("group_chat")),this.contact.on("destroy",this.onContactDestroyed,this),this.contact.on("change:group_chat",this.onChangedContact,this)):this.set({group_chat:!1,name:e.name}),this.messages=new nt.Messages(null,{account:this.account,chat:this}),this.messages_unread=new nt.Messages(null,{account:this.account}),this.item_view=new nt.ChatItemView({model:this}),this.plyr_players=[],this.retracted_msg_id_list=[],this.on("get_retractions_list",this.getAllMessageRetractions,this),this.on("change:timestamp",this.onChangedTimestamp,this),this.on("update_last_read_msg",this.onChangedLastReadMsg,this)},onChangedTimestamp:function(){},onChangedLastReadMsg:function(e){if(this.get("prev_last_read_msg")&&this.get("last_read_msg")&&this.get("prev_last_read_msg")!==this.get("last_read_msg")){this.item_view&&!this.item_view.content&&(this.item_view.content=new nt.ChatContentView({chat_item:this.item_view})),this.item_view.content._no_scrolling_event=!0;let t={fast:!0,max:nt.settings.mam_messages_limit,is_first:!0,sync_update:!(!e||!e.sync_update),var:[{var:"after-id",value:this.get("prev_last_read_msg")},{var:"before-id",value:this.get("last_read_msg")}]};this.requestHistoryBetweenAnchors(t)}this.set("prev_last_read_msg",this.get("last_read_msg"))},requestHistoryBetweenAnchors:function(e){this.item_view.content.MAMRequest(e,((t,i,s)=>{if(s.complete&&this.set("last_sync_unread_id",this.get("last_read_msg")),e.is_first&&!e.sync_update){let e=Number(s.count)+1;e=this.get("const_unread")-e,e<0&&(e=0),this.set("unread",0),this.set("const_unread",e)}if(!s.complete&&s.count>i.length&&(e.after=s.last,e.is_first=!1,this.requestHistoryBetweenAnchors(e)),Ei.each(i,(e=>{let t=this.account.chats.receiveChatMessage(e,{is_archived:!0,is_between_anchors:!0});t&&t.set("is_unread",!1)})),s.complete&&this.get("last_read_msg")){let e=this.messages.find((e=>this.get("last_read_msg")&&(e.get("stanza_id")===this.get("last_read_msg")||e.get("contact_stanza_id")===this.get("last_read_msg")))),t=new Ci.Deferred;t.done((()=>{e&&e.set("is_unread",!1),this.item_view.content.isVisible()||this.set("show_new_unread",!0),this.item_view.content._no_scrolling_event=!1})),e?t.resolve():this.contact.getMessageByStanzaId(this.get("last_read_msg"),(i=>{e=this.account.chats.receiveChatMessage(i,{is_archived:!0}),t.resolve()}))}}),(e=>{nt.error("error")}))},isMuted:function(){return this.get("muted")&&this.get("muted")<Date.now()/1e3&&this.set("muted",!1),this.get("muted")},onChangedContact:function(){let e=this.contact.changed;Ei.has(e,"group_chat")&&this.set("group_chat",this.contact.get("group_chat")),Ei.has(e,"blocked")&&this.set("blocked",this.contact.get("blocked"))},recountUnread:function(){this.set("unread",this.messages_unread.length),this.contact&&this.get("archived")&&this.isMuted()||nt.toolbar_view.recountAllMessageCounter()},setEphemeralTimer:function(e){this.get("encrypted")&&this.set("chat_ephemeral_timer",Ci(e.target).closest(".btn-set-ephemeral-timer").attr("data-value"))},onContactDestroyed:function(){this.resetUnread(),this.destroy()},resetUnread:function(){let e=this.get("unread");e>0&&(this.messages_unread&&this.messages_unread.reset(),this.set("unread",0),nt.recountAllMessageCounter(e),nt.toolbar_view.recountAllMessageCounter(e))},searchMessages:function(e,t){this.messages_view=new nt.SearchedMessagesView({query_text:e,model:this}),this.messages_view.messagesRequest({},(()=>{nt.body.setScreen("all-chats",{right:"searched_messages",model:this})}))},sendDataForm:function(e,t){let i=e.get("data_form");if(!i)return;let s=$i({type:"chat"});i.fields.forEach((e=>{"boolean"===e.type&&(e.var===t?e.values=[!0]:e.values=[!1])})),s=this.account.addDataFormToStanza(s,i),i.addresses.forEach((e=>{"replyto"===e.type&&Ci(s.nodeTree).attr("to",e.jid),this.account.sendMsg(s)}))},setStanzaId:function(e,t){let i=this.messages.get(e),s=i.get("origin_id");this.item_view&&this.item_view.content&&t&&this.item_view.content.$(`.chat-message[data-uniqueid="${e}"]`).data("uniqueid",t)[0].setAttribute("data-uniqueid",t),i.set("stanza_id",t),this.get("encrypted")&&this.account.omemo&&this.account.omemo.updateMessage({stanza_id:t,origin_id:s},this.contact)},getCallingAvailability:function(e,t,i){let s=Si({to:e,type:"get"}).c("query",{xmlns:Ii.NS.JINGLE_MSG}).c("session",{id:t});this.account.sendIQFast(s,i)},sendReject:function(e){!e&&(e={});let t=e.to||this.contact.get("jid"),i=$i({type:"chat",to:t}).c("reject",{xmlns:Ii.NS.JINGLE_MSG,id:e.session_id}).c("call",{reason:e.reason}).up().up().c("store",{xmlns:Ii.NS.HINTS}).up().c("markable").attrs({xmlns:Ii.NS.CHAT_MARKERS}).up().c("origin-id",{id:Mi(),xmlns:"urn:xmpp:sid:0"});this.account.sendMsg(i)},initIncomingCall:function(e,t){nt.get("audio")&&nt.settings.jingle_calls&&(nt.current_voip_call=new nt.JingleMessage({contact_full_jid:e,session_id:t,call_initiator:this.contact.get("jid")},{contact:this.contact}),nt.current_voip_call.modal_view.show({status:"in"}),nt.trigger("update_jingle_button"),"all-chats"===nt.body.screen.get("name")&&!nt.body.screen.get("right")&&this.item_view&&this.item_view.open())},showEphemeralTimerSelector:function(e,t){this.ephemeral_timer_selector=new nt.EphemeralTimerSelector,this.ephemeral_timer_selector.show({model:this,account:this.account})},endCall:function(e){e&&nt.current_voip_call.set("status",e),nt.trigger("update_jingle_button"),nt.current_voip_call.destroy(),nt.current_voip_call=null,nt.trigger("update_jingle_button")},getAllMessageRetractions:function(){if(!this.contact||!this.contact.get("group_chat"))return;let e=this.contact.get("full_jid")||this.contact.get("jid"),t=Si({type:"get",to:e}).c("query",{xmlns:Ii.NS.REWRITE,version:this.retraction_version});this.account.sendIQ(t)},receiveMessage:function(e,t){let i=Ii.getBareJidFromJid(e.attr("from")),s=t.carbon_copied,n=e.children(`[xmlns="${Ii.NS.CHAT_MARKERS}"]`),a=e.children(`request[xmlns="${Ii.NS.RECEIPTS}"]`),o=e.children(`received[xmlns="${Ii.NS.RECEIPTS}"]`),r=e.children(`propose[xmlns="${Ii.NS.JINGLE_MSG}"]`),c=e.children(`accept[xmlns="${Ii.NS.JINGLE_MSG}"]`),l=e.children(`reject[xmlns="${Ii.NS.JINGLE_MSG}"]`);if(r.length&&!t.searched_message){if(s&&i==this.account.get("jid"))return;if(t.synced_msg){if(this.get("saved"))return;let t=nt.chats_view.child(this.contact.hash_id);return e.find("time").attr("stamp")&&this.set("timestamp",e.find("time").attr("stamp")),t.content||(t.content=new nt.ChatContentView({chat_item:t})),void(t&&t.content&&t.content.receiveNoTextMessage(e,s))}if(t.is_archived)return;{let t=r.attr("id"),s=e.attr("from");this.getCallingAvailability(s,t,(()=>{if(nt.current_voip_call){let e=i===Ii.getBareJidFromJid(nt.current_voip_call.get("contact_full_jid"))?"device_busy":"busy";return this.sendReject({session_id:t,reason:e}),void this.messages.createSystemMessage({from_jid:this.account.get("jid"),message:nt.getString("jingle__system_message__cancelled_call")})}this.initIncomingCall(s,t)}))}}if(c.length){if(t.is_archived||t.synced_msg)return;if(nt.current_voip_call&&nt.current_voip_call.get("session_id")===c.attr("id"))if(s)this.endCall("accepted_another_device"),this.messages.createSystemMessage({from_jid:this.account.get("jid"),message:nt.getString("dialog_jingle_message__status_another_device_accepted")});else{!nt.current_voip_call.get("state")&&nt.current_voip_call.set("state",yi.JINGLE_MSG_ACCEPT),nt.trigger("update_jingle_button");let t=c.find("time").attr("stamp");t=t?Number(Ti(t)):Ti.now(),nt.current_voip_call.set("jingle_start",t),!nt.current_voip_call.get("contact_full_jid")&&nt.current_voip_call.set("contact_full_jid",e.attr("from")),nt.stopAudio(nt.current_voip_call.audio_notifiation),nt.current_voip_call.set("status","connecting"),nt.trigger("update_jingle_button"),nt.current_voip_call.updateStatus(nt.getString("dialog_jingle_message__status_connecting")),nt.current_voip_call.audio_notifiation=nt.playAudio(nt.settings.sound_on_connection)}}if(l.length){if(this.messages.filter((e=>e.get("session_id")===l.attr("id"))).length)return;let i,s=t.delay&&t.delay.attr("stamp")||e.find("delay").attr("stamp")||e.find("time").attr("stamp"),n="";if(l.children("call").length){let e=l.children("call").attr("duration"),t=l.children("call").attr("initiator");n=e&&t?nt.getString(t&&t===this.account.get("jid")?"jingle__system_message__outgoing_call":"jingle__system_message__incoming_call",[ki.pretty_duration(e)]):nt.getString("jingle__system_message__cancelled_call")}else n=nt.getString("jingle__system_message__cancelled_call");if(t.is_unread&&(t.reject_contact_stanza_id=t.contact_stanza_id),i=this.messages.createSystemMessage({from_jid:this.account.get("jid"),time:s,session_id:l.attr("id"),stanza_id:t.stanza_id,contact_stanza_id:t.reject_contact_stanza_id,is_unread:t.is_unread,message:n}),t.is_archived||t.synced_msg)return i;if(nt.current_voip_call&&nt.current_voip_call.get("session_id")===l.attr("id")){nt.stopAudio(nt.current_voip_call.audio_notifiation);let e=nt.playAudio(nt.settings.sound_on_call_busy);setTimeout((()=>{nt.stopAudio(e)}),1500),this.endCall("device_busy"==l.children("call").attr("reason")?"device_busy":"busy"==l.children("call").attr("reason")?"busy":"disconnected")}return i}if(!t.is_archived){let s,n;e.children("stanza-id").each(((t,a)=>{a=Ci(a),e.children(`x[xmlns="${Ii.NS.GROUP_CHAT}"]`).length?a.attr("by")===i?(!s&&(s=a),n=a):s=a:a.attr("by")===i?n=a:s=a})),!t.stanza_id&&s&&(t.stanza_id=s.attr("id")),!t.contact_stanza_id&&n&&(t.contact_stanza_id=n.attr("id"))}if(n.length){let i=n[0].tagName.toLowerCase();if("markable"!==i||t.is_mam||t.is_archived||s||!(!t.synced_msg||t.synced_msg&&t.is_unread)||(this.sendMarker(e.attr("id"),"received",t.stanza_id,t.contact_stanza_id),this.get("saved")&&this.sendMarker(e.attr("id"),"displayed",t.stanza_id,t.contact_stanza_id)),"markable"!==i&&!s)return void this.receiveMarker(e,i,s);"displayed"===i&&s&&this.receiveCarbonsMarker(n)}if(!a.length||t.is_mam||t.is_archived||s||!(!t.synced_msg||t.synced_msg&&t.is_unread)||this.sendDeliveryReceipt(e),o.length&&this.receiveDeliveryReceipt(e),!e.find("body").length||r.length||c.length||l.length){if(this.get("saved"))return;let t=nt.chats_view.child(this.contact.hash_id);return t.content||(t.content=new nt.ChatContentView({chat_item:t})),void(t&&t.content&&t.content.receiveNoTextMessage(e,s))}if(!e.find("invite").length)return this.messages.createFromStanza(e,t);{if(i===this.account.get("jid"))return;let s=e.find("invite").attr("jid")||e.find("message").attr("from"),n=this.account.contacts.get(s);if(n&&"both"==n.get("subscription"))return;if(this.account.connection&&this.account.connection.do_synchronization){if(t.synced_msg||!t.synced_msg&&!t.is_archived)return this.messages.createInvitationFromStanza(e,t)}else{let i=Si({type:"get"}).c("blocklist",{xmlns:Ii.NS.BLOCKING});this.account.sendIQFast(i,(i=>{let n,a=Ci(i).find("item"),o=Number(Ti(e.find("delay").attr("stamp")||e.find("time").attr("stamp")||t.delay&&Number(Ti(t.delay.attr("stamp")))||Ti.now())),r=!1;if(a.length>0&&a.each(((e,t)=>{let i=Ci(t).attr("jid"),a="";if(i.indexOf(s)>-1){if(r=!0,a=i.substr(i.lastIndexOf("/")+1,i.length-s.length),!a)return n="",!1;(!n||n<a)&&(n=a)}})),Ei.isUndefined(n)||n&&n<o)return this.messages.createInvitationFromStanza(e,t)}),(()=>this.messages.createInvitationFromStanza(e,t)))}}},getMessageContext:function(e,t){let i=(t=t||{}).mention&&this.account.messages||t.searched_messages&&!t.encrypted&&this.account.searched_messages||t.message&&nt.all_searched_messages||this.account.messages,s=i.get(e),n=new Ci.Deferred;n.done((()=>{if(s){t.searched_messages&&s.set("searched_message",!1);let e=s.get("stanza_id");this.messages_view=new nt.MessageContextView({contact:this.contact,mention_context:t.mention,model:this,stanza_id_context:e,encrypted:t.encrypted}),this.account.context_messages.add(s),this.messages_view.messagesRequest({after:e},(()=>{let e="all-chats";t.mention?e="mentions":t.message&&(e=nt.body.screen.get("name")),nt.body.setScreen(e,{right:"message_context",model:this},{right_contact_save:!0})}))}})),s?n.resolve():(s=i.models.find((t=>t.get("origin_id")===e)),s?n.resolve():this.contact.getMessageByStanzaId(e,(e=>{if(t.encrypted&&this.account.omemo){let t=new Ci.Deferred;t.done(((e,t)=>{(t=t||{}).searched_message=!0,s=this.account.chats.receiveChatMessage(e[0],t),n.resolve()})).fail((()=>{n.resolve()})),s=this.account.omemo.receiveChatMessage(e,{searched_message:!0,gallery:!0},t)}else s=this.account.chats.receiveChatMessage(e,{searched_message:!0}),n.resolve()}),{encrypted:t.encrypted}))},sendDeliveryReceipt:function(e){let t=$i({to:this.contact.get("jid"),type:"chat",id:Mi()}).c("received",{xmlns:Ii.NS.RECEIPTS,id:e.attr("id")});this.account.sendMsg(t)},sendMarker:function(e,t,i,s,n,a){t||(t="displayed");let o=$i({to:this.get("jid"),type:"chat",id:Mi()}).c(t).attrs({xmlns:Ii.NS.CHAT_MARKERS,id:e||i||s||""});i&&o.c("stanza-id",{xmlns:"urn:xmpp:sid:0",id:i,by:this.account.get("jid")}).up(),!this.get("saved")&&s&&o.c("stanza-id",{xmlns:"urn:xmpp:sid:0",id:s,by:this.contact.get("jid")}).up(),n&&o.up().c("store",{xmlns:Ii.NS.HINTS}),n&&o.up().c("encryption",{xmlns:Ii.NS.EXPLICIT_MESSAGE_ENCRYPTION,namespace:Ii.NS.OMEMO}),n&&o.up().c("conversation",{xmlns:Ii.NS.SYNCHRONIZATION,type:Ii.NS.OMEMO,jid:this.contact.get("jid")}),a&&this.account._pending_stanzas.push({stanza:o}),this.account.sendMsg(o)},receiveMarker:function(e,t,i){let s=e.find("displayed"),n=e.find("received");if("error"===e.attr("type")||!s.length&&!n.length)return;let a=s.attr("id")||n.attr("id"),o=s.find(`stanza-id[by="${this.account.get("jid")}"]`).attr("id")||n.find(`stanza-id[by="${this.account.get("jid")}"]`).attr("id"),r=this.account.messages.find((e=>o&&(e.get("stanza_id")===o||e.get("contact_stanza_id")===o)||e.get("msgid")===a));if(r)if(r.isSenderMe())if(n.length){let e=r.get("state");if(e===yi.MSG_ERROR)return void r.set("state",yi.MSG_DELIVERED);if(e!==yi.MSG_DISPLAYED){let e=n.children("time").attr("stamp");e&&(r.set("time",ji(e)),r.set("timestamp",Number(e)))}this.get("saved")?this.setMessagesDisplayed(r.get("timestamp")):this.setMessagesDelivered(r.get("timestamp"))}else{if(r.get("state")===yi.MSG_ERROR)return void r.set("state",yi.MSG_DISPLAYED);this.setMessagesDisplayed(r.get("timestamp"))}else r.set("is_unread",!1),e.find("time").length&&r.get("ephemeral_timer")&&(r.set("displayed_time",e.find("time").attr("stamp")),r.collection.checkEphemeralTimers());else{let s=this.account.chats.get(`${this.id}:encrypted`),n=s&&s.messages.find((e=>o&&(e.get("stanza_id")===o||e.get("contact_stanza_id")===o)||e.get("msgid")===a));if(!n&&this.account.omemo){let t=this.account.omemo.cached_messages.getMessage(this.contact,o);t&&t.envelope&&!t.displayed_time&&(t.displayed_time=e.find("time").attr("stamp"),t&&this.account.omemo.cached_messages.putMessage(this.contact,o,t))}n&&s.receiveMarker(e,t,i)}},setMessagesDelivered:function(e){!e&&(e=Ti.now());let t=this.messages.filter((t=>t.isSenderMe()&&t.get("timestamp")<=e&&t.get("state")>yi.MSG_PENDING&&t.get("state")<yi.MSG_DELIVERED));if(!t.length){let i=this.account.chats.get(this.id+":encrypted");i&&(t=i.messages.filter((t=>t.isSenderMe()&&t.get("timestamp")<=e&&t.get("state")>yi.MSG_PENDING&&t.get("state")<yi.MSG_DELIVERED)))}t.forEach((e=>e.set("state",yi.MSG_DELIVERED)))},setMessagesDisplayed:function(e){!e&&(e=Ti.now());let t=this.messages.filter((t=>t.isSenderMe()&&t.get("timestamp")<=e&&t.get("state")>yi.MSG_PENDING&&t.get("state")<yi.MSG_DISPLAYED));if(!t.length){let i=this.account.chats.get(this.id+":encrypted");i&&(t=i.messages.filter((t=>t.isSenderMe()&&t.get("timestamp")<=e&&t.get("state")>yi.MSG_PENDING&&t.get("state")<yi.MSG_DISPLAYED)))}t.forEach((e=>{e.set("state",yi.MSG_DISPLAYED),e.get("ephemeral_timer")&&(e.set("displayed_time",Date.now()),e.collection.checkEphemeralTimers())}))},receiveCarbonsMarker:function(e){let t,i=e.children(`stanza-id[by="${this.account.get("jid")}"]`).attr("id"),s=e.attr("id"),n=this.messages.find((e=>i&&(e.get("stanza_id")===i||e.get("contact_stanza_id")===i)||e.get("msgid")===s));if(n&&(t=this.messages.indexOf(n)),!n){let t=this.account.chats.get(this.id+":encrypted");if(t&&t.messages.find((e=>i&&(e.get("stanza_id")===i||e.get("contact_stanza_id")===i)||e.get("msgid")===s)))return void t.receiveCarbonsMarker(e)}if(this.get("const_unread")&&this.get("last_read_msg")){let e=this.get("last_read_msg"),t=this.messages.find((t=>i&&(t.get("stanza_id")===e||t.get("contact_stanza_id")===e))),s=new Ci.Deferred,a=new Ci.Deferred,o=n;a.done((()=>{t&&o&&t.get("timestamp")<o.get("timestamp")&&(this.set("last_read_msg",o.get("stanza_id")),this.trigger("update_last_read_msg"))})),s.done((()=>{o?a.resolve():this.contact.getMessageByStanzaId(i,(e=>{o=this.account.chats.receiveChatMessage(e,{is_archived:!0}),a.resolve()}))})),t?s.resolve():this.contact.getMessageByStanzaId(e,(e=>{t=this.account.chats.receiveChatMessage(e,{is_archived:!0}),s.resolve()}))}if(t>-1)for(let e=t;e>=0;e--){this.messages.models[e].set("is_unread",!1)}else{let e=this.messages_unread.find((e=>e.get("stanza_id")===i||e.get("contact_stanza_id")===i||e.get("msgid")===s));e&&e.set("is_unread",!1)}},receiveDeliveryReceipt:function(e){let t=e.find("received"),i=t.attr("id"),s=t.children(`stanza-id[by="${this.account.get("jid")}"]`).attr("id"),n=this.account.messages.get(i||s);n&&n.isSenderMe()&&n.set("state",yi.MSG_DELIVERED)},onPresence:function(e){let t=this.get("jid");this.contact.get("group_chat")||this.contact.get("in_roster")||"subscribe"===e&&this.messages.createSystemMessage({from_jid:t,auth_request:!0,message:nt.getString("action_subscription_received")})},onRosterPush:function(e){let t=this.get("jid");"remove"===e&&this.messages.createSystemMessage({from_jid:t,silent:!1,message:nt.getString("action_contact_deleted")})},retractMessages:function(e,t,i){let s=0,n=e.length,a=new Ci.Deferred;a.done((t=>{(0===t||t!==e.length)&&ki.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it"))})),Ci(e).each(((o,r)=>{let c=r.get("stanza_id"),l=r.get("contact_stanza_id");if(c||l){let o=Si({type:"set",to:t?this.contact.get("full_jid")||this.contact.get("jid"):this.account.get("jid")}).c("retract-message",{id:this.get("group_chat")&&l||c,xmlns:Ii.NS.REWRITE,conversation:this.account.server_features.get(Ii.NS.XABBER_FAVORITES)&&this.get("saved")?this.account.server_features.get(Ii.NS.XABBER_FAVORITES).get("from"):this.contact.get("jid"),symmetric:i,type:this.get("sync_type")?this.get("sync_type"):this.getConversationType(this),by:this.account.get("jid")});this.account.sendIQFast(o,(t=>{this.item_view.content.removeMessage(r),s++,s===e.length&&a.resolve(n)}),(t=>{s++,Ci(t).find("not-allowed").length&&n--,s===e.length&&a.resolve(n)}))}}))},retractMessagesByUser:function(e,t,i){let s=Si({type:"set",to:this.contact.get("full_jid")||this.contact.get("jid")}).c("retract-user",{id:e,xmlns:Ii.NS.REWRITE,type:this.get("sync_type")?this.get("sync_type"):this.getConversationType(this),symmetric:!0});this.account.sendIQFast(s,(i=>{let s=this.messages.filter((t=>t.get("user_info")&&t.get("user_info").id==e));Ci(s).each(((e,t)=>{this.item_view.content.removeMessage(t)})),t&&t()}),(e=>{Ci(e).find("not-allowed").length&&ki.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it")),i&&i()}))},retractAllMessages:function(e,t,i){let s=this.get("group_chat"),n=Si({type:"set",to:s?this.contact.get("full_jid")||this.contact.get("jid"):this.account.get("jid")}),a={xmlns:Ii.NS.REWRITE,type:this.get("sync_type")?this.get("sync_type"):this.getConversationType(this),symmetric:e};a.conversation=this.get("jid"),n.c("retract-all",a),this.account.sendIQFast(n,(e=>{let i=this.messages.models;Ci(i).each(((e,t)=>{this.item_view.content.removeMessage(t)})),t&&t()}),(e=>{Ci(e).find("not-allowed").length&&ki.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it")),i&&i()}))},showBlockedRequestMessage:function(){this.messages.length&&this.messages.createSystemMessage({from_jid:this.account.get("jid"),message:nt.getString("action_contact_blocked"),time:this.messages.last().get("time")})},muteChat:function(e){let t=this.isMuted(),i=!(!t||"0"===t)?"":"0";(e||""===e)&&(i=e);let s={jid:this.contact.get("jid"),mute:i,type:this.get("sync_type")?this.get("sync_type"):this.getConversationType(this)},n=Si({type:"set",to:this.account.get("jid")}).c("query",{xmlns:Ii.NS.SYNCHRONIZATION}).c("conversation",s);this.account.sendIQFast(n)},getConversationType:function(e){return e.get("encrypted")?Ii.NS.SYNCHRONIZATION_OMEMO:e.get("saved")?Ii.NS.XABBER_FAVORITES:e.contact&&e.contact.get("group_chat")?Ii.NS.GROUP_CHAT:Ii.NS.SYNCHRONIZATION_REGULAR_CHAT},deleteFromSynchronization:function(e,t){let i={jid:this.get("jid"),status:"deleted",type:this.get("sync_type")?this.get("sync_type"):this.getConversationType(this)};this.account.cached_sync_conversations.removeFromCachedConversations(i.jid+"/"+i.type);let s=Si({type:"set",to:this.account.get("jid")}).c("query",{xmlns:Ii.NS.SYNCHRONIZATION}).c("conversation",i);this.account.sendIQFast(s,(t=>{e&&e(t)}),(e=>{t&&t(e)}))}}),nt.ChatItemView=nt.BasicView.extend({className:"chat-item list-item",template:xi.chat_item,avatar_size:yi.AVATAR_SIZES.CHAT_ITEM,events:{click:"openByClick"},_initialize:function(){this.account=this.model.account,this.contact=this.model.contact,this.message_counter=0,this.$el.attr("data-id",this.model.id),this.model.sync_created||(this.content=new nt.ChatContentView({chat_item:this})),this.content_placeholder=new nt.ChatContentPlaceholderView,this.updateName(),this.updateStatus(),this.updateCounter(),this.updateAvatar(),this.updateMutedState(),this.updatePinned(),this.updateArchivedState(),this.updateColorScheme(),this.updateGroupChats(),this.updateIcon(),this.updateEncrypted(),this.updateChatError(),this.model.on("change:active",this.updateActiveStatus,this),this.model.on("change:unread",this.updateCounter,this),this.model.on("change:encrypted",this.updateEncrypted,this),this.model.on("change:const_unread",this.updateCounter,this),this.model.on("change:pinned",this.updatePinned,this),this.model.on("change:archived",this.updateArchivedState,this),this.model.on("change:notifications",this.updateNotificationsState,this),this.model.on("change:muted",this.updateMutedState,this),this.model.on("open",this.open,this),this.model.on("remove_opened_chat",this.onClosed,this),this.model.messages.on("add",this.updateChatCard,this),this.model.messages.on("destroy",this.onMessageRemoved,this),this.model.messages.on("change:state",this.onChangedMessageState,this),this.contact&&(this.updateIncomingSubscription(),this.contact.on("change:name",this.updateName,this),this.contact.on("change:invitation",this.updateIncomingSubscription,this),this.contact.on("change:subscription",this.updateIncomingSubscription,this),this.contact.on("change:subscription_request_in",this.updateIncomingSubscription,this),this.contact.on("change:subscription_request_out",this.updateIncomingSubscription,this),this.contact.on("change:status",this.updateStatus,this),this.contact.on("change:private_chat",this.updateIcon,this),this.contact.on("change:invitation",this.updateIcon,this),this.contact.on("change:incognito_chat",this.updateIcon,this),this.contact.on("change:image",this.updateAvatar,this),this.contact.on("change:blocked",this.onBlocked,this),this.contact.on("change:group_chat",this.updateGroupChats,this),this.contact.on("change:in_roster",this.updateAcceptedStatus,this),this.contact.on("remove_invite",this.removeInvite,this),this.contact.on("update_trusted",this.updateEncryptedColor,this)),this.$el.switchClass("saved-chat",this.model.get("saved")),this.$el.find(".circle-avatar").switchClass("ground-color-700",this.model.get("saved")),this.model.get("saved")&&this.$el.find(".circle-avatar").html(wi.templates.svg["saved-messages"]()),this.account.settings.on("change:color",this.updateColorScheme,this)},render:function(){this.model.get("saved")&&this.$(".chat-title").text()!==nt.getString("saved_messages__header")&&this.$(".chat-title").text(nt.getString("saved_messages__header"))},updateChatCard:function(e){this.content||(0!=this.message_counter||!e.get("synced_from_server")&&e.get("encrypted")&&this.model.get("encrypted")?(this.content=new nt.ChatContentView({chat_item:this,new_message:e}),this.updateLastMessage(e)):this.message_counter++)},onChangedMessageState:function(e){if(e.get("state")===yi.MSG_DISPLAYED&&this.model.get("last_displayed_id")<e.get("stanza_id")?(this.model.set("last_displayed_id",e.get("stanza_id")),this.model.set("last_delivered_id",e.get("stanza_id"))):e.get("state")===yi.MSG_DELIVERED&&this.model.get("last_delivered_id")<e.get("stanza_id")&&this.model.set("last_delivered_id",e.get("stanza_id")),this.content){let t=this.content.$(`.chat-message[data-uniqueid="${e.get("unique_id")}"]`).find(".msg-delivering-state");t.attr({"data-state":e.getState(),title:e.getVerboseState()}),t.attr("data-state")===yi.MSG_STATE[yi.MSG_ERROR]&&t.dropdown({inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"left"})}e===this.model.last_message&&this.updateLastMessage(),this.updateChatError()},updateName:function(){this.model.get("saved")?this.$(".chat-title").text(nt.getString("saved_messages__header")):this.$(".chat-title").text(this.contact.get("name"))},updateStatus:function(){if(this.model.get("saved"))return;let e=this.contact.get("status");this.$(".status").attr("data-status",e),this.$(".chat-icon").attr("data-status",e)},updateActiveStatus:function(){this.$el.switchClass("active",this.model.get("active")),this.updateLastMessage()},updateAcceptedStatus:function(){this.contact.get("in_roster")&&this.model.set("is_accepted",!0)},onBlocked:function(){this.updateIcon(),this.$el.switchClass("blocked",this.model.get("blocked"))},updateCounter:function(){let e=this.model.get("unread")+this.model.get("const_unread");this.$(".msg-counter").showIf(e).text(e||""),this.updateTextClipping()},updateIncomingSubscription:function(){this.$(".msg-incoming-subscription").showIf(this.contact.get("invitation")||this.contact.get("subscription_request_in")&&"both"!=this.contact.get("subscription")),this.updateTextClipping()},updateChatError:function(){let e=this.model.messages.filter((e=>-1===e.get("state")));this.$(".msg-chat-error").showIf(e.length),this.updateTextClipping()},updateTextClipping:function(){let e=this.$(".chat-item-notifications-wrap").children(":not(.hidden)").length;this.$(".last-msg").switchClass("triple-indicators",3===e),this.$(".last-msg").switchClass("quad-indicators",4===e)},updateAvatar:function(){if(this.model.get("saved"))return;let e=this.contact.cached_image;this.$(".circle-avatar").setAvatar(e,this.avatar_size)},updateEncrypted:function(){this.$el.switchClass("encrypted",this.model.get("encrypted"))},updatePinned:function(){let e=this.model.get("pinned");this.$(".pinned-icon").showIf(e&&"0"!==e),e&&nt.chats_view.updateChatPosition(this.model)},updateEncryptedColor:function(e){this.$el.attr("data-trust",e)},updateIcon:function(){if(!this.contact)return;this.$(".chat-icon").addClass("hidden");let e=this.contact.getIcon();e&&this.$(".chat-icon").removeClass("hidden group-invite blocked").switchClass(e,"group-invite"==e||"server"==e||"blocked"==e).html(wi.templates.svg[e]())},updateMutedState:function(){this.contact&&(this.$(".msg-counter").switchClass("muted-chat-counter",this.model.isMuted()),this.$(".muted-icon").switchClass("mdi-bell-off",this.model.isMuted()>48e8).switchClass("mdi-bell-sleep",this.model.isMuted()<=48e8),this.$(".muted-icon").showIf(this.model.isMuted()))},updateArchivedState:function(){if(!this.contact)return;let e=this.model.get("archived");(e||!e&&nt.toolbar_view.$(".active").hasClass("archive-chats"))&&this.$el.detach(),(e&&nt.toolbar_view.$(".active").hasClass("archive-chats")||!e&&!nt.toolbar_view.$(".active").hasClass("archive-chats"))&&nt.chats_view.updateChatPosition(this.model)},updateNotificationsState:function(){let e=this.model.get("notifications");(e||!e&&nt.toolbar_view.$(".active").hasClass("mentions"))&&this.$el.detach(),(e&&nt.toolbar_view.$(".active").hasClass("mentions")||!e&&!nt.toolbar_view.$(".active").hasClass("mentions"))&&nt.chats_view.updateChatPosition(this.model)},updateGroupChats:function(){if(!this.contact)return;let e=this.contact.get("group_chat");this.$(".status").hideIf(e),this.$(".chat-icon").showIf(e),this.updateIcon(),e&&(this.$el.addClass("group-chat"),this.model.set("group_chat",!0))},updateColorScheme:function(){let e=this.account.settings.get("color");this.$el.attr("data-color",e)},onMessageRemoved:function(e){if(this.model.last_message===e){let e;for(let t=this.model.messages.length-1;t>=0&&(e=this.model.messages.at(t),e.get("silent"));t--);this.model.last_message=e,this.model.get("notifications")&&this.account.trigger("notification_last_msg_updated",e.get("stanza_id")),this.updateLastMessage()}this.deletePlayersFromMessage(e)},deletePlayersFromMessage:function(e){let t=[];if(e.get("msg_player_videos")&&(t=t.concat(e.get("msg_player_videos"))),e.get("msg_player_audios")&&(t=t.concat(e.get("msg_player_audios"))),t.length){if(nt.current_plyr_player){(nt.current_plyr_player.is_popup?t.includes(nt.current_plyr_player.chat_item.model.plyr_players[nt.current_plyr_player.player_index]):t.includes(nt.current_plyr_player))&&(nt.plyr_players.forEach((e=>{e.$audio_elem?e.$audio_elem.voice_message&&e.$audio_elem.voice_message.stopTime():e.stop()})),nt.current_plyr_player.is_popup&&nt.plyr_player_popup?nt.plyr_player_popup.closePopup():(nt.current_plyr_player=null,nt.trigger("plyr_player_updated")))}this.model.plyr_players=this.model.plyr_players.filter((e=>!t.includes(e))),nt.plyr_players=nt.plyr_players.filter((e=>!t.includes(e))),nt.trigger("plyr_player_updated")}},updateEmptyChat:function(){let e=this.model.get("timestamp"),t=Number(this.model.get("last_delivered_id"))||Number(this.model.get("last_displayed_id"))||Number(this.model.get("last_read_msg")),i=Boolean(t)&&!this.model.messages.length&&!this.model.get("encrypted"),s=Ii.getDomainFromJid(this.account.get("jid")),n=Ii.getDomainFromJid(this.model.get("jid"));Boolean(i)&&this.model.get("group_chat")&&s!=n&&(i=this.model.get("history_loaded")),this.model.get("saved")&&nt.toolbar_view.$(".toolbar-item.saved-chats.active").length||(this.$(".last-msg").html(nt.getString(this.model.get("encrypted")?"recent_chat__start_encrypted_conversation":i?"recent_chat__history_cleared":t?"recent_chat__last_message_retracted":"recent_chat__start_conversation").italics()),this.$(".last-msg-date").text(ki.pretty_short_datetime_recent_chat(e)).attr("title",ji(e)))},updateEncryptedChat:function(){let e=this.model.get("timestamp");this.$(".last-msg").html(nt.getString("recent_chat__decrypting_messages").italics()),this.$(".last-msg-date").text(ki.pretty_short_datetime_recent_chat(e)).attr("title",ji(e))},updateLastMessage:function(e){if(this.model.get("saved")&&nt.toolbar_view.$(".toolbar-item.saved-chats.active").length)return;if(e||(e=this.model.last_message),!this.model.get("active")&&this.model.item_view&&this.model.item_view.content&&this.model.item_view.content.bottom&&this.model.item_view.content.bottom.$(".input-message .rich-textarea").getTextFromRichTextarea().trim()){let t=this.model.item_view.content.bottom.$(".input-message .rich-textarea").getTextFromRichTextarea();return this.$(".last-msg").html(t).prepend(Ci(`<span class="text-color-700">${nt.getString("draft")}: </span>`)),this.$el.emojify(".last-msg",{emoji_size:16}).hyperlinkify({decode_uri:!0}),void(e&&this.model.set({timestamp:e.get("timestamp")}))}if(!e)return void(!this.model.messages.length&&this.updateEmptyChat());let t=e.get("time"),i=e.get("timestamp"),s="",n=e.get("forwarded_message"),a=e.get("files")||[],o=e.get("images")||[],r=e.get("locations")||[],c=n?e.get("message")||nt.getQuantityString("forwarded_messages_count",n.length).italics():e.getText(),l=e.get("user_info")||e.isSenderMe()&&this.contact&&this.contact.my_info&&this.contact.my_info.attributes||{};if(e.get("videos")&&e.get("videos").length&&(a=a.concat(e.get("videos"))),this.model.set({timestamp:i}),this.model.get("group_chat")&&(s=l.nickname||l.jid||(e.isSenderMe()?this.account.get("name"):e.get("from_jid"))||""),s&&(s=Ci('<span class="text-color-700"/>').text(s+": ")),a.length||o.length||r.length){let t=Ci('<span class="text-color-500"/>');if("file_upload"===e.get("type")&&(o=a.filter((e=>e&&e.type&&ki.isImageType(e.type))),a=a.filter((e=>e&&!(e.type&&ki.isImageType(e.type))))),a.length&&o.length)c=t.text(nt.getString("recent_chat__last_message__attachments",[a.length+o.length]));else{if(1==a.length&&(a[0].is_audio||a[0].voice))c=t.text(`${nt.getString("voice_message")}, `+ki.pretty_duration(a[0].duration));else if(a.length>0){let e=0;a.forEach((t=>{e+=Number(t.size)})),c=t.text(nt.getQuantityString("recent_chat__last_message__files",a.length)+(e>0?`, ${ki.pretty_size(e)}`:""))}if(o.length>0){let e=0;o.forEach((t=>{e+=Number(t.size)})),c=t.text(nt.getQuantityString("recent_chat__last_message__images",o.length)+(e>0?`, ${ki.pretty_size(e)}`:""))}r.length>0&&(c=t.text(nt.getQuantityString("recent_chat__last_message__locations",r.length)))}this.$(".last-msg").html("").append(s).append(c)}else{if("system"==e.get("type"))s="",e.get("invite")&&(c=nt.getString("groupchat_invitation_to_group_chat",[this.contact&&this.contact.get("incognito_chat")?"incognito":"public"])),e.get("private_invite")&&(c=nt.getString("recent_chat__last_message__private_invitation")),c=this.model.get("group_chat")?Ci("<i/>").text(c):Ci("<span class=text-color-500/>").text(c),this.$(".last-msg").html(c),e.get("auth_request")&&nt.toolbar_view.recountAllMessageCounter();else if(n)if(e.get("message"))c=e.get("message"),this.$(".last-msg").text(c);else{let t=n[0];if(t.get("message")){let i=t.get("files")||[],n=t.get("images")||[],a=t.get("locations")||[];if(t.get("videos")&&t.get("videos").length&&(i=i.concat(t.get("videos"))),i.length||n.length||a.length){let t=Ci('<span class="text-color-500"/>');if("file_upload"===e.get("type")&&(n=i.filter((e=>e.type&&ki.isImageType(e.type))),i=i.filter((e=>!(e.type&&ki.isImageType(e.type))))),i.length&&n.length)c=t.text(nt.getString("recent_chat__last_message__attachments",[i.length+n.length]));else{if(1==i.length&&(i[0].is_audio||i[0].voice))c=t.text(`${nt.getString("voice_message")}, `+ki.pretty_duration(i[0].duration));else if(i.length>0){let e=0;i.forEach((t=>{e+=Number(t.size)})),c=t.text(nt.getQuantityString("recent_chat__last_message__files",i.length)+(e>0?`, ${ki.pretty_size(e)}`:""))}if(n.length>0){let e=0;n.forEach((t=>{e+=Number(t.size)})),c=t.text(nt.getQuantityString("recent_chat__last_message__images",n.length)+(e>0?`, ${ki.pretty_size(e)}`:""))}a.length>0&&(c=t.text(nt.getQuantityString("recent_chat__last_message__locations",a.length)))}this.model.get("group_chat")?this.$(".last-msg").html("").append(s).append("» ").append(c):this.$(".last-msg").html("» ").append(c)}else this.model.get("group_chat")?(c=t.get("message"),c="» "+c,this.$(".last-msg").text(c)):(c=t.get("message"),this.$(".last-msg").text(c),s="» ")}else if(1===n.length){let e=nt.getQuantityString("forwarded_messages_count",n.length).slice(2);e=e.charAt(0).toUpperCase()+e.slice(1),c=Ci("<i/>").text(e),this.$(".last-msg").html("» ").append(c)}else c=Ci("<i/>").text(nt.getQuantityString("forwarded_messages_count",n.length)),this.$(".last-msg").html("» ").append(c)}else c=e.getText(),this.$(".last-msg").text(c);this.$(".last-msg").prepend(s)}e.get("not_encrypted")&&this.$(".last-msg").html(this.$(".last-msg").html().italics()),this.$el.emojify(".last-msg",{emoji_size:16}).hyperlinkify({decode_uri:!0}),this.$(".last-msg-date").text(ki.pretty_short_datetime_recent_chat(t)),this.$(".msg-delivering-state").showIf("system"!==e.get("type")&&e.isSenderMe()&&e.get("state")!==yi.MSG_ARCHIVED&&!e.get("notification_msg")).attr("data-state",e.getState())},openByClick:function(){this.open()},open:function(e){this.content||(this.content=new nt.ChatContentView({chat_item:this})),e||(e={right_contact_save:!0,clear_search:!1}),nt.chats_view.openChat(this,e),this.content.bottom.click_counter=0,this.content.bottom.setDefaultPlaceholder()},removeInvite:function(e){if(!this.account.server_features.get(Ii.NS.REWRITE))return;e||(e={});let t=Ei.clone(this.model.messages.models);this.model.set({last_archive_id:void 0,first_archive_id:void 0}),t.forEach((e=>{if(e.get("invite")){let t=Si({type:"set",to:this.account.get("jid")}).c("retract-message",{id:e.get("stanza_id"),xmlns:Ii.NS.REWRITE,type:Ii.NS.SYNCHRONIZATION_REGULAR_CHAT,symmetric:!1});this.account.sendIQFast(t),e&&this.content.removeMessage(e)}})),this.model.recountUnread(),delete this.contact.attributes.invitation,this.updateIcon()},onClosed:function(){this.parent.onChatRemoved(this.model,{soft:!0})}}),nt.MessagesView=nt.BasicView.extend({template:xi.chat_content,ps_selector:".chat-content",ps_settings:{wheelPropagation:!0},avatar_size:yi.AVATAR_SIZES.CHAT_MESSAGE,_initialize:function(e){this.model=e.model,this.contact=e.contact,this.account=this.model.account;let t=this.account.settings.get("color");this.$el.attr("data-color",t),this.$search_form=this.$(".search-form-header"),this.loading_history=!1,this.history_loaded=!1,this.first_msg_id=0,this.last_msg_id=0,this._scrolltop=this.getScrollTop(),this.ps_container.on("ps-scroll-up ps-scroll-down",this.onScroll.bind(this)),this.chat_content=e.chat_content||this.model.item_view.content;let i=this.defineMouseWheelEvent();this.$el.on(i,this.onMouseWheel.bind(this)),this.$(".back-to-bottom").click(this.backToBottom.bind(this))},defineMouseWheelEvent:function(){return Ei.isUndefined(window.onwheel)?Ei.isUndefined(window.onmousewheel)?"MozMousePixelScroll":"mousewheel":"wheel"},keyupSearch:function(e){if(e.keyCode===yi.KEY_ENTER){let e=this.$search_form.find("input").val();this.model.searchMessages(e,(e=>{}))}e.keyCode!==yi.KEY_ESCAPE||nt.body.screen.get("right_contact")||this.chat_content.head.renderSearchPanel()},onMouseWheel:function(e){this.$(".back-to-bottom").hideIf(this.isScrolledToBottom())},onClickMessage:function(e){this.chat_content.onClickMessage(e)},onClickLink:function(e){this.chat_content.onClickLink(e)},onClickLocationLink:function(e){this.chat_content.onClickLocationLink(e)},onClickLocation:function(e){this.chat_content.onClickLocation(e)},onHoverLocation:function(e){this.chat_content.onHoverLocation(e)},onScroll:function(){this.$(".back-to-bottom").hideIf(this.isScrolledToBottom()),this._prev_scrolltop=this._scrolltop||this._prev_scrolltop||0,this._scrolltop=this.getScrollTop()||this._scrolltop||this._prev_scrolltop||0,!this.history_loaded&&!this.loading_history&&this._scrolltop<this._prev_scrolltop&&(this._scrolltop<100||this.getPercentScrolled()<.1)&&(this.loading_history=!0,this.messagesRequest({before:this.first_msg_id},(()=>{this.loading_history=!1})))},backToBottom:function(){this.openChat(),this.scrollToBottom(),this.$(".back-to-bottom").hideIf(this.isScrolledToBottom())},messagesRequest:function(){},emptyChat:function(){this.$(".chat-content").html(Ci('<span class="error"/>').text(nt.getString("no_messages")))},openChat:function(){this.model.item_view.open({right_contact_save:!0,clear_search:!1})},addMessageHTML:function(e,t,i,s){let n,a=this.getScrollBottom();0===i?e.prependTo(this.$(".chat-content")):e.insertAfter(this.$(".chat-message").eq(i-1)),i===s&&(n=this.getScrollTop());let o=e.nextAll(".chat-message").first();return this.chat_content.updateMessageInChat(e[0],t),o.length&&this.chat_content.updateMessageInChat(o[0]),this.chat_content.initPopup(e),n?this.scrollTo(n):this.scrollTo(this.ps_container[0].scrollHeight-this.ps_container[0].offsetHeight-a),e}}),nt.MessageContextView=nt.MessagesView.extend({className:"chat-content-wrap messages-context-wrap",events:{"click .chat-message":"onClickMessage","click .chat-msg-location-content":"onClickLocation","mouseover .chat-msg-location-content.no-title":"onHoverLocation","click .mdi-link-variant":"onClickLink","click .msg-copy-location":"onClickLocationLink","keyup .messages-search-form":"keyupSearch"},__initialize:function(e){e=e||{},this.stanza_id=e.stanza_id_context,this.encrypted=e.encrypted,this.mention_context=e.mention_context,this.model.item_view.content||(this.chat_content=new nt.ChatContentView({chat_item:this.model.item_view})),this.$history_feedback=this.$(".load-history-feedback"),this.account.context_messages=new nt.Messages(null,{account:this.account}),this.account.context_messages.on("change:last_replace_time",this.chat_content.updateMessage,this),this.account.context_messages.on("add",this.addMessage,this),this.account.context_messages.on("change:is_unread",this.onChangedReadState,this),nt.on("plyr_player_updated",this.onUpdatePlyr,this)},render:function(){this.scrollToTop(),this.onUpdatePlyr(),this.$(".back-to-bottom").hideIf(this.isScrolledToBottom()),this.encrypted&&this.$el.attr("data-trust",!0)},onMouseWheel:function(e){this.loading_history||(e.originalEvent.deltaY<0?this.first_history_loaded||(this.loading_history=!0,this.messagesRequest({before:this.first_msg_id},(()=>{this.loading_history=!1}))):this.last_history_loaded||(this.loading_history=!0,this.messagesRequest({after:this.last_msg_id},(()=>{this.loading_history=!1})))),this.$(".back-to-bottom").hideIf(this.isScrolledToBottom())},onScroll:function(){this.$(".back-to-bottom").hideIf(this.isScrolledToBottom()),this._prev_scrolltop=this._scrolltop||this._prev_scrolltop||0,this._scrolltop=this.getScrollTop()||this._scrolltop||this._prev_scrolltop||0,this._scrollbottom=this.getScrollBottom(),this.loading_history||(!this.first_history_loaded&&this._scrolltop<this._prev_scrolltop&&(this._scrolltop<100||this.getPercentScrolled()<.1)?(this.loading_history=!0,this.showHistoryFeedback(),this.messagesRequest({before:this.first_msg_id},(()=>{this.loading_history=!1,this.hideHistoryFeedback()}))):!this.last_history_loaded&&this._scrolltop>this._prev_scrolltop&&(this._scrollbottom<100||this.getPercentScrolled()>.9)&&(this.loading_history=!0,this.showHistoryFeedback(),this.messagesRequest({after:this.last_msg_id},(()=>{this.loading_history=!1,this.hideHistoryFeedback()})))),clearTimeout(this._onscroll_read_messages_timeout),this._onscroll_read_messages_timeout=setTimeout((()=>{this.chat_content.readVisibleMessages(!0)}),100)},onChangedReadState:function(e){let t=e.get("is_unread"),i=this.$(`.chat-message[data-uniqueid="${e.get("unique_id")}"]`);if(t){if(e.get("was_readen"))return;i.addClass("unread-message"),i.addClass("unread-message-background")}else e.set("was_readen",!0),i.removeClass("unread-message"),setTimeout((()=>{i.removeClass("unread-message-background")}),1e3)},showHistoryFeedback:function(){this.$history_feedback.text(nt.getString("loading_history")).removeClass("hidden")},hideHistoryFeedback:function(){this.$history_feedback.addClass("hidden")},messagesRequest:function(e,t){let i=[],s=e||{},n=Mi();!s.max&&(s.max=nt.settings.mam_messages_limit),!s.after&&!s.before&&(s.before="");let a=this.account.connection.addHandler((e=>(Ci(e).find("result").attr("queryid")===n&&i.push(e),!0)),Ii.NS.MAM);this.chat_content.MAMRequest(s,((e,i,n)=>{this.account.connection.deleteHandler(a),n&&(this.first_msg_id=n.first)&&(this.last_msg_id=n.last),s.after&&i.length<s.max&&(this.last_history_loaded=!0),s.before&&i.length<s.max&&(this.first_history_loaded=!0),Ci(i).each(((e,t)=>{let i=Ci(t);this.account.chats.receiveChatMessage(i,{context_message:!0})})),t&&t()}),(()=>{this.account.connection.deleteHandler(a)}))},addMessage:function(e){if(e.get("auth_request"))return;this.mention_context&&e.get("stanza_id")===this.stanza_id||e.set("is_archived",!0);let t=this.model.messages.find((t=>t.get("stanza_id")==e.get("stanza_id")||t.get("contact_stanza_id")==e.get("stanza_id")));t&&(t.get("is_unread")&&e.set("is_unread",t.get("is_unread")),t.get("is_unread_archived")&&e.set("is_unread_archived",t.get("is_unread_archived")));let i=this.chat_content.buildMessageHtml(e).addClass("context-message"),s=this.account.context_messages.indexOf(e);e.get("stanza_id")===this.stanza_id&&(i.addClass("message-from-context"),setTimeout((()=>{i.removeClass("message-from-context")}),3e3)),this.addMessageHTML(i,e,s,this.account.context_messages.findLastIndex())},onUpdatePlyr:function(e){if(this.$(".plyr-video-container").removeClass("active-plyr-container"),nt.current_plyr_player&&nt.current_plyr_player.player_item){let e=this.$(`.chat-message[data-uniqueid="${nt.current_plyr_player.message_unique_id}"]`);e.length&&e.find(`.plyr-video-container[data-message-id="${nt.current_plyr_player.player_item.message_id}"]`).addClass("active-plyr-container")}}}),nt.SearchedMessagesView=nt.MessagesView.extend({className:"chat-content-wrap searched-messages-wrap",events:{"click .chat-message":"onClickMessage","click .chat-msg-location-content":"onClickLocation","mouseover .chat-msg-location-content.no-title":"onHoverLocation","click .mdi-link-variant":"onClickLink","click .msg-copy-location":"onClickLocationLink","click .btn-cancel-searching":"openChat","keyup .messages-search-form":"keyupSearch"},__initialize:function(e){return this.query_text=e.query_text,this.account.searched_messages=new nt.Messages(null,{account:this.account}),this.account.searched_messages.on("change:last_replace_time",this.chat_content.updateMessage,this),this.account.searched_messages.on("add",this.addMessage,this),this},render:function(){this.$search_form.find("input").val(this.query_text),this.$search_form.slideToggle(10,(()=>{"none"!==this.$search_form.css("display")&&this.$search_form.find("input").focus(),this.scrollToBottom()})),this.$(".back-to-bottom").hideIf(this.isScrolledToBottom())},messagesRequest:function(e,t){let i=[],s=e||{},n=Mi();Ei.extend(s,{max:nt.settings.mam_messages_limit,before:e.before||"",var:[{var:"withtext",value:this.query_text}]});let a=this.account.connection.addHandler((e=>(Ci(e).find("result").attr("queryid")===n&&i.push(e),!0)),Ii.NS.MAM);this.chat_content.MAMRequest(s,((e,i,n)=>{this.account.connection.deleteHandler(a),n&&(this.first_msg_id=n.first),i.length||this.account.searched_messages.length||this.emptyChat(),i.length<s.max&&(this.history_loaded=!0),Ci(i).each(((e,t)=>{let i=Ci(t);this.account.chats.receiveChatMessage(i,{searched_message:!0})})),t&&t()}),(()=>{this.account.connection.deleteHandler(a)}))},addMessage:function(e){if(e.get("auth_request"))return;e.set("is_archived",!0);let t=this.chat_content.buildMessageHtml(e).addClass("searched-message"),i=this.account.searched_messages.indexOf(e);this.addMessageHTML(t,e,i)}}),nt.ContactSearchedMessagesView=nt.MessagesView.extend({template:xi.chat_content_contact,ps_settings:{wheelPropagation:!0},avatar_size:yi.AVATAR_SIZES.CHAT_MESSAGE,className:"chat-content-wrap searched-messages-wrap",events:{"click .chat-message":"onClickMessage","click .chat-msg-location-content":"onClickLocation","mouseover .chat-msg-location-content.no-title":"onHoverLocation","click .mdi-link-variant":"onClickLink","click .msg-copy-location":"onClickLocationLink","click .btn-cancel-searching":"openChat","keyup .messages-search-form":"keyupSearch","click .close-search-icon":"clearSearch","click .btn-back":"hideSearch"},_initialize:function(e){return this.model=e.model,this.contact=e.contact,this.account=this.model.account,this.$search_form=this.$(".search-form-header"),this.timer=null,this.loading_history=!1,this.history_loaded=!1,this.first_msg_id=0,this.last_msg_id=0,this.chat_content=e.chat_content||this.model.item_view.content,this.parent.model.set("search_hidden",!0),this},render:function(){this.account.searched_messages&&(this.searched_messages=this.account.searched_messages),this.account.searched_messages=new nt.Messages(null,{account:this.account}),this.searched_messages&&this.account.searched_messages.add(this.searched_messages.toJSON(),{silent:!0}),this.account.searched_messages.on("add",this.addMessage,this),this.parent.model.get("saved_search_panel")?(this.$el.html(this.parent.model.get("saved_search_panel")),this.model.set("saved_search_panel",void 0)):(this.emptyChat(),this.$el.html(this.template()),this.emptyChat(),this.parent.model.get("search_hidden")&&this.hideSearch()),this.ps_container=this.$(".search-messages-content-wrap"),this.ps_container.length&&this.ps_container.perfectScrollbar(Ei.extend(this.ps_settings||{},nt.ps_settings)),this.$search_form=this.$(".search-form-header"),this.parent.model.get("saved_search_panel")&&(this.$search_form.find("input").focus(),this.parent.model.get("saved_search_panel_scroll")&&this.scrollTo(this.parent.model.get("saved_search_panel_scroll")))},clearSearch:function(){this.$search_form.find("input").val(""),this.emptyChat()},keyupSearch:function(e){if(this.$(".close-search-icon").hideIf(!this.$search_form.find("input").val()),e.keyCode===yi.KEY_ENTER){this.emptyChat();let e=this.$search_form.find("input").val();this.$(".preloader-wrap").hideIf(!1),this.loading_timestamp=Number(Ti.now()),this.messagesRequest(e,this.loading_timestamp,void 0,[],((e,t)=>{}))}},emptyChat:function(){this.account.searched_messages&&this.account.searched_messages.reset(),this.$(".chat-content").html(""),this.$(".messages-count").hideIf(!0),this.$(".preloader-wrap").hideIf(!0),this.$(".search-results").hideIf(!0),this.$(".close-search-icon").hideIf(!0)},messagesRequest:function(e,t,i,s,n){if(!e||this.loading_timestamp!=t)return this.emptyChat(),!0;let a=[],o={},r=Mi();Ei.extend(o,{max:nt.settings.mam_messages_limit,var:[{var:"withtext",value:e}]}),i&&i.last&&Ei.extend(o,{after:i.last});let c=this.account.connection.addHandler((e=>(Ci(e).find("result").attr("queryid")===r&&a.push(e),!0)),Ii.NS.MAM);this.chat_content.MAMRequest(o,((i,a,r)=>{if(this.account.connection.deleteHandler(c),r&&(this.first_msg_id=r.first),a.length||this.account.searched_messages.length||this.emptyChat(),a.length<o.max&&(this.history_loaded=!0),s=s.concat(a),a.length==o.max){if(this.parent&&this.parent.data&&!this.parent.data.get("visible")||this.parent.model.get("search_hidden"))return;this.messagesRequest(e,t,r,s,((e,t)=>{}))}else if(s.length==r.count)if(0!=r.count){let t=r.count;this.emptyChat(),Ci(s).each(((i,s)=>{let n=Ci(s);n.find(`propose[xmlns="${Ii.NS.JINGLE_MSG}"]`).length&&t--,this.account.chats.receiveChatMessage(n,{searched_message:!0,searched_in_contact_messages:!0,query:e})})),this.$(".messages-count").hideIf(!t),this.$(".close-search-icon").hideIf(!t),this.$(".search-results").hideIf(t),this.$(".messages-count").text(nt.getQuantityString("searched_messages_count",t))}else this.emptyChat(),this.$(".close-search-icon").hideIf(!1),this.$(".search-results").hideIf(!1);n&&n(a,r)}),(()=>{this.account.connection.deleteHandler(c)}))},addMessageHTML:function(e,t,i,s){e.prependTo(this.$(".chat-content")),i===s&&(scrolled_from_top=this.getScrollTop());e.nextAll(".chat-message").first();return e},addMessage:function(e){if(!this.parent.model.get("search_hidden")){if(e.get("auth_request")||!e.get("searched_in_contact_messages"))return;e.set("is_archived",!0),e.set("searched_message",!0);let t=this.chat_content.buildMessageHtml(e).addClass("searched-message"),i=this.account.searched_messages.indexOf(e);this.chat_content.showMessageAuthor(t),this.addMessageHTML(t,e,i)}},hideSearch:function(e){this.parent.model.set("search_hidden",!0),this.$(".search-input").val(""),this.emptyChat(),this.parent.ps_container.length&&this.parent.ps_container.perfectScrollbar(Ei.extend(this.parent.ps_settings||{},nt.ps_settings)),this.$(".search-wrap").hideIf(this.parent.model.get("search_hidden"))},onClickMessage:function(e){let t=Ci(e.target).closest(".chat-message");this.parent.model.set("saved_search_panel_scroll",this.ps_container[0].scrollTop),this.ps_container.perfectScrollbar("destroy"),this.parent.model.set("saved_search_panel",this.$el.clone()),this.model.getMessageContext(t.data("uniqueid"),{searched_messages:!0})}}),nt.ParticipantMessagesView=nt.MessagesView.extend({className:"chat-content-wrap participant-messages-wrap",events:{"click .chat-message":"onClickMessage","click .chat-msg-location-content":"onClickLocation","mouseover .chat-msg-location-content.no-title":"onHoverLocation","click .mdi-link-variant":"onClickLink","click .msg-copy-location":"onClickLocationLink","click .btn-cancel-selection":"openChat","click .btn-retract-messages":"retractMessages","keyup .messages-search-form":"keyupSearch"},__initialize:function(e){return this.participant=e.participant,this.member_jid=this.participant.jid,this.member_id=this.participant.id,this.member_nickname=this.participant.nickname,this.account.participant_messages=new nt.Messages(null,{account:this.account}),this.account.participant_messages.on("add",this.addMessage,this),this.account.participant_messages.on("change:last_replace_time",this.chat_content.updateMessage,this),this.ps_container.on("ps-scroll-y",this.onScrollY.bind(this)),this},render:function(){this.$(".chat-content").css("height","calc(100% - 32px)"),this.$(".participant-messages-header .messages-by-header .participant-nickname").text(this.member_nickname),this.$(".participant-messages-header").removeClass("hidden"),this.scrollToBottom(),this.$(".back-to-bottom").hideIf(this.isScrolledToBottom())},onScrollY:function(){},retractMessages:function(){ki.dialogs.ask(nt.getString("dialog_delete_user_messages__header"),nt.getString("dialog_delete_user_messages__confirm",[this.member_nickname||this.member_jid||this.member_id]),null,{ok_button_text:nt.getString("delete")}).done((e=>{e&&this.member_id&&this.chat_content.model.retractMessagesByUser(this.member_id,(()=>{this.openChat()}))}))},messagesRequest:function(e,t){let i=[],s=e||{},n=this.member_id,a=Mi();Ei.extend(s,{max:nt.settings.mam_messages_limit,before:e.before||"",var:[{var:"with",value:n}]});let o=this.account.connection.addHandler((e=>(Ci(e).find("result").attr("queryid")===a&&i.push(e),!0)),Ii.NS.MAM);this.chat_content.MAMRequest(s,((e,i,n)=>{this.account.connection.deleteHandler(o),n&&(this.first_msg_id=n.first),i.length||this.account.participant_messages.length||this.emptyChat(),i.length<s.max&&(this.history_loaded=!0),Ci(i).each(((e,t)=>{let i=Ci(t);this.account.chats.receiveChatMessage(i,{participant_message:!0})})),t&&t()}),(()=>{this.account.connection.deleteHandler(o)}))},addMessage:function(e){if(e.get("auth_request"))return;e.set("is_archived",!0);let t=this.chat_content.buildMessageHtml(e).addClass("participant-message"),i=this.account.participant_messages.indexOf(e);this.addMessageHTML(t,e,i)}}),nt.SubscriptionButtonsView=nt.BasicView.extend({template:xi.subscription_buttons,events:{"click .btn-decline":"declineSubscription","click .btn-allow":"allowSubscription","click .btn-add":"addContact","click .btn-subscribe":"addContact","click .btn-block":"blockContact"},_initialize:function(e){this.$el.html(this.template()),this.contact=e.contact,this.contact.on("change:subscription",this.render,this),this.contact.on("change:in_roster",this.render,this),this.contact.on("change:blocked",this.render,this),this.contact.on("change:subscription_request_in",this.render,this),this.contact.on("change:subscription_request_out",this.render,this)},render:function(){if(this.$el.closest(".chat-content-wrap").children(".chat-content").removeClass("with-before"),this.contact.get("group_chat"))return void this.$el.addClass("hidden");let e=this.contact.get("subscription"),t=this.contact.get("subscription_request_in"),i=this.contact.get("in_roster"),s=this.contact.get("subscription_request_out");if(this.$(".button").removeClass("hidden"),this.$(".subscription-info").text(""),this.$el.addClass("hidden"),"both"!==e&&!this.contact.get("blocked")){if("to"===e&&t||"none"===e&&t&&i)this.$(".subscription-info").text(nt.getString("subscription_status_in_request_incoming")),this.$(".button:not(.btn-allow)").addClass("hidden");else if(s||i||t||"from"!==e&&"none"!==e){if(!(void 0===e||"none"===e&&t))return;this.$(".button:not(.btn-add):not(.btn-block)").addClass("hidden")}else this.$(".subscription-info").text(nt.getString("chat_subscribe_request_outgoing")),this.$(".button:not(.btn-subscribe)").addClass("hidden");this.$el.removeClass("hidden"),this.$el.closest(".chat-content-wrap").children(".chat-content").addClass("with-before")}},hideElement:function(){this.$el.addClass("hidden"),this.$el.closest(".chat-content-wrap").children(".chat-content").removeClass("with-before")},declineSubscription:function(){this.contact.declineSubscribe(),this.contact.set("subscription_request_in",!1),this.hideElement()},allowSubscription:function(){this.contact.acceptRequest(),this.hideElement()},addContact:function(){void 0===this.contact.get("subscription")?this.contact.pushInRoster(null,(()=>{this.sendAndAskSubscription()})):this.sendAndAskSubscription(),this.hideElement()},sendAndAskSubscription:function(){this.contact.askRequest(),this.contact.acceptRequest()},blockContact:function(){this.contact.blockRequest(),this.hideElement()}}),nt.ChatContentView=nt.BasicView.extend({className:"chat-content-wrap",template:xi.chat_content,ps_selector:".chat-content",ps_settings:{wheelPropagation:!0},avatar_size:yi.AVATAR_SIZES.CHAT_MESSAGE,events:{"mousedown .chat-message":"onTouchMessage","click .chat-message":"onClickMessage","click .chat-msg-location-content":"onClickLocation","mouseover .chat-msg-location-content.no-title":"onHoverLocation","click .mdi-link-variant":"onClickLink","click .msg-copy-location":"onClickLocationLink","click .pinned-message":"showPinnedMessage","keyup .messages-search-form":"keyupSearch","click .btn-cancel-searching":"cancelSearch","click .back-to-bottom":"backToBottom","click .back-to-unread:not(.back-to-bottom)":"scrollToUnreadWithButton","click .btn-retry-send-message":"retrySendMessage","click .btn-delete-message":"removeFileErrorMessage","click .not-decrypted-tooltip .btn-manage-devices":"openDevicesWindow","click .encryption-warning":"openDevicesWindow"},_initialize:function(e){this.chat_item=e.chat_item,this.current_day_indicator=null,this._pending_avatars=[],this.account=this.chat_item.account,this.model=this.chat_item.model,this.contact=this.model.contact,this.head=this.model.get("saved")?new nt.SavedChatHeadView({content:this}):new nt.ChatHeadView({content:this}),this.bottom=new nt.ChatBottomView({content:this}),this.$history_feedback=this.$(".load-history-feedback"),this.$pinned_message=this.$(".pinned-message"),this.$search_form=this.$(".search-form-header"),this.$el.attr("data-id",this.model.id),this.updateContentColorScheme(),(this.model.sync_created&&this.model.last_message||e.new_message&&!e.new_message.get("synced_from_server")&&e.new_message.get("encrypted")&&this.model.get("encrypted"))&&(this.model.last_message&&this.onMessage(this.model.last_message),e.new_message&&(this.onMessage(e.new_message),this.onChangedReadState(e.new_message))),this._scrolltop=this.getScrollTop(),this._is_scrolled_bottom=!0,this._long_reading_timeout=!1;let t=this.defineMouseWheelEvent();return this.$el.on(t,this.onMouseWheel.bind(this)),this.ps_container.on("ps-scroll-up ps-scroll-down",this.onScroll.bind(this)),this.ps_container.on("ps-scroll-y",this.onScrollY.bind(this)),this.model.on("change:active change:idle",this.onChangedActiveStatus,this),nt.on("change:idle change:focused",this.onChangedIdleStatus,this),this.model.on("load_last_history",this.loadLastHistory,this),this.model.on("get_missed_history",this.requestMissedMessages,this),this.model.messages.on("add",this.onMessage,this),this.model.messages.on("change:is_unread",this.onChangedReadState,this),this.model.messages.on("change:timestamp",this.onChangedMessageTimestamp,this),this.model.messages.on("change:trusted",this.onTrustedChanged,this),this.model.messages.on("change:last_replace_time",this.updateMessage,this),this.model.on("change:unread",this.updateCounter,this),this.model.on("change:const_unread",this.updateCounter,this),this.contact&&(this.subscription_buttons=new nt.SubscriptionButtonsView({contact:this.contact,el:this.$(".subscription-buttons-wrap")[0]}),this.contact.on("change:blocked",this.updateBlockedState,this),this.contact.on("change:subscription",this.onSubscriptionChange,this),this.contact.on("change:group_chat",this.updateGroupChat,this),this.contact.on("remove_from_blocklist",this.loadLastHistory,this),this.contact.on("update_trusted",this.updateMsgsMissingDevices,this),this.account.contacts.on("change:name",this.updateName,this),this.account.contacts.on("change:image",this.updateAvatar,this)),this.account.on("change",this.updateMyInfo,this),this.account.on("device_trusted",this.updateMsgsDeviceTrusting,this),this.account.settings.on("change:color",this.updateContentColorScheme,this),nt.on("plyr_player_updated",this.onUpdatePlyr,this),this.account.dfd_presence.done((()=>{!this.account.connection.do_synchronization&&this.loadLastHistory()})),this},render:function(){this.cancelSearch(),this._prev_scrolltop?this.scrollTo(this._prev_scrolltop):this.scrollToBottom(),this.onScroll(),this.updateCounter(),this.updateContactStatus(),this.updateWaveforms(),this.onUpdatePlyr(),this.contact&&(this.contact.get("group_chat")&&this.updatePinnedMessage(),this.subscription_buttons.render()),nt.chat_body.updateBodyNotifications(this.model)},openDevicesWindow:function(){if(!this.account.omemo)return;this.account.omemo.getPeer(this.contact.get("jid")).fingerprints.open()},defineMouseWheelEvent:function(){return Ei.isUndefined(window.onwheel)?Ei.isUndefined(window.onmousewheel)?"MozMousePixelScroll":"mousewheel":"wheel"},updateMyInfo:function(){let e=this.account.changed;Ei.has(e,"name")&&this.updateMyName(),Ei.has(e,"status")&&this.updateMyStatus(),Ei.has(e,"image")&&this.updateMyAvatar()},updateMsgsDeviceTrusting:function(e,t){this.model.get("encrypted")&&e&&this.contact&&this.contact.get("jid")===t&&this.$(`.not-decrypted-icon[data-device-id="${e}"]`).each(((e,t)=>{let i=Ci(t).closest(".chat-message");i.removeClass("not-verified"),i.addClass("not-verified-previously")}))},updateMsgsMissingDevices:function(e,t){this.model.get("encrypted")&&t&&this.contact&&this.$(".chat-message:not(.not-existing-device)").each(((e,i)=>{let s=Ci(i);s.attr("data-device-id")&&!t.devices[s.attr("data-device-id")]&&s.attr("data-from")!=this.account.get("jid")&&(s.hasClass("not-verified")&&s.addClass("not-verified-previously"),s.removeClass("not-verified"),s.addClass("not-existing-device"))}))},updateContentColorScheme:function(){let e=this.account.settings.get("color");this.$el.attr("data-color",e),this.head.$el.attr("data-color",e),this.bottom.$el.attr("data-color",e)},onTrustedChanged:function(e){let t=e.get("trusted");null===t&&(t="none"),this.$('.chat-message[data-uniqueid="'+e.get("unique_id")+'"]').attr("data-trust",t)},updateGroupChat:function(){this._loading_history=!1,this.model.set("history_loaded",!1)},onSubscriptionChange:function(){"both"===this.contact.get("subscription")&&this.contact.get("group_chat")&&(this.updateGroupChat(),this.loadPreviousHistory(),this.model.get("active")&&this.onChangedActiveStatus())},cancelSearch:function(){this.$search_form.hide().find("input").val("")},updateContactStatus:function(){if("offline"==this.head.$(".contact-status").attr("data-status")&&this.contact.get("last_seen")){let e=(Ti.now()-this.contact.get("last_seen"))/1e3,t=nt.pretty_last_seen(e);this.contact.set({status_message:t})}},updateWaveforms:function(){this.model.plyr_players.forEach((function(e){e.$audio_elem&&e.$audio_elem.voice_message&&e.$audio_elem.voice_message.backend&&e.$audio_elem.voice_message.backend.buffer&&e.$audio_elem.voice_message.drawBuffer()}))},updatePinnedMessage:function(){let e=this.contact.get("pinned_message");this.contact.renderPinnedMessage(e,this.$pinned_message)},onChangedVisibility:function(){this.isVisible()?this.model.set({display:!0,active:!0}):this.model.set({display:!1})},onChangedIdleStatus:function(e){this.model.get("active")&&this.model.set("idle",nt.get("idle")||!nt.get("focused"))},onChangedActiveStatus:function(){let e=this.model.get("active");this.model.get("active")&&this.model.get("idle")&&(e=!1),this.sendChatState(e?"active":"inactive"),this.model.get("group_chat")&&!this.contact.get("invitation")&&(e?this.contact.setActiveStateSendInterval():(clearTimeout(this.contact._sending_active_chatstate_timeout),clearInterval(this.contact._sending_active_chatstate_interval)))},updateName:function(e){let t=e.get("name"),i=e.get("jid");e===this.contact?this.$(`.chat-message.with-author[data-from="${i}"]`).each((function(){Ci(this).find(".chat-msg-author").text(t)})):this.$(`.fwd-message.with-author[data-from="${i}"]`).each((function(){Ci(this).find(".fwd-msg-author").text(t)}))},updateAvatar:function(e){let t=e.cached_image,i=e.get("jid");e===this.contact?this.$(`.chat-message.with-author[data-from="${i}"]`).each((function(){Ci(this).find(".left-side .circle-avatar").setAvatar(t,this.avatar_size)})):this.$(`.fwd-message.with-author[data-from="${i}"]`).each((function(){Ci(this).find(".fwd-left-side .circle-avatar").setAvatar(t,this.avatar_size)}))},updateMyStatus:function(){let e;this.account.isOnline()||(e=nt.getString("connection_status__you_are_offline")),this.bottom.showChatNotification(e||"",!0)},updateMyName:function(){let e=this.account.get("name"),t=this.account.get("jid");this.$(`.chat-message.with-author[data-from="${t}"]`).each((function(){Ci(this).find(".chat-msg-author").text(e)})),this.$(`.fwd-message.with-author[data-from="${t}"]`).each((function(){Ci(this).find(".fwd-msg-author").text(e)}))},updateMyAvatar:function(){let e=this.account.cached_image,t=this.account.get("jid");this.$(`.chat-message.with-author[data-from="${t}"]`).each((function(){Ci(this).find(".left-side .circle-avatar").setAvatar(e,this.avatar_size)})),this.$(`.fwd-message.with-author[data-from="${t}"]`).each((function(){Ci(this).find(".fwd-left-side .circle-avatar").setAvatar(e,this.avatar_size)}))},updateBlockedState:function(){this.model.get("blocked")&&this.model.showBlockedRequestMessage(),this.isVisible()&&(nt.body.setScreen(nt.body.screen.get("name"),{right:"chat",chat_item:this.chat_item,blocked:this.model.get("blocked")}),this.updateScrollBar())},readVisibleMessages:function(e){let t=e?this.model.messages_view:this;if(t.isVisible()&&t.$(".chat-message.unread-message").length&&nt.get("focused")&&!nt.get("idle")){let i;t.$(".chat-message.unread-message").each(((e,s)=>{Ci(s).isVisibleInContainer(t.$(".chat-content"))&&(i=s)})),i&&this.readMessage(this.model.messages.get(Ci(i).data("uniqueid")),Ci(i),e)}},hideMessagesAfterSkipping:function(){if(this.model.get("last_sync_unread_id")&&this.model.get("synced_msg")){let e=this.model.get("synced_msg"),t=this.$(`.chat-message[data-uniqueid="${e.get("unique_id")}"]`);t.addClass("after-skip-message"),t.prevAll(".chat-message.after-skip-message").removeClass("after-skip-message"),t.nextAll(".chat-message:not(.after-skip-message)").addClass("after-skip-message")}else this.$(".chat-message.after-skip-message").removeClass("after-skip-message")},readMessage:function(e,t,i){if(clearTimeout(this._read_last_message_timeout),this._read_last_message_timeout=setTimeout((()=>{if(this.model.sendMarker(e.get("msgid"),"displayed",e.get("stanza_id"),e.get("contact_stanza_id"),e.get("encrypted")&&e.get("ephemeral_timer")),this.model.set("last_read_msg",e.get("stanza_id")),this.model.set("prev_last_read_msg",e.get("stanza_id")),i){let e=Ei.clone(this.account.context_messages.models).filter((e=>Boolean(e.get("is_unread"))||Boolean(e.get("is_unread_archived"))));Ei.each(e,(e=>{let t=this.model.messages.find((t=>t.get("stanza_id")==e.get("stanza_id")||t.get("contact_stanza_id")==e.get("stanza_id")));t&&(e.set("is_unread",t.get("is_unread")),e.set("is_unread_archived",t.get("is_unread_archived")))})),setTimeout((()=>{t.removeClass("unread-message-background")}),1e3)}nt.toolbar_view.recountAllMessageCounter()}),1e3),e.get("is_unread_archived")||this.model.last_message&&e.get("unique_id")===this.model.last_message.get("unique_id")||this.model.get("const_unread")){let t=Ei.clone(this.model.messages.models).filter((e=>Boolean(e.get("is_unread")))),i=0;Ei.each(t,(t=>{t.get("timestamp")<=e.get("timestamp")&&(t.set("is_unread",!1),i++)})),i=this.model.get("const_unread")-i,i<0&&(i=0),this.model.set("unread",0),this.model.set("const_unread",i)}else{let t=Ei.clone(this.model.messages_unread.models);Ei.each(t,(t=>{t.get("timestamp")<=e.get("timestamp")&&t.set("is_unread",!1)}))}nt.toolbar_view.recountAllMessageCounter(),i||setTimeout((()=>{t.removeClass("unread-message-background")}),1e3)},readMessages:function(e){let t=Ei.clone(this.model.messages_unread.models);if(t.length){let e=t[t.length-1];this.model.sendMarker(e.get("msgid"),"displayed",e.get("stanza_id"),e.get("contact_stanza_id"),e.get("encrypted")&&e.get("ephemeral_timer")),this.model.set("last_read_msg",e.get("stanza_id")),this.model.set("prev_last_read_msg",e.get("stanza_id"))}if(this.model.set("const_unread",0),this.model.set("show_new_unread",!1),Ei.each(t,(t=>{(!e||t.get("timestamp")<=e)&&t.set("is_unread",!1)})),this.model.last_message&&this.model.last_message.get("is_unread")&&!t.length){let e=this.model.last_message;this.model.sendMarker(e.get("msgid"),"displayed",e.get("stanza_id"),e.get("contact_stanza_id"),e.get("encrypted")&&e.get("ephemeral_timer")),e.set("is_unread",!1),e.get("stanza_id")&&this.model.set("last_read_msg",e.get("stanza_id")),e.get("stanza_id")&&this.model.set("prev_last_read_msg",e.get("stanza_id"))}else if(this.model.last_message&&this.model.last_message.get("auth_request")&&this.model.messages.length){let e=Ei.clone(this.model.messages.models),t=e[e.length-2];t&&t.get("is_unread")&&(this.model.sendMarker(t.get("msgid"),"displayed",t.get("stanza_id"),t.get("contact_stanza_id"),t.get("encrypted")&&t.get("ephemeral_timer")),t.set("is_unread",!1),t.get("stanza_id")&&this.model.set("last_read_msg",t.get("stanza_id")),t.get("stanza_id")&&this.model.set("prev_last_read_msg",t.get("stanza_id")))}if(!t.length){let e=Ei.clone(this.model.messages.models).filter((e=>Boolean(e.get("is_unread"))));Ei.each(e,(e=>{e.set("is_unread",!1)}))}},showUnreadMarker:function(){if(this.$(".unread-marker").remove(),this.$(".chat-message.unread-message").length){let e=nt.getQuantityString("new_chat_messages_no_number",this.model.get("const_unread")+this.model.get("unread"));Ci(xi.unread_marker({text:e})).insertBefore(this.$(".chat-message.unread-message:first"))}},onMouseWheel:function(e){e.originalEvent.deltaY<0&&this.loadPreviousHistory(),this.$(".back-to-bottom:not(.back-to-unread)").hideIf(this.isScrolledToBottom()||this.$(".chat-message.unread-message").length),this.$(".back-to-unread").showIf(!this.isScrolledToBottom()&&this.$(".chat-message.unread-message").length),this.$(".back-to-unread").removeClass("back-to-bottom")},keyupSearch:function(e){if(e.keyCode===yi.KEY_ENTER){let e=this.$search_form.find("input").val();this.model.searchMessages(e,(e=>{}))}e.keyCode!==yi.KEY_ESCAPE||nt.body.screen.get("right_contact")||this.head.renderSearchPanel()},scrollToUnread:function(){let e=this.$(".chat-message.unread-message:first");if(e.length&&this.scrollTo(this.getScrollTop()-.2*this.$el.height()+e.offset().top),this.model.get("last_sync_unread_id")){let e={fast:!0,max:nt.settings.mam_messages_limit,after:this.model.get("last_sync_unread_id")};this.model.get("synced_msg")&&(e.var=[{var:"after-id",value:this.model.get("last_sync_unread_id")},{var:"before-id",value:this.model.get("synced_msg").get("stanza_id")}]),this.getMessageArchive(e,{unread_history:!0})}},scrollToUnreadWithButton:function(){this.scrollToUnread(),this.$(".back-to-unread").addClass("back-to-bottom")},updateCounter:function(){let e=this.model.get("unread")+this.model.get("const_unread");this.$(".back-to-unread-counter").text(e||""),this.$(".back-to-unread").showIf(!this.isScrolledToBottom()&&this.$(".chat-message.unread-message").length)},onScrollY:function(){this._prev_scrolltop=this._scrolltop||this._prev_scrolltop||0,this._scrolltop=this.getScrollTop()||this._scrolltop||this._prev_scrolltop||0,this._is_scrolled_bottom=this.isScrolledToBottom(),0===this._scrolltop&&this.$(".subscription-buttons-wrap").hasClass("hidden")&&(this.$(".fixed-day-indicator-wrap").css("opacity",1),this.current_day_indicator=Ni(parseInt(this.$(".chat-content").children().first().data("time"))),this.showDayIndicator(this.current_day_indicator)),this.$(".back-to-bottom:not(.back-to-unread)").hideIf(this.isScrolledToBottom()||this.$(".chat-message.unread-message").length),this.$(".back-to-unread").showIf(!this.isScrolledToBottom()&&this.$(".chat-message.unread-message").length),this.$(".back-to-unread").removeClass("back-to-bottom")},onScroll:function(e,t){if(!this.isVisible()||this._no_scrolling_event)return;this.$(".back-to-bottom:not(.back-to-unread)").hideIf(this.isScrolledToBottom()||this.$(".chat-message.unread-message").length),this.$(".back-to-unread").showIf(!this.isScrolledToBottom()&&this.$(".chat-message.unread-message").length),this.$(".back-to-unread").removeClass("back-to-bottom");let i,s,n=this.$(".chat-day-indicator"),a=this.$(".chat-message");if(this.$(".unread-marker").length){let e=this.$(".unread-marker");e[0].offsetTop<this._scrolltop&&e.remove()}n.each(((e,t)=>{if(this.$(".subscription-buttons-wrap").hasClass("hidden"))if(this._scrolltop<this._prev_scrolltop){if(t.offsetTop<=this._scrolltop&&t.offsetTop>=this._scrolltop-30)return i=e,s=0,!1;if(t.offsetTop>=this._scrolltop&&t.offsetTop<=this._scrolltop-30)return i=e&&e-1,s=1,!1}else{if(t.offsetTop<=this._scrolltop+30&&t.offsetTop>=this._scrolltop)return i=e&&e-1,s=0,!1;if(t.offsetTop>=this._scrolltop-30&&t.offsetTop<=this._scrolltop)return i=e,s=1,!1}else if(!Ci(t).hasClass("fixed-day-indicator-wrap"))if(this._scrolltop<this._prev_scrolltop){if(t.offsetTop>=this._scrolltop+30&&t.offsetTop<=this._scrolltop+62)return i=e,s=0,!1;if(t.offsetTop>=this._scrolltop&&t.offsetTop<=this._scrolltop+62)return i=e,s=1,!1}else{if(t.offsetTop<=this._scrolltop+62&&t.offsetTop>=this._scrolltop+30)return i=e&&e-1,s=0,!1;if(t.offsetTop>=this._scrolltop-62&&t.offsetTop<=this._scrolltop+30)return i=e,s=1,!1}})),i?(this.$(".fixed-day-indicator-wrap").css("opacity",s),this.current_day_indicator=Ni(parseInt(Ci(n[i]).attr("data-time")))):(a.each(((e,t)=>{if(t.offsetTop+Ci(t).height()>this._scrolltop&&t.offsetTop<this._scrolltop)return i=e,s=1,!1})),i?(this.$(".fixed-day-indicator-wrap").css("opacity",s),this.current_day_indicator=Ni(parseInt(Ci(a[i]).attr("data-time")))):this.$(".subscription-buttons-wrap").hasClass("hidden")||0!=this._scrolltop||(s=0,this.$(".fixed-day-indicator-wrap").css("opacity",s))),null!==this.current_day_indicator&&this.showDayIndicator(this.current_day_indicator);let o=(this._long_reading_timeout,100);if(clearTimeout(this._onscroll_read_messages_timeout),this._onscroll_read_messages_timeout=setTimeout((()=>{this.readVisibleMessages()}),o),this._long_reading_timeout=!1,this._scrolltop<this._prev_scrolltop&&(this._scrolltop<100||this.getPercentScrolled()<.1)&&this.loadPreviousHistory(),this.hideMessagesAfterSkipping(),this._scrolltop>this._prev_scrolltop&&this.model.get("last_sync_unread_id")&&this.getPercentScrolled()>.2){let e={fast:!0,max:nt.settings.mam_messages_limit,after:this.model.get("last_sync_unread_id")};this.model.get("synced_msg")&&(e.var=[{var:"after-id",value:this.model.get("last_sync_unread_id")},{var:"before-id",value:this.model.get("synced_msg").get("stanza_id")}]),this.getMessageArchive(e,{unread_history:!0})}},backToBottom:function(){this.model.set("last_sync_unread_id",void 0),this.hideMessagesAfterSkipping(),this._no_scrolling_event=!0,this.removeAllMessagesExceptLast(),this.readMessages(),this.model.resetUnread(),this.model.set("history_loaded",!1),this.loadPreviousHistory(),this._long_reading_timeout=!1,this._no_scrolling_event=!1,this.scrollToBottom()},MAMRequest:function(e,t,i){let s,n,a,o=this.account,r=this.contact,c=this.model.get("saved"),l=[],d=Mi(),h=r&&r.get("group_chat"),g=!0;if(delete e.fast,s=Si(h?{type:"set",to:r.get("full_jid")||r.get("jid")}:{type:"set"}),s.c("query",{xmlns:Ii.NS.MAM,queryid:d}).c("x",{xmlns:Ii.NS.DATAFORM,type:"submit"}).c("field",{var:"FORM_TYPE",type:"hidden"}).c("value").t(Ii.NS.MAM).up().up(),this.account.server_features.get(Ii.NS.ARCHIVE)){s.c("field",{var:"conversation-type"});let e=this.model.get("sync_type")?this.model.get("sync_type"):this.model.getConversationType(this.model);s.c("value").t(e).up().up()}h||s.c("field",{var:"with"}).c("value").t(this.model.get("jid")).up().up(),e.var&&e.var.forEach((e=>{s.c("field",{var:e.var}).c("value").t(e.value).up().up()})),s.up().cnode(new Ii.RSM(e).toXML());let u=new Ci.Deferred;o.chats.onStartedMAMRequest(u),u.done((function(){let p=function(e){a=e.addHandler((function(e){if(r&&h==r.get("group_chat")||c){Ci(e).find("result").attr("queryid")===d&&l.push(e)}else l=[],g=!1;return!0}),Ii.NS.MAM);let p=setTimeout((()=>{Ai.log("handler deleted"),e.deleteHandler(a)}),14e3),_=function(i){e.deleteHandler(a),clearTimeout(p),clearInterval(n),a=null,o.chats.onCompletedMAMRequest(u);let s=Ci(i).find(`fin[xmlns="${Ii.NS.MAM}"]`);if(s.length&&s.attr("queryid")===d){let e=new Ii.RSM({xml:s.find("set")[0]});e.complete="true"===s.attr("complete"),t&&t(g,l,e)}},v=function(t){e.deleteHandler(a),clearTimeout(p),clearInterval(n),a=null,nt.error("MAM error"),nt.error(t),o.chats.onCompletedMAMRequest(u),i&&i(t)};Ai.log("trying to send"),m?o.sendFast(s,_,v):o.sendIQ(s,_,v)},m=e.fast&&o.fast_connection&&!o.fast_connection.disconnecting&&o.fast_connection.authenticated&&o.fast_connection.connected&&"offline"!==o.get("status"),_=m?o.fast_connection:o.connection;_.connected&&p(_);let v=0;n=setInterval((()=>{if(m=e.fast&&o.fast_connection&&!o.fast_connection.disconnecting&&o.fast_connection.authenticated&&o.fast_connection.connected&&"offline"!==o.get("status"),_=m?o.fast_connection:o.connection,_&&Ai.log(_.connected),!_||v>=1)return clearInterval(n),void(i&&i("No connection or too many attempts"));_.connected&&v<1&&(v++,p(_))}),15e3)}))},getMessageArchive:function(e,t){if(t.previous_history||t.unread_history){if(this._loading_history||this.model.get("history_loaded"))return;this._loading_history=!0,clearTimeout(this._load_history_timeout),this._load_history_timeout=setTimeout((()=>{this._loading_history=!1}),6e4),this.showHistoryFeedback()}let i=this.model.account,s=0;this.MAMRequest(e,((n,a,o)=>{if(clearTimeout(this._load_history_timeout),this._loading_history=!1,this.hideHistoryFeedback(),t.missed_history&&!o.complete&&o.count>a.length&&this.getMessageArchive({after:o.last},{missed_history:!0}),t.notifications_last_msg&&!o.complete&&o.count>a.length&&this.getMessageArchive({fast:!0,max:nt.settings.mam_messages_limit,before:o.first,var:[{var:"after-id",value:t.notifications_last_msg}]},{notifications_last_msg:t.notifications_last_msg}),t.unread_history&&(a.length?this.model.set("last_sync_unread_id",Ci(a[a.length-1]).find(`result[xmlns="${Ii.NS.MAM}"]`).attr("id")):(this.model.set("last_sync_unread_id",void 0),this.hideMessagesAfterSkipping())),t.unread_history_first&&a.length){let t=Ci(a[0]).find(`result[xmlns="${Ii.NS.MAM}"]`).attr("id");this.model.set("first_unread_msg_stanza_id",t),a.length<e.max&&(this.model.set("last_sync_unread_id",void 0),this.hideMessagesAfterSkipping()),this.getMessageArchive({fast:!0,max:nt.settings.mam_messages_limit,before:t},{unread_history_before:!0})}if(this.model.get("group_chat")?this.contact&&!this.contact.my_info&&this.contact.getMyInfo():!this.contact||this.contact.get("last_seen")||this.contact.get("server")||this.contact.getLastSeen(),t.previous_history&&a.length<e.max&&n&&this.model.set("history_loaded",!0),(t.previous_history||t.unread_history_before||!this.model.get("first_archive_id"))&&o.first&&this.model.set("first_archive_id",o.first),!t.last_history&&this.model.get("last_archive_id")||o.last&&this.model.set("last_archive_id",o.last),Ei.each(a,(function(e){i.chats.receiveChatMessage(e,Ei.extend({is_archived:!0,is_unread_archived:!!t.unread_history||void 0},t))&&s++})),t.is_scrollToTop&&this.scrollToTop(),this.model.get("history_loaded")&&!this.model.messages.length&&this.model.item_view.updateEmptyChat(),0===s&&t.last_history&&!this.model.get("history_loaded")&&this.getMessageArchive(Ei.extend(e,{max:nt.settings.mam_messages_limit,before:this.model.get("first_archive_id")||""}),{previous_history:!0}),this.model.get("notifications")&&!this.model.get("history_loaded")){this.model.messages.filter((e=>!e.get("ignored"))).length<nt.settings.mam_messages_limit&&this.getMessageArchive({max:nt.settings.mam_messages_limit,fast:!0,before:this.model.get("first_archive_id")||""},{previous_history:!0})}t.unread_history_before&&(this.model.get("encrypted")?setTimeout((()=>{this.model._wait_load_unread_history.resolve()}),1e3):this.model._wait_load_unread_history.resolve()),t.unread_history_first&&!a.length&&(this.backToBottom(),this.model._wait_load_unread_history.resolve())}),(e=>{t.previous_history&&(this._loading_history=!1,this.showHistoryFeedback(!0)),(t.unread_history_before||t.unread_history_first)&&this.model._wait_load_unread_history.resolve()}))},requestMissedMessages:function(e){if(!e)return;let t={};t.var=[{var:"start",value:Ti(e).format()}],this.getMessageArchive(t,{missed_history:!0})},loadLastHistory:function(){if(!nt.settings.load_history)return;let e=this.model.get("last_archive_id"),t={};e?t.after=e:(t.before="",t.max=nt.settings.mam_messages_limit_start),this.getMessageArchive(t,{last_history:!0})},loadPreviousHistory:function(e){if(this.contact&&(!nt.settings.load_history||(!this.contact.get("subscription")||"both"!==this.contact.get("subscription"))&&this.contact.get("group_chat")))return;let t=this.model.get("first_archive_id")||"";e&&(t=""),this.getMessageArchive({fast:!0,max:nt.settings.mam_messages_limit,before:t},{previous_history:!0})},loadNotificationsHistoryToPreviousLastMsg:function(){if(this.contact&&(!nt.settings.load_history||(!this.contact.get("subscription")||"both"!==this.contact.get("subscription"))&&this.contact.get("group_chat")))return;let e=this.account.chat_settings.getNotificationsLastMsgId();this.model.get("first_archive_id");this.getMessageArchive({fast:!0,max:nt.settings.mam_messages_limit,before:"",var:[{var:"after-id",value:e}]},{notifications_last_msg:e})},loadUnreadHistory:function(){(!this.contact||nt.settings.load_history&&(this.contact.get("subscription")&&"both"===this.contact.get("subscription")||!this.contact.get("group_chat")))&&(this.model.set("loading_unread_history",!0),this.getMessageArchive({fast:!0,max:nt.settings.mam_messages_limit,after:this.model.get("last_read_msg")},{unread_history_first:!0,unread_history:!0}))},showHistoryFeedback:function(e){this._load_history_feedback_timeout&&(clearTimeout(this._load_history_feedback_timeout),this._load_history_feedback_timeout=null);let t=nt.getString(e?"loading_archived_messages_error":"loading_history");this.$history_feedback.text(t).removeClass("hidden"),e&&(this._load_history_feedback_timeout=setTimeout(this.hideHistoryFeedback.bind(this),5e3))},showDayIndicator:function(e){this.$(".fixed-day-indicator").text(e),this.$(".fixed-day-indicator-wrap").removeClass("hidden")},showPinnedMessage:function(e){if(Ci(e.target).hasClass("close"))this.unpinMessage();else{let e=this.contact.get("pinned_message"),t={};e.get("user_info")&&this.contact.participants&&(t=this.contact.participants.get(e.get("user_info").id)),t&&t.attributes&&e.set("user_info",t.attributes);let i=this.buildMessageHtml(e),s=new nt.ExpandedMessagePanel({account:this.account,chat_content:this,message:e,pinned:!0});s.$el.attr("data-color",this.account.settings.get("color")),this.updateMessageInChat(i,e),this.initPopup(i),s.open(i)}},imageOnload:function(e){let t=e.find(".img-content"),i=e.find(".mdi-link-variant");t.css("background-image","none"),i.attr({"data-image":"true"})},videoOnload:function(e,t){e.find(".mdi-link-variant").attr({"data-image":"true"}),this.initPlyrEmbedPlayer(e,t)},OGPLinkOnload:function(e,t){e.find(".mdi-link-variant").attr({"data-image":"true"})},locationOnload:function(e){let t=e.find(".msg-copy-location-content");t.html(wi.templates.svg["map-marker-outline"]()),t.attr({"data-location":"true"})},unpinMessage:function(){let e=Si({type:"set",to:this.contact.get("full_jid")||this.contact.get("jid")}).c("update",{xmlns:Ii.NS.GROUP_CHAT}).c("pinned-message");this.account.sendIQFast(e,(()=>{}),(e=>{Ci(e).find("error not-allowed").length&&ki.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it"))}))},loadLocationInChat:function(e,t){Promise.all([i.e(1216),i.e(3863)]).then(i.bind(i,43863)).then((i=>{i=i.default?i.default:i;let s=e.find(`#${t.id}`);if(!s.length)return;let n=new i.Map({target:s[0],view:new i.View({zoom:15,center:i.proj.transform([t.lon,t.lat],"EPSG:4326","EPSG:3857")}),interactions:i.interaction_defaults({altShiftDragRotate:!1,doubleClickZoom:!1,keyboard:!1,mouseWheelZoom:!1,shiftDragZoom:!1,dragPan:!1,pinchRotate:!1,pinchZoom:!1}),layers:[new i.layer.Tile({source:new i.source.OSM})]});n.once("rendercomplete",(function(e){let i=document.createElement("canvas"),s=n.getSize();i.width=s[0],i.height=s[1];let a=i.getContext("2d");if(Array.prototype.forEach.call(document.querySelectorAll(`#${t.id} .ol-layer canvas`),(function(e){if(e.width>0){let i=e.parentNode.style.opacity;a.globalAlpha=""===i?1:Number(i);let s=e.style.transform.match(/^matrix\(([^\(]*)\)$/)[1].split(",").map(Number);CanvasRenderingContext2D.prototype.setTransform.apply(a,s);let n=new Path2D("M 18 17.25 C 15.9289 17.25 14.25 15.5711 14.25 13.5 C 14.25 12.5054 14.6451 11.5516 15.3483 10.8483 C 16.0516 10.1451 17.0054 9.75 18 9.75 C 20.0711 9.75 21.75 11.4289 21.75 13.5 C 21.75 14.4946 21.3549 15.4484 20.6517 16.1517 C 19.9484 16.8549 18.9946 17.25 18 17.25 M 18 3 C 12.201 3 7.5 7.701 7.5 13.5 C 7.5 21.375 18 33 18 33 C 18 33 28.5 21.375 28.5 13.5 C 28.5 7.701 23.799 3 18 3 Z");a.fillStyle=getComputedStyle(document.querySelector(`#${t.id}`)).color,a.drawImage(e,0,0),a.translate(157,117),a.fill(n)}})),navigator.msSaveBlob)navigator.msSaveBlob(i.msToBlob(),"map.png");else{let e=document.getElementById(`img_${t.id}`),s=i.toDataURL("image/png");n.setTarget(null),n=null,e.src=s}}))}))},hideHistoryFeedback:function(){this.$history_feedback.addClass("hidden")},receiveNoTextMessage:function(e,t){let i=Ii.getBareJidFromJid(e.attr("from")),s=(Ii.getBareJidFromJid(e.attr("to")),i===this.account.get("jid")),n=e.find(`[xmlns="${Ii.NS.CHATSTATES}"]`);if(n.length&&!s){let e=n.children("subtype");if("encrypted"==e.attr("type")){let e=nt.chats_view.child(`${this.contact.hash_id}:encrypted`);e&&e.content&&e.content.showChatState(n[0].tagName.toLowerCase())}else this.showChatState(n[0].tagName.toLowerCase(),e.attr("type"),e.attr("mime-type"))}},showChatState:function(e,t,i){clearTimeout(this._chatstate_show_timeout);let s;this.contact.get("name");if("composing"!==e)return"paused"===e?void this.showChatState():(this.bottom.showChatNotification(""),void this.chat_item.updateLastMessage());if(t)if(this._current_composing_msg={type:t},"upload"===t){let e=i?ki.pretty_file_type_with_article(i):null;i&&(this._current_composing_msg.mime_type=i),s=e?nt.getString("chat_state_composing_upload_filetype",[e]):nt.getString("chat_state_composing_upload"),this._chatstate_show_timeout=setTimeout((()=>{this.showChatState()}),yi.CHATSTATE_TIMEOUT_PAUSED_AUDIO)}else"voice"===t&&(s=nt.getString("chat_state_composing_voice")),"video"===t&&(s=nt.getString("chat_state_composing_video")),this._chatstate_show_timeout=setTimeout((()=>{this.showChatState("paused",t)}),yi.CHATSTATE_TIMEOUT_PAUSED_AUDIO);else this._current_composing_msg=void 0,s=nt.getString("chat_state_composing"),this._chatstate_show_timeout=setTimeout((()=>{this.showChatState()}),yi.CHATSTATE_TIMEOUT_PAUSED);s?this.bottom.showChatNotification(`${this.contact.get("name")} ${s}`):this.bottom.showChatNotification(),this.model.get("saved")&&nt.toolbar_view.$(".toolbar-item.saved-chats.active").length||(this.model.get("saved")&&nt.toolbar_view.$(".toolbar-item.saved-chats.active").length||this.chat_item.$(".last-msg").text(s),this.chat_item.$(".last-msg-date").text(ki.pretty_short_datetime()).attr("title",ji()),this.chat_item.$(".msg-delivering-state").addClass("hidden"))},updateMentions:function(e){e.get("mentions")&&e.get("mentions").forEach((t=>{let i=t.target||"";if(this.contact.get("group_chat")||e.get("groupchat_jid")){let e=i.match(/\?id=\w*/),s=i.match(/\?jid=.*/);e&&this.contact.my_info?(i=e[0].slice(4),i===this.contact.my_info.get("id")&&(t.me=!0)):s&&(i=s[0].slice(5),i===this.account.get("jid")&&(t.me=!0))}else i=i.slice(5),i===this.account.get("jid")&&(t.me=!0)}))},onMessage:function(e){this.updateMentions(e),this.account.messages.add(e);let t,i,s=this.isScrolledToBottom(),n=this.getScrollBottom();e.get("notification_msg")&&e.get("notification_msg_content")&&this.data.get("notification_content")&&(t=Ci(e.get("notification_msg_content")),(e.get("notification_trust_msg")||t.children(`authenticated-key-exchange[xmlns="${Ii.NS.XABBER_TRUST}"]`).length)&&(t.find("verification-successful").length||t.find("verification-failed").length||(i=!0))),Ei.isUndefined(e.get("is_accepted"))||this.model.set("is_accepted",!1),this.model.set("opened",!0),e.get("is_archived")||e.get("is_unread_archived")||!e.get("stanza_id")||this.model.set("last_archive_id",e.get("stanza_id")),e.get("participants_version")&&this.contact.participants&&this.contact.participants.version<e.get("participants_version")&&this.contact.trigger("update_participants");let a=this.addMessage(e);if("file_upload"===e.get("type")&&(this.account.get("gallery_token")&&this.account.get("gallery_url")?this.startGalleryUploadFile(e,a):this.startUploadFile(e,a)),!(e.get("synced_from_server")||e.get("is_archived")&&!e.get("missed_msg"))){if(e.get("missed_msg")){if(this.model.get("last_read_msg")){let t=this.model.messages.find((e=>this.model.get("last_read_msg")&&(e.get("stanza_id")===this.model.get("last_read_msg")||e.get("contact_stanza_id")===this.model.get("last_read_msg")))),i=new Ci.Deferred;i.done((()=>{t&&e.get("timestamp")>t.get("timestamp")&&(e.set("is_unread",!0),nt.get("focused")||(this.model.get("saved")||this.model.isMuted())&&e.set("muted",!0),this.model.setMessagesDisplayed(e.get("timestamp")))})),t?i.resolve():this.contact.getMessageByStanzaId(this.model.get("last_read_msg"),(e=>{t=this.account.chats.receiveChatMessage(e,{is_archived:!0}),i.resolve()}))}}else i||e.isSenderMe()||e.get("silent")||"system"===e.get("type")&&!e.get("auth_request")||(e.set("is_unread",!0),e.get("is_unread")&&nt.get("focused")&&!nt.get("idle")&&this.isVisible()&&this.readVisibleMessages(),nt.get("focused")||(this.model.get("saved")||this.model.isMuted()?e.set("muted",!0):e.get("synced_invitation_from_server")||e.get("notification_msg")&&e.get("notification_msg_content")&&!this.data.get("notification_content")||this.notifyMessage(e)),this.model.setMessagesDisplayed(e.get("timestamp")));this.contact&&this.model.get("archived")&&(this.model.isMuted()?e.set("archived",!0):(this.head.archiveChat(),this.model.set("archived",!1))),this.model.get("saved")&&e.set("muted",!0)}if(this.isVisible()&&(!e.get("is_unread")||s)&&!e.get("is_between_anchors"))if(this.model.get("notifications"))this.isScrolledToTop()&&this.scrollToTop();else{let t;s&&(this.$(".chat-message.unread-message").length?this.$(".chat-message.unread-message")[0].offsetTop>this._scrolltop+140&&(t=!0):t=!0),s&&t||e.get("submitted_here")?this.scrollToBottom():s||(this.updateScrollBar(),this.scrollTo(this.ps_container[0].scrollHeight-this.ps_container[0].offsetHeight-n))}e.get("synced_from_server")&&e.get("is_unread")&&this.onChangedReadState(e),e.get("attention")&&this.attentionMessage(e),e.isSenderMe()&&(e.get("is_archived")||e.get("missed_msg")||"system"==e.get("type")||this.readMessages(e.get("timestamp")),this.model.get("last_displayed_id")>=e.get("stanza_id")&&e.get("stanza_id")!==e.get("origin_id")?e.set("state",yi.MSG_DISPLAYED):e.get("stanza_id")!==e.get("origin_id")&&(this.model.get("last_delivered_id")>=e.get("stanza_id")||e.get("is_archived"))&&e.set("state",yi.MSG_DELIVERED)),(e.get("private_invite")||e.get("invite"))&&(this.contact.invitation&&this.contact.invitation.message.get("timestamp")>e.get("timestamp")||(this.contact.invitation=new nt.GroupchatInvitationView({model:this.contact,message:e})),this.model.contact.set("invitation",!0),this.model.get("active")&&this.model.contact.trigger("open_chat",this.model.contact),e.set("is_unread",!1));let o=this.model.last_message;if((!o||e.get("timestamp")>=o.get("timestamp"))&&(this.model.last_message=e,this.model.get("notifications")&&this.account.trigger("notification_last_msg_updated",e.get("stanza_id")),this.chat_item.updateLastMessage()),e.get("mentions")&&e.get("mentions").forEach((t=>{let i=t.target||"",s=i.match(/\?id=\w*/),n=i.match(/\?jid=.*/);i=s?s[0].slice(4):n?n[0].slice(5):"",this.contact.my_info?i===this.contact.my_info.get("id")&&this.account.mentions.create(null,{message:e,contact:this.contact}):this.contact.get("group_chat")&&(this._pending_my_info?this._pending_my_info.done((()=>{i===this.contact.my_info.get("id")&&this.account.mentions.create(null,{message:e,contact:this.contact}),this._pending_my_info=null})):(this._pending_my_info=new Ci.Deferred,this.contact.getMyInfo((()=>{i===this.contact.my_info.get("id")&&this.account.mentions.create(null,{message:e,contact:this.contact}),this._pending_my_info.resolve()})))),(i===this.account.get("jid")||""===i)&&this.account.mentions.create(null,{message:e,contact:this.contact})})),this.model.messages_view&&"message_context"===nt.body.screen.get("right")&&this.model.messages_view.last_history_loaded&&this.account.context_messages.add(e),e.get("notification_msg")&&e.get("notification_msg_content")&&this.data.get("notification_content")&&(e.get("notification_trust_msg")||t.children(`authenticated-key-exchange[xmlns="${Ii.NS.XABBER_TRUST}"]`).length))return i&&(e.set("ignored",!0),e.set("is_unread",!1),a.addClass("hidden")),void(this.account.omemo&&this.account.omemo.xabber_trust&&this.account.omemo.xabber_trust.receiveTrustVerificationMessage(t[0],{automated:!0,notification_trust_msg:e.get("notification_trust_msg"),device_id:e.get("device_id"),msg_item:e}))},decryptImages:function(e,t){let i=this.getScrollBottom();if(this.model.get("encrypted")||e.get("encrypted")||t){let t=e.get("images")||[];t.length&&t.forEach((t=>{let s=t.sources[0];t.key&&this.model.messages.decryptFile(s,t.key).then((t=>{if(null===t)return;let n=[];n=this.model.messages_view&&"message_context"===nt.body.screen.get("right")?this.model.messages_view.$(`.chat-message[data-uniqueid="${e.get("unique_id")}"] img[src="${s}"]`):this.$(`.chat-message[data-uniqueid="${e.get("unique_id")}"] img[src="${s}"]`),n.length&&(n[0].src=t,n[0].onload=()=>{i?this.scrollTo(this.ps_container[0].scrollHeight-i):this.scrollToBottom()},n.attr("data-mfp-src",t))}))})),(e.get("forwarded_message")||[]).forEach((t=>{(t.get("images")||[]).forEach((s=>{let n=s.sources[0];s.key&&this.model.messages.decryptFile(n,s.key).then((s=>{if(null===s)return;let a=this.$(`.chat-message[data-uniqueid="${e.get("unique_id")}"] .fwd-message[data-uniqueid="${t.get("unique_id")}"] img[src="${n}"]`);a.length&&(a[0].src=s,a[0].onload=()=>{i?this.scrollTo(this.ps_container[0].scrollHeight-i):this.scrollToBottom()},a.attr("data-mfp-src",s))}))}))}))}},addMessage:function(e){let t=this.buildMessageHtml(e),i=this.model.messages.indexOf(e);if(0===i)t.prependTo(this.$(".chat-content"));else if(this.model.messages.models.length&&this.model.messages.models[i-1]){let e=this.$(`.chat-message[data-uniqueid="${this.model.messages.models[i-1].get("unique_id")}"]`);e.length||(e=this.addMessage(this.model.messages.models[i-1])),t.insertAfter(e)}let s=t.nextAll(".chat-message").first();return this.updateMessageInChat(t[0],e),s.length&&this.updateMessageInChat(s[0]),this.initPopup(t),this.bottom.showChatNotification(),t},isMessageAdded:function(e){let t=this.$(`.chat-message[data-uniqueid="${e.get("unique_id")}"]`);return Boolean(t.length)},initPopup:function(e){let t=e.find(".uploaded-img"),i=e.find(".uploaded-img-for-collage");t.length&&t.each(((e,t)=>{this.initMagnificPopup(Ci(t))})),i.length&&this.initZoomGallery(e)},getImagesInformation:function(e){let t=e.get("images"),i=[];if(t)return t.forEach((e=>{let t=new URL(e.sources[0]).hostname;e.pretty_size=ki.pretty_size(e.size),i.push(t)})),i=[...new Set(i)],{images:t,servers:i}},initMagnificPopup:function(e){let t=this;e.length&&e.magnificPopup({type:"image",closeOnContentClick:!0,fixedContentPos:!0,mainClass:"mfp-no-margins mfp-with-zoom",image:{verticalFit:!0,titleSrc:function(e){return'<a class="image-source-link" href="'+e.el.attr("src")+'" target="_blank">'+t.model.messages.getFilename(e.el.attr("src"))+"</a> "+e.el.attr("title")}},zoom:{enabled:!0,duration:300}})},initZoomGallery:function(e){let t=this;e.find(".zoom-gallery").length&&e.find(".zoom-gallery").magnificPopup({delegate:"img",type:"image",closeOnContentClick:!1,closeBtnInside:!1,mainClass:"mfp-with-zoom mfp-img-mobile",image:{verticalFit:!0,titleSrc:function(e){return'<a class="image-source-link" href="'+e.el.attr("src")+'" target="_blank">'+t.model.messages.getFilename(e.el.attr("src"))+"</a> "+e.el.attr("title")}},gallery:{enabled:!0},zoom:{enabled:!0,duration:300,opener:function(e){return e}}})},updateMessage:function(e){let t,i;e.get("images"),e.get("only_emoji"),e.get("files");if(!(e instanceof nt.Message))return;if(this.updateMentions(e),i=this.buildMessageHtml(e),t=this.$(`.chat-message[data-uniqueid="${e.get("unique_id")}"]`),t.replaceWith(i),t=this.$(`.chat-message[data-uniqueid="${e.get("unique_id")}"]`),this.updateMessageInChat(t[0],e),this.initPopup(t),this.bottom.showChatNotification(),e.get("data_form")){let i=ki.render_data_form(e.get("data_form"));t.find(".chat-msg-content").append(i)}let s=ki.pretty_short_datetime(e.get("last_replace_time")),n=Ti(e.get("last_replace_time")).format("D MMMM, YYYY HH:mm:ss"),a=`${ji(e.get("time"))} ${nt.getString("edited",[Ti(e.get("timestamp")).startOf("day").isSame(Ti(e.get("last_replace_time")).startOf("day"))?s:n])}`;t.find(".msg-time").prop("title",a),t.find(".edited-info").removeClass("hidden").text(nt.getString("chat_screen__message__label_edited")).prop("title",a)},removeAllMessagesExceptLast:function(){let e=[];this.model.messages&&(this.model.messages.forEach(((t,i)=>{if(i===this.model.messages.length-1)return e.push(t),this.model.set("first_archive_id",t.get("stanza_id")),this.$(`.chat-message[data-uniqueid="${t.get("unique_id")}"]`).removeClass("unread-message"),void this.$(`.chat-message[data-uniqueid="${t.get("unique_id")}"]`).removeClass("unread-message-background");let s,n;n=this.$(`.chat-message[data-uniqueid="${t.get("unique_id")}"]`),this.bottom.content_view&&(s=this.bottom.content_view.$(`.chat-message[data-uniqueid="${t.get("unique_id")}"]`)),s.prev(".chat-day-indicator").remove(),s.remove(),Ai.error("MESSAGE REMOVED !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!11"),Ai.error(s)})),this.model.messages.reset(e),this.updateScrollBar())},removeMessage:function(e){let t,i,s;if(e instanceof nt.Message)t=e,s=this.$(`.chat-message[data-uniqueid="${e.get("unique_id")}"]`),this.bottom.content_view&&(i=this.bottom.content_view.$(`.chat-message[data-uniqueid="${e.get("unique_id")}"]`));else{if(i=e,!i.length)return;t=this.model.messages.get(i.data("uniqueid"))}t&&t.destroy(),s&&this.removeMessageFromDOM(s),i&&i!==s&&this.removeMessageFromDOM(i),this.account.notifications_content&&this.model.get("notifications")&&this.account.notifications_content.removeMessage(e)},removeMessageFromDOM:function(e){if(e.hasClass("with-author")&&!e.next().hasClass("with-author")){let t=e.find(".circle-avatar")[0];e.next().addClass("with-author"),e.next().find(".circle-avatar").replaceWith(t)}e.prev(".chat-day-indicator").remove();let t=e.next(".chat-message");Ai.error("MESSAGE REMOVED !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!11"),Ai.error(e),e.remove(),t.length&&this.updateMessageInChat(t[0]),this.bottom.manageSelectedMessages(),this._clearing_history||this.updateScrollBar()},clearHistory:function(){let e=[],t=this.contact.get("group_chat")?nt.getString("clear_group_chat_history_dialog_message"):nt.getString("clear_chat_history_dialog_message"),i=!!this.contact.get("group_chat");this._clearing_history=!0,this.account.server_features.get(Ii.NS.REWRITE)?ki.dialogs.ask(nt.getString("clear_history"),t,e,{ok_button_text:nt.getString("clear_chat_history_dialog_button")}).done((e=>{e?this.model.retractAllMessages(i,(()=>{this._clearing_history=!1,this.chat_item.updateLastMessage(),this.updateScrollBar()}),(()=>{this._clearing_history=!1})):this._clearing_history=!1})):ki.dialogs.ask(nt.getString("clear_history"),`${t}\n${nt.getString("dialog_clear_chat_history__warning_deletion_not_supported",[this.account.domain]).fontcolor("#E53935")})`,e,{ok_button_text:nt.getString("clear_chat_history_dialog_button")}).done((e=>{if(!e)return void(this._clearing_history=!1);Ei.clone(this.model.messages.models).forEach((e=>{this.removeMessage(e)}))}))},renderVoiceMessage:function(e,t,i){let s=e.innerHTML,n="waveform"+Ti.now(),a=Ci(e),o=a.closest(".link-file");i=i||this.model,a.addClass("voice-message-rendering").html(Ci(xi.messages.audio_file_waveform({waveform_id:n})));let r=this.createAudio(t,a.find("#"+n)),c=()=>{let e=r.getCurrentTime(),t=r.getDuration();0===e||e===t?o.addClass("wave-cursor-hidden"):o.removeClass("wave-cursor-hidden")};return r.on("ready",(()=>{let e=Math.round(r.getDuration());c(),a.find(".voice-msg-total-time").text(ki.pretty_duration(e))})),r.on("error",(()=>{a.removeClass("voice-message-rendering"),e.innerHTML=s,r.unAll(),a.find(".voice-message-play").get(0).remove(),ki.callback_popup_message(nt.getString("jingle__error__audio_not_supported"),3e3)})),r.on("play",(()=>{let e;o.addClass("playing"),o.removeClass("wave-cursor-hidden"),nt.current_plyr_player&&(e=nt.current_plyr_player.is_popup),nt.current_plyr_player=i.plyr_players.find((e=>e.$audio_elem===o[0])),nt.current_plyr_player&&(nt.current_plyr_player.chat_item=i.item_view),nt.current_plyr_player&&(nt.current_plyr_player.is_popup=e),nt.plyr_players.filter((e=>e!=nt.current_plyr_player)).forEach((function(e){e.$audio_elem&&e.$audio_elem.voice_message&&e.$audio_elem.voice_message.stopTime()})),nt.plyr_player_popup&&nt.plyr_player_popup.player&&nt.plyr_player_popup.player.stop(),!nt.current_plyr_player&&nt.plyr_player_popup&&nt.plyr_player_popup.closePopup();let t=setInterval((function(){let e=Math.round(r.getCurrentTime());r.isPlaying()?a.find(".voice-msg-current-time").text(ki.pretty_duration(e)):clearInterval(t)}),100);nt.trigger("plyr_player_updated")})),r.on("finish",(()=>{c(),o.removeClass("playing")})),r.on("pause",(()=>{o.removeClass("playing"),c(),nt.trigger("plyr_player_updated")})),r.on("seek",(()=>{c()})),r.stopTime=()=>{r.stop(),a.find(".voice-msg-current-time").text(ki.pretty_duration(0))},a.find(".voice-message-volume")[0].onchange=()=>{r.setVolume(a.find(".voice-message-volume").val()/100)},r},createImageGrid:function(e){let t;if(e.images.length>6){let i="template-for-6",s=e.images.length-5;!nt.settings.load_media&&(i="hidden-template-for-6"),t=Ci(xi.messages[i](e)),t.find(".last-image").addClass("hidden-images"),t.find(".image-counter").text("+"+s)}else{let i="template-for-"+e.images.length;!nt.settings.load_media&&(i="hidden-template-for-"+e.images.length),t=Ci(xi.messages[i](e))}return nt.settings.load_media||t.find("img").removeClass("uploaded-img-for-collage popup-img").addClass("unloaded-img"),t},buildMessageHtml:function(e){let t,i,s=Ei.clone(e.attributes),n=e instanceof nt.Message&&e.isSenderMe(),a=s.user_info||{},o=s.images,r=s.videos,c=e.get("only_emoji"),l=s.files,d=s.locations,h=s.link_references,g=Boolean(r&&r.length),u=Boolean(o&&o.length),p=!!d,m=!!l,_=!1,v=a.avatar,f=a.avatar_url,b=a.role,A=a.badge,w=a.id,y=s.has_encrypted_files,x=[];if(t=a.nickname||this.model.get("saved")&&this.account.get("name")||s.from_jid===this.contact.get("jid")&&this.contact.get("name"),t||(n?this.model.get("group_chat")?this.contact.my_info?t=this.contact.my_info.get("nickname"):this.contact?this.contact.getMyInfo((()=>{t=this.contact.my_info.get("nickname"),k&&k.children(".msg-wrap").find(".chat-msg-author-wrap .chat-msg-author").text(Ii.xmlescape(t))})):t=this.account.get("name"):t=this.account.get("name"):t=this.account.contacts.get(s.from_jid)?this.account.contacts.get(s.from_jid).get("name"):s.from_jid),t=Ii.xmlescape(t||""),n&&this.model.get("group_chat")&&this.contact.my_info&&(b=this.contact.my_info.get("role"),A=this.contact.my_info.get("badge")),Ei.extend(s,{username:t,state:e instanceof nt.Message?e.getState():"sent",verbose_state:e instanceof nt.Message?e.getVerboseState():"sent",time:ji(s.time),short_time:ki.pretty_time(s.time),avatar_id:v,avatar_url:f,is_image:u,is_video:g,is_file:m,is_location:p,files:l,locations:d,link_references:h,role:ki.pretty_name(b),badge:A,from_id:w}),s.encrypted=s.encrypted||this.model.get("encrypted"),s.ephemeral_timer=s.ephemeral_timer||this.model.get("ephemeral_timer"),s.not_encrypted=s.not_encrypted||null,s.not_verified_device=s.not_verified_device||null,s.not_verified_device_no_device=s.not_verified_device_no_device||null,s.device_id=s.device_id||null,"system"===s.type){let e=s.invite?"group_request":"system";return Ci(xi.messages[e](s))}u&&o.length>1&&(i=this.createImageGrid(s));let k,C=[s.is_unread&&"unread-message",s.is_unread&&"unread-message-background",s.not_encrypted&&"not-decrypted",s.not_verified_device&&!s.not_verified_device_no_device&&"not-verified",s.not_verified_device_no_device&&"not-existing-device",s.forwarded_message&&"forwarding",s.encrypted||this.model.get("encrypted")?"encrypted":""],S=ki.markupBodyMessage(e);if(s.searched_message){let e=new RegExp("(.{0,12})("+s.query+")(.{0,12})","gmius").exec(Ii.xmlescape(s.original_message||s.message)||S);Ai.log(S),Ai.log(e),e&&(12==e[1].length&&(e[1]="..."+e[1].substring(1)),12==e[3].length&&(e[3]=e[3].substring(0,e[3].length-1)+"..."),S=e[1]+'<span class="mention ground-color-100">'+e[2]+"</span>"+e[3],S=S.replace(/\n/g," "))}if(k=this.model.get("saved")&&!S.length&&s.forwarded_message&&1==s.forwarded_message.length?Ci(xi.messages.saved_main(Ei.extend(s,{classlist:C.join(" ")}))):s.searched_message?Ci(xi.messages.searched(Ei.extend(s,{is_sender:n,message:S,msg_time:ki.pretty_short_datetime_recent_chat(s.time),classlist:C.join(" ")}))):"file_upload"===s.type?Ci(xi.messages.file_upload(Ei.extend(s,{is_sender:n,message:S,ephemeral_timer_text:ki.pretty_duration_ephemeral_timer(s.ephemeral_timer),classlist:C.join(" ")}))):Ci(xi.messages.main(Ei.extend(s,{is_sender:n,message:S,ephemeral_timer_text:ki.pretty_duration_ephemeral_timer(s.ephemeral_timer),classlist:C.join(" ")}))),s.hasOwnProperty("encrypted")&&(s.hasOwnProperty("submitted_here")?(k.attr("data-trust",!0),s.hasOwnProperty("is_contact_trusted")&&k.attr("data-trust",s.is_contact_trusted)):s.hasOwnProperty("is_trusted")?k.attr("data-trust",s.is_trusted):k.attr("data-trust",this.$el.attr("data-trust"))),u&&(o.length>1&&(k.find(".chat-msg-media-content").html(i),!nt.settings.load_media&&k.find(".img-content-template").first().append(Ci('<div class="img-privacy-warning"/>').text(nt.getString("load_image_privacy_warning")))),1==o.length)){let e=this.createImage(o[0]),t=this.createImageContainer(o[0]);e.onload=()=>{this.imageOnload(k)},k.find(".chat-msg-media-content").html(Ci(t).html(e)),!nt.settings.load_media&&k.find(".img-content").append(Ci('<div class="img-privacy-warning"/>').text(nt.getString("load_image_privacy_warning"))),this.updateScrollBar()}if(g){let t=this.createVideoContainer();k.find(".chat-msg-media-content").append(t),r.forEach(((e,t)=>{let i=this.createVideo(e,t);k.find(".video-content").append(i)})),this.videoOnload(k,e),k.removeClass("file-upload noselect")}if(m&&"file_upload"!==s.type&&l.length>0){let i,n=Ei.clone(l);Ci(n).each(((a,o)=>{let r=Ei.clone(n[a]);o.type&&(_=!!o.voice),1===n.length&&_&&(o.name=nt.getString("voice_message"));let c=ki.file_type_icon(o.type);if(Ei.extend(r,{is_audio:_,duration:ki.pretty_duration(r.duration),mdi_icon:c,size:ki.pretty_size(r.size)}),i=Ci(_?xi.messages.audio_file(r):xi.messages.file(r)),k.find(".chat-msg-media-content").append(i),_&&k.find(".link-file").length){let i={$audio_elem:k.find(".link-file")[0]};if(i.msg_time=k.attr("data-time"),i.author=t,i.message_unique_id=k.attr("data-uniqueid"),s.from_jid===this.account.get("jid"))this.model.get("group_chat")&&this.contact.my_info&&(i.contact_avatar=this.contact.my_info.get("b64_avatar"),i.contact_avatar?i.contact_avatar=Li.getCachedImage(i.contact_avatar):(this.account.cached_image&&(i.contact_avatar=this.account.cached_image),!i.contact_avatar&&(i.contact_avatar=Li.getDefaultAvatar(this.contact.my_info.get("nickname"))))),i.contact_avatar||(i.contact_avatar=this.account.cached_image);else if(this.model.get("group_chat")){let e=k.find(".msg-wrap .chat-msg-author").text();i.contact_avatar=Li.getDefaultAvatar(e)}else{let e=this.account.contacts.get(k.data("from"))||k.find(".msg-wrap .chat-msg-author").text()||k.data("from");i.contact_avatar=e.cached_image||Li.getDefaultAvatar(e)}this.model.plyr_players.filter((e=>e.message_unique_id===i.message_unique_id)).length?x=e.get("msg_player_audios"):(this.model.plyr_players=this.model.plyr_players.concat([i]).sort(((e,t)=>e.msg_time-t.msg_time)),nt.plyr_players=nt.plyr_players.concat([i]),x=x.concat([i]));let n=k.find(".link-file").find(".file-link-download").attr("href");k.find(".link-file").find(".mdi-play").removeClass("no-uploaded"),i.$audio_elem.voice_message=this.renderVoiceMessage(k.find(".link-file").find(".file-container")[0],n),nt.trigger("plyr_player_updated")}}))}if(m&&"file_upload"===s.type){let e=[];if(Ci(l).each(((t,i)=>{i.upload_id=t,ki.isImageType(i.type)&&(i.sources=[i.key?i.image_prev.src:window.URL.createObjectURL(new Blob([i]))],e.push(i))})),e.length>0)if(e.length>1){let t;if(e.length>6){let i="template-for-6",s=e.length-5;t=Ci(xi.messages[i]({images:e})),t.find(".last-image").addClass("hidden-images"),t.find(".image-counter").text("+"+s)}else{let i="template-for-"+e.length;t=Ci(xi.messages[i]({images:e}))}t.addClass("unuploaded-images"),Ci(xi.messages.loading_circle()).insertAfter(t.find("img")),k.find(".chat-msg-media-content.chat-main-upload-media").prepend(t)}else{let t=this.createImage(e[0]),i=this.createImageContainer(e[0]),s=400,n=.7*(.715*nt.main_panel.$el.width()-176),a=e[0].height,o=e[0].width;n=n>400?400:n,a&&o&&(o>n&&(a*=n/o,o=n),a>s&&(o*=s/a,a=s)),o=o||200,a=a||200,Ci(i).addClass("unuploaded-images"),Ci(i).attr("data-upload-file-id",e[0].upload_id),Ci(i).css({width:o,height:a,"max-height":s,"max-width":n}),Ci(i).html(t),Ci(i).append(xi.messages.loading_circle()),k.find(".chat-msg-media-content.chat-main-upload-media").prepend(i)}l.length>0&&Ci(l).each(((t,i)=>{if(e.includes(i))return;let s,n={name:i.name,type:i.type,upload_id:i.upload_id};Ei.extend(n,{size:ki.pretty_size(i.size)}),s=Ci(xi.messages.file_loading(n)),s.find(".file-loading-container").html(xi.messages.loading_circle()),k.find(".chat-msg-media-content.chat-main-upload-media").append(s)}))}if(p&&d.length>0){let e,t=Ei.clone(d);Ci(t).each(((i,s)=>{let n=Ei.clone(t[i]);Ei.extend(n,{id:"_"+Math.random().toString(36).substr(2,9)}),nt.settings.mapping_service?(e=Ci(xi.messages.location(n)),k.find(".chat-msg-location-content").attr("lon",n.lon),k.find(".chat-msg-location-content").attr("lat",n.lat),k.find(".chat-msg-location-content").append(e),this.loadLocationInChat(k,n),this.locationOnload(k)):k.find(".chat-msg-content").append('<a class="location-link" href="geo:'+n.lat+","+n.lon+'">'+nt.getString("recent_chat__last_message__locations_plural_0")+"</a>")}))}if(h&&h.length>0){let t,i=Ei.clone(h),s=new RegExp("^((?:https?:)?\\/\\/)?((?:www|m)\\.)?((?:youtube(-nocookie)?\\.com|youtu.be))(\\/(?:[\\w\\-]+\\?v=|embed\\/|v\\/)?)([\\w\\-]+)(\\S+)?$","i"),n=/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?/i;Ci(i).each(((e,a)=>{let o=Ei.clone(i[e]);o.domain=o.url?ki.getDomainFromUrl(o.url):o.site_name,o.original_text&&!/^https?:\/\//i.test(o.original_text)&&(o.original_text="http://"+o.original_text),i[e].type&&i[e].type.includes("video")&&i[e].video_url&&(s.test(i[e].video_url)||n.test(i[e].video_url))?(o.video_url=i[e].video_url.replace("autoplay=1&",""),o.is_video=!0,s.test(i[e].video_url)&&(o.provider="youtube"),n.test(i[e].video_url)&&(o.provider="vimeo")):o.is_video=!1,t=Ci(xi.messages.link_reference_chat(o)),k.find(".chat-msg-link-reference-content").append(t)})),this.OGPLinkOnload(k,e)}if(e.get("data_form")){let t=ki.render_data_form(e.get("data_form"));k.find(".chat-msg-content").append(t)}if(s.forwarded_message&&!s.searched_message?(Ci(s.forwarded_message).each(((a,o)=>{n=o.isSenderMe(),s=Ei.clone(o.attributes);let r,c=Boolean(s.images&&s.images.length),l=c?Ei.clone(s.images):void 0,d=Boolean(s.videos&&s.videos.length),h=Boolean(s.files&&s.files.length),g=Boolean(s.locations&&s.locations.length),u=s.user_info||{},p=u.avatar,m=u.avatar_url,v=ki.pretty_name(u.role),f=u.badge,b=u.id,A=s.from_jid;!y&&(y=s.has_encrypted_files),t=n?Ii.xmlescape(u.nickname||this.account.get("name")):Ii.xmlescape(u.nickname||u.id||this.account.contacts.mergeContact({jid:A}).get("name"));let w=ki.markupBodyMessage(o),C=Ci(xi.messages.forwarded(Ei.extend(s,{time:ji(s.time),short_time:ki.pretty_short_month_date(s.time),username:t,avatar_id:p,avatar_url:m,message:w,is_file:h,is_location:g,is_audio:undefined,role:v,badge:f,from_id:b})));if(this.model.get("saved")&&k.hasClass("saved-main")&&C.append(k.children(".right-side").clone()),o.get("forwarded_message")){let e=o.get("forwarded_message").length,t=nt.getQuantityString("forwarded_messages_count",e);C.children(".msg-wrap").children(".fwd-msgs-block").append(Ci("<a/>",{class:"collapsed-forwarded-message","data-uniqueid":s.unique_id}).text(t))}if(c&&(l.length>1&&(i=this.createImageGrid(s),C.find(".chat-msg-media-content").html(i),!nt.settings.load_media&&C.find(".img-content-template").first().append(Ci('<div class="img-privacy-warning"/>').text(nt.getString("load_image_privacy_warning")))),1==l.length)){r=this.createImage(l[0]),r.onload=()=>{this.imageOnload(k)};let e=this.createImageContainer(l[0]);C.find(".chat-msg-media-content").html(Ci(e).html(r)),!nt.settings.load_media&&C.find(".img-content").append(Ci('<div class="img-privacy-warning"/>').text(nt.getString("load_image_privacy_warning")))}if(d){let t=this.createVideoContainer();C.find(".chat-msg-media-content").append(t),s.videos.forEach(((e,t)=>{let i=this.createVideo(e,t);C.find(".video-content").append(i)})),this.videoOnload(k,e),C.removeClass("file-upload noselect")}if(h&&s.files.length>0){let i,a=Ei.clone(s.files);Ci(a).each(((s,o)=>{let r=Ei.clone(a[s]);o.type&&(_=!!o.voice),1===a.length&&_&&(o.name=nt.getString("voice_message"));let c=ki.file_type_icon(o.type);if(Ei.extend(r,{is_audio:_,duration:ki.pretty_duration(r.duration),mdi_icon:c,size:ki.pretty_size(r.size)}),i=Ci(_?xi.messages.audio_file(r):xi.messages.file(r)),C.find(".chat-msg-media-content").append(i),_&&C.find(".link-file").length){let i={$audio_elem:C.find(".link-file")[0]};if(i.msg_time=k.attr("data-time"),i.author=t,i.message_unique_id=k.attr("data-uniqueid")+"-"+C.attr("data-uniqueid"),n)this.model.get("group_chat")&&this.contact.my_info&&(i.contact_avatar=this.contact.my_info.get("b64_avatar"),i.contact_avatar?i.contact_avatar=Li.getCachedImage(i.contact_avatar):i.contact_avatar=this.account.cached_image||Li.getDefaultAvatar(this.contact.my_info.get("nickname"))),i.contact_avatar||(i.contact_avatar=this.account.cached_image);else if(this.account.contacts.mergeContact({jid:A})){let e=this.account.contacts.mergeContact({jid:A});i.contact_avatar=e.cached_image||(this.model.get("group_chat")?Li.getDefaultAvatar(C.find(".msg-wrap .fwd-msg-author").text()):Li.getDefaultAvatar(e))}this.model.plyr_players.filter((e=>e.message_unique_id===i.message_unique_id)).length?x=e.get("msg_player_audios"):(this.model.plyr_players=this.model.plyr_players.concat([i]).sort(((e,t)=>e.msg_time-t.msg_time)),nt.plyr_players=nt.plyr_players.concat([i]),x=x.concat([i]));let s=C.find(".link-file").find(".file-link-download").attr("href");C.find(".link-file").find(".mdi-play").removeClass("no-uploaded"),i.$audio_elem.voice_message=this.renderVoiceMessage(C.find(".link-file").find(".file-container")[0],s),nt.trigger("plyr_player_updated")}}))}if(g&&s.locations.length>0){let e,t=Ei.clone(s.locations);Ci(t).each(((i,s)=>{let n=Ei.clone(t[i]);Ei.extend(n,{id:"_fwd"+Math.random().toString(36).substr(2,9)}),nt.settings.mapping_service?(e=Ci(xi.messages.location(n)),C.find(".chat-msg-location-content").attr("lon",n.lon),C.find(".chat-msg-location-content").attr("lat",n.lat),C.find(".chat-msg-location-content").append(e),this.loadLocationInChat(k,n)):C.find(".chat-msg-content").append('<a class="location-link" href="geo:'+n.lat+","+n.lon+'">'+nt.getString("recent_chat__last_message__locations_plural_0")+"</a>")}))}if(s.link_references&&s.link_references.length>0){let t,i=Ei.clone(s.link_references),n=new RegExp("^((?:https?:)?\\/\\/)?((?:www|m)\\.)?((?:youtube(-nocookie)?\\.com|youtu.be))(\\/(?:[\\w\\-]+\\?v=|embed\\/|v\\/)?)([\\w\\-]+)(\\S+)?$","i"),a=/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?/i;Ci(i).each(((e,s)=>{let o=Ei.clone(i[e]);o.domain=o.url?ki.getDomainFromUrl(o.url):o.site_name,o.original_text&&!/^https?:\/\//i.test(o.original_text)&&(o.original_text="http://"+o.original_text),i[e].type&&i[e].type.includes("video")&&i[e].video_url&&(n.test(i[e].video_url)||a.test(i[e].video_url))?(o.video_url=i[e].video_url.replace("autoplay=1&",""),o.is_video=!0,n.test(i[e].video_url)&&(o.provider="youtube"),a.test(i[e].video_url)&&(o.provider="vimeo")):o.is_video=!1,t=Ci(xi.messages.link_reference_chat(o)),C.find(".chat-msg-link-reference-content").append(t)})),this.OGPLinkOnload(k,e)}if(o.get("data_form")){let e=ki.render_data_form(o.get("data_form"));C.find(".chat-msg-content").append(e)}k.children(".msg-wrap").length?k.children(".msg-wrap").children(".fwd-msgs-block").append(C):k.children(".fwd-msgs-block").append(C)})),this.updateScrollBar(),this.model.get("saved")&&k.hasClass("saved-main")&&k.children(".right-side").remove()):k.find(".fwd-msgs-block").remove(),(s.encrypted||this.model.get("encrypted")||y)&&this.decryptImages(e,y),s.searched_message){let e="";if(e=s.forwarded_message?nt.getQuantityString("forwarded_messages_count",s.forwarded_message.length):"",m&&u&&l.length&&o.length)e=nt.getString("recent_chat__last_message__attachments",[l.length+o.length]);else{if(m&&1==l.length&&(l[0].is_audio||l[0].voice))e=`${nt.getString("voice_message")}, `+ki.pretty_duration(l[0].duration);else if(m&&l.length>0){let t=0;l.forEach((e=>{t+=Number(e.size)})),e=nt.getQuantityString("recent_chat__last_message__files",l.length)+(t>0?`, ${ki.pretty_size(t)}`:"")}if(u&&o.length>0){let t=0;o.forEach((e=>{t+=Number(e.size)})),e=nt.getQuantityString("recent_chat__last_message__images",o.length)+(t>0?`, ${ki.pretty_size(t)}`:"")}p&&d.length>0&&(e=nt.getQuantityString("recent_chat__last_message__locations",d.length))}e&&k.find(".chat-msg-content").text(e)}return e.set("msg_player_audios",x),k=k.hyperlinkify({selector:".chat-text-content",embed_video:!0}).emojify(".chat-text-content",{tag_name:"div",emoji_size:ki.emoji_size(c)}).emojify(".chat-msg-author-badge",{emoji_size:16}),e.set("msg_el",k),k},getDateIndicator:function(e){let t=Ti(e).startOf("day");return Ci('<div class="chat-day-indicator one-line noselect"'+(this.model.get("encrypted")?' data-trust="'+(this.bottom.$el.attr("data-trust")||this.bottom.$el.attr("data-contact-trust"))+'"':"")+' data-time="'+t.format("x")+'">'+Ni(t)+"</div>")},initPlyrEmbedPlayer:function(e,t){let i=this.model.messages.get(e.data("uniqueid"))||t,s=[],n=i&&i.get("videos")&&i.get("videos").length?i.get("videos"):null;e.find(".plyr-video-container:not(.no-load)").each(((t,i)=>{if(Ci(i).hasClass("no-load"))return;let a,o=this.model.plyr_players.filter((i=>i.message_id===t&&i.message_unique_id===e.attr("data-uniqueid")));if(o.length)a=o[0],s=s.concat([a]);else{if(a={video_src:Ci(i).attr("data-src")},a.provider=Ci(i).attr("data-provider"),a.video_id=Ci(i).attr("data-msg-video-id"),a.msg_time=e.attr("data-time"),a.chat_item=this.model.item_view,a.message_id=t,a.message_unique_id=e.attr("data-uniqueid"),n&&n.length&&a.video_id>=0){let e=n[a.video_id];e&&(a.video_file=e)}this.model.plyr_players=this.model.plyr_players.concat([a]).sort(((e,t)=>e.msg_time-t.msg_time)),nt.plyr_players=nt.plyr_players.concat([a]),s=s.concat([a])}Ci(i).attr("data-message-id",a.message_id),Ci(i).addClass("no-load"),nt.current_plyr_player&&nt.current_plyr_player.player_item&&nt.current_plyr_player.player_item.message_id===a.message_id&&nt.current_plyr_player.player_item.message_unique_id===a.message_unique_id&&Ci(i).addClass("active-plyr-container")})),s.length&&i&&i.set("msg_player_videos",s),nt.trigger("plyr_player_updated")},hideMessageAuthor:function(e){e.removeClass("with-author")},showMessageAuthor:function(e){if(e.hasClass("system"))return;e.addClass("with-author");let t,i=e.find(".left-side .circle-avatar");if(e.data("from")===this.account.get("jid"))this.model.get("group_chat")&&this.contact.my_info&&(t=this.contact.my_info.get("b64_avatar"),t?t=Li.getCachedImage(t):(this.account.cached_image&&(t=this.account.cached_image),!t&&(t=Li.getDefaultAvatar(this.contact.my_info.get("nickname"))))),t||(t=this.account.cached_image);else if(this.model.get("group_chat")){let i=e.find(".msg-wrap .chat-msg-author").text();t=Li.getDefaultAvatar(i)}else{let i=this.account.contacts.get(e.data("from"))||e.find(".msg-wrap .chat-msg-author").text()||e.data("from");t=i&&i.cached_image||Li.getDefaultAvatar(i)}if(i.setAvatar(t,this.avatar_size),e.data("avatar")&&e.data("from-id"))if(this.account.chat_settings.getHashAvatar(e.data("from-id"))==e.data("avatar")&&this.account.chat_settings.getB64Avatar(e.data("from-id")))i.setAvatar(this.account.chat_settings.getB64Avatar(e.data("from-id")),this.avatar_size);else{let t=this._pending_avatars.find((t=>t.hash==e.data("avatar")));if(t)t.dfd.done((e=>{i.setAvatar(e,this.avatar_size);let s=this._pending_avatars.indexOf(t);s>-1&&this._pending_avatars.splice(s,1)}));else if(e.data("avatar-url"))i.setAvatar(e.data("avatar-url"),this.avatar_size),this.account.chat_settings.updateCachedAvatars(e.data("from-id"),e.data("avatar"),e.data("avatar-url"));else{let t=Ii.NS.PUBSUB_AVATAR_DATA+"#"+e.data("from-id"),s=new Ci.Deferred;this._pending_avatars.push({hash:e.data("avatar"),dfd:s}),this.contact.getAvatar(e.data("avatar"),t,(t=>{i.setAvatar(t,this.avatar_size),this.account.chat_settings.updateCachedAvatars(e.data("from-id"),e.data("avatar"),t),s.resolve(t)}))}}},hideFwdMessageAuthor:function(e){e.removeClass("with-author")},showFwdMessageAuthor:function(e){if(!e.length)return;e.addClass("with-author");let t,i=e.find(".circle-avatar"),s=e.data("from"),n=s===this.account.get("jid"),a=this.account.contacts.get(s)||s;if(n?(this.model.get("group_chat")&&this.contact.my_info&&(t=this.contact.my_info.get("b64_avatar"),t=t?Li.getCachedImage(t):this.account.cached_image||Li.getDefaultAvatar(this.contact.my_info.get("nickname"))),t||(t=this.account.cached_image)):a&&(t=a.cached_image||(this.model.get("group_chat")?Li.getDefaultAvatar(e.find(".msg-wrap .fwd-msg-author").text()):Li.getDefaultAvatar(a))),i.setAvatar(t,this.avatar_size),i.removeClass("hidden"),e.data("avatar")&&e.data("from-id"))if(this.account.chat_settings.getHashAvatar(e.data("from-id"))==e.data("avatar")&&this.account.chat_settings.getB64Avatar(e.data("from-id")))i.setAvatar(this.account.chat_settings.getB64Avatar(e.data("from-id")),this.avatar_size);else if(e.data("avatar-url"))i.setAvatar(e.data("avatar-url"),this.avatar_size),this.account.chat_settings.updateCachedAvatars(e.data("from-id"),e.data("avatar"),e.data("avatar-url"));else{let t=Ii.NS.PUBSUB_AVATAR_DATA+"#"+e.data("from-id");this.contact&&this.contact.getAvatar(e.data("avatar"),t,(t=>{i.setAvatar(t,this.avatar_size),this.account.chat_settings.updateCachedAvatars(e.data("from-id"),e.data("avatar"),t)}))}},updateMessageInChat:function(e,t){let i=Ci(e);i.prev(".chat-day-indicator").remove(),i.find(".plyr-video-container").length&&this.initPlyrEmbedPlayer(i,t),i.find(".not-decrypted-icon").length&&i.find(".not-decrypted-icon").dropdown({inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"right"});let s=i.prevAll(".chat-message").first();if(!s.length)return this.getDateIndicator(i.data("time")).insertBefore(i),this.showMessageAuthor(i),void i.find(".fwd-message").each(((e,t)=>{this.showFwdMessageAuthor(Ci(t))}));if(i.find(".data-form").length)return void this.showMessageAuthor(i);let n=s.hasClass("system"),a=i.data("from")===s.data("from"),o=Ti(i.data("time")).startOf("day").isSame(Ti(s.data("time")).startOf("day"));if(o?n||!a||s.hasClass("saved-main")?this.showMessageAuthor(i):this.hideMessageAuthor(i):(this.getDateIndicator(i.data("time")).insertBefore(i),this.showMessageAuthor(i)),i.hasClass("forwarding")){i.find(".fwd-message").each(((e,t)=>{let s=Ci(t),n=e>0?s.prev():[];if(s.switchClass("hide-date",o&&n.length),s.removeClass("hide-time"),n.length){s.data("from")===n.data("from")?this.hideFwdMessageAuthor(s):this.showFwdMessageAuthor(s)}else this.showMessageAuthor(i),this.showFwdMessageAuthor(s)}))}this.model.get("notifications")&&this.showMessageAuthor(i)},notifyMessage:function(e){if(nt.settings.notifications&&(nt.settings.notifications_private&&!this.model.get("group_chat")||nt.settings.notifications_group&&this.model.get("group_chat"))){let t;t=this.model.get("group_chat")&&nt.settings.message_preview_group||!this.model.get("group_chat")&&nt.settings.message_preview_private?e.getText():nt.getString("notification__text_sent_a_message"),nt.popupNotification({title:this.contact.get("name"),text:t,icon:this.contact.cached_image.url}).onclick=()=>{window.focus(),this.model.trigger("open")}}if(nt.settings.group_sound&&nt.settings.notifications_group&&this.model.get("group_chat")){let t;t=e.get("auth_request")?nt.settings.sound_on_auth_request:nt.settings.sound_on_group_message,nt.playAudio(t,!1,nt.settings.notifications_volume_enabled?nt.settings.notifications_volume:0)}else if(nt.settings.private_sound&&nt.settings.notifications_private&&!this.model.get("group_chat")){let t;t=e.get("auth_request")?nt.settings.sound_on_auth_request:nt.settings.sound_on_private_message,nt.playAudio(t,!1,nt.settings.notifications_volume_enabled?nt.settings.notifications_volume:0)}nt.recountAllMessageCounter()},attentionMessage:function(){nt.popupNotification({title:this.contact.get("name"),text:nt.getString("chats_attention"),icon:this.contact.cached_image.url}).onclick=()=>{window.focus(),this.model.trigger("open")};let e=nt.settings.sound_on_attention;nt.playAudio(e)},sendMessage:function(e){let t=e.get("message"),i="",s=[],n=e.get("forwarded_message"),a=e.get("unique_id"),o=e.get("msgid"),r=e.get("link_references"),c=$i({to:this.model.get("jid"),type:"chat",id:o});if(n&&(i=[],Ci(n).each(((e,a)=>{let o=Array.from(Ei.escape(Ei.unescape(this.bottom.createTextMessage([a],">")))+(e!==n.length-1||t.length?"\n":"")),r=i.length,l=Ci(a.get("xml")).clone(),d=i.concat(o).length;l.attr("from")||l.attr("from",this.account.get("jid")),c.c("reference",{xmlns:Ii.NS.REFERENCE,type:"mutable",begin:r,end:d}).c("forwarded",{xmlns:"urn:xmpp:forward:0"}).c("delay",{xmlns:"urn:xmpp:delay",stamp:a.get("time")}).up().cnode(l[0]).up().up().up(),i=i.concat(o),s.push({start:r,end:d,type:"forward"})})),t=Ei.unescape(i.join(""))+t),e.get("mentions")&&e.get("mentions").length&&e.get("mentions").forEach((e=>{let t={xmlns:Ii.NS.MARKUP};e.is_gc&&(t.node=Ii.NS.GROUP_CHAT),c.c("reference",{xmlns:Ii.NS.REFERENCE,begin:e.start+i.length,end:e.end+i.length,type:"decoration"}).c("mention",t).t(e.target).up().up()})),e.get("markups")&&e.get("markups").forEach((e=>{c.c("reference",{xmlns:Ii.NS.REFERENCE,begin:e.start+i.length,end:e.end+i.length,type:"decoration"});for(let t in e.markup)c.c(e.markup[t],{xmlns:Ii.NS.MARKUP}).up();c.up()})),e.get("blockquotes")&&e.get("blockquotes").forEach((e=>{c.c("reference",{xmlns:Ii.NS.REFERENCE,begin:e.start+i.length,end:e.end+i.length,type:"decoration"}).c("quote",{xmlns:Ii.NS.MARKUP}).up().up()})),"file_upload"==e.get("type")){let n=e.get("files")||[],a=e.get("images")||[],o=e.get("videos")||[],r=n.concat(a);r=r.concat(o),r.forEach(((e,n)=>{0===n&&(t+="\n"),i=e.sources[0]+(n!=r.length-1?"\n":"");let a=Array.from(Ei.escape(t)).length,o=a+i.length;c.c("reference",{xmlns:Ii.NS.REFERENCE,type:"mutable",begin:a,end:o}),e.voice&&c.c("voice-message",{xmlns:Ii.NS.VOICE_MESSAGE}),c.c("file-sharing",{xmlns:Ii.NS.FILES}).c("file"),e.type&&c.c("media-type").t(e.type).up(),e.thumbnail&&c.c("thumbnail",{xmlns:Ii.NS.PUBSUB_AVATAR_METADATA_THUMBNAIL,uri:e.thumbnail}).up(),e.created&&c.c("created").t(e.created).up(),e.name&&c.c("name").t(e.name).up(),e.size&&c.c("size").t(e.size).up(),e.height&&c.c("height").t(e.height).up(),e.width&&c.c("width").t(e.width).up(),e.duration&&c.c("duration").t(e.duration).up(),e.description&&c.c("desc").t(e.description).up(),c.up().c("sources"),e.sources.forEach((t=>{e.key&&(t=t.replace(/^(https|http)/,"aescbc")+"#"+ki.ArrayBuffertoBase64(e.key)),c.c("uri").t(t).up()})),c.up().up().up(),e.voice&&c.up(),t+=i,s.push({start:a,end:o})})),e.set({type:"main"})}if(r&&r.length&&r.forEach(((e,i)=>{-1===e.start&&(e.start=Array.from(Ei.escape(t)).length,t=t+"\n"+e.original_text,e.end=e.start+e.original_text.length+1),c.c("reference",{xmlns:Ii.NS.REFERENCE,begin:e.start,end:e.end,type:"mutable"}).c("ogp",{xmlns:Ii.NS.OGP,url:e.original_text}),e.site&&c.c("meta",{property:"og:site_name",content:e.site}).up(),e.type&&c.c("meta",{property:"og:type",content:e.type}).up(),e.title&&c.c("meta",{property:"og:title",content:e.title}).up(),e.url&&c.c("meta",{property:"og:url",content:e.url}).up(),e.description&&c.c("meta",{property:"og:description",content:e.description}).up(),e.image&&c.c("meta",{property:"og:image",content:e.image}).up(),e.image_width&&c.c("meta",{property:"og:image:width",content:e.image_width}).up(),e.image_height&&c.c("meta",{property:"og:image:height",content:e.image_height}).up(),e.video_url&&c.c("meta",{property:"og:video:url",content:e.video_url}).up(),c.up().up(),s.push({start:e.start,end:e.end})})),s.length&&e.set({mutable_content:s}),this.account._pending_messages.push({chat_hash_id:this.model.id,unique_id:a,timestamp:Ti.now()}),e.set("original_message",t),t&&c.c("body").t(t).up(),this.model.get("group_chat")&&c.c("private",{xmlns:Ii.NS.CARBONS}).up(),c.c("markable").attrs({xmlns:Ii.NS.CHAT_MARKERS}).up().c("origin-id",{id:o,xmlns:"urn:xmpp:sid:0"}).up(),e.set({xml:Ci(c.tree()).clone()[0]}),e.get("state")===yi.MSG_ERROR&&(this.model.get("group_chat")?c.c("retry",{xmlns:Ii.NS.DELIVERY,to:this.model.get("jid")}).up():c.c("retry",{xmlns:Ii.NS.DELIVERY}).up(),e.set("state",yi.MSG_PENDING)),c.toString().length>=yi.STANZA_MAX_SIZE)return ki.dialogs.error(nt.getString("message__error_big_stanza")),void this.removeMessage(e);if(e.get("encrypted")&&this.account.omemo)return this.model.get("chat_ephemeral_timer")&&c.c("ephemeral",{xmlns:Ii.NS.EPHEMERAL,timer:this.model.get("chat_ephemeral_timer")}).up(),c.c("envelope",{xmlns:Ii.NS.SCE}).c("content"),Ci(c.tree()).children("body").length&&(c.cnode(Ci(c.tree()).children("body")[0]).attrs({xmlns:Ii.NS.CLIENT}).up(),Ci(c.tree()).children("body").detach()),Ci(c.tree()).children("reference").length&&(Ci(c.tree()).children("reference").each(((e,t)=>{c.cnode(Ci(c.tree()).children("reference")[e]).up()})),Ci(c.tree()).children("reference").detach()),c.up().c("rpad").t("0".repeat(200).slice(1,Math.floor(198*Math.random()+1))).up(),c.c("from",{jid:this.account.get("jid")}).up().up(),void this.account.omemo.encrypt(this.contact,c).then((t=>{t&&(c=t.message,e.set("trusted",t.is_trusted),e.set({xml:Ci(c.tree()).clone()[0]}));let i=Ti.now();this.account.sendFast(c,this.msgCallback.bind(this,i,e))}));{let t=Ti.now();this.account.sendFast(c,this.msgCallback.bind(this,t,e))}},msgCallback:function(e,t){if(this.bottom.click_counter=0,this.bottom.setDefaultPlaceholder(),this.model.get("group_chat")||this.account.server_features.get(Ii.NS.DELIVERY)){let i,s,n=5;this.account.connection.authenticated&&!this.account.connection.disconnecting&&this.account.session.get("connected")&&this.account.session.get("ready_to_send")&&"offline"!==this.account.get("status")||(i=!0),this.account.session.get("reconnecting")&&(i=!0),this.account.session.once("change:reconnecting",(()=>{Ai.log("change reconnecting"),Ai.log(this.account.session.get("reconnecting")),i=!0,this.account.session.once("change:reconnected",(()=>{n=5,Ai.log("change reconnected "),s=!0}))}));let a=setInterval((()=>{n>=8&&t.get("state")===yi.MSG_PENDING&&!i&&(Ai.log("ping on message pending"),this.account.connection.ping.ping(this.account.get("jid"),(()=>{}),(()=>{let e=(Ti.now()-this.account.last_stanza_timestamp)/1e3;e>=2?(Ai.log("message initiated reconnection"),Ai.log(t),this.account.connection.disconnect()):Ai.log("ping was sent and got no result after 2 seconds, but didnt reconnect because last stanza time was: "+e+" sec")}),2e3)),i&&s&&n>10&&(t.set("state",yi.MSG_ERROR),clearInterval(a)),(this.account.last_stanza_timestamp<e&&n>40&&t.get("state")===yi.MSG_PENDING||n>40)&&!i?(t.set("state",yi.MSG_ERROR),clearInterval(a)):t.get("state")!==yi.MSG_PENDING&&clearInterval(a),n+=3}),3e3)}else setTimeout((()=>{this.account.last_stanza_timestamp>e&&t.get("state")===yi.MSG_PENDING?t.set("state",yi.MSG_SENT):(this.account.connection.ping.ping(this.account.get("jid"),(()=>{t.get("state")===yi.MSG_PENDING&&t.set("state",yi.MSG_SENT)})),setTimeout((()=>{this.account.last_stanza_timestamp<e&&t.get("state")===yi.MSG_PENDING&&t.set("state",yi.MSG_ERROR)}),5e3))}),1e3)},initJingleMessage:function(e){nt.current_voip_call&&nt.current_voip_call.destroy(),e=(e=e||{}).video?"video":"audio";let t=Mi();nt.current_voip_call=new nt.JingleMessage({session_id:t,video_live:"video"===e},{contact:this.contact}),nt.current_voip_call.startCall(),nt.current_voip_call.modal_view.show({status:yi.JINGLE_MSG_PROPOSE}),nt.trigger("update_jingle_button")},saveForwardedMessage:function(e){let t=null;return Ci(e).get("forwarded_message")&&(t=Ci(e).get("forwarded_message"),this.account.forwarded_messages.indexOf(t)<0&&(t=this.saveForwardedMessage(t))),e=this.account.forwarded_messages.create(Ei.extend({is_forwarded:!0,forwarded_message:t},e.attributes))},onSubmit:function(e,t,i){i=i||{};let s={from_jid:this.account.get("jid"),message:e,mentions:i.mentions,blockquotes:i.blockquotes,markups:i.markup_references,files:i.attached_files,link_references:i.link_references,encrypted:this.model.get("encrypted"),ephemeral_timer:this.model.get("encrypted")&&this.model.get("chat_ephemeral_timer"),submitted_here:!0,forwarded_message:null},n=new Ci.Deferred;n.done((()=>{if(t.length||s.files&&s.files.length||s.link_references&&s.link_references.length||""!==e.removeEmoji()||(s.only_emoji=Array.from(e).length),t.length){let e=[];if(Ei.each(t,(t=>{this.account.forwarded_messages.indexOf(t)<0&&(t=this.saveForwardedMessage(t)),e.push(t)})),s.forwarded_message=e,s.files&&s.files.length){s.type="file_upload",this.account.server_features.get(Ii.NS.HTTP_UPLOAD)&&(s.upload_service=this.account.server_features.get(Ii.NS.HTTP_UPLOAD).get("from")),this.model.get("encrypted")&&this.bottom.disableSendButtons();let e=this.model.messages.create(s);this.model.get("encrypted")&&e.once("change:state",(()=>{this.bottom.enableSendButtons()}))}else{this.model.get("encrypted")&&this.bottom.disableSendButtons();let e=this.model.messages.create(s);this.model.get("encrypted")&&e.once("change:state",(()=>{this.bottom.enableSendButtons()})),this.sendMessage(e)}}else if(s.files&&s.files.length){s.type="file_upload",this.account.server_features.get(Ii.NS.HTTP_UPLOAD)&&(s.upload_service=this.account.server_features.get(Ii.NS.HTTP_UPLOAD).get("from")),this.model.get("encrypted")&&this.bottom.disableSendButtons();let e=this.model.messages.create(s);this.model.get("encrypted")&&e.once("change:state",(()=>{this.bottom.enableSendButtons()}))}else if(e||s.link_references&&s.link_references.length){this.model.get("encrypted")&&this.bottom.disableSendButtons();let e=this.model.messages.create(s);this.model.get("encrypted")&&e.once("change:state",(()=>{this.bottom.enableSendButtons()})),this.sendMessage(e)}this.contact&&this.model.get("archived")&&!this.model.isMuted()&&(message.set("muted",!1),this.head.archiveChat(),this.model.set("archived",!1),nt.chats_view.updateScreenAllChats()),this.model.get("group_chat")&&nt.toolbar_view.$(".active").hasClass("chats")&&(!this.contact||this.model.isMuted()||this.model.get("archived")||nt.chats_view.updateScreenAllChats()),nt.chats_view.scrollToTop(),nt.chats_view.clearSearch()})),this.contact&&this.contact.get("group_chat")&&!this.contact.my_info?this.contact.getMyInfo((()=>{n.resolve()})):this.model.get("encrypted")?this.account.omemo.checkContactFingerprints(this.contact).then((e=>{s.is_contact_trusted=e.trust,n.resolve()})):n.resolve()},addFileMessage:function(e,t){let i=[],s=0;if(this.model.messages_view&&this.model.messages_view.data.get("visible")&&this.model.messages_view.openChat(),e.length>10&&(!this.account.get("gallery_token")||!this.account.get("gallery_url")))return void ki.dialogs.error(nt.getString("too_many_files_at_once"));let n=this.account.server_features.get(Ii.NS.HTTP_UPLOAD);if(!(n||this.account.get("gallery_token")&&this.account.get("gallery_url")))return void ki.dialogs.error(nt.getString("error_file_upload_not_support",[this.account.domain]));let a=new Ci.Deferred;a.done((e=>{t?this.model.messages.create({from_jid:this.account.get("jid"),type:"file_upload",files:e,encrypted:this.model.get("encrypted"),upload_service:n.get("from"),message:"",submitted_here:!0}):this.bottom.addFileSnippets(e)})),Ci(e).each(((t,n)=>{if(ki.isImageType(n.type)){let t=new FileReader,o=new Ci.Deferred;Li.compressImage(n).done((n=>{t.readAsDataURL(n),o.done((t=>{t&&(n.height=t.height,n.width=t.width),t.encrypted_file?i.push(t.encrypted_file):i.push(n),s++,s===e.length&&a.resolve(i)}))})),t.onload=e=>{if(this.model.get("encrypted"))this.encryptFile(e.target.result).then((t=>{let i=t.keydata,s=new File([t.payload],Mi().replace(/-/g,""),{type:n.type});if(s.key=i,"image/svg+xml"===s.type)o.resolve({encrypted_file:s,key:i});else{let t=new Image;t.onload=function(){let e=this.height,n=this.width;s.image_prev=t,o.resolve({height:e,width:n,encrypted_file:s,key:i})},t.src=e.target.result}}));else if("image/svg+xml"===n.type)o.resolve({});else{let t=new Image;t.onload=function(){let e=this.height,t=this.width;o.resolve({height:e,width:t})},t.src=e.target.result}}}else if(this.model.get("encrypted")){let t=new FileReader;t.onload=t=>{this.encryptFile(t.target.result).then((t=>{let o=t.keydata,r=new File([t.payload],Mi().replace(/-/g,""),{type:n.type});n.voice&&(r.voice=!0),n.duration&&(r.duration=n.duration),r.key=o,i.push(r),s++,s===e.length&&a.resolve(i)}))},t.readAsDataURL(n)}else i.push(n),s++,s===e.length&&a.resolve(i)}))},startUploadFile:function(e,t){t.emojify(".chat-msg-author-badge",{emoji_size:16}),t.find(".repeat-upload").hide(),t.find(".status").hide(),t.find(".progress").show(),t.find(".mdi-center-loading-indicator").removeClass("mdi-check").addClass("mdi-close"),t.find(".mdi-center-loading-indicator").removeClass("hidden"),t.find(".dropdown-content.retry-send-message").addClass("hidden"),t.find(".msg-delivering-state").addClass("no-click");let i=0;Ci(e.get("files")).each(((s,n)=>{let a=new File([n],n.name);a.key&&delete a.key;let o=Si({type:"get",to:e.get("upload_service")}).c("request",{xmlns:Ii.NS.HTTP_UPLOAD}).c("filename").t(a.name).up().c("size").t(a.size).up().c("content-type").t(a.type).up(),r=new Ci.Deferred,c=this;this.account.sendIQFast(o,(function(e){let t=Ci(e).find(`slot[xmlns="${Ii.NS.HTTP_UPLOAD}"]`);r.resolve({get_url:t.find("get").text(),put_url:t.find("put").text()})}),(function(i){let s=Ci(i).find(`error text[xml\\:lang="${nt._settings.get("language")}"]`).text();Ci(i).find("error").attr("type");!s&&(s=Ci(i).find("error text").text()),c.onFileNotUploaded(e,t,s,"xmpp")}));let l=Ti.now(),d=10,h=setInterval((()=>{this.account.last_stanza_timestamp<l&&d>20&&e.get("state")===yi.MSG_PENDING||d>20?(e.set("state",yi.MSG_ERROR),clearInterval(h)):e.get("state")!==yi.MSG_PENDING&&clearInterval(h),d+=10}),1e4);r.done((o=>{clearInterval(h);let r=new XMLHttpRequest;t.find(".progress");t.find('div[data-upload-file-id="'+n.upload_id+'"] .circle-wrap .mdi-close').click((()=>{r.abort()})),r.onabort=()=>{this.removeMessage(t)},r.upload.onprogress=e=>{let i=e.loaded/e.total;t.find('div[data-upload-file-id="'+n.upload_id+'"] .circle-percent-text').text(parseInt(100*i)+"%"),t.find('div[data-upload-file-id="'+n.upload_id+'"] .preloader-path-new').css({"stroke-dasharray":150*i+", 149.825"})},r.onload=r.onerror=function(){201===this.status?(e.get("files")[s].url=o.get_url,i++,i==e.get("files").length&&c.onFileUploaded(e,t)):c.onFileNotUploaded(e,t,this.responseText,"http")},t.data("cancel")?r.abort():(r.open("PUT",o.put_url,!0),r.send(a))}))}))},startGalleryUploadFile:function(e,t){t.emojify(".chat-msg-author-badge",{emoji_size:16}),e.set("files",e.get("files").filter((e=>null!=e)));let i=0,s=0,n=this,a=!1,o=[],r=e.get("files").length;t.find(".mdi-center-loading-indicator").removeClass("mdi-check").addClass("mdi-close"),t.find(".uploaded-file").removeClass("uploaded-file"),t.find(".mdi-center-loading-indicator").removeClass("hidden"),t.find(".dropdown-content.retry-send-message").addClass("hidden"),t.find(".msg-delivering-state").addClass("no-click"),Ci(e.get("files")).each(((c,l)=>{if(a)return;l.key&&delete(l=new File([l],l.name)).key;let d=Ti.now(),h=10,g=setInterval((()=>{this.account.last_stanza_timestamp<d&&h>20&&e.get("state")===yi.MSG_PENDING||h>20?(e.set("state",yi.MSG_ERROR),clearInterval(g)):e.get("state")!==yi.MSG_PENDING&&clearInterval(g),h+=10}),1e4),u=new FormData,p={};l.duration&&(p.duration=l.duration),l.width&&(p.width=l.width),l.height&&(p.height=l.height),u.append("file",l,l.name),u.append("metadata",JSON.stringify(p)),l.size&&u.append("size",l.size),l.voice?(u.append("media_type",l.type+"+voice"),u.append("context","voice")):u.append("media_type",l.type),clearInterval(g),e.get("files")[c].is_errored=!1;let m=new XMLHttpRequest;t.find(".progress");m.formData=u,o=o.concat([m]),m.arrayIndex=o.indexOf(m),t.find('div[data-upload-file-id="'+l.upload_id+'"] .circle-wrap .mdi-close').one("click",(()=>{s++,m.is_uploading?m.abort():r-s==0?(e.set("files",[]),n.model.get("encrypted")&&(n.bottom.setEditedMessageAttachments(e,!0),n.bottom.setRedactedUploadMessage(e)),n.removeMessage(t)):(m.is_cancelled=!0,t.find('.unuploaded-file[data-upload-file-id="'+l.upload_id+'"]').remove(),t.find('div[data-upload-file-id="'+l.upload_id+'"] .circle-wrap').remove(),e.get("files")[c]=null)})),m.upload.onprogress=e=>{let i=e.loaded/e.total;t.find('div[data-upload-file-id="'+l.upload_id+'"] .circle-percent-text').text(parseInt(100*i)+"%"),t.find('div[data-upload-file-id="'+l.upload_id+'"] .preloader-path-new').css({"stroke-dasharray":150*i+", 149.825"})},m.oncancel=m.onload=m.onerror=m.onabort=function(){let d=this.fakeStatus||this.status;if(d>=200&&d<300){t.find('div[data-upload-file-id="'+l.upload_id+'"] .mdi-center-loading-indicator').addClass("mdi-check").removeClass("mdi-close");let s=this.response&&ki.isJsonString(this.response)?JSON.parse(this.response):this.fakeResponse;for(e.get("files")[c].id=s.id,e.get("files")[c].created_at=s.created_at,s.thumbnail&&s.thumbnail.url&&(e.get("files")[c].thumbnail=s.thumbnail.url),e.get("files")[c].url=s.file,i++,t.find('div[data-upload-file-id="'+l.upload_id+'"]').addClass("uploaded-file");o[i]&&o[i].is_cancelled;)i++;i==e.get("files").length?n.onFileUploaded(e,t):o[i]&&n.account.testGalleryTokenExpire((()=>{n.account.testGalleryFileSlot(o[i].formData.get("file"),(e=>{a||(e&&e.quota?e.file&&e.hash?(o[i].fakeStatus=200,o[i].fakeResponse={file:e.file,id:e.id,name:e.name,thumbnail:e.thumbnail,created_at:e.created_at},o[i].oncancel()):(o[i].open("POST",n.account.get("gallery_url")+"v1/files/upload/",!0),o[i].setRequestHeader("Authorization","Bearer "+n.account.get("gallery_token")),o[i].is_uploading=!0,o[i].send(o[i].formData)):(o[i].fakeStatus=e&&e.status?e.status:400,o[i].fakeResponse=e&&e.error?e.error:"Unknown error",o[i].oncancel()))}))}))}else{if(0===d&&a)return;if(r-s==0&&0===d)e.set("files",[]),n.model.get("encrypted")&&(n.bottom.setEditedMessageAttachments(e,!0),n.bottom.setRedactedUploadMessage(e)),n.removeMessage(t);else{let s,h;if(n.account.handleCommonGalleryErrors(this.response),500===d)s=this.fakeResponse||this.statusText;else if(400===d||this.fakeStatus){if(s=this.fakeResponse||ki.isJsonString(this.response)&&JSON.parse(this.response).error||"Could not parse response",h=this.fakeStatus||ki.isJsonString(this.response)&&JSON.parse(this.response).status||500,h&&429==h)return void setTimeout((()=>{n.account.testGalleryTokenExpire((()=>{n.account.testGalleryFileSlot(o[i].formData.get("file"),(e=>{a||(e&&e.quota?e.file&&e.hash?(o[i].fakeStatus=200,o[i].fakeResponse={file:e.file,id:e.id,name:e.name,thumbnail:e.thumbnail,created_at:e.created_at},o[i].oncancel()):(o[i].open("POST",n.account.get("gallery_url")+"v1/files/upload/",!0),o[i].setRequestHeader("Authorization","Bearer "+n.account.get("gallery_token")),o[i].is_uploading=!0,o[i].send(o[i].formData)):(o[i].fakeStatus=e&&e.status?e.status:400,o[i].fakeResponse=e&&e.error?e.error:"Unknown error",o[i].oncancel()))}))}))}),1e3)}else 0===d&&(t.find('.unuploaded-file[data-upload-file-id="'+l.upload_id+'"]').remove(),t.find('div[data-upload-file-id="'+l.upload_id+'"] .circle-wrap').remove());if(0===d&&(e.get("files")[c]=null),!e.get("files").filter((e=>null!=e)).length&&!e.get("message"))return n.model.get("encrypted")&&(n.bottom.setEditedMessageAttachments(e,!0),n.bottom.setRedactedUploadMessage(e)),void n.removeMessage(t);if(i++,0!=d)t.find('div[data-upload-file-id="'+l.upload_id+'"]').closest(".img-content-template.hidden").length?(t.find(".hidden-images .circle-percent-text").text(s),t.find(".hidden-images .mdi-alert-circle").removeClass("hidden"),t.find(".hidden-images .mdi-alert-circle").prop("title",s),t.find(".hidden-images .mdi-center-loading-indicator").addClass("hidden"),t.find(".hidden-images").addClass("upload-error"),t.find(".hidden-images").css({"border-color":"#EF9A9A"})):(t.find('div[data-upload-file-id="'+l.upload_id+'"] .circle-percent-text').text(s),t.find('div[data-upload-file-id="'+l.upload_id+'"] .mdi-alert-circle').removeClass("hidden"),t.find('div[data-upload-file-id="'+l.upload_id+'"] .mdi-alert-circle').prop("title",s),t.find('div[data-upload-file-id="'+l.upload_id+'"] .mdi-center-loading-indicator').addClass("hidden"),t.find('div[data-upload-file-id="'+l.upload_id+'"]').addClass("upload-error"),t.find('div[data-upload-file-id="'+l.upload_id+'"]').css({"border-color":"#EF9A9A"})),e.get("files")[c].is_errored=!0,a=!0,Ci(o).each(((e,t)=>{t.abort()})),n.onFileNotUploaded(e,t,s);else if(i==r)n.onFileUploaded(e,t);else{for(;o[i]&&o[i].is_cancelled;)i++;i==r?n.onFileUploaded(e,t):n.account.testGalleryTokenExpire((()=>{n.account.testGalleryFileSlot(o[i].formData.get("file"),(e=>{a||(e&&e.quota?e.file&&e.hash?(o[i].fakeStatus=200,o[i].fakeResponse={file:e.file,id:e.id,name:e.name,thumbnail:e.thumbnail,created_at:e.created_at},o[i].oncancel()):(o[i].open("POST",n.account.get("gallery_url")+"v1/files/upload/",!0),o[i].setRequestHeader("Authorization","Bearer "+n.account.get("gallery_token")),o[i].is_uploading=!0,o[i].send(o[i].formData)):(o[i].fakeStatus=e&&e.status?e.status:400,o[i].fakeResponse=e&&e.error?e.error:"Unknown error",o[i].oncancel()))}))}))}}}}})),o.length&&(t.data("cancel")?o[0].abort():this.account.testGalleryTokenExpire((()=>{this.account.testGalleryFileSlot(o[0].formData.get("file"),(e=>{a||(e&&e.quota?e.file&&e.hash?(o[0].fakeStatus=200,o[0].fakeResponse={file:e.file,id:e.id,name:e.name,thumbnail:e.thumbnail,created_at:e.created_at},o[0].oncancel()):(o[0].open("POST",this.account.get("gallery_url")+"v1/files/upload/",!0),o[0].setRequestHeader("Authorization","Bearer "+this.account.get("gallery_token")),o[0].is_uploading=!0,o[0].send(o[0].formData)):(o[i].fakeStatus=e&&e.status?e.status:400,o[i].fakeResponse=e&&e.error?e.error:"Unknown error",o[0].oncancel()))}))}),(i=>{let s,r=i;e.get("files").length&&(s=e.get("files")[0]),s&&!Ei.isUndefined(s.upload_id)&&(t.find('div[data-upload-file-id="'+s.upload_id+'"] .circle-percent-text').text(r),t.find('div[data-upload-file-id="'+s.upload_id+'"] .mdi-alert-circle').removeClass("hidden"),t.find('div[data-upload-file-id="'+s.upload_id+'"] .mdi-alert-circle').prop("title",r),t.find('div[data-upload-file-id="'+s.upload_id+'"] .mdi-center-loading-indicator').addClass("hidden"),t.find('div[data-upload-file-id="'+s.upload_id+'"]').addClass("upload-error"),t.find('div[data-upload-file-id="'+s.upload_id+'"]').css({"border-color":"#EF9A9A"})),e.get("files").length&&(e.get("files")[0].is_errored=!0),a=!0,Ci(o).each(((e,t)=>{t.abort()})),n.onFileNotUploaded(e,t,r)})))},encryptFile:async function(e){return await ki.AES.encrypt(e)},onFileUploaded:function(e,t){t.find(".dropdown-content.retry-send-message").removeClass("hidden"),t.find(".msg-delivering-state").removeClass("no-click"),e.set("files",e.get("files").filter((e=>null!=e)));let i=e.get("files"),s=this,n=!1,a=[],o=[],r=[];if(i.length||this.onFileNotUploaded(e,t),Ci(i).each(((e,t)=>{let i={name:t.name,type:t.type,size:t.size,description:t.description||"",sources:[t.url]};t.key&&(i.key=t.key),t.voice&&(i.voice=!0),this.account.get("gallery_token")&&this.account.get("gallery_url")&&Ei.extend(i,{id:t.id,created:t.created_at,thumbnail:t.thumbnail}),ki.isImageType(t.type)?(Ei.extend(i,{width:t.width,height:t.height}),a.push(i)):ki.isVideoType(t.type)?(Ei.extend(i,{duration:t.duration}),r.push(i)):(Ei.extend(i,{duration:t.duration}),o.push(i))})),t.find(".unuploaded-images").remove(),t.find(".unuploaded-file").remove(),a.length>0)if(a.length>1){let e;if(a.length>6){let t="template-for-6",i=a.length-5;!nt.settings.load_media&&(t="hidden-template-for-6"),e=Ci(xi.messages[t]({images:a})),e.find(".last-image").addClass("hidden-images"),e.find(".image-counter").text("+"+i)}else{let t="template-for-"+a.length;!nt.settings.load_media&&(t="hidden-template-for-"+a.length),e=Ci(xi.messages[t]({images:a}))}nt.settings.load_media||e.find("img").removeClass("uploaded-img-for-collage popup-img").addClass("unloaded-img"),t.removeClass("file-upload noselect"),t.find(".chat-msg-media-content .chat-file-info").remove(),t.find(".chat-msg-media-content.chat-main-upload-media").append(e),!nt.settings.load_media&&t.find(".chat-msg-media-content.chat-main-upload-media .img-content-template").first().append(Ci('<div class="img-privacy-warning"/>').text(nt.getString("load_image_privacy_warning")))}else{let e=this.createImage(a[0]),i=s.createImageContainer(a[0]);e.onload=()=>{this.imageOnload(t)},t.removeClass("file-upload noselect"),t.find(".chat-msg-media-content .chat-file-info").remove(),t.find(".chat-msg-media-content.chat-main-upload-media").append(i),t.find(".chat-msg-media-content.chat-main-upload-media .img-content").html(e),!nt.settings.load_media&&t.find(".chat-msg-media-content.chat-main-upload-media .img-content").append(Ci('<div class="img-privacy-warning"/>').text(nt.getString("load_image_privacy_warning")))}if(e.set("videos",r),r.length>0){let i=this.createVideoContainer();t.find(".chat-msg-media-content.chat-main-upload-media").find(".chat-file-info").remove(),t.find(".chat-msg-media-content.chat-main-upload-media").append(i),r.forEach(((e,i)=>{let s=this.createVideo(e,i);t.find(".video-content").append(s)})),this.videoOnload(t,e),t.removeClass("file-upload noselect")}o.length>0&&(t.removeClass("file-upload noselect"),Ci(o).each(((i,s)=>{i||a.length||(t.find(".chat-msg-media-content.chat-main-upload-media").find(".chat-file-info").remove(),t.find(".chat-msg-media-content.chat-main-upload-media").removeClass("chat-file-content")),s.type&&(n=!!s.voice);let r,c={name:s.name,type:s.type,sources:s.sources},l=ki.file_type_icon(s.type);if(1===o.length&&n&&(c.name=nt.getString("voice_message")),Ei.extend(c,{size:ki.pretty_size(s.size),is_audio:n,duration:ki.pretty_duration(s.duration),mdi_icon:l}),r=Ci(n?xi.messages.audio_file(c):xi.messages.file(c)),t.find(".chat-msg-media-content.chat-main-upload-media").append(r),n&&t.find(".link-file").length){let i={$audio_elem:t.find(".link-file")[0]};i.msg_time=t.attr("data-time"),i.author=t.find(".chat-msg-author").text(),i.message_unique_id=t.attr("data-uniqueid"),this.model.get("group_chat")&&this.contact.my_info&&(i.contact_avatar=this.contact.my_info.get("b64_avatar"),i.contact_avatar?i.contact_avatar=Li.getCachedImage(i.contact_avatar):(this.account.cached_image&&(i.contact_avatar=this.account.cached_image),!i.contact_avatar&&(i.contact_avatar=Li.getDefaultAvatar(this.contact.my_info.get("nickname"))))),i.contact_avatar||(i.contact_avatar=this.account.cached_image),this.model.plyr_players.filter((e=>e.message_unique_id===i.message_unique_id)).length||(this.model.plyr_players=this.model.plyr_players.concat([i]).sort(((e,t)=>e.msg_time-t.msg_time)),nt.plyr_players=nt.plyr_players.concat([i]));let s=t.find(".link-file").find(".file-link-download").attr("href");t.find(".link-file").find(".mdi-play").removeClass("no-uploaded"),i.$audio_elem.voice_message=this.renderVoiceMessage(t.find(".link-file").find(".file-container")[0],s),e.set("msg_player_audios",[i]),nt.trigger("plyr_player_updated")}}))),this.initPopup(t),e.set("images",a),e.set("files",o),(e.get("encrypted")||this.model.get("encrypted"))&&e.get("images").length&&this.decryptImages(e),this.sendMessage(e),this.scrollToBottom()},createAudio:function(e,t){let i=WaveSurfer.create({container:t[0],scrollParent:!1,barWidth:3,height:48,barHeight:48,cursorColor:"rgba(211,47,47,0.8)",autoCenter:!1,normalize:!0,hideScrollBar:!0,progressColor:"#757575"});return i.load(e),i.setVolume(.5),i},createImage:function(e){let t=new Image,i=.7*(.715*nt.main_panel.$el.width()-176);return e.height&&(t.height=e.height),e.width&&(t.width=e.width),i=i>400?400:i,nt.settings.load_media?(t.src=e.sources[0],Ci(t).addClass("uploaded-img popup-img")):Ci(t).addClass("unloaded-img"),Ci(t).attr({"data-mfp-src":e.sources[0],title:e.description||""}),t.height&&t.width&&(t.width>i&&(t.height=t.height*(i/t.width),t.width=i),t.height>400&&(t.width=t.width*(400/t.height),t.height=400)),t},createVideo:function(e,t){e.pretty_size=ki.pretty_size(e.size);let i={video_src:e.sources[0],thumbnail:e.thumbnail,video_id:t},s=Ci(xi.messages.video(i));return e.thumbnail&&setTimeout((()=>{s.append(Ci(`<img class="plyr-video-poster" src="${e.thumbnail}" onerror="this.style.display='none'">`))}),1e3),s},createImageContainer:function(){return Ci('<div class="img-content"/>')[0]},createVideoContainer:function(){return Ci('<div class="video-content"/>')[0]},onFileNotUploaded:function(e,t,i,s,n){i?nt.getString("file_upload__error",[i]):nt.getString("file_upload__error_default");t.find(".dropdown-content.retry-send-message").removeClass("hidden"),t.find(".msg-delivering-state").removeClass("no-click"),t.find(".circle-wrap .mdi-close").unbind("click"),e.set("state",yi.MSG_ERROR),"http"==s||"wait"==n?t.find(".repeat-upload").one("click",(()=>{this.startUploadFile(e,t)})):(this.account.get("gallery_token")&&this.account.get("gallery_url")&&this.bottom.deleteFilesFromMessages([e]),t.find(".edit-upload").one("click",(()=>{this.model.get("encrypted")&&(this.bottom.setEditedMessageAttachments(e,!0),this.bottom.setRedactedUploadMessage(e)),this.removeMessage(t)})),t.find(".repeat-upload").one("click",(()=>{e.set("state",yi.MSG_PENDING),t.find(".upload-error .circle-percent-text").text("0%"),t.find(".mdi-alert-circle").addClass("hidden"),t.find(".mdi-close").removeClass("hidden"),t.find(".upload-error").css({"border-color":""}),t.find(".upload-error").removeClass("upload-error"),t.find(".preloader-path-new").css({"stroke-dasharray":"0, 149.825"}),this.account.get("gallery_token")&&this.account.get("gallery_url")?this.startGalleryUploadFile(e,t):this.startUploadFile(e,t)})))},sendChatState:function(e,t){if(this.model.get("saved")||this.contact&&"offline"===this.contact.get("status"))return;clearTimeout(this._chatstate_timeout),clearTimeout(this._chatstate_send_timeout),this.chat_state=!1;let i=$i({to:this.model.get("jid"),type:"chat"}).c(e,{xmlns:Ii.NS.CHATSTATES});if(this.model.get("encrypted")){if(!this.account.settings.get("encrypted_chatstates"))return;t="encrypted"}t&&i.c("subtype",{xmlns:Ii.NS.EXTENDED_CHATSTATES,type:t}),"composing"===e&&(this.chat_state=!0),this.account.sendMsg(i),"composing"===e&&(this._chatstate_timeout=setTimeout((()=>{this.chat_state=!1}),yi.CHATSTATE_TIMEOUT_PAUSED),this._chatstate_send_timeout=setTimeout((()=>{!this.chat_state&&nt.settings.typing_notifications&&this.sendChatState("paused")}),2*yi.CHATSTATE_TIMEOUT_PAUSED))},onChangedMessageTimestamp:function(e){let t=this.$(`.chat-message[data-uniqueid="${e.get("unique_id")}"]`),i=t.next(),s=t.prev();t.attr({"data-time":e.get("timestamp")}),Ai.error("MESSAGE DETACHEDDDDD !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!1!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!11"),Ai.error(t),t.detach(),t.children(".right-side").find(".msg-time").attr({title:ji(e.get("time"))}).text(ki.pretty_time(e.get("time"))),e.get("user_info")&&t.attr("data-from-id",e.get("user_info").id),this.model.messages.sort();let n=this.model.messages.indexOf(e);if(0===n)s.hasClass("chat-day-indicator")?(Ai.error("here !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!1!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!11"),s.after(t)):(Ai.error("here !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!1!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!11"),t.prependTo(this.$(".chat-content")));else{let a=this.$(".chat-message").eq(n-1),o=t.data("from")===a.data("from"),r=Ti(t.data("time")).startOf("day").isSame(Ti(a.data("time")).startOf("day"));s.data("from")===t.data("from")||i.data("from")!==t.data("from")||"delivered"!==i.children(".right-side").find(".msg-delivering-state").attr("data-state")&&"displayed"!==i.children(".right-side").find(".msg-delivering-state").attr("data-state")||this.showMessageAuthor(i),a.next().hasClass("chat-day-indicator")&&Ti(a.next().data("time")).format("DD.MM.YY")===Ti(e.get("timestamp")).format("DD.MM.YY")?(Ai.error("here !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!1!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!11"),t.insertAfter(a.next()),this.showMessageAuthor(t)):(Ai.error("here !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!1!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!11"),t.insertAfter(a)),e.get("data_form")||e.get("forwarded_message")||!r||!o||a.hasClass("system")||a.hasClass("saved-main")?this.showMessageAuthor(t):this.hideMessageAuthor(t)}let a=this.model.last_message;(!a||e.get("timestamp")>a.get("timestamp"))&&(this.model.last_message=e,this.model.get("notifications")&&this.account.trigger("notification_last_msg_updated",e.get("stanza_id")),this.chat_item.updateLastMessage())},onChangedReadState:function(e){let t=e.get("is_unread"),i=e.get("synced_from_server"),s=e.get("is_unread_archived"),n=e.get("missed_msg"),a=this.$(`.chat-message[data-uniqueid="${e.get("unique_id")}"]`);t?(s||i||n||this.model.messages_unread.add(e),e.get("was_readen")||(a.addClass("unread-message"),a.addClass("unread-message-background")),this.model.recountUnread()):((!s&&!i&&!n||this.model.messages_unread.indexOf(e)>-1)&&this.model.messages_unread.remove(e),e.set("was_readen",!0),a.removeClass("unread-message"),this.model.last_message&&this.model.last_message===e&&this.model.set("const_unread",0),setTimeout((()=>{a.removeClass("unread-message-background")}),1e3),this.model.recountUnread(),e.get("muted")||nt.recountAllMessageCounter(),e.get("ephemeral_timer")&&(e.set("displayed_time",new Date),e.collection.checkEphemeralTimers()))},onTouchMessage:function(e){if(3===e.which)return;let t,i=Ci(e.target);t=i.hasClass("chat-message")?i:i.parents(".chat-message"),0!=window.getSelection()&&(ki.clearSelection(),t.attr("data-no-select-on-mouseup","1"))},onClickLink:function(e){let t=Ci(e.target).closest(".chat-message"),i=this.model.messages.get(t.data("uniqueid"));i||(i=this.account.participant_messages.get(t.data("uniqueid")));let s=i.get("files"),n=i.get("videos"),a=i.get("images"),o=i.get("link_references"),r=[],c=[],l="";i.get("forwarded_message")&&i.get("forwarded_message").forEach((e=>{e.get("images")&&r.push(e.get("images")),e.get("videos")&&r.push(e.get("videos")),e.get("link_references")&&c.push(e.get("link_references"))})),Ci(s).each((function(e,t){e>0&&(l+="\n"),l+=t.sources[0]})),Ci(a).each((function(e,t){e>0&&(l+="\n"),l+=t.sources[0]})),Ci(n).each((function(e,t){e>0&&(l+="\n"),l+=t.sources[0]})),Ci(o).each((function(e,t){""!=l&&(l+="\n"),l+=t.url})),Ci(r).each((function(e,t){Ci(t).each((function(e,t){""!=l&&(l+="\n"),l+=t.sources[0]}))})),Ci(c).each((function(e,t){Ci(t).each((function(e,t){""!=l&&(l+="\n"),l+=t.url}))})),ki.copyTextToClipboard(l,nt.getString("toast_link_copied"),nt.getString("toast__not_copied_in_clipboard"))},onClickLocationLink:function(e){e.preventDefault();let t=Ci(e.target).closest(".chat-message"),i=this.model.messages.get(t.data("uniqueid"));i||(i=this.account.participant_messages.get(t.data("uniqueid")));let s=i.get("locations"),n=[],a="";i.get("forwarded_message")&&i.get("forwarded_message").forEach((e=>{e.get("locations")&&n.push(e.get("locations"))})),Ci(s).each((function(e,t){a+="geo:"+t.lat+","+t.lon})),Ci(n).each((function(e,t){Ci(t).each((function(e,t){""!=a&&(a+="\n"),a+="geo:"+t.lat+","+t.lon}))})),ki.copyTextToClipboard(a,nt.getString("toast_location_copied"),nt.getString("toast__not_copied_in_clipboard"))},showParticipantProperties:function(e,t){t=t||{};let i=this.contact.participants.get(e);i?(this.contact.my_info&&this.contact.my_info.get("id")===e&&(e=""),this.contact.participants.participantsRequest({id:e},(e=>{let t=this.account.parseDataForm(Ci(e).find(`x[xmlns="${Ii.NS.DATAFORM}"]`));this.contact.showDetailsRight("all-chats",{type:"participant"}),this.contact.details_view_right.participants.participant_properties_panel.open(i,t)}))):this.contact.getBlockedParticipants((s=>{Ei.extend(t,{present:null,subscription:null}),Ci(s).find(`query user:contains(${e})`).length?t.blocked=!0:t.blocked=!1,i=new nt.Participant(t,{contact:this.contact}),this.contact.showDetailsRight("all-chats",{type:"participant"}),this.contact.details_view_right.participants.participant_properties_panel.open(i,{})}),(e=>{Ei.extend(t,{present:null,subscription:null}),i=new nt.Participant(t,{contact:this.contact}),this.contact.showDetailsRight("all-chats",{type:"participant"}),this.contact.details_view_right.participants.participant_properties_panel.open(i,{})}))},onClickNotification:function(e){Ci(e.target).closest(".chat-message").removeClass("unread-message-background")},onClickMessage:function(e){let t=Ci(e.target);if(this.model.get("notifications"))this.onClickNotification(e);else if(!(t.hasClass("not-decrypted-icon")||t.closest(".dropdown-content").length||t.closest(".not-decrypted-icon").length)){if(t.hasClass("file-link-download")){e.preventDefault();let i=this.model.messages.get(t.closest(".chat-message").data("uniqueid"))||this.account.context_messages.get(t.closest(".chat-message").data("uniqueid")),s=t.attr("href"),n=(i.get("files")||[]).find((e=>e.sources[0]==s));if(n&&n.key)return void this.model.messages.decryptFile(s,n.key).then((e=>{if(null===e)return;let t=document.createElement("a");t.href=e,t.download=n.name,t.click()}));nt.openWindow(t.attr("href"))}if(!(t.hasClass("msg-delivering-state")||t.hasClass("not-decrypted-tooltip")||t.hasClass("audio-control-panel")||t.hasClass("voice-msg-current-time")||t.hasClass("voice-msg-total-time"))){if(t.closest(".plyr-video-container").length>0){let e=this.model.messages.get(t.closest(".chat-message").data("uniqueid")),i=t.closest(".plyr-video-container");return!e&&(e=this.account.context_messages.get(t.closest(".chat-message").data("uniqueid"))),void(e&&e.get("msg_player_videos")&&(nt.plyr_player_popup?nt.plyr_player_popup.showNewVideo({player:e.get("msg_player_videos")[i.attr("data-message-id")]}):(nt.plyr_player_popup=new nt.PlyrPlayerPopupView({}),nt.plyr_player_popup.show({player:e.get("msg_player_videos")[i.attr("data-message-id")]}))))}if(!(t.hasClass("mdi-link-variant")||t.hasClass("msg-copy-location-content")||t.hasClass("btn-retry-send-message")||t.hasClass("btn-delete-message")||t.hasClass("file-link-download")||t.is("canvas")||t.hasClass("voice-message-volume"))){let i,s=t.closest(".chat-message"),n=t.parents(".fwd-message").first(),a=n.length>0,o=s.attr("data-no-select-on-mouseup");if(s.attr("data-no-select-on-mouseup",""),t.hasClass("data-form-field"))return i=this.model.messages.get(s.data("uniqueid")),void(i&&this.model.sendDataForm(i,t.attr("id")));if(0!=window.getSelection())return;if(t.hasClass("collapsed-forwarded-message")){let e=this.buildMessageHtml(this.account.forwarded_messages.get(t.data("uniqueid"))),i=new nt.ExpandedMessagePanel({account:this.account,chat_content:this});return i.$el.attr("data-color",this.account.settings.get("color")),this.updateMessageInChat(e,this.account.forwarded_messages.get(t.data("uniqueid"))),this.initPopup(e),void i.open(e)}if(t.hasClass("chat-msg-author")||t.hasClass("fwd-msg-author")){let e=a?n.data("from"):s.data("from"),i=a?n.data("fromId"):s.data("fromId");if(this.contact&&this.contact.get("group_chat")){this.bottom.quill.focus();let s=this.bottom.quill.getSelection(),n={jid:e,id:i,nickname:t.text()};s&&(s=s.index),n.position=s||0,this.bottom.insertMention(n)}else if(e===this.account.get("jid"))this.account.showSettings();else if(e===this.model.get("jid"))this.contact&&this.contact.showDetailsRight("all-chats",{encrypted:this.model.get("encrypted")});else{if(e==i)return;let t=this.account.contacts.mergeContact(e);t&&t.showDetailsRight("all-chats",{encrypted:this.model.get("encrypted")})}return}if(t.hasClass("circle-avatar")){let e=a?n.data("from"):s.data("from");if(this.model.get("group_chat")){let e=a?n.attr("data-from-id"):s.attr("data-from-id"),t=a?n.attr("data-uniqueid"):s.attr("data-uniqueid"),i=this.model.messages.get(t)||this.account.context_messages.get(t)||this.account.searched_messages.get(t),o=i&&i.get("user_info");return void(e&&this.showParticipantProperties(e,o))}if(e===this.account.get("jid"))this.account.showSettings();else if(e===this.model.get("jid"))this.contact&&this.contact.showDetailsRight("all-chats",{encrypted:this.model.get("encrypted")});else{let t=this.account.contacts.mergeContact(e);t&&t.showDetailsRight("all-chats",{encrypted:this.model.get("encrypted")})}return}if(t.hasClass("mention")){let e=t.data("target");if(this.contact.get("group_chat")){if(e&&!this.contact.participants.get(e)){let t=this.contact.participants.find((t=>t.get("jid")===e));t&&(e=t.get("id"))}e&&this.showParticipantProperties(e)}else if(e===this.account.get("jid"))this.account.showSettings();else if(e===this.model.get("jid"))this.contact&&this.contact.showDetailsRight("all-chats",{encrypted:this.model.get("encrypted")});else{let t=this.account.contacts.mergeContact(e);t&&t.showDetailsRight("all-chats",{encrypted:this.model.get("encrypted")})}return}if(t.hasClass("voice-message-play")||t.hasClass("no-uploaded")){let e=t.closest(".link-file"),i=e.find(".file-link-download").attr("href");if(e.find(".mdi-play").removeClass("no-uploaded"),t.closest(".chat-message").hasClass("encrypted")){let s=this.model.messages.get(t.closest(".chat-message").data("uniqueid")),n=t.closest(".link-file").find(".file-link-download").attr("href"),a=(s.get("files")||[]).find((e=>e.sources[0]==n));a&&a.key&&this.model.messages.decryptFile(i,a.key).then((t=>{null!==t&&(e[0].voice_message=this.renderVoiceMessage(e.find(".file-container")[0],t))}))}else e[0].voice_message=this.renderVoiceMessage(e.find(".file-container")[0],i);return}if(t.hasClass("mdi-play")&&!(t.closest(".video-file-wrap").length>0)){return void t.closest(".link-file")[0].voice_message.play()}if(t.hasClass("mdi-pause")&&!(t.closest(".video-file-wrap").length>0)){return void t.closest(".link-file")[0].voice_message.pause()}if(t.hasClass("msg-hyperlink")){e&&e.preventDefault(),t.blur();let i=t.attr("href");return void ki.dialogs.ask(nt.getString("open_this_link"),decodeURI(i),null,{ok_button_text:nt.getString("open")}).done((e=>{e&&ki.openWindow(i)}))}if(t.closest(".msg-hyperlink").length>0){e&&e.preventDefault(),t.blur();let i=t.closest(".msg-hyperlink").attr("href");return void ki.dialogs.ask(nt.getString("open_this_link"),decodeURI(i),null,{ok_button_text:nt.getString("open")}).done((e=>{e&&ki.openWindow(i)}))}if(t.hasClass("uploaded-img")||t.hasClass("img-content")||t.hasClass("uploaded-img-for-collage"))return void(t.hasClass("img-content")&&t.children("img").click());if(t.hasClass("unloaded-img")){let e=this.getImagesInformation(this.model.messages.get(t.closest(".chat-message").data("uniqueid")));return void ki.dialogs.ask(nt.getString("privacy_risk"),nt.getString("privacy_risk_text"),{inverted_buttons:!0,img_details:Ci(xi.messages.images_details({img_information:e}))},{ok_button_text:nt.getString("privacy_risk_btn_ok")}).done((e=>{e&&(t.attr("src",t.attr("data-mfp-src")),t.removeClass("unloaded-img"),t.addClass("uploaded-img"),this.initPopup(t.closest(".chat-message")),t.closest(".chat-message").find(".img-privacy-warning").remove())}))}if(t.hasClass("img-content-template")&&t.find("img").hasClass("unloaded-img")){let e=this.getImagesInformation(this.model.messages.get(t.closest(".chat-message").data("uniqueid")));return void ki.dialogs.ask(nt.getString("privacy_risk"),nt.getString("privacy_risk_text"),{inverted_buttons:!0,img_details:Ci(xi.messages.images_details({img_information:e}))},{ok_button_text:nt.getString("privacy_risk_btn_ok")}).done((e=>{if(e){let e=t.closest(".chat-message"),i=e.find(".img-content-template img");i.each(((e,t)=>{Ci(t).attr("src",Ci(t).attr("data-mfp-src"))})),i.removeClass("unloaded-img"),i.addClass("uploaded-img-for-collage"),this.initPopup(e),t.closest(".chat-message").find(".img-privacy-warning").remove()}}))}if(t.hasClass("chat-msg-location-content")||t.hasClass("location-link")||t.closest(".video-file-wrap").length>0||t.closest(".embed-video").length>0)return;if(t.hasClass("last-image"))return void(t.find("img").length&&t.find("img")[0].click());if(t.hasClass("image-counter"))return void t.closest(".last-image").find("img")[0].click();if(s.hasClass("searched-message"))return void this.model.getMessageContext(s.data("uniqueid"),{searched_messages:!0});let r=()=>{let t=s.hasClass("selected")?s.prevAll(".chat-message.selected").last():s.prevAll(".chat-message.selected").first();if(!t.length&&(t=s.hasClass("selected")?s.nextAll(".chat-message.selected").last():s.nextAll(".chat-message.selected").first()),!t.length&&(t=s.hasClass("selected")?s.prevAll(".chat-message.selected").first():s.prevAll(".chat-message.selected").last()),(nt.shiftctrl_pressed||nt.shift_pressed)&&t.length){let i=[],n=s.hasClass("selected");return i=t.attr("data-time")<s.attr("data-time")?t.nextUntil(s,".chat-message:not(.system)"):s.nextUntil(t,".chat-message:not(.system)"),nt.shift_pressed&&this.$(".chat-message").removeClass("selected"),t.switchClass("selected",!n),i.switchClass("selected",!n),s.switchClass("selected",!n),e.preventDefault(),this.bottom.manageSelectedMessages(),!1}if(!o)return s.switchClass("selected",!s.hasClass("selected")),e.preventDefault(),this.bottom.manageSelectedMessages(),!1};if(s.hasClass("participant-message")||s.hasClass("context-message")){if(s.hasClass("system"))return;return void r()}if(i=this.model.messages.get(s.data("uniqueid")),!i)return;let c=i.get("type");if("file_upload"===c)return;if("system"===c)return;if(a){if(!this.account.forwarded_messages.get(n.data("uniqueid")))return;r()}else r()}}}},onClickLocation:function(e){e.preventDefault();let t=Ci(e.target).attr("lon"),i=Ci(e.target).attr("lat"),s=Ci(e.target).attr("title");t&&i&&(nt.popup_coordinates=[t,i],nt.location_name=s,new nt.ChatLocationView({content:this}).show(e))},onHoverLocation:function(e){let t=Ci(e.target).attr("lon"),i=Ci(e.target).attr("lat");fetch("https://nominatim.openstreetmap.org/reverse?format=json&lon="+t+"&lat="+i).then((function(e){return e.json()})).then((function(t){t.error?Ci(e.target).attr("title",nt.getString("location_fragment__address_error__title")):Ci(e.target).attr("title",t.display_name),Ci(e.target).removeClass("no-title")}))},retrySendMessage:function(e){let t=Ci(e.target).closest(".chat-message"),i=this.model.messages.get(t.data("uniqueid"));"file_upload"===i.get("type")?(i.set("state",yi.MSG_PENDING),this.startUploadFile(i,t)):this.sendMessage(i),e.preventDefault()},removeFileErrorMessage:function(e){let t=Ci(e.target).closest(".chat-message");this.removeMessage(t),e.preventDefault(),this.chat_item.updateChatError()},onUpdatePlyr:function(e){if(this.$(".plyr-video-container").removeClass("active-plyr-container"),nt.current_plyr_player&&nt.current_plyr_player.player_item){let e=this.$(`.chat-message[data-uniqueid="${nt.current_plyr_player.message_unique_id}"]`);e.length&&e.find(`.plyr-video-container[data-message-id="${nt.current_plyr_player.player_item.message_id}"]`).addClass("active-plyr-container")}}}),nt.ChatContentPlaceholderView=nt.BasicView.extend({className:"chat-body-content-placeholder-wrap",template:xi.chat_content_placeholder,events:{},_initialize:function(e){return this},render:function(){}}),nt.ExpandedMessagePanel=nt.BasicView.extend({className:"modal expanded-message",template:xi.group_chats.pinned_message_panel,ps_selector:".modal-content",ps_settings:{theme:"item-list"},events:{"click .collapsed-forwarded-message":"expandFwdMessage","click .chat-message":"onClickPinnedMessage","click .chat-msg-location-content":"onClickExpandedMessageLocation","click .mdi-link-variant":"onClickLink"},_initialize:function(e){this.account=e.account,this.chat_content=e.chat_content,this.message=e.message},open:function(e){this.$el.css("width",e.find(".chat-text-content").text().length<=60?540:.715*nt.main_panel.$el.width()),this.$el.openModal({ready:()=>{this.updateScrollBar(),this.$(".modal-content").css("height",this.$el.height()-12),e.find(".plyr-video-container").length&&this.chat_content.initPlyrEmbedPlayer(e,this.message)},complete:()=>{this.$el.detach(),this.data.set("visible",!1)}}),e.find(".right-side .msg-delivering-state").remove(),this.$(".modal-content").html(e)},close:function(){this.$el.closeModal({complete:this.hide.bind(this)})},onClickLink:function(e){this.chat_content.onClickLink(e)},onClickPinnedMessage:function(e){let t=Ci(e.target);if(t.hasClass("msg-hyperlink")){e&&e.preventDefault();let i=t.attr("href");ki.dialogs.ask(nt.getString("open_this_link"),decodeURI(i),null,{ok_button_text:nt.getString("open")}).done((e=>{e&&ki.openWindow(i)}))}else{if(t.closest(".plyr-video-container").length>0){let e=this.chat_content.model.messages.get(t.closest(".chat-message").data("uniqueid")),i=t.closest(".plyr-video-container");return!e&&(e=this.account.forwarded_messages.get(t.closest(".chat-message").data("uniqueid"))),void(e&&e.get("msg_player_videos")&&(nt.plyr_player_popup?nt.plyr_player_popup.showNewVideo({player:e.get("msg_player_videos")[i.attr("data-message-id")]}):(nt.plyr_player_popup=new nt.PlyrPlayerPopupView({}),nt.plyr_player_popup.show({player:e.get("msg_player_videos")[i.attr("data-message-id")]}))))}if(t.hasClass("voice-message-play")||t.hasClass("no-uploaded")){let e=t.closest(".link-file"),i=e.find(".file-link-download").attr("href");if(e.find(".mdi-play").removeClass("no-uploaded"),t.closest(".chat-message").hasClass("encrypted")){let s=this.chat_content.model.messages.get(t.closest(".chat-message").data("uniqueid")),n=t.closest(".link-file").find(".file-link-download").attr("href"),a=(s.get("files")||[]).find((e=>e.sources[0]==n));a&&a.key&&this.chat_content.model.messages.decryptFile(i,a.key).then((t=>{null!==t&&(e[0].voice_message=this.chat_content.renderVoiceMessage(e.find(".file-container")[0],t))}))}else e[0].voice_message=this.chat_content.renderVoiceMessage(e.find(".file-container")[0],i)}else if(!t.hasClass("mdi-play")||t.closest(".video-file-wrap").length>0);else{t.closest(".link-file")[0].voice_message.play()}}},onClickExpandedMessageLocation:function(e){e.preventDefault();let t=Ci(e.target).attr("lon"),i=Ci(e.target).attr("lat"),s=Ci(e.target).attr("title");t&&i&&(nt.popup_coordinates=[t,i],nt.location_name=s,new nt.ChatLocationView({content:this}).show(e))},expandFwdMessage:function(e){let t=Ci(e.target).data("uniqueid"),i=this.chat_content.buildMessageHtml(this.account.forwarded_messages.get(t)),s=new nt.ExpandedMessagePanel({account:this.account,chat_content:this.chat_content});s.$el.attr("data-color",this.account.settings.get("color")),this.chat_content.updateMessageInChat(i,this.account.forwarded_messages.get(t)),this.chat_content.initPopup(i),s.open(i)}}),nt.ChatsBase=Backbone.Collection.extend({model:nt.Chat}),nt.Chats=nt.ChatsBase.extend({initialize:function(e,t){this.collections=[],this.on("add",Ei.bind(this.updateInCollections,this,"add")),this.on("change",Ei.bind(this.updateInCollections,this,"change"))},addCollection:function(e){this.collections.push(e)},updateInCollections:function(e,t){Ei.each(this.collections,(function(i){i.update(t,e)}))},registerQuillEmbeddedsTags:function(){let e=Quill.import("blots/inline");Quill.import("formats/image");class t extends e{static create(e){let t,i,s=super.create();return e.on_format?(t=e.data,i=e.target):(t=JSON.parse(e),i=t.jid?"?jid="+t.jid:t.id?"?id="+t.id:"",s.innerHTML=t.nickname),t.is_me&&s.classList.add("ground-color-100"),s.setAttribute("data-target",i),s}static value(e){return e.innerHTML}static formats(e){return{on_format:!0,data:{nickname:e.innerHTML,is_me:e.classList.contains("ground-color-100")},target:e.getAttribute("data-target")}}}t.blotName="mention",t.tagName="mention",t.prototype.optimize=function(){},Quill.register(t)}}),nt.OpenedChats=nt.ChatsBase.extend({comparator:function(e,t){let i=e.get("timestamp"),s=t.get("timestamp");return i>s?-1:i<s?1:0},initialize:function(e,t){this.on("change:timestamp",this.sort,this)},update:function(e,t){e.get("opened")?this.get(e)||(this.add(e),e.trigger("add_opened_chat",e)):this.get(e)&&(this.remove(e),e.trigger("remove_opened_chat",e))}}),nt.ClosedChats=nt.ChatsBase.extend({update:function(e,t){!e.get("opened")?this.get(e)||(this.add(e),e.trigger("add_closed_chat",e)):this.get(e)&&(this.remove(e),e.trigger("remove_closed_chat",e))}}),nt.AccountChats=nt.ChatsBase.extend({initialize:function(e,t){this.account=t.account,this.mam_requests=0,this.deferred_mam_requests=[],this.account.contacts.on("open_chat",this.openChat,this),this.account.contacts.on("open_mention",this.openMention,this),this.account.contacts.on("presence",this.onPresence,this),this.account.contacts.on("roster_push",this.onRosterPush,this)},getSavedChat:function(){if(!this.account.server_features.get(Ii.NS.XABBER_FAVORITES))return;let e=this.account.server_features.get(Ii.NS.XABBER_FAVORITES).get("from"),t={jid:e,type:"saved",name:nt.getString("saved_messages__header"),id:`${e}:saved`},i=this.get(t.id);return i||(i=nt.chats.create(t,{account:this.account}),this.add(i),i.trigger("load_last_history")),i},getChat:function(e,t,i){let s=null,n=t&&`${e.hash_id}:${t}`,a=n?this.get(n):this.get(e.hash_id);return n&&(s={id:n}),"encrypted"===t&&(s.type=t),a||(a=nt.chats.create(s,{contact:e,sync_created:i}),this.add(a),e.set("known",!0)),a},openChat:function(e,t){t=t||{},Ei.isUndefined(t.clear_search)&&(t.clear_search=!0);let i=this.getChat(e,t.encrypted&&"encrypted");t&&t.force_opened_state&&(i.set("opened",!0),i.set("timestamp",Date.now())),i.trigger("open",{clear_search:t.clear_search,right_force_close:t.right_force_close})},openMention:function(e,t){let i=this.getChat(e);nt.body.setScreen("mentions",{right:"mentions",chat_item:i.item_view}),t&&i.getMessageContext(t,{mention:!0})},registerMessageHandler:function(){this.account.connection.deleteHandler(this._msg_handler),this._msg_handler=this.account.connection.addHandler((e=>(this.receiveMessage(e),!0)),null,"message")},onStartedMAMRequest:function(e){this.deferred_mam_requests.push(e),this.runMAMRequests()},onCompletedMAMRequest:function(e){this.mam_requests--,this.runMAMRequests()},runMAMRequests:function(){for(;this.mam_requests<nt.settings.mam_requests_limit;){let e=this.deferred_mam_requests.shift();if(!e)break;this.mam_requests++,e.resolve()}},parsePubSubNode:function(e){if(!e)return null;let t=e.indexOf("#");return-1!==t?e.slice(t+1,e.length):null},receivePubsubMessage:function(e){let t=e.find("info").attr("id"),i=Ii.getBareJidFromJid(e.attr("from")),s=e.find("items").attr("node");if(!(s.indexOf(Ii.NS.OMEMO)>-1)&&(s.indexOf(Ii.NS.PUBSUB_TRUST_SHARING_ITEMS)>-1&&this.account.omemo&&this.account.omemo.xabber_trust&&this.account.omemo.xabber_trust.receivePubSubMessage(e),s.indexOf(Ii.NS.PUBSUB_AVATAR_METADATA)>-1)){let n=this.parsePubSubNode(s),a=e.find("info").attr("url"),o=this.account.contacts.get(i);if(o&&i!==this.account.get("jid")){if(n){if(o.my_info&&n==o.my_info.get("id")&&t==o.my_info.get("avatar"))return void o.trigger("update_my_info");if(t&&this.account.chat_settings.getHashAvatar(n)!=t){let i=Ii.NS.PUBSUB_AVATAR_DATA+"#"+n;o.getAvatar(t,i,(i=>{this.account.chat_settings.updateCachedAvatars(n,t,i),o.my_info&&n==o.my_info.id&&(o.my_info.set({avatar:t,b64_avatar:i}),o.trigger("update_my_info"));let s=o.participants&&o.participants.get(n);if(s){let n=e.find("info").attr("url");s.set({avatar:t,b64_avatar:i}),n&&s.set("avatar_url",n),this.account.groupchat_settings.updateParticipant(o.get("jid"),s.attributes)}}),(()=>{if(a){this.account.chat_settings.updateCachedAvatars(n,t,a),o.my_info&&n==o.my_info.id&&(o.my_info.set({avatar:t,b64_avatar:a}),o.trigger("update_my_info"));let e=o.participants&&o.participants.get(n);e&&(e.set({avatar:t,b64_avatar:a}),this.account.groupchat_settings.updateParticipant(o.get("jid"),e.attributes))}else;}))}}else if(!this.get("avatar_priority")||this.get("avatar_priority")<=yi.AVATAR_PRIORITIES.PUBSUB_AVATAR){if(!t){let e=Li.getDefaultAvatar(o.get("name"));return o.cached_image=Li.getCachedImage(e),o.set("avatar_priority",yi.AVATAR_PRIORITIES.PUBSUB_AVATAR),o.set("photo_hash",null),o.set("image",e),void o.updateCachedInfo()}if(""!==t&&o.get("photo_hash")===t)return;a&&(o.cached_image=a,o.set({photo_hash:t,image:a,avatar_priority:yi.AVATAR_PRIORITIES.PUBSUB_AVATAR})),o.getAvatar(t,Ii.NS.PUBSUB_AVATAR_DATA,(e=>{try{o.cached_image=Li.getCachedImage(e),o.set("avatar_priority",yi.AVATAR_PRIORITIES.PUBSUB_AVATAR),o.set("photo_hash",t),o.set("image",e),o.updateCachedInfo()}catch(e){Ai.error(e)}}))}}else if(i===this.account.get("jid")){if(a){let e={photo_hash:t,image:a,avatar_priority:yi.AVATAR_PRIORITIES.PUBSUB_AVATAR};return this.account.cached_image=a,void this.account.save(e)}if(!t){let e=Li.getDefaultAvatar(this.account.get("name"));this.account.cached_image=Li.getCachedImage(e);let t={avatar_priority:yi.AVATAR_PRIORITIES.PUBSUB_AVATAR,image:e};return void this.account.save(t)}this.account.getAvatar(t,(e=>{try{this.account.cached_image=Li.getCachedImage(e);let t={avatar_priority:yi.AVATAR_PRIORITIES.PUBSUB_AVATAR,image:e};this.account.save(t)}catch(e){}}))}}},receiveMessage:function(e){let t=Ci(e),i=t.attr("type"),s=t.find(`result[xmlns="${Ii.NS.MAM}"]`);if(this.account.connection.do_synchronization&&Ii.getBareJidFromJid(Ci(e).attr("from"))!==this.account.get("jid")){let e=t.children("time").attr("stamp")||t.children("delay").attr("stamp"),i=Number(Ti(e));i>this.account.last_msg_timestamp&&(this.account.last_msg_timestamp=i)}return"headline"===i?this.receiveHeadlineMessage(e):"chat"===i||"normal"===i||!i&&!s.length?this.receiveChatMessage(e):"error"===i?this.receiveErrorMessage(e):void 0},receiveHeadlineMessage:function(e){let t=Ci(e),i=Ii.getBareJidFromJid(t.attr("from")),s=t.find(`received[xmlns="${Ii.NS.DELIVERY}"]`),n=t.children(`x[xmlns="${Ii.NS.DELIVERY}"]`).children("message");if(s.length){let e=s.children("stanza-id").attr("id"),t=s.children("origin-id").first().attr("id");if(t){let i=this.account.messages.get(t||e),n=s.children("time").attr("stamp")||Ti(e/1e3).format();if(!i)return;let a=this.account._pending_messages.find((i=>i.unique_id==(t||e)));if(!a)return;let o=this.account.chats.get(a.chat_hash_id);if(o&&o.get("group_chat"))return;!i.get("stanza_id")&&i.get("locations")&&i.set({stanza_id:e});let r=o.get("saved")?yi.MSG_DISPLAYED:yi.MSG_SENT;i.set({state:r,time:n,timestamp:Number(Ti(n))}),o.setStanzaId(a.unique_id,e),this.account._pending_messages.splice(this.account._pending_messages.indexOf(a),1)}return}if(n.length){let e=n.children("origin-id").first().attr("id"),t=this.account._pending_messages.find((t=>t.unique_id==e));return t&&this.account._pending_messages.splice(this.account._pending_messages.indexOf(t),1),this.receiveChatMessage(n[0],{echo_msg:!0,stanza_id:n.children("stanza-id").attr("id")})}let a,o,r=t.children(`revoke[xmlns="${Ii.NS.AUTH_DEVICES}"]`);if(r.length)return r.children("device").each(((e,t)=>{let i=Ci(t).attr("id");if(i)if(this.account.get("x_token")&&this.account.get("x_token").token_uid===i)this.account.deleteAccount();else if(this.account.x_tokens_list){let e=this.account.x_tokens_list.find((e=>e.token_uid==i)),t=e?this.account.x_tokens_list.indexOf(e):-1;t>-1&&this.account.x_tokens_list.splice(t,1)}})),void(this.account.settings_right&&this.account.settings_right.updateXTokens());if(t.find(`event[xmlns="${Ii.NS.PUBSUB}#event"]`).length)this.receivePubsubMessage(t);else{if(i!==this.account.get("jid")&&(a=this.account.contacts.get(i)),a&&(a&&(o=this.account.chats.getChat(a)),o.item_view.content||(o.item_view.content=new nt.ChatContentView({chat_item:o.item_view}))),t.children(`x[xmlns="${Ii.NS.GROUP_CHAT}#system-message"]`).length){if(!a)return;let e=t.children(`x[xmlns="${Ii.NS.GROUP_CHAT}#system-message"]`).attr("version");e&&a.participants&&a.participants.version<e&&a.trigger("update_participants")}if(t.children(`attention[xmlns="${Ii.NS.ATTENTION}"]`).length&&nt.settings.call_attention){if(!o)return;return o.messages.createSystemMessage({from_jid:i,message:nt.getString("action_attention_requested"),attention:!0})}if(t.find(`replace[xmlns="${Ii.NS.REWRITE}#notify"]`).length){if(!a&&(a=this.account.contacts.get(t.find("replace").attr("conversation")))&&(o=this.account.chats.getChat(a)),this.account.server_features.get(Ii.NS.XABBER_FAVORITES)&&t.find("replace").attr("conversation")===this.account.server_features.get(Ii.NS.XABBER_FAVORITES).get("from")&&(o=this.getSavedChat()),!o)return;let e=t.find("replace").attr("id"),i=o.messages.find((t=>t.get("stanza_id")==e||t.get("contact_stanza_id")==e)),s=nt.body.screen.get("right"),n=("participant_messages"===s&&this.account.participant_messages||"message_context"===s&&this.account.context_messages||"searched_messages"===s&&this.account.searched_messages||[]).find((t=>t.get("stanza_id")==e));this.receiveChatMessage(t,{replaced:!0}),n&&n.set("last_replace_time",t.find("replaced").last().attr("stamp")),i&&(i.set("last_replace_time",t.find("replaced").last().attr("stamp")),a&&a.get("pinned_message")&&a.get("pinned_message").get("unique_id")===i.get("unique_id")&&(a.get("pinned_message").set("message",i.get("message")),o.item_view.content||(o.item_view.content=new nt.ChatContentView({chat_item:o.item_view})),o.item_view.content.updatePinnedMessage()),o&&o.item_view.updateLastMessage(o.last_message))}if(t.find(`invalidate[xmlns="${Ii.NS.REWRITE}#notify"]`).length){if(!a&&(a=this.account.contacts.get(t.find("invalidate").attr("conversation")))&&(o=this.account.chats.getChat(a)),this.account.server_features.get(Ii.NS.XABBER_FAVORITES)&&t.find("invalidate").attr("conversation")===this.account.server_features.get(Ii.NS.XABBER_FAVORITES).get("from")&&(o=this.getSavedChat()),!o)return;let e=t.find("invalidate").attr("version");o.retraction_version=e,o.item_view&&!o.item_view.content&&(o.item_view.content=new nt.ChatContentView({chat_item:o.item_view}));let i=o.messages.models;Ci(i).each(((e,t)=>{o.item_view.content.removeMessage(t)})),o.set("first_archive_id",void 0),o.set("history_loaded",!1),o.item_view.updateEmptyChat();let s=0,n=setInterval((()=>{s++,o.item_view.content._loading_history?s>30&&clearInterval(n):(clearInterval(n),o.item_view.content.loadPreviousHistory(!0))}),1e3);o.item_view.content._loading_history||(clearInterval(n),o.item_view.content.loadPreviousHistory(!0))}if(t.find("retract-message").length){let e=t.find("retract-message").attr("type")==Ii.NS.OMEMO;if(!a&&(a=this.account.contacts.get(t.find("retract-message").attr("conversation")))&&(o=this.account.chats.getChat(a,e&&"encrypted")),this.account.server_features.get(Ii.NS.XABBER_FAVORITES)&&t.find("retract-message").attr("conversation")===this.account.server_features.get(Ii.NS.XABBER_FAVORITES).get("from")&&(o=this.getSavedChat()),!o)return;let i=t.find("retract-message"),s=i.attr("id"),n=i.attr("version"),r=o.messages.find((e=>e.get("stanza_id")==s||e.get("contact_stanza_id")==s));o.retracted_msg_id_list.push(s),r&&(r.set("is_unread",!1),o.item_view.content||(o.item_view.content=new nt.ChatContentView({chat_item:o.item_view})),o.item_view.content.removeMessage(r),o.item_view.updateLastMessage(o.last_message)),!o.get("group_chat")&&n>this.account.retraction_version&&(this.account.retraction_version=n)}if(t.find("retract-user").length){let e=t.find("retract-user").attr("id"),i=o.messages.filter((t=>t.get("user_info")&&t.get("user_info").id==e));i&&Ci(i).each(((e,t)=>{t.set("is_unread",!1),o.item_view.content||(o.item_view.content=new nt.ChatContentView({chat_item:o.item_view})),o.item_view.content.removeMessage(t)})),o.item_view.updateLastMessage(o.last_message)}if(t.find("retract-all").length){if(!a&&(a=this.account.contacts.get(t.find("retract-all").attr("conversation")))&&(o=this.getChat(a,t.find("retract-all").attr("type")==Ii.NS.OMEMO&&"encrypted")),!o)return;let e=o.messages.models;Ci(e).each(((e,t)=>{o.item_view.content||(o.item_view.content=new nt.ChatContentView({chat_item:o.item_view})),o.item_view.content.removeMessage(t)})),o.item_view.updateLastMessage()}}},receiveStanzaId:function(e,t){t.replaced&&(e=e.children("replace").children("message"));let i,s,n={},a=t.from_bare_jid;return e.children("stanza-id").each(((t,n)=>{n=Ci(n),!e.children(`x[xmlns="${Ii.NS.GROUP_CHAT}"]`).length||e.find(`invite[xmlns="${Ii.NS.GROUP_CHAT_INVITE_HTTP}"]`).length||e.find(`invite[xmlns="${Ii.NS.GROUP_CHAT_INVITE}"]`).length?n.attr("by")===this.account.get("jid")?i=n:s=n:n.attr("by")===a?(i=n,s=n):i=n})),i&&(n.stanza_id=i.attr("id")),s&&(n.contact_stanza_id=s.attr("id")),n},receiveNotification:function(e,t){let i=Ii.getBareJidFromJid(e.attr("from")),s=this.account.contacts.mergeContact(e.attr("from")),n=this.account.chats.getChat(s),a=this.receiveStanzaId(e,{from_bare_jid:i});return t=Ei.extend(t,{stanza_id:a.stanza_id,contact_stanza_id:a.contact_stanza_id}),n.receiveMessage(e,t)},receiveChatMessage:function(e,t){t=t||{};let i=Ci(e),s=i.find("forwarded"),n=t.delay,a=i.attr("to"),o=Ii.getBareJidFromJid(a),r=a&&Ii.getResourceFromJid(a),c=i.attr("from")||t.from_jid;if(i.children(`encrypted[xmlns="${Ii.NS.OMEMO}"]`).length&&!t.forwarded)return void(this.account.omemo&&this.account.omemo.receiveChatMessage(e,t));if(i.find("invite").length&&t.forwarded)return;c||(c=this.account.get("jid"));let l=Ii.getBareJidFromJid(c),d=l===this.account.get("jid");if(t.forwarded&&(!s.length||t.xml))return this.account.forwarded_messages.createFromStanza(i,{is_forwarded:!0,forwarded_message:t.forwarded_message||null,delay:n,replaced:t.replaced,from_jid:c,xml:t.xml});if(s.length&&!t.xml){if(i.children(`notification[xmlns="${Ii.NS.XABBER_NOTIFY}"]`).length){if(!this.account.server_features.get(Ii.NS.XABBER_NOTIFY))return;return i.find(`encrypted[xmlns="${Ii.NS.OMEMO}"]`).length&&!t.forwarded?void(this.account.omemo&&this.account.omemo.receiveChatMessage(e,Ei.extend(t,{notification_msg:!0,conversation:this.account.server_features.get(Ii.NS.XABBER_NOTIFY).get("from")}))):(t.encrypted=!1,this.receiveNotification(i,Ei.extend(t,{notification_msg:!0})))}let a=i.find(`result[xmlns="${Ii.NS.MAM}"]`);if(a.length){if(!Object.keys(t).length)return;s=a.children("forwarded"),s.length&&(i=s.children("message"),n=s.children("delay"));let e=this.receiveStanzaId(i,{from_bare_jid:l});return this.receiveChatMessage(i[0],Ei.extend(t,{is_mam:!0,delay:n,stanza_id:e.stanza_id||a.attr("id"),contact_stanza_id:e.contact_stanza_id}))}let r=i.find(`[xmlns="${Ii.NS.CARBONS}"]`);if(!t.carbon_copied&&r.length&&["received","sent"].includes(r[0].tagName)){if(i.find("invite").length&&"sent"===r[0].tagName)return;if(!d)return;if(s=r.children("forwarded"),s.length&&(i=s.children("message")),r.find(`request[xmlns="${Ii.NS.DELIVERY}"][to="${o}"]`).length)return;if(this.account.fast_connection&&i.attr("from")===this.account.fast_connection.jid)return;return this.receiveChatMessage(i[0],Ei.extend(t,{carbon_copied:!0,carbon_direction:r[0].tagName}))}let h=[];if(s=i.children(`reference[type="mutable"][xmlns="${Ii.NS.REFERENCE}"]`).length?i.children(`reference[type="mutable"][xmlns="${Ii.NS.REFERENCE}"]`).children('forwarded[xmlns="'+Ii.NS.FORWARD+'"]'):i.children("envelope").children("content").children(`reference[type="mutable"][xmlns="${Ii.NS.REFERENCE}"]`).children('forwarded[xmlns="'+Ii.NS.FORWARD+'"]'),s.each(((e,i)=>{let s=Ci(i),n=s.children("message"),a=s.children("delay"),o=this.receiveChatMessage(n[0],{forwarded:!0,pinned_message:t.pinned_message,participant_message:t.participant_message,searched_message:t.searched_message,is_searched:t.is_searched,context_message:t.context_message,from_jid:c,delay:a});h.push(o)})),!Object.keys(t).length&&!h.length)return;return this.receiveChatMessage(i[0],Ei.extend({forwarded_message:h.length?h:null,xml:i[0]},t))}!t.is_mam&&r&&r!==this.account.resource&&(nt.warn("Message to another resource"),nt.warn(e));let h=d?o:l;if(t.replaced&&(h=i.children("replace").attr("conversation")),h===this.account.get("jid"))return nt.warn("Message from me to me"),void nt.warn(e);if(this.account.server_features.get(Ii.NS.XABBER_FAVORITES)&&this.account.server_features.get(Ii.NS.XABBER_FAVORITES).get("from")&&h===this.account.server_features.get(Ii.NS.XABBER_FAVORITES).get("from")&&(t.carbon_copied&&"sent"===t.carbon_direction||!t.carbon_copied)){let e=this.getSavedChat(),s=this.receiveStanzaId(i,{from_bare_jid:l,carbon_copied:t.carbon_copied,replaced:t.replaced});return e.receiveMessage(i,Ei.extend(t,{is_sender:d,stanza_id:s.stanza_id,contact_stanza_id:s.contact_stanza_id}))}let g=this.account.contacts.mergeContact(h),u=this.account.chats.getChat(g,(t.encrypted||t.not_encrypted)&&"encrypted"),p=this.receiveStanzaId(i,{from_bare_jid:l,carbon_copied:t.carbon_copied,replaced:t.replaced});if(i.children(`x[xmlns="${Ii.NS.GROUP_CHAT}#system-message"]`).length){if(!g)return;let e=i.children(`x[xmlns="${Ii.NS.GROUP_CHAT}#system-message"]`).attr("version");e&&g.participants&&g.participants.version<e&&i.children(`x[xmlns="${Ii.NS.GROUP_CHAT}#system-message"]`).children(`user[xmlns="${Ii.NS.GROUP_CHAT}"]`).length&&u.contact.get("pinned_message")&&i.children('x[xmlns="'+Ii.NS.GROUP_CHAT+'#system-message"]').each(((e,t)=>{let i=Ci(t).children(`user[xmlns="${Ii.NS.GROUP_CHAT}"]`).first();if(i.length){let e=i.attr("id"),t=i.children("jid").text();if(u.contact.get("pinned_message").get("from_jid")===t){let s=u.contact.get("pinned_message"),n={id:e,jid:t,nickname:i.children("nickname").text()||t||e,role:i.children("role").text(),avatar:i.children(`metadata[xmlns="${Ii.NS.PUBSUB_AVATAR_METADATA}"]`).children("info").attr("id"),avatar_url:i.children(`metadata[xmlns="${Ii.NS.PUBSUB_AVATAR_METADATA}"]`).children("info").attr("url"),badge:i.children("badge").text()};s.set("user_info",n),u.contact.set("pinned_message",s)}}}))}return!u.contact.get("group_chat")||"sent"!==t.carbon_direction||i.children(`[xmlns="${Ii.NS.CHAT_MARKERS}"]`).length?(u&&u.get("encrypted")&&t.encrypted&&!t.synced_msg&&!t.is_archived&&(i.find('[xmlns="'+Ii.NS.EPHEMERAL+'"]').length?u.set("chat_ephemeral_timer",i.find('[xmlns="'+Ii.NS.EPHEMERAL+'"]').attr("timer")):u.set("chat_ephemeral_timer",null)),u.receiveMessage(i,Ei.extend(t,{is_sender:d,stanza_id:p.stanza_id,contact_stanza_id:p.contact_stanza_id}))):void 0},receiveErrorMessage:function(e){let t=e.getAttribute("id"),i=Ci(e).children("origin-id").attr("id");if(t){let s=Ci(e).find("error").attr("code"),n=this.account.messages.get(i||t);n&&("405"===s&&n.set("state",yi.MSG_BLOCKED),"406"===s&&n.set("state",yi.MSG_ERROR))}},onPresence:function(e,t){this.getChat(e).onPresence(t)},onRosterPush:function(e,t){this.getChat(e).onRosterPush(t)}}),nt.AddGroupChatView=nt.SearchView.extend({className:"modal main-modal add-group-chat-modal add-contact-modal",template:xi.group_chats.add_group_chat,avatar_size:yi.AVATAR_SIZES.ACCOUNT_ITEM,ps_selector:".rich-textarea",ps_settings:{theme:"item-list"},events:{"click .dropdown-content#select-account-for-creating-groupchat":"selectAccount","click .btn-add":"addGroupChat","keyup .input-group-chat-name input":"updateGroupJid","keyup .rich-textarea":"showPlaceholder","keyup .input-group-chat-jid input":"fixJid","click .btn-cancel":"close","click .property-variant":"changePropertyValue"},render:function(e){if(!nt.accounts.connected.length)return void ki.dialogs.error(nt.getString("dialog_add_contact__error__text_no_accounts"));e||(e={}),this.setDefaultSettings(e);let t=e.account?[e.account]:nt.accounts.connected;this.$(".single-acc").showIf(1===t.length),this.$(".multiple-acc").hideIf(1===t.length),this.$(".dropdown-content#select-account-for-creating-groupchat").empty(),Ei.each(t,(e=>{this.$(".dropdown-content#select-account-for-creating-groupchat").append(this.renderAccountItem(e))})),this.$(".account-dropdown-wrap").hideIf(t.length<2),this.bindAccount(t[0]),this.$(".btn-cancel").text(this.is_login?nt.getString("skip"):nt.getString("cancel")),this.$el.openModal({ready:()=>{let e={inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"left"};Materialize&&Materialize.updateTextFields&&Materialize.updateTextFields(),this.$(".account-dropdown-wrap").dropdown(e),this.$(".property-field .dropdown-button").dropdown(e),this.$(".property-field .select-xmpp-server .caret").dropdown(e),this.$(".property-field .select-xmpp-server .xmpp-server-item-wrap").dropdown(e),this.$('input[name="chat_name"]').focus()},complete:this.close.bind(this)})},setDefaultSettings:function(e){this.$(".incognito-field .public-item-wrap").showIf(e.public),this.$(".incognito-field .incognito-item-wrap").showIf(e.incognito),e.public&&this.$(".modal-header span").text(nt.getString("create_group")),e.incognito&&this.$(".modal-header span").text(nt.getString("create_incognito_group")),this.$("input[name=chat_jid]").removeClass("fixed-jid").val(""),this.$("#new_chat_domain").val(""),this.$("input[name=chat_name]").val(""),this.$(".description-field .rich-textarea").text(""),this.$(".btn-add").addClass("non-active"),this.showPlaceholder(),this.$("span.errors").text("").addClass("hidden"),this.$("input").removeClass("invalid");let t=this.$(".global-dropdown-wrap"),i=t.find(".dropdown-content .default-value");t.find(".global-item-wrap .property-value").attr("data-value",i.attr("data-value")).text(i.text());let s=this.$(".membership-dropdown-wrap"),n=s.find(".dropdown-content .default-value");s.find(".membership-item-wrap .property-value").attr("data-value",n.attr("data-value")).text(n.text())},bindAccount:function(e){this.account=e,this.$(".input-group-chat-domain").addClass("hidden"),this.$(".account-dropdown-wrap .dropdown-button .account-item-wrap").replaceWith(this.renderAccountItem(e));let t=this.account.get("groupchat_servers_list");t=t.sort(((e,t)=>e==this.account.domain?-1:t==this.account.domain?1:0)),t.length?(this.$(".xmpp-server-dropdown-wrap .field-jid").text(t[0]),this.$(".select-xmpp-server .caret").removeClass("hidden"),this.$(".xmpp-server-item-wrap .property-value").removeClass("hidden")):this.setCustomDomain(this.$(".property-field.xmpp-server-dropdown-wrap .property-value")),this.$(".modal-content .jid-field .set-default-domain").remove();for(let e=0;e<t.length;e++)Ci("<div/>",{class:"field-jid property-variant set-default-domain"}).text(t[e]).insertBefore(this.$(".modal-content .jid-field .set-custom-domain"))},renderAccountItem:function(e){let t=Ci(xi.add_chat_account_item({jid:e.get("jid"),name:e.get("name")}));return t.find(".circle-avatar").setAvatar(e.cached_image,this.avatar_size),t},selectAccount:function(e){let t=Ci(e.target).closest(".account-item-wrap"),i=nt.accounts.get(t.data("jid"));this.bindAccount(i)},setCustomDomain:function(e){this.$("#new_chat_domain").val(""),this.$(".select-xmpp-server .caret").addClass("hidden"),e.addClass("hidden").text(""),this.$(".input-group-chat-domain").removeClass("hidden")},changePropertyValue:function(e){let t=Ci(e.target),i=t.closest(".property-field").find(".property-value");t.hasClass("set-custom-domain")?this.setCustomDomain(i):(t.hasClass("set-default-domain")&&(this.$(".input-group-chat-domain").addClass("hidden"),this.$("#new_chat_domain").val("")),i.text(t.text()),i.removeClass("hidden").attr("data-value",t.attr("data-value")),this.$(".select-xmpp-server .caret").removeClass("hidden"))},close:function(){this.$el.closeModal({complete:()=>{this.$el.detach(),this.data.set("visible",!1)}})},updateGroupJid:function(){if(!this.$("input[name=chat_jid]").hasClass("fixed-jid")){let e=slug(this.$(".input-group-chat-name input").get(0).value,{lower:!0});this.$("label[for=new_chat_jid]").addClass("active"),this.$(".input-field #new_chat_jid").get(0).value=e}this.$(".btn-add").switchClass("non-active",!this.$(".input-group-chat-name input").get(0).value)},showPlaceholder:function(){let e=""===this.$(".rich-textarea ").text();this.$(".rich-textarea-wrap .placeholder").hideIf(!e)},fixJid:function(){let e=this.$("input[name=chat_jid]");!e.hasClass("fixed-jid")&&e.addClass("fixed-jid"),""==e.get(0).value&&e.removeClass("fixed-jid")},createGroupChat:function(){let e=this.$("input[name=chat_name]").val(),t=this.$("input[name=chat_jid]").val()?this.$("input[name=chat_jid]").val():void 0,i=this.$(".incognito-field .property-wrap:not(.hidden) .property-value").attr("data-value"),s=this.$("#new_chat_domain").val()||this.$(".xmpp-server-dropdown-wrap .property-value").text(),n=this.$('input[name="group_index"]:checked').attr("data-value"),a=this.$(".description-field .rich-textarea").text()||"",o=this.$('input[name="group_membership"]:checked').attr("data-value"),r=Si({type:"set",to:s}).c("query",{xmlns:Ii.NS.GROUP_CHAT+"#create"}).c("name").t(e).up().c("privacy").t(i).up().c("index").t(n).up().c("description").t(a).up().c("membership").t(o).up();t&&r.c("localpart").t(t),this.account.sendIQFast(r,(e=>{let t=Ci(e).find("query localpart").text().trim()+"@"+Ci(e).attr("from").trim(),i=this.account.contacts.mergeContact(t);if(i.set("group_chat",!0),i.set("subscription_preapproved",!0),i.pres("subscribed"),i.set("known",!0),i.set("removed",!1),setTimeout((()=>{i.pres("subscribe")}),500),this.close(),nt.chats_view.updateScreenAllChats(),i.trigger("open_chat",i),!this.account.connection||!this.account.connection.do_synchronization){let e=Si({type:"set"}).c("block",{xmlns:Ii.NS.BLOCKING}).c("item",{jid:t+"/"+Ti.now()});this.account.sendIQFast(e)}}),(()=>{this.$("span.errors").removeClass("hidden").text(nt.getString("groupchat_jid_already_exists")),this.$('input[name="chat_jid"]').addClass("invalid")}))},addGroupChat:function(e){if(Ci(e.target).closest(".button-wrap").hasClass("non-active"))return void Ci(e.target).blur();let t=this.$("#new_chat_domain").val()||this.$(".xmpp-server-dropdown-wrap .property-value").text(),i=this.$("input[name=chat_jid]").val();if(""==this.$("input[name=chat_name]").val())this.$("span.errors").text(nt.getString("group_is_empty")).removeClass("hidden"),this.$('input[name="chat_name"]').addClass("invalid");else if(""==i||-1==i.search(/[А-яЁё]/)&&-1==i.search(/\s/)&&""!=i){this.$("span.errors").text("").addClass("hidden"),this.$("input").removeClass("invalid");let e,i=Si({type:"get",to:t}).c("query",{xmlns:Ii.NS.DISCO_INFO});this.account.sendIQFast(i,(t=>{Ci(t).children("query").children("feature").each(((t,i)=>{Ci(i).attr("var")==Ii.NS.GROUP_CHAT&&(e=!0)})),e?this.createGroupChat():(this.$("span.errors").removeClass("hidden").text(`${nt.getString("groupchat_add__alert_server_does_not_support")}`),this.$('input[name="chat_domain"]').addClass("invalid"))}),(e=>{this.$("span.errors").removeClass("hidden").text(`${nt.getString("groupchat_add__alert_invalid_domain")}`),this.$('input[name="chat_domain"]').addClass("invalid")}))}else this.$("span.errors").removeClass("hidden").text(`${nt.getString("groupchat_add__alert_localpart_invalid")}`),this.$('input[name="chat_jid"]').addClass("invalid")}}),nt.ChatsView=nt.SearchPanelView.extend({className:"recent-chats-container container",ps_selector:".chat-list-wrap",ps_settings:{theme:"item-list"},main_container:".chat-list",template:xi.chats_panel,_initialize:function(){this.active_chat=null,this.model.on("add",this.onChatAdded,this),this.model.on("destroy",this.onChatRemoved,this),this.model.on("change:active",this.onChangedActiveStatus,this),this.model.on("add_opened_chat",this.onChangedActiveStatus,this),this.model.on("change:unread",this.onChangedReadStatus,this),this.model.on("change:const_unread",this.onChangedReadStatus,this),this.model.on("change:timestamp",this.updateChatPosition,this),nt.accounts.on("list_changed",this.updateLeftIndicator,this),nt.accounts.on("omemo_changed",this.updateAccountEncryptedChats,this);let e=this.defineMouseWheelEvent();this.$el.on(e,this.onMouseWheel.bind(this)),this.ps_container.on("ps-scroll-y",this.onScrollY.bind(this)),this.$(".read-all-button").click(this.readAllMessages.bind(this)),nt.on("update_screen",this.onUpdatedScreen,this),nt.on("update_layout",this.onWindowResized,this),nt.on("clear_chats_search",this.clearSearch,this),this.$("input").on("input",this.updateSearch.bind(this))},render:function(e){void 0===e.right&&(this.active_chat=null),this.$(".chat-list-wrap").switchClass("with-padding",nt.toolbar_view.$(".toolbar-item:not(.toolbar-logo).unread").length),("chat"!==e.right&&!e.no_unread&&"searched_messages"!==e.right&&"message_context"!==e.right&&"participant_messages"!==e.right||e.clear_search)&&(this.clearSearch(),nt.toolbar_view.$(".active").hasClass("all-chats")&&!nt.toolbar_view.data.get("account_filtering")&&this.showAllChats())},readAllMessages:function(){let e=this.model,t=nt.toolbar_view.$(".active");if(t.hasClass("chats")){e.filter((e=>e.get("saved")||!e.contact.get("group_chat")&&e.get("timestamp")&&!e.get("archived")&&e.last_message&&!e.last_message.get("invite")&&(e.get("unread")||e.get("const_unread")))).forEach((e=>{e.item_view.content||(e.item_view.content=new nt.ChatContentView({chat_item:e.item_view})),e.item_view.content.readMessages()}))}if(t.hasClass("all-chats")){e.filter((e=>e.get("saved")||e.get("timestamp")&&!e.get("archived")&&e.last_message&&!e.last_message.get("invite")&&(e.get("unread")||e.get("const_unread")))).forEach((e=>{e.item_view.content||(e.item_view.content=new nt.ChatContentView({chat_item:e.item_view})),e.item_view.content.readMessages()}))}if(t.hasClass("group-chats")){e.filter((e=>e.get("saved")||e.contact.get("group_chat")&&e.get("timestamp")&&!e.get("archived")&&e.last_message&&!e.last_message.get("invite")&&(e.get("unread")||e.get("const_unread")))).forEach((e=>{e.item_view.content||(e.item_view.content=new nt.ChatContentView({chat_item:e.item_view})),e.item_view.content.readMessages()}))}nt.toolbar_view.recountAllMessageCounter()},onUpdatedScreen:function(e){this.$(".read-all-button").switchClass("hidden",!nt.toolbar_view.$(".toolbar-item:not(.account-item):not(.toolbar-logo).active.unread").length)},defineMouseWheelEvent:function(){return Ei.isUndefined(window.onwheel)?Ei.isUndefined(window.onmousewheel)?"MozMousePixelScroll":"mousewheel":"wheel"},onMouseWheel:function(e){},hideChatsFeedback:function(){clearTimeout(this._load_chats_timeout),this.$(".load-chats-feedback").addClass("hidden"),this.updateScrollBar(),this._load_chats_timeout=null},updateLeftIndicator:function(e){this.$el.attr("data-indicator",e.connected.length>1)},onChatAdded:function(e){this.addChild(e.id,e.item_view),this.updateChatPosition(e)},onChatRemoved:function(e,t){if(this.active_chat===this.child(e.id)){this.active_chat=null,nt.body.showChatPlaceholder(),nt.body.screen.set("chat_item",!1),nt.body.screen.set("right_contact",""),nt.right_contact_panel.$el.detach();let e=nt.body.screen.get("previous_screen");e&&(e.chat_item=null,e.right_contact="",nt.body.screen.set("previous_screen",e))}this.removeChild(e.id,t),this.updateScrollBar()},onChangedActiveStatus:function(e){if(e.get("active")){let t=this.active_chat;this.active_chat=this.child(e.id),t&&t.model.set("active",!1)}},onChangedReadStatus:function(e){let t=this.child(e.id),i=nt.toolbar_view.$(".active");this.updateChatPosition(e,!0),t&&i.hasClass("unread")&&(!i.hasClass("unread")||!e.get("unread")&&e.get("const_unread"))},updateAccountEncryptedChats:function(e){e.chats.filter((e=>e.get("encrypted"))).forEach((t=>{let i=this.child(t.id);i&&(i.$el.switchClass("hidden",!e.get("omemo_enabled")),e.get("omemo_enabled")&&e.omemo.checkContactFingerprints(t.contact))}))},replaceChatItem:function(e,t,i){let s=this.child(e.id);if(e.get("encrypted")&&e.account&&!e.account.omemo?s.$el.addClass("hidden"):e.get("encrypted")&&e.account&&e.account.omemo&&s.$el.removeClass("hidden"),s&&e.get("pinned")&&"0"!==e.get("pinned")&&i){let t=(i=i.sort(((e,t)=>e.get("pinned")>t.get("pinned")?1:-1))).indexOf(e);if(0===t)this.$(".pinned-chat-list").prepend(s.$el);else{let e=this.$(".pinned-chat-list .chat-item").eq(t-1);for(;!e.length&&t>0;)t--,e=this.$(".pinned-chat-list .chat-item").eq(t-1);e.after(s.$el)}}else if(s){s.$el.detach();let i=t.indexOf(e);0===i?this.$(".chat-list").prepend(s.$el):this.$(".chat-list .chat-item").eq(i-1).after(s.$el)}},updateChatPosition:function(e,t){let i=this.child(e.id),s=nt.toolbar_view.$(".active");i&&(!s.hasClass("unread")||e.get("unread")||e.get("const_unread"))&&(s.hasClass("account-item")&&i.account.get("jid")!==s.attr("data-jid")||(s.hasClass("unread")&&t?this.replaceChatItem(e,this.model.filter((e=>(e.get("unread")||e.get("const_unread"))&&!e.get("archived")&&!e.get("notifications")&&("0"===e.get("pinned")||!e.get("pinned")))),this.model.filter((e=>(e.get("unread")||e.get("const_unread"))&&!e.get("archived")&&!e.get("notifications")&&"0"!==e.get("pinned")&&e.get("pinned")))):(s.hasClass("group-chats")&&(i.model.get("saved")||i.contact.get("group_chat"))&&this.replaceChatItem(e,this.model.filter((e=>(e.get("saved")||e.contact.get("group_chat")&&!e.get("archived")&&!e.get("notifications"))&&("0"===e.get("pinned")||!e.get("pinned")))),this.model.filter((e=>(e.get("saved")||e.contact.get("group_chat")&&!e.get("archived")&&!e.get("notifications"))&&"0"!==e.get("pinned")&&e.get("pinned")))),s.hasClass("chats")&&(i.model.get("saved")||!i.contact.get("group_chat"))&&this.replaceChatItem(e,this.model.filter((e=>(e.get("saved")||!e.contact.get("group_chat")&&!e.get("archived")&&!e.get("notifications"))&&("0"===e.get("pinned")||!e.get("pinned")))),this.model.filter((e=>(e.get("saved")||!e.contact.get("group_chat")&&!e.get("archived")&&!e.get("notifications"))&&"0"!==e.get("pinned")&&e.get("pinned")))),(s.hasClass("all-chats")||s.hasClass("settings-modal")||1===nt.accounts.enabled.length&&s.hasClass("saved-chats"))&&(i.model.get("saved")||!i.model.get("archived")&&!i.model.get("notifications"))&&this.replaceChatItem(e,this.model.filter((e=>(e.get("saved")||!e.get("archived")&&!e.get("notifications"))&&("0"===e.get("pinned")||!e.get("pinned")))),this.model.filter((e=>(e.get("saved")||!e.get("archived")&&!e.get("notifications"))&&"0"!==e.get("pinned")&&e.get("pinned")))),s.hasClass("archive-chats")&&(i.model.get("saved")||i.model.get("archived"))&&this.replaceChatItem(e,this.model.filter((e=>e.get("saved")||e.get("archived")&&!e.get("notifications")))),s.hasClass("saved-chats")&&1!==nt.accounts.enabled.length&&i.model.get("saved")&&this.replaceChatItem(e,this.model.filter((e=>e.get("saved")))),s.hasClass("mentions")&&i.model.get("saved")&&this.replaceChatItem(e,this.model.filter((e=>e.get("notifications")))))))},onEnterPressed:function(e){let t;e.closest(".searched-lists-wrap").length?(this.clearSearch(),this.$(".list-item.active").removeClass("active"),e.hasClass("chat-item")&&(t=this.child(e.data("id")),t&&t.open(),e.addClass("active")),e.hasClass("roster-contact")&&(t=nt.accounts.get(e.data("account")).chats.getChat(nt.accounts.get(e.data("account")).contacts.get(e.data("jid"))),t&&(t=t.item_view),t&&nt.chats_view.openChat(t,{clear_search:!1,screen:nt.body.screen.get("name")}),e.addClass("active")),e.hasClass("message-item")&&e.click()):(t=this.child(e.data("id")),t&&t.open())},openChat:function(e,t){if(e.model.get("notifications"))return;e.content||(e.content=new nt.ChatContentView({chat_item:e})),t=t||{},this.$(".list-item.active").removeClass("active"),e.updateActiveStatus();let i=nt.chats_view.getScrollTop();if(t.clear_search&&this.clearSearch(),e.contact&&!e.contact.get("in_roster")&&(0==e.model.get("is_accepted")||1==e.model.get("is_accepted")&&e.contact.invitation))0==e.model.get("is_accepted")?(e.model.set("display",!0),e.model.set("active",!0),nt.body.setScreen("all-chats",{right:"group_invitation",contact:e.contact})):1==e.model.get("is_accepted")&&e.contact.invitation&&e.contact.invitation.join();else{if(nt.toolbar_view.$(".active").hasClass("contacts")&&this.updateScreenAllChats(),e.model.get("history_loaded")||(e.model.get("const_unread")&&e.model.get("last_read_msg")&&(!e.content._prev_scrolltop||e.content._prev_scrolltop&&e.content._is_scrolled_bottom||!0===e.model.get("show_new_unread"))&&!e.model.get("loading_unread_history")&&!t.force_bottom&&nt.body.screen.get("chat_item")!==e?(e.model.set("show_new_unread",!1),e.model._wait_load_unread_history=new Ci.Deferred,setTimeout((()=>{e.model._wait_load_unread_history.resolve()}),1e4),e.content._no_scrolling_event=!0,e.content.loadUnreadHistory()):e.model.messages.length<20&&e.content.loadPreviousHistory()),t.right_force_close||!nt.body.screen.get("right_contact")||"chat"!==nt.body.screen.get("right")&&"message_context"!==nt.body.screen.get("right")||(e.model.get("saved")?nt.body.setScreen(t.screen||"all-chats",{right_contact:""}):nt.right_contact_panel_saveable?e.contact.showDetailsRight("all-chats",{right_saved:!0,encrypted:e.model.get("encrypted")}):e.contact.showDetailsRight("all-chats",{right_saved:!1})),e.model.get("loading_unread_history"))nt.body.setScreen(t.screen||"all-chats",{right:"chat",clear_search:t.clear_search,chat_item:e,show_placeholder:!0,blocked:e.model.get("blocked")},{right_contact_save:t.right_contact_save,right_force_close:t.right_force_close}),e.model.set("active",!0),e.model._wait_load_unread_history.done((()=>{nt.body.screen.get("chat_item")===e&&(e.model.set("loading_unread_history",!1),nt.body.setScreen(t.screen||"all-chats",{right:"chat",clear_search:t.clear_search,chat_item:e,blocked:e.model.get("blocked")},{right_contact_save:t.right_contact_save,right_force_close:t.right_force_close}),e.content.scrollToUnread(),e.content._long_reading_timeout=!0,e.content._no_scrolling_event=!1,e.content.onScroll(),t.scroll_to_chat?nt.chats_view.scrollToChild(e.$el):nt.chats_view.scrollTo(i))}));else{let i=e.content.getScrollTop()||e.content._scrolltop,s=e.content.isScrolledToBottom(),n=!e.content._prev_scrolltop||e.content._prev_scrolltop&&e.content._is_scrolled_bottom;nt.body.setScreen(t.screen||"all-chats",{right:"chat",clear_search:t.clear_search,chat_item:e,blocked:e.model.get("blocked")},{right_contact_save:t.right_contact_save,right_force_close:t.right_force_close}),e.model.last_message&&!e.content.isMessageAdded(e.model.last_message)&&e.content.addMessage(e.model.last_message),e.model.get("unread")&&n?(e.content.scrollToUnread(),e.content._long_reading_timeout=!0,e.content._no_scrolling_event=!1,e.content.onScroll()):s&&n||!i?e.content.scrollToBottom():e.content.scrollTo(i)}e.contact&&(!e.contact.get("vcard_updated")||e.contact.get("group_chat")&&!e.contact.get("group_info")||e.contact.get("vcard_updated")&&!Ti(e.contact.get("vcard_updated")).startOf("hour").isSame(Ti().startOf("hour")))&&e.contact.getVCard()}t.scroll_to_chat?nt.chats_view.scrollToChild(e.$el):nt.chats_view.scrollTo(i)},showGroupChats:function(){this.$(".chat-item").detach();let e=this.model,t=nt.toolbar_view.$(".active.unread").length,i=[],s=[];t&&(i=e.filter((e=>e.contact&&e.contact.get("group_chat")&&e.get("timestamp")&&!e.get("archived")&&!e.get("notifications")&&e.last_message&&!e.last_message.get("invite")&&(e.get("unread")||e.get("const_unread"))&&("0"===e.get("pinned")||!e.get("pinned")))),s=e.filter((e=>e.contact&&e.contact.get("group_chat")&&e.get("timestamp")&&!e.get("archived")&&!e.get("notifications")&&e.last_message&&!e.last_message.get("invite")&&(e.get("unread")||e.get("const_unread"))&&"0"!==e.get("pinned")&&e.get("pinned")))),i.length||s.length||(i=e.filter((e=>!e.get("saved")&&e.contact.get("group_chat")&&e.get("timestamp")&&!e.get("archived")&&!e.get("notifications")&&("0"===e.get("pinned")||!e.get("pinned")))),s=e.filter((e=>!e.get("saved")&&e.contact.get("group_chat")&&e.get("timestamp")&&!e.get("archived")&&!e.get("notifications")&&"0"!==e.get("pinned")&&e.get("pinned"))),nt.toolbar_view.$(".toolbar-item:not(.toolbar-logo).unread").removeClass("unread"),this.onUpdatedScreen()),i.forEach((e=>{this.$(".chat-list").append(e.item_view.$el)})),s&&(s=s.sort(((e,t)=>e.get("pinned")>t.get("pinned")?1:-1)),s.forEach((e=>{let t=s.indexOf(e);0===t?this.$(".pinned-chat-list").prepend(e.item_view.$el):this.$(".pinned-chat-list .chat-item").eq(t-1).after(e.item_view.$el)})))},showChats:function(){this.$(".chat-item").detach();let e=this.model,t=nt.toolbar_view.$(".active.unread").length,i=[],s=[];t&&(i=e.filter((e=>e.contact&&!e.contact.get("group_chat")&&e.get("timestamp")&&!e.get("archived")&&!e.get("notifications")&&e.last_message&&!e.last_message.get("invite")&&(e.get("unread")||e.get("const_unread"))&&("0"===e.get("pinned")||!e.get("pinned")))),s=e.filter((e=>e.contact&&!e.contact.get("group_chat")&&e.get("timestamp")&&!e.get("archived")&&!e.get("notifications")&&e.last_message&&!e.last_message.get("invite")&&(e.get("unread")||e.get("const_unread"))&&"0"!==e.get("pinned")&&e.get("pinned")))),i.length||s.length||(i=e.filter((e=>!e.get("saved")&&!e.contact.get("group_chat")&&e.get("timestamp")&&!e.get("archived")&&!e.get("notifications")&&("0"===e.get("pinned")||!e.get("pinned")))),s=e.filter((e=>!e.get("saved")&&!e.contact.get("group_chat")&&e.get("timestamp")&&!e.get("archived")&&!e.get("notifications")&&"0"!==e.get("pinned")&&e.get("pinned"))),nt.toolbar_view.$(".toolbar-item:not(.toolbar-logo).unread").removeClass("unread"),this.onUpdatedScreen()),i.forEach((e=>{this.$(".chat-list").append(e.item_view.$el)})),s&&(s=s.sort(((e,t)=>e.get("pinned")>t.get("pinned")?1:-1)),s.forEach((e=>{let t=s.indexOf(e);0===t?this.$(".pinned-chat-list").prepend(e.item_view.$el):this.$(".pinned-chat-list .chat-item").eq(t-1).after(e.item_view.$el)})))},showChatsByAccount:function(e){nt.body.setScreen("all-chats"),this.$(".chat-item").detach();let t=this.model,i=t.filter((t=>t.account.get("jid")===e.get("jid")&&(t.get("saved")||t.get("timestamp")&&!t.get("archived")&&!t.get("notifications"))&&("0"===t.get("pinned")||!t.get("pinned")))),s=t.filter((t=>t.account.get("jid")===e.get("jid")&&(t.get("saved")||t.get("timestamp")&&!t.get("archived")&&!t.get("notifications"))&&"0"!==t.get("pinned")&&t.get("pinned")));this.$(`.omemo-item:not([data-id="${e.get("jid")}"])`).addClass("hidden"),i.forEach((e=>{this.$(".chat-list").append(e.item_view.$el)})),s&&(s=s.sort(((e,t)=>e.get("pinned")>t.get("pinned")?1:-1)),s.forEach((e=>{let t=s.indexOf(e);0===t?this.$(".pinned-chat-list").prepend(e.item_view.$el):this.$(".pinned-chat-list .chat-item").eq(t-1).after(e.item_view.$el)})))},showArchiveChats:function(e){this.$(".chat-item").detach();let t=this.model.filter((e=>!e.get("saved")&&e.get("archived")&&!e.get("notifications")));nt.toolbar_view.data.get("account_filtering")&&!e&&(nt.toolbar_view.data.set("account_filtering",null),nt.toolbar_view.$(".toolbar-item.account-item").removeClass("active")),nt.toolbar_view.data.get("account_filtering")&&(t=t.filter((e=>e.account.get("jid")===nt.toolbar_view.data.get("account_filtering")))),t.forEach((e=>{this.$(".chat-list").append(e.item_view.$el)}))},showSavedChats:function(e){this.$(".chat-item").detach();let t=[];nt.accounts.connected.forEach((e=>{if(e.server_features.get(Ii.NS.XABBER_FAVORITES)){let i=e.chats.getSavedChat();t.push(i)}})),nt.toolbar_view.data.get("account_filtering")&&!e&&(nt.toolbar_view.data.set("account_filtering",null),nt.toolbar_view.$(".toolbar-item.account-item").removeClass("active")),nt.toolbar_view.data.get("account_filtering")&&(t=t.filter((e=>e.account.get("jid")===nt.toolbar_view.data.get("account_filtering")))),t.forEach((e=>{this.$(".chat-list").append(e.item_view.$el),e.item_view.$(".last-msg").text(e.account.get("jid")),e.item_view.$(".msg-delivering-state").addClass("hidden")}))},showNotifications:function(e){let t;this.$(".chat-item").detach(),t=this.model.filter((e=>e.account.server_features.get(Ii.NS.XABBER_NOTIFY)&&e.get("jid")===e.account.server_features.get(Ii.NS.XABBER_NOTIFY).get("from")||!e.account.server_features.get(Ii.NS.XABBER_NOTIFY)&&e.get("jid")===e.account.domain)),nt.toolbar_view.data.get("account_filtering")&&!e&&(nt.toolbar_view.data.set("account_filtering",null),nt.toolbar_view.$(".toolbar-item.account-item").removeClass("active")),nt.toolbar_view.data.get("account_filtering")&&(t=t.filter((e=>e.account.get("jid")===nt.toolbar_view.data.get("account_filtering")))),t.forEach((e=>{this.$(".chat-list").append(e.item_view.$el)}))},showAllChats:function(e){this.$(".chat-item").detach();let t=this.model,i=!e&&!nt.toolbar_view.data.get("account_filtering")&&nt.toolbar_view.$(".active.unread").length,s=[],n=[];nt.toolbar_view.data.get("account_filtering")&&!e&&(nt.toolbar_view.data.set("account_filtering",null),nt.toolbar_view.$(".toolbar-item.account-item").removeClass("active")),i&&(s=t.filter((e=>e.contact&&e.get("timestamp")&&!e.get("archived")&&!e.get("notifications")&&e.last_message&&(e.get("unread")||e.get("const_unread")||e.contact.get("invitation")||e.contact.get("subscription_request_in")&&"both"!=e.contact.get("subscription"))&&("0"===e.get("pinned")||!e.get("pinned")))),n=t.filter((e=>e.contact&&e.get("timestamp")&&!e.get("archived")&&!e.get("notifications")&&e.last_message&&(e.get("unread")||e.get("const_unread")||e.contact.get("invitation")||e.contact.get("subscription_request_in")&&"both"!=e.contact.get("subscription"))&&"0"!==e.get("pinned")&&e.get("pinned")))),s.length||n.length||(s=t.filter((e=>(e.get("saved")||e.get("timestamp")&&!e.get("archived")&&!e.get("notifications"))&&("0"===e.get("pinned")||!e.get("pinned")))),n=t.filter((e=>(e.get("saved")||e.get("timestamp")&&!e.get("archived")&&!e.get("notifications"))&&"0"!==e.get("pinned")&&e.get("pinned"))),nt.toolbar_view.$(".toolbar-item:not(.toolbar-logo).unread").removeClass("unread"),this.onUpdatedScreen()),nt.toolbar_view.data.get("account_filtering")&&(s=s.filter((e=>e.account.get("jid")===nt.toolbar_view.data.get("account_filtering"))),n=n.filter((e=>e.account.get("jid")===nt.toolbar_view.data.get("account_filtering")))),s.forEach((e=>{this.$(".chat-list").append(e.item_view.$el)})),n&&(n=n.sort(((e,t)=>e.get("pinned")>t.get("pinned")?1:-1)),n.forEach((e=>{let t=n.indexOf(e);0===t?this.$(".pinned-chat-list").prepend(e.item_view.$el):this.$(".pinned-chat-list .chat-item").eq(t-1).after(e.item_view.$el)})))},updateScreenAllChats:function(){nt.toolbar_view.$(".toolbar-item:not(.account-item):not(.toolbar-logo)").removeClass("active").filter(".all-chats:not(.toolbar-logo)").addClass("active"),this.showAllChats()}}),nt.MessageItemView=nt.BasicView.extend({className:"message-item list-item",template:xi.message_item,avatar_size:yi.AVATAR_SIZES.CHAT_ITEM,events:{click:"openByClick"},_initialize:function(){this.contact=this.model.contact,this.account=this.contact?this.contact.account:this.model.account,this.$el.attr("data-id",this.model.id+"-"+this.cid),this.$el.attr("data-contact-jid",this.contact.get("jid")),this.updateName(),this.updateLastMessage(),this.updateAvatar(),this.updateColorScheme(),this.updateGroupChats(),this.updateIcon(),this.updateStatus(),this.account.settings.on("change:color",this.updateColorScheme,this),this.contact.on("change:status",this.updateStatus,this),this.contact.on("change:name",this.updateName,this)},updateName:function(){this.$(".chat-title").text(this.contact.get("name"))},updateAvatar:function(){let e=this.contact.cached_image;this.$(".circle-avatar").setAvatar(e,this.avatar_size)},updateStatus:function(){let e=this.contact.get("status"),t=this.contact.getStatusMessage();this.$(".contact-status").attr("data-status",e),this.$(".chat-icon").attr("data-status",e),this.model.get("blocked")?this.$(".contact-status-message").text(nt.getString("action_contact_blocked")):this.$(".contact-status-message").text(t)},updateGroupChats:function(){let e=this.contact.get("group_chat");this.$(".status").hideIf(e),this.updateIcon(),e&&(this.$el.addClass("group-chat"),this.$(".chat-title").css("color","#424242"),this.model.set("group_chat",!0))},updateIcon:function(){this.$(".chat-icon").addClass("hidden");let e=this.contact.getIcon();e&&this.$(".chat-icon").removeClass("hidden").switchClass(e,"group-invite"==e||"server"==e||"blocked"==e).html(wi.templates.svg[e]())},updateColorScheme:function(){let e=this.account.settings.get("color");this.$el.attr("data-color",e)},updateLastMessage:function(e){if(e||(e=this.model),!e)return;let t=e.get("time"),i=e.get("timestamp"),s=e.get("forwarded_message"),n=e.get("files")||[],a=e.get("images")||[],o=e.get("locations")||[],r=s?e.get("message")||nt.getQuantityString("forwarded_messages_count",s.length).italics():e.getText(),c=e.get("user_info")||e.isSenderMe()&&this.contact.my_info&&this.contact.my_info.attributes||{},l="";if(e.get("videos")&&e.get("videos").length&&(n=n.concat(e.get("videos"))),this.model.set({timestamp:i}),this.model.get("group_chat")&&(l=c.nickname||c.jid||(e.isSenderMe()?this.account.get("name"):e.get("from_jid"))||""),n.length||a.length||o.length){let e=Ci('<span class="text-color-500"/>');if(n.length&&a.length)r=e.text(nt.getString("recent_chat__last_message__attachments",[n.length+a.length]));else{if(1==n.length&&(n[0].is_audio||n[0].voice))r=e.text(`${nt.getString("voice_message")}, `+ki.pretty_duration(n[0].duration));else if(n.length>0){let t=0;n.forEach((e=>{t+=Number(e.size)})),r=e.text(nt.getQuantityString("recent_chat__last_message__files",n.length)+(t>0?`, ${ki.pretty_size(t)}`:""))}if(a.length>0){let t=0;a.forEach((e=>{t+=Number(e.size)})),r=e.text(nt.getQuantityString("recent_chat__last_message__images",a.length)+(t>0?`, ${ki.pretty_size(t)}`:""))}o.length>0&&(r=e.text(nt.getQuantityString("recent_chat__last_message__locations",o.length)))}this.$(".last-msg").html("").append(l).append(r)}else this.$(".last-msg").text("").append(r),l&&this.$(".last-msg").prepend(Ci("<span class=text-color-700>"+l+": </span>"));this.$el.emojify(".last-msg",{emoji_size:16}).hyperlinkify({decode_uri:!0}),this.$(".last-msg-date").text(ki.pretty_short_datetime_recent_chat(t)).attr("title",ji(t)),this.$(".msg-delivering-state").showIf(e.isSenderMe()&&e.get("state")!==yi.MSG_ARCHIVED&&!e.get("notification_msg")).attr("data-state",e.getState())},openByClick:function(){let e=this.account.chats.getChat(this.contact);this.$el.closest(".left-panel-list-wrap").find(".list-item").removeClass("active"),this.$el.addClass("active"),nt.chats_view.openChat(e.item_view,{right_contact_save:!0,clear_search:!1}),nt.body.setScreen(nt.body.screen.get("name"),{right:"message_context",model:e}),nt.right_contact_panel_saveable&&nt.body.screen.get("right_contact")&&"message_context"===nt.body.screen.get("right")&&(nt.right_contact_panel_saveable?e.contact.showDetailsRight("all-chats",{right_saved:!0}):e.contact.showDetailsRight("all-chats",{right_saved:!1})),this.model.get("unique_id")&&e.getMessageContext(this.model.get("unique_id"),{message:!0})}}),nt.ForwardPanelView=nt.SearchView.extend({className:"modal dialog-modal forward-panel-modal",template:xi.forward_panel,ps_selector:".chat-list-wrap",ps_settings:{theme:"item-list"},events:{"keyup .search-input":"keyUpOnSearch","focusout .search-input":"clearSearchSelection","click .close-search-icon":"clearSearch","click .list-item":"onClickItem"},open:function(e,t){this.messages=e,this.account=t,this.$(".chat-list-wrap .pinned-chat-list").html(""),this.$(".chat-list-wrap .chat-list").html(""),this.$(".chat-list-wrap .contact-list").html(""),this.saved_chat=!1;let i=nt.chats_view.model,s=[],n=[];if(s.length||n.length||(s=i.filter((e=>(e.get("saved")||e.get("timestamp")&&!e.get("archived")&&!e.get("notifications"))&&("0"===e.get("pinned")||!e.get("pinned")))),n=i.filter((e=>(e.get("saved")||e.get("timestamp")&&!e.get("archived")&&!e.get("notifications"))&&"0"!==e.get("pinned")&&e.get("pinned")))),n&&(n=n.sort(((e,t)=>e.get("pinned")>t.get("pinned")?1:-1)),n.forEach((e=>{if(e.account.get("jid")===this.account.get("jid"))if(this.account.server_features.get(Ii.NS.XABBER_FAVORITES)&&e.id==`${this.account.server_features.get(Ii.NS.XABBER_FAVORITES).get("from")}:saved`){let t=e.item_view.$el.clone().removeClass("hidden");t.find(".last-msg").text(nt.getString("saved_messages__hint_forward_here")),this.saved_chat=!0,this.$(".chat-list-wrap .pinned-chat-list").prepend(t)}else this.$(".chat-list-wrap .pinned-chat-list").append(e.item_view.$el.clone().removeClass("hidden"))}))),s.forEach((e=>{if(e.account.get("jid")===this.account.get("jid"))if(this.account.server_features.get(Ii.NS.XABBER_FAVORITES)&&e.id==`${this.account.server_features.get(Ii.NS.XABBER_FAVORITES).get("from")}:saved`){let t=e.item_view.$el.clone().removeClass("hidden");t.find(".last-msg").text(nt.getString("saved_messages__hint_forward_here")),this.saved_chat=!0,this.$(".chat-list-wrap .pinned-chat-list").prepend(t)}else this.$(".chat-list-wrap .chat-list").append(e.item_view.$el.clone().removeClass("hidden"))})),!this.saved_chat&&this.account.server_features.get(Ii.NS.XABBER_FAVORITES)){let e=this.account.chats.getSavedChat().item_view.$el.clone();e.find(".last-msg").text(nt.getString("saved_messages__hint_forward_here")),this.$(".chat-list-wrap .pinned-chat-list").prepend(e)}this.$(".chat-list-wrap .pinned-chat-list").prepend(Ci("<div/>",{class:"forward-panel-list-title recent-chats-title hidden"}).text(nt.getString("category_recent_chats"))),this.$(".chat-list-wrap .chat-list").append(Ci("<div/>",{class:"forward-panel-list-title contacts-title hidden"}).text(nt.getString("category_title_contacts"))),this.$(".chat-item").removeClass("active"),this.clearSearch(),this.data.set("visible",!0),this.$el.openModal({ready:()=>{this.updateScrollBar(),this.$(".search-input").focus()},complete:()=>{this.$el.detach(),this.data.set("visible",!1)}})},close:function(){let e=new Ci.Deferred;return this.$el.closeModal({complete:()=>{this.$el.detach(),this.data.set("visible",!1),e.resolve()}}),e.promise()},onClickItem:function(e){let t=Ci(e.target).closest(".list-item");this.onEnterPressed(t)},search:function(e){let t,i,s=!1,n=!1,a=!1;e=e.toLowerCase(),this.$(".roster-contact.list-item").remove(),e&&this.account.roster.forEach((t=>{let i=t.get("jid"),s=t.hash_id,n=t.get("name").toLowerCase().indexOf(e)<0&&i.indexOf(e)<0;if(!n)if(this.$('.chat-list-wrap .chat-item[data-id="'+s+'"]').length)n=!0;else{let e=nt.contacts_view.$(`.account-roster-wrap[data-jid="${this.account.get("jid")}"] .roster-contact[data-jid="${i}"]`).first().clone();e.find(".muted-icon").hide(),this.$(".chat-list-wrap .contact-list").append(e)}!n&&(a=!0)})),this.$(".contacts-title").switchClass("hidden",!a),this.$(".chat-item").each(((a,o)=>{let r=this.account.chats.get(Ci(o).data("id"));r?(t=r.get("jid"),i=r.contact?r.contact.get("name"):r.get("name"),i&&(i=i.toLowerCase()),s=!(!i||i&&i.indexOf(e)<0&&t.indexOf(e)<0),Ci(o).hideIf(!s),s&&(n=!0)):Ci(o).addClass("hidden")})),this.$(".recent-chats-title").switchClass("hidden",!n),this.$(".modal-content .error").showIf(!a&&!n),this.scrollToTop()},onEmptyQuery:function(){this.$(".roster-contact.list-item").remove(),this.$(".contacts-title").addClass("hidden"),this.$(".modal-content .error").addClass("hidden"),this.$(".recent-chats-title").addClass("hidden")},onEnterPressed:function(e){let t;e.hasClass("roster-contact")&&(t=this.account.chats.getChat(this.account.contacts.get(e.data("jid"))).item_view),e.hasClass("chat-item")&&(t=nt.chats_view.child(e.data("id"))),t&&this.forwardTo(t)},forwardTo:function(e){e.model.get("saved")?this.messages.forEach((t=>{e.content.onSubmit("",[t])})):(e.content||(e.content=new nt.ChatContentView({chat_item:e})),e.content.bottom.setForwardedMessages(this.messages)),this.messages=[],this.close().done((()=>{e.open({clear_search:!0})}))}}),nt.InvitationPanelView=nt.SearchView.extend({className:"modal dialog-modal add-user-group-chat",template:xi.group_chats.invitation_panel_view,ps_selector:".contacts-list-wrap",ps_settings:{theme:"item-list"},_initialize:function(){this.registerClickEvents()},open:function(e,t){this.selected_contacts=[],this.account=e,this.contact=t,this.clearPanel(),this.$('textarea[name="invitation_text"]').val(""),this.$(".invitation-reason-wrap").addClass("hidden"),nt.contacts_view.$(`.account-roster-wrap[data-jid="${this.account.get("jid")}"] .roster-group`).each(((e,t)=>{let i=Ci(t).clone();Ci(i).find(".list-item").each(((e,t)=>{this.account.contacts.get(Ci(t).attr("data-jid")).get("group_chat")&&t.remove()})),i.children(".list-item").length&&(this.$(".contacts-list-wrap").append(i),i.find(".arrow").click((e=>{this.toggleContacts(e)})),i.find(".group-head").click((e=>{this.selectAllGroup(e)})))})),this.data.set("visible",!0),this.$el.openModal({ready:()=>{this.updateScrollBar(),this.$(".search-input").focus()},complete:()=>{this.$el.detach(),this.data.set("visible",!1),this.selected_contacts=[]}})},addSelectedUsers:function(){if(!this.selected_contacts.length)return void this.$(".modal-footer button").blur();let e=this.selected_contacts.length,t=new Ci.Deferred,i=0;t.done((t=>{let i;i=t==e?nt.getQuantityString("groupchat__toast__invitations_sent",e):nt.getQuantityString("groupchat__toast_failed_to_sent_invitations",e),ki.callback_popup_message(i,2e3),this.contact.trigger("invitations_send")})),Ci(this.selected_contacts).each(((s,n)=>{this.sendInvite(n,(()=>{i++,s==e-1&&t.resolve(i)}),(()=>{s==e-1&&t.resolve(i)}))})),this.close()},clearPanel:function(){this.$(".modal-footer .errors").text(""),this.$(".counter").text(""),this.$(".contacts-list-wrap").empty(),this.clearSearch()},showReasonWrap:function(){this.$(".invitation-reason-wrap").switchClass("hidden"),this.$(".invitation-reason-wrap").hasClass("hidden")&&this.$('textarea[name="invitation_text"]').val("")},registerClickEvents:function(){this.$(".btn-cancel").click((()=>{this.close()})),this.$(".btn-add").click((()=>{this.addSelectedUsers()})),this.$(".btn-invitation-reason").click((()=>{this.showReasonWrap()}))},addUser:function(e){let t=Ci(e.target).closest(".list-item"),i=t.attr("data-jid"),s=this.selected_contacts.indexOf(i);if(!t.hasClass("click-selected")&&s>-1)return this.$(`.list-item[data-jid="${i}"]`).removeClass("click-selected"),this.selected_contacts.splice(s,1),void this.updateCounter();t.toggleClass("click-selected"),s>-1?this.selected_contacts.splice(s,1):this.selected_contacts.push(i),this.updateCounter()},sendInvite:function(e,t,i){let s="incognito"===this.contact.get("group_info").privacy?nt.getString("groupchat__incognito_group__text_invitation"):nt.getString("groupchat__public_group__text_invitation",[e]);this.$('textarea[name="invitation_text"]').val()&&(s=s+"\n\n"+this.$('textarea[name="invitation_text"]').val());let n=Si({type:"set",to:this.contact.get("full_jid")||this.contact.get("jid")}).c("invite",{xmlns:`${Ii.NS.GROUP_CHAT}#invite`}).c("jid").t(e).up().c("send").t("false").up().c("reason").t(s);this.account.sendIQFast(n,(()=>{this.sendInviteMessage(e),this.close(),t&&t()}),(e=>{this.onInviteError(e),i&&i()}))},onInviteError:function(e){let t;Ci(e).find("not-allowed").length>0&&(t=Ci(e).find("text").text()||nt.getString("groupchat_you_have_no_permissions_to_do_it")),Ci(e).find("conflict").length>0&&(t=Ci(e).find("text").text()||nt.getString("groupchat__invitation__error_already_invited",[Ci(e).find("invite").find("jid").text()])),this.$(".modal-footer .errors").removeClass("hidden").text(t)},sendInviteMessage:function(e){let t="incognito"===this.contact.get("group_info").privacy?nt.getString("groupchat__incognito_group__text_invitation"):nt.getString("groupchat__public_group__text_invitation",[e]);this.$('textarea[name="invitation_text"]').val()&&(t=t+"\n\n"+this.$('textarea[name="invitation_text"]').val());let i=nt.getString("groupchat_legacy_invitation_body",[this.contact.get("jid")]),s=$i({to:e,type:"chat",id:Mi()}).c("invite",{xmlns:`${Ii.NS.GROUP_CHAT}#invite`,jid:this.contact.get("jid")}).c("reason").t(t).up().up().c("x",{xmlns:Ii.NS.GROUP_CHAT}).c("privacy").t(this.contact.get("group_info").privacy).up().up().c("body").t(i).up();this.account.sendMsg(s)},search:function(e){(e=e.toLowerCase())&&this.$(".list-item").each(((t,i)=>{let s=Ci(i).attr("data-jid"),n=this.account.contacts.get(s).get("name").toLowerCase(),a=this.$(`.list-item[data-jid="${s}"]`).length>1&&!this.$(`.list-item[data-jid="${s}"]`).first().is(Ci(i));Ci(i).hideIf(n.indexOf(e)<0&&s.indexOf(e)<0||a)})),this.$(".group-head").addClass("hidden"),this.$(".modal-content .error").switchClass("hidden",!(this.$(".list-item").length===this.$(".list-item.hidden").length)),this.scrollToTop()},onEmptyQuery:function(){this.$(".list-item").removeClass("hidden"),this.$(".group-head").removeClass("hidden")},onClickItem:function(e){this.addUser(e)},onEnterPressed:function(e){let t=e.attr("data-jid"),i=this.selected_contacts.indexOf(t);i>-1&&this.selected_contacts.splice(i,1),this.selected_contacts.push(t),this.updateCounter(),this.addSelectedUsers()},close:function(){this.$el.closeModal({complete:this.hide.bind(this)})},toggleContacts:function(e){let t=Ci(e.target).hasClass("mdi-chevron-down");if(t){Ci(e.target).closest(".roster-group").find(".list-item").each(((e,t)=>{Ci(t).addClass("hidden")}))}else{Ci(e.target).closest(".roster-group").find(".list-item").each(((e,t)=>{Ci(t).removeClass("hidden")}))}Ci(e.target).switchClass("mdi-chevron-right",t),Ci(e.target).switchClass("mdi-chevron-down",!t),this.updateScrollBar()},selectAllGroup:function(e){if(Ci(e.target).hasClass("arrow"))return;let t=Ci(e.target).closest(".roster-group");t.hasClass("click-selected")?(t.removeClass("click-selected"),t.find(".list-item").each(((e,t)=>{let i=Ci(t).attr("data-jid"),s=this.selected_contacts.indexOf(i);s>-1&&(this.selected_contacts.splice(s,1),Ci(t).removeClass("click-selected"))}))):(t.addClass("click-selected"),t.find(".list-item").each(((e,t)=>{let i=Ci(t).attr("data-jid");this.selected_contacts.indexOf(i)>-1||(this.selected_contacts.push(i),Ci(t).addClass("click-selected"))}))),this.updateCounter()},updateCounter:function(){let e=this.$(".list-item.click-selected").length;e?this.$(".counter").removeClass("hidden").text(e):this.$(".counter").text("")}}),nt.SavedChatHeadView=nt.BasicView.extend({className:"chat-head-wrap saved-chat",template:xi.saved_chat_head,events:{"click .contact-name":"showSettings","click .circle-avatar":"showSettings","click .btn-chat-pin":"pinSavedChat","click .btn-delete-chat":"deleteChat","click .btn-set-status":"setStatus","click .btn-play-pause-plyr":"playPausePlyr","click .btn-next-plyr":"nextPlyr","click .btn-previous-plyr":"previousPlyr","click .btn-stop-plyr":"stopPlyr","click .btn-popup-plyr":"popupPlyr","click .btn-jingle-message":"openJingleMessage","click .btn-search-messages":"renderSearchPanel"},_initialize:function(e){this.content=e.content,this.contact=this.content.contact,this.model=this.content.model,clearInterval(this._update_oneliner_interval),this.updateOneLiner(),this._update_oneliner_interval=setInterval((()=>{this.updateOneLiner()}),12e4),this.account=this.model.account,this.$el.find(".circle-avatar:not(.voice-message-player-avatar)").html(wi.templates.svg["saved-messages"]()),this.model.on("close_chat",this.closeChat,this),this.model.on("hide_chat",this.hideChat,this),nt.on("plyr_player_updated",this.updatePlyrControls,this),nt.on("update_layout",this.updatePlyrTitle,this),nt.on("plyr_player_time_updated",this.updatePlyrTime,this),nt.on("update_jingle_button",this.updateJingleButton,this)},render:function(){return this.$(".tooltipped").tooltip({delay:50}),this.$(".btn-more").dropdown({inDuration:100,outDuration:100,hover:!1}),this.$(".chat-head-menu").hide(),this.updatePlyrControls(),this.updatePlyrTime(),this.updateJingleButton(),this},updateOneLiner:function(){let e=Ei.random(0,nt.getOneLiners().length-1),t=nt.getOneLiners()[e].replace(/\\n/,"");t?this.$(".one-liner").text(t):this.updateOneLiner()},closeChat:function(){this.model.set({opened:!1,display:!1,active:!1}),nt.chats_view.clearSearch()},hideChat:function(){this.model.set({active:!1}),nt.chats_view.clearSearch()},showSettings:function(){this.account.showSettingsModal()},deleteChat:function(){let e=this.account.server_features.get(Ii.NS.REWRITE);ki.dialogs.ask(nt.getString("dialog_delete_saved_messages__header"),nt.getString("dialog_delete_saved_messages__confirm")+(e?"":"\n"+nt.getString("dialog_delete_saved_messages__confirm",[this.account.domain]).fontcolor("#E53935")),null,{ok_button_text:e?nt.getString("delete"):nt.getString("dialog_clear_chat_history__button_delete_locally")}).done((t=>{if(t){if(this.account.connection&&this.account.connection.do_synchronization&&this.model.deleteFromSynchronization(),e)this.model.retractAllMessages(!1);else{let e=this.model.messages.models;Ci(e).each(((e,t)=>{this.content.removeMessage(t)}))}this.closeChat(),this.model.set("timestamp",0)}}))},pinSavedChat:function(){let e=this.model.get("pinned"),t=!(!e||"0"===e)?"0":+new Date,i={jid:this.model.get("jid"),pinned:t,type:this.model.get("sync_type")?this.model.get("sync_type"):this.model.getConversationType(this.model)},s=Si({type:"set",to:this.account.get("jid")}).c("query",{xmlns:Ii.NS.SYNCHRONIZATION}).c("conversation",i);this.account.sendIQFast(s),this.model.set("pinned",t)},renderSearchPanel:function(){let e;this.content.isVisible()&&(e=this.content),this.model.messages_view&&this.model.messages_view.isVisible()&&(e=this.model.messages_view),e&&e.$search_form.slideToggle(200,(()=>{"none"!==e.$search_form.css("display")&&e.$search_form.find("input").focus()}))},playPausePlyr:function(){if(nt.current_plyr_player){if(nt.current_plyr_player.$audio_elem)if(nt.current_plyr_player.$audio_elem.voice_message)nt.current_plyr_player.$audio_elem.voice_message.playPause();else{let e=Ci(nt.current_plyr_player.$audio_elem).find(".file-link-download").attr("href");Ci(nt.current_plyr_player.$audio_elem).find(".mdi-play").removeClass("no-uploaded"),nt.current_plyr_player.$audio_elem.voice_message=this.content.renderVoiceMessage(Ci(nt.current_plyr_player.$audio_elem).find(".file-container")[0],e)}else nt.current_plyr_player.togglePlay();nt.trigger("plyr_player_updated")}},stopPlyr:function(){!nt.current_plyr_player&&nt.plyr_player_popup||(nt.plyr_players.forEach((e=>{e.$audio_elem&&e.$audio_elem.voice_message&&e.$audio_elem.voice_message.stopTime()})),nt.plyr_player_popup?nt.plyr_player_popup.closePopup():(nt.current_plyr_player=null,nt.trigger("plyr_player_updated")))},popupPlyr:function(){nt.plyr_player_popup&&nt.plyr_player_popup.minimizePopup()},nextPlyr:function(){let e=nt.current_plyr_player.chat_item.model.plyr_players.indexOf(nt.current_plyr_player);if(-1===e&&nt.current_plyr_player.player_item&&(e=nt.current_plyr_player.chat_item.model.plyr_players.indexOf(nt.current_plyr_player.player_item)),nt.current_plyr_player&&e>=0&&e<nt.current_plyr_player.chat_item.model.plyr_players.length-1)if(nt.current_plyr_player.chat_item.model.plyr_players[e+1].$audio_elem){let t=nt.current_plyr_player.chat_item.model.plyr_players[e+1];if(t.$audio_elem.voice_message)t.$audio_elem.voice_message.play();else{let e=Ci(t.$audio_elem).find(".file-link-download").attr("href");Ci(t.$audio_elem).find(".mdi-play").removeClass("no-uploaded"),t.$audio_elem.voice_message=nt.current_plyr_player.chat_item.content.renderVoiceMessage(Ci(t.$audio_elem).find(".file-container")[0],e,nt.current_plyr_player.chat_item.model)}}else nt.plyr_player_popup?nt.plyr_player_popup.showNewVideo({player:nt.current_plyr_player.chat_item.model.plyr_players[e+1]}):(nt.plyr_player_popup=new nt.PlyrPlayerPopupView({}),nt.plyr_player_popup.show({player:nt.current_plyr_player.chat_item.model.plyr_players[e+1]}))},previousPlyr:function(){let e=nt.current_plyr_player.chat_item.model.plyr_players.indexOf(nt.current_plyr_player);if(-1===e&&nt.current_plyr_player.player_item&&(e=nt.current_plyr_player.chat_item.model.plyr_players.indexOf(nt.current_plyr_player.player_item)),nt.current_plyr_player&&e<=nt.current_plyr_player.chat_item.model.plyr_players.length&&e>0)if(nt.current_plyr_player.chat_item.model.plyr_players[e-1].$audio_elem){let t=nt.current_plyr_player.chat_item.model.plyr_players[e-1];if(t.$audio_elem.voice_message)t.$audio_elem.voice_message.play();else{let e=Ci(t.$audio_elem).find(".file-link-download").attr("href");Ci(t.$audio_elem).find(".mdi-play").removeClass("no-uploaded"),t.$audio_elem.voice_message=nt.current_plyr_player.chat_item.content.renderVoiceMessage(Ci(t.$audio_elem).find(".file-container")[0],e,nt.current_plyr_player.chat_item.model)}}else nt.plyr_player_popup?nt.plyr_player_popup.showNewVideo({player:nt.current_plyr_player.chat_item.model.plyr_players[e-1]}):(nt.plyr_player_popup=new nt.PlyrPlayerPopupView({}),nt.plyr_player_popup.show({player:nt.current_plyr_player.chat_item.model.plyr_players[e-1]}))},updatePlyrControls:function(){if(this.$(".chat-tool-player").showIf(nt.current_plyr_player),this.$el.switchClass("chat-head-player-enabled",nt.current_plyr_player),nt.current_plyr_player&&nt.current_plyr_player.$audio_elem){if(nt.current_plyr_player.$audio_elem.voice_message){let e=nt.current_plyr_player.$audio_elem.voice_message;this.$(".chat-head-player-type").text(nt.getString("chat_message_voice")),this.$(".btn-play-pause-plyr .mdi-play").hideIf(e.isPlaying()),this.$(".btn-play-pause-plyr .mdi-pause").hideIf(!e.isPlaying()),this.$(".btn-play-pause-plyr").switchClass("active-plyr",e.isPlaying()),this.$(".btn-previous-plyr").switchClass("before-active-plyr",e.isPlaying());let t=nt.current_plyr_player.chat_item.model.plyr_players.indexOf(nt.current_plyr_player);this.$(".btn-next-plyr").switchClass("disabled",!(t>=0&&t<nt.current_plyr_player.chat_item.model.plyr_players.length-1)),this.$(".btn-previous-plyr").switchClass("disabled",!(t<=nt.current_plyr_player.chat_item.model.plyr_players.length&&t>0)),this.$(".mdi-player-type-icon").addClass("hidden"),this.$(".player-poster").addClass("hidden"),this.$(".voice-message-player-avatar").removeClass("hidden"),this.$(".voice-message-player-avatar").setAvatar(nt.current_plyr_player.contact_avatar,32),this.updatePlyrTitle();let i=Math.round(e.getDuration());this.$(".chat-head-player-total-time").text(ki.pretty_duration(i));let s=setInterval((function(){let t=Math.round(e.getCurrentTime());e.isPlaying()?this.$(".chat-head-player-current-time").text(ki.pretty_duration(t)):clearInterval(s)}),100);nt.plyr_player_popup&&nt.plyr_player_popup.$el.addClass("hidden2"),nt.plyr_player_popup&&nt.plyr_player_popup.$el.closest("#modals").siblings("#"+nt.plyr_player_popup.$el.data("overlayId")).addClass("hidden2")}}else if(nt.current_plyr_player){this.$(".chat-head-player-current-time").text(ki.pretty_duration(isNaN(nt.current_plyr_player.currentTime)?0:parseInt(nt.current_plyr_player.currentTime))),this.$(".chat-head-player-total-time").text(ki.pretty_duration(parseInt(nt.current_plyr_player.duration))),this.updatePlyrTitle();let e=nt.current_plyr_player.poster;e?(this.$(".mdi-player-type-icon").addClass("hidden"),this.$(".player-poster").removeClass("hidden"),this.$(".player-poster").attr("src",e)):(this.$(".mdi-player-type-icon").removeClass("hidden"),this.$(".player-poster").addClass("hidden")),this.$(".voice-message-player-avatar").addClass("hidden"),"html5"!=nt.current_plyr_player.provider?this.$(".chat-head-player-type").text(nt.current_plyr_player.provider):this.$(".chat-head-player-type").text(nt.getString("chat_message_video")),this.$(".btn-play-pause-plyr .mdi-play").hideIf(nt.current_plyr_player.playing),this.$(".btn-play-pause-plyr .mdi-pause").hideIf(!nt.current_plyr_player.playing),this.$(".btn-play-pause-plyr").switchClass("active-plyr",nt.current_plyr_player.playing),this.$(".btn-previous-plyr").switchClass("before-active-plyr",nt.current_plyr_player.playing);let t=nt.current_plyr_player.chat_item.model.plyr_players.indexOf(nt.current_plyr_player.player_item);this.$(".btn-next-plyr").switchClass("disabled",!(t>=0&&t<nt.current_plyr_player.chat_item.model.plyr_players.length-1)),this.$(".btn-previous-plyr").switchClass("disabled",!(t<=nt.current_plyr_player.chat_item.model.plyr_players.length&&t>0)),nt.plyr_player_popup&&nt.plyr_player_popup.$el.removeClass("hidden2"),nt.plyr_player_popup&&nt.plyr_player_popup.$el.closest("#modals").siblings("#"+nt.plyr_player_popup.$el.data("overlayId")).removeClass("hidden2")}},updatePlyrTime:function(){nt.current_plyr_player&&(nt.current_plyr_player&&nt.current_plyr_player.$audio_elem||isNaN(nt.current_plyr_player.currentTime)||this.$(".chat-head-player-current-time").text(ki.pretty_duration(isNaN(nt.current_plyr_player.currentTime)?0:parseInt(nt.current_plyr_player.currentTime))))},updatePlyrTitle:function(){if(!nt.current_plyr_player)return;let e,t=this.$(".chat-head-player-title .chat-head-player-title-text");nt.current_plyr_player&&nt.current_plyr_player.$audio_elem?e=nt.current_plyr_player.author:nt.current_plyr_player&&(e=nt.current_plyr_player.config.title?nt.current_plyr_player.config.title:"html5"===nt.current_plyr_player.provider?nt.current_plyr_player.source.substring(nt.current_plyr_player.source.lastIndexOf("/")+1):nt.getString("chat_message_video")),t.text(e),this.$(".chat-head-player-title")[0]&&ki.isOverflownWidth(this.$(".chat-head-player-title")[0])?(t.addClass("active-animation-player-title"),t.text(e+" ⚫︎︎ ⚫︎︎ ⚫︎︎ "+e)):t.removeClass("active-animation-player-title")},updateJingleButton:function(){if(this.$(".btn-jingle-message").switchClass("active-call",nt.current_voip_call),nt.current_voip_call){this.$(".btn-jingle-message").removeClass("hidden");let e=nt.current_voip_call.get("status");e?this.$(".btn-jingle-message").attr("data-state",e):this.$(".btn-jingle-message").attr("data-state",""),"disconnected"===e&&this.$(".btn-jingle-message").removeClass("active-call")}else this.$(".btn-jingle-message").addClass("hidden")},openJingleMessage:function(){nt.current_voip_call&&nt.current_voip_call.modal_view.collapse()}}),nt.ChatHeadView=nt.BasicView.extend({className:"chat-head-wrap",template:xi.chat_head,avatar_size:yi.AVATAR_SIZES.CHAT_HEAD,events:{"click .chat-head-wrap":"showContactDetailsRight","click .chat-head-details":"showContactDetailsRight","click .contact-name":"showContactDetailsRight","click .circle-avatar":"showContactDetailsRight","click .contact-status-message.resource-hover":"showContactResources","click .contact-status-message.members-hover":"showMembersDetails","click .btn-clear-history":"clearHistory","click .btn-invite-users":"inviteUsers","click .btn-delete-chat":"deleteChat","click .btn-delete-contact":"deleteContact","click .btn-block-contact":"blockContact","click .btn-unblock-contact":"unblockContact","click .btn-export-history":"exportHistory","click .btn-show-fingerprints":"showFingerprints","click .btn-start-encryption":"startEncryptedChat","click .btn-open-encrypted-chat":"openEncryptedChat","click .btn-start-trust-verification":"startTrustVerification","click .btn-open-regular-chat":"openRegularChat","click .btn-chat-pin":"pinChat","click .btn-archive-chat":"archiveChat","click .btn-call-attention":"callAttention","click .btn-export-chat":"exportChat","click .btn-search-messages":"renderSearchPanel","click .btn-jingle-message":"sendJingleMessage","click .btn-mute-dropdown":"muteChat","click .btn-notifications.muted":"unmuteChat","click .btn-set-status":"setStatus","click .btn-play-pause-plyr":"playPausePlyr","click .btn-next-plyr":"nextPlyr","click .btn-previous-plyr":"previousPlyr","click .btn-stop-plyr":"stopPlyr","click .btn-popup-plyr":"popupPlyr","click .btn-set-ephemeral-timer":"setEphemeralTimer"},_initialize:function(e){this.content=e.content,this.contact=this.content.contact,this.model=this.content.model,this.account=this.model.account,this.resources_view=new nt.ContactResourcesRightView({model:this.contact.resources}),this.updateName(),this.updateStatus(),this.updateEncrypted(),this.updateAvatar(),this.updateNotifications(),this.updateArchived(),this.updatePinned(),this.account.on("change:omemo_enabled",this.updateMenu,this),this.model.on("change:encrypted",this.updateEncrypted,this),this.model.on("close_chat",this.closeChat,this),this.model.on("hide_chat",this.hideChat,this),this.model.on("pinned",this.pinChat,this),this.model.on("change:muted",this.updateNotifications,this),this.model.on("change:archived",this.updateArchived,this),this.model.on("change:pinned",this.updatePinned,this),this.contact.on("change",this.onContactChanged,this),this.contact.on("archive_chat",this.archiveChat,this),this.contact.on("change:name",this.updateName,this),this.contact.on("change:status",this.updateStatus,this),this.contact.on("change:status_updated",this.updateStatus,this),this.contact.on("change:image",this.updateAvatar,this),this.contact.on("change:blocked",this.onChangedBlocked,this),this.contact.on("change:group_chat",this.updateGroupChatHead,this),this.contact.on("change:subscription",this.updateMenu,this),this.contact.on("change:in_roster",this.updateMenu,this),this.contact.on("update_trusted",this.updateEncryptedColor,this),nt._settings.on("change:jingle_calls",this.updateGroupChatHead,this),nt.on("change:audio",this.updateGroupChatHead,this),nt.on("plyr_player_updated",this.updatePlyrControls,this),nt.on("update_layout",this.updatePlyrTitle,this),nt.on("plyr_player_time_updated",this.updatePlyrTime,this),nt.on("update_jingle_button",this.updateJingleButton,this)},render:function(e){return this.$(".tooltipped").tooltip("remove"),this.$(".tooltipped").tooltip({delay:50}),this.$(".btn-more").dropdown({inDuration:100,outDuration:100,hover:!1}),this.$(".btn-notifications").dropdown({inDuration:100,outDuration:100,hover:!0,belowOrigin:!0}),this.$(".ephemeral-timer-dropdown").switchClass("hidden",!this.model.get("encrypted")),this.$(".ephemeral-timer-dropdown").dropdown({inDuration:100,outDuration:100,hover:!0,belowOrigin:!0}),this.$(".chat-head-menu").hide(),this.updateStatusMsg(),this.updateGroupChatHead(),this.contact.get("group_chat")?this.$(".contact-status-message").addClass("members-hover"):this.$(".contact-status-message").addClass("resource-hover"),this.updatePlyrControls(),this.updatePlyrTime(),this.updateJingleButton(),this},updateEncrypted:function(){this.$el.switchClass("encrypted",this.model.get("encrypted"))},updateEncryptedColor:function(e){this.$el.attr("data-trust",e)},updateName:function(){this.$(".contact-name").text(this.contact.get("name"))},updateStatus:function(){let e=this.contact.get("status"),t=this.contact.getStatusMessage();this.$(".contact-status").attr("data-status",e),this.$(".chat-icon").attr("data-status",e),this.model.get("blocked")?this.$(".contact-status-message").text("Contact blocked"):this.$(".contact-status-message").text(t)},updateStatusMsg:function(){this.$(".contact-status-message").text(this.contact.getStatusMessage())},updateAvatar:function(){let e=this.contact.cached_image;this.$(".circle-avatar").setAvatar(e,this.avatar_size)},onContactChanged:function(){let e=this.contact.changed;(Ei.has(e,"subscription_request_in")||Ei.has(e,"subscription_request_out")||Ei.has(e,"subscription")||Ei.has(e,"status_message"))&&this.updateStatusMsg(),(Ei.has(e,"private_chat")||Ei.has(e,"incognito_chat")||Ei.has(e,"invitation"))&&this.updateIcon()},onChangedBlocked:function(){this.updateMenu(),this.updateStatusMsg(),this.updateIcon()},updateMenu:function(){let e=this.contact.get("group_chat"),t=this.model.get("notifications");this.$(".btn-invite-users").showIf(e&&!this.contact.get("private_chat")&&"both"==this.contact.get("subscription")),this.$(".btn-call-attention").hideIf(e||this.model.get("encrypted")),this.$(".btn-clear-history").hideIf(e),this.$(".btn-start-encryption").showIf(!e&&this.account.omemo&&!this.model.get("encrypted")&&!this.account.chats.get(`${this.contact.hash_id}:encrypted`)),this.$(".btn-open-encrypted-chat").showIf(!e&&this.account.omemo&&!this.model.get("encrypted")&&this.account.chats.get(`${this.contact.hash_id}:encrypted`)),this.$(".btn-start-trust-verification").showIf(!e&&this.account.omemo&&this.model.get("encrypted")&&this.account.chats.get(`${this.contact.hash_id}:encrypted`)&&this.account.server_features.get(Ii.NS.XABBER_NOTIFY)),this.$(".btn-open-regular-chat").showIf(this.model.get("encrypted")),this.$(".btn-show-fingerprints").showIf(!e&&this.account.omemo&&this.model.get("encrypted")),this.$(".btn-retract-own-messages").showIf(e),this.$(".btn-block-contact").hideIf(this.contact.get("blocked")),this.$(".btn-unblock-contact").showIf(this.contact.get("blocked")),this.$(".btn-delete-contact").showIf(this.contact.get("in_roster")&&!e),this.$(".btn-notifications").hideIf(this.contact.get("blocked")),this.$(".btn-jingle-message").hideIf((this.contact.get("blocked")||e)&&nt.current_voip_call),this.$(".btn-jingle-message").hideIf(!nt.settings.jingle_calls),this.$el.switchClass("notifications",t)},renderSearchPanel:function(){this.contact.showDetailsRight("all-chats",{type:"search"})},showContactDetailsRight:function(){this.contact.showDetailsRight("all-chats",{encrypted:this.model.get("encrypted")})},showContactResources:function(){this.resources_view.open()},showMembersDetails:function(){this.contact.showDetailsRight("all-chats",{type:"members"})},updatePinned:function(){let e=this.model.get("pinned");!(!e||"0"===e)?this.$(".btn-chat-pin .one-line").text(nt.getString("chat_action_unpin")):this.$(".btn-chat-pin .one-line").text(nt.getString("chat_action_pin"))},updateNotifications:function(){this.model.isMuted()?(this.$(".btn-notifications .one-line").text(nt.getString("chat_action_unmute")),this.$(".btn-notifications").addClass("muted")):(this.$(".btn-notifications .one-line").text(nt.getString("chat_action_mute")),this.$(".btn-notifications").removeClass("muted")),this.$(".btn-mute-dropdown").hideIf(this.model.isMuted()),this.$(".btn-unmute-dropdown").hideIf(!this.model.isMuted())},muteChat:function(e){if(this.contact.get("blocked"))return;let t,i=Ci(e.target).closest(".btn-mute-dropdown").data("mute");"minutes15"===i&&(t=900),"hours1"===i&&(t=3600),"hours2"===i&&(t=7200),"day"===i&&(t=86400),"forever"===i&&(t=0),this.model.muteChat(t)},unmuteChat:function(e){this.contact.get("blocked")||this.model.muteChat("")},callAttention:function(e){let t=$i({type:"headline",to:this.contact.get("jid")}).c("attention",{xmlns:Ii.NS.ATTENTION});this.account.sendMsg(t),this.model.messages.createSystemMessage({from_jid:this.account.get("jid"),message:nt.getString("action_attention_called")})},exportChat:function(e){nt.trigger("show_export_messages",{model:this.model,account:this.account,content:this.content})},updateArchived:function(){let e=!this.model.get("archived"),t=!!e;t?this.$(".btn-archive-chat .one-line").text(nt.getString("chat_action_archive")):this.$(".btn-archive-chat .one-line").text(nt.getString("chat_action_unarchive")),this.$(".btn-archive-chat .mdi").switchClass("mdi-package-up",!t),this.$(".btn-archive-chat .mdi").switchClass("mdi-package-down",t),this.model.item_view&&e&&(!this.model.messages.length&&this.model.item_view.updateLastMessage(),this.account.chat_settings&&this.account.chat_settings.updateArchiveChatsList(this.contact.get("jid"),e),this.model.get("active")&&nt.chats_view.updateScreenAllChats())},archiveChat:function(e,t){let i=!this.model.get("archived");if(!t){let e=!!i?"archived":"active",t={jid:this.contact.get("jid"),status:e,type:this.model.get("sync_type")?this.model.get("sync_type"):this.model.getConversationType(this.model)},s=Si({type:"set",to:this.account.get("jid")}).c("query",{xmlns:Ii.NS.SYNCHRONIZATION}).c("conversation",t);this.account.sendIQFast(s),this.model.set("archived",i)}},pinChat:function(){let e=this.model.get("pinned"),t=!(!e||"0"===e)?"0":+new Date,i={jid:this.contact.get("jid"),pinned:t,type:this.model.get("sync_type")?this.model.get("sync_type"):this.model.getConversationType(this.model)},s=Si({type:"set",to:this.account.get("jid")}).c("query",{xmlns:Ii.NS.SYNCHRONIZATION}).c("conversation",i);this.account.sendIQFast(s),this.model.set("pinned",t)},sendJingleMessage:function(){nt.settings.jingle_calls&&(nt.current_voip_call?nt.current_voip_call.modal_view.collapse():(nt.chats_view.scrollToTop(),nt.chats_view.clearSearch(),!this.contact.get("group_chat")&&this.content.initJingleMessage()))},setStatus:function(){(new nt.SetGroupchatStatusView).open(this.contact)},playPausePlyr:function(){if(nt.current_plyr_player){if(nt.current_plyr_player.$audio_elem)if(nt.current_plyr_player.$audio_elem.voice_message)nt.current_plyr_player.$audio_elem.voice_message.playPause();else{let e=Ci(nt.current_plyr_player.$audio_elem).find(".file-link-download").attr("href");Ci(nt.current_plyr_player.$audio_elem).find(".mdi-play").removeClass("no-uploaded"),nt.current_plyr_player.$audio_elem.voice_message=this.content.renderVoiceMessage(Ci(nt.current_plyr_player.$audio_elem).find(".file-container")[0],e)}else nt.current_plyr_player.togglePlay();nt.trigger("plyr_player_updated")}},stopPlyr:function(){!nt.current_plyr_player&&nt.plyr_player_popup||(nt.plyr_players.forEach((e=>{e.$audio_elem&&e.$audio_elem.voice_message&&e.$audio_elem.voice_message.stopTime()})),nt.plyr_player_popup?nt.plyr_player_popup.closePopup():(nt.current_plyr_player=null,nt.trigger("plyr_player_updated")))},popupPlyr:function(){nt.plyr_player_popup&&nt.plyr_player_popup.minimizePopup()},nextPlyr:function(){let e=nt.current_plyr_player.chat_item.model.plyr_players.indexOf(nt.current_plyr_player);if(-1===e&&nt.current_plyr_player.player_item&&(e=nt.current_plyr_player.chat_item.model.plyr_players.indexOf(nt.current_plyr_player.player_item)),nt.current_plyr_player&&e>=0&&e<nt.current_plyr_player.chat_item.model.plyr_players.length-1)if(nt.current_plyr_player.chat_item.model.plyr_players[e+1].$audio_elem){let t=nt.current_plyr_player.chat_item.model.plyr_players[e+1];if(t.$audio_elem.voice_message)t.$audio_elem.voice_message.play();else{let e=Ci(t.$audio_elem).find(".file-link-download").attr("href");Ci(t.$audio_elem).find(".mdi-play").removeClass("no-uploaded"),t.$audio_elem.voice_message=nt.current_plyr_player.chat_item.content.renderVoiceMessage(Ci(t.$audio_elem).find(".file-container")[0],e,nt.current_plyr_player.chat_item.model)}}else nt.plyr_player_popup?nt.plyr_player_popup.showNewVideo({player:nt.current_plyr_player.chat_item.model.plyr_players[e+1]}):(nt.plyr_player_popup=new nt.PlyrPlayerPopupView({}),nt.plyr_player_popup.show({player:nt.current_plyr_player.chat_item.model.plyr_players[e+1]}))},previousPlyr:function(){let e=nt.current_plyr_player.chat_item.model.plyr_players.indexOf(nt.current_plyr_player);if(-1===e&&nt.current_plyr_player.player_item&&(e=nt.current_plyr_player.chat_item.model.plyr_players.indexOf(nt.current_plyr_player.player_item)),nt.current_plyr_player&&e<=nt.current_plyr_player.chat_item.model.plyr_players.length&&e>0)if(nt.current_plyr_player.chat_item.model.plyr_players[e-1].$audio_elem){let t=nt.current_plyr_player.chat_item.model.plyr_players[e-1];if(t.$audio_elem.voice_message)t.$audio_elem.voice_message.play();else{let e=Ci(t.$audio_elem).find(".file-link-download").attr("href");Ci(t.$audio_elem).find(".mdi-play").removeClass("no-uploaded"),t.$audio_elem.voice_message=nt.current_plyr_player.chat_item.content.renderVoiceMessage(Ci(t.$audio_elem).find(".file-container")[0],e,nt.current_plyr_player.chat_item.model)}}else nt.plyr_player_popup?nt.plyr_player_popup.showNewVideo({player:nt.current_plyr_player.chat_item.model.plyr_players[e-1]}):(nt.plyr_player_popup=new nt.PlyrPlayerPopupView({}),nt.plyr_player_popup.show({player:nt.current_plyr_player.chat_item.model.plyr_players[e-1]}))},updatePlyrControls:function(){if(this.$(".chat-tool-player").showIf(nt.current_plyr_player),this.$el.switchClass("chat-head-player-enabled",nt.current_plyr_player),nt.current_plyr_player&&nt.current_plyr_player.$audio_elem){if(nt.current_plyr_player.$audio_elem.voice_message){let e=nt.current_plyr_player.$audio_elem.voice_message;this.$(".chat-head-player-type").text(nt.getString("chat_message_voice")),this.$(".btn-play-pause-plyr .mdi-play").hideIf(e.isPlaying()),this.$(".btn-play-pause-plyr .mdi-pause").hideIf(!e.isPlaying()),this.$(".btn-play-pause-plyr").switchClass("active-plyr",e.isPlaying()),this.$(".btn-previous-plyr").switchClass("before-active-plyr",e.isPlaying());let t=nt.current_plyr_player.chat_item.model.plyr_players.indexOf(nt.current_plyr_player);this.$(".btn-next-plyr").switchClass("disabled",!(t>=0&&t<nt.current_plyr_player.chat_item.model.plyr_players.length-1)),this.$(".btn-previous-plyr").switchClass("disabled",!(t<=nt.current_plyr_player.chat_item.model.plyr_players.length&&t>0)),this.$(".mdi-player-type-icon").addClass("hidden"),this.$(".player-poster").addClass("hidden"),this.$(".voice-message-player-avatar").removeClass("hidden"),this.$(".voice-message-player-avatar").setAvatar(nt.current_plyr_player.contact_avatar,32),this.updatePlyrTitle();let i=Math.round(e.getDuration());this.$(".chat-head-player-total-time").text(ki.pretty_duration(i));let s=setInterval((function(){let t=Math.round(e.getCurrentTime());e.isPlaying()?this.$(".chat-head-player-current-time").text(ki.pretty_duration(t)):clearInterval(s)}),100);nt.plyr_player_popup&&nt.plyr_player_popup.$el.addClass("hidden2"),nt.plyr_player_popup&&nt.plyr_player_popup.$el.closest("#modals").siblings("#"+nt.plyr_player_popup.$el.data("overlayId")).addClass("hidden2")}}else if(nt.current_plyr_player){this.$(".chat-head-player-current-time").text(ki.pretty_duration(isNaN(nt.current_plyr_player.currentTime)?0:parseInt(nt.current_plyr_player.currentTime))),this.$(".chat-head-player-total-time").text(ki.pretty_duration(parseInt(nt.current_plyr_player.duration))),this.updatePlyrTitle();let e=nt.current_plyr_player.poster;e?(this.$(".mdi-player-type-icon").addClass("hidden"),this.$(".player-poster").removeClass("hidden"),this.$(".player-poster").attr("src",e)):(this.$(".mdi-player-type-icon").removeClass("hidden"),this.$(".player-poster").addClass("hidden")),this.$(".voice-message-player-avatar").addClass("hidden"),"html5"!=nt.current_plyr_player.provider?this.$(".chat-head-player-type").text(nt.current_plyr_player.provider):this.$(".chat-head-player-type").text(nt.getString("chat_message_video")),this.$(".btn-play-pause-plyr .mdi-play").hideIf(nt.current_plyr_player.playing),this.$(".btn-play-pause-plyr .mdi-pause").hideIf(!nt.current_plyr_player.playing),this.$(".btn-play-pause-plyr").switchClass("active-plyr",nt.current_plyr_player.playing),this.$(".btn-previous-plyr").switchClass("before-active-plyr",nt.current_plyr_player.playing);let t=nt.current_plyr_player.chat_item.model.plyr_players.indexOf(nt.current_plyr_player.player_item);this.$(".btn-next-plyr").switchClass("disabled",!(t>=0&&t<nt.current_plyr_player.chat_item.model.plyr_players.length-1)),this.$(".btn-previous-plyr").switchClass("disabled",!(t<=nt.current_plyr_player.chat_item.model.plyr_players.length&&t>0)),nt.plyr_player_popup&&nt.plyr_player_popup.$el.removeClass("hidden2"),nt.plyr_player_popup&&nt.plyr_player_popup.$el.closest("#modals").siblings("#"+nt.plyr_player_popup.$el.data("overlayId")).removeClass("hidden2")}},updatePlyrTime:function(){nt.current_plyr_player&&(nt.current_plyr_player&&nt.current_plyr_player.$audio_elem||isNaN(nt.current_plyr_player.currentTime)||this.$(".chat-head-player-current-time").text(ki.pretty_duration(isNaN(nt.current_plyr_player.currentTime)?0:parseInt(nt.current_plyr_player.currentTime))))},updatePlyrTitle:function(){if(!nt.current_plyr_player)return;let e,t=this.$(".chat-head-player-title .chat-head-player-title-text");nt.current_plyr_player&&nt.current_plyr_player.$audio_elem?e=nt.current_plyr_player.author:nt.current_plyr_player&&(e=nt.current_plyr_player.config.title?nt.current_plyr_player.config.title:"html5"===nt.current_plyr_player.provider?nt.current_plyr_player.source.substring(nt.current_plyr_player.source.lastIndexOf("/")+1):nt.getString("chat_message_video")),t.text(e),this.$(".chat-head-player-title")[0]&&ki.isOverflownWidth(this.$(".chat-head-player-title")[0])?(t.addClass("active-animation-player-title"),t.text(e+" ⚫︎︎ ⚫︎︎ ⚫︎︎ "+e)):t.removeClass("active-animation-player-title")},setEphemeralTimer:function(e){this.model.setEphemeralTimer(e)},updateJingleButton:function(){if(this.$(".btn-jingle-message").switchClass("active-call",nt.current_voip_call),nt.current_voip_call){this.contact.get("group_chat")&&this.$(".btn-jingle-message").removeClass("hidden");let e=nt.current_voip_call.get("status");e?this.$(".btn-jingle-message").attr("data-state",e):this.$(".btn-jingle-message").attr("data-state",""),"disconnected"===e&&this.$(".btn-jingle-message").removeClass("active-call")}else this.contact.get("group_chat")&&this.$(".btn-jingle-message").addClass("hidden")},getActiveScreen:function(){let e=nt.toolbar_view.$(".active");this.$(".omemo-item").removeClass("hidden"),e.hasClass("archive-chats")?nt.toolbar_view.showArchive():e.hasClass("all-chats")?nt.toolbar_view.showAllChats():e.hasClass("chats")?nt.toolbar_view.showChats():e.hasClass("group-chats")?nt.toolbar_view.showGroupChats():e.hasClass("account-item")&&nt.toolbar_view.showChatsByAccount()},updateGroupChatHead:function(){let e=this.contact.get("group_chat");this.updateIcon(),this.$(".btn-jingle-message").showIf(!e&&nt.get("audio")||nt.current_voip_call),this.$(".btn-jingle-message").hideIf(!nt.settings.jingle_calls),this.$(".contact-status").hideIf(e),this.updateMenu()},updateIcon:function(){this.$(".chat-icon").addClass("hidden");let e=this.contact.getIcon();e&&this.$(".chat-icon").removeClass("hidden group-invite blocked").switchClass(e,"group-invite"==e||"server"==e||"blocked"==e).html(wi.templates.svg[e]())},inviteUsers:function(){nt.invite_panel||(nt.invite_panel=new nt.InvitationPanelView({model:nt.opened_chats})),nt.invite_panel.open(this.account,this.contact)},clearHistory:function(){this.content.clearHistory(),nt.chats_view.clearSearch()},leaveGroupChat:function(){this.contact.declineSubscription(),this.contact.removeFromRoster(),this.contact.set("in_roster",!1)},closeChat:function(){this.model.set({opened:!1,display:!1,active:!1}),nt.chats_view.clearSearch()},hideChat:function(){this.model.set({active:!1}),nt.chats_view.clearSearch()},deleteChat:function(){if(this.contact.get("group_chat"))ki.dialogs.ask(nt.getString("delete_chat"),nt.getString("dialog_group_remove__confirm"),null,{ok_button_text:nt.getString("delete")}).done((e=>{if(e){let e=nt.chats_view.getScrollTop()||0;this.account.connection&&this.account.connection.do_synchronization&&this.model.deleteFromSynchronization(),this.leaveGroupChat(),this.closeChat(),nt.body.setScreen("all-chats",{right:void 0,right_contact:null}),nt.chats_view.scrollTo(e)}}));else{let e=this.account.server_features.get(Ii.NS.REWRITE);ki.dialogs.ask(nt.getString("delete_chat"),nt.getString("delete_chat_dialog_message")+(e?"":`\n${nt.getString("dialog_clear_chat_history__warning_deletion_not_supported",[this.account.domain]).fontcolor("#E53935")}`),null,{ok_button_text:e?nt.getString("delete"):nt.getString("dialog_clear_chat_history__button_delete_locally")}).done((t=>{if(t){let t=nt.chats_view.getScrollTop()||0;if(e&&this.model.retractAllMessages(!1),this.account.connection&&this.account.connection.do_synchronization)this.model.deleteFromSynchronization();else{let e=this.model.messages.models;Ci(e).each(((e,t)=>{this.content.removeMessage(t)}))}this.closeChat(),nt.body.setScreen("all-chats",{right:void 0,right_contact:null}),nt.chats_view.scrollTo(t)}}))}},deleteContact:function(){this.contact.deleteWithDialog()},blockContact:function(){this.contact.blockWithDialog()},unblockContact:function(){this.contact.unblockWithDialog()},exportHistory:function(){},showFingerprints:function(){if(!this.account.omemo)return;this.account.omemo.getPeer(this.contact.get("jid")).fingerprints.open()},startEncryptedChat:function(){this.account.chats.openChat(this.contact,{encrypted:!0});let e=this.account.chats.get(this.contact.hash_id+":encrypted");e.set("timestamp",Ti.now()),e.item_view.updateLastMessage()},openEncryptedChat:function(){this.model.set("opened",!0),this.account.chats.openChat(this.contact,{encrypted:!0})},startTrustVerification:function(){if(!this.account.omemo||!this.account.omemo.get("device_id")||!this.account.server_features.get(Ii.NS.XABBER_NOTIFY))return;let e=Mi(),t=Mi(),i=Si({type:"set",to:this.model.get("jid"),id:e});i.c("notify",{xmlns:Ii.NS.XABBER_NOTIFY}),i.c("notification",{xmlns:Ii.NS.XABBER_NOTIFY}),i.c("forwarded",{xmlns:Ii.NS.FORWARD}),i.c("message",{to:this.model.get("jid"),from:this.account.get("jid"),type:"chat",id:Mi()}),i.c("authenticated-key-exchange",{xmlns:Ii.NS.XABBER_TRUST,sid:t,timestamp:Date.now()}).c("verification-start",{"device-id":this.account.omemo.get("device_id")}).up().up(),i.c("body").t(`Device Verification request from ${this.account.jid} A1`).up(),i.up().up().up(),i.c("fallback",{xmlns:Ii.NS.XABBER_NOTIFY}).t("device verification fallback text").up(),i.c("addresses",{xmlns:Ii.NS.ADDRESS}).c("address",{type:"to",jid:this.model.get("jid")}).up().up(),this.account.sendFast(i,(()=>{this.account.omemo.xabber_trust.addVerificationSessionData(t,{verification_started:!0,active_verification_device:{peer_jid:this.model.get("jid")},verification_step:"1a"}),ki.callback_popup_message(nt.getString("trust_verification_started"),5e3)}))},openRegularChat:function(){this.model.set("opened",!0),this.account.chats.openChat(this.contact)}}),nt.SendMediaView=nt.BasicView.extend({className:"modal main-modal avatar-picker background-panel",template:xi.send_media,ps_selector:".modal-content",ps_settings:{theme:"item-list"},events:{"click .menu-btn":"updateActiveMenu","click .library-wrap .image-item":"setActiveImage",'change input[type="file"]':"onFileInputChanged","keyup input.url":"onInputChanged","click .btn-add":"addMedia","click .btn-cancel":"close"},_initialize:function(){this.$("input.url")[0].onpaste=this.onPaste.bind(this)},render:function(e){this.model=e.model,this.parent=e.parent,this.createLibrary(),this.$(".menu-btn").removeClass("active"),this.$('.menu-btn[data-screen-name="upload"]').addClass("active"),this.$(".modal-header span").text(nt.getString("chat_bottom__tooltip_add_media")),this.$el.openModal({ready:()=>{this.$(".modal-content").perfectScrollbar({theme:"item-list"})},complete:this.close.bind(this)});let t=this.$(".upload-wrap");t[0].ondragenter=function(e){e.preventDefault(),t.addClass("file-drop")},t[0].ondragover=function(e){e.preventDefault()},t[0].ondragleave=function(e){Ci(e.relatedTarget).closest(".upload-wrap").length||(e.preventDefault(),t.removeClass("file-drop"))},t[0].ondrop=e=>{e.preventDefault(),e.stopPropagation(),t.removeClass("file-drop");let i=e.dataTransfer.files||[];this.parent.view.addFileMessage(i),this.close()}},onPaste:function(e){let t=e.clipboardData.getData("text").trim();this.$(".image-preview img")[0].onload=()=>{this.$(".image-preview img").removeClass("hidden"),this.updateActiveButton()},this.$(".image-preview img").addClass("hidden")[0].src=t,this.updateActiveButton()},updateActiveMenu:function(e){let t=e.target.getAttribute("data-screen-name");this.$(".menu-btn").removeClass("active"),this.$(`.menu-btn[data-screen-name="${t}"]`).addClass("active"),this.updateScreen(t)},updateScreen:function(e){this.$(".screen-wrap").addClass("hidden"),this.$(`.screen-wrap[data-screen="${e}"]`).removeClass("hidden"),this.scrollToTop(),this.updateActiveButton()},updateActiveButton:function(){let e=this.$(".screen-wrap:not(.hidden)"),t=!0;"image"==e.attr("data-screen")||"video"==e.attr("data-screen")?e.find("div.active").length&&(t=!1):e.find("img:not(.hidden)").length&&(t=!1),this.$(".modal-footer .btn-add").switchClass("non-active",t)},renderFiles:function(e){this.$(`.library-wrap[data-screen="${e.type}"] .preloader-wrapper`).remove(),e.items.length&&e.items.forEach((t=>{let i=Ci('<div class="image-item"/>');i.css("background-image",`url("${t.thumbnail.url}")`),i.attr("data-src",t.file),i.attr("data-name",t.name),this.$(`.library-wrap[data-screen="${e.type}"]`).append(i)}))},createLibrary:function(){this.model.testGalleryTokenExpire((()=>{this.model.get("gallery_token")&&this.model.get("gallery_url")&&(this.$(".library-wrap").html(wi.templates.contacts.preloader()),Ci.ajax({type:"GET",headers:{Authorization:"Bearer "+this.model.get("gallery_token")},url:this.model.get("gallery_url")+"v1/files/",dataType:"json",contentType:"application/json",data:{obj_per_page:50,order_by:"-id",type:"image"},success:e=>{Ai.log(e),e.type="image",this.renderFiles(e)},error:e=>{this.model.handleCommonGalleryErrors(e),Ai.log(e),this.$('.library-wrap[data-screen="image"] .preloader-wrapper').remove()}}),Ci.ajax({type:"GET",headers:{Authorization:"Bearer "+this.model.get("gallery_token")},url:this.model.get("gallery_url")+"v1/files/",dataType:"json",contentType:"application/json",data:{obj_per_page:50,order_by:"-id",type:"video"},success:e=>{Ai.log(e),e.type="video",this.renderFiles(e)},error:e=>{this.model.handleCommonGalleryErrors(e),Ai.log(e),this.$('.library-wrap[data-screen="video"] .preloader-wrapper').remove()}}))}))},setActiveImage:function(e){let t=Ci(e.target);this.$(".screen-wrap:not(.hidden)");t.hasClass("active")?t.removeClass("active"):(this.$(".library-wrap>div").removeClass("active"),t.addClass("active")),this.updateActiveButton()},onFileInputChanged:function(e){let t=e.target,i=[];for(let e=0;e<t.files.length;e++)i.push(t.files[e]);i&&i.length&&(this.parent.view.addFileMessage(i),Ci(t).val(""),this.close())},onInputChanged:function(e){if(e.target.value.trim()!=this.$(".image-preview img")[0].src)if(e.target.value.trim()&&e.keyCode!==yi.KEY_CTRL&&e.keyCode!==yi.KEY_SHIFT&&e.keyCode!==yi.KEY_ARROW_UP&&e.keyCode!==yi.KEY_ARROW_DOWN&&e.keyCode!==yi.KEY_ARROW_RIGHT&&e.keyCode!==yi.KEY_ARROW_LEFT){let t=e.target.value.trim();this.$(".image-preview img")[0].onload=()=>{this.$(".image-preview img").removeClass("hidden"),this.updateActiveButton()},this.$(".image-preview img").addClass("hidden")[0].src=t,this.updateActiveButton()}else this.$(".image-preview img").addClass("hidden")[0].src="",this.updateActiveButton()},addMedia:function(){if(this.$(".btn-add").hasClass("non-active"))return;let e,t,i=new Ci.Deferred,s=this.$(".screen-wrap:not(.hidden)");i.done((e=>{this.parent.view.addFileMessage([e]),this.close()})),this.$(".modal-preloader-wrap").html(wi.templates.contacts.preloader()),this.$(".btn-add").addClass("hidden-disabled"),"image"==s.attr("data-screen")||"video"==s.attr("data-screen")||"web-address"==s.attr("data-screen")?(e="image"==s.attr("data-screen")||"video"==s.attr("data-screen")?s.find("div.active").attr("data-src"):s.find("img:not(.hidden)")[0].src,t="image"==s.attr("data-screen")||"video"==s.attr("data-screen")?s.find("div.active").attr("data-name"):"",this.createFileFromURL(e,t).then((e=>{i.resolve(e)}))):i.resolve(this.current_file)},createFileFromURL:async function(e,t){let i=await fetch(e),s=await i.blob(),n={type:s.type};return new File([s],t||e.split("#").shift().split("?").shift().split("/").pop()||"file",n)},close:function(){this.$el.closeModal({complete:()=>{this.$el.detach(),this.data.set("visible",!1)}})}}),nt.ChatLocationView=nt.BasicView.extend({className:"modal main-modal chat-location ",template:xi.location_popup,events:{"click .btn-cancel":"close","click .btn-apply":"sendLocation","click #map canvas":"closeLocationName","click .nominatim.ol-search input":"initializeScrollbar","focusout .nominatim.ol-search input":"destroyScrollbar"},_initialize:function(e){this.view=e.content,this.model=this.view.model,this.account=this.view.account},render:function(){this.$el.openModal({ready:()=>{this.initMap(),Materialize&&Materialize.updateTextFields&&Materialize.updateTextFields()},complete:this.hide.bind(this)})},initMap:function(){Promise.all([i.e(1216),i.e(3863)]).then(i.bind(i,43863)).then((e=>{e=e.default?e.default:e,this.$el.find(".modal-content").switchClass("popup",nt.popup_coordinates);let t=[new e.layer.Tile({source:new e.source.OSM})],i=nt.popup_coordinates?e.proj.transform(nt.popup_coordinates,"EPSG:4326","EPSG:3857"):[-9639318.435625363,1667475.03690917],s=nt.popup_coordinates?15:0,n=new e.Overlay.Placemark({contentColor:"#000",autoPan:!0,html:'<?xml version="1.0" encoding="UTF-8"?><svg width="48px" height="48px" viewBox="0 0 24 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="icon/material/map-marker" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="36" height="36"></rect><path d="M12,11.5 C10.6192881,11.5 9.5,10.3807119 9.5,9 C9.5,8.33695878 9.7633921,7.70107399 10.232233,7.23223305 C10.701074,6.7633921 11.3369588,6.5 12,6.5 C13.3807119,6.5 14.5,7.61928813 14.5,9 C14.5,9.66304122 14.2366079,10.298926 13.767767,10.767767 C13.298926,11.2366079 12.6630412,11.5 12,11.5 M12,2 C8.13400675,2 5,5.13400675 5,9 C5,14.25 12,22 12,22 C12,22 19,14.25 19,9 C19,5.13400675 15.8659932,2 12,2 Z" id="mdi:map-marker" fill="#000000" fill-rule="nonzero"></path></g></svg>',anchor:!1,autoPanAnimation:{duration:250}}),a=new e.Overlay.Placemark({contentColor:"#000",autoPan:!0,html:'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="36px" height="36px"><circle class="outer" cx="20" cy="20" r="16" stroke="none" stroke-width="1.5" fill="none" style="opacity: 0.6;"></circle><circle class="inner" cx="20" cy="20" r="8" stroke="white" stroke-width="1.5" fill="none"></circle></svg>',anchor:!1,autoPanAnimation:{duration:250}}),o=new e.Map({target:"map",view:new e.View({zoom:s,center:i}),interactions:e.interaction_defaults({altShiftDragRotate:!1,pinchRotate:!1}),layers:t,overlays:[n,a]}),r={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};function c(t){let i=t.coords;o.getView().setCenter(e.proj.transform([i.longitude,i.latitude],"EPSG:4326","EPSG:3857")),a.show(e.proj.transform([i.longitude,i.latitude],"EPSG:4326","EPSG:3857")),o.getView().setZoom(17),d.innerHTML='<?xml version="1.0" encoding="UTF-8"?><svg width="22px" height="22px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="icon/material/crosshairs-gps" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="22" height="22"></rect><path d="M12,8 C14.209139,8 16,9.790861 16,12 C16,14.209139 14.209139,16 12,16 C9.790861,16 8,14.209139 8,12 C8,9.790861 9.790861,8 12,8 M3.05,13 L1,13 L1,11 L3.05,11 C3.5,6.83 6.83,3.5 11,3.05 L11,1 L13,1 L13,3.05 C17.17,3.5 20.5,6.83 20.95,11 L23,11 L23,13 L20.95,13 C20.5,17.17 17.17,20.5 13,20.95 L13,23 L11,23 L11,20.95 C6.83,20.5 3.5,17.17 3.05,13 M12,5 C8.13400675,5 5,8.13400675 5,12 C5,15.8659932 8.13400675,19 12,19 C15.8659932,19 19,15.8659932 19,12 C19,8.13400675 15.8659932,5 12,5 L12,5 Z" id="mdi:crosshairs-gps" fill="#9E9E9E" fill-rule="nonzero"></path></g></svg>'}function l(e){Ai.warn(`ERROR(${e.code}): ${e.message}`)}let d=document.createElement("button");d.innerHTML='<?xml version="1.0" encoding="UTF-8"?><svg width="22px" height="22px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="icon/material/crosshairs-question" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="22" height="22"></rect><path d="M3.05,13 L1,13 L1,11 L3.05,11 C3.5,6.83 6.83,3.5 11,3.05 L11,1 L13,1 L13,3.05 C17.17,3.5 20.5,6.83 20.95,11 L23,11 L23,13 L20.95,13 C20.5,17.17 17.17,20.5 13,20.95 L13,23 L11,23 L11,20.95 C6.83,20.5 3.5,17.17 3.05,13 M12,5 C8.13,5 5,8.13 5,12 C5,15.87 8.13,19 12,19 C15.87,19 19,15.87 19,12 C19,8.13 15.87,5 12,5 M11.13,17.25 L12.88,17.25 L12.88,15.5 L11.13,15.5 L11.13,17.25 M12,6.75 C10.07,6.75 8.5,8.32 8.5,10.25 L10.25,10.25 C10.25,9.28 11.03,8.5 12,8.5 C12.97,8.5 13.75,9.28 13.75,10.25 C13.75,12 11.13,11.78 11.13,14.63 L12.88,14.63 C12.88,12.66 15.5,12.44 15.5,10.25 C15.5,8.32 13.93,6.75 12,6.75 Z" id="mdi:crosshairs-question" fill="#9E9E9E" fill-rule="nonzero"></path></g></svg>',d.addEventListener("click",(function(e){navigator.geolocation.getCurrentPosition(c,l,r)}),!1);let h=document.createElement("div");nt.popup_coordinates?h.className="geoposition placemark-exist ol-control ol-unselectable":h.className="geoposition ol-control ol-unselectable",h.appendChild(d);let g=new e.control.Control({className:"myControl",element:h,target:document.getElementById("myCustomControl")});if(o.addControl(g),nt.popup_coordinates){n.show(e.proj.transform(nt.popup_coordinates,"EPSG:4326","EPSG:3857")),Ci(".ol-zoom.ol-unselectable.ol-control").addClass("placemark-exist");let u=function(t){o.getView().setCenter(e.proj.transform(nt.popup_coordinates,"EPSG:4326","EPSG:3857")),o.getView().setZoom(15),Ci(".ol-location").show()},p=document.createElement("button");p.innerHTML='<?xml version="1.0" encoding="UTF-8"?><svg width="22px" height="22px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="icon/material/map-marker" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><rect id="ViewBox" fill-rule="nonzero" x="0" y="0" width="36" height="36"></rect><path d="M12,11.5 C10.6192881,11.5 9.5,10.3807119 9.5,9 C9.5,8.33695878 9.7633921,7.70107399 10.232233,7.23223305 C10.701074,6.7633921 11.3369588,6.5 12,6.5 C13.3807119,6.5 14.5,7.61928813 14.5,9 C14.5,9.66304122 14.2366079,10.298926 13.767767,10.767767 C13.298926,11.2366079 12.6630412,11.5 12,11.5 M12,2 C8.13400675,2 5,5.13400675 5,9 C5,14.25 12,22 12,22 C12,22 19,14.25 19,9 C19,5.13400675 15.8659932,2 12,2 Z" id="mdi:map-marker" fill="#9E9E9E" fill-rule="nonzero"></path></g></svg>',p.addEventListener("click",u,!1);let m=document.createElement("div");m.className="placemark-position ol-control ol-unselectable",m.appendChild(p);let _=new e.control.Control({className:"myControl",element:m,target:document.getElementById("myCustomControl")});o.addControl(_);let v=document.createElement("div");v.innerHTML=nt.location_name||"",v.className="ol-location ol-control ol-unselectable";let f=new e.control.Control({className:"myControl",element:v,target:document.getElementById("myCustomControl")});o.addControl(f)}if(!nt.popup_coordinates){let b=document.createElement("button");b.className="btn-apply mdi mdi-28px mdi-send";let A=document.createElement("div");A.setAttribute("id","send_address"),A.className="ol-send-address";let w=document.createElement("div");w.setAttribute("id","send_text"),w.className="ol-send-text";let y=document.createElement("div");y.className="ol-send ol-control ol-unselectable",y.appendChild(A),y.appendChild(w),y.appendChild(b);let x=new e.control.Control({className:"myControl",element:y,target:document.getElementById("myCustomControl")});o.addControl(x);let k=new e.layer.Vector({source:new e.source.Vector,style:new e.style.Style({image:new e.style.Circle({radius:5,stroke:new e.style.Stroke({color:"rgb(255,165,0)",width:3}),fill:new e.style.Fill({color:"rgba(255,165,0,.3)"})}),stroke:new e.style.Stroke({color:"rgb(255,165,0)",width:3}),fill:new e.style.Fill({color:"rgba(255,165,0,.3)"})})});o.addLayer(k);let C=new e.control.SearchNominatim({polygon:Ci("#polygon").prop("checked"),reverse:!0,position:!0});function S(e){if(e[0].error)Ci("#send_address").text(nt.getString("location_fragment__address_error__title"));else{let t=e[0].address.house_number?" "+e[0].address.house_number:"",i=e[0].address.road?e[0].address.road+t+", ":"",s=e[0].address.state?e[0].address.state+", ":"",n=e[0].address.neighbourhood?e[0].address.neighbourhood+", ":"",a=e[0].address.allotments?e[0].address.allotments+", ":"",o=e[0].address.village?e[0].address.village+", ":"",r=e[0].address.city?e[0].address.city+", ":"",c=e[0].address.country?s+e[0].address.country:"",l="";l=i?i+n+a+o+r+s.replace(", ",""):n+a+o+r+c,Ci("#send_address").text(l)}}o.addControl(C),C.on("select",(function(t){if(k.getSource().clear(),t.search.geojson){let i=(new e.format.GeoJSON).readFeature(t.search.geojson,{dataProjection:"EPSG:4326",featureProjection:o.getView().getProjection()});k.getSource().addFeature(i);let s=o.getView(),n=s.getResolutionForExtent(i.getGeometry().getExtent(),o.getSize()),a=s.getZoomForResolution(n),r=e.extent.getCenter(i.getGeometry().getExtent());setTimeout((function(){s.animate({center:r,zoom:Math.min(a,16)})}),100)}else o.getView().animate({center:t.coordinate,zoom:Math.max(o.getView().getZoom(),16)})})),o.on("click",(function(t){n.show(t.coordinate),C.reverseGeocode(t.coordinate,S);let i=e.proj.transform(t.coordinate,o.getView().getProjection(),"EPSG:4326");Ci(".ol-control.ol-send").show(),Ci("#send_text").text(i[1].toFixed(6)+":"+i[0].toFixed(6)),Ci("#output").text("geo:"+i[1]+","+i[0]),Ci("#lat").text(i[1]),Ci("#lon").text(i[0])}))}window.setTimeout((function(){o.updateSize()}),200)}))},sendLocation:function(e){if(this.$("#output").val()){let e=this.$("#output").val(),t="",i=t.length,s=(e+t).length,n=this.$("#lat").val(),a=this.$("#lon").val(),o=[{lat:n,lon:a}],r=[{start:i,end:s,type:"geolocation"}],c={from_jid:this.account.get("jid"),locations:o,mutable_content:r,message:this.$("#output").val(),begin:i,end:s},l=this.model.messages.create(c),d=l.get("msgid"),h=$i({to:this.model.get("jid"),type:"chat",id:d});h.c("markable").attrs({xmlns:Ii.NS.CHAT_MARKERS}).up(),h.c("origin-id",{id:d,xmlns:"urn:xmpp:sid:0"}).up(),h.c("reference",{xmlns:Ii.NS.REFERENCE,type:"mutable",begin:i,end:s}).c("geoloc",{xmlns:Ii.NS.GEOLOC}).c("lat").t(n).up().c("lon").t(a).up().up().up(),h.c("body").t(e).up(),this.model.get("encrypted")&&this.account.omemo?(h.c("envelope",{xmlns:Ii.NS.SCE}).c("content"),Ci(h.tree()).children("body").length&&(h.cnode(Ci(h.tree()).children("body")[0]).attrs({xmlns:Ii.NS.CLIENT}).up(),Ci(h.tree()).children("body").detach()),Ci(h.tree()).children("reference").length&&(Ci(h.tree()).children("reference").each(((e,t)=>{h.cnode(Ci(h.tree()).children("reference")[e]).up()})),Ci(h.tree()).children("reference").detach()),h.up().c("rpad").t("0".repeat(200).slice(1,Math.floor(198*Math.random()+1))).up(),h.c("from",{jid:this.account.get("jid")}).up().up(),l.set({xml:Ci(h.tree()).clone()[0]}),this.account.omemo.encrypt(this.model.contact,h).then((e=>{e&&(h=e.message,l.set("trusted",e.is_trusted)),this.account.sendMsg(h)}))):(l.set({xml:Ci(h.tree()).clone()[0]}),this.account.sendMsg(h))}this.close()},closeLocationName:function(e){this.$el.find(".ol-location").hide()},onHide:function(){this.$el.detach()},close:function(){this.$el.closeModal({complete:this.hide.bind(this)})},initializeScrollbar:function(){this.ps_container=this.$(".nominatim.ol-search"),this.ps_container.perfectScrollbar(Ei.extend(this.ps_settings||{},nt.ps_settings))},destroyScrollbar:function(){this.ps_container=this.$(".nominatim.ol-search"),this.ps_container.perfectScrollbar("destroy")}}),nt.ChatBottomView=nt.BasicView.extend({className:"chat-bottom-wrap",ps_selector:".message-reference-preview-container",template:xi.chat_bottom,avatar_size:yi.AVATAR_SIZES.CHAT_BOTTOM,mention_avatar_size:yi.AVATAR_SIZES.MENTION_ITEM,events:{click:"onClickBottom","click .ql-editor":"focusOnInput","click .my-avatar":"showAccountSettings","keyup .input-message .rich-textarea":"keyUp","keydown .input-message .rich-textarea":"keyDown","change .attach-file input":"onFileInputChanged","click .attach-location":"showLocationPopup","click .attach-media":"showMediaPopup","mouseup .message-input-panel":"stopWritingVoiceMessage","mousedown .attach-voice-message":"writeVoiceMessage","click .chat-mention":"onMentionButtonClick","click .close-forward":"unsetForwardedMessages","click .close-attachments":"removeAttachments","click .send-message":"submit","click .markup-text":"onShowMarkupPanel","click .reply-message":"replyMessages","click .forward-message":"forwardMessages","click .pin-message":"pinMessage","click .copy-message":"copyMessages","click .edit-message":"showEditPanel","click .delete-message":"deleteMessages","click .close-message-panel":"resetSelectedMessages","click .mention-item":"inputMention","click .format-text":"updateMarkupPanel","click .link-message-reference .mdi-close":"removeLinkReference","click .preview-preloader-container .preview-cancel-preloader":"stopLoadingLinkReference","click .message-reference-preview-item-file .mdi-close":"removeFileSnippet","click .btn-manage-devices":"openDevicesWindow","click .ephemeral-timer-time":"showEphemeralTimerSelector"},_initialize:function(e){this.view=e.content,this.model=this.view.model,this.click_counter=0;let t=this.$(".rich-textarea-wrap"),i={enter:{key:13,handler:function(e){"enter"!==nt.settings.hotkeys&&this.quill.insertText(e.index,"\n")}},arrow_up:{key:yi.KEY_ARROW_UP,handler:e=>{if("none"!==this.$(".mentions-list").css("display")){let e=this.$(".mentions-list").children(".active.mention-item");if(e.length){let t=e.prev(".mention-item");e.removeClass("active"),t.length||(t=this.$(".mentions-list").children(".mention-item").last().addClass("active"),this.$(".mentions-list")[0].scrollTop=this.$(".mentions-list")[0].scrollHeight),t.addClass("active"),t.length&&t[0].offsetTop<=this.$(".mentions-list")[0].scrollTop&&(this.$(".mentions-list")[0].scrollTop=t[0].offsetTop)}else this.$(".mentions-list")[0].scrollTop=this.$(".mentions-list")[0].scrollHeight,this.$(".mentions-list").children(".mention-item").last().addClass("active");return!1}return!0}},arrow_down:{key:yi.KEY_ARROW_DOWN,handler:e=>{if("none"!==this.$(".mentions-list").css("display")){let e=this.$(".mentions-list").children(".active.mention-item");if(e.length){let t=e.next(".mention-item");e.removeClass("active"),t.length||(t=this.$(".mentions-list").children(".mention-item").first(),this.$(".mentions-list")[0].scrollTop=0),t.addClass("active"),t.length&&t[0].offsetTop+t[0].clientHeight>=this.$(".mentions-list")[0].scrollTop+this.$(".mentions-list")[0].clientHeight&&(this.$(".mentions-list")[0].scrollTop=t[0].offsetTop-this.$(".mentions-list")[0].clientHeight+t[0].clientHeight)}else this.$(".mentions-list")[0].scrollTop=0,this.$(".mentions-list").children(".mention-item").first().addClass("active");return!1}return!0}},arrow_left:{key:yi.KEY_ARROW_LEFT,handler:e=>"none"===this.$(".mentions-list").css("display")},arrow_right:{key:yi.KEY_ARROW_RIGHT,handler:e=>"none"===this.$(".mentions-list").css("display")}};this.quill=new Quill(t[0],{modules:{keyboard:{bindings:i},toolbar:[["bold","italic","underline","strike","blockquote"],this.model.get("group_chat")?["mention"]:[],["clean"]]},formats:["bold","italic","underline","strike","blockquote","clean","emoji","mention"],placeholder:nt.getString(this.model.get("encrypted")?"chat_bottom__hint_default_encrypted":"chat_bottom__hint_default"),scrollingContainer:".rich-textarea",theme:"snow"}),this.quill.container.firstChild.classList.add("rich-textarea"),this.$(".ql-mention").prop("disabled",!0),this.$(".ql-mention").append('<div class="chat-mention" ="">@</div>'),this.contact=this.view.contact,this.account=this.view.account,this.fwd_messages=[],this.edit_message=null,this.stopped_loading_link_reference=!1,this.link_references=[],this.link_reference_exempted=[],this.currently_loaded_link_references=[],this.attached_files=[],this.loading_link_reference=!1,this.$(".account-jid").text(this.account.get("jid")),this.updateAvatar(),this.quill.on("text-change",this.onChangedText,this),this.account.on("change:image",this.updateAvatar,this),this.account.on("trusting_updated",this.updateEncrypted,this),this.contact&&(this.contact.on("change:blocked",this.onBlockedUpdate,this),this.contact.on("update_my_info",this.updateInfoInBottom,this)),this.model.on("change:chat_ephemeral_timer",this.updateEphemeralTimer,this),this.model.on("reply_selected_messages",this.replyMessages,this),this.model.on("forward_selected_messages",this.forwardMessages,this),this.model.on("copy_selected_messages",this.copyMessages,this),this.model.on("delete_selected_messages",this.deleteMessages,this),this.model.on("edit_selected_message",this.showEditPanel,this),this.model.on("pin_selected_message",this.pinMessage,this),this.model.on("reset_selected_messages",this.resetSelectedMessages,this),this.content_view=(this.view.data.get("visible")?this.view:this.model.messages_view)||this.view;let s=this.$(".input-message .rich-textarea"),n=s[0],a=s.parent(".rich-textarea-wrap"),o=s.siblings(".placeholder");n.onpaste=this.onPaste.bind(this),n.oncut=this.onCut.bind(this),n.ondragenter=e=>{e.preventDefault(),o.text(nt.getString("chat_bottom__drag_and_drop__text_drop_files_here")),a.addClass("file-drop")},n.ondragover=e=>{e.preventDefault()},n.ondragleave=e=>{Ci(e.relatedTarget).closest(".rich-textarea").length||(e.preventDefault(),o.text(nt.getString("chat_bottom__hint_default")),a.removeClass("file-drop"))},n.ondrop=e=>{e.preventDefault(),e.stopPropagation(),o.text(nt.getString("chat_bottom__hint_default")),a.removeClass("file-drop");let t=e.dataTransfer.files||[];this.view.addFileMessage(t)};let r,c=this.$(".insert-emoticon"),l=this.$(".emoticons-panel-wrap"),d=this.$(".emoticons-panel");Object.keys(Bi.all).length;for(let e in Bi.all){let t=Ci('<div class="emoji-list-wrap"/>');Ci(`<div id=${e} class="emoji-list-header">${nt.getString(yi.EMOJI_LIST_NAME(e))}</div>`).appendTo(t),Ei.each(Bi.all[e],(function(i){Ci('<div class="emoji-wrap"/>').html(i.emojify({emoji_size:24,sprite:e})).appendTo(t)})),t.appendTo(d),d.siblings(".emoji-menu").append(Bi.all[e][0].emojify({href:e,title:nt.getString(yi.EMOJI_LIST_NAME(e)),tag_name:"a",emoji_size:20}))}let h=function(e){Ci(e.target).closest(".emoticons-panel-wrap").length||Ci(e.target).closest(".insert-emoticon").length||(l.removeClass("opened"),window.removeEventListener("click",h))};d.perfectScrollbar(Ei.extend({theme:"item-list"},nt.ps_settings)),this.$(".emoji-menu .emoji").click((e=>{d[0].scrollTop=this.$(".emoji-list-wrap "+e.target.attributes.href.value)[0].offsetTop-4})),c.click((e=>{r&&clearTimeout(r),e&&e.preventDefault&&e.preventDefault(),l.hasClass("opened")?(l.removeClass("opened"),window.removeEventListener("click",h)):(l.addClass("opened"),window.addEventListener("click",h)),d.perfectScrollbar("update")})),l.hover(null,(e=>{e&&e.preventDefault&&e.preventDefault(),r&&clearTimeout(r),r=setTimeout((()=>{l.removeClass("opened")}),200)})),l.mousedown((e=>{if(e&&e.preventDefault&&e.preventDefault(),r&&clearTimeout(r),e.button)return;let t=Ci(e.target),i=t.closest(".emoji-wrap").find(".emoji");t.closest(".emoji-menu").length||i.length&&this.typeEmoticon(i.data("emoji"))})),this.renderLastEmoticons()},render:function(e){if(this.model.get("notifications"))return void this.$el.addClass("hidden");this.$(".message-input-panel").hideIf(e.blocked),this.$(".blocked-msg").showIf(e.blocked),this.$el.switchClass("chat-bottom-blocked-wrap",e.blocked),this.updateAvatar(),this.updateEncrypted(),this.updateEphemeralTimer(),this.$(".ephemeral-timer-time").dropdown({inDuration:100,outDuration:100,hover:!1});let t=this.account.server_features.get(Ii.NS.HTTP_UPLOAD);return this.content_view=(this.view.data.get("visible")?this.view:this.model.messages_view)||this.view,this.messages_arr=this.content_view.$el.hasClass("participant-messages-wrap")&&this.account.participant_messages||this.content_view.$el.hasClass("messages-context-wrap")&&this.account.context_messages||this.model.messages,this.renderLastEmoticons(),this.$(".edit-message-wrap").hideIf(this.model.get("encrypted")),this.$(".attach-file").showIf(t),this.$(".attach-location").showIf(nt.settings.mapping_service),this.$(".attach-media").showIf(this.account.get("gallery_token")&&this.account.get("gallery_url")),this.$(".ql-toolbar.ql-snow").switchClass("ql-moved-left",!nt.settings.mapping_service||!(this.account.get("gallery_token")&&this.account.get("gallery_url"))),this.$(".ql-toolbar.ql-snow").switchClass("ql-moved-left-extra",!(nt.settings.mapping_service||this.account.get("gallery_token")&&this.account.get("gallery_url"))),this.model.get("group_chat")?this.updateInfoInBottom():(this.$(".account-nickname").hide(),this.$(".account-badge").hide(),this.$(".account-role").hide()),this.focusOnInput(),this.manageSelectedMessages(),nt.chat_body.updateHeight(),this},setButtonsWidth:function(){let e=[];this.$(".message-actions-panel .button-wrap").each(((t,i)=>{e.push(i.clientWidth)})),0!==Math.max.apply(null,e)&&this.$(".message-actions-panel .button-wrap").css("width",`${Math.max.apply(null,e)}px`)},showEphemeralTimerSelector:function(){this.model.showEphemeralTimerSelector()},updateEncrypted:function(){this.$el.children(".preloader-wrapper").detach(),this.$el.children(".omemo-disabled").detach(),this.view.$el.removeClass("encrypted"),this.view.$(".chat-notification").hasClass("encryption-warning")&&this.view.$(".chat-notification").addClass("hidden").removeClass("encryption-warning").html(""),this.$el.attr("data-trust",null),this.$el.attr("data-contact-trust",null),this.$el.find(".warning-wrap").detach(),this.model.get("encrypted")&&(this.account.omemo?(this.$el.addClass("loading"),this.$el.prepend(wi.templates.contacts.preloader()),this.account.omemo.checkOwnFingerprints().then((e=>{"none"!=e&&"error"!=e||(this.$el.attr("data-trust",e),"none"==e?this.$el.prepend(xi.encryption_warning({color:"amber",message:nt.getString("omemo__alert_new_device_yours__text_new_device")})):"error"==e&&this.$el.prepend(xi.encryption_warning({color:"red",message:nt.getString("omemo__alert_keys_changed_yours__text_keys_changed")})),nt.chat_body.updateHeight()),this.account.omemo.checkContactFingerprints(this.contact).then((e=>{let t=e.trust,i=e.unverified_counter,s=this.view.isScrolledToBottom();if(this.$el.removeClass("loading"),this.$el.children(".preloader-wrapper").detach(),"nil"===t)return this.$el.prepend(Ci(`<div class="warning-wrap no-fingerprints">${nt.getString("omemo__dialog_fingerprints__text_no_fingerprints")}</div>`)),this.$el.attr("data-trust",null),void this.$el.attr("data-contact-trust",t);"error"===t?(this.$el.attr("data-contact-trust",t),this.$el.prepend(xi.encryption_warning({color:"red",message:nt.getString("omemo__alert_keys_changed_partner__text_keys_changed")}))):("none"===t&&(this.view.$el.addClass("encrypted"),this.view.$(".chat-notification").removeClass("hidden").addClass("encryption-warning").attr("data-unverified-device-count",i).html(xi.content_encryption_warning({message:nt.getString("omemo__alert_new_device_partner__text_new_device")}))),this.$el.attr("data-contact-trust",t)),this.view.$el.attr("data-trust",t),this.view.$(".chat-message:not([data-trust=untrusted])").attr("data-trust",t),this.view.$(".chat-day-indicator:not(.fixed-day-indicator-wrap)").attr("data-trust",t),nt.chat_body.updateHeight(),s&&this.view.scrollToBottom(),this.model.get("active")&&this.model.get("display")&&this.focusOnInput()}))}))):(this.$el.addClass("loading"),this.$el.prepend(Ci('<div class="omemo-disabled warning-wrap"/>').text(nt.getString("omemo__chat__placeholder_encryption_disabled")))))},openDevicesWindow:function(){if(this.account.omemo){if(void 0!==this.$el.attr("data-trust"))this.account.showSettings(null,"devices");else if(void 0!==this.$el.attr("data-contact-trust")){this.account.omemo.getPeer(this.contact.get("jid")).fingerprints.open()}}else ki.dialogs.error(nt.getString("omemo__chat__placeholder_encryption_disabled"))},updateEphemeralTimer:function(){this.$(".ephemeral-timer-time").addClass("hidden"),this.model.get("encrypted")&&(this.$(".ephemeral-timer-time").text(ki.pretty_duration_ephemeral_timer(this.model.get("chat_ephemeral_timer"))),ki.pretty_duration_ephemeral_timer(this.model.get("chat_ephemeral_timer"))&&this.$(".ephemeral-timer-time").removeClass("hidden"))},onBlockedUpdate:function(){if(!this.isVisible())return;let e=this.model.get("blocked");this.$(".message-input-panel").hideIf(e),this.$(".blocked-msg").showIf(e),this.$el.switchClass("chat-bottom-blocked-wrap",e)},onClickBottom:function(e){Ci(e.target).closest(".ql-editor.rich-textarea").length&&(this.quill.getText().trim().length||3==++this.click_counter&&(this.click_counter=0,this.setOneLiner()))},updateInfoInBottom:function(){if(this.contact&&this.contact.my_info){let e=this.contact.my_info.get("nickname"),t=this.contact.my_info.get("badge"),i=this.contact.my_info.get("b64_avatar"),s=this.contact.my_info.get("role");e?(this.$(".account-jid").hide(),this.$(".account-nickname").show().text(e)):this.$(".account-nickname").hide(),t?this.$(".account-badge").show().text(t):this.$(".account-badge").hide(),s&&"member"!=s?this.$(".account-role").show().text(ki.pretty_name(s)):this.$(".account-role").hide(),this.$(".input-toolbar").emojify(".account-badge",{emoji_size:16}),!i&&this.contact.my_info.get("avatar_url")&&(i=this.contact.my_info.get("avatar_url")),!i&&this.account.cached_image&&(i=this.account.cached_image),!i&&(i=Li.getDefaultAvatar(e)),this.$(".my-avatar.circle-avatar").setAvatar(i,this.avatar_size)}else this.$(".account-jid").show(),this.$(".account-nickname").hide(),this.$(".account-badge").hide(),this.$(".account-role").hide()},updateAvatar:function(){let e;this.contact&&this.contact.get("group_chat")?(this.contact.my_info&&(this.contact.my_info.get("b64_avatar")&&(e=this.contact.my_info.get("b64_avatar")),!e&&this.contact.my_info.get("avatar_url")&&(e=this.contact.my_info.get("avatar_url")),!e&&this.account.cached_image&&(e=this.account.cached_image)),!e&&(e=Li.getDefaultAvatar(this.contact.my_info&&this.contact.my_info.nickname||this.account.get("jid")))):e=this.account.cached_image,this.$(".my-avatar.circle-avatar").setAvatar(e,this.avatar_size)},focusOnInput:function(){return nt.body.$el.siblings("#modals").children(".open:not(.collapsed):not(.plyr-player-popup-view)").length?(this.quill.blur(),this.quill.disable()):(this.quill.enable(),this.quill.focus()),this},moveCursorToEnd:function(){this.quill.root.focus();let e=document.createRange(),t=window.getSelection(),i=this.quill.root.lastElementChild&&this.quill.root.lastElementChild.lastChild?this.quill.root.lastElementChild.lastChild:this.quill.root.lastElementChild;e.selectNodeContents(i),e.collapse(!1),t.removeAllRanges(),t.addRange(e),e.detach(),this.quill.root.scrollTop=this.quill.root.scrollHeight},keyDown:function(e){let t=this.$(".input-message .rich-textarea");if(e.keyCode!==yi.KEY_BACKSPACE||0!==e.target.textContent.length){if((e.keyCode!==yi.KEY_ESCAPE||nt.body.screen.get("right_contact"))&&e.keyCode!==yi.KEY_BACKSPACE&&e.keyCode!==yi.KEY_DELETE){if(e.keyCode===yi.KEY_ENTER||10===e.keyCode){if("none"!==this.$(".mentions-list").css("display")){let t=this.$(".mentions-list").children(".active.mention-item");return t.length&&t.click(),void e.preventDefault()}let t="enter"===nt.settings.hotkeys;if(t&&e.keyCode===yi.KEY_ENTER&&!e.shiftKey||!t&&e.ctrlKey)return e.preventDefault(),void this.submit()}t.getTextFromRichTextarea().trim()&&!this.view.chat_state&&!this.view.edit_message&&nt.settings.typing_notifications&&this.view.sendChatState("composing")}}else e.preventDefault()},displayMicrophone:function(){this.$(".mdi-send").addClass("hidden"),this.$(".attach-voice-message").removeClass("hidden")},displaySend:function(){this.$(".mdi-send").removeClass("hidden"),this.$(".attach-voice-message").addClass("hidden")},updateMarkupPanel:function(e){let t=Ci(e.target).closest(".format-text");t.toggleClass("active"),t.hasClass("active")?(this.$(".ql-toolbar.ql-snow").show(),this.$(".last-emoticons").hide()):(this.$(".ql-toolbar.ql-snow").hide(),this.$(".last-emoticons").show())},setOneLiner:function(){let e=Ei.random(0,nt.getOneLiners().length-1),t=nt.getOneLiners()[e].replace(/\\n/,"");t?this.updatePlaceholder(t):this.setOneLiner()},setDefaultPlaceholder:function(){let e=this.model.get("encrypted")?nt.getString("chat_bottom__hint_default_encrypted"):nt.getString("chat_bottom__hint_default");this.updatePlaceholder(e)},updatePlaceholder:function(e){this.quill.root.setAttribute("data-placeholder",e)},changeEncryption:function(){this.model.set("encrypted",!this.model.get("encrypted"))},getParticipantsList:function(){let e=[];return this.contact.participants.each((t=>{e.push(t.get("nickname")||t.get("jid")||t.get("id"))})),e.join(", ")},onChangedText:function(){let e=this.$el.height(),t=Ci(this.quill.container).find(".rich-textarea"),i=t.prop("scrollHeight");i!==this.text_input_height&&(this.text_input_height<i&&t.scrollTop(i),this.text_input_height=i);this.quill.getContents();let s=t.getTextFromRichTextarea().replace(/\n$/,"");s&&"\n"!=s||this.edit_message||this.attached_files&&this.attached_files.length||this.link_references&&this.link_references.length?this.displaySend():this.displayMicrophone(),e!==this.bottom_height&&(this.bottom_height=e,this.view.scrolled_to_bottom=this.view.isScrolledToBottom()),clearTimeout(this._timeout_textchange),this._timeout_textchange=setTimeout((()=>{this.updateOpenGraphReference(this.quill.getText())}),500)},updateMentionsList:function(e){e=(e||"").toLowerCase(),this.contact.searchByParticipants(e,(t=>{if(t.length||nt.getString("chat_bottom__mentions_list__item_everyone").toLowerCase().indexOf(e)>-1||"*"===e||"all".indexOf(e)>-1||"все".indexOf(e)>-1){this.$(".mentions-list").html("").show().perfectScrollbar({theme:"item-list"}),this.$(".mentions-list")[0].scrollTop=0,t.forEach((t=>{let i=Ei.clone(t.attributes);if(!i.id)return;i.nickname=i.nickname?Ii.xmlescape(i.nickname):i.id;let s=Ci(xi.group_chats.mention_item(i));s.find(".circle-avatar").setAvatar(t.get("b64_avatar")||ki.images.getDefaultAvatar(t.get("nickname")||t.get("jid")||t.get("id")),this.mention_avatar_size),s.find(".nickname").text().replace(e,e.bold()),this.$(".mentions-list").append(s)}));let i=Ci(xi.group_chats.mention_item({jid:"",nickname:nt.getString("chat_bottom__mentions_list__item_everyone"),id:""}));i.find(".circle-avatar").setAvatar(this.contact.cached_image,this.mention_avatar_size),i.find(".one-line.jid").text(this.getParticipantsList()),this.$(".mentions-list").append(i),this.$(".mentions-list").children(".mention-item").first().addClass("active")}else this.$(".mentions-list").html("").hide()}))},onMentionButtonClick:function(){if(this.$(".ql-mention").hasClass("ql-active"))return this.$(".ql-mention").prop("disabled",!1),this.$(".ql-mention").click(),void this.$(".ql-mention").prop("disabled",!0);let e=this.quill.getSelection()?this.quill.getSelection().index:this.quill.getLength()-1;this.quill.insertText(e," @ ","user"),this.quill.setSelection(e+2,0);this.contact.participants.length&&this.contact.participants.version>0&&this.contact.get("group_info")&&this.contact.participants&&this.contact.get("group_info").members_num==this.contact.participants.length?this.updateMentionsList(""):this.contact.participants.participantsRequest({version:0},(()=>{this.updateMentionsList("")}))},inputMention:function(e){e&&e.preventDefault();let t=this.$(".rich-textarea"),i=Ci(e.target).closest(".mention-item"),s=i.data("nickname"),n=i.data("id")||"",a=!this.contact.get("incognito_chat")&&i.data("jid")||"",o=t.getTextFromRichTextarea().replace(/\n$/,""),r=this.quill.selection.lastRange&&this.quill.selection.lastRange.index,c=Array.from(o).slice(0,r).join("").replaceEmoji(),l=c&&Array.from(c.matchAll(/(^|\s)@(\w+)?/g))||[],d=c&&Array.from(c.matchAll(/(^|\s)[+](\w+)?/g))||[],h=l.length?l.slice(-1)[0].index:-1,g=d.length?d.slice(-1)[0].index:-1,u=Math.max(h,g),p=Array.from(c).slice(u,r).join("");if(p.length&&p[0].match(/\s/)&&u++,p=p.replace(/\s?(@|[+])/,""),this.$(".mentions-list").hide(),this.quill.deleteText(u,p.length+1),!s.length){if(!n.length)return;s=n}this.insertMention({jid:a,id:n,nickname:s,position:u}),this.focusOnInput()},insertMention:function(e){if(!e)return;let t=e.id,i=e.jid,s=e.nickname,n=!t&&!i||this.account.get("jid")===i||this.contact.my_info&&this.contact.my_info.get("id")===t,a={jid:i,id:t,nickname:Ii.xmlescape(s),is_me:n},o=e.position;this.quill.insertEmbed(o,"mention",JSON.stringify(a)),this.quill.pasteHTML(o+s.length,"<text> </text>"),this.quill.setSelection(o+s.length+1,0)},showAccountSettings:function(){this.contact.get("group_chat")?this.contact.my_info&&this.contact.my_rights?(this.contact.showDetailsRight("all-chats",{type:"participant"}),this.contact.details_view_right.participants.participant_properties_panel.open(this.contact.my_info,this.contact.my_rights)):this.contact.getMyInfo((()=>{this.contact.showDetailsRight("all-chats",{type:"participant"}),this.contact.details_view_right.participants.participant_properties_panel.open(this.contact.my_info,this.contact.my_rights)})):this.account.showSettings()},keyUp:function(e){if(e.keyCode===yi.KEY_BACKSPACE&&0===e.target.textContent.length)return void e.preventDefault();let t=Ci(e.target).closest(".rich-textarea"),i=t.getTextFromRichTextarea().replace(/\n$/,"");if(i&&(this.click_counter=0,this.setDefaultPlaceholder()),e.keyCode===yi.KEY_ARROW_UP&&!i&&!this.model.get("encrypted")){let e=this.view.$(`.chat-message[data-from="${this.account.get("jid")}"]`).last();!e.length&&this.contact.participants&&(e=this.view.$(`.chat-message[data-from="${this.contact.participants.find((e=>e.get("jid")===this.account.get("jid"))).get("id")}"]`).last());let t=this.messages_arr.get(e.data("uniqueid"));if(!t)return;this.edit_message=t,this.setEditedMessageAttachments(t),this.setEditedMessage(t)}if(i&&"\n"!=i||this.edit_message||this.attached_files&&this.attached_files.length||this.link_references&&this.link_references.length?this.displaySend():this.displayMicrophone(),e.keyCode!==yi.KEY_ESCAPE||nt.body.screen.get("right_contact")||this.edit_message)if(e.keyCode!==yi.KEY_ESCAPE||nt.body.screen.get("right_contact")){if(e.keyCode===yi.KEY_ARROW_UP||e.keyCode===yi.KEY_ARROW_DOWN)return;if((e.keyCode===yi.KEY_ARROW_LEFT||e.keyCode===yi.KEY_ARROW_RIGHT)&&"none"!==this.$(".mentions-list").css("display"))return void this.$(".mentions-list").hide();if(e.keyCode!==yi.KEY_BACKSPACE&&e.keyCode!==yi.KEY_DELETE||this.edit_message||this.attached_files&&this.attached_files.length||this.link_references&&this.link_references.length||i&&"\n"!=i||(this.$(".fwd-messages-preview").hasClass("hidden")?this.displayMicrophone():this.displaySend(),t.flushRichTextarea()),e.keyCode===yi.KEY_SPACE){let e=this.quill.selection.lastRange&&this.quill.selection.lastRange.index,t=Array.from(i).slice(0,e).join("").replaceEmoji();if(t[e-2]&&t[e-2].match(/@|[+]/))return void this.$(".mentions-list").hide()}if(this.model.get("group_chat")){let e=this.quill.selection.lastRange&&this.quill.selection.lastRange.index,t=/(^|\s)@(\w+)?/g,s=/(^|\s)[+](\w+)?/g,n=Array.from(i).slice(0,e).join("").replace(/\n$/,"").replaceEmoji(),a=Array.from(n.matchAll(t)),o=Array.from(n.matchAll(s)),r=a.length?a.slice(-1)[0].index:-1,c=o.length?o.slice(-1)[0].index:-1,l=Math.max(r,c);if(this.quill.selection.lastRange&&"mention"===this.quill.getLeaf(this.quill.selection.lastRange.index)[0].parent.domNode.tagName.toLowerCase())return void this.$(".mentions-list").hide();if(e>-1&&-1!==l||this.$(".mentions-list").hide(),l>-1){let t=Array.from(n).slice(l,e).join("").replace(/\s?(@|[+])/,"");this.contact.participants.length&&this.contact.participants.version>0&&this.contact.get("group_info")&&this.contact.participants&&this.contact.get("group_info").members_num==this.contact.participants.length?this.updateMentionsList(t):this.contact.participants.participantsRequest({version:0},(()=>{this.updateMentionsList(t)}))}else this.$(".mentions-list").hide()}}else e.preventDefault(),this.unsetForwardedMessages();else if(e.preventDefault(),this.$(".message-reference-preview-container").children("div.message-reference-preview-attached").length>0){let e=this.$(".message-reference-preview-container").children("div.message-reference-preview-attached").last();if(e.hasClass("link-message-reference")){let t=e.attr("data-original-url");t&&(e.remove(),this.removeLinkReferenceByUrl(t))}else{let t=e.attr("data-id");t&&(e.remove(),this.removeFileSnippetById(t))}}else this.unsetForwardedMessages();t.updateRichTextarea(),this.focusOnInput(),nt.chat_body.updateHeight()},onCut:function(){this.$(".fwd-messages-preview").hasClass("hidden")?this.displayMicrophone():this.displaySend()},onPaste:function(e){Ci(e.target);let t=e.clipboardData;if(t&&t.files.length>0){e.preventDefault();let i=t.files[t.files.length-1];window.URL.createObjectURL(new Blob([i]));this.view.addFileMessage([i]),this.focusOnInput()}else if(t&&t.items.length>0){let i=t.items[t.items.length-1];if("file"===i.kind){e.preventDefault();let t=i.getAsFile(),s=new FileReader,n=new Ci.Deferred;s.onload=function(e){e.target.result;n.resolve(),this.focusOnInput()},n.done((()=>{t.name="clipboard.png",this.view.addFileMessage([t])})),s.readAsDataURL(t)}}},onFileInputChanged:function(e){let t=e.target,i=[];for(let e=0;e<t.files.length;e++)i.push(t.files[e]);i&&i.length&&(this.view.addFileMessage(i),Ci(t).val(""))},updateOpenGraphReference:function(e){if(!this.account.get("gallery_token")||!this.account.get("gallery_url"))return;let t=e&&e.match(/(((ftp|http|https):\/\/)|(www\.))(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/g);if(t=Ei.difference(t,this.link_reference_exempted),t=Ei.difference(t,this.currently_loaded_link_references),t&&t.length){this.stopped_loading_link_reference=!1,this.$(".preview-preloader-container").removeClass("hidden");let e=0;this.link_reference_request_timestamp=Date.now();let i=this.link_reference_request_timestamp;t.forEach(((s,n)=>{this.account.getOpenGraphData(s,(n=>{if(this.stopped_loading_link_reference||i!==this.link_reference_request_timestamp)return;if(this.currently_loaded_link_references.includes(s))return e++,void(e===t.length&&this.$(".preview-preloader-container").addClass("hidden"));this.currently_loaded_link_references=this.currently_loaded_link_references.concat([s]);let a=new Ci.Deferred;if(a.done((()=>{e++,this.displaySend(),this.$(".message-reference-preview").removeClass("hidden"),e===t.length&&this.$(".preview-preloader-container").addClass("hidden"),n.original_text=s,this.$(".message-reference-preview-container").append(Ci(xi.messages.link_reference({item:n,domain:n.url?ki.getDomainFromUrl(n.url):n.site_name,url:null}))),this.$(".attached-image").length&&this.$(".attached-image").magnificPopup({type:"image",closeOnContentClick:!0,fixedContentPos:!0,mainClass:"mfp-no-margins mfp-with-zoom",image:{verticalFit:!0,titleSrc:function(e){return'<a class="image-source-link" href="'+e.el.attr("src")+'" target="_blank">'+e.name+"</a>"}},zoom:{enabled:!0,duration:300}}),this.link_references=this.link_references.concat(n),nt.chat_body.updateHeight(),this.scrollToBottom()})),n.image_height&&n.image_width||!n.image)a.resolve();else{let e=new Image;e.onload=t=>{n.image_height=e.height,n.image_width=e.width,a.resolve()},e.onerror=e.onabort=e=>{n.image=void 0,a.resolve()},e.src=n.image}}),(i=>{this.link_reference_exempted=this.link_reference_exempted.concat([s]),e++,e===t.length&&this.$(".preview-preloader-container").addClass("hidden")}))}))}},removeAttachments:function(){this.removeAllFileSnippets(),this.removeAllLinkReferences()},stopLoadingLinkReference:function(){this.$(".preview-preloader-container").addClass("hidden"),this.stopped_loading_link_reference=!0},removeLinkReference:function(e){let t=Ci(e.target).closest(".link-message-reference"),i=t.attr("data-original-url");t.remove(),this.removeLinkReferenceByUrl(i)},removeLinkReferenceByUrl:function(e){this.$(".message-reference-preview-container").children("div.message-reference-preview-attached").length>0||this.$(".message-reference-preview").addClass("hidden"),this.link_references=this.link_references.filter((t=>t.original_text!=e)),this.currently_loaded_link_references=this.currently_loaded_link_references.filter((t=>t!=e)),this.link_reference_exempted=this.link_reference_exempted.concat([e]),nt.chat_body.updateHeight(),this.scrollToBottom()},removeAllLinkReferences:function(){this.stopLoadingLinkReference(),this.$(".message-reference-preview-container .link-message-reference").remove(),this.$(".message-reference-preview-container").children("div.message-reference-preview-attached").length>0||this.$(".message-reference-preview").addClass("hidden"),this.link_references=[],this.currently_loaded_link_references=[],nt.chat_body.updateHeight(),this.scrollToBottom()},addFileSnippets:function(e){e&&this.attached_files.length+e.length>10?ki.dialogs.error(nt.getString("too_many_files_at_once")):this.edit_message||(e&&e.length&&this.$(".message-reference-preview").removeClass("hidden"),e&&e.length&&this.displaySend(),e.forEach((e=>{let t=Mi();e.uid=t,this.$(".message-reference-preview-container").append(Ci(xi.messages.attached_file({file:e,uid:t,blob:ki.isImageType(e.type)?e.key?e.image_prev.src:window.URL.createObjectURL(new Blob([e])):null,filesize:ki.pretty_size(e.size),typeicon:ki.file_type_icon(e.type),filetype:ki.pretty_file_type(e.type)}))),this.attached_files=this.attached_files.concat([e]),nt.chat_body.updateHeight(),this.scrollToBottom()})),e&&e.length&&this.$(".attached-image").length&&this.$(".attached-image").magnificPopup({type:"image",closeOnContentClick:!0,fixedContentPos:!0,mainClass:"mfp-no-margins mfp-with-zoom",image:{verticalFit:!0,titleSrc:function(e){return'<a class="image-source-link" href="'+e.el.attr("src")+'" target="_blank">'+e.name+"</a>"}},zoom:{enabled:!0,duration:300}}))},removeFileSnippet:function(e){let t=Ci(e.target).closest(".message-reference-preview-item-file"),i=t.attr("data-id");t.remove(),this.removeFileSnippetById(i)},removeFileSnippetById:function(e){this.$(".message-reference-preview-container").children("div.message-reference-preview-attached").length>0||this.$(".message-reference-preview").addClass("hidden"),this.attached_files=this.attached_files.filter((t=>t.uid!=e)),nt.chat_body.updateHeight(),this.scrollToBottom()},removeAllFileSnippets:function(e){this.$(".message-reference-preview .message-reference-preview-item-file").remove(),this.$(".message-reference-preview-container").children("div.message-reference-preview-attached").length>0||this.$(".message-reference-preview").addClass("hidden"),this.attached_files=[],nt.chat_body.updateHeight(),this.scrollToBottom()},setEditedMessageAttachments:function(e,t){!t&&this.$(".attach-file input").attr("disabled",!0),this.removeAllFileSnippets(),this.removeAllLinkReferences();let i=e.get("files")||[],s=e.get("images")||[],n=e.get("videos")||[],a=e.get("link_references")||[];i=i.concat(s).concat(n),(a&&a.length||i&&i.length)&&(this.$(".message-reference-preview").removeClass("hidden"),this.displaySend()),a.forEach((e=>{this.link_references=this.link_references.concat([e]),this.currently_loaded_link_references=this.currently_loaded_link_references.concat(e.original_text),this.$(".message-reference-preview-container").prepend(Ci(xi.messages.link_reference({item:e,domain:e.url?ki.getDomainFromUrl(e.url):e.site_name,url:null}))),nt.chat_body.updateHeight()})),i.forEach((e=>{if(!e)return;let i=Mi();e.uid=i,this.attached_files=this.attached_files.concat([e]),t?this.$(".message-reference-preview-container").append(Ci(xi.messages.attached_file({file:e,uid:i,blob:ki.isImageType(e.type)?e.key?e.image_prev.src:window.URL.createObjectURL(new Blob([e])):null,filesize:ki.pretty_size(e.size),typeicon:ki.file_type_icon(e.type),filetype:ki.pretty_file_type(e.type)}))):this.$(".message-reference-preview-container").append(Ci(xi.messages.attached_file({file:e,uid:i,blob:e.sources.length&&e.sources[0]&&ki.isImageType(e.type)?e.sources[0]:null,filesize:ki.pretty_size(e.size),typeicon:ki.file_type_icon(e.type),filetype:ki.pretty_file_type(e.type)}))),nt.chat_body.updateHeight()})),(a&&a.length||i&&i.length)&&this.$(".attached-image").length&&this.$(".attached-image").magnificPopup({type:"image",closeOnContentClick:!0,fixedContentPos:!0,mainClass:"mfp-no-margins mfp-with-zoom",image:{verticalFit:!0,titleSrc:function(e){return'<a class="image-source-link" href="'+e.el.attr("src")+'" target="_blank">'+e.name+"</a>"}},zoom:{enabled:!0,duration:300}})},showLocationPopup:function(e){nt.settings.mapping_service&&(nt.popup_coordinates=void 0,nt.location_name=void 0,new nt.ChatLocationView({content:this}).show(e))},showMediaPopup:function(e){if(!this.edit_message&&this.account.get("gallery_token")&&this.account.get("gallery_url")){(new nt.SendMediaView).render({parent:this,model:this.account})}},stopWritingVoiceMessage:function(e){let t=this.$(".message-input-panel");t.find(".recording").length>0&&t.find(".recording").removeClass("recording")},writeVoiceMessage:function(e){if(this.$(".send-message").hasClass("disabled")||this.$(".attach-voice-message").hasClass("disabled"))return;let t=Ci(e.target);t.hasClass("recording")?t.removeClass("recording"):(t.addClass("recording ground-color-50"),this.model.get("recording_voice_message")||this.initAudio())},initAudio:function(){if(navigator.getUserMedia=navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.webkitGetUserMedia||navigator.getUserMedia,navigator.getUserMedia){this.model.set("recording_voice_message",!0);let e={audio:!0,channelCount:1},t=[],i=this.$(".send-area .attach-voice-message"),s=e=>{if(!i.is(":hover"))return i.removeClass("recording ground-color-50"),void this.model.set("recording_voice_message",!1);let s,n,a=new opusRecorder({encoderPath:opusRecorderEncoderPath,encoderSampleRate:16e3,numberOfChannels:1}),o=1,r=!0;a.onstart=()=>{nt.settings.typing_notifications&&(this.view.sendChatState("composing","voice"),this._chatstate_send_timeout=setInterval((()=>{this.view.sendChatState("composing","voice")}),yi.CHATSTATE_INTERVAL_COMPOSING_AUDIO)),s=Ti.now();let e=this.$(".message-input-panel"),t=this.$(".input-voice-message .timer"),n=this.$(".input-voice-message .voice-msg-status"),c=this.$(".input-voice-message .voice-visualizer");t.text("0:00"),n.css("color","#9E9E9E").text(nt.getString("chat_bottom__placeholder__cancel_write_voice")),e.addClass("voice-message-recording");let l=setInterval((()=>{i.hasClass("recording")&&o<yi.VOICE_MSG_TIME?(o%1==0&&t.text(ki.pretty_duration(o)),o=(10*o+2)/10,r=e.is(":hover"),r?n.css("color","#9E9E9E").text(nt.getString("chat_bottom__placeholder__cancel_write_voice")):n.css("color","#D32F2F").text(nt.getString("chat_bottom__placeholder__cancel_write_voice_short"))):(r=e.is(":hover"),a.stop(),i.removeClass("recording ground-color-50"),e.removeClass("voice-message-recording"),this.model.set("recording_voice_message",!1),clearInterval(l))}),200),d=!1,h=setInterval((()=>{i.hasClass("recording")?(d?c.css("background-color","#FFF"):c.css("background-color","#D32F2F"),d=!d):clearInterval(h)}),500)},a.start(),a.onstop=()=>{if(clearInterval(this._chatstate_send_timeout),nt.settings.typing_notifications&&this.view.sendChatState("paused"),n=Ti.now(),r&&(n-s)/1e3>=1.5){let e="voice message "+Ti().format("YYYY-MM-DD HH:mm:ss")+".ogg",i="audio/ogg; codecs=opus",a=new Blob([t],{type:i}),o=new File([a],e,{type:i});o.voice=!0,o.duration=Math.round((n-s)/1e3),this.view.addFileMessage([o],!0)}t=[]},a.ondataavailable=e=>{t=e}},n=e=>{Ai.log(nt.getString("file_upload__error",[e])),i.removeClass("recording ground-color-50")};window.navigator.getUserMedia(e,s,n)}},typeEmoticon:function(e){"number"==typeof e&&(e=Number(e).toString());let t=-1;this.quill.selection.lastRange?t=this.quill.selection.lastRange.index:this.quill.selection.savedRange&&(t=this.quill.selection.savedRange.index),this.quill.focus(),this.edit_message||this.displaySend(),!this.view.chat_state&&nt.settings.typing_notifications&&this.view.sendChatState("composing"),this.quill.insertText(t++,e),this.quill.getFormat(t,1).mention&&this.quill.formatText(t,1,"mention",!1),this.quill.setSelection(t+1),nt.chat_body.updateHeight()},renderLastEmoticons:function(){if(!this.account.chat_settings)return;let e,t=this.account.chat_settings.getLastEmoji(),i=this.$(".last-emoticons").empty();if(t.length<7)for(let t=0;t<7;t++)e=Bi.getByIndex(t),this.account.chat_settings.updateLastEmoji(e);t=this.account.chat_settings.getLastEmoji();for(let e=0;e<7;e++)Ci('<div class="emoji-wrap"/>').html(t[e]&&t[e].emojify({tag_name:"div",emoji_size:20})).appendTo(i);i.find(".emoji-wrap").mousedown((e=>{if(e&&e.preventDefault&&e.preventDefault(),e.button)return;let t=Ci(e.target).closest(".emoji-wrap").text();this.typeEmoticon(t)}))},disableSendButtons:function(){this.$(".send-message").addClass("disabled"),this.$(".attach-voice-message").addClass("disabled")},enableSendButtons:function(){this.$(".send-message").removeClass("disabled"),this.$(".attach-voice-message").removeClass("disabled")},submit:function(e,t){if(this.$(".send-message").hasClass("disabled")||this.$(".attach-voice-message").hasClass("disabled"))return;let i=this.$(".input-message .rich-textarea"),s=[],n=[],a=[],o=this.link_references,r=this.attached_files,c=i.getTextFromRichTextarea(),l=new Ci.Deferred;if(this.model.get("encrypted")&&this.view.$(".chat-notification").hasClass("encryption-warning")&&!t){let t=this.view.$(".encryption-warning").attr("data-unverified-device-count");ki.dialogs.ask_extended(nt.getQuantityString("dialog_unverified_devices__header",t||1),nt.getQuantityString("dialog_unverified_devices__text",t||1),{modal_class:"modal-unverified-devices",no_dialog_options:!0},{ok_button_text:nt.getString("omemo__alert_new_device__button_manage_devices"),optional_button:"send-anyway",optional_button_text:nt.getString("dialog_unverified_devices__send")}).done((t=>{t&&("send-anyway"===t?this.submit(e,!0):this.openDevicesWindow())}))}else if(l.done((()=>{this.$(".mentions-list").html("").hide(),i.find(".emoji").each(((e,t)=>{let i=t.innerText;this.account.chat_settings.updateLastEmoji(i)}));let e=[];if(c.length>=yi.STANZA_MAX_SIZE)return ki.dialogs.error(nt.getString("message__error_big_stanza")),void i.flushRichTextarea();c.length&&this.quill.getContents().forEach((t=>{if(t.attributes){let o=[],r=e.length,l=r+(t.insert&&t.insert.emoji?1:Ei.escape(t.insert).length);for(let e in t.attributes)"alt"!==e&&"blockquote"!==e&&o.push(e);if(o.indexOf("mention")>-1){let e=o.indexOf("mention"),t=this.contact.get("group_chat"),n=Ci(i.find("mention")[s.length]).attr("data-target");o.splice(e,e+1),n=t?"xmpp:"+this.contact.get("jid")+n:"xmpp:"+n,s.push({start:r,end:l,target:n,is_gc:t})}t.attributes.blockquote&&e.length&&Array.from(t.insert).forEach((t=>{let i=e.lastIndexOf("\n")<0?0:e.lastIndexOf("\n")+1,s=e.length;a.push({marker:yi.QUOTE_MARKER,start:i,end:s+yi.QUOTE_MARKER.length}),c=Array.from(Ei.escape(c)),i===s?(c[i-1]+=yi.QUOTE_MARKER,e[i]=yi.QUOTE_MARKER):(c[i]=yi.QUOTE_MARKER+c[i],e[i]=yi.QUOTE_MARKER+e[i]),s>c.length&&(s=c.length),c[s-1]+="\n",c=Ei.unescape(c.join("")),e=Array.from(e.join("")),n.forEach((e=>{e.start>=i&&(e.start+=yi.QUOTE_MARKER.length,e.end+=yi.QUOTE_MARKER.length)})),e=e.concat(Array.from(Ei.escape(t)))})),o.length&&n.push({start:r,end:l,markup:o})}t.insert&&t.insert.emoji?e=e.concat(Array.from(Ci(t.insert.emoji).data("emoji"))):t.attributes&&t.attributes.blockquote||(e=e.concat(Array.from(Ei.escape(t.insert))))}));let t=c.length;if(c=c.trimStart(),t>c.length){let e=t-c.length;s.forEach((t=>{t.start-=e,t.end-=e})),n.forEach((t=>{t.start-=e,t.end-=e})),a.forEach((t=>{t.start-=e,t.end-=e}))}if(o&&o.length&&(o=o.filter((e=>e.original_text)),o.forEach((e=>{e&&e.original_text&&(e.start=c.indexOf(e.original_text),-1!=e.start&&(e.start=0,e.end=0))}))),this.removeAllLinkReferences(),this.link_reference_exempted=[],this.removeAllFileSnippets(),c=c.trimEnd(),i.flushRichTextarea(),this.quill.focus(),this.displayMicrophone(),this.edit_message)return this.editMessage(c,{mentions:s,markup_references:n,link_references:o,attached_files:r,blockquotes:a}),void i.placeCaretAtEnd();(c||this.fwd_messages.length||r&&r.length||o&&o.length)&&(this.model.get("saved")&&this.fwd_messages.length&&!c?this.fwd_messages.forEach((e=>{this.view.onSubmit("",[e])})):this.view.onSubmit(c,this.fwd_messages,{mentions:s,markup_references:n,link_references:o,attached_files:r,blockquotes:a})),this.unsetForwardedMessages(),nt.chats_view.clearSearch(),this.model.messages_view&&this.model.messages_view.data.get("visible")&&nt.chats_view.openChat(this.model.item_view,{right_contact_save:!0,clear_search:!0,screen:nt.body.screen.get("name")}),i.placeCaretAtEnd()})),r&&r.length){let e=[],t=0,i=new Ci.Deferred;i.done((()=>{e.length?(e.forEach((e=>{this.$(`.message-reference-preview-item-file[data-id="${e.uid}"]`).remove(),this.removeFileSnippetById(e.uid)})),ki.dialogs.error(Ei.pluck(e,"name").join(` — ${nt.getString("message__file_was_deleted__file_label")}. \n`)+` — ${nt.getString("message__file_was_deleted__file_label")}.`,{},nt.getQuantityString("message__file_was_deleted",e.length)),l.reject()):l.resolve()})),this.edit_message?i.resolve():r.forEach((s=>{ki.tryReadingFile(s).then((()=>{t++,r.length===t&&i.resolve()}),(()=>{e=e.concat([s]),t++,r.length===t&&i.resolve()}))}))}else l.resolve()},setEditedMessage:function(e){this.click_counter=0,this.setDefaultPlaceholder();let t=e.get("message")||"";this.$(".fwd-messages-preview").showIf(this.edit_message),this.$(".fwd-messages-preview .msg-author").text(nt.getString("edit_message__header")),this.$(".fwd-messages-preview .msg-text").html(Ii.xmlescape(t)),this.$(".fwd-messages-preview").emojify(".msg-text",{emoji_size:18}),this.displaySend(),nt.chat_body.updateHeight();let i=ki.markupBodyMessage(e,"mention").emojify({tag_name:"div"}),s=i.split("\n");s.forEach(((e,t)=>{e.includes("</blockquote>")||(s[t]="<p>"+s[t]+"</p>")})),i=s.join(""),this.quill.setText(""),this.quill.root.innerHTML=i,this.moveCursorToEnd(),this.focusOnInput()},setRedactedUploadMessage:function(e){this.click_counter=0,this.setDefaultPlaceholder();e.get("message");this.displaySend(),nt.chat_body.updateHeight();let t=ki.markupBodyMessage(e,"mention").emojify({tag_name:"div"}),i=t.split("\n");i.forEach(((e,t)=>{e.includes("</blockquote>")||(i[t]="<p>"+i[t]+"</p>")})),t=i.join(""),this.quill.setText(""),this.quill.root.innerHTML=t,this.moveCursorToEnd(),this.focusOnInput()},setForwardedMessages:function(e){if(this.fwd_messages=e||[],this.$(".fwd-messages-preview").showIf(e.length),e.length){let t,i,s,n,a=e[0];if(e.length>1)i=nt.getQuantityString("forwarded_messages_count",e.length);else if(a.get("forwarded_message"))i=nt.getQuantityString("forwarded_messages_count",e.length);else{i=(a.get("message")||a.get("original_message")).emojify();let e=a.get("images")||[],t=a.get("files")||[],o=a.get("locations");if(a.get("videos")&&a.get("videos").length&&(t=t.concat(a.get("videos"))),e&&e.length&&t&&t.length)i=e.length+t.length+" attachments";else{if(e&&e.length&&(e.length>1?i=nt.getQuantityString("recent_chat__last_message__images",e.length):(s=Ei.clone(a.get("images")[0]),n=this.createPreviewImage(s))),t&&t.length)if(t.length>1)i=nt.getQuantityString("recent_chat__last_message__files",t.length);else{let e=t[0].size;i=e?t[0].name+",   "+e:t[0].name}o&&o.length&&(i=o.length>1?nt.getQuantityString("recent_chat__last_message__locations",o.length):nt.getString("recent_chat__last_message__locations_plural_0"))}}let o=a.get("from_jid");t=a.isSenderMe()?this.account.get("name"):a.get("user_info")&&a.get("user_info").nickname||(this.account.contacts.get(o)?this.account.contacts.get(o).get("name"):o),this.$(".fwd-messages-preview .msg-author").text(t),Ei.isUndefined(s)?this.$(".fwd-messages-preview .msg-text").html(i):this.$(".fwd-messages-preview .msg-text").html(n)}nt.chat_body.updateHeight(),this.displaySend()},onShowMarkupPanel:function(e){let t=Ci(e.target),i=t.hasClass("opened");this.$(".last-emoticons").showIf(i),this.$(".markup-panel").showIf(!i),t.switchClass("opened",!i)},createPreviewImage:function(e){let t=new Image;return t.src=e.sources[0],Ci(t).addClass("fwd-img-preview"),t},unsetForwardedMessages:function(e){e&&e.preventDefault&&e.preventDefault();let t=this.$(".input-message .rich-textarea");this.fwd_messages=[],this.edit_message&&(this.removeAllFileSnippets(),this.removeAllLinkReferences(),this.$(".attach-file input").attr("disabled",!1),t.flushRichTextarea()),this.edit_message=null,this.$(".fwd-messages-preview").addClass("hidden");let i=t.getTextFromRichTextarea();i&&"\n"!=i?this.displaySend():this.displayMicrophone(),nt.chat_body.updateHeight(),this.focusOnInput()},resetSelectedMessages:function(){this.content_view.$(".chat-message.selected").removeClass("selected"),this.manageSelectedMessages()},manageSelectedMessages:function(){let e=this.content_view.$(".chat-message.selected"),t=this.$(".message-input-panel"),i=this.$(".message-actions-panel");if(length=e.length,t.hideIf(this.model.get("blocked")||length),i.showIf(length),this.model.get("blocked")&&this.$(".blocked-msg").hideIf(length),length){this.setButtonsWidth();let t=!1;1===length&&(e.first().data("from")===this.account.get("jid")&&(t=!0),this.contact&&this.contact.my_info&&e.first().data("from")===this.contact.my_info.get("id")&&(t=!0),e.first().find(".mdi-play").length&&(t=!1)),i.find(".pin-message-wrap").showIf(this.model.get("group_chat")).switchClass("non-active",1!==length&&this.model.get("group_chat")),i.find(".reply-message-wrap").switchClass("non-active",this.model.get("blocked")),i.find(".forward-message-wrap").switchClass("non-active",this.model.get("encrypted")),i.find(".edit-message-wrap").switchClass("non-active",!(1===length&&t)||this.content_view.$(".chat-message.saved-main.selected").length||this.model.get("blocked")),!this.view.$(".chat-notification").hasClass("encryption-warning")&&this.view.$(".chat-notification").removeClass("hidden").addClass("msgs-counter").text(nt.getQuantityString("chat_screen__bottom_panel__selected_messages__text",length))}else!this.view.$(".chat-notification").hasClass("encryption-warning")&&this.view.$(".chat-notification").addClass("hidden").removeClass("msgs-counter").text(""),this.focusOnInput()},pinMessage:function(){if(!this.model.get("active"))return;if(this.$(".pin-message-wrap").hasClass("non-active"))return;let e=this.content_view.$(".chat-message.selected").first(),t=this.messages_arr.get(e.data("uniqueid")).get("stanza_id");this.resetSelectedMessages();let i=Si({type:"set",to:this.contact.get("full_jid")||this.contact.get("jid")}).c("update",{xmlns:Ii.NS.GROUP_CHAT}).c("pinned-message").t(t);this.account.sendIQFast(i,(()=>{}),(e=>{Ci(e).find("not-allowed").length&&ki.dialogs.error(nt.getString("groupchat_you_have_no_permissions_to_do_it"))}))},copyMessages:function(){if(!this.model.get("active"))return;let e=this.content_view.$(".chat-message.selected"),t=[];e.each(((e,i)=>{let s=this.messages_arr.get(i.dataset.uniqueid);s&&t.push(s)})),this.resetSelectedMessages(),this.pushMessagesToClipboard(t)},editMessage:function(e,t){let i=Array.from(Ii.xmlescape(this.edit_message.get("original_message")||"")),s="",n=this.edit_message.get("mutable_content")||[],a=n&&n.find((e=>"groupchat"===e.type)),o=this.edit_message.get("stanza_id"),r=n&&n.filter((e=>"forward"===e.type)),c=t.markup_references||[],l=t.attached_files||[],d=t.link_references||[],h=t.blockquotes||[],g=t.mentions||[],u=Si({type:"set",to:this.contact&&this.contact.get("group_chat")?this.contact.get("full_jid"):this.account.get("jid")}).c("replace",{xmlns:Ii.NS.REWRITE,type:this.model.get("sync_type")?this.model.get("sync_type"):this.model.getConversationType(this.model),conversation:this.model.get("jid"),id:o}),p=$build("message").attrs({xmlns:void 0});if(p.c("markable").attrs({xmlns:Ii.NS.CHAT_MARKERS}).up(),r&&r.forEach(((e,t)=>{let n=this.edit_message.get("forwarded_message")[t],o=a&&a.start+a.end;p.c("reference",{xmlns:Ii.NS.REFERENCE,begin:a?e.start-o:e.start,end:a?e.end-o:e.end,type:"mutable"}).c("forwarded",{xmlns:Ii.NS.FORWARD}).c("delay",{xmlns:"urn:xmpp:delay",stamp:n.get("time")}).up().cnode(n.get("xml")).up().up().up(),s+=i.slice(e.start,e.end).join("")})),c.forEach((e=>{p.c("reference",{xmlns:Ii.NS.REFERENCE,begin:e.start+Array.from(s).length,end:e.end+Array.from(s).length,type:"decoration"});for(let t in e.markup)p.c(e.markup[t],{xmlns:Ii.NS.MARKUP}).up();p.up()})),h.forEach((e=>{p.c("reference",{xmlns:Ii.NS.REFERENCE,begin:e.start+Array.from(s).length,end:e.end+Array.from(s).length,type:"decoration"}).c("quote",{xmlns:Ii.NS.MARKUP}).up().up()})),g.forEach((e=>{let t={xmlns:Ii.NS.MARKUP};e.is_gc&&(t.node=Ii.NS.GROUP_CHAT),p.c("reference",{xmlns:Ii.NS.REFERENCE,begin:e.start+Array.from(s).length,end:e.end+Array.from(s).length,type:"decoration"}).c("mention",t).t(e.target).up().up()})),l&&l.length&&(n=n.filter((e=>"file"!==e.type)),l.forEach(((t,i)=>{0===i&&(e+="\n");let a=t.sources[0]+(i!=l.length-1?"\n":""),o=Array.from(Ei.escape(e)).length+Array.from(s).length,r=o+a.length;p.c("reference",{xmlns:Ii.NS.REFERENCE,type:"mutable",begin:o,end:r}),t.voice&&p.c("voice-message",{xmlns:Ii.NS.VOICE_MESSAGE}),p.c("file-sharing",{xmlns:Ii.NS.FILES}).c("file"),t.type&&p.c("media-type").t(t.type).up(),t.thumbnail&&p.c("thumbnail",{xmlns:Ii.NS.PUBSUB_AVATAR_METADATA_THUMBNAIL,uri:t.thumbnail}).up(),t.created&&p.c("created").t(t.created).up(),t.name&&p.c("name").t(t.name).up(),t.size&&p.c("size").t(t.size).up(),t.height&&p.c("height").t(t.height).up(),t.width&&p.c("width").t(t.width).up(),t.duration&&p.c("duration").t(t.duration).up(),t.description&&p.c("desc").t(t.description).up(),p.up().c("sources"),t.sources.forEach((e=>{t.key&&(e=e.replace(/^(https|http)/,"aescbc")+"#"+ki.ArrayBuffertoBase64(t.key)),p.c("uri").t(e).up()})),p.up().up().up(),t.voice&&p.up(),e+=a,n.push({start:o,end:r})}))),d&&d.length&&(n=n.filter((e=>"link_reference"!==e.type)),d.forEach(((t,i)=>{-1===t.start&&(t.start=Array.from(Ei.escape(e)).length+Array.from(s).length,e=e+"\n"+t.original_text,t.end=t.start+t.original_text.length+1),p.c("reference",{xmlns:Ii.NS.REFERENCE,begin:t.start,end:t.end,type:"mutable"}).c("ogp",{xmlns:Ii.NS.OGP,url:t.original_text}),t.site&&p.c("meta",{property:"og:site_name",content:t.site}).up(),t.type&&p.c("meta",{property:"og:type",content:t.type}).up(),t.title&&p.c("meta",{property:"og:title",content:t.title}).up(),t.url&&p.c("meta",{property:"og:url",content:t.url}).up(),t.description&&p.c("meta",{property:"og:description",content:t.description}).up(),t.image&&p.c("meta",{property:"og:image",content:t.image}).up(),t.image_width&&p.c("meta",{property:"og:image:width",content:t.image_width}).up(),t.image_height&&p.c("meta",{property:"og:image:height",content:t.image_height}).up(),t.video_url&&p.c("meta",{property:"og:video:url",content:t.video_url}).up(),p.up().up(),n.push({start:t.start,end:t.end})}))),n&&n.length&&this.edit_message.set({mutable_content:n}),Ii.xmlunescape(s)+e)if(p.c("body").t(Ii.xmlunescape(s)+e).up(),this.unsetForwardedMessages(),this.model.get("encrypted")){let e=p.tree().innerHTML;p.c("envelope",{xmlns:Ii.NS.SCE}).c("content"),Ci(p.tree()).children("body").length&&(p.cnode(Ci(p.tree()).children("body")[0]).attrs({xmlns:Ii.NS.CLIENT}).up(),Ci(p.tree()).children("body").detach()),Ci(p.tree()).children("reference").length&&(Ci(p.tree()).children("reference").each(((e,t)=>{p.cnode(Ci(p.tree()).children("reference")[e]).up()})),Ci(p.tree()).children("reference").detach()),p.up().c("rpad").t("0".repeat(200).slice(1,Math.floor(198*Math.random()+1))).up(),p.c("from",{jid:this.account.get("jid")}).up().up(),this.account.omemo.encrypt(this.contact,p).then((t=>{u.cnode(t.message.tree()),this.account.omemo.cached_messages.putMessage(this.contact,o,{envelope:e}),this.account.sendIQFast(u)}))}else u.cnode(p.tree()),this.account.sendIQFast(u);else this.deleteMessages(null,[this.edit_message],!0)},showEditPanel:function(){if(!this.model.get("active")||this.model.get("encrypted"))return;if(this.$(".edit-message-wrap").hasClass("non-active"))return;let e=this.content_view.$(".chat-message.selected").first(),t=this.messages_arr.get(e.data("uniqueid"));this.edit_message=t,this.resetSelectedMessages(),this.setEditedMessageAttachments(t),this.setEditedMessage(t)},deleteMessages:function(e,t,i){if(!this.model.get("active"))return;let s=this.content_view.$(".chat-message.selected"),n=[],a=0,o=[];if(s.each(((e,t)=>{let i=this.messages_arr.get(t.dataset.uniqueid);i&&n.push(i),i.isSenderMe()&&a++})),t&&t.forEach(((e,t)=>{n.push(e),e.isSenderMe()&&a++})),this.account.server_features.get(Ii.NS.REWRITE)||this.model.get("group_chat")){let e=new Ci.Deferred;e.done((()=>{ki.dialogs.ask(nt.getString("dialog_delete_messages__header"),nt.getQuantityString("delete_message_question",n.length),o,{ok_button_text:nt.getString("delete")}).done((e=>{if(!e)return this._clearing_history=!1,void(t&&t.length&&this.focusOnInput());let i=!!this.model.get("group_chat")||!!e.symmetric_deletion;this.resetSelectedMessages(),this.account.get("gallery_token")&&this.account.get("gallery_url")&&this.deleteFilesFromMessages(n),this.model.retractMessages(n,this.model.get("group_chat"),i),t&&t.length&&this.unsetForwardedMessages()}))})),this.model.get("group_chat")||this.model.get("saved")||a!=s.length&&!i||!this.contact||!this.contact.domain?e.resolve():this.contact.get("server_has_rewrite")?(o=[{name:"symmetric_deletion",checked:!1,text:nt.getString("dialog_clear_chat_history__option_delete_for_all")}],e.resolve()):this.account.connection.disco.info(this.contact.domain,null,(t=>{Ci(t).find('feature[var="'+Ii.NS.REWRITE+'"]').length?(o=[{name:"symmetric_deletion",checked:!1,text:nt.getString("dialog_clear_chat_history__option_delete_for_all")}],this.contact.set("server_has_rewrite",!0),e.resolve()):e.resolve()}),(t=>{e.resolve()}))}else ki.dialogs.ask(nt.getString("dialog_delete_messages__header"),`${nt.getQuantityString("delete_message_question",n.length)}\n${nt.getString("dialog_clear_chat_history__warning_deletion_not_supported",[this.account.domain]).fontcolor("#E53935")}`,o,{ok_button_text:nt.getString("dialog_clear_chat_history__button_delete_locally")}).done((e=>{if(!e)return this._clearing_history=!1,void(t&&t.length&&this.focusOnInput());this.resetSelectedMessages(),this.account.get("gallery_token")&&this.account.get("gallery_url")&&this.deleteFilesFromMessages(n),n.forEach((e=>{this.view.removeMessage(e)})),t&&t.length&&this.unsetForwardedMessages()}))},deleteFilesFromMessages:function(e){e.forEach((e=>{e.isSenderMe()&&(e.get("files")&&Ei.isArray(e.get("files"))&&e.get("files").forEach((e=>{e&&e.sources&&e.sources.length&&this.account.deleteFileByUrl(e.sources[0],(t=>{e.sources=null}),(t=>{e.sources=null}))})),e.get("images")&&Ei.isArray(e.get("images"))&&e.get("images").forEach((e=>{e&&e.sources&&e.sources.length&&this.account.deleteFileByUrl(e.sources[0],(t=>{e.sources=null}),(t=>{e.sources=null}))})),e.get("videos")&&Ei.isArray(e.get("videos"))&&e.get("videos").forEach((e=>{e&&e.sources&&e.sources.length&&this.account.deleteFileByUrl(e.sources[0],(t=>{e.sources=null}),(t=>{e.sources=null}))})))}))},pushMessagesToClipboard:function(e){let t=this.createTextMessage(e,"");ki.copyTextToClipboard(Ei.unescape(t))},createTextMessage:function(e,t){let i="";for(let s=0;s<e.length;s++){let n=e[s];this.model.get("saved")&&n.get("forwarded_message")&&1===n.get("forwarded_message").length&&!n.get("message")&&(n=n.get("forwarded_message")[0]);let a=Ti(n.get("timestamp")).startOf("day"),o="";(s?Ti(e[s-1].get("timestamp")).startOf("day"):Ti(0)).format("x")!=a.format("x")&&(i+=(t.length?t+" ":"")+Ni(a)+"\n"),o=n.isSenderMe()?this.account.get("name"):n.get("user_info")&&n.get("user_info").nickname||(this.account.contacts.get(n.get("from_jid"))?this.account.contacts.get(n.get("from_jid")).get("name"):n.get("from_jid")),i+=(t.length?t+" ":"")+"["+ki.pretty_time(n.get("timestamp"))+"] "+o+":\n",t.length&&(i+=t);let r=Ei.unescape(n.get("mutable_content")&&n.get("mutable_content").find((e=>"groupchat"===e.type))?n.get("original_message").slice(n.get("mutable_content").find((e=>"groupchat"===e.type)).end):n.get("original_message"));t.length&&(r=r.replace(/\n/g,"\n&gt; ")),t.length&&0!==r.indexOf("&gt;")&&(i+=" "),r=Ei.unescape(r.replace(/\n&gt; &gt;/g,"\n&gt;&gt;")),i+=Ei.escape(r)+"\n"}return i.trim()},replyMessages:function(){if(!this.model.get("active"))return;let e=this.content_view.$(".chat-message.selected"),t=[];e.each(((e,i)=>{let s=this.messages_arr.get(i.dataset.uniqueid);s&&(this.model.get("saved")&&s.get("forwarded_message")&&s.get("forwarded_message").length&&!s.get("message")?t=t.concat(s.get("forwarded_message")):t.push(s))})),this.resetSelectedMessages(),this.setForwardedMessages(t)},forwardMessages:function(){if(!this.model.get("active")||this.model.get("encrypted"))return;if(this.$(".forward-message-wrap").hasClass("non-active"))return;let e=this.content_view.$(".chat-message.selected"),t=[];e.each(((e,i)=>{let s=this.messages_arr.get(i.dataset.uniqueid);s&&(this.model.get("saved")&&s.get("forwarded_message")&&s.get("forwarded_message").length&&!s.get("message")?t=t.concat(s.get("forwarded_message")):t.push(s))})),this.resetSelectedMessages(),nt.forward_panel||(nt.forward_panel=new nt.ForwardPanelView({model:nt.opened_chats})),nt.forward_panel.open(t,this.account)},showChatNotification:function(e,t){this.view.$(".chat-notification").hasClass("msgs-counter")||this.view.$(".chat-notification").hasClass("encryption-warning")||this.view.$(".chat-notification").switchClass("hidden",!e).text(e).switchClass("text-color-300",t)}}),nt.ChatHeadContainer=nt.Container.extend({className:"chat-head-container panel-head noselect"}),nt.ChatBodyContainer=nt.Container.extend({className:"chat-body-container",updateHeight:function(){let e=nt.chat_bottom.$el.height()+parseInt(nt.chat_bottom.$el.css("bottom"));if(e){let t=parseInt(this.$el.css("bottom"));this.$el.css({bottom:e}),this.view&&(this.view.updateScrollBar(),e!=t&&!this.view.isScrolledToBottom()&&this.view.scrollTo(this.view.ps_container[0].scrollTop+(e-t)))}},updateBodyNotifications:function(e){e.get("notifications")?this.$el.addClass("chat-body-container-notifications"):this.$el.removeClass("chat-body-container-notifications")}}),nt.ChatBodyPlaceholderContainer=nt.Container.extend({className:"chat-body-placeholder-container"}),nt.NotificationsPlaceholder=nt.BasicView.extend({className:"notifications-placeholder",events:{"click .btn-request-notifications":"requestNotifications","click .mdi-close":"close"},_initialize:function(e){this.$el.html(`${nt.getString("desktop_notifications__alert_enable__text",[yi.CLIENT_NAME])} <span class="btn-request-notifications">${nt.getString("desktop_notifications__alert_enable__link_text")}</span><button class="btn-request-notifications btn-flat btn-dark btn-main">${nt.getString("chat_allow")}</button>`),this.$el.append(Ci("<i/>").addClass("mdi mdi-22px mdi-close")),nt.on("update_screen",this.onUpdatedScreen,this)},requestNotifications:function(){window.Notification.requestPermission((e=>{nt._cache.save({notifications:"granted"===e,ignore_notifications_warning:!0}),this.close()}))},onUpdatedScreen:function(){nt.notifications_placeholder&&(this.$el.detach(),nt.placeholders_wrap.$el.append(this.$el),nt.main_panel.$el.css("padding-bottom",nt.placeholders_wrap.$el.height()))},close:function(){nt._cache.save("ignore_notifications_warning",!0),this.remove(),nt.notifications_placeholder=void 0,nt.main_panel.$el.css("padding-bottom",nt.placeholders_wrap.$el.height())}}),nt.ChatBottomContainer=nt.Container.extend({className:"chat-bottom-container"}),nt.ChatPlaceholderView=nt.BasicView.extend({className:"placeholder-wrap chat-placeholder-wrap noselect",template:xi.chat_placeholder,_initialize:function(e){nt.on("update_placeholder",this.onPlaceholderUpdate,this)},onPlaceholderUpdate:function(){nt.toolbar_view.$(".toolbar-item.jingle-calls.active").length||nt.toolbar_view.$(".toolbar-item.geolocation-chats.active").length?this.$(".text").text(nt.getString("message_manager_error_not_implemented")):this.$(".text").text(nt.getString("chat_list__placeholder"))}}),nt.ChatSettings=Backbone.ModelWithStorage.extend({defaults:{last_emoji:[],muted:[],archived:[],group_chat:[],cached_avatars:[],group_chat_members_lists:[],notifications_last_msg_id:null},_initialize:function(e,t){this.account=t.account,this.account.on("notification_last_msg_updated",this.updateNotificationsLastMsgId,this)},getNotificationsLastMsgId:function(e){return Ei.clone(this.get("notifications_last_msg_id"))},updateNotificationsLastMsgId:function(e){this.save("notifications_last_msg_id",e)},getLastEmoji:function(){return Ei.clone(this.get("last_emoji"))},updateLastEmoji:function(e){let t=Ei.clone(this.get("last_emoji"));if(t.length>0){let i=t.indexOf(e);for(-1!=i&&t.splice(i,1),t.push(e);t.length>7;)t.shift()}else t.push(e);this.save("last_emoji",t)},updateMutedList:function(e,t){let i=Ei.clone(this.get("muted")),s=i.indexOf(e);t&&s<0&&i.push(e),!t&&s>=0&&i.splice(s,1),this.save("muted",i)},updateArchiveChatsList:function(e,t){let i=Ei.clone(this.get("archived")),s=i.indexOf(e);t&&s<0&&i.push(e),!t&&s>=0&&i.splice(s,1),this.save("archived",i)},updateGroupChatsList:function(e,t){let i=Ei.clone(this.get("group_chat")),s=i.indexOf(e);t&&s<0&&i.push(e),!t&&s>=0&&i.splice(s,1),this.save("group_chat",i)},updateCachedAvatars:function(e,t,i){let s=Ei.clone(this.get("cached_avatars")),n=s.indexOf(s.find((t=>t.id===e)));-1!=n&&s.splice(n,1),s.push({id:e,avatar_hash:t,avatar_b64:i}),this.save("cached_avatars",s)},getAvatarInfoById:function(e){return Ei.clone(this.get("cached_avatars")).find((t=>t.id===e))},getB64Avatar:function(e){let t=this.getAvatarInfoById(e);return t?t.avatar_b64:void 0},getHashAvatar:function(e){let t=this.getAvatarInfoById(e);if(t)return t.avatar_hash}}),nt.ExportChatHistoryView=nt.BasicView.extend({className:"modal main-modal export-history-modal",ps_selector:".modal-content",ps_settings:{wheelPropagation:!0},template:xi.export_history,events:{"click .btn-cancel":"close","click .export-history-progress-bar":"startLoad","click .btn-confirm":"exportFile"},render:function(e){this.model=e.model,this.contact=this.model.contact,this.account=e.account,this.content=e.content,this.messages_list=[],this.$(".btn-confirm").prop("disabled",!0),this.$(".export-history-progress-bar").removeClass("history-loading"),this.$el.openModal({ready:this.onRender.bind(this),complete:this.close.bind(this)})},onRender:function(e){this.updateScrollBar(),this.$(".export-history-progress-bar").css("background","radial-gradient(closest-side,#fff 94%,#00000000 95% 100%),conic-gradient(#BDBDBD 0%,#F5F5F5 0)"),this.$('input[type=radio][name=file_format][value="txt"]').prop("checked",!0),this.$('input[type=radio][name=date_format][value="iso"]').prop("checked",!0),this.$(".export-history-msg-count").text(nt.getString("export_history_start_load"))},startLoad:function(e){if(this.is_loading)this.history_export_stoped=!0,this.is_loading=!1,this.$(".btn-confirm").prop("disabled",!1),this.$(".export-history-progress-bar").removeClass("history-loading");else{this.$(".btn-confirm").prop("disabled",!0),this.$(".export-history-progress-bar").addClass("history-loading"),this.history_last_id="",this.history_export_loaded=!1,this.history_export_stoped=!1,this.loaded_messages=0,this.messages_list=[],this.load_limit=50,this.is_loading=!0;let e=Mi();this.loading_id=e,this.$(".export-history-msg-count").text(nt.getString("placeholder_loading")),this.getMessageArchive(e)}},getMessageArchive:function(e){let t={fast:!0,max:this.load_limit||50,after:this.history_last_id};!this.history_last_id&&delete t.after;this.model.account;this.content.MAMRequest(t,((i,s,n)=>{this.all_messages_count=n.count,e!==this.loading_id||this.history_export_stoped||(0==n.count&&(this.is_loading=!1,this.$(".export-history-msg-count").text(nt.getString("no_messages"))),n.first&&(this.history_last_id=n.last),s.length<t.max&&i&&(this.history_export_loaded=!0),Ei.each(s,(e=>{this.handleMessage(e),this.loaded_messages++})),this.$(".export-history-progress-bar").css("background",`radial-gradient(closest-side,#fff 94%,#00000000 95% 100%),conic-gradient(#BDBDBD ${this.loaded_messages/n.count*100}%,#F5F5F5 0)`),this.$(".export-history-msg-count").text(nt.getString("export_history_msg_count",[this.loaded_messages,this.all_messages_count])),this.history_export_loaded||this.history_export_stoped?(this.is_loading=!1,this.$(".btn-confirm").prop("disabled",!1),this.$(".export-history-progress-bar").removeClass("history-loading")):this.getMessageArchive(e))}),(e=>{}))},handleMessage:function(e){let t=Ci(e),i=t.find(`result[xmlns="${Ii.NS.MAM}"]`);if(i.length&&i.children("forwarded").length){t=i.children("forwarded").children("message");let e,s=t.children("body").text(),n=t.children("time").attr("stamp");if(t.children(`x[xmlns="${Ii.NS.GROUP_CHAT}"]`).length){e=t.children(`x[xmlns="${Ii.NS.GROUP_CHAT}"]`).find("jid").text()}else e=Ii.getBareJidFromJid(t.attr("from"));this.messages_list.push([n,e,s])}},exportFile:function(){this.messages_list.length==this.all_messages_count?this.exportFileChoosing():ki.dialogs.ask(nt.getString("warning"),nt.getString("export_history_not_loaded_text")).done((e=>{e&&this.exportFileChoosing()}))},exportFileChoosing:function(){let e=this.$("input[name=file_format]:checked").val();"txt"==e?this.getFile():"csv"==e&&this.getFileCSV()},getFileCSV:function(){let e=ki.getDateFormat(this.$("input[name=date_format]:checked").val())+" HH:mm:ss",t=this.messages_list.map((t=>`[${ki.pretty_datetime(t[0],e)}], ${t[1]},"${t[2].replaceAll('"','""').replaceAll("#","#")}\n\n"`)).join("\n");t="Time, Author, Message\n"+t;let i=document.createElement("a"),s=new Blob([t],{type:"text/csv"});i.href=URL.createObjectURL(s),i.download=`${this.model.get("jid")}.csv`,i.click()},getFile:function(){let e=ki.getDateFormat(this.$("input[name=date_format]:checked").val())+" HH:mm:ss",t=this.messages_list.map((t=>`[${ki.pretty_datetime(t[0],e)}] ${t[1]}:\n ${t[2]}\n\n`)).join(""),i=document.createElement("a"),s=new Blob([t],{type:"text/plain"});i.href=URL.createObjectURL(s),i.download=`${this.model.get("jid")}.txt`,i.click(),URL.revokeObjectURL(i.href)},onHide:function(){this.$el.detach()},close:function(){this.closeModal(),this.history_export_stoped=!0},closeModal:function(){this.$el.closeModal({complete:this.hide.bind(this)})}}),nt.Account.addInitPlugin((function(){this.chat_settings=new nt.ChatSettings({id:"chat-settings"},{account:this,storage_name:nt.getStorageName()+this.get("jid"),fetch:"after"}),this.messages=new nt.Messages(null,{account:this}),this.forwarded_messages=new nt.Messages(null,{account:this}),this.pinned_messages=new nt.Messages(null,{account:this}),this.chats=new nt.AccountChats(null,{account:this})})),nt.Account.addConnPlugin((function(){let e=this.last_msg_timestamp||this.disconnected_timestamp;this.chats.registerMessageHandler(),this.chats.each((t=>{this.connection.do_synchronization||(t.messages.length?t.trigger("get_missed_history",e):t.trigger("load_last_history"))})),this.connection.deleteTimedHandler(this._get_msg_handler),this._get_msg_handler=this.connection.addTimedHandler(6e4,(()=>{if(this.connection&&!this.connection.handlers.find((e=>!e.ns&&!e.options.encrypted&&"message"===e.name))){this.last_msg_timestamp;this.chats.registerMessageHandler();let e={};this.cached_sync_conversations.getFromCachedConversations("last_sync_timestamp",(t=>{let i=t&&t.timestamp?t.timestamp:null;!this.roster.last_chat_msg_id&&(e.max=yi.SYNCHRONIZATION_RSM_MAX),i&&(e.stamp=i),this.roster&&this.roster.syncFromServer(e,Boolean(i),!0),this.roster&&this.roster.getRoster()}))}return!0})),Ei.isUndefined(this.settings.get("omemo"))&&!this.omemo_enable_placeholder&&(this.omemo_enable_placeholder=new nt.OMEMOEnablePlaceholder({account:this}))}),!0,!0),nt.Account.addFastConnPlugin((function(){this.getVCard(),this.auth_view&&this.auth_view.data.get("authentication")||this.trigger("ready_to_get_roster")}),!0,!0),nt.once("start",(function(){["keydown"].forEach((e=>{window.addEventListener(e,(e=>{document.onselectstart=function(){return!((e.ctrlKey||e.metaKey)&&e.keyCode==yi.KEY_SHIFT||e.shiftKey&&e.keyCode==yi.KEY_CTRL||e.keyCode==yi.KEY_SHIFT)}}))})),["keyup"].forEach((e=>{window.addEventListener(e,(e=>{document.onselectstart=function(){return!0}}))})),this.chats=new this.Chats,this.chats.addCollection(this.opened_chats=new this.OpenedChats),this.chats.addCollection(this.closed_chats=new this.ClosedChats),this.chats.registerQuillEmbeddedsTags(),this.chats_view=this.left_panel.addChild("chats",this.ChatsView,{model:this.opened_chats}),this.chat_head=this.right_panel.addChild("chat_head",this.ChatHeadContainer),this.chat_body=this.right_panel.addChild("chat_body",this.ChatBodyContainer),this.chat_body_placeholder=this.right_panel.addChild("chat_body_placeholder",this.ChatBodyPlaceholderContainer),this.chat_bottom=this.right_panel.addChild("chat_bottom",this.ChatBottomContainer),this.chat_placeholder=this.right_panel.addChild("chat_placeholder",this.ChatPlaceholderView),this.on("add_group_chat",(function(e){this.add_group_chat_view||(this.add_group_chat_view=new this.AddGroupChatView),this.add_group_chat_view.show(e)}),this),this.on("change:focused",(function(){if(this.get("focused")){let e=this.chats_view.active_chat;e&&e.model.get("display")&&(e.content.onScroll(null,!0),!1!==e.model.get("is_accepted")&&e.content.bottom.focusOnInput())}}),this),this.on("change:idle",(function(){if(!this.get("idle")){let e=this.chats_view.active_chat;e&&e.model.get("display")&&(e.content.onScroll(null,!0),!1!==e.model.get("is_accepted")&&e.content.bottom.focusOnInput())}}),this),this.on("show_group_chats",(function(){this.chats_view.showGroupChats()}),this),this.on("show_chats",(function(){this.chats_view.showChats()}),this),this.on("show_all_chats",(function(e){this.chats_view.showAllChats(e)}),this),this.on("show_archive_chats",(function(e){this.chats_view.showArchiveChats(e)}),this),this.on("show_saved_chats",(function(e){this.chats_view.showSavedChats(e)}),this),this.on("show_notification_chats",(function(e){this.chats_view.showNotifications(e)}),this),this.on("clear_search",(function(){this.contacts_view.clearSearch(),this.chats_view.clearSearch()}),this)}),nt);const Ri=nt;let Oi=nt.env,Di=Oi.constants,Fi=Oi.templates.searching,Ui=Oi.utils,Pi=Oi.$,Vi=Oi.$iq,Gi=Oi.Strophe,zi=Oi._,Hi=Ui.images;nt.DiscoveringView=nt.BasicView.extend({className:"searching-main noselect",template:Fi.searching_wide,ps_selector:".chats-list-wrap",ps_settings:{wheelPropagation:!0,theme:"existing-chats-list"},avatar_size:Di.AVATAR_SIZES.SYNCHRONIZE_ACCOUNT_ITEM,events:{"click .account-field .dropdown-content":"selectAccount","click .btn-cancel":"close","click .btn-search":"search","click .existing-chat-wrap":"getChatProperties","keyup .search-input":"keyUp"},_initialize:function(){this.data.on("change:color",this.colorUpdated,this),this.$(".searching-properties-field .dropdown-button").on("click",(()=>{this.toggleProperties()}))},render:function(e){this.endDiscovering(),this.data.set("color","#9E9E9E"),e||(e={});let t=nt.accounts.connected;e.jid;return this.$(".single-acc").showIf(1===t.length),this.$(".multiple-acc").hideIf(1===t.length),this.$(".account-field .dropdown-content").empty(),zi.each(t,(e=>{this.$(".account-field .dropdown-content").append(this.renderAccountItem(e))})),t.length&&this.bindAccount(t[0]),this.$("#select-searching-properties .account-field .dropdown-button").dropdown({inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"left"}),this},toggleProperties:function(){let e=this.isPropertiesVisible();this.$("#select-searching-properties").slideToggle("fast"),this.$(".arrow").switchClass("mdi-chevron-up",!e),this.$(".arrow").switchClass("mdi-chevron-down",e)},isPropertiesVisible:function(){return"none"!==this.$("#select-searching-properties").css("display")},discover:function(){let e=zi.escape(this.$(".search-input.simple-input-field").val());if(e){this.isPropertiesVisible()&&this.toggleProperties(),this.$(".searching-more").html("");this.$("#searching_property_title").val(),this.$("#searching_property_sort_by").val();this.$(".searching-result-wrap .preloader-wrapper").show(),this.searchExistingGroupChats(e)}},setColor:function(){if(this.account){let e=this.account.settings.get("color");this.data.set("color",e)}},colorUpdated:function(){let e=this.data.get("color");this.$el.attr("data-color",e)},keyUp:function(e){""===this.$(".search-input").val()?this.$(".btn-search").addClass("none-active"):this.$(".btn-search").removeClass("none-active"),e.keyCode===Di.KEY_ENTER&&this.discover()},searchExistingGroupChats:function(e){this.account.connection.disco.items(e,null,this.getGroupchatService.bind(this),this.onDiscoveringError.bind(this))},onDiscoveringError:function(e){this.endDiscovering(),this.$(".chats-list").html(""),this.$(".result-string").text(nt.getString("discover__no_matches",[Pi(e).attr("from")]))},endDiscovering:function(){this.$(".searching-result-wrap .preloader-wrapper").hide()},getGroupchatService:function(e){Pi(e).find("query item").each(((e,t)=>{if(Pi(t).attr("node")===Gi.NS.GROUP_CHAT){let e=Pi(t).attr("jid");this.getGroupchatFeatures(e)}})),this.endDiscovering()},getGroupchatFeatures:function(e){let t=Vi({type:"get",to:e}).c("query",{xmlns:Gi.NS.DISCO_INFO,node:Gi.NS.GROUP_CHAT});this.account.sendIQFast(t,this.getServerInfo.bind(this),this.onDiscoveringError.bind(this))},getServerInfo:function(e){Pi(e).find("query identity").each(((t,i)=>{let s=Pi(i);if("conference"===s.attr("category")&&"server"===s.attr("type")){let t=Pi(e).attr("from");this.getChatsFromServer(t)}}))},getChatsFromServer:function(e){let t=Vi({type:"get",to:e}).c("query",{xmlns:Gi.NS.DISCO_ITEMS,node:Gi.NS.GROUP_CHAT});this.account.sendIQFast(t,(e=>{this.$(".chats-list").html(""),Pi(e).find("query item").each(((e,t)=>{let i=Pi(t),s=i.attr("name"),n=i.attr("jid"),a=Pi(Fi.existing_groupchat_item({name:s,jid:n,color:this.account.settings.get("color")})),o=Hi.getDefaultAvatar(s);a.find(".circle-avatar").setAvatar(o,32),a.appendTo(this.$(".searching-result-wrap .chats-list"))})),this.$(".result-string").text(nt.getString("discover__text_discovered_groups",[Pi(e).find("query item").length,this.account.get("jid")]))}))},bindAccount:function(e){this.account=e,this.$(".account-field .dropdown-button .account-item-wrap").replaceWith(this.renderAccountItem(e)),this.setColor()},renderAccountItem:function(e){return Pi(Fi.searching_account_item({jid:e.get("jid")}))},selectAccount:function(e){let t=Pi(e.target).closest(".account-item-wrap"),i=nt.accounts.get(t.data("jid"));this.bindAccount(i)},getChatProperties:function(e){let t=Pi(e.target).closest(".existing-chat-wrap"),i=t.data("jid"),s=t.data("name"),n=Vi({type:"get",to:i}).c("query",{xmlns:Gi.NS.DISCO_INFO});this.account.sendIQFast(n,(e=>{let t=Pi(e),n=t.find('field[var="description"] value').text(),a=t.find('field[var="anonymous"] value').text(),o=t.find('field[var="model"] value').text(),r={jid:i,name:s,privacy:a,description:n,membership:o};this.more_info_view=this.addChild("groupchat_properties",nt.MoreInfoView,{model:this,chat_properties:r,el:this.$(".searching-more")[0]})}))}}),nt.MoreInfoView=nt.BasicView.extend({className:"searching-main noselect",template:Fi.existing_groupchat_details_view,events:{"click .btn-join-chat":"joinChat"},_initialize:function(e){this.account=this.model.account,this.chat_properties=e.chat_properties,this.$el.html(this.template(this.chat_properties))},render:function(e){},joinChat:function(){let e=this.account.contacts.mergeContact(this.chat_properties.jid);e.set("group_chat",!0),e.acceptRequest(),e.pushInRoster(null,(()=>{e.askRequest(),e.getMyInfo()})),e.trigger("open_chat",e)}}),nt.Searching=Backbone.Model.extend({initialize:function(e){this.account=e.account},getSearchingFields:function(){let e=Vi({type:"get",to:"index.xabber.com"}).c("query",{xmlns:Gi.NS.INDEX+"#groupchat"});this.account.sendIQFast(e,this.parseSearchingFields)},parseSearchingFields:function(e){let t=Pi(e).find(`x[xmlns = "${Gi.NS.XDATA}"] field`),i=[];t.each(((e,t)=>{let s=Pi(t);"hidden"!==s.attr("type")&&i.push({var:s.attr("var"),label:s.attr("label")})}))}}),nt.LocalSearchingView=nt.BasicView.extend({className:"",events:{},_initialize:function(e){this.account=e.account},render:function(){},search:function(e){}}),nt.GlobalSearchingView=nt.BasicView.extend({className:"",events:{},_initialize:function(e){this.account=e.account,this.indexed_chats=[]},render:function(){},search:function(e){this.indexed_chats=[];let t=Vi({to:"index.xabber.com",type:"set"}).c("query",{xmlns:Gi.NS.INDEX+"#groupchat"}).c("x",{xmlns:Gi.NS.XDATA,type:"form"}).c("field",{var:"FORM_TYPE",type:"hidden"}).c("value").t(Gi.NS.INDEX+"#groupchat").up().up();e.description&&t.c("field",{var:"description"}).c("value").t(e.description).up().up(),e.name&&t.c("field",{var:"name"}).c("value").t(e.name).up().up(),e.model&&t.c("field",{var:"model"}).c("value").t(e.model).up().up(),e.anywhere&&t.c("field",{var:"anywhere"}).c("value").t(e.anywhere).up().up(),this.account.sendIQFast(t,this.onSearched.bind(this))},onSearched:function(e){let t=Pi(e);Pi(t.find("query item groupchat")).each(((e,t)=>{let i=Pi(t),s={jid:i.attr("jid")};i.children().each(((e,t)=>{let i=Pi(t),n=i[0].tagName.replace(/-/g,"_"),a=i.text();zi.extend(s,{[n]:a})})),this.indexed_chats.push(s)}))}}),nt.once("start",(function(){this.discovering=this.wide_panel.addChild("discovering_main",this.DiscoveringView)}),nt);const qi=nt;let Yi=nt.env,Qi=Yi.constants,Zi=Yi.templates.mentions,Ji=Yi.utils,Ki=Yi.$,Wi=Yi.Strophe,Xi=Yi._,es=Ji.images;nt.Mention=Backbone.Model.extend({defaults:{active:!1,display:!1,timestamp:0},initialize:function(e,t){this.contact=t.contact,this.message=t.message,this.id=this.message.get("unique_id"),this.set("timestamp",this.message.get("timestamp")),this.account=this.contact.account,this.item_view=new nt.MentionItemView({model:this}),this.contact.on("destroy",this.destroy,this),this.message.on("change:last_replace_time",this.onMessageUpdated,this)},onMessageUpdated:function(){this.message.get("mentions")&&this.message.get("mentions").length?this.message.get("mentions").forEach((e=>{let t=e.target||"",i=t.match(/\?id=\w*/),s=t.match(/\?jid=.*/);t=i?i[0].slice(4):s?s[0].slice(5):"",i?this.contact.my_info?t===this.contact.my_info.get("id")?this.item_view.updateLastMessage():this.destroy():this.contact.get("group_chat")&&(this._pending_my_info?this._pending_my_info.done((()=>{t===this.contact.my_info.get("id")?this.item_view.updateLastMessage():this.destroy(),this._pending_my_info=null})):(this._pending_my_info=new Ki.Deferred,this.contact.getMyInfo((()=>{t===this.contact.my_info.get("id")?this.item_view.updateLastMessage():this.destroy(),this._pending_my_info.resolve()})))):s&&t===this.account.get("jid")?this.item_view.updateLastMessage():this.destroy()})):this.destroy()}}),nt.MentionsBase=Backbone.Collection.extend({model:nt.Mention}),nt.AccountMentions=nt.MentionsBase.extend({initialize:function(e,t){this.account=t.account,this.on("add",this.onMentionAdded,this)},onMentionAdded:function(e){nt.mentions.add(e)}}),nt.Mentions=nt.MentionsBase.extend({comparator:"timestamp",initialize:function(){this.collections=[],this.on("add",Xi.bind(this.updateInCollections,this,"add")),this.on("change",Xi.bind(this.updateInCollections,this,"change"))},addCollection:function(e){this.collections.push(e)},updateInCollections:function(e,t){Xi.each(this.collections,(function(i){i.update(t,e)}))}}),nt.MentionsView=nt.SearchPanelView.extend({className:"mentions-container container",ps_selector:".mentions-list-wrap",main_container:".mentions-list",ps_settings:{theme:"item-list"},template:Zi.mentions_panel,_initialize:function(){this.active_mention=null,this.keyup_timeout=null,this.model.on("add",this.onMentionAdded,this),this.model.on("change:active",this.onChangedActiveStatus,this),this.model.on("destroy",this.onMentionRemoved,this),nt.accounts.on("list_changed",this.updateLeftIndicator,this),this.ps_container.on("ps-scroll-y",this.onScrollY.bind(this)),this.$("input").on("input",this.updateSearch.bind(this))},render:function(e){!e.right&&this.active_mention&&(this.active_mention.model.set("active",!1),this.active_mention=null),("chat"!==e.right&&"message_context"!==e.right&&"participant_messages"!==e.right||e.clear_search&&"chat"===e.right)&&this.clearSearch()},onMentionAdded:function(e){this.addChild(e.id,e.item_view),this.updateMentionPosition(e)},onMentionRemoved:function(e,t){t=t||{},this.active_mention===this.child(e.id)&&(this.active_mention=null),this.removeChild(e.id,t),this.updateScrollBar()},selectItem:function(e){this.clearSearchSelection();let t=this.$('.list-item[data-id="'+e+'"]');t.length?this.selection_id=e:(t=this.$(".list-item:visible").first(),this.selection_id=t.data("id")),t.find(".mention-info-wrap").addClass("selected")},clearSearchSelection:function(e){this.selection_id=null,this.$(".list-item.selected").removeClass("selected"),this.$(".list-item .selected").removeClass("selected")},onEnterPressed:function(e){let t;e.closest(".searched-lists-wrap").length?(this.clearSearch(),this.$(".list-item.active").removeClass("active"),e.hasClass("chat-item")&&(t=nt.chats_view.child(e.data("id")),t&&t.open({screen:nt.body.screen.get("name"),clear_search:!1}),e.addClass("active")),e.hasClass("roster-contact")&&(t=nt.accounts.get(e.data("account")).chats.get(nt.accounts.get(e.data("account")).contacts.get(e.data("jid")).hash_id),t&&(t=t.item_view),t&&nt.chats_view.openChat(t,{clear_search:!1,screen:nt.body.screen.get("name")}),e.addClass("active")),e.hasClass("message-item")&&e.click()):e.find(".mention-info-wrap").click()},replaceMentionItem:function(e,t){let i=this.child(e.id);if(i&&e.get("timestamp")){i.$el.detach();let s=t.indexOf(e);0===s?this.$(".mentions-list").append(i.$el):this.$(".mention-item").eq(-s).before(i.$el);let n=i.$el.prev(".mention-item"),a=i.$el.next(".mention-item"),o=i.$el.data("contact-jid");if(n.length){n.data("contact-jid")!==o&&i.$el.find(".group-chat-title-wrap").removeClass("hidden")}else i.$el.find(".group-chat-title-wrap").removeClass("hidden");if(a.length){a.data("contact-jid")===o?a.find(".group-chat-title-wrap").addClass("hidden"):a.find(".group-chat-title-wrap").removeClass("hidden")}else i.$el.find(".group-chat-title-wrap").removeClass("hidden")}},readAllMentions:function(){nt.accounts.connected.forEach((e=>{let t=Xi.clone(e.unread_mentions.models);Xi.each(t,(t=>{let i=t.message.get("msgid"),s=t.message.get("archive_id"),n=t.message.get("contact_archive_id"),a=e.chats.getChat(t.contact);t.message.set("is_unread",!1),a.sendMarker(i,"displayed",s,n)}))}))},updateLeftIndicator:function(e){this.$el.attr("data-indicator",e.connected.length>1)},updateMentionPosition:function(e){this.child(e.id)&&this.replaceMentionItem(e,this.model)},onChangedActiveStatus:function(e){if(e.get("active")){let t=this.active_mention;this.active_mention=this.child(e.id),t&&t.model.set("active",!1)}}}),nt.MentionItemView=nt.BasicView.extend({className:"mention-item list-item",template:Zi.mention_item,avatar_size:Qi.AVATAR_SIZES.CHAT_ITEM,events:{"click .mention-info-wrap":"openByClick"},_initialize:function(){this.account=this.model.account,this.contact=this.model.contact,this.$el.attr("data-id",this.model.id),this.$el.attr("data-contact-jid",this.contact.get("jid")),this.updateContactName(),this.updateGroupChat(),this.updateName(),this.updateLastMessage(),this.updateAvatar(),this.updateColorScheme(),this.updateCounter(),this.updateIcon(),this.model.on("change:active",this.updateActiveStatus,this),this.account.settings.on("change:color",this.updateColorScheme,this),this.contact.on("change:name",this.updateContactName,this),this.contact.on("change:group_chat",this.updateGroupChat,this),this.model.message.on("change:is_unread",this.updateCounter,this)},updateName:function(){let e=this.model.message,t=e.get("user_info")||e.isSenderMe()&&this.contact.my_info&&this.contact.my_info.attributes,i=this.contact.get("name");t&&(i=t.nickname||t.jid||t.id||this.model.message.get("from_jid")),this.$(".chat-title").text(i)},updateIcon:function(){this.$(".contact-icon .group-chat-icon").hideIf(!this.contact.get("group_chat")&&this.contact.get("jid")===this.account.domain),this.$(".contact-icon .server-icon").hideIf(this.contact.get("jid")!==this.account.domain)},updateContactName:function(){let e=this.contact.get("name");if(this.$(".group-chat-name").text(e),!this.contact.get("group_chat")&&(this.updateName(),!this.contact.get("photo_hash"))){let t=es.getDefaultAvatar(e);this.$(".circle-avatar").setAvatar(t,this.avatar_size)}},updateGroupChat:function(){this.updateIcon()},updateCounter:function(){let e=this.model.message.get("is_unread");this.$(".msg-counter").switchClass("hidden",!e),e?this.account.unread_mentions.add(this.model):this.account.unread_mentions.remove(this.model),nt.toolbar_view.recountAllMessageCounter()},updateLastMessage:function(){let e=this.model.message;if(!e)return;let t=e.get("time"),i=e.get("timestamp"),s=e.get("forwarded_message"),n=e.get("files")||[],a=e.get("images")||[],o=e.get("locations")||[],r=s?e.get("message")||nt.getString("forwarded_messages_count",s.length).italics():e.getText();if(e.get("videos")&&e.get("videos").length&&(n=n.concat(e.get("videos"))),this.model.set({timestamp:i}),n.length||a.length||o.length){let e=Ki('<span class="text-color-500"/>');if(n.length&&a.length)r=e.text(nt.getString("recent_chat__last_message__attachments",[n.length+a.length]));else{if(n.length>0){let t=0;n.forEach((e=>{t+=Number(e.size)})),r=e.text(nt.getQuantityString("recent_chat__last_message__files",n.length)+(t>0?`, ${Ji.pretty_size(t)}`:""))}if(a.length>0){let t=0;a.forEach((e=>{t+=Number(e.size)})),r=e.text(nt.getQuantityString("recent_chat__last_message__images",a.length)+(t>0?`, ${Ji.pretty_size(t)}`:""))}o.length>0&&(r=e.text(nt.getQuantityString("recent_chat__last_message__locations",o.length)))}this.$(".last-msg").text("").append(r)}else this.$(".last-msg").text(r);this.$el.emojify(".last-msg",{emoji_size:16}),this.$(".last-msg-date").text(Ji.pretty_short_datetime(t)).attr("title",(e=>Ji.pretty_datetime(e,("ru-RU"==nt.settings.language||"default"==nt.settings.language&&"ru-RU"==nt.get("default_language"))&&"D MMMM YYYY HH:mm:ss"))(t))},updateActiveStatus:function(){this.$el.find(".mention-info-wrap").switchClass("active",this.model.get("active"))},updateAvatar:function(){let e,t=this.model.message,i=t.get("user_info")||t.isSenderMe()&&this.contact.my_info&&this.contact.my_info.attributes;if(i)if(i.avatar)if(e=i.b64_avatar||this.account.chat_settings.getB64Avatar(i.id),e)this.$(".circle-avatar").setAvatar(e,this.avatar_size);else{let t=Wi.NS.PUBSUB_AVATAR_DATA+"#"+i.id;this.contact.getAvatar(i.avatar,t,(t=>{e=t,this.account.chat_settings.updateCachedAvatars(i.id,i.avatar,t),this.$(".circle-avatar").setAvatar(e,this.avatar_size)}),(()=>{let e=es.getDefaultAvatar(i.nickname||i.jid||i.id);this.$(".circle-avatar").setAvatar(e,this.avatar_size)}))}else{let e=es.getDefaultAvatar(i.nickname||i.jid||i.id);this.$(".circle-avatar").setAvatar(e,this.avatar_size)}else e=this.contact.cached_image,this.$(".circle-avatar").setAvatar(e,this.avatar_size)},openByClick:function(){let e=this.model.message,t=this.account.chats.getChat(this.contact);this.model.message.set("is_unread",!1),t.sendMarker(e.get("origin_id"),"displayed",e.get("stanza_id"),e.get("contact_stanza_id")),this.model.set("active",!0),this.contact.trigger("open_mention",this.contact,e.get("unique_id"))},updateColorScheme:function(){let e=this.account.settings.get("color");this.$el.attr("data-color",e)}}),nt.MentionsPlaceholderView=nt.BasicView.extend({className:"placeholder-wrap mentions-placeholder-wrap noselect",template:Zi.mentions_placeholder,_initialize:function(e){nt.on("update_placeholder",this.onPlaceholderUpdate,this)},onPlaceholderUpdate:function(){nt.toolbar_view.$(".toolbar-item.jingle-calls.active").length||nt.toolbar_view.$(".toolbar-item.geolocation-chats.active").length?this.$(".text").text(nt.getString("message_manager_error_not_implemented")):this.$(".text").text(nt.getString("mentions_list__placeholder"))}}),nt.Account.addInitPlugin((function(){this.mentions=new nt.AccountMentions(null,{account:this}),this.unread_mentions=new nt.Mentions(null,{account:this})})),nt.once("start",(function(){this.mentions=new this.Mentions,this.mentions_view=this.left_panel.addChild("mentions",this.MentionsView,{model:this.mentions}),this.mentions_placeholder=this.right_panel.addChild("mentions_placeholder",this.MentionsPlaceholderView)}),nt);const ts=nt;var is=i(25108);let ss=nt.env,ns=ss.constants,as=ss.$;nt.once("start",(function(){as(window).on("keydown",(e=>{(e.ctrlKey||e.metaKey)&&e.keyCode==ns.KEY_SHIFT||e.shiftKey&&e.keyCode==ns.KEY_CTRL?(this.shift_pressed=null,this.shiftctrl_pressed=!0,e.preventDefault()):e.keyCode==ns.KEY_SHIFT&&(this.shift_pressed=!0,e.preventDefault());let t=nt.body.screen.attributes;if((e.keyCode!==ns.KEY_ESCAPE||nt.body.screen.get("right_contact")||!nt.body.$el.siblings("#modals").children(".open").length)&&t.chat_item&&("mentions"===t.name||"contacts"===t.name||"all-chats"===t.name)&&("chat"===t.right||"participant_messages"===t.right||"message_context"===t.right||"searched_messages"===t.right)&&window.$(".message-actions-panel").length&&!window.$(".message-actions-panel").hasClass("hidden")&&!e.ctrlKey&&!e.metaKey){switch(e.keyCode){case 67:t.chat_item.model.trigger("copy_selected_messages");break;case 68:t.chat_item.model.trigger("delete_selected_messages");break;case 69:t.chat_item.model.trigger("edit_selected_message");break;case 70:t.chat_item.model.trigger("forward_selected_messages");break;case 80:t.chat_item.model.trigger("pin_selected_message");break;case 82:t.chat_item.model.trigger("reply_selected_messages");break;case ns.KEY_ESCAPE:nt.body.screen.get("right_contact")||t.chat_item.model.trigger("reset_selected_messages")}e.preventDefault()}})),as(window).on("keyup",(e=>{e.shiftKey&&e.ctrlKey||(this.shiftctrl_pressed=null),e.shiftKey&&!e.ctrlKey&&(this.shift_pressed=!0),e.shiftKey||(this.shift_pressed=null)})),this.updateLayout=function(e){e||(e={}),this.updateContainersLayout(),nt.trigger("update_css",e),this.body.$(".ps-container").perfectScrollbar("update")},this.updateContainersLayout=function(){let e,t,i,s,n,a=this.body.$el.width(),o=this.body.$el.height(),r=a>=ns.WIDTH_MEDIUM,c=a<ns.WIDTH_MEDIUM,l=o-506,d={};e=r||!c?1536:c?a-64-20-44:7*(a-64-20)/9,t=s=384,i=e-(t+s),n="100%",c&&(s=t=.264*e<288?288:.264*e,i=e-(t+s)),i<512?(i=e-t,this.right_contact_panel_saveable=!1,d={position:"absolute",right:0,"z-index":499},i-384<128?(s=i,this.right_contact_panel.$el.removeClass("background-click")):(s=384,this.right_contact_panel.$el.addClass("background-click"))):(this.right_contact_panel_saveable=!0,d={position:"static","z-index":0},this.right_contact_panel.$el.removeClass("background-click")),this.right_contact_panel_width=s,this.body.screen.get("right_contact")||(s=0,i=e-t),(this.body.screen.get("notifications")||this.body.screen.get("previous_screen")&&this.body.screen.get("previous_screen").notifications)&&(t=0,i=e),i<768&&(n=i),d.width=s,this.left_panel.$el.switchClass("hidden",this.body.screen.get("notifications")||this.body.screen.get("previous_screen")&&this.body.screen.get("previous_screen").notifications),this.chat_head.$el.switchClass("chat-head-ultra-narrow",i<=650),this.chat_head.$el.switchClass("chat-head-narrow",i<750),this.chat_head.$el.switchClass("chat-head-normal",i<850&&i>=750),this.chat_head.$el.switchClass("chat-head-normal-wide",i<1e3&&i>=850),this.chat_head.$el.switchClass("chat-head-wide",i>1e3),this.main_panel.setCustomCss({width:e}),this.left_panel.setCustomCss({width:t}),this.right_panel.setCustomCss({width:i}),this.right_contact_panel.setCustomCss(d),this.chat_bottom.setCustomCss({width:n}),this.toolbar_view.$el.find(".toolbar-bottom .accounts-wrap .accounts").css({"max-height":l})},this.on("update_layout",this.updateLayout,this),this.body.addScreen("blank",{}),this.body.addScreen("login",{login:{xmpp_login:null}}),this.body.addScreen("settings-modal",{main_overlay:{settings_modal:null}}),this.body.addScreen("add_account",{blur_overlay:null,toolbar:null,login:null}),this.body.addScreen("about",{blur_overlay:null,toolbar:null,main:{wide:{about:null},placeholders:null},roster:null});let e=new this.ViewPath("account.settings_account_modal");this.body.addScreen("account_settings_modal",{main_overlay:{account_settings_modal:e}});let t=new this.ViewPath("chat_item.content.head"),i=new this.ViewPath("chat_item.content"),s=new this.ViewPath("notifications"),n=new this.ViewPath("chat_item.content_placeholder"),a=new this.ViewPath("chat_item.content.bottom"),o=new this.ViewPath("contact.invitation"),r=new this.ViewPath("omemo_item.account.omemo_enable_view"),c=new this.ViewPath("contact.details_view_right"),l=new this.ViewPath("contact.details_view_right_encrypted"),d=new this.ViewPath("model.messages_view"),h=new this.ViewPath("contact.details_view.participants");this.body.addScreen("contacts",{blur_overlay:null,toolbar:null,main:{left:{contacts:null},right:{contact_placeholder:null},right_contact:{},placeholders:null},roster:null}),this.body.addScreen("search",{blur_overlay:null,toolbar:null,main:{wide:{discovering_main:null},placeholders:null},roster:null}),this.body.addScreen("mentions",{blur_overlay:null,toolbar:null,main:{left:{mentions:null},right:{mentions_placeholder:null},right_contact:{},placeholders:null},roster:null}),this.body.addScreen("all-chats",{blur_overlay:null,toolbar:null,main:{left:{chats:null},right:{chat_placeholder:null},right_contact:{},placeholders:null},roster:null}),this.body.addScreen("notifications",{blur_overlay:null,toolbar:null,main:{right:{notifications_body:null}}}),this.right_panel.patchTree=function(e,c){if(is.log(c),void 0!==c.right)return c.show_placeholder?{chat_head:t,chat_body:null,chat_body_placeholder:n,chat_bottom:null}:c.notifications&&"notifications"===c.right?{notifications_body:s}:"message_context"===c.right||"participant_messages"===c.right||"searched_messages"===c.right?{chat_head:t,chat_body:d,chat_body_placeholder:null,chat_bottom:a}:"group_invitation"===c.right?{details:o}:"participants"===c.details_content?{details_content:h}:c.chat_item?{chat_head:t,chat_body:i,chat_body_placeholder:null,chat_bottom:a}:"enable_encryption"===c.right||c.omemo_item?{details:r}:void 0},this.right_contact_panel.patchTree=function(e,t){if(void 0!==t.right_contact)return"contact_details"===t.right_contact?{details:c}:"contact_details_encrypted"===t.right_contact?{details:l}:"participants"===t.details_content?{details_content:h}:void 0},this.body.setScreen("blank"),this.accounts.length?this.body.isScreen("blank")&&this.body.setScreen("all-chats"):this.body.setScreen("login"),nt.trigger("start_accounts")}),nt);const os=nt;var rs=i(25108);let cs=nt.env,ls=cs.constants,ds=cs.utils,hs=cs.$,gs=cs.templates.base,us=cs.Strophe,ps=cs._,ms=cs.libsignal.KeyHelper,_s=cs.libsignal.SignalProtocolAddress,vs=cs.libsignal.SessionBuilder,fs=cs.libsignal.SessionCipher;nt.Peer=Backbone.Model.extend({idAttribute:"jid",initialize:function(e,t){e=e||{},this.account=t.account,this.devices={},this.store=this.account.omemo.store,this.fingerprints=new nt.Fingerprints({model:this}),this.updateDevices(e.devices),this.set({jid:e.jid})},updateDevices:function(e){if(e){for(let t in this.devices)e[t]||(this.account.omemo.removeSession("session"+this.devices[t].address.toString()),delete this.devices[t]);for(let t in e){let i=this.getDevice(t),s=e[t].label;s&&i.set("label",s)}e&&this.account.trigger("peer_devices_updated")}},getDevicesNode:async function(){return this._pending_devices?new Promise(((e,t)=>{this._dfd_devices.done((()=>{e()}))})):(this._pending_devices=!0,this._dfd_devices=new hs.Deferred,new Promise(((e,t)=>{this.account.getConnectionForIQ().omemo.getDevicesNode(this.get("jid"),(t=>{this.updateDevices(this.account.getConnectionForIQ().omemo.parseUserDevices(hs(t))),this._pending_devices=!1,this._dfd_devices.resolve(),e()}),(()=>{this._pending_devices=!1,this._dfd_devices.resolve(),e()}))})))},updateDevicesKeys:async function(){this.getDevicesNode().then((()=>{Object.keys(this.devices).length;for(let e in this.devices){let t=this.devices[e];t.getBundle().then((({pk:e,spk:i,ik:s})=>{t.set("ik",ds.fromBase64toArrayBuffer(s)),t.set("fingerprint",t.generateFingerprint())}))}}))},encrypt:async function(e){let t=[],i=await ds.AES.encrypt(e),s=!0;ps.keys(this.devices).length||await this.getDevicesNode();for(let e in this.devices)t.push(this.devices[e].encrypt(i.keydata));for(let e in this.account.omemo.own_devices)t.push(this.account.omemo.own_devices[e].encrypt(i.keydata));let n=await Promise.all(t);n=n.filter((e=>null!==e));for(let e in this.devices){let t=this.devices[e];null!==t.get("ik")&&(null===t.get("trusted")&&(s="error"),s&&void 0===t.get("trusted")&&(s="none"))}return{keys:n,payload:i.payload,is_trusted:s}},decrypt:async function(e,t,i){return this.getDevice(e).decrypt(t,i)},getDevice:function(e){return this.devices[e]||(this.devices[e]=new nt.Device({jid:this.get("jid"),id:e},{account:this.account,store:this.store,peer:this})),this.devices[e]}}),nt.Peers=Backbone.Collection.extend({model:nt.Peer,initialize:function(e,t){this.collections=[],this.on("add",ps.bind(this.updateInCollections,this,"add")),this.on("change",ps.bind(this.updateInCollections,this,"change"))},addCollection:function(e){this.collections.push(e)},updateInCollections:function(e,t){ps.each(this.collections,(function(i){i.update(t,e)}))}}),nt.Fingerprints=nt.BasicView.extend({className:"modal main-modal fingerprints-wrap",template:gs.fingerprints,ps_selector:".fingerprints-content",ps_settings:{theme:"item-list"},events:{"click .btn-trust":"trustDevice","click .btn-ignore":"ignoreDevice","click .btn-delete":"deleteDevice","click .set-label + div":"editLabel","click .btn-cancel":"close"},_initialize:function(){this.model.own_devices?(this.account=this.model.account,this.omemo=this.model,this.jid=this.account.get("jid"),this.is_own_devices=!0):(this.account=this.model.account,this.omemo=this.account.omemo,this.jid=this.model.get("jid"))},open:function(){this.omemo=this.account.omemo;let e="";if(this.is_own_devices)e=this.account.get("name");else{let t=this.account.contacts.get(this.jid);e=t?t.get("name"):this.jid}this.$(".header").text(nt.getString("omemo__dialog_fingerprints__header",[e])),this.data.set("visible",!0),this.show(),this.$("div.fingerprints-content").html(cs.templates.contacts.preloader()),this.is_own_devices?this.renderOwnDevices():this.renderDevices()},renderDevices:function(){this.model.getDevicesNode().then((()=>{ps.keys(this.model.devices).length;this.updateFingerprints(this.model.devices)})),this.updateOwnFingerprint()},renderOwnDevices:function(){this.omemo.getMyDevices().then((()=>{ps.keys(this.model.own_devices).length;this.updateFingerprints(this.model.own_devices),this.updateOwnFingerprint()}))},render:function(){this.$el.openModal({complete:()=>{this.$el.detach(),this.data.set("visible",!1)}})},editLabel:function(){this.$(".set-label").removeClass("hidden"),this.$(".set-label").focus();let e=e=>{let t=e.target.value.trim();this.saveLabel(t)};this.$(".set-label")[0].onblur=e,this.$("input.set-label")[0].onkeydown=t=>{t.keyCode==ls.KEY_ENTER&&e(t)}},saveLabel:function(e){this.$(".set-label").addClass("hidden"),e!=this.account.settings.get("device_label_text")&&(this.account.settings.save("device_label_text",e),this.account.getConnectionForIQ().omemo.publishDevice(this.omemo.get("device_id"),e,(()=>{this.updateOwnFingerprint()})))},updateFingerprints:async function(e){let t=0,i=ps.keys(e).length,s=new hs.Deferred,n=this.$("div.fingerprints-content");s.done((e=>{e?this.$(".dropdown-button").dropdown({inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,container:this.$(".fingerprints-content")[0],alignment:"left"}):n.html(hs(`<div class="empty-table">${nt.getString("omemo__dialog_fingerprints__text_no_fingerprints")}</div>`)),this.jid==this.account.get("jid")&&e++,this.$(".additional-info").text(nt.getQuantityString("omemo__dialog_fingerprints__text_devices_count",e,[this.jid,e])),n.find(".preloader-wrapper").detach()}));for(let a in e){if(a==this.omemo.get("device_id")){t++,i==t&&s.resolve(n.find("div.row").length);continue}let o=e[a];if(o.get("ik")){let e={},r=o.generateFingerprint(),c=(this.omemo.get("fingerprints")[this.jid]||[])[a],l=c?c.fingerprint!=r?"error":c.trusted?"trust":"ignore":"unknown";"error"===l&&(e.old_fingerprint=c.fingerprint),n.append(this.addRow(o.id,o.get("label"),l,r,e)),t++,i==t&&s.resolve(n.find("div.row").length)}else this.account.getConnectionForIQ().omemo.getBundleInfo({jid:o.jid,id:o.id},(async e=>{let a=hs(e).find(`item[id="${o.id}"] bundle[xmlns="${us.NS.OMEMO}"]`).find("ik").text();if(a){o.set("ik",ds.fromBase64toArrayBuffer(a));let e={},t=o.generateFingerprint(),i=(this.omemo.get("fingerprints")[this.jid]||[])[o.id],s=i?i.fingerprint!=t?"error":i.trusted?"trust":"ignore":"unknown";"error"===s&&(e.old_fingerprint=i.fingerprint),n.append(this.addRow(o.id,o.get("label"),s,t,e))}t++,i==t&&s.resolve(n.find("div.row").length)}),(()=>{t++,i==t&&s.resolve(n.find("div.row").length)}))}},updateOwnFingerprint:async function(){this.$(".this-device-content").html("");let e=this.account.omemo;if(e){let t=e.own_devices[e.get("device_id")];t?t.get("fingerprint")?this.$(".this-device-content").append(this.addRow(t.id,t.get("label"),null,t.get("fingerprint"))):t.get("ik")?(t.set("fingerprint",t.generateFingerprint()),this.$(".this-device-content").append(this.addRow(t.id,t.get("label"),null,t.get("fingerprint")))):t.getBundle().then((({pk:e,spk:i,ik:s})=>{t.set("ik",ds.fromBase64toArrayBuffer(s));let n=t.generateFingerprint();t.get("fingerprint")&&t.get("fingerprint")===n||t.set("fingerprint",n),this.$(".this-device-content").append(this.addRow(t.id,t.get("label"),null,t.get("fingerprint")))})):e.store.getIdentityKeyPair().then((t=>{let i=t.pubKey;33==i.byteLength&&(i=i.slice(1));let s=Array.from(new Uint8Array(i)).map((e=>e.toString(16).padStart(2,"0"))).join("");this.$(".this-device-content").append(this.addRow(e.get("device_id"),this.account.settings.get("device_label_text"),null,s))}))}},close:function(){let e=new hs.Deferred;return this.$el.closeModal({complete:()=>{this.$el.detach(),this.data.set("visible",!1),e.resolve()}}),e.promise()},trustDevice:function(e){let t=hs(e.target).closest("div.row"),i=t.find(".fingerprint").text().replace(/ /g,""),s=t.children(".buttons[data-trust]").attr("data-trust"),n=Number(t.find("div.device-id").text());t.children(".buttons[data-trust]").attr("data-trust","trust"),t.find(".trust-item-wrap").children().attr("data-value","trust").text(nt.getString("omemo__dialog_fingerprints__button_trust")),this.omemo.updateFingerprints(this.jid,n,i,!0);let a=this.is_own_devices?this.account.omemo.own_devices[n]:this.model.devices[n];a&&"trusted"!=s&&("error"===s&&t.find(".old-fingerprint").detach(),a.set("trusted",!0),a.is_session_initiated=!1,a.preKeys=null,this.account.trigger("trusting_updated"),this.account.trigger("device_trusted",a.id,this.jid))},ignoreDevice:function(e){let t=hs(e.target).closest("div.row"),i=t.find(".fingerprint").text().replace(/ /g,""),s=t.children(".buttons[data-trust]").attr("data-trust"),n=Number(t.find("div.device-id").text());t.children(".buttons[data-trust]").attr("data-trust","ignore"),t.find(".trust-item-wrap").children().attr("data-value","ignore").text(nt.getString("omemo__dialog_fingerprints__button_ignore")),this.omemo.updateFingerprints(this.jid,n,i,!1);let a=this.is_own_devices?this.account.omemo.own_devices[n]:this.model.devices[n];a&&"ignore"!=s&&("error"===s&&t.find(".old-fingerprint").detach(),a.set("trusted",!1),a.is_session_initiated=!1,a.preKeys=null,this.account.trigger("trusting_updated"))},addRow:function(e,t,i,s,n){n=n||{};let a,o=!!this.is_own_devices,r=e==this.omemo.get("device_id"),c=n.old_fingerprint;if(s.match(/.{1,8}/g))s=s.match(/.{1,8}/g).join(" ");else{s="",a=nt.getString("omemo__dialog_fingerprints__invalid_fingerprint");let t=this.is_own_devices?this.account.omemo.own_devices[e]:this.model.devices[e];t&&"ignore"!=i&&(i="ignore",this.omemo.updateFingerprints(this.jid,e,s,!1),t.set("trusted",!1),t.is_session_initiated=!1,t.preKeys=null,this.account.trigger("trusting_updated"))}return c&&(c=c.match(/.{1,8}/g).join(" ")),gs.fingerprint_item({id:e,label:t,trust:i,fingerprint:s,delete_button:o,edit_setting:r,old_fingerprint:c,error:a})},deleteDevice:function(e){let t=hs(e.target).closest("div.row"),i=Number(t.find("div.device-id").text());ds.dialogs.ask(nt.getString("omemo__dialog_delete_device__header"),nt.getString("omemo__dialog_delete_device__text",[i]),null,{ok_button_text:nt.getString("omemo__dialog_delete_device__button_delete")}).done((e=>{if(e){t.detach();let e=this.$("div.fingerprints-content").find("div.row").length;e||this.$("div.fingerprints-content").html(hs(`<div class="empty-table">${nt.getString("omemo__dialog_fingerprints__text_no_fingerprints")}</div>`)),this.jid==this.account.get("jid")&&e++,this.$(".additional-info").text(nt.getQuantityString("omemo__dialog_fingerprints__text_devices_count",e,[this.jid,e])),delete this.model.own_devices[i];let s=this.account.getConnectionForIQ();s&&s.omemo&&(delete s.omemo.devices[i],s.omemo.publishDevice(null,null,(()=>{t.detach()})),s.omemo.removeItemFromNode(`${us.NS.OMEMO}:bundles`,i))}}))}}),nt.FingerprintsOwnDevices=nt.BasicView.extend({className:"modal main-modal fingerprints-devices-wrap",template:gs.fingerprints_devices,events:{"click .btn-start-trust-session":"startTrustVerificationOwn","click .btn-trust":"trustDevice","click .btn-ignore":"ignoreDevice","click .btn-cancel":"close"},_initialize:function(){this.account=this.model.account,this.omemo=this.model,this.jid=this.account.get("jid"),this.is_own_devices=!0},open:function(e,t){this.omemo=this.account.omemo,this.device_id=this.account.omemo,this.data.set("visible",!0),this.updateColorScheme(),this.show(),this.renderOwnDevices(e,t)},startTrustVerificationOwn:function(){if(!this.account.omemo||!this.omemo.get("device_id")||!this.account.server_features.get(us.NS.XABBER_NOTIFY))return;let e=uuid(),t=uuid(),i=$iq({type:"set",to:this.account.get("jid"),id:e});i.c("notify",{xmlns:us.NS.XABBER_NOTIFY}),i.c("notification",{xmlns:us.NS.XABBER_NOTIFY}),i.c("forwarded",{xmlns:us.NS.FORWARD}),i.c("message",{to:this.account.get("jid"),from:this.account.get("jid"),type:"chat",id:uuid()}),i.c("authenticated-key-exchange",{xmlns:us.NS.XABBER_TRUST,sid:t,timestamp:Date.now()}).c("verification-start",{"device-id":this.account.omemo.get("device_id"),"to-device-id":this.device_id}).up().up(),i.c("body").t(`Device Verification request from ${this.account.jid} A1`).up(),i.up().up().up(),i.c("fallback",{xmlns:us.NS.XABBER_NOTIFY}).t("device verification fallback text").up(),i.c("addresses",{xmlns:us.NS.ADDRESS}).c("address",{type:"to",jid:this.account.get("jid")}).up().up(),this.account.sendFast(i,(()=>{this.account.omemo.xabber_trust.addVerificationSessionData(t,{verification_started:!0,active_verification_device:{peer_jid:this.account.get("jid")},verification_step:"1a"}),ds.callback_popup_message(nt.getString("trust_verification_started"),5e3),this.close()}))},updateTrustDevice:function(e,t,i,s,n){let a=this.model.own_devices[e];if(a)if(a.get("ik")){let n=a.generateFingerprint(),o=(this.omemo.get("fingerprints")[this.jid]||[])[e],r=o?o.fingerprint!=n?"error":o.trusted?"trust":"ignore":"unknown";this.renderTrustOnFingerprint(r,t,i,s)}else this.account.getConnectionForIQ().omemo.getBundleInfo({jid:a.jid,id:a.id},(async e=>{let n=hs(e).find(`item[id="${a.id}"] bundle[xmlns="${us.NS.OMEMO}"]`).find("ik").text();if(n){a.set("ik",ds.fromBase64toArrayBuffer(n));let e=a.generateFingerprint(),o=(this.omemo.get("fingerprints")[this.jid]||[])[a.id],r=o?o.fingerprint!=e?"error":o.trusted?"trust":"ignore":"unknown";this.renderTrustOnFingerprint(r,t,i,s)}}),(()=>{}));else n&&n()},renderTrustOnFingerprint:function(e,t,i,s){if(t.find(".device-encryption").attr("data-trust",e).addClass("active"),t.attr("data-trust",e),"unknown"===e?(t.find(".device-encryption span").text(nt.getString("settings_account__unverified_device")),t.attr("data-trust-text",nt.getString("settings_account__unverified_device"))):"trust"===e?(t.find(".device-encryption span").text(nt.getString("settings_account__trusted_device")),t.attr("data-trust-text",nt.getString("settings_account__trusted_device"))):"ignore"===e&&(t.find(".device-encryption span").text(nt.getString("settings_account__ignored_device")),t.attr("data-trust-text",nt.getString("settings_account__ignored_device"))),"trust"!==e&&"ignore"!==e){let e=t.closest(".devices-wrap").find(".device-encryption-warning"),i=parseInt(e.attr("data-not-trusted-count"))+1;e.removeClass("hidden").attr("data-not-trusted-count",i),e.find(".device-encryption-warning-label").html(nt.getString("settings_account__encryption_warning_text",[i]))}t.find(".device-encryption .mdi-lock").removeClass("hidden"),i&&i.updateHeight&&i.updateHeight(),s&&s()},renderOwnDevices:function(e,t){this.device_id=e,this.fingerprint=null,t?this.updateOwnFingerprint(e):(this.updateOwnFingerprint(e),this.updateFingerprints(e))},render:function(){this.$el.openModal({complete:()=>{this.$el.detach(),this.data.set("visible",!1)}})},updateFingerprints:async function(e){let t=new hs.Deferred,i=this.$("div.fingerprints-content .other-device-content"),s=this.model.own_devices[e];if(i.html(""),t.done((e=>{rs.log(e),this.$(".dropdown-button").dropdown({inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,container:this.$(".fingerprints-content .other-device-content")[0],alignment:"left"})})),s.get("ik")){let n={},a=s.generateFingerprint(),o=(this.omemo.get("fingerprints")[this.jid]||[])[e],r=o?o.fingerprint!=a?"error":o.trusted?"trust":"ignore":"unknown";"error"===r&&(n.old_fingerprint=o.fingerprint),this.fingerprint=a,i.append(this.addRow(s.id,s.get("label"),r,a,n)),t.resolve()}else this.account.getConnectionForIQ().omemo.getBundleInfo({jid:s.jid,id:s.id},(async e=>{let n=hs(e).find(`item[id="${s.id}"] bundle[xmlns="${us.NS.OMEMO}"]`).find("ik").text();if(n){s.set("ik",ds.fromBase64toArrayBuffer(n));let e={},t=s.generateFingerprint(),a=(this.omemo.get("fingerprints")[this.jid]||[])[s.id],o=a?a.fingerprint!=t?"error":a.trusted?"trust":"ignore":"unknown";"error"===o&&(e.old_fingerprint=a.fingerprint),this.fingerprint=t,i.append(this.addRow(s.id,s.get("label"),o,t,e))}t.resolve()}),(()=>{t.resolve(!0)}))},updateOwnFingerprint:async function(){this.$(".this-device-content").html("");let e=this.account.omemo;if(e){let t=e.own_devices[e.get("device_id")];t?t.get("fingerprint")?this.$(".this-device-content").html(this.addRow(t.id,t.get("label"),null,t.get("fingerprint"))):t.get("ik")?(t.set("fingerprint",t.generateFingerprint()),this.$(".this-device-content").html(this.addRow(t.id,t.get("label"),null,t.get("fingerprint")))):t.getBundle().then((({pk:e,spk:i,ik:s})=>{t.set("ik",ds.fromBase64toArrayBuffer(s));let n=t.generateFingerprint();t.get("fingerprint")&&t.get("fingerprint")===n||t.set("fingerprint",n),this.$(".this-device-content").html(this.addRow(t.id,t.get("label"),null,t.get("fingerprint")))})):e.store.getIdentityKeyPair().then((t=>{let i=t.pubKey;33==i.byteLength&&(i=i.slice(1));let s=Array.from(new Uint8Array(i)).map((e=>e.toString(16).padStart(2,"0"))).join("");this.$(".this-device-content").html(this.addRow(e.get("device_id"),this.account.settings.get("device_label_text"),null,s))}))}},close:function(){let e=new hs.Deferred;return this.$el.closeModal({complete:()=>{this.$el.detach(),this.data.set("visible",!1),e.resolve()}}),e.promise()},trustDevice:function(e){let t=hs(e.target).closest("div.fingerprints-content"),i=t.children(".buttons[data-trust]").attr("data-trust");t.children(".buttons[data-trust]").attr("data-trust","trust"),this.omemo.updateFingerprints(this.jid,this.device_id,this.fingerprint,!0);let s=this.account.omemo.own_devices[this.device_id];s&&"trusted"!=i&&("error"===i&&t.find(".old-fingerprint").detach(),s.set("trusted",!0),s.is_session_initiated=!1,s.preKeys=null,this.account.trigger("trusting_updated"))},ignoreDevice:function(e){let t=hs(e.target).closest("div.fingerprints-content"),i=t.children(".buttons[data-trust]").attr("data-trust");t.children(".buttons[data-trust]").attr("data-trust","ignore"),this.omemo.updateFingerprints(this.jid,this.device_id,this.fingerprint,!1);let s=this.account.omemo.own_devices[this.device_id];s&&"ignore"!=i&&("error"===i&&t.find(".old-fingerprint").detach(),s.set("trusted",!1),s.is_session_initiated=!1,s.preKeys=null,this.account.trigger("trusting_updated"))},addRow:function(e,t,i,s,n){n=n||{};let a,o,r=e==this.omemo.get("device_id"),c=n.old_fingerprint,l=["device-cellphone","device-console","device-desktop","device-tablet","device-web"];if(s.match(/.{1,4}/g))s=s.match(/.{1,4}/g).join(" ");else{s="",a=nt.getString("omemo__dialog_fingerprints__invalid_fingerprint");let t=this.account.omemo.own_devices[e];t&&"ignore"!=i&&(i="ignore",this.omemo.updateFingerprints(this.jid,e,s,!1),t.set("trusted",!1),t.is_session_initiated=!1,t.preKeys=null,this.account.trigger("trusting_updated"))}return c&&(c=c.match(/.{1,4}/g).join(" ")),o=r?"device-web":l[Math.floor(Math.random()*l.length)],gs.fingerprint_devices_item({id:e,label:t,trust:i,svg_icon:o,fingerprint:s,edit_setting:r,old_fingerprint:c,error:a})},deleteDevice:function(e){hs(e.target).closest("div.fingerprints-content");ds.dialogs.ask(nt.getString("omemo__dialog_delete_device__header"),nt.getString("omemo__dialog_delete_device__text",[this.device_id]),null,{ok_button_text:nt.getString("omemo__dialog_delete_device__button_delete")}).done((e=>{if(e){delete this.model.own_devices[this.device_id];let e=this.account.getConnectionForIQ();e&&e.omemo&&(delete e.omemo.devices[this.device_id],e.omemo.publishDevice(null,null,(()=>{this.account.trigger("trusting_updated"),this.close()})),e.omemo.removeItemFromNode(`${us.NS.OMEMO}:bundles`,this.device_id))}}))},updateColorScheme:function(){this.$el.attr("data-color",this.account.settings.get("color")),this.account.settings.once("change:color",this.updateColorScheme,this)}}),nt.Bundle=Backbone.Model.extend({initialize:async function(e,t){this.preKeys=[],this.model=t.model,this.store=t.store,this.model.get("identityKey")?this.getIdentity():await this.generateIdentity(),await this.getPreKeys(),this.model.get("resend_bundle")&&(this.model.publishBundle(this.model.get("device_attrs")),this.model.set("resend_bundle",!1),this.model.set("device_attrs",null))},generateIdentity:function(){return Promise.all([ms.generateIdentityKeyPair(),ms.generateRegistrationId()]).then((e=>{let t=e[0],i=e[1];this.store.put("identityKey",t),this.store.put("registrationId",i),this.model.account.trigger("update_omemo_devices"),this.cacheIdentity(t,i)}))},getIdentity:function(){let e=JSON.parse(this.model.get("identityKey")),t=this.model.get("registrationId"),i=ds.fromBase64toArrayBuffer(e.pubKey),s=ds.fromBase64toArrayBuffer(e.privKey);this.store.put("identityKey",{pubKey:i,privKey:s}),this.store.put("registrationId",t)},cacheIdentity:function(e,t){let i=ds.ArrayBuffertoBase64(e.pubKey),s=ds.ArrayBuffertoBase64(e.privKey);this.model.save("identityKey",JSON.stringify({pubKey:i,privKey:s})),this.model.save("registrationId",t)},generatePreKeys:async function(){let e=[];for(let t=1;t<=ls.PREKEYS_COUNT;t++)e.push(this.generatePreKey(t));return e.push(this.generateSignedPreKey(1)),await Promise.all(e)},getSignedPreKey:async function(){let e=this.model.get("signedPreKey");if(e){let t=ds.fromBase64toArrayBuffer(e.keyPair.pubKey),i=ds.fromBase64toArrayBuffer(e.keyPair.privKey),s=ds.fromBase64toArrayBuffer(e.signature);return{keyPair:{pubKey:t,privKey:i},keyId:e.keyId,signature:s}}return await this.generateSignedPreKey(this.preKeys[0].keyId||1)},getPreKeys:async function(){let e=this.model.prekeys.getAll();if(Object.keys(e).length>=ls.MIN_PREKEYS_COUNT){for(let t in e){let i=e[t],s=i.id,n=JSON.parse(i.key),a=ds.fromBase64toArrayBuffer(n.privKey),o={pubKey:ds.fromBase64toArrayBuffer(n.pubKey),privKey:a};this.preKeys.push({keyId:s,keyPair:o}),this.store.storePreKey(s,o)}this.getUsedPreKeys();let t=await this.getSignedPreKey();this.preKeys.push(t),this.store.storeSignedPreKey(t.keyId,t.keyPair)}else await this.generatePreKeys().then((e=>{this.preKeys=e,this.getUsedPreKeys()}))},getUsedPreKeys:function(){let e=this.model.own_used_prekeys.getAll();if(Object.keys(e).length)for(let t in e){let i=e[t],s=i.id,n=JSON.parse(i.key),a=ds.fromBase64toArrayBuffer(n.privKey),o=ds.fromBase64toArrayBuffer(n.pubKey);this.store.storePreKey(s,{pubKey:o,privKey:a})}},generatePreKey:async function(e){let t=await ms.generatePreKey(e);return this.store.storePreKey(e,t.keyPair),t},generateSignedPreKey:async function(e){let t=await this.store.getIdentityKeyPair(),i=await ms.generateSignedPreKey(t,e);return this.store.storeSignedPreKey(e,i.keyPair),this.cacheSignedPreKey(i),i},cacheSignedPreKey:function(e){let t=ds.ArrayBuffertoBase64(e.keyPair.pubKey),i=ds.ArrayBuffertoBase64(e.keyPair.privKey),s=ds.ArrayBuffertoBase64(e.signature),n={keyPair:{pubKey:t,privKey:i},keyId:e.keyId,signature:s};this.model.save("signedPreKey",n)}}),nt.Prekeys=Backbone.Model.extend({initialize:function(e){this.name=e.name,this.model=e.model},get:function(e){return ps.clone(this.model.get(this.name))[e]},put:function(e){if(!e.id)return;let t=ps.clone(this.model.get(this.name));t[e.id]=e,this.model.save(this.name,t)},getAll:function(){return ps.clone(this.model.get(this.name))},remove:function(e){if(!e)return;let t=ps.clone(this.model.get(this.name));delete t[e],this.model.save(this.name,t)}}),nt.Device=Backbone.Model.extend({initialize:function(e,t){this.account=t.account,this.id=e.id,this.jid=e.jid,this.store=t.store,t.peer&&(this.peer=t.peer),this.preKeys=null,this.address=new _s(e.jid,e.id)},generateFingerprint:function(){let e=this.get("ik");if(e)return 33==e.byteLength&&(e=e.slice(1)),Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join("")},closeSession:function(e){this.account.getConnectionForIQ().omemo.sendOptOut({to:this.jid,reason:e},(()=>{}))},getBundle:async function(){return this._pending_bundle?new Promise(((e,t)=>{this._dfd_bundle.done((({pk:t,spk:i,ik:s})=>{e({pk:t,spk:i,ik:s})})),this._dfd_bundle.fail((()=>{t()}))})):(this._pending_bundle=!0,this._dfd_bundle=new hs.Deferred,new Promise(((e,t)=>{this.account.getConnectionForIQ().omemo.getBundleInfo({jid:this.jid,id:this.id},(i=>{let s=hs(i).find(`item[id="${this.id}"] bundle[xmlns="${us.NS.OMEMO}"]`),n=s.find("spk"),a={id:n.attr("id"),key:n.text(),signature:s.find("spks").text()},o=s.find("ik").text();this.preKeys=[],o||this.set("ik",null),s.find("prekeys pk").each(((e,t)=>{let i=hs(t);this.preKeys.push({id:i.attr("id"),key:i.text()})})),this._pending_bundle=!1;let r=this.getRandomPreKey();r?(this._dfd_bundle.resolve({pk:r,spk:a,ik:o}),e({pk:r,spk:a,ik:o})):(this._dfd_bundle.reject(),t())}),(()=>{this.set("ik",null),this.preKeys=[],this._dfd_bundle.reject(),this._pending_bundle=!1,t()}))})))},getRandomPreKey:function(){let e=this.preKeys.length-1,t=Math.floor(0+Math.random()*(e+1-0));return this.preKeys[t]},decrypt:async function(e,t){try{let i,s=new fs(this.store,this.address);if(t)i=await s.decryptPreKeyWhisperMessage(e,"binary");else{if(!this.store.hasSession(this.address.toString())){let e=this.getCachedSession();e&&await this.store.storeSession(this.address.toString(),e)}i=await s.decryptWhisperMessage(e,"binary")}return i}catch(e){throw e}},getPreKey:function(){return this.account.omemo.used_prekeys.get(String(this.id))},getCachedSession:function(){return this.account.omemo.getSession("session"+this.address.toString())},encrypt:async function(e){try{if(!1===this.get("trusted")&&this.id!=this.account.omemo.get("device_id"))return null;if(!this.store.hasSession(this.address.toString())||!this.is_session_initiated){if(this.preKeys&&!this.preKeys.length)return null;if(this.is_session_initiated=!0,!await this.initSession())return null}let t=this.getSession(),i=await t.encrypt(e);return{preKey:3===i.type,ciphertext:i,deviceId:this.address.getDeviceId()}}catch(e){return rs.log("Error:",e),rs.warn("Could not encrypt data for device with id "+this.address.getDeviceId()),null}},initSession:async function(){let{pk:e,spk:t,ik:i}=await this.getBundle(),s=this.getPreKey(),n=this.id;s&&(!t||t&&JSON.stringify(t)==JSON.stringify(s.spk)&&JSON.stringify(i)==JSON.stringify(s.ik))?e=s.pk:this.account.omemo.used_prekeys.put({id:n,pk:e,spk:t,ik:i}),this.set({pk:ds.fromBase64toArrayBuffer(e.key),ik:ds.fromBase64toArrayBuffer(i)}),this.fingerprint=this.generateFingerprint();let a=this.account.omemo.isTrusted(this.jid,n,this.fingerprint);return this.set("trusted",a),(this.id==this.account.omemo.get("device_id")||!1!==a)&&(this.processPreKey({registrationId:Number(n),identityKey:ds.fromBase64toArrayBuffer(i),signedPreKey:{keyId:Number(t.id),publicKey:ds.fromBase64toArrayBuffer(t.key),signature:ds.fromBase64toArrayBuffer(t.signature)},preKey:{keyId:Number(e.id),publicKey:ds.fromBase64toArrayBuffer(e.key)}}),!0)},processPreKey:function(e){return this.session=new vs(this.store,this.address),this.session.processPreKey(e)},removeSession:function(){this.store.removeSession(this.address.toString()),this.sessionCipher=null},getSession:function(){return this.sessionCipher||(this.sessionCipher=new fs(this.store,this.address)),this.sessionCipher}}),nt.Omemo=Backbone.ModelWithStorage.extend({defaults:{sessions:{},fingerprints:{},prekeys:{},retract_version:0,used_prekeys:{},own_used_prekeys:{},device_id:""},_initialize:function(e,t){this.on("change:device_id",this.onDeviceIdUpdated,this),this.on("destroy",this.onOmemoDestroyed,this),this.own_devices={},this.account=t.account,this.peers=new nt.Peers,this.get("device_id")||this.set("device_id",this.generateDeviceId()),this.store=new nt.SignalProtocolStore,this.account.on("devices_updated",this.onOwnDevicesUpdated,this),this.store.on("prekey_removed",this.removePreKey,this),this.store.on("session_stored",this.cacheSession,this),rs.log("here"),this.xabber_trust=new nt.Trust({id:"xabber-trust"},{omemo:this,storage_name:nt.getStorageName()+"-trusted-devices-"+this.account.get("jid"),account:this.account,fetch:"before"})},storeSessions:function(){let e=this.get("sessions");for(let t in e){let i=e[t];i&&this.store.put(t,i)}},onOmemoDestroyed:function(){this.own_devices&&0!=Object.keys(this.own_devices).length&&this.deleteOwnDevice(),this.cached_messages&&this.cached_messages.destroy(),this.xabber_trust&&this.xabber_trust.destroy(),this.account.connection.deleteHandler(this._msg_handler)},deleteOwnDevice:function(){let e=this.get("device_id");delete this.own_devices[e];let t=this.account.getConnectionForIQ();t&&t.omemo&&(delete t.omemo.devices[e],t.omemo.publishDevice(null,null,(()=>{})),t.omemo.removeItemFromNode(`${us.NS.OMEMO}:bundles`,e))},onConnected:function(){this.prekeys=new nt.Prekeys({name:"prekeys",model:this}),this.used_prekeys=new nt.Prekeys({name:"used_prekeys",model:this}),this.own_used_prekeys=new nt.Prekeys({name:"own_used_prekeys",model:this}),this.cached_messages=new nt.DecryptedMessages({id:"decrypted-messages"},{account:this.account,storage_name:nt.getStorageName()+"-decrypted-messages-"+this.account.get("jid"),fetch:"before"}),this.bundle=new nt.Bundle(null,{store:this.store,model:this}),this.connection=this.account.connection,this.registerMessageHandler(),this.addDevice(),this.xabber_trust.onConnected(),this.account.set("omemo_enabled",!0)},getMyDevices:async function(){return this._pending_own_devices?new Promise(((e,t)=>{this._dfd_own_devices.done((()=>{e()}))})):(this._pending_own_devices=!0,this._dfd_own_devices=new hs.Deferred,new Promise(((e,t)=>{let i=this.account.getConnectionForIQ();i&&i.omemo?i.omemo.getDevicesNode(null,(t=>{i.omemo.devices=i.omemo.parseUserDevices(hs(t)),this._pending_own_devices=!1,this._dfd_own_devices.resolve(),e()}),(function(){this._pending_own_devices=!1,this._dfd_own_devices.resolve(),e()})):this._pending_own_devices=!1})))},updateFingerprints:function(e,t,i,s){let n=ps.clone(this.get("fingerprints"));n[e]||(n[e]={});let a=n[e];ps.isArray(a)&&(a={}),a[t]={fingerprint:i,trusted:s},n[e]=a,this.save("fingerprints",n)},isTrusted:function(e,t,i){let s=ps.clone(this.get("fingerprints"));if(!s[e])return;if(!s[e][t])return;let n=s[e][t];return n?n.fingerprint==i?void 0===n.trusted?void 0:n.trusted:null:void 0},cacheRetractVersion:function(e){rs.log("version "+e),this.save("retract_version",e)},getRetractVersion:function(){return this.get("retract_version")},addDevice:function(){let e=this.get("device_id");if(this.connection){let t=this.account.getConnectionForIQ().omemo;if(Object.keys(t.devices).length){if(t.devices[e])this.publishBundle();else{let i=this.account.settings.get("device_label_text")||`PC, ${ds.getOS()}, ${cs.utils.getBrowser()}`;this.publishBundle({device_id:e,label:i,omemo:t})}}else t.getDevicesNode(null,(i=>{this.account.getConnectionForIQ().omemo.devices=t.parseUserDevices(hs(i));for(let e in this.account.getConnectionForIQ().omemo.devices)this.own_devices[e]||(this.own_devices[e]=new nt.Device({jid:this.account.get("jid"),id:e},{account:this.account,store:this.store}));if(t.devices[e])this.publishBundle();else{let i=this.account.settings.get("device_label_text")||`PC, ${ds.getOS()}, ${cs.utils.getBrowser()}`;this.publishBundle({device_id:e,label:i,omemo:t})}}))}},onDeviceIdUpdated:function(){this.save("device_id",this.get("device_id"))},generateDeviceId:function(){if(this.account.get("x_token")&&this.account.get("x_token").token_uid&&this.account.get("x_token").token_uid.length>=8&&Number(this.account.get("x_token").token_uid.slice(0,8)))return Number(this.account.get("x_token").token_uid.slice(0,8));let e=Math.pow(2,31)-1,t=1+Math.random()*(e+1-1);return Math.floor(t)},updateMessage:function(e,t){this.cached_messages&&this.cached_messages.updateMessage(e,t)},registerMessageHandler:function(){this.account.connection.deleteHandler(this._msg_handler),this._msg_handler=this.account.connection.addHandler((e=>(this.receiveMessage(e),!0)),null,"message",null,null,null,{encrypted:!0})},encrypt:function(e,t,i){let s=this.getPeer(e?e.get("jid"):this.account.get("jid")),n=hs(t.tree()),a=n.children("origin-id").attr("id"),o=us.serialize(n.children("envelope")[0])||"";return e&&a&&this.cached_messages.putMessage(e,a,{envelope:o}),i&&this.cached_messages.putMessageOwn(this.account.get("jid"),a,{envelope:o}),s.encrypt(o).then((i=>{let n=$build("encrypted",{xmlns:us.NS.OMEMO}).c("header",{sid:this.get("device_id"),label:this.account.settings.get("device_label_text")}),a=$build("keys",{jid:this.account.get("jid")});e&&n.c("keys",{jid:e.get("jid")});for(let t of i.keys){let i={rid:t.deviceId,kex:void 0};t.preKey&&(i.kex=!0),e&&s.devices[t.deviceId]?e&&n.c("key",i).t(btoa(t.ciphertext.body)).up():a.c("key",i).t(btoa(t.ciphertext.body)).up()}return e&&n.up(),n.cnode(a.tree()),n.up().up().c("payload").t(ds.ArrayBuffertoBase64(i.payload)),hs(t.tree()).find("envelope").remove(),t.cnode(n.tree()),t.up().c("encryption",{xmlns:us.NS.EXPLICIT_MESSAGE_ENCRYPTION,namespace:us.NS.OMEMO}),t.up().c("store",{xmlns:"urn:xmpp:hints"}).up().c("body").t("This message is encrypted using OMEMO end-to-end encryption.").up(),{message:t,is_trusted:i.is_trusted}})).catch((e=>{rs.error(e)}))},hasChanges:function(e,t){let i=ps.clone(e),s=ps.clone(t);for(let e in i)delete s[e];for(let e in s)delete i[e];return Object.keys(i).length||Object.keys(s).length},receiveHeadlineMessage:function(e){if(!this.account.omemo||this.account.omemo&&this.cid!=this.account.omemo.cid)return;let t=hs(e),i=us.getBareJidFromJid(t.attr("from")),s=t.find("items").attr("node");if(t.find('event[xmlns="'+us.NS.PUBSUB+'#event"]').length){if(s==`${us.NS.OMEMO}:devices`){let e=this.account.getConnectionForIQ().omemo.parseUserDevices(t);if(i===this.account.get("jid")){let t=this.own_devices&&Object.keys(this.own_devices).length,i=this.hasChanges(this.own_devices,e);this.account.getConnectionForIQ().omemo.devices=e;let s=this.get("device_id");this.account.getConnectionForIQ().omemo.devices[s];i&&this.account.trigger("devices_updated"),t&&i&&this.account.trigger("trusting_updated")}else{let t=this.getPeer(i),s=(t.devices&&Object.keys(t.devices).length,this.hasChanges(t.devices,e));t.updateDevices(e),s&&this.account.trigger("trusting_updated")}return}if(s==`${us.NS.OMEMO}:bundles`){let e,s=t.find("items item").first(),n=s.attr("id"),a=s.children(`bundle[xmlns="${us.NS.OMEMO}"]`);if(i===this.account.get("jid")){let t=this.account.getConnectionForIQ().omemo.devices;t&&t[n]&&(this.own_devices[n]||(this.own_devices[n]=new nt.Device({jid:this.account.get("jid"),id:n},{account:this.account,store:this.store})),e=this.own_devices[n])}else{let t=this.peers.get(i);t&&(e=t.devices[n])}if(e){let t=a.find("ik").text(),i=e.get("ik"),s=[];if(!t)return void e.set("ik",null);a.find("prekeys pk").each(((e,t)=>{let i=hs(t);s.push({id:i.attr("id"),key:i.text()})})),e.preKeys=s,e.set("ik",ds.fromBase64toArrayBuffer(t)),e.set("fingerprint",e.generateFingerprint()),i&&(i=ds.ArrayBuffertoBase64(i)),ps.isUndefined(i)||i==t||this.account.trigger("trusting_updated")}}}},receiveChatMessage:function(e,t,i){t=t||{};let s=hs(e);if(s.find(`encrypted[xmlns="${us.NS.OMEMO}"]`).length){s.find('result[xmlns="'+us.NS.MAM+'"]').length&&ps.extend(t,{is_mam:!0,is_archived:!0}),s.find('[xmlns="'+us.NS.CARBONS+'"]').length&&(t.carbon_copied=!0);let n,a=s.find(`encrypted[xmlns="${us.NS.OMEMO}"]`).parent(),o=(us.getBareJidFromJid(a.attr("from"))===this.account.get("jid")?us.getBareJidFromJid(a.attr("to")):us.getBareJidFromJid(a.attr("from")))||t.from_jid,r=this.account.contacts.get(t.conversation?t.conversation:o),c=a.children(`stanza-id[by="${this.account.get("jid")}"]`).attr("id");if(us.getBareJidFromJid(a.attr("from"))!=this.account.get("jid")&&(n=c&&this.cached_messages&&this.cached_messages.getMessage(r,c)),t.notification_msg&&s.children(`notification[xmlns="${us.NS.XABBER_NOTIFY}"]`).length){let e=s.children(`notification[xmlns="${us.NS.XABBER_NOTIFY}"]`).children("forwarded").children("message").children("origin-id").attr("id"),t=this.account.contacts.get(us.getBareJidFromJid(a.attr("from")));e&&t&&(n=this.cached_messages&&this.cached_messages.getMessage(t,e))}if(us.getBareJidFromJid(a.attr("from"))!=this.account.get("jid")&&t.carbon_copied&&t.carbon_direction&&"sent"===t.carbon_direction)return;let l=s.find(`encrypted[xmlns="${us.NS.OMEMO}"] header`).attr("sid");if(t.device_id=l,n&&n.ephemeral_removed)return;if(n&&n.envelope){if(!t.replaced)return t.encrypted=!0,void this.getTrusted(s).then((e=>{if(t.is_trusted=e,s.find("body").remove(),s.find(`encrypted[xmlns="${us.NS.OMEMO}"]`).replaceWith(n.envelope),s.find("displayed-time").length&&(t.displayed_time=s.find("displayed-time").attr("stamp")),t.gallery&&i&&i.resolve(s,t),!t.not_verified_device){let e=this.getPeer(r.get("jid")).devices[l];if(e&&e.get("fingerprint")){let i=this.isTrusted(r.get("jid"),e.id,e.get("fingerprint"));ps.isUndefined(i)&&(t.not_verified_device=l,t.not_verified_device_no_device=!1)}else us.getBareJidFromJid(a.attr("from"))!=this.account.get("jid")&&(t.not_verified_device=l,t.not_verified_device_no_device=!0)}this.account.chats.receiveChatMessage(s[0],t)}));if(t.replaced&&s.find(`encrypted[xmlns="${us.NS.OMEMO}"] header`).attr("sid")==this.get("device_id")){t.encrypted=!0,s.find("body").remove(),s.find(`encrypted[xmlns="${us.NS.OMEMO}"]`).replaceWith(n);let e=this.account.chats.getChat(r,"encrypted");e&&e.messages.createFromStanza(s,t);let i=e.messages.find((e=>e.get("stanza_id")==c||e.get("contact_stanza_id")==c));return void(i&&(i.set("last_replace_time",s.find("replaced").attr("stamp")),e&&e.item_view.updateLastMessage(e.last_message)))}}t.replaced?this.decrypt(e.children("replace").children("message"),t).then((e=>{if(e){t.encrypted=!0,c&&this.cached_messages.putMessage(r,c,{envelope:e}),s.find("body").remove(),s.find(`encrypted[xmlns="${us.NS.OMEMO}"]`).replaceWith(e);let i=this.account.chats.getChat(r,"encrypted");i&&i.messages.createFromStanza(s,t);let n=i.messages.find((e=>e.get("stanza_id")==c||e.get("contact_stanza_id")==c));n&&(n.set("last_replace_time",s.find("replaced").attr("stamp")),i&&i.item_view.updateLastMessage(i.last_message))}})):this.getTrusted(s).then((i=>(t.is_trusted=i,this.decrypt(e,t)))).then((e=>{if(e)t.encrypted=!0,c&&this.cached_messages.putMessage(r,c,{envelope:e}),s.find("body").remove();else{if(null===e)return void this.account.chats.getChat(r,"encrypted").item_view.updateLastMessage();t.not_encrypted=!0,delete t.is_trusted}if(s.find(`encrypted[xmlns="${us.NS.OMEMO}"]`).replaceWith(e),t.gallery&&e&&i?i.resolve(s,t):t.gallery&&i&&i.reject(),!t.not_verified_device){let e=this.getPeer(r.get("jid")).devices[l];if(e&&e.get("fingerprint")){let i=this.isTrusted(r.get("jid"),e.id,e.get("fingerprint"));ps.isUndefined(i)&&(t.not_verified_device=l,t.not_verified_device_no_device=!1)}else us.getBareJidFromJid(a.attr("from"))!=this.account.get("jid")&&(t.not_verified_device=l,t.not_verified_device_no_device=!0)}this.account.chats.receiveChatMessage(s[0],t)})).catch((e=>{"MessageCounterError"!==e.name&&(!t.synced_msg||t.decryption_retry?(t.not_encrypted=!0,delete t.is_trusted,s.find(`encrypted[xmlns="${us.NS.OMEMO}"]`).remove(),t.gallery&&i&&i.reject(),this.account.chats.receiveChatMessage(s[0],t)):this.receiveChatMessage(s[0],ps.extend(t,{decryption_retry:!0})))})),t.gallery&&i&&i.reject()}t.gallery&&i&&i.reject()},checkOwnFingerprints:async function(){return new Promise(((e,t)=>{let i=!0,s=new hs.Deferred,n=0;if(s.done((t=>{e(null===t?"error":void 0===t?"none":t)})),Object.keys(this.own_devices).length){n=Object.keys(this.own_devices).length;for(let e in this.own_devices){let t=this.own_devices[e];if(e!=this.get("device_id"))if(t.get("fingerprint")){let e=this.isTrusted(this.account.get("jid"),t.id,t.get("fingerprint"));void 0===e&&null!==i&&(i=void 0),null===e&&(i=null),n--,!n&&s.resolve(i)}else if(t.get("ik")){t.set("fingerprint",t.generateFingerprint());let e=this.isTrusted(this.account.get("jid"),t.id,t.get("fingerprint"));void 0===e&&null!==i&&(i=void 0),null===e&&(i=null),n--,!n&&s.resolve(i)}else{if(null===t.get("ik")){n--,!n&&s.resolve(i);continue}t.getBundle().then((({pk:e,spk:a,ik:o})=>{t.set("ik",ds.fromBase64toArrayBuffer(o)),t.set("fingerprint",t.generateFingerprint());let r=this.isTrusted(this.account.get("jid"),t.id,t.get("fingerprint"));void 0===r&&null!==i&&(i=void 0),null===r&&(i=null),n--,!n&&s.resolve(i)})).catch((()=>{n--,!n&&s.resolve(i)}))}else n--,!n&&s.resolve(i)}}else this.getMyDevices().then((()=>{this.onOwnDevicesUpdated().then((()=>{n=Object.keys(this.own_devices).length;for(let e in this.own_devices){if(e==this.get("device_id")){n--,!n&&s.resolve(i);continue}let t=this.own_devices[e];if(t.get("fingerprint")){let e=this.isTrusted(this.account.get("jid"),t.id,t.get("fingerprint"));void 0===e&&null!==i&&(i=void 0),null===e&&(i=null),n--,!n&&s.resolve(i)}else n--,!n&&s.resolve(i)}}))}))}))},checkContactFingerprints:function(e){return new Promise(((t,i)=>{let s=!0,n=this.getPeer(e.get("jid")),a=new hs.Deferred,o=0,r=0;if(a.done((i=>{let s=null===i?"error":void 0===i?"none":i;e.trigger("update_trusted",s,n),t({trust:s,unverified_counter:r})})),Object.keys(n.devices).length){o=Object.keys(n.devices).length;for(let t in n.devices){let i=n.devices[t];if(i.get("fingerprint")){let t=this.isTrusted(e.get("jid"),i.id,i.get("fingerprint"));void 0===t&&null!==s&&(s=void 0,r++),null===t&&(s=null,r++),o--,!o&&a.resolve(s)}else if(i.get("ik")){i.set("fingerprint",i.generateFingerprint());let t=this.isTrusted(e.get("jid"),i.id,i.get("fingerprint"));void 0===t&&null!==s&&(s=void 0,r++),null===t&&(s=null,r++),o--,!o&&a.resolve(s)}else{if(null===i.get("ik")){o--,o||(1===Object.keys(n.devices).length&&(s="nil",r++),a.resolve(s));continue}i.getBundle().then((({pk:t,spk:n,ik:c})=>{i.set("ik",ds.fromBase64toArrayBuffer(c)),i.set("fingerprint",i.generateFingerprint());let l=this.isTrusted(e.get("jid"),i.id,i.get("fingerprint"));void 0===l&&null!==s&&(s=void 0,r++),null===l&&(s=null,r++),o--,!o&&a.resolve(s)})).catch((()=>{o--,o||(1===Object.keys(n.devices).length&&(s="nil",r++),a.resolve(s))}))}}}else n.getDevicesNode().then((()=>{o=Object.keys(n.devices).length,!o&&a.resolve("nil");for(let t in n.devices){let i=n.devices[t];i.getBundle().then((({pk:t,spk:c,ik:l})=>{i.set("ik",ds.fromBase64toArrayBuffer(l)),i.set("fingerprint",i.generateFingerprint());let d=this.isTrusted(e.get("jid"),i.id,i.get("fingerprint"));void 0===d&&null!==s&&(s=void 0,r++),null===d&&(1===Object.keys(n.devices).length?(s="nil",r++):(s=null,r++)),o--,!o&&a.resolve(s)})).catch((()=>{o--,o||(1===Object.keys(n.devices).length&&(s="nil",r++),a.resolve(s))}))}}))}))},getTrusted:async function(e){let t=e.find(`encrypted[xmlns="${us.NS.OMEMO}"]`).parent(),i=us.getBareJidFromJid(t.attr("from")),s=us.getBareJidFromJid(t.attr("to")),n=this.account.contacts.mergeContact(i===this.account.get("jid")?s:i),a=await this.checkOwnFingerprints(),o=await this.checkContactFingerprints(n);if(o=o.trust,"error"===a||"none"===a&&"error"!==o)return a;if("error"===o||"none"===o)return o;{let t=e.find("encrypted header").attr("sid"),i=this.getPeer(n.get("jid")).devices[t];if(i&&i.get("fingerprint")){if(!1===this.isTrusted(n.get("jid"),i.id,i.get("fingerprint")))return"untrusted"}return!0}},receiveMessage:function(e){if("headline"===hs(e).attr("type"))return this.receiveHeadlineMessage(e)},parseEncrypted:function(e){let t=e.children("payload"),i=e.children("header"),s=ds.fromBase64toArrayBuffer(t.text());return{sid:Number(i.attr("sid")),keys:i.find("key").get().map((function(e){return{preKey:"true"===hs(e).attr("kex")||"1"===hs(e).attr("kex"),ciphertext:ds.fromBase64toArrayBuffer(hs(e).text()),deviceId:parseInt(hs(e).attr("rid"))}})),payload:s}},getPeer:function(e){return this.peers.get(e)||this.peers.create({jid:e},{account:this.account}),this.peers.get(e)},decrypt:async function(e,t){let i,s=hs(e),n=us.getBareJidFromJid(s.attr("from"))||t.from_jid;if(s.find('result[xmlns="'+us.NS.MAM+'"]').length){let e=s.find("message").first();n=us.getBareJidFromJid(e.attr("from")),i=s.children("result").children("forwarded").children("message").children(`encrypted[xmlns="${us.NS.OMEMO}"]`)}else if(s.find('[xmlns="'+us.NS.CARBONS+'"]').length&&!s.find('private[xmlns="'+us.NS.CARBONS+'"]').length)i=s.children(`[xmlns="${us.NS.CARBONS}"]`).children("forwarded").children("message").children(`encrypted[xmlns="${us.NS.OMEMO}"]`);else if(s.children(`notification[xmlns="${us.NS.XABBER_NOTIFY}"]`).length){let e=s.children(`notification[xmlns="${us.NS.XABBER_NOTIFY}"]`).children("forwarded").children("message");i=e.children(`encrypted[xmlns="${us.NS.OMEMO}"]`),n=us.getBareJidFromJid(e.attr("from"))}else i=s.children(`encrypted[xmlns="${us.NS.OMEMO}"]`);let a=this.parseEncrypted(i),o=this.get("device_id"),r=a.keys.filter((e=>e.deviceId==o))[0];if(!r)return null;let c,l=this.getPeer(n);try{c=await l.decrypt(a.sid,r.ciphertext,r.preKey)}catch(e){throw e}if(!c)return;let d=c.slice(0,32),h=c.slice(32);return ds.AES.decrypt(d,h,a.payload)},toBase64:function(e){return btoa(String.fromCharCode(...new Uint8Array(e)))},publish:function(e,t,i,s){if(!this.account.connection)return;let n=this.account.getConnectionForIQ().omemo,a=[];i.forEach((e=>{let t=e.keyId,i=ds.ArrayBuffertoBase64(e.keyPair.pubKey),s=ds.ArrayBuffertoBase64(e.keyPair.privKey),n=JSON.stringify({pubKey:i,privKey:s});e.signature||(a.push({id:t,key:i}),this.prekeys.put({id:t,key:n}))})),n.configNode((()=>{n.publishBundle({spk:{id:e.keyId,key:ds.ArrayBuffertoBase64(e.keyPair.pubKey)},spks:ds.ArrayBuffertoBase64(e.signature),ik:ds.ArrayBuffertoBase64(t),pks:a,device_id:this.get("device_id")},s)}))},removePreKey:async function(e){if(!this.account)return;let t=this.bundle,i=this.bundle.preKeys.find((t=>t&&t.keyId===e&&!t.signature));if(!i)return;let s=ds.ArrayBuffertoBase64(i.keyPair.pubKey),n=ds.ArrayBuffertoBase64(i.keyPair.privKey),a=JSON.stringify({pubKey:s,privKey:n}),o=this.bundle.preKeys.indexOf(i);t.preKeys.splice(o,1),this.own_used_prekeys.put({id:e,key:a}),this.prekeys.remove(e);let r=Object.keys(this.prekeys.getAll()),c=r.length;if(c&&c<ls.MIN_PREKEYS_COUNT){let e,i=ls.PREKEYS_COUNT-c,s=0,n=0;if(e=Number(r[c-1]),NaN===e&&nt.error("last_id is NaN!"),!ps.isEmpty(this.own_used_prekeys.getAll())){let t=Object.keys(this.own_used_prekeys.getAll());n=t[t.length-1],n=Number(n),n&&n>e&&(e=n)}for(let n=++e;n<e+i;n++)nt.error(n),await this.bundle.generatePreKey(n).then((e=>{t.preKeys.push(e),s++,s===i&&this.account.omemo.publishBundle()}));0===i&&this.account.omemo.publishBundle()}else this.account.omemo.publishBundle()},cacheSession:function(e){let t=e.id,i=e.rec,s=ps.clone(this.get("sessions"));ps.isArray(s)&&(s={}),s[t]=i,this.save("sessions",s)},removeSession:function(e){let t=ps.clone(this.get("sessions"));ps.isArray(t)&&(t={}),delete t[e],this.save("sessions",t)},getSession:function(e){return ps.clone(this.get("sessions"))[e]},publishBundle:async function(e){if(!this.bundle)return;let t=this.bundle.preKeys.find((e=>e.signature)),i=await this.store.getIdentityKeyPair(),s=this.bundle.preKeys;if(nt.error(s),!t||!i)return this.set("resend_bundle",!0),void this.set("device_attrs",e);let n=new hs.Deferred;n.done((()=>{e&&e.omemo.publishDevice(e.device_id,e.label)})),this.account.getConnectionForIQ().omemo.getBundleInfo({jid:this.account.get("jid"),id:this.get("device_id")},(e=>{this.publish(t,i.pubKey,s,(()=>{n.resolve()}))}),(e=>{404==hs(e).find("error").attr("code")&&this.account.getConnectionForIQ().omemo.createBundleNode((()=>{this.publish(t,i.pubKey,s,(()=>{n.resolve()}))}))}))},onOwnDevicesUpdated:async function(){return new Promise(((e,t)=>{let i=this.account.getConnectionForIQ();if(i&&i.omemo&&i.omemo.devices){for(let e in this.own_devices)i.omemo.devices[e]||(this.account.omemo.removeSession("session"+this.own_devices[e].address.toString()),delete this.own_devices[e]);let t=Object.keys(i.omemo.devices).length;for(let s in i.omemo.devices){this.own_devices[s]||(this.own_devices[s]=new nt.Device({jid:this.account.get("jid"),id:s},{account:this.account,store:this.store}));let n=this.own_devices[s],a=i.omemo.devices[s].label;if(n.get("ik"))n.get("fingerprint")?(t--,!t&&e()):(n.set("fingerprint",n.generateFingerprint()),t--,!t&&e());else{if(null===n.get("ik")){t--,!t&&e();continue}n.getBundle().then((({pk:i,spk:s,ik:a})=>{n.set("ik",ds.fromBase64toArrayBuffer(a));let o=n.generateFingerprint();n.get("fingerprint")&&n.get("fingerprint")===o||n.set("fingerprint",o),t--,!t&&e()})).catch((()=>{t--,!t&&e()}))}a&&n.set("label",a)}}}))}}),nt.DecryptedMessages=Backbone.ModelWithStorage.extend({defaults:{messages:{}},getMessage:function(e,t){return(ps.clone(this.get("messages"))[e.get("jid")]||{})[t]},getMessages:function(e){return ps.clone(this.get("messages"))[e.get("jid")]||{}},putMessage:function(e,t,i){let s=ps.clone(this.get("messages")),n=s[e.get("jid")]||{};n[t]=i,s[e.get("jid")]=n,this.save("messages",s)},putMessageOwn:function(e,t,i){let s=ps.clone(this.get("messages")),n=s[e]||{};n[t]=i,s[e]=n,this.save("messages",s)},removeMessage:function(e,t){let i=e.origin_id,s=ps.clone(this.get("messages")),n=s[t.get("jid")]||{};delete n[i],s[t.get("jid")]=n,this.save("messages",s)},updateMessage:function(e,t){let i=e.stanza_id,s=e.origin_id,n=(ps.clone(this.get("messages"))[t.get("jid")]||{})[s];s&&this.removeMessage({origin_id:s},t),i&&this.putMessage(t,i,n)}}),nt.SignalProtocolStore=Backbone.Model.extend({initialize:function(){this.Direction={SENDING:1,RECEIVING:2},this.store={}},getIdentityKeyPair:function(){return Promise.resolve(this.get("identityKey"))},getLocalRegistrationId:function(){return Promise.resolve(this.get("registrationId"))},put:function(e,t){if(void 0===e||void 0===t||null===e||null===t)throw new Error("Tried to store undefined/null");this.store[e]=t},get:function(e,t){if(null==e)throw new Error("Tried to get value for undefined/null key");return e in this.store?this.store[e]:t},remove:function(e){if(null==e)throw new Error("Tried to remove value for undefined/null key");delete this.store[e]},isTrustedIdentity:function(e,t,i){if(null==e)throw new Error("tried to check identity key for undefined/null key");if(!(t instanceof ArrayBuffer))throw new Error("Expected identityKey to be an ArrayBuffer");let s=this.get("identityKey"+e);return void 0===s?Promise.resolve(!0):Promise.resolve(util.toString(t)===util.toString(s))},loadIdentityKey:function(e){if(null==e)throw new Error("Tried to get identity key for undefined/null key");return Promise.resolve(this.get("identityKey"+e))},saveIdentity:function(e,t){if(null==e)throw new Error("Tried to put identity key for undefined/null key");let i=new _s.fromString(e),s=this.get("identityKey"+i.getName());return this.put("identityKey"+i.getName(),t),s&&libsignal.toString(t)!==libsignal.toString(s)?Promise.resolve(!0):Promise.resolve(!1)},loadPreKey:function(e){let t=this.get("25519KeypreKey"+e);return void 0!==t&&(t={pubKey:t.pubKey,privKey:t.privKey}),Promise.resolve(t)},storePreKey:function(e,t){return Promise.resolve(this.put("25519KeypreKey"+e,t))},removePreKey:function(e){this.trigger("prekey_removed",e)},loadSignedPreKey:function(e){let t=this.get("25519KeysignedKey"+e);return void 0!==t&&(t={pubKey:t.pubKey,privKey:t.privKey}),Promise.resolve(t)},storeSignedPreKey:function(e,t){return Promise.resolve(this.put("25519KeysignedKey"+e,t))},removeSignedPreKey:function(e){return Promise.resolve(this.remove("25519KeysignedKey"+e))},loadSession:function(e){return Promise.resolve(this.get("session"+e))},hasSession:function(e){return!!this.get("session"+e)},storeSession:function(e,t){return this.trigger("session_stored",{id:"session"+e,rec:t}),Promise.resolve(this.put("session"+e,t))},removeSession:function(e){return Promise.resolve(this.remove("session"+e))},getAllSessions:function(e){let t=[];for(let i in this.store)i.startsWith("session"+e)&&t.push({id:i,session:this.store[i]});return Promise.resolve(t)},removeAllSessions:function(e){for(let t in this.store)t.startsWith("session"+e)&&delete this.store[t];return Promise.resolve()}}),nt.OMEMOEnablePlaceholder=nt.BasicView.extend({className:"omemo-enable-placeholder",events:{"click .btn-enable":"enableOmemo","click .btn-escape":"closeOmemoPlaceholder"},_initialize:function(e){this.account=e.account,this.updateColorScheme(),this.$el.html(gs.omemo_enable({jid:this.account.get("jid")})),nt.placeholders_wrap.$el.append(this.$el),nt.main_panel.$el.css("padding-bottom",nt.placeholders_wrap.$el.height()),nt.on("update_screen",this.onUpdatedScreen,this),this.account.session.on("change:connected",this.updateConnected,this),this.account.settings.on("change:color",this.updateColorScheme,this),this.account.settings.on("change:omemo",this.onOmemoChange,this)},updateColorScheme:function(){let e=this.account.settings.get("color");this.$el.attr("data-color",e)},onUpdatedScreen:function(){this.account.omemo_enable_placeholder&&this.account.omemo_enable_placeholder.cid===this.cid&&(this.$el.detach(),nt.placeholders_wrap.$el.append(this.$el),nt.main_panel.$el.css("padding-bottom",nt.placeholders_wrap.$el.height()))},updateConnected:function(){this.account.isConnected()||this.close()},enableOmemo:function(){this.account.settings.save("omemo",!0),this.close(),this.account.omemo=new nt.Omemo({id:"omemo"},{account:this.account,storage_name:nt.getStorageName()+"-omemo-settings-"+this.account.get("jid"),fetch:"before"}),setTimeout((()=>{this.account.omemo.onConnected()}),2e3)},closeOmemoPlaceholder:function(){this.account.settings.save("omemo",!1),this.close()},onOmemoChange:function(){this.account.settings.get("omemo")&&this.close()},close:function(){this.trigger("remove")&&this.remove(),this.account.omemo_enable_placeholder=void 0,nt.main_panel.$el.css("padding-bottom",nt.placeholders_wrap.$el.height())}}),nt.Account.addInitPlugin((function(){this.settings.get("omemo")&&(this.omemo=new nt.Omemo({id:"omemo"},{account:this,storage_name:nt.getStorageName()+"-omemo-settings-"+this.get("jid"),fetch:"before"}))})),nt.Account.addConnPlugin((function(){this.settings.get("omemo")&&this.omemo.onConnected()}),!0,!0);const bs=nt;var As=i(25108);let ws=nt.env,ys=(ws.constants,ws.utils),xs=ws.$,ks=ws.templates.base,Cs=ws.Strophe,Ss=ws._;nt.IncomingTrustSessionView=nt.BasicView.extend({className:"modal main-modal incoming-trust-session-modal",template:ks.incoming_trust_session,events:{"click .btn-change":"submit","click .btn-cancel":"cancel"},render:function(e){this.account=e.account,this.trust=e.trust,this.message=e.message,this.contact=e.contact,this.message_options=e.message_options,this.sid=e.sid,this.$el.openModal({ready:this.onRender.bind(this),complete:this.close.bind(this)}),nt.on("verification_session_cancelled",this.onSessionCancel,this)},onRender:function(e){this.message_options&&this.message_options.msg_item&&this.trust.removeAfterHandle(this.message_options.msg_item)},onSessionCancel:function(e){e&&e.sid===this.sid&&this.closeModal()},cancel:function(){this.close()},submit:function(){this.message_options.automated=!1,this.trust.receiveTrustVerificationMessage(this.message,this.message_options),this.close(!0)},onHide:function(){this.$el.detach()},close:function(e){if(!e){let e=uuid(),t=this.contact?this.contact.get("jid"):this.account.get("jid"),i=$iq({type:"set",to:t,id:e});i.c("notify",{xmlns:Cs.NS.XABBER_NOTIFY}),i.c("notification",{xmlns:Cs.NS.XABBER_NOTIFY}),i.c("forwarded",{xmlns:Cs.NS.FORWARD}),i.c("message",{to:t,from:this.account.get("jid"),type:"chat",id:uuid()}),i.c("authenticated-key-exchange",{xmlns:Cs.NS.XABBER_TRUST,sid:this.sid,timestamp:Date.now()}),i.c("verification-failed",{reason:"Session cancelled"}).up().up(),i.c("body").t(`Device Verification Session cancelled from ${this.account.jid}`).up(),i.up().up().up(),i.c("fallback",{xmlns:Cs.NS.XABBER_NOTIFY}).t("device verification Session cancelled fallback text").up(),i.c("no-store",{xmlns:Cs.NS.HINTS}).up(),i.c("no-copy",{xmlns:Cs.NS.HINTS}).up(),i.c("addresses",{xmlns:Cs.NS.ADDRESS}).c("address",{type:"to",jid:t}).up().up(),this.account.sendFast(i,(()=>{if(this.contact){let e=xs(i.tree());e.attr("to",this.account.get("jid")),e.find("notification forwarded message").attr("to",this.account.get("jid")),e.find(`addresses[xmlns="${Cs.NS.ADDRESS}"] address[type="to"]`).attr("jid",this.account.get("jid")),this.account.sendFast(i,(()=>{}))}ys.callback_popup_message(nt.getString("trust_verification_decrypt_failed"),5e3)})),this.trust.clearData(this.sid)}this.closeModal()},closeModal:function(){this.$el.closeModal({complete:this.hide.bind(this)})}}),nt.Trust=Backbone.ModelWithStorage.extend({defaults:{trusted_devices:{},active_trust_sessions:{},ended_sessions:[]},_initialize:function(e,t){this.account=t.account,this.omemo=t.omemo,this.account.omemo=this.omemo,this.account.on("peer_devices_updated",(()=>{this.updateVerificationData()})),this.on("trust_updated change:trusted_devices",this.updateOmemoTrusts,this),this.updateVerificationData()},onConnected:function(){this.populateOwnTrustedDevices()},updateOmemoTrusts:function(){if(As.log(this.omemo),this.account.trigger("xabber_trust_items_updated"),!this.omemo)return;let e=this.get("trusted_devices");Object.keys(e).forEach((t=>{e[t].forEach((e=>{this.omemo.updateFingerprints(t,e.device_id,e.fingerprint,!0)}))}))},cancelSession:function(e,t){if(t){let i=uuid(),s=$iq({type:"set",to:t,id:i});s.c("notify",{xmlns:Cs.NS.XABBER_NOTIFY}),s.c("notification",{xmlns:Cs.NS.XABBER_NOTIFY}),s.c("forwarded",{xmlns:Cs.NS.FORWARD}),s.c("message",{to:t,from:this.account.get("jid"),type:"chat",id:uuid()}),s.c("authenticated-key-exchange",{xmlns:Cs.NS.XABBER_TRUST,sid:e,timestamp:Date.now()}),s.c("verification-failed",{reason:"Session cancelled"}).up().up(),s.c("body").t(`Device Verification Session cancelled from ${this.account.jid}`).up(),s.up().up().up(),s.c("fallback",{xmlns:Cs.NS.XABBER_NOTIFY}).t("device verification Data decryption failed fallback text").up(),s.c("no-store",{xmlns:Cs.NS.HINTS}).up(),s.c("no-copy",{xmlns:Cs.NS.HINTS}).up(),s.c("addresses",{xmlns:Cs.NS.ADDRESS}).c("address",{type:"to",jid:t}).up().up(),this.account.sendFast(s,(()=>{if(t!==this.account.get("jid")){let e=xs(s.tree());e.attr("to",this.account.get("jid")),e.find("notification forwarded message").attr("to",this.account.get("jid")),e.find(`addresses[xmlns="${Cs.NS.ADDRESS}"] address[type="to"]`).attr("jid",this.account.get("jid")),this.account.sendFast(s,(()=>{}))}ys.callback_popup_message(nt.getString("trust_verification_decrypt_failed"),5e3)}))}this.clearData(e)},configNode:function(e,t){let i=$iq({type:"set"}).c("pubsub",{xmlns:Cs.NS.PUBSUB+"#owner"}).c("configure",{node:Cs.NS.PUBSUB_TRUST_SHARING_ITEMS}).form(Cs.NS.PUBSUB_NODE_CONFIG,{"pubsub#max_items":32});this.account.sendIQFast(i,(t=>{e&&e(t)}),(e=>{t&&t(e)}))},createNode:function(e,t){let i=$iq({type:"set"}).c("pubsub",{xmlns:Cs.NS.PUBSUB}).c("create",{node:Cs.NS.PUBSUB_TRUST_SHARING_ITEMS});i.up().c("configure").form(Cs.NS.PUBSUB_NODE_CONFIG,{"pubsub#max_items":32}),this.account.sendIQFast(i,(t=>{e&&e(t)}),(e=>{t&&t(e)}))},publishOwnTrustedDevices:function(e){let t,i=this.get("trusted_devices")[this.account.get("jid")],s=Date.now();if(!i)return;if(t=i.filter((e=>e.is_me)),!t.length)return void As.error("no own device");t=t[0];let n=$iq({type:"set"}).c("pubsub",{xmlns:Cs.NS.PUBSUB}).c("publish",{node:Cs.NS.PUBSUB_TRUST_SHARING_ITEMS}).c("item",{id:this.omemo.get("device_id")}).c("share",{xmlns:Cs.NS.PUBSUB_TRUST_SHARING,usage:Cs.NS.OMEMO}).c("identity",{id:t.device_id}).t(t.fingerprint).up().c("trusted-items",{timestamp:s});i.forEach((e=>{n.c("trust",{timestamp:e.timestamp,xmlns:Cs.NS.PUBSUB_TRUST_SHARING}).t(e.trusted_key).up()}));let a=xs(n.tree()).find("trusted-items");a.find("trust").sort((function(e,t){return+e.getAttribute("timestamp")-+t.getAttribute("timestamp")})).appendTo(a);let o=`${a.attr("timestamp")}`;a.find("trust").each(((e,t)=>{let i=xs(t);o+=`<${i.attr("timestamp")}/${i.text()}`})),this.omemo.store.getIdentityKeyPair().then((t=>{let i=t.privKey;33===i.byteLength&&(i=i.slice(1)),ys.createSha256(o).then((t=>{let s=ys.curveSign(i,new Uint8Array(t));n.up().c("signature").t(ys.ArrayBuffertoBase64(s.buffer)),this.configNode((()=>{this.account.sendIQFast(n,(t=>{e&&e(t)}),(e=>{}))}),(t=>{404==xs(t).find("error").attr("code")&&this.createNode((()=>{this.account.sendIQFast(n,(t=>{e&&e(t)}),(e=>{}))}))}))}))}))},publishContactsTrustedDevices:function(){let e=this.get("trusted_devices"),t=uuid(),i=this.account.get("jid"),s=$msg({to:i,from:this.account.get("jid"),type:"chat",id:t});s.c("origin-id",{id:uuid(),xmlns:"urn:xmpp:sid:0"}).up(),s.c("envelope",{xmlns:Cs.NS.SCE}).c("content"),s.c("body").t(`${this.account.jid} shared his trusted devices`).up(),s.c("share",{xmlns:Cs.NS.PUBSUB_TRUST_SHARING,usage:Cs.NS.OMEMO}),Object.keys(e).forEach((t=>{t!==this.account.get("jid")&&(s.c("trusted-items",{owner:t,timestamp:Date.now()}),e[t].forEach((e=>{s.c("trust",{timestamp:Date.now()}).t(e.trusted_key).up()})),s.up())}));let n=xs(s.tree()).find("share"),a="";n.children("trusted-items").sort((function(e,t){return+e.getAttribute("timestamp")-+t.getAttribute("timestamp")})).appendTo(n),n.children("trusted-items").each(((e,t)=>{let i=xs(t);a+=`${i.attr("timestamp")}`,i.find("trust").sort((function(e,t){return+e.getAttribute("timestamp")-+t.getAttribute("timestamp")})).appendTo(i),i.find("trust").each(((e,t)=>{let i=xs(t);a+=`<${i.attr("timestamp")}/${i.text()}`}))})),this.omemo.store.getIdentityKeyPair().then((e=>{let n=e.privKey;33===n.byteLength&&(n=n.slice(1)),ys.createSha256(a).then((e=>{let a=ys.curveSign(n,new Uint8Array(e));s.c("signature").t(ys.ArrayBuffertoBase64(a.buffer)).up();let o=this.get("trusted_devices")[this.account.get("jid")].filter((e=>e.is_me));o.length&&(o=o[0],s.c("identity",{id:o.device_id}).t(o.fingerprint).up(),s.up().up().c("rpad").t("0".repeat(200).slice(1,Math.floor(198*Math.random()+1))).up(),s.c("from",{jid:this.account.get("jid")}).up().up(),this.omemo.encrypt(null,s,!0).then((e=>{e&&(s=e.message);let n=$iq({type:"set",to:i,id:t});n.c("notify",{xmlns:Cs.NS.XABBER_NOTIFY}),n.c("notification",{xmlns:Cs.NS.XABBER_NOTIFY}),n.c("forwarded",{xmlns:Cs.NS.FORWARD}),n.cnode(s.tree()).up(),n.up().up(),n.c("fallback",{xmlns:Cs.NS.XABBER_NOTIFY}).t("Encrypted notification").up(),n.c("no-store",{xmlns:Cs.NS.HINTS}).up(),n.c("no-copy",{xmlns:Cs.NS.HINTS}).up(),n.c("addresses",{xmlns:Cs.NS.ADDRESS}).c("address",{type:"to",jid:i}).up().up(),this.account.sendFast(n,(()=>{}))})))}))}))},getTrustedDevices:function(e,t){let i=$iq({type:"get",to:e}).c("pubsub",{xmlns:Cs.NS.PUBSUB}).c("items",{node:Cs.NS.PUBSUB_TRUST_SHARING_ITEMS});this.account.sendIQFast(i,(e=>{t&&t(e)}),(e=>{}))},populateOwnTrustedDevices:function(){let e=this.get("trusted_devices");if(Object.keys(e).length)this.publishOwnTrustedDevices();else{let t=this.omemo.own_devices[this.omemo.get("device_id")];if(!t)return void this.account.once("devices_updated",(()=>{this.populateOwnTrustedDevices()}));this.getTrustedKey(t).then((i=>{e[this.account.get("jid")]=[{trusted_key:ys.ArrayBuffertoBase64(i),fingerprint:t.get("fingerprint"),timestamp:Date.now(),device_id:t.get("id"),is_me:!0,public_key:ys.ArrayBuffertoBase64(t.get("ik"))}],this.save("trusted_devices",e),this.trigger("trust_updated"),this.publishOwnTrustedDevices()})).catch((e=>{}))}},getTrustedKey:function(e){return new Promise(((t,i)=>{e.get("fingerprint")||e.set("fingerprint",e.generateFingerprint());let s=xs.Deferred();s.done((()=>{let i=e.get("id")+"::"+e.get("fingerprint"),s=(new TextEncoder).encode(i);t(s)})).fail((()=>{i("no IK and Fingerprints for this device")})),e.get("fingerprint")?s.resolve():(e.once("change:fingerprint",(()=>{s.resolve()})),setTimeout((()=>{s.reject()}),5e3))}))},getVerificationState:function(e){let t,i=e.verification_step;return"1a"===i&&e.active_verification_device&&e.active_verification_device.device_id?t=nt.getString("verification_session_state__request_code_needed"):"1a"===i?t=nt.getString("verification_session_state__request_send"):"1b"===i?t=nt.getString("verification_session_state__request_answered"):"2a"!==i&&"2b"!==i||(t=nt.getString("verification_session_state__request_proceeding")),t},clearData:function(e){let t=this.get("active_trust_sessions");this.account.notifications_content&&this.account.notifications_content.updateTrustSession(e,!0),delete t[e],this.save("active_trust_sessions",t),this.updateVerificationData(),this.addEndedSessionsData(e)},addVerificationSessionData:function(e,t){let i=this.get("active_trust_sessions");i[e]||(i[e]={}),i[e]=Ss.extend(i[e],t),this.save("active_trust_sessions",i),this.updateVerificationData(),this.account.notifications_content&&this.account.notifications_content.updateTrustSession(e)},addEndedSessionsData:function(e){let t=this.get("ended_sessions");t.includes(e)||(t.push(e),nt.trigger("verification_session_cancelled",{sid:e}),this.save("ended_sessions",t))},updateVerificationData:function(){let e=this.get("active_trust_sessions"),t={},i=[];Object.keys(e).forEach((s=>{let n,a,o=e[s],r={},c=o.active_verification_device;c&&c.device_id?(c.is_own_device?(a=this.omemo.own_devices[c.device_id],this.active_sessions_data&&this.active_sessions_data[s]&&a&&!this.active_sessions_data[s].active_verification_device&&i.push({sid:s,jid:this.account.get("jid")})):(n=this.omemo.getPeer(c.peer_jid),a=n.devices[c.device_id],this.active_sessions_data&&this.active_sessions_data[s]&&a&&!this.active_sessions_data[s].active_verification_device&&i.push({sid:s,jid:c.peer_jid})),r.active_verification_device=a):r.active_verification_device="",r.active_verification_code=o.active_verification_code,r.verification_step=o.verification_step,r.current_a_jid=o.current_a_jid,r.a_payload=o.a_payload&&"string"==typeof o.a_payload?ys.fromBase64toArrayBuffer(o.a_payload):"",r.b_payload=o.b_payload&&"string"==typeof o.b_payload?ys.fromBase64toArrayBuffer(o.b_payload):"",r.verification_started=o.verification_started,r.last_sent_message_id=o.last_sent_message_id,r.can_handle_trust=o.can_handle_trust,t[s]=r})),this.active_sessions_data=t,i.forEach((e=>{let t=`trust_omemo_device_appeared-${e.sid}`;this.account.trigger(t,e.jid)}))},parseContactsTrustedDevices:function(e,t){let i=xs(e),s=t.device_id,n=!1,a=0,o=i.find("share trusted-items trust").length,r=i.find("share identity").text();if(this.get("trusted_devices")[this.account.get("jid")].some((e=>e.device_id==s&&e.fingerprint==r))){let e,s,r=i.find("share"),c=r.find("signature").text(),l="";if(!r.find("identity").length)return;if(s=r.find("identity").attr("id"),t.device_id!=s)return;r.children("trusted-items").sort((function(e,t){return+e.getAttribute("timestamp")-+t.getAttribute("timestamp")})).appendTo(r),r.children("trusted-items").each(((e,t)=>{let i=xs(t);l+=`${i.attr("timestamp")}`,i.find("trust").sort((function(e,t){return+e.getAttribute("timestamp")-+t.getAttribute("timestamp")})).appendTo(i),i.find("trust").each(((e,t)=>{let i=xs(t);l+=`<${i.attr("timestamp")}/${i.text()}`}))})),ys.createSha256(l).then((t=>{let i=this.omemo.own_devices[s];if(!i)return;let l=i.get("ik");l&&(33===l.byteLength&&(l=l.slice(1)),e=ys.curveVerify(l,new Uint8Array(t),new Uint8Array(ys.fromBase64toArrayBuffer(c))),e&&r.children("trusted-items").each(((e,t)=>{let i=xs(t),r=i.attr("owner");i.children("trust").each(((e,t)=>{let i=xs(t).text(),c=atob(i).split("::")[0],l=this.addNewContactsDevice(i,r,c,s);a++,l&&(n=!0),a===o&&n&&this.publishContactsTrustedDevices()}))})))}))}},addNewContactsDevice:function(e,t,i,s){let n=this.omemo.getPeer(t);if(!n)return;let a=n.devices[i],o=this.get("trusted_devices");if(a){if(o[t]&&Ss.isArray(o[t])){if(o[t].some((t=>t.trusted_key===e)))return;o[t].push({trusted_key:e,from_device_id:s,trust_reason_jid:this.account.get("jid"),fingerprint:a.get("fingerprint"),device_id:a.get("id"),timestamp:Date.now(),public_key:ys.ArrayBuffertoBase64(a.get("ik"))})}else o[t]=[{trusted_key:e,from_device_id:s,trust_reason_jid:this.account.get("jid"),fingerprint:a.get("fingerprint"),device_id:a.get("id"),timestamp:Date.now(),public_key:ys.ArrayBuffertoBase64(a.get("ik"))}];return this.save("trusted_devices",o),this.trigger("trust_updated"),!0}},getNewTrustedDevices:function(e,t,i,s,n){let a,o=[],r=0;i=i||[];let c=[];if(s||e.forEach(((t,i)=>{let s=atob(t.trusted_key),o=s.split("::")[1],r=s.split("::")[0],c=n?n.devices[r]:this.omemo.own_devices[r];c?e[i]={trusted_key:t.trusted_key,from_device_id:t.from_device_id,trust_reason_jid:t.trust_reason_jid,timestamp:Date.now(),fingerprint:o,device_id:r,public_key:ys.ArrayBuffertoBase64(c.get("ik"))}:(e[i]=null,a=!0)})),e=e.filter(Boolean),i=i.concat(e),!e.length&&!s&&i.length&&a){let e=this.get("trusted_devices");if(n){if(i.length===e[n.get("jid")].length)return;e[n.get("jid")]=i}else{if(i.length===e[this.account.get("jid")].length)return;e[this.account.get("jid")]=i}this.save("trusted_devices",e),this.trigger("trust_updated"),n?this.publishContactsTrustedDevices():this.publishOwnTrustedDevices()}e.forEach((a=>{let l=xs.Deferred();if(l.done((()=>{if(r++,r===e.length)if(o=o.filter(Boolean),o.length)this.getNewTrustedDevices(o,t,i,null,n);else if(!s){let e=this.get("trusted_devices");n?e[n.get("jid")]=i:e[this.account.get("jid")]=i,this.save("trusted_devices",e),this.trigger("trust_updated"),n?this.publishContactsTrustedDevices():this.publishOwnTrustedDevices()}})),a.is_me)return void l.resolve();let d=atob(a.trusted_key);if(2!==d.split("::").length)return void l.resolve();let h=d.split("::")[0],g=d.split("::")[1],u=n?n.devices[h]:this.omemo.own_devices[h];if(!u)return void l.resolve();let p=u.get("ik");if(!p)return void l.resolve();33===p.byteLength&&(p=p.slice(1));let m=t.find(`item[id="${h}"]`);if(!m.length||!m.find("identity").length||m.find("identity").text()!=g)return void l.resolve();let _=m.find("signature").text(),v=m.find("trusted-items");v.find("trust").sort((function(e,t){return+e.getAttribute("timestamp")-+t.getAttribute("timestamp")})).appendTo(v);let f=`${v.attr("timestamp")}`;v.find("trust").each(((e,t)=>{let i=xs(t);f+=`<${i.attr("timestamp")}/${i.text()}`})),ys.createSha256(f).then((e=>{ys.curveVerify(p,new Uint8Array(e),new Uint8Array(ys.fromBase64toArrayBuffer(_)))?(v.find("trust").each(((e,t)=>{let s=xs(t);if(!(i.filter((e=>e.trusted_key===s.text())).length>0||c.includes(s.text()))){let e={trusted_key:s.text(),from_device_id:h,trust_reason_jid:n?n.get("jid"):this.account.get("jid")};o.push(e)}})),l.resolve()):(i=i.filter((e=>e.trusted_key!==a.trusted_key)),c.push(a.trusted_key),l.resolve())}))}))},receivePubSubMessage:function(e){if(Cs.getBareJidFromJid(e.attr("from"))===this.account.get("jid"))this.getTrustedDevices(this.account.get("jid"),(e=>{let t=this.get("trusted_devices")[this.account.get("jid")],i=xs(e);this.getNewTrustedDevices(t,i,null,!0)}));else{let t=Cs.getBareJidFromJid(e.attr("from"));this.get("trusted_devices")[t]&&this.get("trusted_devices")[t].length&&this.getTrustedDevices(t,(e=>{let i=this.get("trusted_devices")[t],s=xs(e),n=this.omemo.getPeer(t);this.getNewTrustedDevices(i,s,null,!0,n)}))}},removeAfterHandle:function(e){if(!e.collection||!e.collection.chat)return;e.collection.chat.retractMessages([e],!1,!0)},handleAcceptedMsgBySid:function(e){let t=this.get("active_trust_sessions");if(t[e]){let i=t[e];i.verification_accepted_msg_xml&&this.account.omemo.xabber_trust.receiveTrustVerificationMessage(i.verification_accepted_msg_xml,{})}},receiveTrustVerificationHeadline:function(e){let t=xs(e).find("authenticated-key-exchange").attr("sid");this.active_sessions_data[t]&&(this.active_sessions_data[t].verification_step||this.clearData(t))},receiveTrustVerificationMessage:function(e,t){if(!this.account.server_features.get(Cs.NS.XABBER_NOTIFY))return;let i=xs(e),s=i.find("authenticated-key-exchange").attr("sid");if("headline"===i.attr("type"))return this.receiveTrustVerificationHeadline(e);let n=this.account.contacts.get(Cs.getBareJidFromJid(i.attr("from")));if(Cs.getBareJidFromJid(i.attr("from"))===this.account.get("jid")&&(n=void 0),As.log(s),As.log(n),As.log(t),t.notification_trust_msg&&t.device_id){if(t.device_id==this.omemo.get("device_id"))return;this.parseContactsTrustedDevices(e,t)}else{if(this.active_sessions_data[s]){if(i.find("verification-successful").length)return void(this.active_sessions_data[s].can_handle_trust?this.handleVerificationSuccess(i,n,s):this.clearData(s));if(i.find("verification-failed").length)return void this.clearData(s)}else if(i.find("verification-failed").length)return void this.clearData(s);if(this.active_sessions_data[s]&&this.active_sessions_data[s].current_a_jid===Cs.getBareJidFromJid(i.attr("to"))&&i.find("verification-accepted").length&&xs("#modals").find(".modal.modal-verification-start").length){xs("#modals").find(".modal.modal-verification-start").find(".btn-cancel").click()}else if(n){if(i.find("verification-start").length&&i.find("verification-start").attr("device-id")&&this.omemo.get("device_id")&&t.automated){if(this.get("ended_sessions").includes(s))return void(t.msg_item&&this.removeAfterHandle(t.msg_item));this.account.omemo.xabber_trust.addVerificationSessionData(s,{});let a=new nt.IncomingTrustSessionView,o=this.omemo.getPeer(n.get("jid"));o.devices[i.find("verification-start").attr("device-id")]||o.updateDevicesKeys(),a.show({account:this.account,trust:this,message:e,message_options:t,contact:n,sid:s})}if(i.find("verification-start").length&&i.find("verification-start").attr("device-id")&&this.omemo.get("device_id")&&!t.automated)return this.account.omemo.xabber_trust.addVerificationSessionData(s,{current_a_jid:n.get("jid"),active_verification_device:{peer_jid:n.get("jid")}}),void this.handleTrustVerificationStart(i,n,null,t.msg_item);if(i.find("verification-accepted").length&&i.find("verification-accepted").attr("device-id")&&i.find("salt").length&&this.active_sessions_data[s]&&this.active_sessions_data[s].verification_started)return this.account.omemo.xabber_trust.addVerificationSessionData(s,{active_verification_device:{device_id:i.find("verification-accepted").attr("device-id"),is_own_device:!1,peer_jid:n.get("jid")}}),t.automated&&(this.account.omemo.xabber_trust.addVerificationSessionData(s,{verification_accepted_msg_xml:e.outerHTML}),t.msg_item&&this.removeAfterHandle(t.msg_item)),void("1a"!==this.active_sessions_data[s].verification_step||t.automated||this.handleTrustVerificationSigned(i,n));if(this.active_sessions_data[s]&&this.active_sessions_data[s].active_verification_code){let e=new xs.Deferred;if(e.done((()=>{i.find("hash").length&&i.find("salt").length&&"1b"===this.active_sessions_data[s].verification_step?this.handleTrustVerificationCodeHash(i,n,t.msg_item):!i.find("hash").length||i.find("salt").length||"2a"!==this.active_sessions_data[s].verification_step||this.handleTrustVerificationFinalHash(i,n,t.msg_item)})),this.active_sessions_data[s].active_verification_device)e.resolve();else{let t=`trust_omemo_device_appeared-${s}`;this.account.on(t,(i=>{i===n.get("jid")&&(this.account.off(t),e.resolve())}))}}}else if(Cs.getBareJidFromJid(i.attr("from"))===this.account.get("jid")&&Cs.getBareJidFromJid(i.attr("to"))===this.account.get("jid")){if(this.active_sessions_data[s]&&this.active_sessions_data[s].last_sent_message_id==i.attr("id"))return;if(i.find("verification-start").length&&i.find("verification-start").attr("device-id")&&i.find("verification-start").attr("to-device-id")&&this.omemo.get("device_id")&&t.automated){if(i.find("verification-start").attr("to-device-id")!=this.omemo.get("device_id"))return;if(this.get("ended_sessions").includes(s))return void(t.msg_item&&this.removeAfterHandle(t.msg_item));this.account.omemo.xabber_trust.addVerificationSessionData(s,{}),(new nt.IncomingTrustSessionView).show({account:this.account,trust:this,message:e,message_options:t,contact:null,sid:s})}if(i.find("verification-start").length&&i.find("verification-start").attr("device-id")&&i.find("verification-start").attr("to-device-id")&&this.omemo.get("device_id")&&!t.automated){if(i.find("verification-start").attr("to-device-id")!=this.omemo.get("device_id"))return;let e=this.omemo.own_devices[i.find("verification-start").attr("to-device-id")];if(this.account.omemo.xabber_trust.addVerificationSessionData(s,{current_a_jid:this.account.get("jid"),active_verification_device:{device_id:e.id,is_own_device:!0,peer_jid:e.jid}}),i.find("verification-start").attr("device-id")==this.omemo.get("device_id"))return;return void this.handleTrustVerificationStart(i,null,!0,t.msg_item)}if(i.find("verification-accepted").length&&i.find("verification-accepted").attr("device-id")&&i.find("salt").length&&this.active_sessions_data[s]&&this.active_sessions_data[s].verification_started){if(i.find("verification-accepted").attr("device-id")==this.omemo.get("device_id"))return;let n=this.omemo.own_devices[i.find("verification-accepted").attr("device-id")];return this.account.omemo.xabber_trust.addVerificationSessionData(s,{active_verification_device:{device_id:n.id,is_own_device:!0,peer_jid:n.jid}}),t.automated&&(this.account.omemo.xabber_trust.addVerificationSessionData(s,{verification_accepted_msg_xml:e.outerHTML}),t.msg_item&&this.removeAfterHandle(t.msg_item)),void("1a"!==this.active_sessions_data[s].verification_step||t.automated||this.handleTrustVerificationSigned(i,null,!0))}if(this.active_sessions_data[s]&&this.active_sessions_data[s].active_verification_code){let e=new xs.Deferred;if(e.done((()=>{i.find("hash").length&&i.find("salt").length&&"1b"===this.active_sessions_data[s].verification_step?this.handleTrustVerificationCodeHash(i,null,t.msg_item):!i.find("hash").length||i.find("salt").length||"2a"!==this.active_sessions_data[s].verification_step||this.handleTrustVerificationFinalHash(i,null,t.msg_item)})),this.active_sessions_data[s].active_verification_device)e.resolve();else{let t=`trust_omemo_device_appeared-${s}`;this.account.on(t,(i=>{i===this.account.get("jid")&&(this.account.off(t),e.resolve())}))}}}}},getDevicesIKsForTrustVerification:function(e){return new Promise(((t,i)=>{e?this.omemo.store.getIdentityKeyPair().then((i=>{let s=new xs.Deferred;s.done((()=>{let s=i.pubKey,n=i.privKey;33==s.byteLength&&(s=s.slice(1)),33==n.byteLength&&(n=n.slice(1));let a=e.get("ik");33==a.byteLength&&(a=a.slice(1)),t({own_pubkey:s,own_privkey:n,device_pubkey:a})})),e.get("ik")&&e.get("ik").byteLength?s.resolve():e.on("change:ik",(()=>{s.resolve()}))})):As.log("no device")}))},handleTrustVerificationStart:function(e,t,i,s){let n,a,o=e.find("verification-start").attr("device-id"),r=e.find("authenticated-key-exchange").attr("sid"),c=ys.randomCode(6);t?(n=this.omemo.getPeer(t.get("jid")),a=n.devices[o]):i&&(a=this.omemo.own_devices[o]),a&&(this.account.omemo.xabber_trust.addVerificationSessionData(r,{}),this.getDevicesIKsForTrustVerification(a).then((e=>{this.generateVerificationArrayBuffer(e.device_pubkey,e.own_privkey,c).then((e=>{let n=uuid(),o=t?t.get("jid"):this.account.get("jid"),l=$iq({type:"set",to:o,id:n});l.c("notify",{xmlns:Cs.NS.XABBER_NOTIFY}),l.c("notification",{xmlns:Cs.NS.XABBER_NOTIFY}),l.c("forwarded",{xmlns:Cs.NS.FORWARD}),l.c("message",{to:o,from:this.account.get("jid"),type:"chat",id:uuid()}),l.c("authenticated-key-exchange",{xmlns:Cs.NS.XABBER_TRUST,sid:r,timestamp:Date.now()}),l.c("verification-accepted",{"device-id":this.account.omemo.get("device_id")}).up(),l.c("salt").c("ciphertext").t(e.data).up().c("iv").t(e.iv).up().up().up(),l.c("body").t(`Device Verification answered from ${this.account.jid} B1`).up(),l.up().up().up(),l.c("fallback",{xmlns:Cs.NS.XABBER_NOTIFY}).t("device verification answer fallback text").up(),l.c("no-store",{xmlns:Cs.NS.HINTS}).up(),l.c("no-copy",{xmlns:Cs.NS.HINTS}).up(),l.c("addresses",{xmlns:Cs.NS.ADDRESS}).c("address",{type:"to",jid:o}).up().up(),this.account.omemo.xabber_trust.addVerificationSessionData(r,{active_verification_device:{device_id:a.id,is_own_device:i,peer_jid:a.jid},active_verification_code:c,b_payload:ys.ArrayBuffertoBase64(e.not_encrypted_payload),verification_step:"1b",last_sent_message_id:n}),s&&this.removeAfterHandle(s),this.account.sendFast(l,(()=>{if(t){let e=xs(l.tree());e.attr("to",this.account.get("jid"));let t=e.find("notification forwarded message");t.attr("to",this.account.get("jid")),t.attr("type","headline"),t.children("body").remove(),t.find("verification-accepted").attr("device-id",""),t.find("salt").remove(),e.find(`addresses[xmlns="${Cs.NS.ADDRESS}"] address[type="to"]`).attr("jid",this.account.get("jid")),this.account.sendFast(l,(()=>{}))}ys.callback_popup_message(nt.getString("trust_verification_traded"),5e3)}))}))})))},handleTrustVerificationSigned:function(e,t,i,s){let n,a,o=e.find("verification-accepted").attr("device-id"),r=e.find("authenticated-key-exchange").attr("sid");this.active_sessions_data[r]&&(t?(n=this.omemo.getPeer(t.get("jid")),a=n.devices[o]):i&&(a=this.omemo.own_devices[o]),a&&this.getDevicesIKsForTrustVerification(a).then((n=>{let o=ys.doCurve(n.own_privkey,n.device_pubkey);if(e.find("salt").length){let c=ys.fromBase64toArrayBuffer(e.find("ciphertext").text()),l=ys.fromBase64toArrayBuffer(e.find("iv").text());ys.dialogs.ask_enter_value(nt.getString("xabber_trust__verification_code_label"),nt.getString("xabber_trust__verification_code_text"),{modal_class:"modal-verification-code",input_placeholder_value:""},{}).done((e=>{if(e){let d=e;this.decryptTrustBuffer(l,c,o,d).then((e=>{this.account.omemo.xabber_trust.addVerificationSessionData(r,{b_payload:ys.ArrayBuffertoBase64(e.decryptedBuffer)}),this.generateVerificationArrayBuffer(n.device_pubkey,n.own_privkey,d).then((n=>{this.getTrustedKey(this.omemo.own_devices[this.omemo.get("device_id")]).then((o=>{this.generateVerificationEncryptedHash(o,d,e.decryptedBuffer,e.encryptionKeyHash).then((e=>{let o=uuid(),c=t?t.get("jid"):this.account.get("jid"),l=$iq({type:"set",to:c,id:o});l.c("notify",{xmlns:Cs.NS.XABBER_NOTIFY}),l.c("notification",{xmlns:Cs.NS.XABBER_NOTIFY}),l.c("forwarded",{xmlns:Cs.NS.FORWARD}),l.c("message",{to:c,from:this.account.get("jid"),type:"chat",id:uuid()}),l.c("authenticated-key-exchange",{xmlns:Cs.NS.XABBER_TRUST,sid:r,timestamp:Date.now()}),l.c("salt").c("ciphertext").t(n.data).up().c("iv").t(n.iv).up().up(),l.c("hash",{xmlns:Cs.NS.HASH,algo:"sha-256"}),l.c("ciphertext").t(e.data).up().c("iv").t(e.iv).up().up().up(),l.c("body").t(`Device Verification Обмен данными from ${this.account.jid} A1`).up(),l.up().up().up(),l.c("fallback",{xmlns:Cs.NS.XABBER_NOTIFY}).t("device verification Обмен данными fallback text").up(),l.c("no-store",{xmlns:Cs.NS.HINTS}).up(),l.c("no-copy",{xmlns:Cs.NS.HINTS}).up(),l.c("addresses",{xmlns:Cs.NS.ADDRESS}).c("address",{type:"to",jid:c}).up().up(),this.account.omemo.xabber_trust.addVerificationSessionData(r,{active_verification_device:{device_id:a.id,is_own_device:i,peer_jid:a.jid},active_verification_code:d,a_payload:ys.ArrayBuffertoBase64(n.not_encrypted_payload),verification_step:"2a",last_sent_message_id:o}),s&&this.removeAfterHandle(s),this.account.sendFast(l,(()=>{ys.callback_popup_message(nt.getString("trust_verification_answered"),5e3)}))}))}))}))})).catch((e=>{As.error(e);let i=uuid(),n=t?t.get("jid"):this.account.get("jid"),a=$iq({type:"set",to:n,id:i});a.c("notify",{xmlns:Cs.NS.XABBER_NOTIFY}),a.c("notification",{xmlns:Cs.NS.XABBER_NOTIFY}),a.c("forwarded",{xmlns:Cs.NS.FORWARD}),a.c("message",{to:n,from:this.account.get("jid"),type:"chat",id:uuid()}),a.c("authenticated-key-exchange",{xmlns:Cs.NS.XABBER_TRUST,sid:r,timestamp:Date.now()}),a.c("verification-failed",{reason:"Data decryption failed"}).up().up(),a.c("body").t(`Device Verification Data decryption failed from ${this.account.jid} A1`).up(),a.up().up().up(),a.c("fallback",{xmlns:Cs.NS.XABBER_NOTIFY}).t("device verification Data decryption failed fallback text").up(),a.c("no-store",{xmlns:Cs.NS.HINTS}).up(),a.c("no-copy",{xmlns:Cs.NS.HINTS}).up(),a.c("addresses",{xmlns:Cs.NS.ADDRESS}).c("address",{type:"to",jid:n}).up().up(),s&&this.removeAfterHandle(s),this.account.sendFast(a,(()=>{if(t){let e=xs(a.tree());e.attr("to",this.account.get("jid")),e.find("notification forwarded message").attr("to",this.account.get("jid")),e.find(`addresses[xmlns="${Cs.NS.ADDRESS}"] address[type="to"]`).attr("jid",this.account.get("jid")),this.account.sendFast(a,(()=>{}))}ys.callback_popup_message(nt.getString("trust_verification_decrypt_failed"),5e3)})),this.clearData(r)}))}else{let e=uuid(),i=t?t.get("jid"):this.account.get("jid"),n=$iq({type:"set",to:i,id:e});n.c("notify",{xmlns:Cs.NS.XABBER_NOTIFY}),n.c("notification",{xmlns:Cs.NS.XABBER_NOTIFY}),n.c("forwarded",{xmlns:Cs.NS.FORWARD}),n.c("message",{to:i,from:this.account.get("jid"),type:"chat",id:uuid()}),n.c("authenticated-key-exchange",{xmlns:Cs.NS.XABBER_TRUST,sid:r,timestamp:Date.now()}),n.c("verification-failed",{reason:"Signature verification cancelled"}).up().up(),n.c("body").t(`Device Verification Signature verification cancelled from ${this.account.jid} A1`).up(),n.up().up().up(),n.c("fallback",{xmlns:Cs.NS.XABBER_NOTIFY}).t("device verification Signature verification cancelled fallback text").up(),n.c("no-store",{xmlns:Cs.NS.HINTS}).up(),n.c("no-copy",{xmlns:Cs.NS.HINTS}).up(),n.c("addresses",{xmlns:Cs.NS.ADDRESS}).c("address",{type:"to",jid:i}).up().up(),s&&this.removeAfterHandle(s),this.account.sendFast(n,(()=>{if(t){let e=xs(n.tree());e.attr("to",this.account.get("jid")),e.find("notification forwarded message").attr("to",this.account.get("jid")),e.find(`addresses[xmlns="${Cs.NS.ADDRESS}"] address[type="to"]`).attr("jid",this.account.get("jid")),this.account.sendFast(n,(()=>{}))}ys.callback_popup_message(nt.getString("trust_verification_decrypt_failed"),5e3)})),this.clearData(r)}}))}})))},handleTrustVerificationCodeHash:function(e,t,i){let s=e.find("authenticated-key-exchange").attr("sid");if(!this.active_sessions_data[s])return;let n=this.active_sessions_data[s].active_verification_device,a=this.active_sessions_data[s].active_verification_code;this.getDevicesIKsForTrustVerification(n).then((o=>{let r=ys.doCurve(o.own_privkey,o.device_pubkey),c=e.find("salt"),l=e.find("hash");if(c.length&&l.length){let o=ys.fromBase64toArrayBuffer(e.find("salt ciphertext").text()),c=ys.fromBase64toArrayBuffer(e.find("hash ciphertext").text()),l=ys.fromBase64toArrayBuffer(e.find("salt iv").text()),d=ys.fromBase64toArrayBuffer(e.find("hash iv").text());this.decryptTrustBuffer(l,o,r,a).then((e=>{this.account.omemo.xabber_trust.addVerificationSessionData(s,{a_payload:ys.ArrayBuffertoBase64(e.decryptedBuffer)}),this.decryptTrustBuffer(d,c,r,a).then((o=>{let r=this.active_sessions_data[s].b_payload,c=(new TextEncoder).encode(a);this.getTrustedKey(n).then((n=>{let l=new Uint8Array([...new Uint8Array(n),...new Uint8Array(c),...new Uint8Array(r)]);ys.createSha256(l).then((n=>{if(ys.ArrayBuffertoBase64(n)===ys.ArrayBuffertoBase64(o.decryptedBuffer))this.getTrustedKey(this.omemo.own_devices[this.omemo.get("device_id")]).then((n=>{this.generateVerificationEncryptedFinalHash(n,a,this.active_sessions_data[s].b_payload,this.active_sessions_data[s].a_payload,e.encryptionKeyHash).then((e=>{let n=uuid(),a=t?t.get("jid"):this.account.get("jid"),o=$iq({type:"set",to:a,id:n});o.c("notify",{xmlns:Cs.NS.XABBER_NOTIFY}),o.c("notification",{xmlns:Cs.NS.XABBER_NOTIFY}),o.c("forwarded",{xmlns:Cs.NS.FORWARD}),o.c("message",{to:a,from:this.account.get("jid"),type:"chat",id:uuid()}),o.c("authenticated-key-exchange",{xmlns:Cs.NS.XABBER_TRUST,sid:s,timestamp:Date.now()}),o.c("hash",{xmlns:Cs.NS.HASH,algo:"sha-256"}),o.c("ciphertext").t(e.data).up().c("iv").t(e.iv).up().up().up(),o.c("body").t(`Device Verification Окончание верификации from ${this.account.jid} B1`).up(),o.up().up().up(),o.c("fallback",{xmlns:Cs.NS.XABBER_NOTIFY}).t("device verification Окончание верификации fallback text").up(),o.c("no-store",{xmlns:Cs.NS.HINTS}).up(),o.c("no-copy",{xmlns:Cs.NS.HINTS}).up(),o.c("addresses",{xmlns:Cs.NS.ADDRESS}).c("address",{type:"to",jid:a}).up().up(),this.account.omemo.xabber_trust.addVerificationSessionData(s,{can_handle_trust:!0,last_sent_message_id:n,verification_step:"2b"}),i&&this.removeAfterHandle(i),this.account.sendFast(o,(()=>{ys.callback_popup_message(nt.getString("trust_verification_answered"),5e3)}))}))}));else{let e=uuid(),n=t?t.get("jid"):this.account.get("jid"),a=$iq({type:"set",to:n,id:e});a.c("notify",{xmlns:Cs.NS.XABBER_NOTIFY}),a.c("notification",{xmlns:Cs.NS.XABBER_NOTIFY}),a.c("forwarded",{xmlns:Cs.NS.FORWARD}),a.c("message",{to:n,from:this.account.get("jid"),type:"chat",id:uuid()}),a.c("authenticated-key-exchange",{xmlns:Cs.NS.XABBER_TRUST,sid:s,timestamp:Date.now()}),a.c("verification-failed",{reason:"Hashes didn't match"}).up().up(),a.c("body").t(`Device Verification Hashes didn't match from ${this.account.jid} B1`).up(),a.up().up().up(),a.c("fallback",{xmlns:Cs.NS.XABBER_NOTIFY}).t("device verification Hashes didn't match fallback text").up(),a.c("no-store",{xmlns:Cs.NS.HINTS}).up(),a.c("no-copy",{xmlns:Cs.NS.HINTS}).up(),a.c("addresses",{xmlns:Cs.NS.ADDRESS}).c("address",{type:"to",jid:n}).up().up(),i&&this.removeAfterHandle(i),this.account.sendFast(a,(()=>{if(t){let e=xs(a.tree());e.attr("to",this.account.get("jid")),e.find("notification forwarded message").attr("to",this.account.get("jid")),e.find(`addresses[xmlns="${Cs.NS.ADDRESS}"] address[type="to"]`).attr("jid",this.account.get("jid")),this.account.sendFast(a,(()=>{}))}ys.callback_popup_message(nt.getString("trust_verification_decrypt_failed"),5e3)})),this.clearData(s)}}))}))})).catch((e=>{let n=uuid(),a=t?t.get("jid"):this.account.get("jid"),o=$iq({type:"set",to:a,id:n});o.c("notify",{xmlns:Cs.NS.XABBER_NOTIFY}),o.c("notification",{xmlns:Cs.NS.XABBER_NOTIFY}),o.c("forwarded",{xmlns:Cs.NS.FORWARD}),o.c("message",{to:a,from:this.account.get("jid"),type:"chat",id:uuid()}),o.c("authenticated-key-exchange",{xmlns:Cs.NS.XABBER_TRUST,sid:s,timestamp:Date.now()}),o.c("verification-failed",{reason:"Data decryption failed"}).up().up(),o.c("body").t(`Device Verification Data decryption failed from ${this.account.jid} B1`).up(),o.up().up().up(),o.c("fallback",{xmlns:Cs.NS.XABBER_NOTIFY}).t("device verification Data decryption failed fallback text").up(),o.c("no-store",{xmlns:Cs.NS.HINTS}).up(),o.c("no-copy",{xmlns:Cs.NS.HINTS}).up(),o.c("addresses",{xmlns:Cs.NS.ADDRESS}).c("address",{type:"to",jid:a}).up().up(),i&&this.removeAfterHandle(i),this.account.sendFast(o,(()=>{if(t){let e=xs(o.tree());e.attr("to",this.account.get("jid")),e.find("notification forwarded message").attr("to",this.account.get("jid")),e.find(`addresses[xmlns="${Cs.NS.ADDRESS}"] address[type="to"]`).attr("jid",this.account.get("jid")),this.account.sendFast(o,(()=>{}))}ys.callback_popup_message(nt.getString("trust_verification_decrypt_failed"),5e3)})),this.clearData(s)}))})).catch((e=>{let n=uuid(),a=t?t.get("jid"):this.account.get("jid"),o=$iq({type:"set",to:a,id:n});o.c("notify",{xmlns:Cs.NS.XABBER_NOTIFY}),o.c("notification",{xmlns:Cs.NS.XABBER_NOTIFY}),o.c("forwarded",{xmlns:Cs.NS.FORWARD}),o.c("message",{to:a,from:this.account.get("jid"),type:"chat",id:uuid()}),o.c("authenticated-key-exchange",{xmlns:Cs.NS.XABBER_TRUST,sid:s,timestamp:Date.now()}),o.c("verification-failed",{reason:"Data decryption failed with error"}).up().up(),o.c("body").t(`Device Verification Data decryption failed with error from ${this.account.jid} B1`).up(),o.up().up().up(),o.c("fallback",{xmlns:Cs.NS.XABBER_NOTIFY}).t("device verification Data decryption failed with error fallback text").up(),o.c("no-store",{xmlns:Cs.NS.HINTS}).up(),o.c("no-copy",{xmlns:Cs.NS.HINTS}).up(),o.c("addresses",{xmlns:Cs.NS.ADDRESS}).c("address",{type:"to",jid:a}).up().up(),i&&this.removeAfterHandle(i),this.account.sendFast(o,(()=>{if(t){let e=xs(o.tree());e.attr("to",this.account.get("jid")),e.find("notification forwarded message").attr("to",this.account.get("jid")),e.find(`addresses[xmlns="${Cs.NS.ADDRESS}"] address[type="to"]`).attr("jid",this.account.get("jid")),this.account.sendFast(o,(()=>{}))}ys.callback_popup_message(nt.getString("trust_verification_decrypt_failed"),5e3)})),this.clearData(s)}))}}))},handleTrustVerificationFinalHash:function(e,t,i){let s=e.find("authenticated-key-exchange").attr("sid");if(!this.active_sessions_data[s])return;let n=this.active_sessions_data[s].active_verification_device,a=this.active_sessions_data[s].active_verification_code;this.getDevicesIKsForTrustVerification(n).then((o=>{As.log(o);let r=ys.doCurve(o.own_privkey,o.device_pubkey);if(e.find("hash").length){let o=ys.fromBase64toArrayBuffer(e.find("hash ciphertext").text()),c=ys.fromBase64toArrayBuffer(e.find("hash iv").text());this.decryptTrustBuffer(c,o,r,a).then((e=>{let o=(new TextEncoder).encode(a);this.getTrustedKey(n).then((a=>{let r=new Uint8Array([...new Uint8Array(a),...new Uint8Array(o),...new Uint8Array(this.active_sessions_data[s].b_payload),...new Uint8Array(this.active_sessions_data[s].a_payload)]);ys.createSha256(r).then((a=>{if(ys.ArrayBuffertoBase64(a)===ys.ArrayBuffertoBase64(e.decryptedBuffer))i&&this.removeAfterHandle(i),this.sendTrustedDevices(t,n,s);else{let e=uuid(),n=t?t.get("jid"):this.account.get("jid"),a=$iq({type:"set",to:n,id:e});a.c("notify",{xmlns:Cs.NS.XABBER_NOTIFY}),a.c("notification",{xmlns:Cs.NS.XABBER_NOTIFY}),a.c("forwarded",{xmlns:Cs.NS.FORWARD}),a.c("message",{to:n,from:this.account.get("jid"),type:"chat",id:uuid()}),a.c("authenticated-key-exchange",{xmlns:Cs.NS.XABBER_TRUST,sid:s,timestamp:Date.now()}),a.c("verification-failed",{reason:"Hashes didn't match in final stanza"}).up().up(),a.c("body").t(`Device Verification Hashes didn't match in final stanza from ${this.account.jid} A1`).up(),a.up().up().up(),a.c("fallback",{xmlns:Cs.NS.XABBER_NOTIFY}).t("device verification Hashes didn't match in final stanza fallback text").up(),a.c("no-store",{xmlns:Cs.NS.HINTS}).up(),a.c("no-copy",{xmlns:Cs.NS.HINTS}).up(),a.c("addresses",{xmlns:Cs.NS.ADDRESS}).c("address",{type:"to",jid:n}).up().up(),i&&this.removeAfterHandle(i),this.account.sendFast(a,(()=>{if(t){let e=xs(a.tree());e.attr("to",this.account.get("jid")),e.find("notification forwarded message").attr("to",this.account.get("jid")),e.find(`addresses[xmlns="${Cs.NS.ADDRESS}"] address[type="to"]`).attr("jid",this.account.get("jid")),this.account.sendFast(a,(()=>{}))}ys.callback_popup_message(nt.getString("trust_verification_decrypt_failed"),5e3)})),this.clearData(s)}}))}))}))}}))},decryptTrustBuffer:async function(e,t,i,s){let n=await ys.createSha256(s),a=new Uint8Array([...new Uint8Array(i),...new Uint8Array(n)]),o=await ys.createSha256(a),r=await window.crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!0,["decrypt"]);return{decryptedBuffer:await window.crypto.subtle.decrypt({name:"AES-CBC",iv:e},r,t),encryptionKeyHash:o}},generateVerificationArrayBuffer:async function(e,t,i){let s,n=window.crypto.getRandomValues(new Uint8Array(32)).buffer,a=window.crypto.getRandomValues(new Uint8Array(16)),o=ys.doCurve(t,e),r=await ys.createSha256(i),c=new Uint8Array([...new Uint8Array(o),...new Uint8Array(r)]),l=await ys.createSha256(c),d=await window.crypto.subtle.importKey("raw",l,{name:"AES-CBC"},!0,["encrypt"]);return s=await window.crypto.subtle.encrypt({name:"AES-CBC",iv:a},d,n),{data:ys.ArrayBuffertoBase64(s),iv:ys.ArrayBuffertoBase64(a),not_encrypted_payload:n}},generateVerificationEncryptedHash:async function(e,t,i,s){let n=window.crypto.getRandomValues(new Uint8Array(16)),a=(new TextEncoder).encode(t),o=new Uint8Array([...new Uint8Array(e),...new Uint8Array(a),...new Uint8Array(i)]),r=await ys.createSha256(o),c=await window.crypto.subtle.importKey("raw",s,{name:"AES-CBC"},!0,["encrypt"]),l=await window.crypto.subtle.encrypt({name:"AES-CBC",iv:n},c,r);return{data:ys.ArrayBuffertoBase64(l),iv:ys.ArrayBuffertoBase64(n)}},generateVerificationEncryptedFinalHash:async function(e,t,i,s,n){let a=window.crypto.getRandomValues(new Uint8Array(16)),o=(new TextEncoder).encode(t),r=new Uint8Array([...new Uint8Array(e),...new Uint8Array(o),...new Uint8Array(i),...new Uint8Array(s)]),c=await ys.createSha256(r),l=await window.crypto.subtle.importKey("raw",n,{name:"AES-CBC"},!0,["encrypt"]),d=await window.crypto.subtle.encrypt({name:"AES-CBC",iv:a},l,c);return{data:ys.ArrayBuffertoBase64(d),iv:ys.ArrayBuffertoBase64(a),not_encrypted_hash_buffer:c}},sendVerificationSuccess:async function(e,t){let i=uuid(),s=$iq({type:"set",to:e,id:i});s.c("notify",{xmlns:Cs.NS.XABBER_NOTIFY}),s.c("notification",{xmlns:Cs.NS.XABBER_NOTIFY}),s.c("forwarded",{xmlns:Cs.NS.FORWARD}),s.c("message",{to:e,from:this.account.get("jid"),type:"chat",id:uuid()}),s.c("authenticated-key-exchange",{xmlns:Cs.NS.XABBER_TRUST,sid:t,timestamp:Date.now()}),s.c("verification-successful").up().up(),s.c("body").t(`Device Verification was successful from ${this.account.jid} A1`).up(),s.up().up().up(),s.c("fallback",{xmlns:Cs.NS.XABBER_NOTIFY}).t("device verification Verification was successful fallback text").up(),s.c("no-store",{xmlns:Cs.NS.HINTS}).up(),s.c("no-copy",{xmlns:Cs.NS.HINTS}).up(),s.c("addresses",{xmlns:Cs.NS.ADDRESS}).c("address",{type:"to",jid:e}).up().up(),this.account.sendFast(s,(()=>{if(As.error(e),e!==this.account.get("jid")){let e=xs(s.tree());e.attr("to",this.account.get("jid")),e.find("notification forwarded message").attr("to",this.account.get("jid")),e.find(`addresses[xmlns="${Cs.NS.ADDRESS}"] address[type="to"]`).attr("jid",this.account.get("jid")),this.account.sendFast(s,(()=>{}))}As.log(s.tree()),this.clearData(t),ys.callback_popup_message(nt.getString("trust_verification_verification_succeded"),5e3)}))},sendTrustedDevices:function(e,t,i){this.getTrustedKey(t).then((s=>{let n=ys.ArrayBuffertoBase64(s),a=this.get("trusted_devices"),o=e?e.get("jid"):this.account.get("jid");a[o]&&Ss.isArray(a[o])?a[o].some((e=>e.trusted_key===n))||a[o].push({trusted_key:n,fingerprint:t.get("fingerprint"),device_id:t.get("id"),timestamp:Date.now(),after_trust:!0,public_key:ys.ArrayBuffertoBase64(t.get("ik"))}):a[o]=[{trusted_key:n,fingerprint:t.get("fingerprint"),device_id:t.get("id"),timestamp:Date.now(),after_trust:!0,public_key:ys.ArrayBuffertoBase64(t.get("ik"))}],this.save("trusted_devices",a),this.trigger("trust_updated"),this.sendVerificationSuccess(o,i),this.publishOwnTrustedDevices((()=>{this.publishContactsTrustedDevices((()=>{}))}))}))},handleVerificationSuccess:function(e,t,i){if(!this.active_sessions_data[i])return;let s=this.active_sessions_data[i].active_verification_device;this.active_sessions_data[i].active_verification_code;this.getTrustedKey(s).then((e=>{let n=ys.ArrayBuffertoBase64(e),a=this.get("trusted_devices"),o=t?t.get("jid"):this.account.get("jid");a[o]&&Ss.isArray(a[o])?a[o].some((e=>e.trusted_key===n))||a[o].push({trusted_key:n,fingerprint:s.get("fingerprint"),device_id:s.get("id"),timestamp:Date.now(),after_trust:!0,public_key:ys.ArrayBuffertoBase64(s.get("ik"))}):a[o]=[{trusted_key:n,fingerprint:s.get("fingerprint"),device_id:s.get("id"),timestamp:Date.now(),after_trust:!0,public_key:ys.ArrayBuffertoBase64(s.get("ik"))}],this.save("trusted_devices",a),this.trigger("trust_updated"),this.publishOwnTrustedDevices((()=>{this.publishContactsTrustedDevices((()=>{})),this.clearData(i)}))}))}});const $s=nt;var Is=i(25108);let Es=nt.env,Ts=Es.constants,Ms=Es.templates.notifications,Ls=Es.utils,Bs=Es.$,Ns=(Es.$iq,Es.$msg,Es.Strophe),js=Es._,Rs=Es.moment,Os=(Es.uuid,e=>Ls.pretty_datetime(e,("ru-RU"==nt.settings.language||"default"==nt.settings.language&&"ru-RU"==nt.get("default_language"))&&"D MMMM YYYY HH:mm:ss"));nt.NotificationsBodyContainer=nt.Container.extend({className:"notifications-body-container"}),nt.NotificationsView=nt.BasicView.extend({className:"notifications-content-wrap",template:Ms.notifications_view,avatar_size:Ts.AVATAR_SIZES.SYNCHRONIZE_ACCOUNT_ITEM,events:{"click .notifications-account-filter-content .filter-item-wrap":"selectAccount","click .cancel-session":"cancelTrustSession","click .enter-code":"enterCode"},_initialize:function(){return this.notifications_chats=[],nt.accounts.on("list_changed connected_list_changed notification_chat_created account_color_updated add change:enabled destroy",this.updateAccountsFilter,this),this},render:function(e){this.updateAccountsFilter()},onShowNotificationsTab:function(){this.account&&this.account.omemo&&this.current_content&&this.current_content.onShowNotificationsTab()},cancelTrustSession:function(e){if(!this.account||!this.account.omemo)return;let t=Bs(e.target).closest(".notification-trust-session");t.attr("data-sid")&&this.account.omemo.xabber_trust&&this.account.omemo.xabber_trust.cancelSession(t.attr("data-sid"),t.attr("data-jid"))},enterCode:function(e){if(!this.account||!this.account.omemo)return;let t=Bs(e.target).closest(".notification-trust-session");t.attr("data-sid")&&this.account.omemo.xabber_trust&&this.account.omemo.xabber_trust.handleAcceptedMsgBySid(t.attr("data-sid"))},updateAccountsFilter:function(){let e=nt.accounts.enabled;if(e=e.filter((e=>e.server_features.get(Ns.NS.XABBER_NOTIFY))),this.$(".notifications-account-filter").switchClass("hidden",1===e.length||!e.length),e.length)try{this.$(".notifications-account-filter-content").empty(),js.each(e,(e=>{this.$(".notifications-account-filter-content").append(this.renderAccountItem(e))})),this.$(".notifications-account-filter-content .filter-item-wrap").first().addClass("selected-filter"),this.account=e[0],this.updateCurrentNotifications()}catch(e){Is.error(e)}else if(!nt.accounts.enabled.length)if("notifications"===nt.body.screen.get("name"))nt.toolbar_view.showAllChats(null,!0);else if(nt.body.screen.get("previous_screen")&&"notifications"===nt.body.screen.get("previous_screen").name){this.$el.detach(),nt.toolbar_view.$(".toolbar-item:not(.account-item):not(.toolbar-logo)").removeClass("active");let e=nt.body.screen.get("previous_screen");e.open_all_chats=!0,nt.body.screen.set("previous_screen",e)}},renderAccountItem:function(e){return Bs(Ms.account_filter_item({jid:e.get("jid"),color:e.settings.get("color")}))},selectAccount:function(e){let t=Bs(e.target).closest(".filter-item-wrap");t.attr("data-jid")?(this.$(".notifications-account-filter-content .filter-item-wrap").removeClass("selected-filter"),t.addClass("selected-filter"),this.account=nt.accounts.connected.filter((e=>e.get("jid")===t.attr("data-jid"))),this.account.length&&(this.account=this.account[0],this.updateCurrentNotifications())):t.remove()},updateCurrentNotifications:function(){let e;if(this.account){if(!nt.accounts.enabled.length||!nt.accounts.connected.length)return;let t=this.account.chats.filter((e=>e.get("jid")===this.account.server_features.get(Ns.NS.XABBER_NOTIFY).get("from")&&e.get("notifications")));if(t.length&&(t=t[0]),!t||!t.item_view)return void Is.log("no chat!");if(this.notifications_chats.some((e=>e.account.get("jid")===t.account.get("jid")))?(e=this.notifications_chats.filter((e=>e.account.get("jid")===t.account.get("jid"))),e.length&&(e=e[0])):(e=new nt.NotificationsChatContentView({chat_item:t.item_view}),this.account.notifications_content=e,this.notifications_chats.push(e),e.data.set("notification_content",!0)),e){if(this.current_content){if(this.current_content.account.get("jid")===e.account.get("jid"))return;this.current_content.hide()}this.$(".notifications-content").html(""),this.current_content=e,this.current_content.show()}}}}),nt.NotificationsChatContentView=nt.ChatContentView.extend({onShow:function(e){nt.notifications_view.$(".notifications-content").append(this.$el),this.onScroll(),this.$(".chat-content .notification-sessions-wrap").length||this.addTrustSessionsContainer()},isVisible:function(){let e=!1;return nt.notifications_view&&nt.notifications_view.current_content&&nt.notifications_view.current_content.account.get("jid")===this.account.get("jid")&&nt.notifications_body.data.get("visible")&&(e=!0),e},onHide:function(e){this.$el.detach()},updateCounter:function(){},onShowNotificationsTab:function(){let e=this.model.get("const_unread");if(e){this.model.set("const_unread",0),this.model.get("unread")&&this.readMessages(),e--;for(let t=0;t<e;t++){let e=this.$(".chat-message:not(.unread-message-background)");e.length&&e.first().addClass("unread-message-background")}}},readVisibleMessages:function(e){let t=e?this.model.messages_view:this;if(t.isVisible()&&t.$(".chat-message.unread-message").length&&nt.get("focused")&&!nt.get("idle")){let i;t.$(".chat-message.unread-message").each(((e,s)=>{if(Bs(s).isVisibleInContainer(t.$(".chat-content")))return i=s,!1})),i&&this.readMessage(this.model.messages.get(Bs(i).data("uniqueid")),Bs(i),e)}},onChangedReadState:function(e){let t=e.get("is_unread"),i=e.get("synced_from_server"),s=e.get("is_unread_archived"),n=e.get("missed_msg"),a=this.$(`.chat-message[data-uniqueid="${e.get("unique_id")}"]`);t?(s||i||n||this.model.messages_unread.add(e),e.get("was_readen")||(a.addClass("unread-message"),a.addClass("unread-message-background")),this.model.recountUnread()):((!s&&!i&&!n||this.model.messages_unread.indexOf(e)>-1)&&this.model.messages_unread.remove(e),e.set("was_readen",!0),a.removeClass("unread-message"),this.model.recountUnread(),e.get("muted")||nt.recountAllMessageCounter(),e.get("ephemeral_timer")&&(e.set("displayed_time",new Date),e.collection.checkEphemeralTimers()))},readMessage:function(e,t,i){if(clearTimeout(this._read_last_message_timeout),this._read_last_message_timeout=setTimeout((()=>{if(this.model.sendMarker(e.get("msgid"),"displayed",e.get("stanza_id"),e.get("contact_stanza_id"),e.get("encrypted")&&e.get("ephemeral_timer")),this.model.set("last_read_msg",e.get("stanza_id")),this.model.set("prev_last_read_msg",e.get("stanza_id")),i){let e=js.clone(this.account.context_messages.models).filter((e=>Boolean(e.get("is_unread"))||Boolean(e.get("is_unread_archived"))));js.each(e,(e=>{let t=this.model.messages.find((t=>t.get("stanza_id")==e.get("stanza_id")||t.get("contact_stanza_id")==e.get("stanza_id")));t&&(e.set("is_unread",t.get("is_unread")),e.set("is_unread_archived",t.get("is_unread_archived")))}))}nt.toolbar_view.recountAllMessageCounter()}),1e3),e.get("is_unread_archived")||this.model.last_message&&e.get("unique_id")===this.model.last_message.get("unique_id")||this.model.get("const_unread")){let t=js.clone(this.model.messages.models).filter((e=>Boolean(e.get("is_unread")))),i=0;js.each(t,(t=>{t.get("timestamp")<=e.get("timestamp")&&(t.set("is_unread",!1),i++)})),i=this.model.get("const_unread")-i,i<0&&(i=0),this.model.set("unread",0),this.model.set("const_unread",i)}else{let t=js.clone(this.model.messages_unread.models);js.each(t,(t=>{t.get("timestamp")<=e.get("timestamp")&&t.set("is_unread",!1)}))}nt.toolbar_view.recountAllMessageCounter()},removeMessage:function(e){let t,i,s;if(e instanceof nt.Message)t=e,s=this.$(`.chat-message[data-uniqueid="${e.get("unique_id")}"]`),this.bottom.content_view&&(i=this.bottom.content_view.$(`.chat-message[data-uniqueid="${e.get("unique_id")}"]`));else{if(i=e,!i.length)return;t=this.model.messages.get(i.data("uniqueid"))}t&&t.destroy(),s&&this.removeMessageFromDOM(s),i&&i!==s&&this.removeMessageFromDOM(i)},addTrustSessionsContainer:function(){this.$(".chat-content").prepend(Bs(Ms.current_verification_sessions())),this.account.omemo&&this.account.omemo.xabber_trust&&this.updateAllTrustSessions()},updateAllTrustSessions:function(){let e=this.account.omemo.xabber_trust.get("active_trust_sessions");this.$(".notification-trust-session").remove(),Object.keys(e).forEach((t=>{let i=e[t],s={jid:null,device_id:null,sid:t,state:this.account.omemo.xabber_trust.getVerificationState(i),code:i.active_verification_code,is_enter_code:null};i.active_verification_device&&(s.jid=i.active_verification_device.peer_jid,s.device_id=i.active_verification_device.device_id),"1a"===i.verification_step&&i.verification_accepted_msg_xml&&(s.is_enter_code=!0),this.$(".notification-sessions-wrap").append(Bs(Ms.verification_session(s)))}))},updateTrustSession:function(e,t){let i=this.account.omemo.xabber_trust.get("active_trust_sessions")[e];if(this.$(`.notification-trust-session[data-sid="${e}"]`).remove(),t)return;let s={jid:null,device_id:null,sid:e,state:this.account.omemo.xabber_trust.getVerificationState(i),code:i.active_verification_code,is_enter_code:null};i.active_verification_device&&(s.jid=i.active_verification_device.peer_jid,s.device_id=i.active_verification_device.device_id),"1a"===i.verification_step&&i.verification_accepted_msg_xml&&(s.is_enter_code=!0),this.$(".notification-sessions-wrap").prepend(Bs(Ms.verification_session(s)))},addMessage:function(e){let t=this.buildMessageHtml(e),i=this.model.messages.indexOf(e);if(0===i)t.appendTo(this.$(".chat-content"));else if(this.model.messages.models.length&&this.model.messages.models[i-1]){let e=this.$(`.chat-message[data-uniqueid="${this.model.messages.models[i-1].get("unique_id")}"]`);e.length||(e=this.addMessage(this.model.messages.models[i-1])),t.insertBefore(e)}let s=t.nextAll(".chat-message").first();return this.updateMessageInChat(t[0],e),this.updateNotificationDate(t[0],e),s.length&&this.updateMessageInChat(s[0]),this.initPopup(t),this.bottom.showChatNotification(),t},updateNotificationDate:function(e,t){let i=Bs(e);i.find(".msg-time").text(Os(i.data("time")))},scrollToUnreadWithButton:function(){this.backToBottom()},scrollToBottom:function(e){if(!e)return void this.scrollToTop();let t=this.ps_container[0].scrollHeight,i=this.ps_container[0].offsetHeight;this.scrollTo(t-i)},backToBottom:function(){this.scrollToTop()},loadPreviousHistory:function(e,t){if(Is.error("load"),this.contact&&(!nt.settings.load_history||(!this.contact.get("subscription")||"both"!==this.contact.get("subscription"))&&this.contact.get("group_chat")))return;let i=this.model.get("first_archive_id")||"";e&&(i=""),this.getMessageArchive({fast:!0,max:nt.settings.mam_messages_limit,before:i},{previous_history:!0,is_scrollToTop:t})},onScrollY:function(){var e;this._prev_scrolltop=this._scrolltop||this._prev_scrolltop||0,this._scrolltop=this.getScrollTop()||this._scrolltop||this._prev_scrolltop||0,this._is_scrolled_bottom=this.isScrolledToBottom(),0===this._scrolltop&&this.$(".subscription-buttons-wrap").hasClass("hidden")&&(this.$(".fixed-day-indicator-wrap").css("opacity",1),this.current_day_indicator=(e=parseInt(this.$(".chat-content").children().first().data("time")),Ls.pretty_date(e,("ru-RU"==nt.settings.language||"default"==nt.settings.language&&"ru-RU"==nt.get("default_language"))&&"dddd, D MMMM YYYY")),this.showDayIndicator(this.current_day_indicator)),this.$(".back-to-bottom").hideIf(this.isScrolledToTop())},onScroll:function(e,t){if(this._no_scrolling_event)return;this.$(".back-to-bottom").hideIf(this.isScrolledToTop());let i=(this._long_reading_timeout,100);if(clearTimeout(this._onscroll_read_messages_timeout),this._onscroll_read_messages_timeout=setTimeout((()=>{this.readVisibleMessages()}),i),this._long_reading_timeout=!1,this._scrolltop>this._prev_scrolltop&&this.getPercentScrolled()>.8&&this.loadPreviousHistory(),this.hideMessagesAfterSkipping(),this._scrolltop<this._prev_scrolltop&&this.model.get("last_sync_unread_id")&&this.getPercentScrolled()<.2){let e={fast:!0,max:nt.settings.mam_messages_limit,after:this.model.get("last_sync_unread_id")};this.model.get("synced_msg")&&(e.var=[{var:"after-id",value:this.model.get("last_sync_unread_id")},{var:"before-id",value:this.model.get("synced_msg").get("stanza_id")}]),this.getMessageArchive(e,{unread_history:!0})}},onMouseWheel:function(e){e.originalEvent.deltaY>0&&this.loadPreviousHistory(),this.$(".back-to-bottom").hideIf(this.isScrolledToTop())},onChangedMessageTimestamp:function(e){let t=this.$(`.chat-message[data-uniqueid="${e.get("unique_id")}"]`),i=t.next(),s=t.prev();t.attr({"data-time":e.get("timestamp")}),t.detach(),t.children(".right-side").find(".msg-time").attr({title:Os(e.get("time"))}).text(Ls.pretty_time(e.get("time"))),e.get("user_info")&&t.attr("data-from-id",e.get("user_info").id),this.model.messages.sort();let n=this.model.messages.indexOf(e);if(0===n)s.hasClass("chat-day-indicator")?s.after(t):t.prependTo(this.$(".chat-content"));else{let a=this.$(".chat-message").eq(n-1),o=t.data("from")===a.data("from"),r=Rs(t.data("time")).startOf("day").isSame(Rs(a.data("time")).startOf("day"));s.data("from")===t.data("from")||i.data("from")!==t.data("from")||"delivered"!==i.children(".right-side").find(".msg-delivering-state").attr("data-state")&&"displayed"!==i.children(".right-side").find(".msg-delivering-state").attr("data-state")||this.showMessageAuthor(i),a.next().hasClass("chat-day-indicator")&&Rs(a.next().data("time")).format("DD.MM.YY")===Rs(e.get("timestamp")).format("DD.MM.YY")?(t.insertAfter(a.next()),this.showMessageAuthor(t)):t.insertAfter(a),e.get("data_form")||e.get("forwarded_message")||!r||!o||a.hasClass("system")||a.hasClass("saved-main")?this.showMessageAuthor(t):this.hideMessageAuthor(t)}let a=this.model.last_message;(!a||e.get("timestamp")>a.get("timestamp"))&&(this.model.last_message=e,this.model.get("notifications")&&this.account.trigger("notification_last_msg_updated",e.get("stanza_id")),this.chat_item.updateLastMessage())}}),nt.once("start",(function(){!this.notifications_view&&(this.notifications_view=new nt.NotificationsView),this.on("change:focused",(function(){if(this.get("focused")){let e=this.notifications_view.current_content;e&&e.data.get("visible")&&e.onScroll(null,!0)}}),this),this.notifications_body=this.right_panel.addChild("notifications_body",this.NotificationsBodyContainer)}),nt);const Ds=nt;nt.extendWith(pt,_t,Ct,Rt,Kt,si,bi,Ri,qi,ts,os,bs,$s,Ds),i.g.xabber=nt;const Fs=nt},92444:(e,t,i)=>{var s={"./accounts/emojis.json":85304};function n(e){var t=a(e);return i(t)}function a(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=a,e.exports=n,n.id=92444},89293:(e,t,i)=>{var s={"./accounts/account_settings_modal.html":59166,"./accounts/add_account.html":24109,"./accounts/audio_file_waveform.html":56949,"./accounts/avatars_gallery.html":47837,"./accounts/change_account_password.html":15415,"./accounts/change_password.html":34999,"./accounts/change_status.html":33999,"./accounts/current_token_item_modal.html":5766,"./accounts/delete_files_media_gallery.html":72971,"./accounts/emoji_panel.html":90231,"./accounts/emoji_picker.html":25482,"./accounts/emoji_picker_tabs.html":20458,"./accounts/existing_groupchat_item.html":4870,"./accounts/global_settings_item_modal.html":56001,"./accounts/media_gallery_account.html":57872,"./accounts/media_gallery_account_file.html":39440,"./accounts/resource.html":75216,"./accounts/resource_right.html":255,"./accounts/single_account_settings_modal.html":86572,"./accounts/status_message_input_widget.html":71326,"./accounts/token_item_modal.html":84377,"./accounts/toolbar_item.html":54810,"./accounts/trust_item_device.html":63057,"./accounts/trust_item_peer.html":7760,"./accounts/unregister_account.html":49485,"./accounts/webcam_panel.html":92797,"./accounts/xmpp_login.html":64630,"./base/about.html":99288,"./base/backgrounds_gallery.html":77428,"./base/color_picker.html":51462,"./base/color_scheme.html":83430,"./base/dialog.html":62985,"./base/fingerprint_devices_item.html":16969,"./base/fingerprint_item.html":75551,"./base/fingerprints.html":5822,"./base/fingerprints_devices.html":26376,"./base/incoming_trust_session.html":71050,"./base/input_widget.html":10596,"./base/jingle_message_calling.html":62077,"./base/omemo_enable.html":17661,"./base/plyr_player_popup.html":14197,"./base/setting_emoji_font_radio_input.html":73122,"./base/setting_language_radio_input.html":49707,"./base/setting_radio_input.html":94944,"./base/settings.html":15887,"./base/settings_modal.html":81012,"./base/toolbar.html":45459,"./chats/add_chat_account_item.html":56468,"./chats/chat_bottom.html":74335,"./chats/chat_content.html":10224,"./chats/chat_content_contact.html":9031,"./chats/chat_content_placeholder.html":36209,"./chats/chat_head.html":29317,"./chats/chat_item.html":95370,"./chats/chat_placeholder.html":5696,"./chats/chats_panel.html":80026,"./chats/checkbox.html":40433,"./chats/content_encryption_warning.html":96249,"./chats/encryption_warning.html":53318,"./chats/ephemeral_timer_selector.html":70275,"./chats/export_history.html":88831,"./chats/forward_panel.html":83176,"./chats/group_chats/add_group_chat.html":23118,"./chats/group_chats/invitation_panel_view.html":1015,"./chats/group_chats/mention_item.html":79011,"./chats/group_chats/pinned_message_panel.html":68096,"./chats/location_popup.html":21732,"./chats/message_item.html":59170,"./chats/messages/attached_file.html":97042,"./chats/messages/audio_file.html":94382,"./chats/messages/audio_file_waveform.html":74211,"./chats/messages/auth_request.html":63576,"./chats/messages/file.html":89256,"./chats/messages/file_loading.html":83034,"./chats/messages/file_upload.html":46311,"./chats/messages/forwarded.html":19038,"./chats/messages/group_request.html":29794,"./chats/messages/hidden-template-for-2.html":15867,"./chats/messages/hidden-template-for-3.html":87486,"./chats/messages/hidden-template-for-4.html":19761,"./chats/messages/hidden-template-for-5.html":20365,"./chats/messages/hidden-template-for-6.html":57344,"./chats/messages/images_details.html":13786,"./chats/messages/link_reference.html":59840,"./chats/messages/link_reference_chat.html":39475,"./chats/messages/loading_circle.html":54301,"./chats/messages/location.html":55127,"./chats/messages/main.html":76510,"./chats/messages/saved_main.html":18479,"./chats/messages/searched.html":83228,"./chats/messages/system.html":85046,"./chats/messages/template-for-2.html":2861,"./chats/messages/template-for-3.html":70423,"./chats/messages/template-for-4.html":90719,"./chats/messages/template-for-5.html":39125,"./chats/messages/template-for-6.html":20129,"./chats/messages/video.html":87795,"./chats/messages/voice_message.html":43795,"./chats/saved_chat_head.html":21385,"./chats/send_media.html":34054,"./chats/subscription_buttons.html":47725,"./chats/unread_marker.html":98875,"./contacts/account_roster_left.html":69006,"./contacts/account_roster_right.html":23643,"./contacts/add_contact.html":24718,"./contacts/add_contact_account_item.html":31238,"./contacts/audio_file_waveform.html":49820,"./contacts/contact_blocked_item.html":73253,"./contacts/contact_details_right.html":38624,"./contacts/contact_left_item.html":24958,"./contacts/contact_placeholder.html":19768,"./contacts/contact_right_item.html":72055,"./contacts/edit_contact.html":45078,"./contacts/edit_group.html":4679,"./contacts/group_chats/add_blocked_participant_form.html":37639,"./contacts/group_chats/badge_edit_view.html":11868,"./contacts/group_chats/default_restrictions.html":87004,"./contacts/group_chats/default_restrictions_right.html":59115,"./contacts/group_chats/description_input_widget.html":49080,"./contacts/group_chats/file_item.html":79481,"./contacts/group_chats/group_chat_details.html":69426,"./contacts/group_chats/group_chat_details_right.html":18939,"./contacts/group_chats/group_chat_properties.html":15159,"./contacts/group_chats/group_chat_properties_edit.html":20904,"./contacts/group_chats/group_chat_properties_right.html":69849,"./contacts/group_chats/group_member_item.html":38114,"./contacts/group_chats/group_member_item_right.html":53119,"./contacts/group_chats/group_name_input_widget.html":82703,"./contacts/group_chats/group_status.html":70569,"./contacts/group_chats/group_status_right.html":27157,"./contacts/group_chats/invitation.html":53464,"./contacts/group_chats/invited_member_item.html":87824,"./contacts/group_chats/participant_badge_input_widget.html":84939,"./contacts/group_chats/participant_details_item.html":66493,"./contacts/group_chats/participant_details_item_right.html":83326,"./contacts/group_chats/participant_details_right.html":1593,"./contacts/group_chats/participant_rights.html":76252,"./contacts/group_chats/participants.html":93172,"./contacts/group_chats/participants_right_panel.html":19295,"./contacts/group_chats/pinned_message.html":54630,"./contacts/group_chats/private_participant_details.html":15369,"./contacts/group_chats/private_participant_details_item_right.html":79983,"./contacts/group_chats/restriction_item.html":87050,"./contacts/group_chats/right_expire_variants.html":54338,"./contacts/group_chats/set_status.html":67065,"./contacts/group_chats/status_item.html":27893,"./contacts/group_left.html":57973,"./contacts/group_right.html":95561,"./contacts/group_settings.html":21612,"./contacts/groups.html":62605,"./contacts/groups_checkbox_list.html":54515,"./contacts/groups_checkbox_list_contact.html":52661,"./contacts/groups_list.html":58114,"./contacts/groups_new_group.html":57713,"./contacts/media_item.html":17905,"./contacts/media_items_empty.html":23546,"./contacts/preloader.html":4142,"./contacts/roster_left.html":50869,"./contacts/roster_right.html":22136,"./contacts/roster_settings.html":54186,"./mentions/mention_item.html":19253,"./mentions/mentions_panel.html":50291,"./mentions/mentions_placeholder.html":20103,"./notifications/account_filter_item.html":97320,"./notifications/current_verification_sessions.html":59629,"./notifications/notifications_view.html":76691,"./notifications/verification_session.html":54237,"./searching/existing_groupchat_details_view.html":31897,"./searching/existing_groupchat_item.html":71655,"./searching/searching_account_item.html":3103,"./searching/searching_wide.html":43143,"./svg/account-cancel.html":53283,"./svg/account-outline.html":20865,"./svg/account.html":32721,"./svg/address-outline.html":66656,"./svg/address.html":94429,"./svg/alarm-bell.html":47158,"./svg/alert-circle.html":55133,"./svg/alert.html":42703,"./svg/bank-circle.html":31338,"./svg/bell-off.html":14759,"./svg/bell-sleep.html":11713,"./svg/bell.html":55155,"./svg/birthday-outline.html":23977,"./svg/birthday.html":74741,"./svg/blocked-add.html":89768,"./svg/blocked.html":33574,"./svg/bot-variant.html":94862,"./svg/bot.html":29568,"./svg/bug.html":89965,"./svg/call-outline.html":16938,"./svg/call.html":9530,"./svg/camera-retake.html":25430,"./svg/camera.html":26716,"./svg/cancel.html":80595,"./svg/channel.html":40203,"./svg/chat.html":71714,"./svg/check-circle.html":62633,"./svg/check.html":26446,"./svg/chevron-down.html":79353,"./svg/chevron-left-variant.html":32011,"./svg/chevron-right-variant.html":19297,"./svg/circle-slice-1.html":45013,"./svg/circle-slice-2.html":15460,"./svg/circle-slice-3.html":56377,"./svg/circle-slice-4.html":63363,"./svg/circle-slice-5.html":53161,"./svg/circle-slice-6.html":90100,"./svg/circle-slice-7.html":47263,"./svg/circle-slice-8.html":16472,"./svg/circles-outline.html":47033,"./svg/circles.html":61265,"./svg/client-outline.html":52773,"./svg/client.html":6625,"./svg/clock-outline.html":93813,"./svg/close.html":70874,"./svg/cloud.html":55696,"./svg/code.html":4641,"./svg/contact-add.html":63272,"./svg/crosshairs-gps.html":57197,"./svg/crosshairs-question.html":40765,"./svg/crosshairs.html":82823,"./svg/database-lock.html":17338,"./svg/database.html":41473,"./svg/description-outline.html":23373,"./svg/description.html":63993,"./svg/device-cellphone.html":79824,"./svg/device-console.html":32111,"./svg/device-desktop.html":5772,"./svg/device-tablet.html":18955,"./svg/device-web.html":16919,"./svg/devices.html":50832,"./svg/download.html":58712,"./svg/edit-outline.html":96840,"./svg/edit.html":22845,"./svg/email-outline.html":66206,"./svg/email.html":22505,"./svg/expires.html":21321,"./svg/file-audio.html":3643,"./svg/file-document.html":88700,"./svg/file-pdf.html":3468,"./svg/file-presentation.html":34417,"./svg/file-video.html":98587,"./svg/file-zip.html":89193,"./svg/file.html":34058,"./svg/fullname-outline.html":16109,"./svg/fullname.html":12784,"./svg/group-incognito.html":49703,"./svg/group-invite.html":89411,"./svg/group-private.html":81044,"./svg/group-public-add.html":35953,"./svg/group-public.html":56403,"./svg/heart-circle.html":43964,"./svg/history.html":35726,"./svg/ic-at.html":81363,"./svg/ic-jabber.html":9140,"./svg/ic-searching.html":46476,"./svg/id-outline.html":19324,"./svg/id.html":50807,"./svg/image.html":90226,"./svg/index.html":2612,"./svg/information-outline.html":52973,"./svg/information.html":66035,"./svg/invite-outline.html":34289,"./svg/invite.html":75917,"./svg/job-outline.html":31802,"./svg/job.html":97579,"./svg/key-variant.html":76499,"./svg/key.html":46753,"./svg/link.html":16205,"./svg/lock-alert.html":63234,"./svg/lock-check.html":14833,"./svg/lock-cross.html":8513,"./svg/lock-open.html":1652,"./svg/lock-question.html":67160,"./svg/lock.html":6258,"./svg/map-marker-outline.html":83740,"./svg/map-marker.html":70776,"./svg/membership-outline.html":8872,"./svg/membership.html":62535,"./svg/message-bookmark-outline.html":6278,"./svg/message-group.html":35529,"./svg/minus.html":79092,"./svg/mobile.html":33767,"./svg/palette.html":43710,"./svg/pause.html":58080,"./svg/picture-in-picture-bottom-right.html":91421,"./svg/picture-in-picture-minimize.html":42173,"./svg/picture-in-picture-top-right.html":74578,"./svg/pinned-circle-small.html":54052,"./svg/pinned.html":9443,"./svg/play.html":43069,"./svg/player-float.html":30030,"./svg/player-full.html":60259,"./svg/player-mini-variant.html":70099,"./svg/player-mini.html":77531,"./svg/plus.html":85123,"./svg/plyr.html":10410,"./svg/qrcode.html":17943,"./svg/restrictions-outline.html":89701,"./svg/rss-variant.html":89657,"./svg/rss.html":15645,"./svg/saved-messages.html":11797,"./svg/search.html":11146,"./svg/security.html":91467,"./svg/server.html":71188,"./svg/star-face.html":1866,"./svg/status-outline.html":52555,"./svg/status.html":5e3,"./svg/subscription-from.html":5414,"./svg/subscription-to.html":8020,"./svg/task.html":41835,"./svg/translate.html":98431,"./svg/trash.html":61686,"./svg/vcard.html":75319,"./svg/video.html":98070,"./svg/volume-high.html":87658,"./svg/volume-off-variant.html":7962,"./svg/volume-off.html":14032,"./svg/web-cancel.html":26330,"./svg/web.html":7094,"./svg/xabber-offline.html":50033,"./svg/xabber-online.html":74922,"./svg/xmpp.html":92052,"./vcard/vcard.html":73889,"./vcard/vcard_edit_modal.html":43918,"./vcard/vcard_modal.html":59265,"./vcard/vcard_right.html":93047};function n(e){var t=a(e);return i(t)}function a(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=a,e.exports=n,n.id=89293},23297:(e,t,i)=>{var s;let n={en:100,ar:25,az:2,be:12,bg:57,bs:0,ca:23,cs:99,cy:0,da:0,de:43,el:26,"es-ES":31,"es-latin":59,et:0,fa:4,fi:8,fil:13,fr:32,"ga-IE":0,he:19,hi:0,hr:0,hu:13,"hy-AM":7,id:99,is:0,it:63,ja:18,ka:0,kmr:0,ko:1,ku:2,ky:5,"la-LA":0,lb:0,lt:3,me:0,mk:0,mn:0,mr:0,ms:5,nb:19,"ne-NP":0,nl:18,no:0,oc:11,"pa-IN":0,pl:60,"pt-BR":62,"pt-PT":13,"qya-AA":0,ro:14,ru:61,sat:1,sco:0,"si-LK":32,sk:18,sl:25,sq:2,sr:12,"sr-Cyrl-ME":0,"sv-SE":34,sw:1,ta:1,te:0,tg:0,tk:0,"tlh-AA":0,tr:63,uk:25,uz:0,vi:11,yo:0,"zh-CN":99,"zh-TW":10,zu:0};void 0===(s=(()=>n).call(t,i,t,e))||(e.exports=s)},8946:(e,t,i)=>{var s={"./ar-rSA.js":[53591,5629],"./az-rAZ.js":[81101,1101],"./be-rBY.js":[86953,6953],"./bg-rBG.js":[41428,1428],"./bs-rBA.js":[76101,6101],"./ca-rES.js":[80049,49],"./cs-rCZ.js":[30011,11],"./cy-rGB.js":[98146,8146],"./da-rDK.js":[22348,2348],"./de-rDE.js":[78961,8961],"./el-rGR.js":[292,292],"./en.js":[53832,3832],"./es-rES.js":[85895,5895],"./es419.js":[93575,3575],"./et-rEE.js":[14103,4103],"./fa-rIR.js":[15729,5729],"./fi-rFI.js":[35069,5069],"./fil-rPH.js":[43250,3250],"./fr-rFR.js":[52716,2716],"./ga-rIE.js":[17872,7872],"./hi-rIN.js":[11361,1361],"./hr-rHR.js":[42324,2324],"./hu-rHU.js":[70833,833],"./hy-rAM.js":[63e3,3e3],"./in-rID.js":[31879,1879],"./is-rIS.js":[55298,5298],"./it-rIT.js":[8182,8182],"./iw-rIL.js":[5945,5945],"./ja-rJP.js":[91587,1587],"./ka-rGE.js":[21337,1337],"./kmr-rTR.js":[57057,7057],"./ko-rKR.js":[88756,8756],"./ku-rTR.js":[33678,3678],"./ky-rKG.js":[28404,8404],"./la-rLA.js":[27089,7089],"./lb-rLU.js":[85752,5752],"./lt-rLT.js":[23097,3097],"./me-rME.js":[59023,9023],"./mk-rMK.js":[52499,2499],"./mn-rMN.js":[68721,8721],"./mr-rIN.js":[33591,3591],"./ms-rMY.js":[10922,922],"./nb-rNO.js":[54778,4778],"./ne-rNP.js":[4463,4463],"./nl-rNL.js":[36447,6447],"./no-rNO.js":[16813,6813],"./oc-rFR.js":[76102,6102],"./pa-rIN.js":[49081,9081],"./pl-rPL.js":[60419,419],"./pt-rBR.js":[9226,9226],"./pt-rPT.js":[10201,201],"./qya-rAA.js":[39460,9460],"./ro-rRO.js":[16292,6292],"./ru-rRU.js":[74391,4391],"./sat-rIN.js":[1905,1905],"./sco-rGB.js":[52323,2323],"./si-rLK.js":[79773,9773],"./sk-rSK.js":[51874,1874],"./sl-rSI.js":[97658,7658],"./sq-rAL.js":[80596,596],"./sr-rCyrl-rME.js":[33343,3343],"./sr-rSP.js":[75384,5384],"./sv-rSE.js":[50608,608],"./sw-rKE.js":[6802,6802],"./ta-rIN.js":[51796,1796],"./te-rIN.js":[49782,9782],"./tg-rTJ.js":[33689,3689],"./tk-rTM.js":[60130,130],"./tlh-rAA.js":[73739,3739],"./tr-rTR.js":[4961,4961],"./translation_progress.js":[23297],"./uk-rUA.js":[88109,8109],"./uz-rUZ.js":[96886,6886],"./vi-rVN.js":[37216,7216],"./yo-rNG.js":[97045,7045],"./zh-rCN.js":[16806,6806],"./zh-rTW.js":[58545,8545],"./zu-rZA.js":[58810,8810]};function n(e){if(!i.o(s,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],n=t[0];return Promise.all(t.slice(1).map(i.e)).then((()=>i.t(n,23)))}n.keys=()=>Object.keys(s),n.id=8946,e.exports=n},24972:(e,t,i)=>{var s;void 0===(s=function(){return JSON.parse('{"version_number":"2.3.5.14","version_description":"changed not supported emoji fonts hint in firefox, hidden video btn in jingle modal if there is no videoinput, changed settings tab order"}')}.call(t,i,t,e))||(e.exports=s)},17533:(e,t,i)=>{"use strict";e.exports=i.p+"4b193f1a99df14046f5e.mp3"},65705:(e,t,i)=>{"use strict";e.exports=i.p+"b275e028dad744a5592d.mp3"},66391:(e,t,i)=>{"use strict";e.exports=i.p+"6a97f962a126a2f51b0e.mp3"},51922:(e,t,i)=>{"use strict";e.exports=i.p+"6a564d69c8ea93fe95df.mp3"},83113:(e,t,i)=>{"use strict";e.exports=i.p+"8836702e8a38df1c9047.mp3"},70180:(e,t,i)=>{"use strict";e.exports=i.p+"48bc846aa52397ddf868.mp3"},14528:(e,t,i)=>{"use strict";e.exports=i.p+"7256d7165b29843c6fc3.mp3"},86123:(e,t,i)=>{"use strict";e.exports=i.p+"2a34da54666f63f51a19.mp3"},11691:(e,t,i)=>{"use strict";e.exports=i.p+"ad621668c2d68760c108.mp3"},63414:(e,t,i)=>{"use strict";e.exports=i.p+"1f0195204bbc4f24f025.mp3"},66488:(e,t,i)=>{"use strict";e.exports=i.p+"035c4d20214903dd3366.mp3"},88711:(e,t,i)=>{"use strict";e.exports=i.p+"3e29ccb56028d9935a38.mp3"},730:(e,t,i)=>{"use strict";e.exports=i.p+"535b24687746a5c688dc.mp3"},76496:(e,t,i)=>{"use strict";e.exports=i.p+"735114c57a57c0d676ae.mp3"},28288:(e,t,i)=>{"use strict";e.exports=i.p+"3e3e96a78bb74fe1e810.mp3"},66849:(e,t,i)=>{"use strict";e.exports=i.p+"c885f597c4fde2dae876.mp3"},36445:(e,t,i)=>{"use strict";e.exports=i.p+"b275e028dad744a5592d.mp3"},15737:(e,t,i)=>{"use strict";e.exports=i.p+"ef38a4707ab7dbac586a.mp3"},48710:(e,t,i)=>{"use strict";e.exports=i.p+"b26463be46e48747abeb.mp3"},2301:(e,t,i)=>{"use strict";e.exports=i.p+"50e59951b7ea68833f6b.mp3"},33246:(e,t,i)=>{"use strict";e.exports=i.p+"2a9644f2d9f6341365d6.mp3"},80950:()=>{},46601:()=>{},89214:()=>{},96419:()=>{},56353:()=>{},8623:()=>{},7748:()=>{},85568:()=>{},69386:()=>{},31616:()=>{},56619:()=>{},77108:()=>{},69862:()=>{},40964:()=>{},62349:()=>{},98086:e=>{"use strict";e.exports=JSON.parse('{"attention":{"path":"./attention","name":"Attention"}}')},40591:e=>{"use strict";e.exports=JSON.parse('{"marching-band-dave-girtsman":{"path":"./marching-band-dave-girtsman","name":"Phone Call"}}')},9391:e=>{"use strict";e.exports=JSON.parse('{"beep_positive":{"path":"./beep_positive","name":"Beep positive"},"beep_up":{"path":"./beep_up","name":"Default beep"},"bleep":{"path":"./bleep","name":"Bleep"},"cellular_click":{"path":"./cellular_click","name":"Cellular click"},"computer_chime":{"path":"./computer_chime","name":"Computer chime"},"ether":{"path":"./ether","name":"Ether"},"good_chime":{"path":"./good_chime","name":"Good chime"},"mono_u":{"path":"./mono_u","name":"Mono u"},"pixel_beep":{"path":"./pixel_beep","name":"Pixel beep"},"plop":{"path":"./plop","name":"Plop"},"pop":{"path":"./pop","name":"Pop"},"retro_game":{"path":"./retro_game","name":"Retro game"},"tiny_noize":{"path":"./tiny_noize","name":"Tiny noize"}}')},19093:e=>{"use strict";e.exports=JSON.parse('{"marching-band-dave-girtsman":{"selectable":true,"path":"./marching-band-dave-girtsman","name":"Phone Call"},"future-synth":{"selectable":true,"path":"./future-synth","name":"Future Synth"},"retro-chiptune":{"selectable":true,"path":"./retro-chiptune","name":"Retro Chiptune"}}')},86934:e=>{"use strict";e.exports=JSON.parse('{"_auth_request":{"not_selectable":true,"path":"./_auth_request","name":"Auth request sound"},"_phone_busy":{"not_selectable":true,"path":"./_phone_busy","name":"Phone busy"},"_call_connecting":{"not_selectable":true,"path":"./_call_connecting","name":"Call connection"}}')},85304:e=>{"use strict";e.exports=JSON.parse('[{"emojis":[["😀"],["😁"],["😂"],["🤣"],["😃"],["😄"],["😅"],["😆"],["😉"],["😊"],["😋"],["😎"],["😍"],["😘"],["😗"],["😙"],["😚"],["☺️"],["🙂"],["🤗"],["🤩"],["🤔"],["🤨"],["😐"],["😑"],["😶"],["🙄"],["😏"],["😣"],["😥"],["😮"],["🤐"],["😯"],["😪"],["😫"],["😴"],["😌"],["😛"],["😜"],["😝"],["🤤"],["😒"],["😓"],["😔"],["😕"],["🙃"],["🤑"],["😲"],["☹️"],["🙁"],["😖"],["😞"],["😟"],["😤"],["😢"],["😭"],["😦"],["😧"],["😨"],["😩"],["🤯"],["😬"],["😰"],["😱"],["😳"],["🤪"],["😵"],["😡"],["😠"],["🤬"],["😷"],["🤒"],["🤕"],["🤢"],["🤮"],["🤧"],["😇"],["🤠"],["🤡"],["🤥"],["🤫"],["🤭"],["🧐"],["🤓"],["😈"],["👿"],["👹"],["👺"],["💀"],["👻"],["👽"],["🤖"],["💩"],["😺"],["😸"],["😹"],["😻"],["😼"],["😽"],["🙀"],["😿"],["😾"],["🤲","🤲🏻","🤲🏼","🤲🏽","🤲🏾","🤲🏿"],["👐","👐🏻","👐🏼","👐🏽","👐🏾","👐🏿"],["🙌","🙌🏻","🙌🏼","🙌🏽","🙌🏾","🙌🏿"],["👏","👏🏻","👏🏼","👏🏽","👏🏾","👏🏿"],["👍","👍🏻","👍🏼","👍🏽","👍🏾","👍🏿"],["👎","👎🏻","👎🏼","👎🏽","👎🏾","👎🏿"],["👊","👊🏻","👊🏼","👊🏽","👊🏾","👊🏿"],["✊","✊🏻","✊🏼","✊🏽","✊🏾","✊🏿"],["🤛","🤛🏻","🤛🏼","🤛🏽","🤛🏾","🤛🏿"],["🤜","🤜🏻","🤜🏼","🤜🏽","🤜🏾","🤜🏿"],["🤞","🤞🏻","🤞🏼","🤞🏽","🤞🏾","🤞🏿"],["✌","✌🏻","✌🏼","✌🏽","✌🏾","✌🏿"],["🤟","🤟🏻","🤟🏼","🤟🏽","🤟🏾","🤟🏿"],["🤘","🤘🏻","🤘🏼","🤘🏽","🤘🏾","🤘🏿"],["👌","👌🏻","👌🏼","👌🏽","👌🏾","👌🏿"],["👈","👈🏻","👈🏼","👈🏽","👈🏾","👈🏿"],["👉","👉🏻","👉🏼","👉🏽","👉🏾","👉🏿"],["👆","👆🏻","👆🏼","👆🏽","👆🏾","👆🏿"],["👇","👇🏻","👇🏼","👇🏽","👇🏾","👇🏿"],["☝","☝🏻","☝🏼","☝🏽","☝🏾","☝🏿"],["✋","✋🏻","✋🏼","✋🏽","✋🏾","✋🏿"],["🤚","🤚🏻","🤚🏼","🤚🏽","🤚🏾","🤚🏿"],["🖐","🖐🏻","🖐🏼","🖐🏽","🖐🏾","🖐🏿"],["🖖","🖖🏻","🖖🏼","🖖🏽","🖖🏾","🖖🏿"],["👋","👋🏻","👋🏼","👋🏽","👋🏾","👋🏿"],["🤙","🤙🏻","🤙🏼","🤙🏽","🤙🏾","🤙🏿"],["💪","💪🏻","💪🏼","💪🏽","💪🏾","💪🏿"],["🖕","🖕🏻","🖕🏼","🖕🏽","🖕🏾","🖕🏿"],["✍","✍🏻","✍🏼","✍🏽","✍🏾","✍🏿"],["🙏","🙏🏻","🙏🏼","🙏🏽","🙏🏾","🙏🏿"],["💍"],["💄"],["💋"],["👄"],["👅"],["👂","👂🏻","👂🏼","👂🏽","👂🏾","👂🏿"],["👃","👃🏻","👃🏼","👃🏽","👃🏾","👃🏿"],["👣"],["👁"],["👀"],["🧠"],["🗣"],["👤"],["👥"],["👶","👶🏻","👶🏼","👶🏽","👶🏾","👶🏿"],["👧","👧🏻","👧🏼","👧🏽","👧🏾","👧🏿"],["🧒","🧒🏻","🧒🏼","🧒🏽","🧒🏾","🧒🏿"],["👦","👦🏻","👦🏼","👦🏽","👦🏾","👦🏿"],["👩","👩🏻","👩🏼","👩🏽","👩🏾","👩🏿"],["🧑","🧑🏻","🧑🏼","🧑🏽","🧑🏾","🧑🏿"],["👨","👨🏻","👨🏼","👨🏽","👨🏾","👨🏿"],["👱‍♀️","👱🏻‍♀️","👱🏼‍♀️","👱🏽‍♀️","👱🏾‍♀️","👱🏿‍♀️"],["👱","👱🏻","👱🏼","👱🏽","👱🏾","👱🏿"],["🧔","🧔🏻","🧔🏼","🧔🏽","🧔🏾","🧔🏿"],["👵","👵🏻","👵🏼","👵🏽","👵🏾","👵🏿"],["🧓","🧓🏻","🧓🏼","🧓🏽","🧓🏾","🧓🏿"],["👴","👴🏻","👴🏼","👴🏽","👴🏾","👴🏿"],["👲","👲🏻","👲🏼","👲🏽","👲🏾","👲🏿"],["👳‍♀️","👳🏻‍♀️","👳🏼‍♀️","👳🏽‍♀️","👳🏾‍♀️","👳🏿‍♀️"],["👳️","👳🏻","👳🏼️","👳🏽️","👳🏾️","👳🏿️"],["🧕","🧕🏻","🧕🏼","🧕🏽","🧕🏾","🧕🏿"],["👮‍♀️","👮🏻‍♀️","👮🏼‍♀️","👮🏽‍♀️","👮🏾‍♀️","👮🏿‍♀️"],["👮","👮🏻","👮🏼","👮🏽","👮🏾","👮🏿"],["👷‍♀️","👷🏻‍♀️","👷🏼‍♀️","👷🏽‍♀️","👷🏾‍♀️","👷🏿‍♀️"],["👷","👷🏻","👷🏼","👷🏽","👷🏾","👷🏿"],["💂‍♀️","💂🏻‍♀️","💂🏼‍♀️","💂🏽‍♀️","💂🏾‍♀️","💂🏿‍♀️"],["💂","💂🏻","💂🏼","💂🏽","💂🏾","💂🏿"],["🕵️‍♀️","🕵🏻‍♀️","🕵🏼‍♀️","🕵🏽‍♀️","🕵🏾‍♀️","🕵🏿‍♀️"],["🕵","🕵🏻","🕵🏼","🕵🏽","🕵🏾","🕵🏿"],["👩‍⚕️","👩🏻‍⚕️","👩🏼‍⚕️","👩🏽‍⚕️","👩🏾‍⚕️","👩🏿‍⚕️"],["👨‍⚕️","👨🏻‍⚕️","👨🏼‍⚕️","👨🏽‍⚕️","👨🏾‍⚕️","👨🏿‍⚕️"],["👩‍🌾","👩🏻‍🌾","👩🏼‍🌾","👩🏽‍🌾","👩🏾‍🌾","👩🏿‍🌾"],["👨‍🌾","👨🏻‍🌾","👨🏼‍🌾","👨🏽‍🌾","👨🏾‍🌾","👨🏿‍🌾"],["👩‍🍳","👩🏻‍🍳","👩🏼‍🍳","👩🏽‍🍳","👩🏾‍🍳","👩🏿‍🍳"],["👨‍🍳","👨🏻‍🍳","👨🏼‍🍳","👨🏽‍🍳","👨🏾‍🍳","👨🏿‍🍳"],["👩‍🎓","👩🏻‍🎓","👩🏼‍🎓","👩🏽‍🎓","👩🏾‍🎓","👩🏿‍🎓"],["👨‍🎓","👨🏻‍🎓","👨🏼‍🎓","👨🏽‍🎓","👨🏾‍🎓","👨🏿‍🎓"],["👩‍🎤","👩🏻‍🎤","👩🏼‍🎤","👩🏽‍🎤","👩🏾‍🎤","👩🏿‍🎤"],["👨‍🎤","👨🏻‍🎤","👨🏼‍🎤","👨🏽‍🎤","👨🏾‍🎤","👨🏿‍🎤"],["👩‍🏫","👩🏻‍🏫","👩🏼‍🏫","👩🏽‍🏫","👩🏾‍🏫","👩🏿‍🏫"],["👨‍🏫","👨🏻‍🏫","👨🏼‍🏫","👨🏽‍🏫","👨🏾‍🏫","👨🏿‍🏫"],["👩‍🏭","👩🏻‍🏭","👩🏼‍🏭","👩🏽‍🏭","👩🏾‍🏭","👩🏿‍🏭"],["👨‍🏭","👨🏻‍🏭","👨🏼‍🏭","👨🏽‍🏭","👨🏾‍🏭","👨🏿‍🏭"],["👩‍💻","👩🏻‍💻","👩🏼‍💻","👩🏽‍💻","👩🏾‍💻","👩🏿‍💻"],["👨‍💻","👨🏻‍💻","👨🏼‍💻","👨🏽‍💻","👨🏾‍💻","👨🏿‍💻"],["👩‍💼","👩🏻‍💼","👩🏼‍💼","👩🏽‍💼","👩🏾‍💼","👩🏿‍💼"],["👨‍💼","👨🏻‍💼","👨🏼‍💼","👨🏽‍💼","👨🏾‍💼","👨🏿‍💼"],["👩‍🔧","👩🏻‍🔧","👩🏼‍🔧","👩🏽‍🔧","👩🏾‍🔧","👩🏿‍🔧"],["👨‍🔧","👨🏻‍🔧","👨🏼‍🔧","👨🏽‍🔧","👨🏾‍🔧","👨🏿‍🔧"],["👩‍🔬","👩🏻‍🔬","👩🏼‍🔬","👩🏽‍🔬","👩🏾‍🔬","👩🏿‍🔬"],["👨‍🔬","👨🏻‍🔬","👨🏼‍🔬","👨🏽‍🔬","👨🏾‍🔬","👨🏿‍🔬"],["👩‍🎨","👩🏻‍🎨","👩🏼‍🎨","👩🏽‍🎨","👩🏾‍🎨","👩🏿‍🎨"],["👨‍🎨","👨🏻‍🎨","👨🏼‍🎨","👨🏽‍🎨","👨🏾‍🎨","👨🏿‍🎨"],["👩‍🚒","👩🏻‍🚒","👩🏼‍🚒","👩🏽‍🚒","👩🏾‍🚒","👩🏿‍🚒"],["👨‍🚒","👨🏻‍🚒","👨🏼‍🚒","👨🏽‍🚒","👨🏾‍🚒","👨🏿‍🚒"],["👩‍✈️","👩🏻‍✈️","👩🏼‍✈️","👩🏽‍✈️","👩🏾‍✈️","👩🏿‍✈️"],["👨‍✈️","👨🏻‍✈️","👨🏼‍✈️","👨🏽‍✈️","👨🏾‍✈️","👨🏿‍✈️"],["👩‍🚀","👩🏻‍🚀","👩🏼‍🚀","👩🏽‍🚀","👩🏾‍🚀","👩🏿‍🚀"],["👨‍🚀","👨🏻‍🚀","👨🏼‍🚀","👨🏽‍🚀","👨🏾‍🚀","👨🏿‍🚀"],["👩‍⚖️","👩🏻‍⚖️","👩🏼‍⚖️","👩🏽‍⚖️","👩🏾‍⚖️","👩🏿‍⚖️"],["👨‍⚖️","👨🏻‍⚖️","👨🏼‍⚖️","👨🏽‍⚖️","👨🏾‍⚖️","👨🏿‍⚖️"],["👰","👰🏻","👰🏼","👰🏽","👰🏾","👰🏿"],["🤵","🤵🏻","🤵🏼","🤵🏽","🤵🏾","🤵🏿"],["👸","👸🏻","👸🏼","👸🏽","👸🏾","👸🏿"],["🤴","🤴🏻","🤴🏼","🤴🏽","🤴🏾","🤴🏿"],["🤶","🤶🏻","🤶🏼","🤶🏽","🤶🏾","🤶🏿"],["🎅","🎅🏻","🎅🏼","🎅🏽","🎅🏾","🎅🏿"],["🧙‍♀️","🧙🏻‍♀️","🧙🏼‍♀️","🧙🏽‍♀️","🧙🏾‍♀️","🧙🏿‍♀️"],["🧙‍♂️","🧙🏻‍♂️","🧙🏼‍♂️","🧙🏽‍♂️","🧙🏾‍♂️","🧙🏿‍♂️"],["🧝‍♀️","🧝🏻‍♀️","🧝🏼‍♀️","🧝🏽‍♀️","🧝🏾‍♀️","🧝🏿‍♀️"],["🧝‍♂️","🧝🏻‍♂️","🧝🏼‍♂️","🧝🏽‍♂️","🧝🏾‍♂️","🧝🏿‍♂️"],["🧛‍♀️","🧛🏻‍♀️","🧛🏼‍♀️","🧛🏽‍♀️","🧛🏾‍♀️","🧛🏿‍♀️"],["🧛‍♂️","🧛🏻‍♂️","🧛🏼‍♂️","🧛🏽‍♂️","🧛🏾‍♂️","🧛🏿‍♂️"],["🧟‍♀️"],["🧟‍♂️"],["🧞‍♀️"],["🧞‍♂️"],["🧜‍♀️","🧜🏻‍♀️","🧜🏼‍♀️","🧜🏽‍♀️","🧜🏾‍♀️","🧜🏿‍♀️"],["🧜‍♂️","🧜🏻‍♂️","🧜🏼‍♂️","🧜🏽‍♂️","🧜🏾‍♂️","🧜🏿‍♂️"],["🧚‍♀️","🧚🏻‍♀️","🧚🏼‍♀️","🧚🏽‍♀️","🧚🏾‍♀️","🧚🏿‍♀️"],["🧚‍♂️","🧚🏻‍♂️","🧚🏼‍♂️","🧚🏽‍♂️","🧚🏾‍♂️","🧚🏿‍♂️"],["👼","👼🏻","👼🏼","👼🏽","👼🏾","👼🏿"],["🤰","🤰🏻","🤰🏼","🤰🏽","🤰🏾","🤰🏿"],["🤱","🤱🏻","🤱🏼","🤱🏽","🤱🏾","🤱🏿"],["🙇‍♀️","🙇🏻‍♀️","🙇🏼‍♀️","🙇🏽‍♀️","🙇🏾‍♀️","🙇🏿‍♀️"],["🙇","🙇🏻","🙇🏼","🙇🏽","🙇🏾","🙇🏿"],["💁","💁🏻","💁🏼","💁🏽","💁🏾","💁🏿"],["💁‍♂️","💁🏻‍♂️","💁🏼‍♂️","💁🏽‍♂️","💁🏾‍♂️","💁🏿‍♂️"],["🙅","🙅🏻","🙅🏼","🙅🏽","🙅🏾","🙅🏿"],["🙅‍♂️","🙅🏻‍♂️","🙅🏼‍♂️","🙅🏽‍♂️","🙅🏾‍♂️","🙅🏿‍♂️"],["🙆","🙆🏻","🙆🏼","🙆🏽","🙆🏾","🙆🏿"],["🙆‍♂️","🙆🏻‍♂️","🙆🏼‍♂️","🙆🏽‍♂️","🙆🏾‍♂️","🙆🏿‍♂️"],["🙋","🙋🏻","🙋🏼","🙋🏽","🙋🏾","🙋🏿"],["🙋‍♂️","🙋🏻‍♂️","🙋🏼‍♂️","🙋🏽‍♂️","🙋🏾‍♂️","🙋🏿‍♂️"],["🤦‍♀️","🤦🏻‍♀️","🤦🏼‍♀️","🤦🏽‍♀️","🤦🏾‍♀️","🤦🏿‍♀️"],["🤦‍♂️","🤦🏻‍♂️","🤦🏼‍♂️","🤦🏽‍♂️","🤦🏾‍♂️","🤦🏿‍♂️"],["🤷","🤷🏻‍♀️","🤷🏼‍♀️","🤷🏽‍♀️","🤷🏾‍♀️","🤷🏿‍♀️"],["🤷‍♂️","🤷🏻‍♂️","🤷🏼‍♂️","🤷🏽‍♂️","🤷🏾‍♂️","🤷🏿‍♂️"],["🙎","🙎🏻","🙎🏼","🙎🏽","🙎🏾","🙎🏿"],["🙎‍♂️","🙎🏻‍♂️","🙎🏼‍♂️","🙎🏽‍♂️","🙎🏾‍♂️","🙎🏿‍♂️"],["🙍","🙍🏻","🙍🏼","🙍🏽","🙍🏾","🙍🏿"],["🙍‍♂️","🙍🏻‍♂️","🙍🏼‍♂️","🙍🏽‍♂️","🙍🏾‍♂️","🙍🏿‍♂️"],["💇","💇🏻","💇🏼","💇🏽","💇🏾","💇🏿"],["💇‍♂️","💇🏻‍♂️","💇🏼‍♂️","💇🏽‍♂️","💇🏾‍♂️","💇🏿‍♂️"],["💆","💆🏻","💆🏼","💆🏽","💆🏾","💆🏿"],["💆‍♂️","💆🏻‍♂️","💆🏼‍♂️","💆🏽‍♂️","💆🏾‍♂️","💆🏿‍♂️"],["🧖‍♀"],["🧖‍♂"],["💅","💅🏻","💅🏼","💅🏽","💅🏾","💅🏿"],["🤳","🤳🏻","🤳🏼","🤳🏽","🤳🏾","🤳🏿"],["🕴","🕴🏻","🕴🏼","🕴🏼","🕴🏾","🕴🏿"],["💃","💃🏻","💃🏼","💃🏽","💃🏾","💃🏿"],["🕺","🕺🏻","🕺🏼","🕺🏽","🕺🏾","🕺🏿"],["👯‍♀"],["👯‍♂"],["🚶‍♀️","🚶🏻‍♀️","🚶🏼‍♀️","🚶🏽‍♀️","🚶🏾‍♀️","🚶🏿‍♀️"],["🚶","🚶🏻","🚶🏼","🚶🏽","🚶🏾","🚶🏿"],["🏃‍♀️","🏃🏻‍♀️","🏃🏼‍♀️","🏃🏽‍♀️","🏃🏾‍♀️","🏃🏿‍♀️"],["🏃","🏃🏻","🏃🏼","🏃🏽","🏃🏾","🏃🏿"],["👫"],["👭"],["👬"],["💑"],["👩‍❤️‍👩"],["👨‍❤️‍👨"],["💏"],["👩‍❤️‍💋‍👩"],["👨‍❤️‍💋‍👨"],["👪"],["👨‍👩‍👧"],["👨‍👩‍👧‍👦"],["👨‍👩‍👦‍👦"],["👨‍👩‍👧‍👧"],["👩‍👩‍👦"],["👩‍👩‍👧"],["👩‍👩‍👧‍👦"],["👩‍👩‍👦‍👦"],["👩‍👩‍👧‍👧"],["👨‍👨‍👦"],["👨‍👨‍👧"],["👨‍👨‍👧‍👦"],["👨‍👨‍👦‍👦"],["👨‍👨‍👧‍👧"],["👩‍👦"],["👩‍👧"],["👩‍👧‍👦"],["👩‍👦‍👦"],["👩‍👧‍👧"],["👨‍👦"],["👨‍👧"],["👨‍👧‍👦"],["👨‍👦‍👦"],["👨‍👧‍👧"],["🧥"],["👚"],["👕"],["👖"],["👔"],["👗"],["👙"],["👘"],["👠"],["👡"],["👢"],["👞"],["👟"],["🧦"],["🧤"],["🧣"],["🎩"],["🧢"],["👒"],["🎓"],["⛑"],["👑"],["👝"],["👛"],["👜"],["💼"],["🎒"],["👓"],["🕶"],["🌂"]],"type":"smileysAndPeople"},{"emojis":[["🐶"],["🐱"],["🐭"],["🐹"],["🐰"],["🦊"],["🐻"],["🐼"],["🐨"],["🐯"],["🦁"],["🐮"],["🐷"],["🐽"],["🐸"],["🐵"],["🙈"],["🙉"],["🙊"],["🐒"],["🐔"],["🐧"],["🐦"],["🐤"],["🐣"],["🐥"],["🦆"],["🦅"],["🦉"],["🦇"],["🐺"],["🐗"],["🐴"],["🦄"],["🐝"],["🐛"],["🦋"],["🐌"],["🐚"],["🐞"],["🐜"],["🦗"],["🕷"],["🕸"],["🦂"],["🐢"],["🐍"],["🦎"],["🦖"],["🦕"],["🐙"],["🦑"],["🦐"],["🦀"],["🐡"],["🐠"],["🐟"],["🐬"],["🐳"],["🐋"],["🦈"],["🐊"],["🐅"],["🐆"],["🦓"],["🦍"],["🐘"],["🦏"],["🐪"],["🐫"],["🦒"],["🐃"],["🐂"],["🐄"],["🐎"],["🐖"],["🐏"],["🐑"],["🐐"],["🦌"],["🐕"],["🐩"],["🐈"],["🐓"],["🦃"],["🕊"],["🐇"],["🐁"],["🐀"],["🐿"],["🦔"],["🐾"],["🐉"],["🐲"],["🌵"],["🎄"],["🌲"],["🌳"],["🌴"],["🌱"],["🌿"],["☘️"],["🍀"],["🎍"],["🎋"],["🍃"],["🍂"],["🍁"],["🍄"],["🌾"],["💐"],["🌷"],["🌹"],["🥀"],["🌺"],["🌸"],["🌼"],["🌻"],["🌞"],["🌝"],["🌛"],["🌜"],["🌚"],["🌕"],["🌖"],["🌗"],["🌘"],["🌑"],["🌒"],["🌓"],["🌔"],["🌙"],["🌎"],["🌍"],["🌏"],["💫"],["⭐️"],["🌟"],["✨"],["⚡️"],["☄️"],["💥"],["🔥"],["🌪"],["🌈"],["☀️"],["🌤"],["⛅️"],["🌥"],["☁️"],["🌦"],["🌧"],["⛈"],["🌩"],["🌨"],["❄️"],["☃️"],["⛄️"],["🌬"],["💨"],["💧"],["💦"],["☔️"],["☂️"],["🌊"],["🌫"]],"type":"animalsAndNature"},{"emojis":[["🍏"],["🍎"],["🍐"],["🍊"],["🍋"],["🍌"],["🍉"],["🍇"],["🍓"],["🍈"],["🍒"],["🍑"],["🍍"],["🥥"],["🥝"],["🍅"],["🍆"],["🥑"],["🥦"],["🥒"],["🌶"],["🌽"],["🥕"],["🥔"],["🍠"],["🥐"],["🍞"],["🥖"],["🥨"],["🧀"],["🥚"],["🍳"],["🥞"],["🥓"],["🥩"],["🍗"],["🍖"],["🌭"],["🍔"],["🍟"],["🍕"],["🥪"],["🥙"],["🌮"],["🌯"],["🥗"],["🥘"],["🥫"],["🍝"],["🍜"],["🍲"],["🍛"],["🍣"],["🍱"],["🥟"],["🍤"],["🍙"],["🍚"],["🍘"],["🍥"],["🥠"],["🍢"],["🍡"],["🍧"],["🍨"],["🍦"],["🥧"],["🍰"],["🎂"],["🍮"],["🍭"],["🍬"],["🍫"],["🍿"],["🍩"],["🍪"],["🌰"],["🥜"],["🍯"],["🥛"],["🍼"],["☕️"],["🍵"],["🥤"],["🍶"],["🍺"],["🍻"],["🥂"],["🍷"],["🥃"],["🍸"],["🍹"],["🍾"],["🥄"],["🍴"],["🍽"],["🥣"],["🥡"],["🥢"]],"type":"foodAndDrink"},{"emojis":[["⚽️"],["🏀"],["🏈"],["⚾️"],["🎾"],["🏐"],["🏉"],["🎱"],["🏓"],["🏸"],["🥅"],["🏒"],["🏑"],["🏏"],["⛳️"],["🏹"],["🎣"],["🥊"],["🥋"],["🎽"],["⛸"],["🥌"],["🛷"],["🎿"],["⛷"],["🏂"],["🏋️‍♀️","🏋🏻‍♀️","🏋🏼‍♀️","🏋🏽‍♀️","🏋🏾‍♀️","🏋🏿‍♀️"],["🏋️‍♂️","🏋🏻‍♂️","🏋🏼‍♂️","🏋🏽‍♂️","🏋🏾‍♂️","🏋🏿‍♂️"],["🤼‍♀️"],["🤼‍♂️"],["🤸‍♀️","🤸🏻‍♀️","🤸🏼‍♀️","🤸🏽‍♀️","🤸🏾‍♀️","🤸🏿‍♀️"],["🤸‍♂️","🤸🏻‍♂️","🤸🏼‍♂️","🤸🏽‍♂️","🤸🏾‍♂️","🤸🏿‍♂️"],["⛹️‍♀️","⛹🏻‍♀️","⛹🏼‍♀️","⛹🏽‍♀️","⛹🏾‍♀️","⛹🏿‍♀️"],["⛹️‍♂️","⛹🏻‍♂️","⛹🏼‍♂️","⛹🏽‍♂️","⛹🏾‍♂️","⛹🏿‍♂️"],["🤺️"],["🤾‍♀️","🤾🏻‍♀️","🤾🏼‍♀️","🤾🏾‍♀️","🤾🏾‍♀️","🤾🏿‍♀️"],["🤾‍♂️","🤾🏻‍♂️","🤾🏼‍♂️","🤾🏽‍♂️","🤾🏾‍♂️","🤾🏿‍♂️"],["🏌️‍♀️","🏌🏻‍♀️","🏌🏼‍♀️","🏌🏽‍♀️","🏌🏾‍♀️","🏌🏿‍♀️"],["🏌️‍♂️","🏌🏻‍♂️","🏌🏼‍♂️","🏌🏽‍♂️","🏌🏾‍♂️","🏌🏿‍♂️"],["🏇","🏇🏻","🏇🏼","🏇🏽","🏇🏾","🏇🏿"],["🧘‍♀️","🧘🏻‍♀️","🧘🏼‍♀️","🧘🏽‍♀️","🧘🏾‍♀️","🧘🏿‍♀️"],["🧘‍♂️","🧘🏻‍♂️","🧘🏼‍♂️","🧘🏽‍♂️","🧘🏾‍♂️","🧘🏿‍♂️"],["🏄‍♀️","🏄🏻‍♀️","🏄🏼‍♀️","🏄🏽‍♀️","🏄🏾‍♀️","🏄🏿‍♀️"],["🏄‍♂️","🏄🏻‍♂️","🏄🏼‍♂️","🏄🏽‍♂️","🏄🏾‍♂️","🏄🏿‍♂️"],["🏊‍♀️","🏊🏻‍♀️","🏊🏼‍♀️","🏊🏽‍♀️","🏊🏾‍♀️","🏊🏿‍♀️"],["🏊‍♂️","🏊🏻‍♂️","🏊🏼‍♂️","🏊🏽‍♂️","🏊🏾‍♂️","🏊🏿‍♂️"],["🤽‍♀️","🤽🏻‍♀️","🤽🏼‍♀️","🤽🏽‍♀️","🤽🏾‍♀️","🤽🏿‍♀️"],["🤽‍♂️","🤽🏻‍♂️","🤽🏼‍♂️","🤽🏽‍♂️","🤽🏾‍♂️","🤽🏿‍♂️"],["🚣‍♀️","🚣🏻‍♀️","🚣🏼‍♀️","🚣🏽‍♀️","🚣🏾‍♀️","🚣🏿‍♀️"],["🚣‍♂️","🚣🏻‍♂️","🚣🏼‍♂️","🚣🏽‍♂️","🚣🏾‍♂️","🚣🏿‍♂️"],["🧗‍♀️","🧗🏻‍♀️","🧗🏼‍♀️","🧗🏽‍♀️","🧗🏾‍♀️","🧗🏿‍♀️"],["🧗‍♂️","🧗🏻‍♂️","🧗🏼‍♂️","🧗🏽‍♂️","🧗🏾‍♂️","🧗🏿‍♂️"],["🚵‍♀️","🚵🏻‍♀️","🚵🏼‍♀️","🚵🏽‍♀️","🚵🏾‍♀️","🚵🏿‍♀️"],["🚵‍♂️","🚵🏻‍♂️","🚵🏼‍♂️","🚵🏽‍♂️","🚵🏾‍♂️","🚵🏿‍♂️"],["🚴‍♀️","🚴🏻‍♀️","🚴🏼‍♀️","🚴🏽‍♀️","🚴🏾‍♀️","🚴🏿‍♀️"],["🚴‍♂️","🚴🏻‍♂️","🚴🏼‍♂️","🚴🏽‍♂️","🚴🏾‍♂️","🚴🏿‍♂️"],["🏆"],["🥇"],["🥈"],["🥉"],["🏅"],["🎖"],["🏵"],["🎗"],["🎫"],["🎟"],["🎪"],["🤹‍♀️","🤹🏻‍♀️","🤹🏼‍♀️","🤹🏽‍♀️","🤹🏾‍♀️","🤹🏿‍♀️"],["🤹‍♂️","🤹🏻‍♂️","🤹🏼‍♂️","🤹🏽‍♂️","🤹🏾‍♂️","🤹🏿‍♂️"],["🎭"],["🎨"],["🎬"],["🎤"],["🎧"],["🎼"],["🎹"],["🥁"],["🎷"],["🎺"],["🎸"],["🎻"],["🎲"],["🎯"],["🎳"],["🎮"],["🎰"]],"type":"activity"},{"emojis":[["🚗"],["🚕"],["🚙"],["🚌"],["🚎"],["🏎"],["🚓"],["🚑"],["🚒"],["🚐"],["🚚"],["🚛"],["🚜"],["🛴"],["🚲"],["🛵"],["🏍"],["🚨"],["🚔"],["🚍"],["🚘"],["🚖"],["🚡"],["🚠"],["🚟"],["🚃"],["🚋"],["🚞"],["🚝"],["🚄"],["🚅"],["🚈"],["🚂"],["🚆"],["🚇"],["🚊"],["🚉"],["✈️"],["🛫"],["🛬"],["🛩"],["💺"],["🛰"],["🚀"],["🛸"],["🚁"],["🛶"],["⛵️"],["🚤"],["🛥"],["🛳"],["⛴"],["🚢"],["⚓️"],["⛽️"],["🚧"],["🚦"],["🚥"],["🚏"],["🗺"],["🗿"],["🗽"],["🗼"],["🏰"],["🏯"],["🏟"],["🎡"],["🎢"],["🎠"],["⛲️"],["⛱"],["🏖"],["🏝"],["🏜"],["🌋"],["⛰"],["🏔"],["🗻"],["🏕"],["⛺️"],["🏠"],["🏡"],["🏘"],["🏚"],["🏗"],["🏭"],["🏢"],["🏬"],["🏣"],["🏤"],["🏥"],["🏦"],["🏨"],["🏪"],["🏫"],["🏩"],["💒"],["🏛"],["⛪️"],["🕌"],["🕍"],["🕋"],["⛩"],["🛤"],["🛣"],["🗾"],["🎑"],["🏞"],["🌅"],["🌄"],["🌠"],["🎇"],["🎆"],["🌇"],["🌆"],["🏙"],["🌃"],["🌌"],["🌉"],["🌁"]],"type":"travelAndPlaces"},{"emojis":[["⌚️"],["📱"],["📲"],["💻"],["⌨️"],["🖥"],["🖨"],["🖱"],["🖲"],["🕹"],["🗜"],["💽"],["💾"],["💿"],["📀"],["📼"],["📷"],["📸"],["📹"],["🎥"],["📽"],["🎞"],["📞"],["☎️"],["📟"],["📠"],["📺"],["📻"],["🎙"],["🎚"],["🎛"],["⏱"],["⏲"],["⏰"],["🕰"],["⌛️"],["⏳"],["📡"],["🔋"],["🔌"],["💡"],["🔦"],["🕯"],["🗑"],["🛢"],["💸"],["💵"],["💴"],["💶"],["💷"],["💰"],["💳"],["💎"],["⚖️"],["🔧"],["🔨"],["⚒"],["🛠"],["⛏"],["🔩"],["⚙️"],["⛓"],["🔫"],["💣"],["🔪"],["🗡"],["⚔️"],["🛡"],["🚬"],["⚰️"],["⚱️"],["🏺"],["🔮"],["📿"],["💈"],["⚗️"],["🔭"],["🔬"],["🕳"],["💊"],["💉"],["🌡"],["🚽"],["🚰"],["🚿"],["🛁"],["🛀"],["🛀🏻"],["🛀🏼"],["🛀🏽"],["🛀🏾"],["🛀🏿"],["🛎"],["🔑"],["🗝"],["🚪"],["🛋"],["🛏"],["🛌"],["🖼"],["🛍"],["🛒"],["🎁"],["🎈"],["🎏"],["🎀"],["🎊"],["🎉"],["🎎"],["🏮"],["🎐"],["✉️"],["📩"],["📨"],["📧"],["💌"],["📥"],["📤"],["📦"],["🏷"],["📪"],["📫"],["📬"],["📭"],["📮"],["📯"],["📜"],["📃"],["📄"],["📑"],["📊"],["📈"],["📉"],["🗒"],["🗓"],["📆"],["📅"],["📇"],["🗃"],["🗳"],["🗄"],["📋"],["📁"],["📂"],["🗂"],["🗞"],["📰"],["📓"],["📔"],["📒"],["📕"],["📗"],["📘"],["📙"],["📚"],["📖"],["🔖"],["🔗"],["📎"],["🖇"],["📐"],["📏"],["📌"],["📍"],["✂️"],["🖊"],["🖋"],["✒️"],["🖌"],["🖍"],["📝"],["✏️"],["🔍"],["🔎"],["🔏"],["🔐"],["🔒"],["🔓"]],"type":"objects"},{"emojis":[["❤️"],["🧡"],["💛"],["💚"],["💙"],["💜"],["🖤"],["💔"],["❣️"],["💕"],["💞"],["💓"],["💗"],["💖"],["💘"],["💝"],["💟"],["☮️"],["✝️"],["☪️"],["🕉"],["☸️"],["✡️"],["🔯"],["🕎"],["☯️"],["☦️"],["🛐"],["⛎"],["♈️"],["♉️"],["♊️"],["♋️"],["♌️"],["♍️"],["♎️"],["♏️"],["♐️"],["♑️"],["♒️"],["♓️"],["🆔"],["⚛️"],["🉑"],["☢️"],["☣️"],["📴"],["📳"],["🈶"],["🈚️"],["🈸"],["🈺"],["🈷️"],["✴️"],["🆚"],["💮"],["🉐"],["㊙️"],["㊗️"],["🈴"],["🈵"],["🈹"],["🈲"],["🅰️"],["🅱️"],["🆎"],["🆑"],["🅾️"],["🆘"],["❌"],["⭕️"],["🛑"],["⛔️"],["📛"],["🚫"],["💯"],["💢"],["♨️"],["🚷"],["🚯"],["🚳"],["🚱"],["🔞"],["📵"],["🚭"],["❗️"],["❕"],["❓"],["❔"],["‼️"],["⁉️"],["🔅"],["🔆"],["〽️"],["⚠️"],["🚸"],["🔱"],["⚜️"],["🔰"],["♻️"],["✅"],["🈯️"],["💹"],["❇️"],["✳️"],["❎"],["🌐"],["💠"],["Ⓜ️"],["🌀"],["💤"],["🏧"],["🚾"],["♿️"],["🅿️"],["🈳"],["🈂️"],["🛂"],["🛃"],["🛄"],["🛅"],["🚹"],["🚺"],["🚼"],["🚻"],["🚮"],["🎦"],["📶"],["🈁"],["🔣"],["ℹ️"],["🔤"],["🔡"],["🔠"],["🆖"],["🆗"],["🆙"],["🆒"],["🆕"],["🆓"],["0️⃣"],["1️⃣"],["2️⃣"],["3️⃣"],["4️⃣"],["5️⃣"],["6️⃣"],["7️⃣"],["8️⃣"],["9️⃣"],["🔟"],["🔢"],["#️⃣"],["*️⃣"],["⏏️"],["▶️"],["⏸"],["⏯"],["⏹"],["⏺"],["⏭"],["⏮"],["⏩"],["⏪"],["⏫"],["⏬"],["◀️"],["🔼"],["🔽"],["➡️"],["⬅️"],["⬆️"],["⬇️"],["↗️"],["↘️"],["↙️"],["↖️"],["↕️"],["↔️"],["↪️"],["↩️"],["⤴️"],["⤵️"],["🔀"],["🔁"],["🔂"],["🔄"],["🔃"],["🎵"],["🎶"],["➕"],["➖"],["➗"],["✖️"],["💲"],["💱"],["™️"],["©️"],["®️"],["〰️"],["➰"],["➿"],["🔚"],["🔙"],["🔛"],["🔝"],["🔜"],["✔️"],["☑️"],["🔘"],["⚪️"],["⚫️"],["🔴"],["🔵"],["🔺"],["🔻"],["🔸"],["🔹"],["🔶"],["🔷"],["🔳"],["🔲"],["▪️"],["▫️"],["◾️"],["◽️"],["◼️"],["◻️"],["⬛️"],["⬜️"],["🔈"],["🔇"],["🔉"],["🔊"],["🔔"],["🔕"],["📣"],["📢"],["👁‍🗨"],["💬"],["💭"],["🗯"],["♠️"],["♣️"],["♥️"],["♦️"],["🃏"],["🎴"],["🀄️"],["🕐"],["🕑"],["🕒"],["🕓"],["🕔"],["🕕"],["🕖"],["🕗"],["🕘"],["🕙"],["🕚"],["🕛"],["🕜"],["🕝"],["🕞"],["🕟"],["🕠"],["🕡"],["🕢"],["🕣"],["🕤"],["🕥"],["🕦"],["🕧"]],"type":"symbols"},{"emojis":[["🏳️"],["🏴"],["🏁"],["🚩"],["🏳️‍🌈"],["🇦🇫"],["🇦🇽"],["🇦🇱"],["🇩🇿"],["🇦🇸"],["🇦🇩"],["🇦🇴"],["🇦🇮"],["🇦🇶"],["🇦🇬"],["🇦🇷"],["🇦🇲"],["🇦🇼"],["🇦🇺"],["🇦🇹"],["🇦🇿"],["🇧🇸"],["🇧🇭"],["🇧🇩"],["🇧🇧"],["🇧🇾"],["🇧🇪"],["🇧🇿"],["🇧🇯"],["🇧🇲"],["🇧🇹"],["🇧🇴"],["🇧🇦"],["🇧🇼"],["🇧🇷"],["🇮🇴"],["🇻🇬"],["🇧🇳"],["🇧🇬"],["🇧🇫"],["🇧🇮"],["🇰🇭"],["🇨🇲"],["🇨🇦"],["🇮🇨"],["🇨🇻"],["🇧🇶"],["🇰🇾"],["🇨🇫"],["🇹🇩"],["🇨🇱"],["🇨🇳"],["🇨🇽"],["🇨🇨"],["🇨🇴"],["🇰🇲"],["🇨🇬"],["🇨🇩"],["🇨🇰"],["🇨🇷"],["🇨🇮"],["🇭🇷"],["🇨🇺"],["🇨🇼"],["🇨🇾"],["🇨🇿"],["🇩🇰"],["🇩🇯"],["🇩🇲"],["🇩🇴"],["🇪🇨"],["🇪🇬"],["🇸🇻"],["🇬🇶"],["🇪🇷"],["🇪🇪"],["🇪🇹"],["🇪🇺"],["🇫🇰"],["🇫🇴"],["🇫🇯"],["🇫🇮"],["🇫🇷"],["🇬🇫"],["🇵🇫"],["🇹🇫"],["🇬🇦"],["🇬🇲"],["🇬🇪"],["🇩🇪"],["🇬🇭"],["🇬🇮"],["🇬🇷"],["🇬🇱"],["🇬🇩"],["🇬🇵"],["🇬🇺"],["🇬🇹"],["🇬🇬"],["🇬🇳"],["🇬🇼"],["🇬🇾"],["🇭🇹"],["🇭🇳"],["🇭🇰"],["🇭🇺"],["🇮🇸"],["🇮🇳"],["🇮🇩"],["🇮🇷"],["🇮🇶"],["🇮🇪"],["🇮🇲"],["🇮🇱"],["🇮🇹"],["🇯🇲"],["🇯🇵"],["🎌"],["🇯🇪"],["🇯🇴"],["🇰🇿"],["🇰🇪"],["🇰🇮"],["🇽🇰"],["🇰🇼"],["🇰🇬"],["🇱🇦"],["🇱🇻"],["🇱🇧"],["🇱🇸"],["🇱🇷"],["🇱🇾"],["🇱🇮"],["🇱🇹"],["🇱🇺"],["🇲🇴"],["🇲🇰"],["🇲🇬"],["🇲🇼"],["🇲🇾"],["🇲🇻"],["🇲🇱"],["🇲🇹"],["🇲🇭"],["🇲🇶"],["🇲🇷"],["🇲🇺"],["🇾🇹"],["🇲🇽"],["🇫🇲"],["🇲🇩"],["🇲🇨"],["🇲🇳"],["🇲🇪"],["🇲🇸"],["🇲🇦"],["🇲🇿"],["🇲🇲"],["🇳🇦"],["🇳🇷"],["🇳🇵"],["🇳🇱"],["🇳🇨"],["🇳🇿"],["🇳🇮"],["🇳🇪"],["🇳🇬"],["🇳🇺"],["🇳🇫"],["🇰🇵"],["🇲🇵"],["🇳🇴"],["🇴🇲"],["🇵🇰"],["🇵🇼"],["🇵🇸"],["🇵🇦"],["🇵🇬"],["🇵🇾"],["🇵🇪"],["🇵🇭"],["🇵🇳"],["🇵🇱"],["🇵🇹"],["🇵🇷"],["🇶🇦"],["🇷🇪"],["🇷🇴"],["🇷🇺"],["🇷🇼"],["🇼🇸"],["🇸🇲"],["🇸🇦"],["🇸🇳"],["🇷🇸"],["🇸🇨"],["🇸🇱"],["🇸🇬"],["🇸🇽"],["🇸🇰"],["🇸🇮"],["🇬🇸"],["🇸🇧"],["🇸🇴"],["🇿🇦"],["🇰🇷"],["🇸🇸"],["🇪🇸"],["🇱🇰"],["🇧🇱"],["🇸🇭"],["🇰🇳"],["🇱🇨"],["🇵🇲"],["🇻🇨"],["🇸🇩"],["🇸🇷"],["🇸🇿"],["🇸🇪"],["🇨🇭"],["🇸🇾"],["🇹🇼"],["🇹🇯"],["🇹🇿"],["🇹🇭"],["🇹🇱"],["🇹🇬"],["🇹🇰"],["🇹🇴"],["🇹🇹"],["🇹🇳"],["🇹🇷"],["🇹🇲"],["🇹🇨"],["🇹🇻"],["🇻🇮"],["🇺🇬"],["🇺🇦"],["🇦🇪"],["🇬🇧"],["🏴󠁧󠁢󠁥󠁮󠁧󠁿"],["🏴󠁧󠁢󠁳󠁣󠁴󠁿"],["🏴󠁧󠁢󠁷󠁬󠁳󠁿"],["🇺🇸"],["🇺🇾"],["🇺🇿"],["🇻🇺"],["🇻🇦"],["🇻🇪"],["🇻🇳"],["🇼🇫"],["🇪🇭"],["🇾🇪"],["🇿🇲"],["🇿🇼"]],"type":"flags"}]')}},o={};function r(e){var t=o[e];if(void 0!==t)return t.exports;var i=o[e]={id:e,loaded:!1,exports:{}};return a[e].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=a,r.amdO={},e=[],r.O=(t,i,s,n)=>{if(!i){var a=1/0;for(d=0;d<e.length;d++){for(var[i,s,n]=e[d],o=!0,c=0;c<i.length;c++)(!1&n||a>=n)&&Object.keys(r.O).every((e=>r.O[e](i[c])))?i.splice(c--,1):(o=!1,n<a&&(a=n));if(o){e.splice(d--,1);var l=s();void 0!==l&&(t=l)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[i,s,n]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},i=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(e,s){if(1&s&&(e=this(e)),8&s)return e;if("object"==typeof e&&e){if(4&s&&e.__esModule)return e;if(16&s&&"function"==typeof e.then)return e}var n=Object.create(null);r.r(n);var a={};t=t||[null,i({}),i([]),i(i)];for(var o=2&s&&e;"object"==typeof o&&!~t.indexOf(o);o=i(o))Object.getOwnPropertyNames(o).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,r.d(n,a),n},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,i)=>(r.f[i](e,t),t)),[])),r.u=e=>"xabber."+e+".js",r.miniCssF=e=>{},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s={},n="xabber.web:",r.l=(e,t,i,a)=>{if(s[e])s[e].push(t);else{var o,c;if(void 0!==i)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var h=l[d];if(h.getAttribute("src")==e||h.getAttribute("data-webpack")==n+i){o=h;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",n+i),o.src=e),s[e]=[t];var g=(t,i)=>{o.onerror=o.onload=null,clearTimeout(u);var n=s[e];if(delete s[e],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((e=>e(i))),t)return t(i)},u=setTimeout(g.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=g.bind(null,o.onerror),o.onload=g.bind(null,o.onload),c&&document.head.appendChild(o)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{r.b=document.baseURI||self.location.href;var e={179:0};r.f.j=(t,i)=>{var s=r.o(e,t)?e[t]:void 0;if(0!==s)if(s)i.push(s[2]);else{var n=new Promise(((i,n)=>s=e[t]=[i,n]));i.push(s[2]=n);var a=r.p+r.u(t),o=new Error;r.l(a,(i=>{if(r.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var n=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",o.name="ChunkLoadError",o.type=n,o.request=a,s[1](o)}}),"chunk-"+t,t)}},r.O.j=t=>0===e[t];var t=(t,i)=>{var s,n,[a,o,c]=i,l=0;if(a.some((t=>0!==e[t]))){for(s in o)r.o(o,s)&&(r.m[s]=o[s]);if(c)var d=c(r)}for(t&&t(i);l<a.length;l++)n=a[l],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(d)},i=self.webpackChunkxabber_web=self.webpackChunkxabber_web||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var c=r.O(void 0,[1216],(()=>r(56214)));c=r.O(c)})();
//# sourceMappingURL=xabber.main.js.map